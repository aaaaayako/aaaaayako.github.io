function style_html(html_source, options) {
    var multi_parser, indent_size, indent_character, max_char, brace_style;
    for (indent_size = (options = options || {}).indent_size || 4, indent_character = options.indent_char || " ", 
    brace_style = options.brace_style || "collapse", max_char = 0 == options.max_char ? 1 / 0 : options.max_char || 70, 
    unformatted = options.unformatted || [ "a" ], (multi_parser = new function() {
        return this.pos = 0, this.token = "", this.current_mode = "CONTENT", this.tags = {
            parent: "parent1",
            parentcount: 1,
            parent1: ""
        }, this.tag_type = "", this.token_text = this.last_token = this.last_text = this.token_type = "", 
        this.Utils = {
            whitespace: "\n\r\t ".split(""),
            single_token: "br,input,link,meta,!doctype,basefont,base,area,hr,wbr,param,img,isindex,?xml,embed".split(","),
            extra_liners: "head,body,/html".split(","),
            in_array: function(what, arr) {
                for (var i = 0; i < arr.length; i++) if (what === arr[i]) return !0;
                return !1;
            }
        }, this.get_content = function() {
            for (var input_char = "", content = [], space = !1; "<" !== this.input.charAt(this.pos); ) {
                if (this.pos >= this.input.length) return content.length ? content.join("") : [ "", "TK_EOF" ];
                if (input_char = this.input.charAt(this.pos), this.pos++, this.line_char_count++, 
                this.Utils.in_array(input_char, this.Utils.whitespace)) content.length && (space = !0), 
                this.line_char_count--; else {
                    if (space) {
                        if (this.line_char_count >= this.max_char) {
                            content.push("\n");
                            for (var i = 0; i < this.indent_level; i++) content.push(this.indent_string);
                            this.line_char_count = 0;
                        } else content.push(" "), this.line_char_count++;
                        space = !1;
                    }
                    content.push(input_char);
                }
            }
            return content.length ? content.join("") : "";
        }, this.get_contents_to = function(name) {
            if (this.pos == this.input.length) return [ "", "TK_EOF" ];
            var content = "", reg_match = new RegExp("</" + name + "\\s*>", "igm");
            reg_match.lastIndex = this.pos;
            var reg_array = reg_match.exec(this.input), end_script = reg_array ? reg_array.index : this.input.length;
            return this.pos < end_script && (content = this.input.substring(this.pos, end_script), 
            this.pos = end_script), content;
        }, this.record_tag = function(tag) {
            this.tags[tag + "count"] ? (this.tags[tag + "count"]++, this.tags[tag + this.tags[tag + "count"]] = this.indent_level) : (this.tags[tag + "count"] = 1, 
            this.tags[tag + this.tags[tag + "count"]] = this.indent_level), this.tags[tag + this.tags[tag + "count"] + "parent"] = this.tags.parent, 
            this.tags.parent = tag + this.tags[tag + "count"];
        }, this.retrieve_tag = function(tag) {
            if (this.tags[tag + "count"]) {
                for (var temp_parent = this.tags.parent; temp_parent && tag + this.tags[tag + "count"] !== temp_parent; ) temp_parent = this.tags[temp_parent + "parent"];
                temp_parent && (this.indent_level = this.tags[tag + this.tags[tag + "count"]], this.tags.parent = this.tags[temp_parent + "parent"]), 
                delete this.tags[tag + this.tags[tag + "count"] + "parent"], delete this.tags[tag + this.tags[tag + "count"]], 
                1 == this.tags[tag + "count"] ? delete this.tags[tag + "count"] : this.tags[tag + "count"]--;
            }
        }, this.get_tag = function() {
            var input_char = "", content = [], space = !1;
            do {
                if (this.pos >= this.input.length) return content.length ? content.join("") : [ "", "TK_EOF" ];
                input_char = this.input.charAt(this.pos), this.pos++, this.line_char_count++, this.Utils.in_array(input_char, this.Utils.whitespace) ? (space = !0, 
                this.line_char_count--) : ("'" !== input_char && '"' !== input_char || content[1] && "!" === content[1] || (input_char += this.get_unformatted(input_char), 
                space = !0), "=" === input_char && (space = !1), content.length && "=" !== content[content.length - 1] && ">" !== input_char && space && (this.line_char_count >= this.max_char ? (this.print_newline(!1, content), 
                this.line_char_count = 0) : (content.push(" "), this.line_char_count++), space = !1), 
                content.push(input_char));
            } while (">" !== input_char);
            var tag_index, tag_complete = content.join("");
            tag_index = -1 != tag_complete.indexOf(" ") ? tag_complete.indexOf(" ") : tag_complete.indexOf(">");
            var tag_check = tag_complete.substring(1, tag_index).toLowerCase();
            if ("/" === tag_complete.charAt(tag_complete.length - 2) || this.Utils.in_array(tag_check, this.Utils.single_token)) this.tag_type = "SINGLE"; else if ("script" === tag_check) this.record_tag(tag_check), 
            this.tag_type = "SCRIPT"; else if ("style" === tag_check) this.record_tag(tag_check), 
            this.tag_type = "STYLE"; else if (this.Utils.in_array(tag_check, unformatted)) comment = this.get_unformatted("</" + tag_check + ">", tag_complete), 
            content.push(comment), this.tag_type = "SINGLE"; else if ("!" === tag_check.charAt(0)) if (-1 != tag_check.indexOf("[if")) -1 != tag_complete.indexOf("!IE") && (comment = this.get_unformatted("--\x3e", tag_complete), 
            content.push(comment)), this.tag_type = "START"; else if (-1 != tag_check.indexOf("[endif")) this.tag_type = "END", 
            this.unindent(); else if (-1 != tag_check.indexOf("[cdata[")) comment = this.get_unformatted("]]>", tag_complete), 
            content.push(comment), this.tag_type = "SINGLE"; else {
                var comment = this.get_unformatted("--\x3e", tag_complete);
                content.push(comment), this.tag_type = "SINGLE";
            } else "/" === tag_check.charAt(0) ? (this.retrieve_tag(tag_check.substring(1)), 
            this.tag_type = "END") : (this.record_tag(tag_check), this.tag_type = "START"), 
            this.Utils.in_array(tag_check, this.Utils.extra_liners) && this.print_newline(!0, this.output);
            return content.join("");
        }, this.get_unformatted = function(delimiter, orig_tag) {
            if (orig_tag && -1 != orig_tag.indexOf(delimiter)) return "";
            var input_char = "", content = "", space = !0;
            do {
                if (this.pos >= this.input.length) return content;
                if (input_char = this.input.charAt(this.pos), this.pos++, this.Utils.in_array(input_char, this.Utils.whitespace)) {
                    if (!space) {
                        this.line_char_count--;
                        continue;
                    }
                    if ("\n" === input_char || "\r" === input_char) {
                        content += "\n", this.line_char_count = 0;
                        continue;
                    }
                }
                content += input_char, this.line_char_count++, space = !0;
            } while (-1 == content.indexOf(delimiter));
            return content;
        }, this.get_token = function() {
            var token;
            if ("TK_TAG_SCRIPT" === this.last_token || "TK_TAG_STYLE" === this.last_token) {
                var type = this.last_token.substr(7);
                return "string" != typeof (token = this.get_contents_to(type)) ? token : [ token, "TK_" + type ];
            }
            return "CONTENT" === this.current_mode ? "string" != typeof (token = this.get_content()) ? token : [ token, "TK_CONTENT" ] : "TAG" === this.current_mode ? "string" != typeof (token = this.get_tag()) ? token : [ token, "TK_TAG_" + this.tag_type ] : void 0;
        }, this.get_full_indent = function(level) {
            return (level = this.indent_level + level || 0) < 1 ? "" : Array(level + 1).join(this.indent_string);
        }, this.printer = function(js_source, indent_character, indent_size, max_char, brace_style) {
            this.input = js_source || "", this.output = [], this.indent_character = indent_character, 
            this.indent_string = "", this.indent_size = indent_size, this.brace_style = brace_style, 
            this.indent_level = 0, this.max_char = max_char, this.line_char_count = 0;
            for (var i = 0; i < this.indent_size; i++) this.indent_string += this.indent_character;
            this.print_newline = function(ignore, arr) {
                if (this.line_char_count = 0, arr && arr.length) {
                    if (!ignore) for (;this.Utils.in_array(arr[arr.length - 1], this.Utils.whitespace); ) arr.pop();
                    arr.push("\n");
                    for (var i = 0; i < this.indent_level; i++) arr.push(this.indent_string);
                }
            }, this.print_token = function(text) {
                this.output.push(text);
            }, this.indent = function() {
                this.indent_level++;
            }, this.unindent = function() {
                this.indent_level > 0 && this.indent_level--;
            };
        }, this;
    }()).printer(html_source, indent_character, indent_size, max_char, brace_style); ;) {
        var t = multi_parser.get_token();
        if (multi_parser.token_text = t[0], multi_parser.token_type = t[1], "TK_EOF" === multi_parser.token_type) break;
        switch (multi_parser.token_type) {
          case "TK_TAG_START":
            multi_parser.print_newline(!1, multi_parser.output), multi_parser.print_token(multi_parser.token_text), 
            multi_parser.indent(), multi_parser.current_mode = "CONTENT";
            break;

          case "TK_TAG_STYLE":
          case "TK_TAG_SCRIPT":
            multi_parser.print_newline(!1, multi_parser.output), multi_parser.print_token(multi_parser.token_text), 
            multi_parser.current_mode = "CONTENT";
            break;

          case "TK_TAG_END":
            if ("TK_CONTENT" === multi_parser.last_token && "" === multi_parser.last_text) {
                var tag_name = multi_parser.token_text.match(/\w+/)[0], tag_extracted_from_last_output = multi_parser.output[multi_parser.output.length - 1].match(/<\s*(\w+)/);
                null !== tag_extracted_from_last_output && tag_extracted_from_last_output[1] === tag_name || multi_parser.print_newline(!0, multi_parser.output);
            }
            multi_parser.print_token(multi_parser.token_text), multi_parser.current_mode = "CONTENT";
            break;

          case "TK_TAG_SINGLE":
            multi_parser.print_newline(!1, multi_parser.output), multi_parser.print_token(multi_parser.token_text), 
            multi_parser.current_mode = "CONTENT";
            break;

          case "TK_CONTENT":
            "" !== multi_parser.token_text && multi_parser.print_token(multi_parser.token_text), 
            multi_parser.current_mode = "TAG";
            break;

          case "TK_STYLE":
          case "TK_SCRIPT":
            if ("" !== multi_parser.token_text) {
                multi_parser.output.push("\n");
                var text = multi_parser.token_text;
                if ("TK_SCRIPT" == multi_parser.token_type) _beautifier = "function" == typeof js_beautify && js_beautify; else if ("TK_STYLE" == multi_parser.token_type) var _beautifier = "function" == typeof css_beautify && css_beautify;
                if ("keep" == options.indent_scripts) script_indent_level = 0; else if ("separate" == options.indent_scripts) script_indent_level = -multi_parser.indent_level; else var script_indent_level = 1;
                var indentation = multi_parser.get_full_indent(script_indent_level);
                if (_beautifier) text = _beautifier(text.replace(/^\s*/, indentation), options); else {
                    var _level = text.match(/^\s*/)[0].match(/[^\n\r]*$/)[0].split(multi_parser.indent_string).length - 1, reindent = multi_parser.get_full_indent(script_indent_level - _level);
                    text = text.replace(/^\s*/, indentation).replace(/\r\n|\r|\n/g, "\n" + reindent).replace(/\s*$/, "");
                }
                text && (multi_parser.print_token(text), multi_parser.print_newline(!0, multi_parser.output));
            }
            multi_parser.current_mode = "TAG";
        }
        multi_parser.last_token = multi_parser.token_type, multi_parser.last_text = multi_parser.token_text;
    }
    return multi_parser.output.join("");
}

function intersection(arr1, arr2) {
    var temp = [];
    for (var i in arr1) {
        var element = arr1[i];
        arr2.indexOf(element) > -1 && temp.push(element);
    }
    return temp;
}

function SCSSSupport(pEditor) {
    function ThemeImport(cssURL, themeURL) {
        this.cssURL = cssURL, this.themeURL = themeURL, this.status = "", this.isBootstrap = !1, 
        this.isDirty = !1, this.isTemp = function() {
            var uri = new URI(qualifyURL(this.themeURL));
            return pApp.isWeb() ? 0 === this.themeURL.indexOf("http://") || 0 === this.themeURL.indexOf("https://") : pApp.isDesktop() ? "file" != uri.protocol() : void 0;
        };
    }
    this.editor = pEditor;
    var self = this, parseworker = null;
    this._imports = [], this._currentImport = null;
    self = this;
    this.load = function() {
        var self = this, $realHead = self.editor.$realHead, $fakeHead = $(self.editor.contentDocument.head), fakeUri = $fakeHead.find("base").attr("href");
        if (self.editor.editorInput.documentBase() == fakeUri) {
            var realHash = this._hashHead($realHead), fakeHash = this._hashHead($fakeHead);
            realHash.toString() != fakeHash.toString() && this._rewriteHead();
        } else this._rewriteHead();
    }, this.getTheme = function() {
        return this._currentImport;
    }, this._hashHead = function($head) {
        var ret = [];
        return $head.find("link[rel='stylesheet']:not([p-inject]), style:not([p-inject])").each(function() {
            this.getAttribute("href") ? ret.push(this.getAttribute("href")) : ret.push(this.innerHTML);
        }), ret;
    }, this._rewriteHead = function() {
        var $realHead = this.editor.$realHead, $fakeHead = $(this.editor.contentDocument.head), html = "<base href='" + this.editor.editorInput.documentBase() + "'>", self = this;
        if (this._currentImport) {
            var url = this._currentImport.cssURL;
            $realHead.find("link[href='" + url + "'], style[href='" + url + "']").length || (this._currentImport = null, 
            $(this.editor).trigger("pThemeUnload", [ this._imports[url] ]));
        }
        $realHead.find("link[rel='stylesheet'], style").each(function() {
            var href = this.getAttribute("href");
            href && self._currentImport && href == self._currentImport.cssURL && self._currentImport.css ? html = html + '<style href="' + href + '">' + self._currentImport.css + "</style>" : (html += this.outerHTML, 
            href && self._tryTheme(href));
        }), html += ' <style p-inject>\t              div{-webkit-transition:none;-webkit-transition-delay:0s}iframe{pointer-events:none}.modal{position:relative!important;display:block!important;overflow:hidden!important;opacity:1!important}.modal .modal-dialog{-webkit-transform:none!important}.carousel .carousel-caption *,ul.pager>li{pointer-events:all}*{cursor:default!important}[contenteditable=true],[contenteditable=true] *{cursor:text!important}body{margin-bottom:10px;min-height:100%!important}br{display:block}body:empty,div:empty,form:empty,h1:empty,h2:empty,h3:empty,h4:empty,h5:empty,h6:empty,li:empty,p:empty{min-height:100px;font-size:25px;padding-left:10px;color:#777;background-color:rgba(0,0,0,.1);display:flex;align-items:center;justify-content:center}p:empty:after{content:"Empty p"!important}.container:empty:after{content:"Container"!important}.row:empty:after{content:"Row"!important}[class*=col-lg-]:empty:after,[class*=col-md-]:empty:after,[class*=col-sm-]:empty:after,[class*=col-xs-]:empty:after{content:"Column"!important}\t            </style>', 
        $fakeHead[0].innerHTML = html;
    }, this.serialize = function(from) {
        for (var i = self.getTheme(), res = "", x = 0; x < i.model.length; x++) {
            var c = i.model[x];
            c.type && "var" == c.type ? res = res + c.key + c.chunks.join("") : c.type && "CSSrule" == c.type ? res = res + c.key + c.value : "string" == typeof c && (res += c);
        }
        self.setSource(i, res, !1, from);
    }, this.setSource = function(i, source, initial, tag) {
        i.source = source, i.status = "compiling", i.isDirty = !initial, i.from = tag, parseworker && (parseworker._terminate = !0, 
        parseworker.terminate()), (parseworker = new Worker(parserWorkerBlob)).onmessage = function(oEvent) {
            var i = JSON.parse(oEvent.data), current = self._currentImport;
            $(self.editor).trigger("pThemeChange", [ i ], current.from), sass.compile(i.source, function(result) {
                oEvent.target._terminate || (current.source = i.source, current.version = i.version, 
                0 != result.status ? (current.status = "error", current.statusText = "Line: " + result.line + ", Column: " + result.column + ", Message: " + result.message, 
                i.lastValidModel && (current.model = i.lastValidModel)) : (current.lastValidModel = i.model.slice(0), 
                current.model = i.model.slice(0), current.status = "ok", current.css = result.text, 
                self.replace(current, current), self._rewriteHead()), $(self.editor).trigger("pThemeCompiled", [ current ]));
            });
        }, parseworker.postMessage(JSON.stringify(i));
    }, this.replace = function(oldImport, newImport) {
        if (oldImport.source = newImport.source, oldImport.css = newImport.css, "pCss" != newImport.from && (oldImport.variables = newImport.variables, 
        oldImport.cssrules = newImport.cssrules, oldImport.model = newImport.model), oldImport.error = !1, 
        oldImport.isDirty) {
            var $link = $(pEditor.contentDocument.head).find("link[rel=stylesheet][href='" + oldImport.cssURL + "']");
            if ($link.length > 0) ($style = $("<style>")).attr("href", oldImport.cssURL), $link.replaceWith($style); else var $style = $(pEditor.contentDocument.head).find("style[href='" + oldImport.cssURL + "']");
            $style.empty(), setTimeout(function() {
                $style[0].appendChild(document.createTextNode(newImport.css));
            }, 1);
        }
    }, this._tryTheme = function(cssURL) {
        var themeURL = cssURL.substr(0, cssURL.lastIndexOf(".")) + ".scss";
        if (themeURL.startsWith("http://") || themeURL.startsWith("https://")) u = themeURL; else var u = self.editor.editorInput.resolveURL(themeURL);
        var success = function(source) {
            var themeImport = new ThemeImport(cssURL, themeURL);
            themeImport.active = !0, themeImport.isDirty = !1, self._currentImport && cssURL && self._currentImport && cssURL != self._currentImport.cssURL || (self._currentImport = themeImport, 
            self._imports[cssURL] = themeImport, self.setSource(themeImport, source, !0), $(self.editor).trigger("pThemeLoaded", [ themeImport ]));
        };
        if (pApp.isDesktop && 0 == u.toString().indexOf("file:")) try {
            var data = pApp.fs.readFileSync(self.editor.editorInput.resolve(themeURL));
            success("" + data);
        } catch (e) {} else fetch(u.toString(), {
            credentials: "omit"
        }).then(function(res) {
            200 == res.status && res.text().then(function(text) {
                success(text);
            });
        });
    };
}

function getSelectedNodes() {
    var selection = pEditor._iframe.contentWindow.getSelection();
    if (selection.isCollapsed) return [];
    var node1 = selection.anchorNode, node2 = selection.focusNode, selectionAncestor = get_common_ancestor(node1, node2);
    return null == selectionAncestor ? [] : getNodesBetween(selectionAncestor, node1, node2);
}

function get_common_ancestor(a, b) {
    $parentsa = $(a).parents(), $parentsb = $(b).parents();
    var found = null;
    return $parentsa.each(function() {
        var thisa = this;
        if ($parentsb.each(function() {
            if (thisa == this) return found = this, !1;
        }), found) return !1;
    }), found;
}

function isDescendant(parent, child) {
    for (var node = child; null != node; ) {
        if (node == parent) return !0;
        node = node.parentNode;
    }
    return !1;
}

function getNodesBetween(rootNode, node1, node2) {
    for (var resultNodes = [], isBetweenNodes = !1, i = 0; i < rootNode.childNodes.length; i += 1) if (isDescendant(rootNode.childNodes[i], node1) || isDescendant(rootNode.childNodes[i], node2)) isBetweenNodes = 0 == resultNodes.length, 
    resultNodes.push(rootNode.childNodes[i]); else if (0 == resultNodes.length) ; else {
        if (!isBetweenNodes) return resultNodes;
        resultNodes.push(rootNode.childNodes[i]);
    }
    return 0 == resultNodes.length ? [ rootNode ] : isDescendant(resultNodes[resultNodes.length - 1], node1) || isDescendant(resultNodes[resultNodes.length - 1], node2) ? resultNodes : [ resultNodes[0] ];
}

function qualifyURL(url, doc) {
    if (new URI(url), doc || (doc = pEditor.contentDocument), !doc) return "";
    var a = doc.createElement("img");
    return a.src = url, a.src;
}

function chunk(arr, size) {
    for (var newArr = [], i = 0; i < arr.length; i += size) newArr.push(arr.slice(i, i + size));
    return newArr;
}

function dynamicSort(property) {
    var sortOrder = 1;
    return "-" === property[0] && (sortOrder = -1, property = property.substr(1)), function(a, b) {
        return (a[property] < b[property] ? -1 : a[property] > b[property] ? 1 : 0) * sortOrder;
    };
}

function chunk(arr, size) {
    for (var newArr = [], i = 0; i < arr.length; i += size) newArr.push(arr.slice(i, i + size));
    return newArr;
}

!function(root, factory) {
    "use strict";
    "function" == typeof define && define.amd ? define([], factory) : "object" == typeof exports ? module.exports = factory() : root.Sass = factory();
}(this, function() {
    function Sass(workerUrl) {
        if (!workerUrl && !globalWorkerUrl) throw new Error("Sass needs to be initialized with the URL of sass.worker.js - either via Sass.setWorkerUrl(url) or by new Sass(url)");
        globalWorkerUrl || (globalWorkerUrl = workerUrl);
        for (var key in this) "function" == typeof this[key] && (this[key] = this[key].bind(this));
        this._callbacks = {}, this._worker = new Worker(workerUrl || globalWorkerUrl), this._worker.addEventListener("message", this._handleWorkerMessage, !1);
    }
    !function() {
        "use strict";
        if ("undefined" != typeof __dirname) return __dirname;
        if ("undefined" == typeof document || !document.getElementsByTagName) return null;
        var currentScript = document.currentScript || function() {
            var scripts = document.getElementsByTagName("script");
            return scripts[scripts.length - 1];
        }(), path = currentScript && currentScript.src;
        path && ("/sass.js" === path.slice(-8) ? path.slice(0, -8) : "/sass.sync.js" === path.slice(-13) && path.slice(0, -13));
    }();
    var globalWorkerUrl, noop = function() {}, slice = [].slice;
    Sass.setWorkerUrl = function(workerUrl) {
        globalWorkerUrl = workerUrl;
    }, Sass.style = {
        nested: 0,
        expanded: 1,
        compact: 2,
        compressed: 3
    }, Sass.comments = {
        none: 0,
        default: 1
    }, Sass.prototype = {
        style: Sass.style,
        comments: Sass.comments,
        destroy: function() {
            this._worker && this._worker.terminate(), this._worker = null, this._callbacks = {}, 
            this._importer = null;
        },
        _handleWorkerMessage: function(event) {
            event.data.command && this[event.data.command](event.data.args), this._callbacks[event.data.id] && this._callbacks[event.data.id](event.data.result), 
            delete this._callbacks[event.data.id];
        },
        _dispatch: function(options, callback) {
            if (!this._worker) throw new Error("Sass worker has been terminated");
            options.id = "cb" + Date.now() + Math.random(), this._callbacks[options.id] = callback, 
            this._worker.postMessage(options);
        },
        _importerInit: function(args) {
            var done = function(result) {
                this._worker.postMessage({
                    command: "_importerFinish",
                    args: [ result ]
                });
            }.bind(this);
            try {
                this._importer(args[0], done);
            } catch (e) {
                throw done({
                    error: e.message
                }), e;
            }
        },
        importer: function(importerCallback, callback) {
            if ("function" != typeof importerCallback && null !== importerCallback) throw new Error("importer callback must either be a function or null");
            this._importer = importerCallback, this._worker.postMessage({
                command: "importer",
                args: [ Boolean(importerCallback) ]
            }), callback && callback();
        }
    };
    return "writeFile readFile listFiles removeFile clearFiles lazyFiles preloadFiles options compile compileFile".split(" ").forEach(function(command) {
        Sass.prototype[command] = function() {
            var callback = slice.call(arguments, -1)[0], args = slice.call(arguments, 0, -1);
            "function" != typeof callback && (args.push(callback), callback = noop), this._dispatch({
                command: command,
                args: args
            }, callback);
        };
    }), Sass.setWorkerUrl("/sass.worker.js"), Sass;
}), function(global, factory) {
    factory(global);
}("undefined" != typeof window ? window : this, function(window, noGlobal) {
    function isArraylike(obj) {
        var length = "length" in obj && obj.length, type = jQuery.type(obj);
        return "function" !== type && !jQuery.isWindow(obj) && (!(1 !== obj.nodeType || !length) || ("array" === type || 0 === length || "number" == typeof length && length > 0 && length - 1 in obj));
    }
    function winnow(elements, qualifier, not) {
        if (jQuery.isFunction(qualifier)) return jQuery.grep(elements, function(elem, i) {
            return !!qualifier.call(elem, i, elem) !== not;
        });
        if (qualifier.nodeType) return jQuery.grep(elements, function(elem) {
            return elem === qualifier !== not;
        });
        if ("string" == typeof qualifier) {
            if (risSimple.test(qualifier)) return jQuery.filter(qualifier, elements, not);
            qualifier = jQuery.filter(qualifier, elements);
        }
        return jQuery.grep(elements, function(elem) {
            return indexOf.call(qualifier, elem) >= 0 !== not;
        });
    }
    function sibling(cur, dir) {
        for (;(cur = cur[dir]) && 1 !== cur.nodeType; ) ;
        return cur;
    }
    function createOptions(options) {
        var object = optionsCache[options] = {};
        return jQuery.each(options.match(rnotwhite) || [], function(_, flag) {
            object[flag] = !0;
        }), object;
    }
    function completed() {
        document.removeEventListener("DOMContentLoaded", completed, !1), window.removeEventListener("load", completed, !1), 
        jQuery.ready();
    }
    function Data() {
        Object.defineProperty(this.cache = {}, 0, {
            get: function() {
                return {};
            }
        }), this.expando = jQuery.expando + Data.uid++;
    }
    function dataAttr(elem, key, data) {
        var name;
        if (void 0 === data && 1 === elem.nodeType) if (name = "data-" + key.replace(rmultiDash, "-$1").toLowerCase(), 
        "string" == typeof (data = elem.getAttribute(name))) {
            try {
                data = "true" === data || "false" !== data && ("null" === data ? null : +data + "" === data ? +data : rbrace.test(data) ? jQuery.parseJSON(data) : data);
            } catch (e) {}
            data_user.set(elem, key, data);
        } else data = void 0;
        return data;
    }
    function returnTrue() {
        return !0;
    }
    function returnFalse() {
        return !1;
    }
    function safeActiveElement() {
        try {
            return document.activeElement;
        } catch (err) {}
    }
    function manipulationTarget(elem, content) {
        return jQuery.nodeName(elem, "table") && jQuery.nodeName(11 !== content.nodeType ? content : content.firstChild, "tr") ? elem.getElementsByTagName("tbody")[0] || elem.appendChild(elem.ownerDocument.createElement("tbody")) : elem;
    }
    function disableScript(elem) {
        return elem.type = (null !== elem.getAttribute("type")) + "/" + elem.type, elem;
    }
    function restoreScript(elem) {
        var match = rscriptTypeMasked.exec(elem.type);
        return match ? elem.type = match[1] : elem.removeAttribute("type"), elem;
    }
    function setGlobalEval(elems, refElements) {
        for (var i = 0, l = elems.length; i < l; i++) data_priv.set(elems[i], "globalEval", !refElements || data_priv.get(refElements[i], "globalEval"));
    }
    function cloneCopyEvent(src, dest) {
        var i, l, type, pdataOld, pdataCur, udataOld, udataCur, events;
        if (1 === dest.nodeType) {
            if (data_priv.hasData(src) && (pdataOld = data_priv.access(src), pdataCur = data_priv.set(dest, pdataOld), 
            events = pdataOld.events)) {
                delete pdataCur.handle, pdataCur.events = {};
                for (type in events) for (i = 0, l = events[type].length; i < l; i++) jQuery.event.add(dest, type, events[type][i]);
            }
            data_user.hasData(src) && (udataOld = data_user.access(src), udataCur = jQuery.extend({}, udataOld), 
            data_user.set(dest, udataCur));
        }
    }
    function getAll(context, tag) {
        var ret = context.getElementsByTagName ? context.getElementsByTagName(tag || "*") : context.querySelectorAll ? context.querySelectorAll(tag || "*") : [];
        return void 0 === tag || tag && jQuery.nodeName(context, tag) ? jQuery.merge([ context ], ret) : ret;
    }
    function fixInput(src, dest) {
        var nodeName = dest.nodeName.toLowerCase();
        "input" === nodeName && rcheckableType.test(src.type) ? dest.checked = src.checked : "input" !== nodeName && "textarea" !== nodeName || (dest.defaultValue = src.defaultValue);
    }
    function actualDisplay(name, doc) {
        var style, elem = jQuery(doc.createElement(name)).appendTo(doc.body), display = window.getDefaultComputedStyle && (style = window.getDefaultComputedStyle(elem[0])) ? style.display : jQuery.css(elem[0], "display");
        return elem.detach(), display;
    }
    function defaultDisplay(nodeName) {
        var doc = document, display = elemdisplay[nodeName];
        return display || ("none" !== (display = actualDisplay(nodeName, doc)) && display || ((doc = (iframe = (iframe || jQuery("<iframe frameborder='0' width='0' height='0'/>")).appendTo(doc.documentElement))[0].contentDocument).write(), 
        doc.close(), display = actualDisplay(nodeName, doc), iframe.detach()), elemdisplay[nodeName] = display), 
        display;
    }
    function curCSS(elem, name, computed) {
        var width, minWidth, maxWidth, ret, style = elem.style;
        return (computed = computed || getStyles(elem)) && (ret = computed.getPropertyValue(name) || computed[name]), 
        computed && ("" !== ret || jQuery.contains(elem.ownerDocument, elem) || (ret = jQuery.style(elem, name)), 
        rnumnonpx.test(ret) && rmargin.test(name) && (width = style.width, minWidth = style.minWidth, 
        maxWidth = style.maxWidth, style.minWidth = style.maxWidth = style.width = ret, 
        ret = computed.width, style.width = width, style.minWidth = minWidth, style.maxWidth = maxWidth)), 
        void 0 !== ret ? ret + "" : ret;
    }
    function addGetHookIf(conditionFn, hookFn) {
        return {
            get: function() {
                if (!conditionFn()) return (this.get = hookFn).apply(this, arguments);
                delete this.get;
            }
        };
    }
    function vendorPropName(style, name) {
        if (name in style) return name;
        for (var capName = name[0].toUpperCase() + name.slice(1), origName = name, i = cssPrefixes.length; i--; ) if ((name = cssPrefixes[i] + capName) in style) return name;
        return origName;
    }
    function setPositiveNumber(elem, value, subtract) {
        var matches = rnumsplit.exec(value);
        return matches ? Math.max(0, matches[1] - (subtract || 0)) + (matches[2] || "px") : value;
    }
    function augmentWidthOrHeight(elem, name, extra, isBorderBox, styles) {
        for (var i = extra === (isBorderBox ? "border" : "content") ? 4 : "width" === name ? 1 : 0, val = 0; i < 4; i += 2) "margin" === extra && (val += jQuery.css(elem, extra + cssExpand[i], !0, styles)), 
        isBorderBox ? ("content" === extra && (val -= jQuery.css(elem, "padding" + cssExpand[i], !0, styles)), 
        "margin" !== extra && (val -= jQuery.css(elem, "border" + cssExpand[i] + "Width", !0, styles))) : (val += jQuery.css(elem, "padding" + cssExpand[i], !0, styles), 
        "padding" !== extra && (val += jQuery.css(elem, "border" + cssExpand[i] + "Width", !0, styles)));
        return val;
    }
    function getWidthOrHeight(elem, name, extra) {
        var valueIsBorderBox = !0, val = "width" === name ? elem.offsetWidth : elem.offsetHeight, styles = getStyles(elem), isBorderBox = "border-box" === jQuery.css(elem, "boxSizing", !1, styles);
        if (val <= 0 || null == val) {
            if (((val = curCSS(elem, name, styles)) < 0 || null == val) && (val = elem.style[name]), 
            rnumnonpx.test(val)) return val;
            valueIsBorderBox = isBorderBox && (support.boxSizingReliable() || val === elem.style[name]), 
            val = parseFloat(val) || 0;
        }
        return val + augmentWidthOrHeight(elem, name, extra || (isBorderBox ? "border" : "content"), valueIsBorderBox, styles) + "px";
    }
    function showHide(elements, show) {
        for (var display, elem, hidden, values = [], index = 0, length = elements.length; index < length; index++) (elem = elements[index]).style && (values[index] = data_priv.get(elem, "olddisplay"), 
        display = elem.style.display, show ? (values[index] || "none" !== display || (elem.style.display = ""), 
        "" === elem.style.display && isHidden(elem) && (values[index] = data_priv.access(elem, "olddisplay", defaultDisplay(elem.nodeName)))) : (hidden = isHidden(elem), 
        "none" === display && hidden || data_priv.set(elem, "olddisplay", hidden ? display : jQuery.css(elem, "display"))));
        for (index = 0; index < length; index++) (elem = elements[index]).style && (show && "none" !== elem.style.display && "" !== elem.style.display || (elem.style.display = show ? values[index] || "" : "none"));
        return elements;
    }
    function Tween(elem, options, prop, end, easing) {
        return new Tween.prototype.init(elem, options, prop, end, easing);
    }
    function createFxNow() {
        return setTimeout(function() {
            fxNow = void 0;
        }), fxNow = jQuery.now();
    }
    function genFx(type, includeWidth) {
        var which, i = 0, attrs = {
            height: type
        };
        for (includeWidth = includeWidth ? 1 : 0; i < 4; i += 2 - includeWidth) attrs["margin" + (which = cssExpand[i])] = attrs["padding" + which] = type;
        return includeWidth && (attrs.opacity = attrs.width = type), attrs;
    }
    function createTween(value, prop, animation) {
        for (var tween, collection = (tweeners[prop] || []).concat(tweeners["*"]), index = 0, length = collection.length; index < length; index++) if (tween = collection[index].call(animation, prop, value)) return tween;
    }
    function propFilter(props, specialEasing) {
        var index, name, easing, value, hooks;
        for (index in props) if (name = jQuery.camelCase(index), easing = specialEasing[name], 
        value = props[index], jQuery.isArray(value) && (easing = value[1], value = props[index] = value[0]), 
        index !== name && (props[name] = value, delete props[index]), (hooks = jQuery.cssHooks[name]) && "expand" in hooks) {
            value = hooks.expand(value), delete props[name];
            for (index in value) index in props || (props[index] = value[index], specialEasing[index] = easing);
        } else specialEasing[name] = easing;
    }
    function Animation(elem, properties, options) {
        var result, stopped, index = 0, length = animationPrefilters.length, deferred = jQuery.Deferred().always(function() {
            delete tick.elem;
        }), tick = function() {
            if (stopped) return !1;
            for (var currentTime = fxNow || createFxNow(), remaining = Math.max(0, animation.startTime + animation.duration - currentTime), percent = 1 - (remaining / animation.duration || 0), index = 0, length = animation.tweens.length; index < length; index++) animation.tweens[index].run(percent);
            return deferred.notifyWith(elem, [ animation, percent, remaining ]), percent < 1 && length ? remaining : (deferred.resolveWith(elem, [ animation ]), 
            !1);
        }, animation = deferred.promise({
            elem: elem,
            props: jQuery.extend({}, properties),
            opts: jQuery.extend(!0, {
                specialEasing: {}
            }, options),
            originalProperties: properties,
            originalOptions: options,
            startTime: fxNow || createFxNow(),
            duration: options.duration,
            tweens: [],
            createTween: function(prop, end) {
                var tween = jQuery.Tween(elem, animation.opts, prop, end, animation.opts.specialEasing[prop] || animation.opts.easing);
                return animation.tweens.push(tween), tween;
            },
            stop: function(gotoEnd) {
                var index = 0, length = gotoEnd ? animation.tweens.length : 0;
                if (stopped) return this;
                for (stopped = !0; index < length; index++) animation.tweens[index].run(1);
                return gotoEnd ? deferred.resolveWith(elem, [ animation, gotoEnd ]) : deferred.rejectWith(elem, [ animation, gotoEnd ]), 
                this;
            }
        }), props = animation.props;
        for (propFilter(props, animation.opts.specialEasing); index < length; index++) if (result = animationPrefilters[index].call(animation, elem, props, animation.opts)) return result;
        return jQuery.map(props, createTween, animation), jQuery.isFunction(animation.opts.start) && animation.opts.start.call(elem, animation), 
        jQuery.fx.timer(jQuery.extend(tick, {
            elem: elem,
            anim: animation,
            queue: animation.opts.queue
        })), animation.progress(animation.opts.progress).done(animation.opts.done, animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always);
    }
    function addToPrefiltersOrTransports(structure) {
        return function(dataTypeExpression, func) {
            "string" != typeof dataTypeExpression && (func = dataTypeExpression, dataTypeExpression = "*");
            var dataType, i = 0, dataTypes = dataTypeExpression.toLowerCase().match(rnotwhite) || [];
            if (jQuery.isFunction(func)) for (;dataType = dataTypes[i++]; ) "+" === dataType[0] ? (dataType = dataType.slice(1) || "*", 
            (structure[dataType] = structure[dataType] || []).unshift(func)) : (structure[dataType] = structure[dataType] || []).push(func);
        };
    }
    function inspectPrefiltersOrTransports(structure, options, originalOptions, jqXHR) {
        function inspect(dataType) {
            var selected;
            return inspected[dataType] = !0, jQuery.each(structure[dataType] || [], function(_, prefilterOrFactory) {
                var dataTypeOrTransport = prefilterOrFactory(options, originalOptions, jqXHR);
                return "string" != typeof dataTypeOrTransport || seekingTransport || inspected[dataTypeOrTransport] ? seekingTransport ? !(selected = dataTypeOrTransport) : void 0 : (options.dataTypes.unshift(dataTypeOrTransport), 
                inspect(dataTypeOrTransport), !1);
            }), selected;
        }
        var inspected = {}, seekingTransport = structure === transports;
        return inspect(options.dataTypes[0]) || !inspected["*"] && inspect("*");
    }
    function ajaxExtend(target, src) {
        var key, deep, flatOptions = jQuery.ajaxSettings.flatOptions || {};
        for (key in src) void 0 !== src[key] && ((flatOptions[key] ? target : deep || (deep = {}))[key] = src[key]);
        return deep && jQuery.extend(!0, target, deep), target;
    }
    function ajaxHandleResponses(s, jqXHR, responses) {
        for (var ct, type, finalDataType, firstDataType, contents = s.contents, dataTypes = s.dataTypes; "*" === dataTypes[0]; ) dataTypes.shift(), 
        void 0 === ct && (ct = s.mimeType || jqXHR.getResponseHeader("Content-Type"));
        if (ct) for (type in contents) if (contents[type] && contents[type].test(ct)) {
            dataTypes.unshift(type);
            break;
        }
        if (dataTypes[0] in responses) finalDataType = dataTypes[0]; else {
            for (type in responses) {
                if (!dataTypes[0] || s.converters[type + " " + dataTypes[0]]) {
                    finalDataType = type;
                    break;
                }
                firstDataType || (firstDataType = type);
            }
            finalDataType = finalDataType || firstDataType;
        }
        if (finalDataType) return finalDataType !== dataTypes[0] && dataTypes.unshift(finalDataType), 
        responses[finalDataType];
    }
    function ajaxConvert(s, response, jqXHR, isSuccess) {
        var conv2, current, conv, tmp, prev, converters = {}, dataTypes = s.dataTypes.slice();
        if (dataTypes[1]) for (conv in s.converters) converters[conv.toLowerCase()] = s.converters[conv];
        for (current = dataTypes.shift(); current; ) if (s.responseFields[current] && (jqXHR[s.responseFields[current]] = response), 
        !prev && isSuccess && s.dataFilter && (response = s.dataFilter(response, s.dataType)), 
        prev = current, current = dataTypes.shift()) if ("*" === current) current = prev; else if ("*" !== prev && prev !== current) {
            if (!(conv = converters[prev + " " + current] || converters["* " + current])) for (conv2 in converters) if ((tmp = conv2.split(" "))[1] === current && (conv = converters[prev + " " + tmp[0]] || converters["* " + tmp[0]])) {
                !0 === conv ? conv = converters[conv2] : !0 !== converters[conv2] && (current = tmp[0], 
                dataTypes.unshift(tmp[1]));
                break;
            }
            if (!0 !== conv) if (conv && s.throws) response = conv(response); else try {
                response = conv(response);
            } catch (e) {
                return {
                    state: "parsererror",
                    error: conv ? e : "No conversion from " + prev + " to " + current
                };
            }
        }
        return {
            state: "success",
            data: response
        };
    }
    function buildParams(prefix, obj, traditional, add) {
        var name;
        if (jQuery.isArray(obj)) jQuery.each(obj, function(i, v) {
            traditional || rbracket.test(prefix) ? add(prefix, v) : buildParams(prefix + "[" + ("object" == typeof v ? i : "") + "]", v, traditional, add);
        }); else if (traditional || "object" !== jQuery.type(obj)) add(prefix, obj); else for (name in obj) buildParams(prefix + "[" + name + "]", obj[name], traditional, add);
    }
    function getWindow(elem) {
        return jQuery.isWindow(elem) ? elem : 9 === elem.nodeType && elem.defaultView;
    }
    var arr = [], slice = arr.slice, concat = arr.concat, push = arr.push, indexOf = arr.indexOf, class2type = {}, toString = class2type.toString, hasOwn = class2type.hasOwnProperty, support = {}, document = window.document, jQuery = function(selector, context) {
        return new jQuery.fn.init(selector, context);
    }, rtrim = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, rmsPrefix = /^-ms-/, rdashAlpha = /-([\da-z])/gi, fcamelCase = function(all, letter) {
        return letter.toUpperCase();
    };
    jQuery.fn = jQuery.prototype = {
        jquery: "2.1.4",
        constructor: jQuery,
        selector: "",
        length: 0,
        toArray: function() {
            return slice.call(this);
        },
        get: function(num) {
            return null != num ? num < 0 ? this[num + this.length] : this[num] : slice.call(this);
        },
        pushStack: function(elems) {
            var ret = jQuery.merge(this.constructor(), elems);
            return ret.prevObject = this, ret.context = this.context, ret;
        },
        each: function(callback, args) {
            return jQuery.each(this, callback, args);
        },
        map: function(callback) {
            return this.pushStack(jQuery.map(this, function(elem, i) {
                return callback.call(elem, i, elem);
            }));
        },
        slice: function() {
            return this.pushStack(slice.apply(this, arguments));
        },
        first: function() {
            return this.eq(0);
        },
        last: function() {
            return this.eq(-1);
        },
        eq: function(i) {
            var len = this.length, j = +i + (i < 0 ? len : 0);
            return this.pushStack(j >= 0 && j < len ? [ this[j] ] : []);
        },
        end: function() {
            return this.prevObject || this.constructor(null);
        },
        push: push,
        sort: arr.sort,
        splice: arr.splice
    }, jQuery.extend = jQuery.fn.extend = function() {
        var options, name, src, copy, copyIsArray, clone, target = arguments[0] || {}, i = 1, length = arguments.length, deep = !1;
        for ("boolean" == typeof target && (deep = target, target = arguments[i] || {}, 
        i++), "object" == typeof target || jQuery.isFunction(target) || (target = {}), i === length && (target = this, 
        i--); i < length; i++) if (null != (options = arguments[i])) for (name in options) src = target[name], 
        target !== (copy = options[name]) && (deep && copy && (jQuery.isPlainObject(copy) || (copyIsArray = jQuery.isArray(copy))) ? (copyIsArray ? (copyIsArray = !1, 
        clone = src && jQuery.isArray(src) ? src : []) : clone = src && jQuery.isPlainObject(src) ? src : {}, 
        target[name] = jQuery.extend(deep, clone, copy)) : void 0 !== copy && (target[name] = copy));
        return target;
    }, jQuery.extend({
        expando: "jQuery" + ("2.1.4" + Math.random()).replace(/\D/g, ""),
        isReady: !0,
        error: function(msg) {
            throw new Error(msg);
        },
        noop: function() {},
        isFunction: function(obj) {
            return "function" === jQuery.type(obj);
        },
        isArray: Array.isArray,
        isWindow: function(obj) {
            return null != obj && obj === obj.window;
        },
        isNumeric: function(obj) {
            return !jQuery.isArray(obj) && obj - parseFloat(obj) + 1 >= 0;
        },
        isPlainObject: function(obj) {
            return "object" === jQuery.type(obj) && !obj.nodeType && !jQuery.isWindow(obj) && !(obj.constructor && !hasOwn.call(obj.constructor.prototype, "isPrototypeOf"));
        },
        isEmptyObject: function(obj) {
            var name;
            for (name in obj) return !1;
            return !0;
        },
        type: function(obj) {
            return null == obj ? obj + "" : "object" == typeof obj || "function" == typeof obj ? class2type[toString.call(obj)] || "object" : typeof obj;
        },
        globalEval: function(code) {
            var script, indirect = eval;
            (code = jQuery.trim(code)) && (1 === code.indexOf("use strict") ? ((script = document.createElement("script")).text = code, 
            document.head.appendChild(script).parentNode.removeChild(script)) : indirect(code));
        },
        camelCase: function(string) {
            return string.replace(rmsPrefix, "ms-").replace(rdashAlpha, fcamelCase);
        },
        nodeName: function(elem, name) {
            return elem.nodeName && elem.nodeName.toLowerCase() === name.toLowerCase();
        },
        each: function(obj, callback, args) {
            var i = 0, length = obj.length, isArray = isArraylike(obj);
            if (args) {
                if (isArray) for (;i < length && !1 !== callback.apply(obj[i], args); i++) ; else for (i in obj) if (!1 === callback.apply(obj[i], args)) break;
            } else if (isArray) for (;i < length && !1 !== callback.call(obj[i], i, obj[i]); i++) ; else for (i in obj) if (!1 === callback.call(obj[i], i, obj[i])) break;
            return obj;
        },
        trim: function(text) {
            return null == text ? "" : (text + "").replace(rtrim, "");
        },
        makeArray: function(arr, results) {
            var ret = results || [];
            return null != arr && (isArraylike(Object(arr)) ? jQuery.merge(ret, "string" == typeof arr ? [ arr ] : arr) : push.call(ret, arr)), 
            ret;
        },
        inArray: function(elem, arr, i) {
            return null == arr ? -1 : indexOf.call(arr, elem, i);
        },
        merge: function(first, second) {
            for (var len = +second.length, j = 0, i = first.length; j < len; j++) first[i++] = second[j];
            return first.length = i, first;
        },
        grep: function(elems, callback, invert) {
            for (var matches = [], i = 0, length = elems.length, callbackExpect = !invert; i < length; i++) !callback(elems[i], i) !== callbackExpect && matches.push(elems[i]);
            return matches;
        },
        map: function(elems, callback, arg) {
            var value, i = 0, length = elems.length, ret = [];
            if (isArraylike(elems)) for (;i < length; i++) null != (value = callback(elems[i], i, arg)) && ret.push(value); else for (i in elems) null != (value = callback(elems[i], i, arg)) && ret.push(value);
            return concat.apply([], ret);
        },
        guid: 1,
        proxy: function(fn, context) {
            var tmp, args, proxy;
            if ("string" == typeof context && (tmp = fn[context], context = fn, fn = tmp), jQuery.isFunction(fn)) return args = slice.call(arguments, 2), 
            proxy = function() {
                return fn.apply(context || this, args.concat(slice.call(arguments)));
            }, proxy.guid = fn.guid = fn.guid || jQuery.guid++, proxy;
        },
        now: Date.now,
        support: support
    }), jQuery.each("Boolean Number String Function Array Date RegExp Object Error".split(" "), function(i, name) {
        class2type["[object " + name + "]"] = name.toLowerCase();
    });
    var Sizzle = function(window) {
        function Sizzle(selector, context, results, seed) {
            var match, elem, m, nodeType, i, groups, old, nid, newContext, newSelector;
            if ((context ? context.ownerDocument || context : preferredDoc) !== document && setDocument(context), 
            context = context || document, results = results || [], nodeType = context.nodeType, 
            "string" != typeof selector || !selector || 1 !== nodeType && 9 !== nodeType && 11 !== nodeType) return results;
            if (!seed && documentIsHTML) {
                if (11 !== nodeType && (match = rquickExpr.exec(selector))) if (m = match[1]) {
                    if (9 === nodeType) {
                        if (!(elem = context.getElementById(m)) || !elem.parentNode) return results;
                        if (elem.id === m) return results.push(elem), results;
                    } else if (context.ownerDocument && (elem = context.ownerDocument.getElementById(m)) && contains(context, elem) && elem.id === m) return results.push(elem), 
                    results;
                } else {
                    if (match[2]) return push.apply(results, context.getElementsByTagName(selector)), 
                    results;
                    if ((m = match[3]) && support.getElementsByClassName) return push.apply(results, context.getElementsByClassName(m)), 
                    results;
                }
                if (support.qsa && (!rbuggyQSA || !rbuggyQSA.test(selector))) {
                    if (nid = old = expando, newContext = context, newSelector = 1 !== nodeType && selector, 
                    1 === nodeType && "object" !== context.nodeName.toLowerCase()) {
                        for (groups = tokenize(selector), (old = context.getAttribute("id")) ? nid = old.replace(rescape, "\\$&") : context.setAttribute("id", nid), 
                        nid = "[id='" + nid + "'] ", i = groups.length; i--; ) groups[i] = nid + toSelector(groups[i]);
                        newContext = rsibling.test(selector) && testContext(context.parentNode) || context, 
                        newSelector = groups.join(",");
                    }
                    if (newSelector) try {
                        return push.apply(results, newContext.querySelectorAll(newSelector)), results;
                    } catch (qsaError) {} finally {
                        old || context.removeAttribute("id");
                    }
                }
            }
            return select(selector.replace(rtrim, "$1"), context, results, seed);
        }
        function createCache() {
            function cache(key, value) {
                return keys.push(key + " ") > Expr.cacheLength && delete cache[keys.shift()], cache[key + " "] = value;
            }
            var keys = [];
            return cache;
        }
        function markFunction(fn) {
            return fn[expando] = !0, fn;
        }
        function assert(fn) {
            var div = document.createElement("div");
            try {
                return !!fn(div);
            } catch (e) {
                return !1;
            } finally {
                div.parentNode && div.parentNode.removeChild(div), div = null;
            }
        }
        function addHandle(attrs, handler) {
            for (var arr = attrs.split("|"), i = attrs.length; i--; ) Expr.attrHandle[arr[i]] = handler;
        }
        function siblingCheck(a, b) {
            var cur = b && a, diff = cur && 1 === a.nodeType && 1 === b.nodeType && (~b.sourceIndex || MAX_NEGATIVE) - (~a.sourceIndex || MAX_NEGATIVE);
            if (diff) return diff;
            if (cur) for (;cur = cur.nextSibling; ) if (cur === b) return -1;
            return a ? 1 : -1;
        }
        function createPositionalPseudo(fn) {
            return markFunction(function(argument) {
                return argument = +argument, markFunction(function(seed, matches) {
                    for (var j, matchIndexes = fn([], seed.length, argument), i = matchIndexes.length; i--; ) seed[j = matchIndexes[i]] && (seed[j] = !(matches[j] = seed[j]));
                });
            });
        }
        function testContext(context) {
            return context && void 0 !== context.getElementsByTagName && context;
        }
        function setFilters() {}
        function toSelector(tokens) {
            for (var i = 0, len = tokens.length, selector = ""; i < len; i++) selector += tokens[i].value;
            return selector;
        }
        function addCombinator(matcher, combinator, base) {
            var dir = combinator.dir, checkNonElements = base && "parentNode" === dir, doneName = done++;
            return combinator.first ? function(elem, context, xml) {
                for (;elem = elem[dir]; ) if (1 === elem.nodeType || checkNonElements) return matcher(elem, context, xml);
            } : function(elem, context, xml) {
                var oldCache, outerCache, newCache = [ dirruns, doneName ];
                if (xml) {
                    for (;elem = elem[dir]; ) if ((1 === elem.nodeType || checkNonElements) && matcher(elem, context, xml)) return !0;
                } else for (;elem = elem[dir]; ) if (1 === elem.nodeType || checkNonElements) {
                    if (outerCache = elem[expando] || (elem[expando] = {}), (oldCache = outerCache[dir]) && oldCache[0] === dirruns && oldCache[1] === doneName) return newCache[2] = oldCache[2];
                    if (outerCache[dir] = newCache, newCache[2] = matcher(elem, context, xml)) return !0;
                }
            };
        }
        function elementMatcher(matchers) {
            return matchers.length > 1 ? function(elem, context, xml) {
                for (var i = matchers.length; i--; ) if (!matchers[i](elem, context, xml)) return !1;
                return !0;
            } : matchers[0];
        }
        function multipleContexts(selector, contexts, results) {
            for (var i = 0, len = contexts.length; i < len; i++) Sizzle(selector, contexts[i], results);
            return results;
        }
        function condense(unmatched, map, filter, context, xml) {
            for (var elem, newUnmatched = [], i = 0, len = unmatched.length, mapped = null != map; i < len; i++) (elem = unmatched[i]) && (filter && !filter(elem, context, xml) || (newUnmatched.push(elem), 
            mapped && map.push(i)));
            return newUnmatched;
        }
        function setMatcher(preFilter, selector, matcher, postFilter, postFinder, postSelector) {
            return postFilter && !postFilter[expando] && (postFilter = setMatcher(postFilter)), 
            postFinder && !postFinder[expando] && (postFinder = setMatcher(postFinder, postSelector)), 
            markFunction(function(seed, results, context, xml) {
                var temp, i, elem, preMap = [], postMap = [], preexisting = results.length, elems = seed || multipleContexts(selector || "*", context.nodeType ? [ context ] : context, []), matcherIn = !preFilter || !seed && selector ? elems : condense(elems, preMap, preFilter, context, xml), matcherOut = matcher ? postFinder || (seed ? preFilter : preexisting || postFilter) ? [] : results : matcherIn;
                if (matcher && matcher(matcherIn, matcherOut, context, xml), postFilter) for (temp = condense(matcherOut, postMap), 
                postFilter(temp, [], context, xml), i = temp.length; i--; ) (elem = temp[i]) && (matcherOut[postMap[i]] = !(matcherIn[postMap[i]] = elem));
                if (seed) {
                    if (postFinder || preFilter) {
                        if (postFinder) {
                            for (temp = [], i = matcherOut.length; i--; ) (elem = matcherOut[i]) && temp.push(matcherIn[i] = elem);
                            postFinder(null, matcherOut = [], temp, xml);
                        }
                        for (i = matcherOut.length; i--; ) (elem = matcherOut[i]) && (temp = postFinder ? indexOf(seed, elem) : preMap[i]) > -1 && (seed[temp] = !(results[temp] = elem));
                    }
                } else matcherOut = condense(matcherOut === results ? matcherOut.splice(preexisting, matcherOut.length) : matcherOut), 
                postFinder ? postFinder(null, results, matcherOut, xml) : push.apply(results, matcherOut);
            });
        }
        function matcherFromTokens(tokens) {
            for (var checkContext, matcher, j, len = tokens.length, leadingRelative = Expr.relative[tokens[0].type], implicitRelative = leadingRelative || Expr.relative[" "], i = leadingRelative ? 1 : 0, matchContext = addCombinator(function(elem) {
                return elem === checkContext;
            }, implicitRelative, !0), matchAnyContext = addCombinator(function(elem) {
                return indexOf(checkContext, elem) > -1;
            }, implicitRelative, !0), matchers = [ function(elem, context, xml) {
                var ret = !leadingRelative && (xml || context !== outermostContext) || ((checkContext = context).nodeType ? matchContext(elem, context, xml) : matchAnyContext(elem, context, xml));
                return checkContext = null, ret;
            } ]; i < len; i++) if (matcher = Expr.relative[tokens[i].type]) matchers = [ addCombinator(elementMatcher(matchers), matcher) ]; else {
                if ((matcher = Expr.filter[tokens[i].type].apply(null, tokens[i].matches))[expando]) {
                    for (j = ++i; j < len && !Expr.relative[tokens[j].type]; j++) ;
                    return setMatcher(i > 1 && elementMatcher(matchers), i > 1 && toSelector(tokens.slice(0, i - 1).concat({
                        value: " " === tokens[i - 2].type ? "*" : ""
                    })).replace(rtrim, "$1"), matcher, i < j && matcherFromTokens(tokens.slice(i, j)), j < len && matcherFromTokens(tokens = tokens.slice(j)), j < len && toSelector(tokens));
                }
                matchers.push(matcher);
            }
            return elementMatcher(matchers);
        }
        function matcherFromGroupMatchers(elementMatchers, setMatchers) {
            var bySet = setMatchers.length > 0, byElement = elementMatchers.length > 0, superMatcher = function(seed, context, xml, results, outermost) {
                var elem, j, matcher, matchedCount = 0, i = "0", unmatched = seed && [], setMatched = [], contextBackup = outermostContext, elems = seed || byElement && Expr.find.TAG("*", outermost), dirrunsUnique = dirruns += null == contextBackup ? 1 : Math.random() || .1, len = elems.length;
                for (outermost && (outermostContext = context !== document && context); i !== len && null != (elem = elems[i]); i++) {
                    if (byElement && elem) {
                        for (j = 0; matcher = elementMatchers[j++]; ) if (matcher(elem, context, xml)) {
                            results.push(elem);
                            break;
                        }
                        outermost && (dirruns = dirrunsUnique);
                    }
                    bySet && ((elem = !matcher && elem) && matchedCount--, seed && unmatched.push(elem));
                }
                if (matchedCount += i, bySet && i !== matchedCount) {
                    for (j = 0; matcher = setMatchers[j++]; ) matcher(unmatched, setMatched, context, xml);
                    if (seed) {
                        if (matchedCount > 0) for (;i--; ) unmatched[i] || setMatched[i] || (setMatched[i] = pop.call(results));
                        setMatched = condense(setMatched);
                    }
                    push.apply(results, setMatched), outermost && !seed && setMatched.length > 0 && matchedCount + setMatchers.length > 1 && Sizzle.uniqueSort(results);
                }
                return outermost && (dirruns = dirrunsUnique, outermostContext = contextBackup), 
                unmatched;
            };
            return bySet ? markFunction(superMatcher) : superMatcher;
        }
        var i, support, Expr, getText, isXML, tokenize, compile, select, outermostContext, sortInput, hasDuplicate, setDocument, document, docElem, documentIsHTML, rbuggyQSA, rbuggyMatches, matches, contains, expando = "sizzle" + 1 * new Date(), preferredDoc = window.document, dirruns = 0, done = 0, classCache = createCache(), tokenCache = createCache(), compilerCache = createCache(), sortOrder = function(a, b) {
            return a === b && (hasDuplicate = !0), 0;
        }, MAX_NEGATIVE = 1 << 31, hasOwn = {}.hasOwnProperty, arr = [], pop = arr.pop, push_native = arr.push, push = arr.push, slice = arr.slice, indexOf = function(list, elem) {
            for (var i = 0, len = list.length; i < len; i++) if (list[i] === elem) return i;
            return -1;
        }, booleans = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped", whitespace = "[\\x20\\t\\r\\n\\f]", characterEncoding = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+", identifier = characterEncoding.replace("w", "w#"), attributes = "\\[" + whitespace + "*(" + characterEncoding + ")(?:" + whitespace + "*([*^$|!~]?=)" + whitespace + "*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" + identifier + "))|)" + whitespace + "*\\]", pseudos = ":(" + characterEncoding + ")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|" + attributes + ")*)|.*)\\)|)", rwhitespace = new RegExp(whitespace + "+", "g"), rtrim = new RegExp("^" + whitespace + "+|((?:^|[^\\\\])(?:\\\\.)*)" + whitespace + "+$", "g"), rcomma = new RegExp("^" + whitespace + "*," + whitespace + "*"), rcombinators = new RegExp("^" + whitespace + "*([>+~]|" + whitespace + ")" + whitespace + "*"), rattributeQuotes = new RegExp("=" + whitespace + "*([^\\]'\"]*?)" + whitespace + "*\\]", "g"), rpseudo = new RegExp(pseudos), ridentifier = new RegExp("^" + identifier + "$"), matchExpr = {
            ID: new RegExp("^#(" + characterEncoding + ")"),
            CLASS: new RegExp("^\\.(" + characterEncoding + ")"),
            TAG: new RegExp("^(" + characterEncoding.replace("w", "w*") + ")"),
            ATTR: new RegExp("^" + attributes),
            PSEUDO: new RegExp("^" + pseudos),
            CHILD: new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + whitespace + "*(even|odd|(([+-]|)(\\d*)n|)" + whitespace + "*(?:([+-]|)" + whitespace + "*(\\d+)|))" + whitespace + "*\\)|)", "i"),
            bool: new RegExp("^(?:" + booleans + ")$", "i"),
            needsContext: new RegExp("^" + whitespace + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + whitespace + "*((?:-\\d)?\\d*)" + whitespace + "*\\)|)(?=[^-]|$)", "i")
        }, rinputs = /^(?:input|select|textarea|button)$/i, rheader = /^h\d$/i, rnative = /^[^{]+\{\s*\[native \w/, rquickExpr = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/, rsibling = /[+~]/, rescape = /'|\\/g, runescape = new RegExp("\\\\([\\da-f]{1,6}" + whitespace + "?|(" + whitespace + ")|.)", "ig"), funescape = function(_, escaped, escapedWhitespace) {
            var high = "0x" + escaped - 65536;
            return high !== high || escapedWhitespace ? escaped : high < 0 ? String.fromCharCode(high + 65536) : String.fromCharCode(high >> 10 | 55296, 1023 & high | 56320);
        }, unloadHandler = function() {
            setDocument();
        };
        try {
            push.apply(arr = slice.call(preferredDoc.childNodes), preferredDoc.childNodes), 
            arr[preferredDoc.childNodes.length].nodeType;
        } catch (e) {
            push = {
                apply: arr.length ? function(target, els) {
                    push_native.apply(target, slice.call(els));
                } : function(target, els) {
                    for (var j = target.length, i = 0; target[j++] = els[i++]; ) ;
                    target.length = j - 1;
                }
            };
        }
        support = Sizzle.support = {}, isXML = Sizzle.isXML = function(elem) {
            var documentElement = elem && (elem.ownerDocument || elem).documentElement;
            return !!documentElement && "HTML" !== documentElement.nodeName;
        }, setDocument = Sizzle.setDocument = function(node) {
            var hasCompare, parent, doc = node ? node.ownerDocument || node : preferredDoc;
            return doc !== document && 9 === doc.nodeType && doc.documentElement ? (document = doc, 
            docElem = doc.documentElement, (parent = doc.defaultView) && parent !== parent.top && (parent.addEventListener ? parent.addEventListener("unload", unloadHandler, !1) : parent.attachEvent && parent.attachEvent("onunload", unloadHandler)), 
            documentIsHTML = !isXML(doc), support.attributes = assert(function(div) {
                return div.className = "i", !div.getAttribute("className");
            }), support.getElementsByTagName = assert(function(div) {
                return div.appendChild(doc.createComment("")), !div.getElementsByTagName("*").length;
            }), support.getElementsByClassName = rnative.test(doc.getElementsByClassName), support.getById = assert(function(div) {
                return docElem.appendChild(div).id = expando, !doc.getElementsByName || !doc.getElementsByName(expando).length;
            }), support.getById ? (Expr.find.ID = function(id, context) {
                if (void 0 !== context.getElementById && documentIsHTML) {
                    var m = context.getElementById(id);
                    return m && m.parentNode ? [ m ] : [];
                }
            }, Expr.filter.ID = function(id) {
                var attrId = id.replace(runescape, funescape);
                return function(elem) {
                    return elem.getAttribute("id") === attrId;
                };
            }) : (delete Expr.find.ID, Expr.filter.ID = function(id) {
                var attrId = id.replace(runescape, funescape);
                return function(elem) {
                    var node = void 0 !== elem.getAttributeNode && elem.getAttributeNode("id");
                    return node && node.value === attrId;
                };
            }), Expr.find.TAG = support.getElementsByTagName ? function(tag, context) {
                return void 0 !== context.getElementsByTagName ? context.getElementsByTagName(tag) : support.qsa ? context.querySelectorAll(tag) : void 0;
            } : function(tag, context) {
                var elem, tmp = [], i = 0, results = context.getElementsByTagName(tag);
                if ("*" === tag) {
                    for (;elem = results[i++]; ) 1 === elem.nodeType && tmp.push(elem);
                    return tmp;
                }
                return results;
            }, Expr.find.CLASS = support.getElementsByClassName && function(className, context) {
                if (documentIsHTML) return context.getElementsByClassName(className);
            }, rbuggyMatches = [], rbuggyQSA = [], (support.qsa = rnative.test(doc.querySelectorAll)) && (assert(function(div) {
                docElem.appendChild(div).innerHTML = "<a id='" + expando + "'></a><select id='" + expando + "-\f]' msallowcapture=''><option selected=''></option></select>", 
                div.querySelectorAll("[msallowcapture^='']").length && rbuggyQSA.push("[*^$]=" + whitespace + "*(?:''|\"\")"), 
                div.querySelectorAll("[selected]").length || rbuggyQSA.push("\\[" + whitespace + "*(?:value|" + booleans + ")"), 
                div.querySelectorAll("[id~=" + expando + "-]").length || rbuggyQSA.push("~="), div.querySelectorAll(":checked").length || rbuggyQSA.push(":checked"), 
                div.querySelectorAll("a#" + expando + "+*").length || rbuggyQSA.push(".#.+[+~]");
            }), assert(function(div) {
                var input = doc.createElement("input");
                input.setAttribute("type", "hidden"), div.appendChild(input).setAttribute("name", "D"), 
                div.querySelectorAll("[name=d]").length && rbuggyQSA.push("name" + whitespace + "*[*^$|!~]?="), 
                div.querySelectorAll(":enabled").length || rbuggyQSA.push(":enabled", ":disabled"), 
                div.querySelectorAll("*,:x"), rbuggyQSA.push(",.*:");
            })), (support.matchesSelector = rnative.test(matches = docElem.matches || docElem.webkitMatchesSelector || docElem.mozMatchesSelector || docElem.oMatchesSelector || docElem.msMatchesSelector)) && assert(function(div) {
                support.disconnectedMatch = matches.call(div, "div"), matches.call(div, "[s!='']:x"), 
                rbuggyMatches.push("!=", pseudos);
            }), rbuggyQSA = rbuggyQSA.length && new RegExp(rbuggyQSA.join("|")), rbuggyMatches = rbuggyMatches.length && new RegExp(rbuggyMatches.join("|")), 
            hasCompare = rnative.test(docElem.compareDocumentPosition), contains = hasCompare || rnative.test(docElem.contains) ? function(a, b) {
                var adown = 9 === a.nodeType ? a.documentElement : a, bup = b && b.parentNode;
                return a === bup || !(!bup || 1 !== bup.nodeType || !(adown.contains ? adown.contains(bup) : a.compareDocumentPosition && 16 & a.compareDocumentPosition(bup)));
            } : function(a, b) {
                if (b) for (;b = b.parentNode; ) if (b === a) return !0;
                return !1;
            }, sortOrder = hasCompare ? function(a, b) {
                if (a === b) return hasDuplicate = !0, 0;
                var compare = !a.compareDocumentPosition - !b.compareDocumentPosition;
                return compare || (1 & (compare = (a.ownerDocument || a) === (b.ownerDocument || b) ? a.compareDocumentPosition(b) : 1) || !support.sortDetached && b.compareDocumentPosition(a) === compare ? a === doc || a.ownerDocument === preferredDoc && contains(preferredDoc, a) ? -1 : b === doc || b.ownerDocument === preferredDoc && contains(preferredDoc, b) ? 1 : sortInput ? indexOf(sortInput, a) - indexOf(sortInput, b) : 0 : 4 & compare ? -1 : 1);
            } : function(a, b) {
                if (a === b) return hasDuplicate = !0, 0;
                var cur, i = 0, aup = a.parentNode, bup = b.parentNode, ap = [ a ], bp = [ b ];
                if (!aup || !bup) return a === doc ? -1 : b === doc ? 1 : aup ? -1 : bup ? 1 : sortInput ? indexOf(sortInput, a) - indexOf(sortInput, b) : 0;
                if (aup === bup) return siblingCheck(a, b);
                for (cur = a; cur = cur.parentNode; ) ap.unshift(cur);
                for (cur = b; cur = cur.parentNode; ) bp.unshift(cur);
                for (;ap[i] === bp[i]; ) i++;
                return i ? siblingCheck(ap[i], bp[i]) : ap[i] === preferredDoc ? -1 : bp[i] === preferredDoc ? 1 : 0;
            }, doc) : document;
        }, Sizzle.matches = function(expr, elements) {
            return Sizzle(expr, null, null, elements);
        }, Sizzle.matchesSelector = function(elem, expr) {
            if ((elem.ownerDocument || elem) !== document && setDocument(elem), expr = expr.replace(rattributeQuotes, "='$1']"), 
            support.matchesSelector && documentIsHTML && (!rbuggyMatches || !rbuggyMatches.test(expr)) && (!rbuggyQSA || !rbuggyQSA.test(expr))) try {
                var ret = matches.call(elem, expr);
                if (ret || support.disconnectedMatch || elem.document && 11 !== elem.document.nodeType) return ret;
            } catch (e) {}
            return Sizzle(expr, document, null, [ elem ]).length > 0;
        }, Sizzle.contains = function(context, elem) {
            return (context.ownerDocument || context) !== document && setDocument(context), 
            contains(context, elem);
        }, Sizzle.attr = function(elem, name) {
            (elem.ownerDocument || elem) !== document && setDocument(elem);
            var fn = Expr.attrHandle[name.toLowerCase()], val = fn && hasOwn.call(Expr.attrHandle, name.toLowerCase()) ? fn(elem, name, !documentIsHTML) : void 0;
            return void 0 !== val ? val : support.attributes || !documentIsHTML ? elem.getAttribute(name) : (val = elem.getAttributeNode(name)) && val.specified ? val.value : null;
        }, Sizzle.error = function(msg) {
            throw new Error("Syntax error, unrecognized expression: " + msg);
        }, Sizzle.uniqueSort = function(results) {
            var elem, duplicates = [], j = 0, i = 0;
            if (hasDuplicate = !support.detectDuplicates, sortInput = !support.sortStable && results.slice(0), 
            results.sort(sortOrder), hasDuplicate) {
                for (;elem = results[i++]; ) elem === results[i] && (j = duplicates.push(i));
                for (;j--; ) results.splice(duplicates[j], 1);
            }
            return sortInput = null, results;
        }, getText = Sizzle.getText = function(elem) {
            var node, ret = "", i = 0, nodeType = elem.nodeType;
            if (nodeType) {
                if (1 === nodeType || 9 === nodeType || 11 === nodeType) {
                    if ("string" == typeof elem.textContent) return elem.textContent;
                    for (elem = elem.firstChild; elem; elem = elem.nextSibling) ret += getText(elem);
                } else if (3 === nodeType || 4 === nodeType) return elem.nodeValue;
            } else for (;node = elem[i++]; ) ret += getText(node);
            return ret;
        }, (Expr = Sizzle.selectors = {
            cacheLength: 50,
            createPseudo: markFunction,
            match: matchExpr,
            attrHandle: {},
            find: {},
            relative: {
                ">": {
                    dir: "parentNode",
                    first: !0
                },
                " ": {
                    dir: "parentNode"
                },
                "+": {
                    dir: "previousSibling",
                    first: !0
                },
                "~": {
                    dir: "previousSibling"
                }
            },
            preFilter: {
                ATTR: function(match) {
                    return match[1] = match[1].replace(runescape, funescape), match[3] = (match[3] || match[4] || match[5] || "").replace(runescape, funescape), 
                    "~=" === match[2] && (match[3] = " " + match[3] + " "), match.slice(0, 4);
                },
                CHILD: function(match) {
                    return match[1] = match[1].toLowerCase(), "nth" === match[1].slice(0, 3) ? (match[3] || Sizzle.error(match[0]), 
                    match[4] = +(match[4] ? match[5] + (match[6] || 1) : 2 * ("even" === match[3] || "odd" === match[3])), 
                    match[5] = +(match[7] + match[8] || "odd" === match[3])) : match[3] && Sizzle.error(match[0]), 
                    match;
                },
                PSEUDO: function(match) {
                    var excess, unquoted = !match[6] && match[2];
                    return matchExpr.CHILD.test(match[0]) ? null : (match[3] ? match[2] = match[4] || match[5] || "" : unquoted && rpseudo.test(unquoted) && (excess = tokenize(unquoted, !0)) && (excess = unquoted.indexOf(")", unquoted.length - excess) - unquoted.length) && (match[0] = match[0].slice(0, excess), 
                    match[2] = unquoted.slice(0, excess)), match.slice(0, 3));
                }
            },
            filter: {
                TAG: function(nodeNameSelector) {
                    var nodeName = nodeNameSelector.replace(runescape, funescape).toLowerCase();
                    return "*" === nodeNameSelector ? function() {
                        return !0;
                    } : function(elem) {
                        return elem.nodeName && elem.nodeName.toLowerCase() === nodeName;
                    };
                },
                CLASS: function(className) {
                    var pattern = classCache[className + " "];
                    return pattern || (pattern = new RegExp("(^|" + whitespace + ")" + className + "(" + whitespace + "|$)")) && classCache(className, function(elem) {
                        return pattern.test("string" == typeof elem.className && elem.className || void 0 !== elem.getAttribute && elem.getAttribute("class") || "");
                    });
                },
                ATTR: function(name, operator, check) {
                    return function(elem) {
                        var result = Sizzle.attr(elem, name);
                        return null == result ? "!=" === operator : !operator || (result += "", "=" === operator ? result === check : "!=" === operator ? result !== check : "^=" === operator ? check && 0 === result.indexOf(check) : "*=" === operator ? check && result.indexOf(check) > -1 : "$=" === operator ? check && result.slice(-check.length) === check : "~=" === operator ? (" " + result.replace(rwhitespace, " ") + " ").indexOf(check) > -1 : "|=" === operator && (result === check || result.slice(0, check.length + 1) === check + "-"));
                    };
                },
                CHILD: function(type, what, argument, first, last) {
                    var simple = "nth" !== type.slice(0, 3), forward = "last" !== type.slice(-4), ofType = "of-type" === what;
                    return 1 === first && 0 === last ? function(elem) {
                        return !!elem.parentNode;
                    } : function(elem, context, xml) {
                        var cache, outerCache, node, diff, nodeIndex, start, dir = simple !== forward ? "nextSibling" : "previousSibling", parent = elem.parentNode, name = ofType && elem.nodeName.toLowerCase(), useCache = !xml && !ofType;
                        if (parent) {
                            if (simple) {
                                for (;dir; ) {
                                    for (node = elem; node = node[dir]; ) if (ofType ? node.nodeName.toLowerCase() === name : 1 === node.nodeType) return !1;
                                    start = dir = "only" === type && !start && "nextSibling";
                                }
                                return !0;
                            }
                            if (start = [ forward ? parent.firstChild : parent.lastChild ], forward && useCache) {
                                for (nodeIndex = (cache = (outerCache = parent[expando] || (parent[expando] = {}))[type] || [])[0] === dirruns && cache[1], 
                                diff = cache[0] === dirruns && cache[2], node = nodeIndex && parent.childNodes[nodeIndex]; node = ++nodeIndex && node && node[dir] || (diff = nodeIndex = 0) || start.pop(); ) if (1 === node.nodeType && ++diff && node === elem) {
                                    outerCache[type] = [ dirruns, nodeIndex, diff ];
                                    break;
                                }
                            } else if (useCache && (cache = (elem[expando] || (elem[expando] = {}))[type]) && cache[0] === dirruns) diff = cache[1]; else for (;(node = ++nodeIndex && node && node[dir] || (diff = nodeIndex = 0) || start.pop()) && ((ofType ? node.nodeName.toLowerCase() !== name : 1 !== node.nodeType) || !++diff || (useCache && ((node[expando] || (node[expando] = {}))[type] = [ dirruns, diff ]), 
                            node !== elem)); ) ;
                            return (diff -= last) === first || diff % first == 0 && diff / first >= 0;
                        }
                    };
                },
                PSEUDO: function(pseudo, argument) {
                    var args, fn = Expr.pseudos[pseudo] || Expr.setFilters[pseudo.toLowerCase()] || Sizzle.error("unsupported pseudo: " + pseudo);
                    return fn[expando] ? fn(argument) : fn.length > 1 ? (args = [ pseudo, pseudo, "", argument ], 
                    Expr.setFilters.hasOwnProperty(pseudo.toLowerCase()) ? markFunction(function(seed, matches) {
                        for (var idx, matched = fn(seed, argument), i = matched.length; i--; ) seed[idx = indexOf(seed, matched[i])] = !(matches[idx] = matched[i]);
                    }) : function(elem) {
                        return fn(elem, 0, args);
                    }) : fn;
                }
            },
            pseudos: {
                not: markFunction(function(selector) {
                    var input = [], results = [], matcher = compile(selector.replace(rtrim, "$1"));
                    return matcher[expando] ? markFunction(function(seed, matches, context, xml) {
                        for (var elem, unmatched = matcher(seed, null, xml, []), i = seed.length; i--; ) (elem = unmatched[i]) && (seed[i] = !(matches[i] = elem));
                    }) : function(elem, context, xml) {
                        return input[0] = elem, matcher(input, null, xml, results), input[0] = null, !results.pop();
                    };
                }),
                has: markFunction(function(selector) {
                    return function(elem) {
                        return Sizzle(selector, elem).length > 0;
                    };
                }),
                contains: markFunction(function(text) {
                    return text = text.replace(runescape, funescape), function(elem) {
                        return (elem.textContent || elem.innerText || getText(elem)).indexOf(text) > -1;
                    };
                }),
                lang: markFunction(function(lang) {
                    return ridentifier.test(lang || "") || Sizzle.error("unsupported lang: " + lang), 
                    lang = lang.replace(runescape, funescape).toLowerCase(), function(elem) {
                        var elemLang;
                        do {
                            if (elemLang = documentIsHTML ? elem.lang : elem.getAttribute("xml:lang") || elem.getAttribute("lang")) return (elemLang = elemLang.toLowerCase()) === lang || 0 === elemLang.indexOf(lang + "-");
                        } while ((elem = elem.parentNode) && 1 === elem.nodeType);
                        return !1;
                    };
                }),
                target: function(elem) {
                    var hash = window.location && window.location.hash;
                    return hash && hash.slice(1) === elem.id;
                },
                root: function(elem) {
                    return elem === docElem;
                },
                focus: function(elem) {
                    return elem === document.activeElement && (!document.hasFocus || document.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex);
                },
                enabled: function(elem) {
                    return !1 === elem.disabled;
                },
                disabled: function(elem) {
                    return !0 === elem.disabled;
                },
                checked: function(elem) {
                    var nodeName = elem.nodeName.toLowerCase();
                    return "input" === nodeName && !!elem.checked || "option" === nodeName && !!elem.selected;
                },
                selected: function(elem) {
                    return elem.parentNode && elem.parentNode.selectedIndex, !0 === elem.selected;
                },
                empty: function(elem) {
                    for (elem = elem.firstChild; elem; elem = elem.nextSibling) if (elem.nodeType < 6) return !1;
                    return !0;
                },
                parent: function(elem) {
                    return !Expr.pseudos.empty(elem);
                },
                header: function(elem) {
                    return rheader.test(elem.nodeName);
                },
                input: function(elem) {
                    return rinputs.test(elem.nodeName);
                },
                button: function(elem) {
                    var name = elem.nodeName.toLowerCase();
                    return "input" === name && "button" === elem.type || "button" === name;
                },
                text: function(elem) {
                    var attr;
                    return "input" === elem.nodeName.toLowerCase() && "text" === elem.type && (null == (attr = elem.getAttribute("type")) || "text" === attr.toLowerCase());
                },
                first: createPositionalPseudo(function() {
                    return [ 0 ];
                }),
                last: createPositionalPseudo(function(matchIndexes, length) {
                    return [ length - 1 ];
                }),
                eq: createPositionalPseudo(function(matchIndexes, length, argument) {
                    return [ argument < 0 ? argument + length : argument ];
                }),
                even: createPositionalPseudo(function(matchIndexes, length) {
                    for (var i = 0; i < length; i += 2) matchIndexes.push(i);
                    return matchIndexes;
                }),
                odd: createPositionalPseudo(function(matchIndexes, length) {
                    for (var i = 1; i < length; i += 2) matchIndexes.push(i);
                    return matchIndexes;
                }),
                lt: createPositionalPseudo(function(matchIndexes, length, argument) {
                    for (var i = argument < 0 ? argument + length : argument; --i >= 0; ) matchIndexes.push(i);
                    return matchIndexes;
                }),
                gt: createPositionalPseudo(function(matchIndexes, length, argument) {
                    for (var i = argument < 0 ? argument + length : argument; ++i < length; ) matchIndexes.push(i);
                    return matchIndexes;
                })
            }
        }).pseudos.nth = Expr.pseudos.eq;
        for (i in {
            radio: !0,
            checkbox: !0,
            file: !0,
            password: !0,
            image: !0
        }) Expr.pseudos[i] = function(type) {
            return function(elem) {
                return "input" === elem.nodeName.toLowerCase() && elem.type === type;
            };
        }(i);
        for (i in {
            submit: !0,
            reset: !0
        }) Expr.pseudos[i] = function(type) {
            return function(elem) {
                var name = elem.nodeName.toLowerCase();
                return ("input" === name || "button" === name) && elem.type === type;
            };
        }(i);
        return setFilters.prototype = Expr.filters = Expr.pseudos, Expr.setFilters = new setFilters(), 
        tokenize = Sizzle.tokenize = function(selector, parseOnly) {
            var matched, match, tokens, type, soFar, groups, preFilters, cached = tokenCache[selector + " "];
            if (cached) return parseOnly ? 0 : cached.slice(0);
            for (soFar = selector, groups = [], preFilters = Expr.preFilter; soFar; ) {
                matched && !(match = rcomma.exec(soFar)) || (match && (soFar = soFar.slice(match[0].length) || soFar), 
                groups.push(tokens = [])), matched = !1, (match = rcombinators.exec(soFar)) && (matched = match.shift(), 
                tokens.push({
                    value: matched,
                    type: match[0].replace(rtrim, " ")
                }), soFar = soFar.slice(matched.length));
                for (type in Expr.filter) !(match = matchExpr[type].exec(soFar)) || preFilters[type] && !(match = preFilters[type](match)) || (matched = match.shift(), 
                tokens.push({
                    value: matched,
                    type: type,
                    matches: match
                }), soFar = soFar.slice(matched.length));
                if (!matched) break;
            }
            return parseOnly ? soFar.length : soFar ? Sizzle.error(selector) : tokenCache(selector, groups).slice(0);
        }, compile = Sizzle.compile = function(selector, match) {
            var i, setMatchers = [], elementMatchers = [], cached = compilerCache[selector + " "];
            if (!cached) {
                for (match || (match = tokenize(selector)), i = match.length; i--; ) (cached = matcherFromTokens(match[i]))[expando] ? setMatchers.push(cached) : elementMatchers.push(cached);
                (cached = compilerCache(selector, matcherFromGroupMatchers(elementMatchers, setMatchers))).selector = selector;
            }
            return cached;
        }, select = Sizzle.select = function(selector, context, results, seed) {
            var i, tokens, token, type, find, compiled = "function" == typeof selector && selector, match = !seed && tokenize(selector = compiled.selector || selector);
            if (results = results || [], 1 === match.length) {
                if ((tokens = match[0] = match[0].slice(0)).length > 2 && "ID" === (token = tokens[0]).type && support.getById && 9 === context.nodeType && documentIsHTML && Expr.relative[tokens[1].type]) {
                    if (!(context = (Expr.find.ID(token.matches[0].replace(runescape, funescape), context) || [])[0])) return results;
                    compiled && (context = context.parentNode), selector = selector.slice(tokens.shift().value.length);
                }
                for (i = matchExpr.needsContext.test(selector) ? 0 : tokens.length; i-- && (token = tokens[i], 
                !Expr.relative[type = token.type]); ) if ((find = Expr.find[type]) && (seed = find(token.matches[0].replace(runescape, funescape), rsibling.test(tokens[0].type) && testContext(context.parentNode) || context))) {
                    if (tokens.splice(i, 1), !(selector = seed.length && toSelector(tokens))) return push.apply(results, seed), 
                    results;
                    break;
                }
            }
            return (compiled || compile(selector, match))(seed, context, !documentIsHTML, results, rsibling.test(selector) && testContext(context.parentNode) || context), 
            results;
        }, support.sortStable = expando.split("").sort(sortOrder).join("") === expando, 
        support.detectDuplicates = !!hasDuplicate, setDocument(), support.sortDetached = assert(function(div1) {
            return 1 & div1.compareDocumentPosition(document.createElement("div"));
        }), assert(function(div) {
            return div.innerHTML = "<a href='#'></a>", "#" === div.firstChild.getAttribute("href");
        }) || addHandle("type|href|height|width", function(elem, name, isXML) {
            if (!isXML) return elem.getAttribute(name, "type" === name.toLowerCase() ? 1 : 2);
        }), support.attributes && assert(function(div) {
            return div.innerHTML = "<input/>", div.firstChild.setAttribute("value", ""), "" === div.firstChild.getAttribute("value");
        }) || addHandle("value", function(elem, name, isXML) {
            if (!isXML && "input" === elem.nodeName.toLowerCase()) return elem.defaultValue;
        }), assert(function(div) {
            return null == div.getAttribute("disabled");
        }) || addHandle(booleans, function(elem, name, isXML) {
            var val;
            if (!isXML) return !0 === elem[name] ? name.toLowerCase() : (val = elem.getAttributeNode(name)) && val.specified ? val.value : null;
        }), Sizzle;
    }(window);
    jQuery.find = Sizzle, jQuery.expr = Sizzle.selectors, jQuery.expr[":"] = jQuery.expr.pseudos, 
    jQuery.unique = Sizzle.uniqueSort, jQuery.text = Sizzle.getText, jQuery.isXMLDoc = Sizzle.isXML, 
    jQuery.contains = Sizzle.contains;
    var rneedsContext = jQuery.expr.match.needsContext, rsingleTag = /^<(\w+)\s*\/?>(?:<\/\1>|)$/, risSimple = /^.[^:#\[\.,]*$/;
    jQuery.filter = function(expr, elems, not) {
        var elem = elems[0];
        return not && (expr = ":not(" + expr + ")"), 1 === elems.length && 1 === elem.nodeType ? jQuery.find.matchesSelector(elem, expr) ? [ elem ] : [] : jQuery.find.matches(expr, jQuery.grep(elems, function(elem) {
            return 1 === elem.nodeType;
        }));
    }, jQuery.fn.extend({
        find: function(selector) {
            var i, len = this.length, ret = [], self = this;
            if ("string" != typeof selector) return this.pushStack(jQuery(selector).filter(function() {
                for (i = 0; i < len; i++) if (jQuery.contains(self[i], this)) return !0;
            }));
            for (i = 0; i < len; i++) jQuery.find(selector, self[i], ret);
            return ret = this.pushStack(len > 1 ? jQuery.unique(ret) : ret), ret.selector = this.selector ? this.selector + " " + selector : selector, 
            ret;
        },
        filter: function(selector) {
            return this.pushStack(winnow(this, selector || [], !1));
        },
        not: function(selector) {
            return this.pushStack(winnow(this, selector || [], !0));
        },
        is: function(selector) {
            return !!winnow(this, "string" == typeof selector && rneedsContext.test(selector) ? jQuery(selector) : selector || [], !1).length;
        }
    });
    var rootjQuery, rquickExpr = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;
    (jQuery.fn.init = function(selector, context) {
        var match, elem;
        if (!selector) return this;
        if ("string" == typeof selector) {
            if (!(match = "<" === selector[0] && ">" === selector[selector.length - 1] && selector.length >= 3 ? [ null, selector, null ] : rquickExpr.exec(selector)) || !match[1] && context) return !context || context.jquery ? (context || rootjQuery).find(selector) : this.constructor(context).find(selector);
            if (match[1]) {
                if (context = context instanceof jQuery ? context[0] : context, jQuery.merge(this, jQuery.parseHTML(match[1], context && context.nodeType ? context.ownerDocument || context : document, !0)), 
                rsingleTag.test(match[1]) && jQuery.isPlainObject(context)) for (match in context) jQuery.isFunction(this[match]) ? this[match](context[match]) : this.attr(match, context[match]);
                return this;
            }
            return (elem = document.getElementById(match[2])) && elem.parentNode && (this.length = 1, 
            this[0] = elem), this.context = document, this.selector = selector, this;
        }
        return selector.nodeType ? (this.context = this[0] = selector, this.length = 1, 
        this) : jQuery.isFunction(selector) ? void 0 !== rootjQuery.ready ? rootjQuery.ready(selector) : selector(jQuery) : (void 0 !== selector.selector && (this.selector = selector.selector, 
        this.context = selector.context), jQuery.makeArray(selector, this));
    }).prototype = jQuery.fn, rootjQuery = jQuery(document);
    var rparentsprev = /^(?:parents|prev(?:Until|All))/, guaranteedUnique = {
        children: !0,
        contents: !0,
        next: !0,
        prev: !0
    };
    jQuery.extend({
        dir: function(elem, dir, until) {
            for (var matched = [], truncate = void 0 !== until; (elem = elem[dir]) && 9 !== elem.nodeType; ) if (1 === elem.nodeType) {
                if (truncate && jQuery(elem).is(until)) break;
                matched.push(elem);
            }
            return matched;
        },
        sibling: function(n, elem) {
            for (var matched = []; n; n = n.nextSibling) 1 === n.nodeType && n !== elem && matched.push(n);
            return matched;
        }
    }), jQuery.fn.extend({
        has: function(target) {
            var targets = jQuery(target, this), l = targets.length;
            return this.filter(function() {
                for (var i = 0; i < l; i++) if (jQuery.contains(this, targets[i])) return !0;
            });
        },
        closest: function(selectors, context) {
            for (var cur, i = 0, l = this.length, matched = [], pos = rneedsContext.test(selectors) || "string" != typeof selectors ? jQuery(selectors, context || this.context) : 0; i < l; i++) for (cur = this[i]; cur && cur !== context; cur = cur.parentNode) if (cur.nodeType < 11 && (pos ? pos.index(cur) > -1 : 1 === cur.nodeType && jQuery.find.matchesSelector(cur, selectors))) {
                matched.push(cur);
                break;
            }
            return this.pushStack(matched.length > 1 ? jQuery.unique(matched) : matched);
        },
        index: function(elem) {
            return elem ? "string" == typeof elem ? indexOf.call(jQuery(elem), this[0]) : indexOf.call(this, elem.jquery ? elem[0] : elem) : this[0] && this[0].parentNode ? this.first().prevAll().length : -1;
        },
        add: function(selector, context) {
            return this.pushStack(jQuery.unique(jQuery.merge(this.get(), jQuery(selector, context))));
        },
        addBack: function(selector) {
            return this.add(null == selector ? this.prevObject : this.prevObject.filter(selector));
        }
    }), jQuery.each({
        parent: function(elem) {
            var parent = elem.parentNode;
            return parent && 11 !== parent.nodeType ? parent : null;
        },
        parents: function(elem) {
            return jQuery.dir(elem, "parentNode");
        },
        parentsUntil: function(elem, i, until) {
            return jQuery.dir(elem, "parentNode", until);
        },
        next: function(elem) {
            return sibling(elem, "nextSibling");
        },
        prev: function(elem) {
            return sibling(elem, "previousSibling");
        },
        nextAll: function(elem) {
            return jQuery.dir(elem, "nextSibling");
        },
        prevAll: function(elem) {
            return jQuery.dir(elem, "previousSibling");
        },
        nextUntil: function(elem, i, until) {
            return jQuery.dir(elem, "nextSibling", until);
        },
        prevUntil: function(elem, i, until) {
            return jQuery.dir(elem, "previousSibling", until);
        },
        siblings: function(elem) {
            return jQuery.sibling((elem.parentNode || {}).firstChild, elem);
        },
        children: function(elem) {
            return jQuery.sibling(elem.firstChild);
        },
        contents: function(elem) {
            return elem.contentDocument || jQuery.merge([], elem.childNodes);
        }
    }, function(name, fn) {
        jQuery.fn[name] = function(until, selector) {
            var matched = jQuery.map(this, fn, until);
            return "Until" !== name.slice(-5) && (selector = until), selector && "string" == typeof selector && (matched = jQuery.filter(selector, matched)), 
            this.length > 1 && (guaranteedUnique[name] || jQuery.unique(matched), rparentsprev.test(name) && matched.reverse()), 
            this.pushStack(matched);
        };
    });
    var rnotwhite = /\S+/g, optionsCache = {};
    jQuery.Callbacks = function(options) {
        var memory, fired, firing, firingStart, firingLength, firingIndex, list = [], stack = !(options = "string" == typeof options ? optionsCache[options] || createOptions(options) : jQuery.extend({}, options)).once && [], fire = function(data) {
            for (memory = options.memory && data, fired = !0, firingIndex = firingStart || 0, 
            firingStart = 0, firingLength = list.length, firing = !0; list && firingIndex < firingLength; firingIndex++) if (!1 === list[firingIndex].apply(data[0], data[1]) && options.stopOnFalse) {
                memory = !1;
                break;
            }
            firing = !1, list && (stack ? stack.length && fire(stack.shift()) : memory ? list = [] : self.disable());
        }, self = {
            add: function() {
                if (list) {
                    var start = list.length;
                    !function add(args) {
                        jQuery.each(args, function(_, arg) {
                            var type = jQuery.type(arg);
                            "function" === type ? options.unique && self.has(arg) || list.push(arg) : arg && arg.length && "string" !== type && add(arg);
                        });
                    }(arguments), firing ? firingLength = list.length : memory && (firingStart = start, 
                    fire(memory));
                }
                return this;
            },
            remove: function() {
                return list && jQuery.each(arguments, function(_, arg) {
                    for (var index; (index = jQuery.inArray(arg, list, index)) > -1; ) list.splice(index, 1), 
                    firing && (index <= firingLength && firingLength--, index <= firingIndex && firingIndex--);
                }), this;
            },
            has: function(fn) {
                return fn ? jQuery.inArray(fn, list) > -1 : !(!list || !list.length);
            },
            empty: function() {
                return list = [], firingLength = 0, this;
            },
            disable: function() {
                return list = stack = memory = void 0, this;
            },
            disabled: function() {
                return !list;
            },
            lock: function() {
                return stack = void 0, memory || self.disable(), this;
            },
            locked: function() {
                return !stack;
            },
            fireWith: function(context, args) {
                return !list || fired && !stack || (args = [ context, (args = args || []).slice ? args.slice() : args ], 
                firing ? stack.push(args) : fire(args)), this;
            },
            fire: function() {
                return self.fireWith(this, arguments), this;
            },
            fired: function() {
                return !!fired;
            }
        };
        return self;
    }, jQuery.extend({
        Deferred: function(func) {
            var tuples = [ [ "resolve", "done", jQuery.Callbacks("once memory"), "resolved" ], [ "reject", "fail", jQuery.Callbacks("once memory"), "rejected" ], [ "notify", "progress", jQuery.Callbacks("memory") ] ], state = "pending", promise = {
                state: function() {
                    return state;
                },
                always: function() {
                    return deferred.done(arguments).fail(arguments), this;
                },
                then: function() {
                    var fns = arguments;
                    return jQuery.Deferred(function(newDefer) {
                        jQuery.each(tuples, function(i, tuple) {
                            var fn = jQuery.isFunction(fns[i]) && fns[i];
                            deferred[tuple[1]](function() {
                                var returned = fn && fn.apply(this, arguments);
                                returned && jQuery.isFunction(returned.promise) ? returned.promise().done(newDefer.resolve).fail(newDefer.reject).progress(newDefer.notify) : newDefer[tuple[0] + "With"](this === promise ? newDefer.promise() : this, fn ? [ returned ] : arguments);
                            });
                        }), fns = null;
                    }).promise();
                },
                promise: function(obj) {
                    return null != obj ? jQuery.extend(obj, promise) : promise;
                }
            }, deferred = {};
            return promise.pipe = promise.then, jQuery.each(tuples, function(i, tuple) {
                var list = tuple[2], stateString = tuple[3];
                promise[tuple[1]] = list.add, stateString && list.add(function() {
                    state = stateString;
                }, tuples[1 ^ i][2].disable, tuples[2][2].lock), deferred[tuple[0]] = function() {
                    return deferred[tuple[0] + "With"](this === deferred ? promise : this, arguments), 
                    this;
                }, deferred[tuple[0] + "With"] = list.fireWith;
            }), promise.promise(deferred), func && func.call(deferred, deferred), deferred;
        },
        when: function(subordinate) {
            var progressValues, progressContexts, resolveContexts, i = 0, resolveValues = slice.call(arguments), length = resolveValues.length, remaining = 1 !== length || subordinate && jQuery.isFunction(subordinate.promise) ? length : 0, deferred = 1 === remaining ? subordinate : jQuery.Deferred(), updateFunc = function(i, contexts, values) {
                return function(value) {
                    contexts[i] = this, values[i] = arguments.length > 1 ? slice.call(arguments) : value, 
                    values === progressValues ? deferred.notifyWith(contexts, values) : --remaining || deferred.resolveWith(contexts, values);
                };
            };
            if (length > 1) for (progressValues = new Array(length), progressContexts = new Array(length), 
            resolveContexts = new Array(length); i < length; i++) resolveValues[i] && jQuery.isFunction(resolveValues[i].promise) ? resolveValues[i].promise().done(updateFunc(i, resolveContexts, resolveValues)).fail(deferred.reject).progress(updateFunc(i, progressContexts, progressValues)) : --remaining;
            return remaining || deferred.resolveWith(resolveContexts, resolveValues), deferred.promise();
        }
    });
    var readyList;
    jQuery.fn.ready = function(fn) {
        return jQuery.ready.promise().done(fn), this;
    }, jQuery.extend({
        isReady: !1,
        readyWait: 1,
        holdReady: function(hold) {
            hold ? jQuery.readyWait++ : jQuery.ready(!0);
        },
        ready: function(wait) {
            (!0 === wait ? --jQuery.readyWait : jQuery.isReady) || (jQuery.isReady = !0, !0 !== wait && --jQuery.readyWait > 0 || (readyList.resolveWith(document, [ jQuery ]), 
            jQuery.fn.triggerHandler && (jQuery(document).triggerHandler("ready"), jQuery(document).off("ready"))));
        }
    }), jQuery.ready.promise = function(obj) {
        return readyList || (readyList = jQuery.Deferred(), "complete" === document.readyState ? setTimeout(jQuery.ready) : (document.addEventListener("DOMContentLoaded", completed, !1), 
        window.addEventListener("load", completed, !1))), readyList.promise(obj);
    }, jQuery.ready.promise();
    var access = jQuery.access = function(elems, fn, key, value, chainable, emptyGet, raw) {
        var i = 0, len = elems.length, bulk = null == key;
        if ("object" === jQuery.type(key)) {
            chainable = !0;
            for (i in key) jQuery.access(elems, fn, i, key[i], !0, emptyGet, raw);
        } else if (void 0 !== value && (chainable = !0, jQuery.isFunction(value) || (raw = !0), 
        bulk && (raw ? (fn.call(elems, value), fn = null) : (bulk = fn, fn = function(elem, key, value) {
            return bulk.call(jQuery(elem), value);
        })), fn)) for (;i < len; i++) fn(elems[i], key, raw ? value : value.call(elems[i], i, fn(elems[i], key)));
        return chainable ? elems : bulk ? fn.call(elems) : len ? fn(elems[0], key) : emptyGet;
    };
    jQuery.acceptData = function(owner) {
        return 1 === owner.nodeType || 9 === owner.nodeType || !+owner.nodeType;
    }, Data.uid = 1, Data.accepts = jQuery.acceptData, Data.prototype = {
        key: function(owner) {
            if (!Data.accepts(owner)) return 0;
            var descriptor = {}, unlock = owner[this.expando];
            if (!unlock) {
                unlock = Data.uid++;
                try {
                    descriptor[this.expando] = {
                        value: unlock
                    }, Object.defineProperties(owner, descriptor);
                } catch (e) {
                    descriptor[this.expando] = unlock, jQuery.extend(owner, descriptor);
                }
            }
            return this.cache[unlock] || (this.cache[unlock] = {}), unlock;
        },
        set: function(owner, data, value) {
            var prop, unlock = this.key(owner), cache = this.cache[unlock];
            if ("string" == typeof data) cache[data] = value; else if (jQuery.isEmptyObject(cache)) jQuery.extend(this.cache[unlock], data); else for (prop in data) cache[prop] = data[prop];
            return cache;
        },
        get: function(owner, key) {
            var cache = this.cache[this.key(owner)];
            return void 0 === key ? cache : cache[key];
        },
        access: function(owner, key, value) {
            var stored;
            return void 0 === key || key && "string" == typeof key && void 0 === value ? void 0 !== (stored = this.get(owner, key)) ? stored : this.get(owner, jQuery.camelCase(key)) : (this.set(owner, key, value), 
            void 0 !== value ? value : key);
        },
        remove: function(owner, key) {
            var i, name, camel, unlock = this.key(owner), cache = this.cache[unlock];
            if (void 0 === key) this.cache[unlock] = {}; else {
                jQuery.isArray(key) ? name = key.concat(key.map(jQuery.camelCase)) : (camel = jQuery.camelCase(key), 
                name = key in cache ? [ key, camel ] : (name = camel) in cache ? [ name ] : name.match(rnotwhite) || []), 
                i = name.length;
                for (;i--; ) delete cache[name[i]];
            }
        },
        hasData: function(owner) {
            return !jQuery.isEmptyObject(this.cache[owner[this.expando]] || {});
        },
        discard: function(owner) {
            owner[this.expando] && delete this.cache[owner[this.expando]];
        }
    };
    var data_priv = new Data(), data_user = new Data(), rbrace = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/, rmultiDash = /([A-Z])/g;
    jQuery.extend({
        hasData: function(elem) {
            return data_user.hasData(elem) || data_priv.hasData(elem);
        },
        data: function(elem, name, data) {
            return data_user.access(elem, name, data);
        },
        removeData: function(elem, name) {
            data_user.remove(elem, name);
        },
        _data: function(elem, name, data) {
            return data_priv.access(elem, name, data);
        },
        _removeData: function(elem, name) {
            data_priv.remove(elem, name);
        }
    }), jQuery.fn.extend({
        data: function(key, value) {
            var i, name, data, elem = this[0], attrs = elem && elem.attributes;
            if (void 0 === key) {
                if (this.length && (data = data_user.get(elem), 1 === elem.nodeType && !data_priv.get(elem, "hasDataAttrs"))) {
                    for (i = attrs.length; i--; ) attrs[i] && 0 === (name = attrs[i].name).indexOf("data-") && (name = jQuery.camelCase(name.slice(5)), 
                    dataAttr(elem, name, data[name]));
                    data_priv.set(elem, "hasDataAttrs", !0);
                }
                return data;
            }
            return "object" == typeof key ? this.each(function() {
                data_user.set(this, key);
            }) : access(this, function(value) {
                var data, camelKey = jQuery.camelCase(key);
                if (elem && void 0 === value) {
                    if (void 0 !== (data = data_user.get(elem, key))) return data;
                    if (void 0 !== (data = data_user.get(elem, camelKey))) return data;
                    if (void 0 !== (data = dataAttr(elem, camelKey, void 0))) return data;
                } else this.each(function() {
                    var data = data_user.get(this, camelKey);
                    data_user.set(this, camelKey, value), -1 !== key.indexOf("-") && void 0 !== data && data_user.set(this, key, value);
                });
            }, null, value, arguments.length > 1, null, !0);
        },
        removeData: function(key) {
            return this.each(function() {
                data_user.remove(this, key);
            });
        }
    }), jQuery.extend({
        queue: function(elem, type, data) {
            var queue;
            if (elem) return type = (type || "fx") + "queue", queue = data_priv.get(elem, type), 
            data && (!queue || jQuery.isArray(data) ? queue = data_priv.access(elem, type, jQuery.makeArray(data)) : queue.push(data)), 
            queue || [];
        },
        dequeue: function(elem, type) {
            type = type || "fx";
            var queue = jQuery.queue(elem, type), startLength = queue.length, fn = queue.shift(), hooks = jQuery._queueHooks(elem, type);
            "inprogress" === fn && (fn = queue.shift(), startLength--), fn && ("fx" === type && queue.unshift("inprogress"), 
            delete hooks.stop, fn.call(elem, function() {
                jQuery.dequeue(elem, type);
            }, hooks)), !startLength && hooks && hooks.empty.fire();
        },
        _queueHooks: function(elem, type) {
            var key = type + "queueHooks";
            return data_priv.get(elem, key) || data_priv.access(elem, key, {
                empty: jQuery.Callbacks("once memory").add(function() {
                    data_priv.remove(elem, [ type + "queue", key ]);
                })
            });
        }
    }), jQuery.fn.extend({
        queue: function(type, data) {
            var setter = 2;
            return "string" != typeof type && (data = type, type = "fx", setter--), arguments.length < setter ? jQuery.queue(this[0], type) : void 0 === data ? this : this.each(function() {
                var queue = jQuery.queue(this, type, data);
                jQuery._queueHooks(this, type), "fx" === type && "inprogress" !== queue[0] && jQuery.dequeue(this, type);
            });
        },
        dequeue: function(type) {
            return this.each(function() {
                jQuery.dequeue(this, type);
            });
        },
        clearQueue: function(type) {
            return this.queue(type || "fx", []);
        },
        promise: function(type, obj) {
            var tmp, count = 1, defer = jQuery.Deferred(), elements = this, i = this.length, resolve = function() {
                --count || defer.resolveWith(elements, [ elements ]);
            };
            for ("string" != typeof type && (obj = type, type = void 0), type = type || "fx"; i--; ) (tmp = data_priv.get(elements[i], type + "queueHooks")) && tmp.empty && (count++, 
            tmp.empty.add(resolve));
            return resolve(), defer.promise(obj);
        }
    });
    var pnum = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source, cssExpand = [ "Top", "Right", "Bottom", "Left" ], isHidden = function(elem, el) {
        return elem = el || elem, "none" === jQuery.css(elem, "display") || !jQuery.contains(elem.ownerDocument, elem);
    }, rcheckableType = /^(?:checkbox|radio)$/i;
    !function() {
        var div = document.createDocumentFragment().appendChild(document.createElement("div")), input = document.createElement("input");
        input.setAttribute("type", "radio"), input.setAttribute("checked", "checked"), input.setAttribute("name", "t"), 
        div.appendChild(input), support.checkClone = div.cloneNode(!0).cloneNode(!0).lastChild.checked, 
        div.innerHTML = "<textarea>x</textarea>", support.noCloneChecked = !!div.cloneNode(!0).lastChild.defaultValue;
    }();
    support.focusinBubbles = "onfocusin" in window;
    var rkeyEvent = /^key/, rmouseEvent = /^(?:mouse|pointer|contextmenu)|click/, rfocusMorph = /^(?:focusinfocus|focusoutblur)$/, rtypenamespace = /^([^.]*)(?:\.(.+)|)$/;
    jQuery.event = {
        global: {},
        add: function(elem, types, handler, data, selector) {
            var handleObjIn, eventHandle, tmp, events, t, handleObj, special, handlers, type, namespaces, origType, elemData = data_priv.get(elem);
            if (elemData) for (handler.handler && (handler = (handleObjIn = handler).handler, 
            selector = handleObjIn.selector), handler.guid || (handler.guid = jQuery.guid++), 
            (events = elemData.events) || (events = elemData.events = {}), (eventHandle = elemData.handle) || (eventHandle = elemData.handle = function(e) {
                return void 0 !== jQuery && jQuery.event.triggered !== e.type ? jQuery.event.dispatch.apply(elem, arguments) : void 0;
            }), t = (types = (types || "").match(rnotwhite) || [ "" ]).length; t--; ) type = origType = (tmp = rtypenamespace.exec(types[t]) || [])[1], 
            namespaces = (tmp[2] || "").split(".").sort(), type && (special = jQuery.event.special[type] || {}, 
            type = (selector ? special.delegateType : special.bindType) || type, special = jQuery.event.special[type] || {}, 
            handleObj = jQuery.extend({
                type: type,
                origType: origType,
                data: data,
                handler: handler,
                guid: handler.guid,
                selector: selector,
                needsContext: selector && jQuery.expr.match.needsContext.test(selector),
                namespace: namespaces.join(".")
            }, handleObjIn), (handlers = events[type]) || ((handlers = events[type] = []).delegateCount = 0, 
            special.setup && !1 !== special.setup.call(elem, data, namespaces, eventHandle) || elem.addEventListener && elem.addEventListener(type, eventHandle, !1)), 
            special.add && (special.add.call(elem, handleObj), handleObj.handler.guid || (handleObj.handler.guid = handler.guid)), 
            selector ? handlers.splice(handlers.delegateCount++, 0, handleObj) : handlers.push(handleObj), 
            jQuery.event.global[type] = !0);
        },
        remove: function(elem, types, handler, selector, mappedTypes) {
            var j, origCount, tmp, events, t, handleObj, special, handlers, type, namespaces, origType, elemData = data_priv.hasData(elem) && data_priv.get(elem);
            if (elemData && (events = elemData.events)) {
                for (t = (types = (types || "").match(rnotwhite) || [ "" ]).length; t--; ) if (tmp = rtypenamespace.exec(types[t]) || [], 
                type = origType = tmp[1], namespaces = (tmp[2] || "").split(".").sort(), type) {
                    for (special = jQuery.event.special[type] || {}, handlers = events[type = (selector ? special.delegateType : special.bindType) || type] || [], 
                    tmp = tmp[2] && new RegExp("(^|\\.)" + namespaces.join("\\.(?:.*\\.|)") + "(\\.|$)"), 
                    origCount = j = handlers.length; j--; ) handleObj = handlers[j], !mappedTypes && origType !== handleObj.origType || handler && handler.guid !== handleObj.guid || tmp && !tmp.test(handleObj.namespace) || selector && selector !== handleObj.selector && ("**" !== selector || !handleObj.selector) || (handlers.splice(j, 1), 
                    handleObj.selector && handlers.delegateCount--, special.remove && special.remove.call(elem, handleObj));
                    origCount && !handlers.length && (special.teardown && !1 !== special.teardown.call(elem, namespaces, elemData.handle) || jQuery.removeEvent(elem, type, elemData.handle), 
                    delete events[type]);
                } else for (type in events) jQuery.event.remove(elem, type + types[t], handler, selector, !0);
                jQuery.isEmptyObject(events) && (delete elemData.handle, data_priv.remove(elem, "events"));
            }
        },
        trigger: function(event, data, elem, onlyHandlers) {
            var i, cur, tmp, bubbleType, ontype, handle, special, eventPath = [ elem || document ], type = hasOwn.call(event, "type") ? event.type : event, namespaces = hasOwn.call(event, "namespace") ? event.namespace.split(".") : [];
            if (cur = tmp = elem = elem || document, 3 !== elem.nodeType && 8 !== elem.nodeType && !rfocusMorph.test(type + jQuery.event.triggered) && (type.indexOf(".") >= 0 && (type = (namespaces = type.split(".")).shift(), 
            namespaces.sort()), ontype = type.indexOf(":") < 0 && "on" + type, event = event[jQuery.expando] ? event : new jQuery.Event(type, "object" == typeof event && event), 
            event.isTrigger = onlyHandlers ? 2 : 3, event.namespace = namespaces.join("."), 
            event.namespace_re = event.namespace ? new RegExp("(^|\\.)" + namespaces.join("\\.(?:.*\\.|)") + "(\\.|$)") : null, 
            event.result = void 0, event.target || (event.target = elem), data = null == data ? [ event ] : jQuery.makeArray(data, [ event ]), 
            special = jQuery.event.special[type] || {}, onlyHandlers || !special.trigger || !1 !== special.trigger.apply(elem, data))) {
                if (!onlyHandlers && !special.noBubble && !jQuery.isWindow(elem)) {
                    for (bubbleType = special.delegateType || type, rfocusMorph.test(bubbleType + type) || (cur = cur.parentNode); cur; cur = cur.parentNode) eventPath.push(cur), 
                    tmp = cur;
                    tmp === (elem.ownerDocument || document) && eventPath.push(tmp.defaultView || tmp.parentWindow || window);
                }
                for (i = 0; (cur = eventPath[i++]) && !event.isPropagationStopped(); ) event.type = i > 1 ? bubbleType : special.bindType || type, 
                (handle = (data_priv.get(cur, "events") || {})[event.type] && data_priv.get(cur, "handle")) && handle.apply(cur, data), 
                (handle = ontype && cur[ontype]) && handle.apply && jQuery.acceptData(cur) && (event.result = handle.apply(cur, data), 
                !1 === event.result && event.preventDefault());
                return event.type = type, onlyHandlers || event.isDefaultPrevented() || special._default && !1 !== special._default.apply(eventPath.pop(), data) || !jQuery.acceptData(elem) || ontype && jQuery.isFunction(elem[type]) && !jQuery.isWindow(elem) && ((tmp = elem[ontype]) && (elem[ontype] = null), 
                jQuery.event.triggered = type, elem[type](), jQuery.event.triggered = void 0, tmp && (elem[ontype] = tmp)), 
                event.result;
            }
        },
        dispatch: function(event) {
            event = jQuery.event.fix(event);
            var i, j, ret, matched, handleObj, handlerQueue = [], args = slice.call(arguments), handlers = (data_priv.get(this, "events") || {})[event.type] || [], special = jQuery.event.special[event.type] || {};
            if (args[0] = event, event.delegateTarget = this, !special.preDispatch || !1 !== special.preDispatch.call(this, event)) {
                for (handlerQueue = jQuery.event.handlers.call(this, event, handlers), i = 0; (matched = handlerQueue[i++]) && !event.isPropagationStopped(); ) for (event.currentTarget = matched.elem, 
                j = 0; (handleObj = matched.handlers[j++]) && !event.isImmediatePropagationStopped(); ) event.namespace_re && !event.namespace_re.test(handleObj.namespace) || (event.handleObj = handleObj, 
                event.data = handleObj.data, void 0 !== (ret = ((jQuery.event.special[handleObj.origType] || {}).handle || handleObj.handler).apply(matched.elem, args)) && !1 === (event.result = ret) && (event.preventDefault(), 
                event.stopPropagation()));
                return special.postDispatch && special.postDispatch.call(this, event), event.result;
            }
        },
        handlers: function(event, handlers) {
            var i, matches, sel, handleObj, handlerQueue = [], delegateCount = handlers.delegateCount, cur = event.target;
            if (delegateCount && cur.nodeType && (!event.button || "click" !== event.type)) for (;cur !== this; cur = cur.parentNode || this) if (!0 !== cur.disabled || "click" !== event.type) {
                for (matches = [], i = 0; i < delegateCount; i++) void 0 === matches[sel = (handleObj = handlers[i]).selector + " "] && (matches[sel] = handleObj.needsContext ? jQuery(sel, this).index(cur) >= 0 : jQuery.find(sel, this, null, [ cur ]).length), 
                matches[sel] && matches.push(handleObj);
                matches.length && handlerQueue.push({
                    elem: cur,
                    handlers: matches
                });
            }
            return delegateCount < handlers.length && handlerQueue.push({
                elem: this,
                handlers: handlers.slice(delegateCount)
            }), handlerQueue;
        },
        props: "altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
        fixHooks: {},
        keyHooks: {
            props: "char charCode key keyCode".split(" "),
            filter: function(event, original) {
                return null == event.which && (event.which = null != original.charCode ? original.charCode : original.keyCode), 
                event;
            }
        },
        mouseHooks: {
            props: "button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
            filter: function(event, original) {
                var eventDoc, doc, body, button = original.button;
                return null == event.pageX && null != original.clientX && (doc = (eventDoc = event.target.ownerDocument || document).documentElement, 
                body = eventDoc.body, event.pageX = original.clientX + (doc && doc.scrollLeft || body && body.scrollLeft || 0) - (doc && doc.clientLeft || body && body.clientLeft || 0), 
                event.pageY = original.clientY + (doc && doc.scrollTop || body && body.scrollTop || 0) - (doc && doc.clientTop || body && body.clientTop || 0)), 
                event.which || void 0 === button || (event.which = 1 & button ? 1 : 2 & button ? 3 : 4 & button ? 2 : 0), 
                event;
            }
        },
        fix: function(event) {
            if (event[jQuery.expando]) return event;
            var i, prop, copy, type = event.type, originalEvent = event, fixHook = this.fixHooks[type];
            for (fixHook || (this.fixHooks[type] = fixHook = rmouseEvent.test(type) ? this.mouseHooks : rkeyEvent.test(type) ? this.keyHooks : {}), 
            copy = fixHook.props ? this.props.concat(fixHook.props) : this.props, event = new jQuery.Event(originalEvent), 
            i = copy.length; i--; ) event[prop = copy[i]] = originalEvent[prop];
            return event.target || (event.target = document), 3 === event.target.nodeType && (event.target = event.target.parentNode), 
            fixHook.filter ? fixHook.filter(event, originalEvent) : event;
        },
        special: {
            load: {
                noBubble: !0
            },
            focus: {
                trigger: function() {
                    if (this !== safeActiveElement() && this.focus) return this.focus(), !1;
                },
                delegateType: "focusin"
            },
            blur: {
                trigger: function() {
                    if (this === safeActiveElement() && this.blur) return this.blur(), !1;
                },
                delegateType: "focusout"
            },
            click: {
                trigger: function() {
                    if ("checkbox" === this.type && this.click && jQuery.nodeName(this, "input")) return this.click(), 
                    !1;
                },
                _default: function(event) {
                    return jQuery.nodeName(event.target, "a");
                }
            },
            beforeunload: {
                postDispatch: function(event) {
                    void 0 !== event.result && event.originalEvent && (event.originalEvent.returnValue = event.result);
                }
            }
        },
        simulate: function(type, elem, event, bubble) {
            var e = jQuery.extend(new jQuery.Event(), event, {
                type: type,
                isSimulated: !0,
                originalEvent: {}
            });
            bubble ? jQuery.event.trigger(e, null, elem) : jQuery.event.dispatch.call(elem, e), 
            e.isDefaultPrevented() && event.preventDefault();
        }
    }, jQuery.removeEvent = function(elem, type, handle) {
        elem.removeEventListener && elem.removeEventListener(type, handle, !1);
    }, jQuery.Event = function(src, props) {
        if (!(this instanceof jQuery.Event)) return new jQuery.Event(src, props);
        src && src.type ? (this.originalEvent = src, this.type = src.type, this.isDefaultPrevented = src.defaultPrevented || void 0 === src.defaultPrevented && !1 === src.returnValue ? returnTrue : returnFalse) : this.type = src, 
        props && jQuery.extend(this, props), this.timeStamp = src && src.timeStamp || jQuery.now(), 
        this[jQuery.expando] = !0;
    }, jQuery.Event.prototype = {
        isDefaultPrevented: returnFalse,
        isPropagationStopped: returnFalse,
        isImmediatePropagationStopped: returnFalse,
        preventDefault: function() {
            var e = this.originalEvent;
            this.isDefaultPrevented = returnTrue, e && e.preventDefault && e.preventDefault();
        },
        stopPropagation: function() {
            var e = this.originalEvent;
            this.isPropagationStopped = returnTrue, e && e.stopPropagation && e.stopPropagation();
        },
        stopImmediatePropagation: function() {
            var e = this.originalEvent;
            this.isImmediatePropagationStopped = returnTrue, e && e.stopImmediatePropagation && e.stopImmediatePropagation(), 
            this.stopPropagation();
        }
    }, jQuery.each({
        mouseenter: "mouseover",
        mouseleave: "mouseout",
        pointerenter: "pointerover",
        pointerleave: "pointerout"
    }, function(orig, fix) {
        jQuery.event.special[orig] = {
            delegateType: fix,
            bindType: fix,
            handle: function(event) {
                var ret, target = this, related = event.relatedTarget, handleObj = event.handleObj;
                return related && (related === target || jQuery.contains(target, related)) || (event.type = handleObj.origType, 
                ret = handleObj.handler.apply(this, arguments), event.type = fix), ret;
            }
        };
    }), support.focusinBubbles || jQuery.each({
        focus: "focusin",
        blur: "focusout"
    }, function(orig, fix) {
        var handler = function(event) {
            jQuery.event.simulate(fix, event.target, jQuery.event.fix(event), !0);
        };
        jQuery.event.special[fix] = {
            setup: function() {
                var doc = this.ownerDocument || this, attaches = data_priv.access(doc, fix);
                attaches || doc.addEventListener(orig, handler, !0), data_priv.access(doc, fix, (attaches || 0) + 1);
            },
            teardown: function() {
                var doc = this.ownerDocument || this, attaches = data_priv.access(doc, fix) - 1;
                attaches ? data_priv.access(doc, fix, attaches) : (doc.removeEventListener(orig, handler, !0), 
                data_priv.remove(doc, fix));
            }
        };
    }), jQuery.fn.extend({
        on: function(types, selector, data, fn, one) {
            var origFn, type;
            if ("object" == typeof types) {
                "string" != typeof selector && (data = data || selector, selector = void 0);
                for (type in types) this.on(type, selector, data, types[type], one);
                return this;
            }
            if (null == data && null == fn ? (fn = selector, data = selector = void 0) : null == fn && ("string" == typeof selector ? (fn = data, 
            data = void 0) : (fn = data, data = selector, selector = void 0)), !1 === fn) fn = returnFalse; else if (!fn) return this;
            return 1 === one && (origFn = fn, (fn = function(event) {
                return jQuery().off(event), origFn.apply(this, arguments);
            }).guid = origFn.guid || (origFn.guid = jQuery.guid++)), this.each(function() {
                jQuery.event.add(this, types, fn, data, selector);
            });
        },
        one: function(types, selector, data, fn) {
            return this.on(types, selector, data, fn, 1);
        },
        off: function(types, selector, fn) {
            var handleObj, type;
            if (types && types.preventDefault && types.handleObj) return handleObj = types.handleObj, 
            jQuery(types.delegateTarget).off(handleObj.namespace ? handleObj.origType + "." + handleObj.namespace : handleObj.origType, handleObj.selector, handleObj.handler), 
            this;
            if ("object" == typeof types) {
                for (type in types) this.off(type, selector, types[type]);
                return this;
            }
            return !1 !== selector && "function" != typeof selector || (fn = selector, selector = void 0), 
            !1 === fn && (fn = returnFalse), this.each(function() {
                jQuery.event.remove(this, types, fn, selector);
            });
        },
        trigger: function(type, data) {
            return this.each(function() {
                jQuery.event.trigger(type, data, this);
            });
        },
        triggerHandler: function(type, data) {
            var elem = this[0];
            if (elem) return jQuery.event.trigger(type, data, elem, !0);
        }
    });
    var rxhtmlTag = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi, rtagName = /<([\w:]+)/, rhtml = /<|&#?\w+;/, rnoInnerhtml = /<(?:script|style|link)/i, rchecked = /checked\s*(?:[^=]|=\s*.checked.)/i, rscriptType = /^$|\/(?:java|ecma)script/i, rscriptTypeMasked = /^true\/(.*)/, rcleanScript = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g, wrapMap = {
        option: [ 1, "<select multiple='multiple'>", "</select>" ],
        thead: [ 1, "<table>", "</table>" ],
        col: [ 2, "<table><colgroup>", "</colgroup></table>" ],
        tr: [ 2, "<table><tbody>", "</tbody></table>" ],
        td: [ 3, "<table><tbody><tr>", "</tr></tbody></table>" ],
        _default: [ 0, "", "" ]
    };
    wrapMap.optgroup = wrapMap.option, wrapMap.tbody = wrapMap.tfoot = wrapMap.colgroup = wrapMap.caption = wrapMap.thead, 
    wrapMap.th = wrapMap.td, jQuery.extend({
        clone: function(elem, dataAndEvents, deepDataAndEvents) {
            var i, l, srcElements, destElements, clone = elem.cloneNode(!0), inPage = jQuery.contains(elem.ownerDocument, elem);
            if (!(support.noCloneChecked || 1 !== elem.nodeType && 11 !== elem.nodeType || jQuery.isXMLDoc(elem))) for (destElements = getAll(clone), 
            i = 0, l = (srcElements = getAll(elem)).length; i < l; i++) fixInput(srcElements[i], destElements[i]);
            if (dataAndEvents) if (deepDataAndEvents) for (srcElements = srcElements || getAll(elem), 
            destElements = destElements || getAll(clone), i = 0, l = srcElements.length; i < l; i++) cloneCopyEvent(srcElements[i], destElements[i]); else cloneCopyEvent(elem, clone);
            return (destElements = getAll(clone, "script")).length > 0 && setGlobalEval(destElements, !inPage && getAll(elem, "script")), 
            clone;
        },
        buildFragment: function(elems, context, scripts, selection) {
            for (var elem, tmp, tag, wrap, contains, j, fragment = context.createDocumentFragment(), nodes = [], i = 0, l = elems.length; i < l; i++) if ((elem = elems[i]) || 0 === elem) if ("object" === jQuery.type(elem)) jQuery.merge(nodes, elem.nodeType ? [ elem ] : elem); else if (rhtml.test(elem)) {
                for (tmp = tmp || fragment.appendChild(context.createElement("div")), tag = (rtagName.exec(elem) || [ "", "" ])[1].toLowerCase(), 
                wrap = wrapMap[tag] || wrapMap._default, tmp.innerHTML = wrap[1] + elem.replace(rxhtmlTag, "<$1></$2>") + wrap[2], 
                j = wrap[0]; j--; ) tmp = tmp.lastChild;
                jQuery.merge(nodes, tmp.childNodes), (tmp = fragment.firstChild).textContent = "";
            } else nodes.push(context.createTextNode(elem));
            for (fragment.textContent = "", i = 0; elem = nodes[i++]; ) if ((!selection || -1 === jQuery.inArray(elem, selection)) && (contains = jQuery.contains(elem.ownerDocument, elem), 
            tmp = getAll(fragment.appendChild(elem), "script"), contains && setGlobalEval(tmp), 
            scripts)) for (j = 0; elem = tmp[j++]; ) rscriptType.test(elem.type || "") && scripts.push(elem);
            return fragment;
        },
        cleanData: function(elems) {
            for (var data, elem, type, key, special = jQuery.event.special, i = 0; void 0 !== (elem = elems[i]); i++) {
                if (jQuery.acceptData(elem) && (key = elem[data_priv.expando]) && (data = data_priv.cache[key])) {
                    if (data.events) for (type in data.events) special[type] ? jQuery.event.remove(elem, type) : jQuery.removeEvent(elem, type, data.handle);
                    data_priv.cache[key] && delete data_priv.cache[key];
                }
                delete data_user.cache[elem[data_user.expando]];
            }
        }
    }), jQuery.fn.extend({
        text: function(value) {
            return access(this, function(value) {
                return void 0 === value ? jQuery.text(this) : this.empty().each(function() {
                    1 !== this.nodeType && 11 !== this.nodeType && 9 !== this.nodeType || (this.textContent = value);
                });
            }, null, value, arguments.length);
        },
        append: function() {
            return this.domManip(arguments, function(elem) {
                1 !== this.nodeType && 11 !== this.nodeType && 9 !== this.nodeType || manipulationTarget(this, elem).appendChild(elem);
            });
        },
        prepend: function() {
            return this.domManip(arguments, function(elem) {
                if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                    var target = manipulationTarget(this, elem);
                    target.insertBefore(elem, target.firstChild);
                }
            });
        },
        before: function() {
            return this.domManip(arguments, function(elem) {
                this.parentNode && this.parentNode.insertBefore(elem, this);
            });
        },
        after: function() {
            return this.domManip(arguments, function(elem) {
                this.parentNode && this.parentNode.insertBefore(elem, this.nextSibling);
            });
        },
        remove: function(selector, keepData) {
            for (var elem, elems = selector ? jQuery.filter(selector, this) : this, i = 0; null != (elem = elems[i]); i++) keepData || 1 !== elem.nodeType || jQuery.cleanData(getAll(elem)), 
            elem.parentNode && (keepData && jQuery.contains(elem.ownerDocument, elem) && setGlobalEval(getAll(elem, "script")), 
            elem.parentNode.removeChild(elem));
            return this;
        },
        empty: function() {
            for (var elem, i = 0; null != (elem = this[i]); i++) 1 === elem.nodeType && (jQuery.cleanData(getAll(elem, !1)), 
            elem.textContent = "");
            return this;
        },
        clone: function(dataAndEvents, deepDataAndEvents) {
            return dataAndEvents = null != dataAndEvents && dataAndEvents, deepDataAndEvents = null == deepDataAndEvents ? dataAndEvents : deepDataAndEvents, 
            this.map(function() {
                return jQuery.clone(this, dataAndEvents, deepDataAndEvents);
            });
        },
        html: function(value) {
            return access(this, function(value) {
                var elem = this[0] || {}, i = 0, l = this.length;
                if (void 0 === value && 1 === elem.nodeType) return elem.innerHTML;
                if ("string" == typeof value && !rnoInnerhtml.test(value) && !wrapMap[(rtagName.exec(value) || [ "", "" ])[1].toLowerCase()]) {
                    value = value.replace(rxhtmlTag, "<$1></$2>");
                    try {
                        for (;i < l; i++) 1 === (elem = this[i] || {}).nodeType && (jQuery.cleanData(getAll(elem, !1)), 
                        elem.innerHTML = value);
                        elem = 0;
                    } catch (e) {}
                }
                elem && this.empty().append(value);
            }, null, value, arguments.length);
        },
        replaceWith: function() {
            var arg = arguments[0];
            return this.domManip(arguments, function(elem) {
                arg = this.parentNode, jQuery.cleanData(getAll(this)), arg && arg.replaceChild(elem, this);
            }), arg && (arg.length || arg.nodeType) ? this : this.remove();
        },
        detach: function(selector) {
            return this.remove(selector, !0);
        },
        domManip: function(args, callback) {
            args = concat.apply([], args);
            var fragment, first, scripts, hasScripts, node, doc, i = 0, l = this.length, set = this, iNoClone = l - 1, value = args[0], isFunction = jQuery.isFunction(value);
            if (isFunction || l > 1 && "string" == typeof value && !support.checkClone && rchecked.test(value)) return this.each(function(index) {
                var self = set.eq(index);
                isFunction && (args[0] = value.call(this, index, self.html())), self.domManip(args, callback);
            });
            if (l && (fragment = jQuery.buildFragment(args, this[0].ownerDocument, !1, this), 
            first = fragment.firstChild, 1 === fragment.childNodes.length && (fragment = first), 
            first)) {
                for (hasScripts = (scripts = jQuery.map(getAll(fragment, "script"), disableScript)).length; i < l; i++) node = fragment, 
                i !== iNoClone && (node = jQuery.clone(node, !0, !0), hasScripts && jQuery.merge(scripts, getAll(node, "script"))), 
                callback.call(this[i], node, i);
                if (hasScripts) for (doc = scripts[scripts.length - 1].ownerDocument, jQuery.map(scripts, restoreScript), 
                i = 0; i < hasScripts; i++) node = scripts[i], rscriptType.test(node.type || "") && !data_priv.access(node, "globalEval") && jQuery.contains(doc, node) && (node.src ? jQuery._evalUrl && jQuery._evalUrl(node.src) : jQuery.globalEval(node.textContent.replace(rcleanScript, "")));
            }
            return this;
        }
    }), jQuery.each({
        appendTo: "append",
        prependTo: "prepend",
        insertBefore: "before",
        insertAfter: "after",
        replaceAll: "replaceWith"
    }, function(name, original) {
        jQuery.fn[name] = function(selector) {
            for (var elems, ret = [], insert = jQuery(selector), last = insert.length - 1, i = 0; i <= last; i++) elems = i === last ? this : this.clone(!0), 
            jQuery(insert[i])[original](elems), push.apply(ret, elems.get());
            return this.pushStack(ret);
        };
    });
    var iframe, elemdisplay = {}, rmargin = /^margin/, rnumnonpx = new RegExp("^(" + pnum + ")(?!px)[a-z%]+$", "i"), getStyles = function(elem) {
        return elem.ownerDocument.defaultView.opener ? elem.ownerDocument.defaultView.getComputedStyle(elem, null) : window.getComputedStyle(elem, null);
    };
    !function() {
        function computePixelPositionAndBoxSizingReliable() {
            div.style.cssText = "-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute", 
            div.innerHTML = "", docElem.appendChild(container);
            var divStyle = window.getComputedStyle(div, null);
            pixelPositionVal = "1%" !== divStyle.top, boxSizingReliableVal = "4px" === divStyle.width, 
            docElem.removeChild(container);
        }
        var pixelPositionVal, boxSizingReliableVal, docElem = document.documentElement, container = document.createElement("div"), div = document.createElement("div");
        div.style && (div.style.backgroundClip = "content-box", div.cloneNode(!0).style.backgroundClip = "", 
        support.clearCloneStyle = "content-box" === div.style.backgroundClip, container.style.cssText = "border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute", 
        container.appendChild(div), window.getComputedStyle && jQuery.extend(support, {
            pixelPosition: function() {
                return computePixelPositionAndBoxSizingReliable(), pixelPositionVal;
            },
            boxSizingReliable: function() {
                return null == boxSizingReliableVal && computePixelPositionAndBoxSizingReliable(), 
                boxSizingReliableVal;
            },
            reliableMarginRight: function() {
                var ret, marginDiv = div.appendChild(document.createElement("div"));
                return marginDiv.style.cssText = div.style.cssText = "-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0", 
                marginDiv.style.marginRight = marginDiv.style.width = "0", div.style.width = "1px", 
                docElem.appendChild(container), ret = !parseFloat(window.getComputedStyle(marginDiv, null).marginRight), 
                docElem.removeChild(container), div.removeChild(marginDiv), ret;
            }
        }));
    }(), jQuery.swap = function(elem, options, callback, args) {
        var ret, name, old = {};
        for (name in options) old[name] = elem.style[name], elem.style[name] = options[name];
        ret = callback.apply(elem, args || []);
        for (name in options) elem.style[name] = old[name];
        return ret;
    };
    var rdisplayswap = /^(none|table(?!-c[ea]).+)/, rnumsplit = new RegExp("^(" + pnum + ")(.*)$", "i"), rrelNum = new RegExp("^([+-])=(" + pnum + ")", "i"), cssShow = {
        position: "absolute",
        visibility: "hidden",
        display: "block"
    }, cssNormalTransform = {
        letterSpacing: "0",
        fontWeight: "400"
    }, cssPrefixes = [ "Webkit", "O", "Moz", "ms" ];
    jQuery.extend({
        cssHooks: {
            opacity: {
                get: function(elem, computed) {
                    if (computed) {
                        var ret = curCSS(elem, "opacity");
                        return "" === ret ? "1" : ret;
                    }
                }
            }
        },
        cssNumber: {
            columnCount: !0,
            fillOpacity: !0,
            flexGrow: !0,
            flexShrink: !0,
            fontWeight: !0,
            lineHeight: !0,
            opacity: !0,
            order: !0,
            orphans: !0,
            widows: !0,
            zIndex: !0,
            zoom: !0
        },
        cssProps: {
            float: "cssFloat"
        },
        style: function(elem, name, value, extra) {
            if (elem && 3 !== elem.nodeType && 8 !== elem.nodeType && elem.style) {
                var ret, type, hooks, origName = jQuery.camelCase(name), style = elem.style;
                if (name = jQuery.cssProps[origName] || (jQuery.cssProps[origName] = vendorPropName(style, origName)), 
                hooks = jQuery.cssHooks[name] || jQuery.cssHooks[origName], void 0 === value) return hooks && "get" in hooks && void 0 !== (ret = hooks.get(elem, !1, extra)) ? ret : style[name];
                "string" == (type = typeof value) && (ret = rrelNum.exec(value)) && (value = (ret[1] + 1) * ret[2] + parseFloat(jQuery.css(elem, name)), 
                type = "number"), null != value && value === value && ("number" !== type || jQuery.cssNumber[origName] || (value += "px"), 
                support.clearCloneStyle || "" !== value || 0 !== name.indexOf("background") || (style[name] = "inherit"), 
                hooks && "set" in hooks && void 0 === (value = hooks.set(elem, value, extra)) || (style[name] = value));
            }
        },
        css: function(elem, name, extra, styles) {
            var val, num, hooks, origName = jQuery.camelCase(name);
            return name = jQuery.cssProps[origName] || (jQuery.cssProps[origName] = vendorPropName(elem.style, origName)), 
            (hooks = jQuery.cssHooks[name] || jQuery.cssHooks[origName]) && "get" in hooks && (val = hooks.get(elem, !0, extra)), 
            void 0 === val && (val = curCSS(elem, name, styles)), "normal" === val && name in cssNormalTransform && (val = cssNormalTransform[name]), 
            "" === extra || extra ? (num = parseFloat(val), !0 === extra || jQuery.isNumeric(num) ? num || 0 : val) : val;
        }
    }), jQuery.each([ "height", "width" ], function(i, name) {
        jQuery.cssHooks[name] = {
            get: function(elem, computed, extra) {
                if (computed) return rdisplayswap.test(jQuery.css(elem, "display")) && 0 === elem.offsetWidth ? jQuery.swap(elem, cssShow, function() {
                    return getWidthOrHeight(elem, name, extra);
                }) : getWidthOrHeight(elem, name, extra);
            },
            set: function(elem, value, extra) {
                var styles = extra && getStyles(elem);
                return setPositiveNumber(0, value, extra ? augmentWidthOrHeight(elem, name, extra, "border-box" === jQuery.css(elem, "boxSizing", !1, styles), styles) : 0);
            }
        };
    }), jQuery.cssHooks.marginRight = addGetHookIf(support.reliableMarginRight, function(elem, computed) {
        if (computed) return jQuery.swap(elem, {
            display: "inline-block"
        }, curCSS, [ elem, "marginRight" ]);
    }), jQuery.each({
        margin: "",
        padding: "",
        border: "Width"
    }, function(prefix, suffix) {
        jQuery.cssHooks[prefix + suffix] = {
            expand: function(value) {
                for (var i = 0, expanded = {}, parts = "string" == typeof value ? value.split(" ") : [ value ]; i < 4; i++) expanded[prefix + cssExpand[i] + suffix] = parts[i] || parts[i - 2] || parts[0];
                return expanded;
            }
        }, rmargin.test(prefix) || (jQuery.cssHooks[prefix + suffix].set = setPositiveNumber);
    }), jQuery.fn.extend({
        css: function(name, value) {
            return access(this, function(elem, name, value) {
                var styles, len, map = {}, i = 0;
                if (jQuery.isArray(name)) {
                    for (styles = getStyles(elem), len = name.length; i < len; i++) map[name[i]] = jQuery.css(elem, name[i], !1, styles);
                    return map;
                }
                return void 0 !== value ? jQuery.style(elem, name, value) : jQuery.css(elem, name);
            }, name, value, arguments.length > 1);
        },
        show: function() {
            return showHide(this, !0);
        },
        hide: function() {
            return showHide(this);
        },
        toggle: function(state) {
            return "boolean" == typeof state ? state ? this.show() : this.hide() : this.each(function() {
                isHidden(this) ? jQuery(this).show() : jQuery(this).hide();
            });
        }
    }), jQuery.Tween = Tween, Tween.prototype = {
        constructor: Tween,
        init: function(elem, options, prop, end, easing, unit) {
            this.elem = elem, this.prop = prop, this.easing = easing || "swing", this.options = options, 
            this.start = this.now = this.cur(), this.end = end, this.unit = unit || (jQuery.cssNumber[prop] ? "" : "px");
        },
        cur: function() {
            var hooks = Tween.propHooks[this.prop];
            return hooks && hooks.get ? hooks.get(this) : Tween.propHooks._default.get(this);
        },
        run: function(percent) {
            var eased, hooks = Tween.propHooks[this.prop];
            return this.options.duration ? this.pos = eased = jQuery.easing[this.easing](percent, this.options.duration * percent, 0, 1, this.options.duration) : this.pos = eased = percent, 
            this.now = (this.end - this.start) * eased + this.start, this.options.step && this.options.step.call(this.elem, this.now, this), 
            hooks && hooks.set ? hooks.set(this) : Tween.propHooks._default.set(this), this;
        }
    }, Tween.prototype.init.prototype = Tween.prototype, Tween.propHooks = {
        _default: {
            get: function(tween) {
                var result;
                return null == tween.elem[tween.prop] || tween.elem.style && null != tween.elem.style[tween.prop] ? (result = jQuery.css(tween.elem, tween.prop, "")) && "auto" !== result ? result : 0 : tween.elem[tween.prop];
            },
            set: function(tween) {
                jQuery.fx.step[tween.prop] ? jQuery.fx.step[tween.prop](tween) : tween.elem.style && (null != tween.elem.style[jQuery.cssProps[tween.prop]] || jQuery.cssHooks[tween.prop]) ? jQuery.style(tween.elem, tween.prop, tween.now + tween.unit) : tween.elem[tween.prop] = tween.now;
            }
        }
    }, Tween.propHooks.scrollTop = Tween.propHooks.scrollLeft = {
        set: function(tween) {
            tween.elem.nodeType && tween.elem.parentNode && (tween.elem[tween.prop] = tween.now);
        }
    }, jQuery.easing = {
        linear: function(p) {
            return p;
        },
        swing: function(p) {
            return .5 - Math.cos(p * Math.PI) / 2;
        }
    }, jQuery.fx = Tween.prototype.init, jQuery.fx.step = {};
    var fxNow, timerId, rfxtypes = /^(?:toggle|show|hide)$/, rfxnum = new RegExp("^(?:([+-])=|)(" + pnum + ")([a-z%]*)$", "i"), rrun = /queueHooks$/, animationPrefilters = [ function(elem, props, opts) {
        var prop, value, toggle, tween, hooks, oldfire, display, anim = this, orig = {}, style = elem.style, hidden = elem.nodeType && isHidden(elem), dataShow = data_priv.get(elem, "fxshow");
        opts.queue || (null == (hooks = jQuery._queueHooks(elem, "fx")).unqueued && (hooks.unqueued = 0, 
        oldfire = hooks.empty.fire, hooks.empty.fire = function() {
            hooks.unqueued || oldfire();
        }), hooks.unqueued++, anim.always(function() {
            anim.always(function() {
                hooks.unqueued--, jQuery.queue(elem, "fx").length || hooks.empty.fire();
            });
        })), 1 === elem.nodeType && ("height" in props || "width" in props) && (opts.overflow = [ style.overflow, style.overflowX, style.overflowY ], 
        "inline" === ("none" === (display = jQuery.css(elem, "display")) ? data_priv.get(elem, "olddisplay") || defaultDisplay(elem.nodeName) : display) && "none" === jQuery.css(elem, "float") && (style.display = "inline-block")), 
        opts.overflow && (style.overflow = "hidden", anim.always(function() {
            style.overflow = opts.overflow[0], style.overflowX = opts.overflow[1], style.overflowY = opts.overflow[2];
        }));
        for (prop in props) if (value = props[prop], rfxtypes.exec(value)) {
            if (delete props[prop], toggle = toggle || "toggle" === value, value === (hidden ? "hide" : "show")) {
                if ("show" !== value || !dataShow || void 0 === dataShow[prop]) continue;
                hidden = !0;
            }
            orig[prop] = dataShow && dataShow[prop] || jQuery.style(elem, prop);
        } else display = void 0;
        if (jQuery.isEmptyObject(orig)) "inline" === ("none" === display ? defaultDisplay(elem.nodeName) : display) && (style.display = display); else {
            dataShow ? "hidden" in dataShow && (hidden = dataShow.hidden) : dataShow = data_priv.access(elem, "fxshow", {}), 
            toggle && (dataShow.hidden = !hidden), hidden ? jQuery(elem).show() : anim.done(function() {
                jQuery(elem).hide();
            }), anim.done(function() {
                var prop;
                data_priv.remove(elem, "fxshow");
                for (prop in orig) jQuery.style(elem, prop, orig[prop]);
            });
            for (prop in orig) tween = createTween(hidden ? dataShow[prop] : 0, prop, anim), 
            prop in dataShow || (dataShow[prop] = tween.start, hidden && (tween.end = tween.start, 
            tween.start = "width" === prop || "height" === prop ? 1 : 0));
        }
    } ], tweeners = {
        "*": [ function(prop, value) {
            var tween = this.createTween(prop, value), target = tween.cur(), parts = rfxnum.exec(value), unit = parts && parts[3] || (jQuery.cssNumber[prop] ? "" : "px"), start = (jQuery.cssNumber[prop] || "px" !== unit && +target) && rfxnum.exec(jQuery.css(tween.elem, prop)), scale = 1, maxIterations = 20;
            if (start && start[3] !== unit) {
                unit = unit || start[3], parts = parts || [], start = +target || 1;
                do {
                    start /= scale = scale || ".5", jQuery.style(tween.elem, prop, start + unit);
                } while (scale !== (scale = tween.cur() / target) && 1 !== scale && --maxIterations);
            }
            return parts && (start = tween.start = +start || +target || 0, tween.unit = unit, 
            tween.end = parts[1] ? start + (parts[1] + 1) * parts[2] : +parts[2]), tween;
        } ]
    };
    jQuery.Animation = jQuery.extend(Animation, {
        tweener: function(props, callback) {
            jQuery.isFunction(props) ? (callback = props, props = [ "*" ]) : props = props.split(" ");
            for (var prop, index = 0, length = props.length; index < length; index++) prop = props[index], 
            tweeners[prop] = tweeners[prop] || [], tweeners[prop].unshift(callback);
        },
        prefilter: function(callback, prepend) {
            prepend ? animationPrefilters.unshift(callback) : animationPrefilters.push(callback);
        }
    }), jQuery.speed = function(speed, easing, fn) {
        var opt = speed && "object" == typeof speed ? jQuery.extend({}, speed) : {
            complete: fn || !fn && easing || jQuery.isFunction(speed) && speed,
            duration: speed,
            easing: fn && easing || easing && !jQuery.isFunction(easing) && easing
        };
        return opt.duration = jQuery.fx.off ? 0 : "number" == typeof opt.duration ? opt.duration : opt.duration in jQuery.fx.speeds ? jQuery.fx.speeds[opt.duration] : jQuery.fx.speeds._default, 
        null != opt.queue && !0 !== opt.queue || (opt.queue = "fx"), opt.old = opt.complete, 
        opt.complete = function() {
            jQuery.isFunction(opt.old) && opt.old.call(this), opt.queue && jQuery.dequeue(this, opt.queue);
        }, opt;
    }, jQuery.fn.extend({
        fadeTo: function(speed, to, easing, callback) {
            return this.filter(isHidden).css("opacity", 0).show().end().animate({
                opacity: to
            }, speed, easing, callback);
        },
        animate: function(prop, speed, easing, callback) {
            var empty = jQuery.isEmptyObject(prop), optall = jQuery.speed(speed, easing, callback), doAnimation = function() {
                var anim = Animation(this, jQuery.extend({}, prop), optall);
                (empty || data_priv.get(this, "finish")) && anim.stop(!0);
            };
            return doAnimation.finish = doAnimation, empty || !1 === optall.queue ? this.each(doAnimation) : this.queue(optall.queue, doAnimation);
        },
        stop: function(type, clearQueue, gotoEnd) {
            var stopQueue = function(hooks) {
                var stop = hooks.stop;
                delete hooks.stop, stop(gotoEnd);
            };
            return "string" != typeof type && (gotoEnd = clearQueue, clearQueue = type, type = void 0), 
            clearQueue && !1 !== type && this.queue(type || "fx", []), this.each(function() {
                var dequeue = !0, index = null != type && type + "queueHooks", timers = jQuery.timers, data = data_priv.get(this);
                if (index) data[index] && data[index].stop && stopQueue(data[index]); else for (index in data) data[index] && data[index].stop && rrun.test(index) && stopQueue(data[index]);
                for (index = timers.length; index--; ) timers[index].elem !== this || null != type && timers[index].queue !== type || (timers[index].anim.stop(gotoEnd), 
                dequeue = !1, timers.splice(index, 1));
                !dequeue && gotoEnd || jQuery.dequeue(this, type);
            });
        },
        finish: function(type) {
            return !1 !== type && (type = type || "fx"), this.each(function() {
                var index, data = data_priv.get(this), queue = data[type + "queue"], hooks = data[type + "queueHooks"], timers = jQuery.timers, length = queue ? queue.length : 0;
                for (data.finish = !0, jQuery.queue(this, type, []), hooks && hooks.stop && hooks.stop.call(this, !0), 
                index = timers.length; index--; ) timers[index].elem === this && timers[index].queue === type && (timers[index].anim.stop(!0), 
                timers.splice(index, 1));
                for (index = 0; index < length; index++) queue[index] && queue[index].finish && queue[index].finish.call(this);
                delete data.finish;
            });
        }
    }), jQuery.each([ "toggle", "show", "hide" ], function(i, name) {
        var cssFn = jQuery.fn[name];
        jQuery.fn[name] = function(speed, easing, callback) {
            return null == speed || "boolean" == typeof speed ? cssFn.apply(this, arguments) : this.animate(genFx(name, !0), speed, easing, callback);
        };
    }), jQuery.each({
        slideDown: genFx("show"),
        slideUp: genFx("hide"),
        slideToggle: genFx("toggle"),
        fadeIn: {
            opacity: "show"
        },
        fadeOut: {
            opacity: "hide"
        },
        fadeToggle: {
            opacity: "toggle"
        }
    }, function(name, props) {
        jQuery.fn[name] = function(speed, easing, callback) {
            return this.animate(props, speed, easing, callback);
        };
    }), jQuery.timers = [], jQuery.fx.tick = function() {
        var timer, i = 0, timers = jQuery.timers;
        for (fxNow = jQuery.now(); i < timers.length; i++) (timer = timers[i])() || timers[i] !== timer || timers.splice(i--, 1);
        timers.length || jQuery.fx.stop(), fxNow = void 0;
    }, jQuery.fx.timer = function(timer) {
        jQuery.timers.push(timer), timer() ? jQuery.fx.start() : jQuery.timers.pop();
    }, jQuery.fx.interval = 13, jQuery.fx.start = function() {
        timerId || (timerId = setInterval(jQuery.fx.tick, jQuery.fx.interval));
    }, jQuery.fx.stop = function() {
        clearInterval(timerId), timerId = null;
    }, jQuery.fx.speeds = {
        slow: 600,
        fast: 200,
        _default: 400
    }, jQuery.fn.delay = function(time, type) {
        return time = jQuery.fx ? jQuery.fx.speeds[time] || time : time, type = type || "fx", 
        this.queue(type, function(next, hooks) {
            var timeout = setTimeout(next, time);
            hooks.stop = function() {
                clearTimeout(timeout);
            };
        });
    }, function() {
        var input = document.createElement("input"), select = document.createElement("select"), opt = select.appendChild(document.createElement("option"));
        input.type = "checkbox", support.checkOn = "" !== input.value, support.optSelected = opt.selected, 
        select.disabled = !0, support.optDisabled = !opt.disabled, (input = document.createElement("input")).value = "t", 
        input.type = "radio", support.radioValue = "t" === input.value;
    }();
    var boolHook, attrHandle = jQuery.expr.attrHandle;
    jQuery.fn.extend({
        attr: function(name, value) {
            return access(this, jQuery.attr, name, value, arguments.length > 1);
        },
        removeAttr: function(name) {
            return this.each(function() {
                jQuery.removeAttr(this, name);
            });
        }
    }), jQuery.extend({
        attr: function(elem, name, value) {
            var hooks, ret, nType = elem.nodeType;
            if (elem && 3 !== nType && 8 !== nType && 2 !== nType) return void 0 === elem.getAttribute ? jQuery.prop(elem, name, value) : (1 === nType && jQuery.isXMLDoc(elem) || (name = name.toLowerCase(), 
            hooks = jQuery.attrHooks[name] || (jQuery.expr.match.bool.test(name) ? boolHook : void 0)), 
            void 0 === value ? hooks && "get" in hooks && null !== (ret = hooks.get(elem, name)) ? ret : null == (ret = jQuery.find.attr(elem, name)) ? void 0 : ret : null !== value ? hooks && "set" in hooks && void 0 !== (ret = hooks.set(elem, value, name)) ? ret : (elem.setAttribute(name, value + ""), 
            value) : void jQuery.removeAttr(elem, name));
        },
        removeAttr: function(elem, value) {
            var name, propName, i = 0, attrNames = value && value.match(rnotwhite);
            if (attrNames && 1 === elem.nodeType) for (;name = attrNames[i++]; ) propName = jQuery.propFix[name] || name, 
            jQuery.expr.match.bool.test(name) && (elem[propName] = !1), elem.removeAttribute(name);
        },
        attrHooks: {
            type: {
                set: function(elem, value) {
                    if (!support.radioValue && "radio" === value && jQuery.nodeName(elem, "input")) {
                        var val = elem.value;
                        return elem.setAttribute("type", value), val && (elem.value = val), value;
                    }
                }
            }
        }
    }), boolHook = {
        set: function(elem, value, name) {
            return !1 === value ? jQuery.removeAttr(elem, name) : elem.setAttribute(name, name), 
            name;
        }
    }, jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g), function(i, name) {
        var getter = attrHandle[name] || jQuery.find.attr;
        attrHandle[name] = function(elem, name, isXML) {
            var ret, handle;
            return isXML || (handle = attrHandle[name], attrHandle[name] = ret, ret = null != getter(elem, name, isXML) ? name.toLowerCase() : null, 
            attrHandle[name] = handle), ret;
        };
    });
    var rfocusable = /^(?:input|select|textarea|button)$/i;
    jQuery.fn.extend({
        prop: function(name, value) {
            return access(this, jQuery.prop, name, value, arguments.length > 1);
        },
        removeProp: function(name) {
            return this.each(function() {
                delete this[jQuery.propFix[name] || name];
            });
        }
    }), jQuery.extend({
        propFix: {
            for: "htmlFor",
            class: "className"
        },
        prop: function(elem, name, value) {
            var ret, hooks, nType = elem.nodeType;
            if (elem && 3 !== nType && 8 !== nType && 2 !== nType) return (1 !== nType || !jQuery.isXMLDoc(elem)) && (name = jQuery.propFix[name] || name, 
            hooks = jQuery.propHooks[name]), void 0 !== value ? hooks && "set" in hooks && void 0 !== (ret = hooks.set(elem, value, name)) ? ret : elem[name] = value : hooks && "get" in hooks && null !== (ret = hooks.get(elem, name)) ? ret : elem[name];
        },
        propHooks: {
            tabIndex: {
                get: function(elem) {
                    return elem.hasAttribute("tabindex") || rfocusable.test(elem.nodeName) || elem.href ? elem.tabIndex : -1;
                }
            }
        }
    }), support.optSelected || (jQuery.propHooks.selected = {
        get: function(elem) {
            var parent = elem.parentNode;
            return parent && parent.parentNode && parent.parentNode.selectedIndex, null;
        }
    }), jQuery.each([ "tabIndex", "readOnly", "maxLength", "cellSpacing", "cellPadding", "rowSpan", "colSpan", "useMap", "frameBorder", "contentEditable" ], function() {
        jQuery.propFix[this.toLowerCase()] = this;
    });
    var rclass = /[\t\r\n\f]/g;
    jQuery.fn.extend({
        addClass: function(value) {
            var classes, elem, cur, clazz, j, finalValue, proceed = "string" == typeof value && value, i = 0, len = this.length;
            if (jQuery.isFunction(value)) return this.each(function(j) {
                jQuery(this).addClass(value.call(this, j, this.className));
            });
            if (proceed) for (classes = (value || "").match(rnotwhite) || []; i < len; i++) if (elem = this[i], 
            cur = 1 === elem.nodeType && (elem.className ? (" " + elem.className + " ").replace(rclass, " ") : " ")) {
                for (j = 0; clazz = classes[j++]; ) cur.indexOf(" " + clazz + " ") < 0 && (cur += clazz + " ");
                finalValue = jQuery.trim(cur), elem.className !== finalValue && (elem.className = finalValue);
            }
            return this;
        },
        removeClass: function(value) {
            var classes, elem, cur, clazz, j, finalValue, proceed = 0 === arguments.length || "string" == typeof value && value, i = 0, len = this.length;
            if (jQuery.isFunction(value)) return this.each(function(j) {
                jQuery(this).removeClass(value.call(this, j, this.className));
            });
            if (proceed) for (classes = (value || "").match(rnotwhite) || []; i < len; i++) if (elem = this[i], 
            cur = 1 === elem.nodeType && (elem.className ? (" " + elem.className + " ").replace(rclass, " ") : "")) {
                for (j = 0; clazz = classes[j++]; ) for (;cur.indexOf(" " + clazz + " ") >= 0; ) cur = cur.replace(" " + clazz + " ", " ");
                finalValue = value ? jQuery.trim(cur) : "", elem.className !== finalValue && (elem.className = finalValue);
            }
            return this;
        },
        toggleClass: function(value, stateVal) {
            var type = typeof value;
            return "boolean" == typeof stateVal && "string" === type ? stateVal ? this.addClass(value) : this.removeClass(value) : jQuery.isFunction(value) ? this.each(function(i) {
                jQuery(this).toggleClass(value.call(this, i, this.className, stateVal), stateVal);
            }) : this.each(function() {
                if ("string" === type) for (var className, i = 0, self = jQuery(this), classNames = value.match(rnotwhite) || []; className = classNames[i++]; ) self.hasClass(className) ? self.removeClass(className) : self.addClass(className); else "undefined" !== type && "boolean" !== type || (this.className && data_priv.set(this, "__className__", this.className), 
                this.className = this.className || !1 === value ? "" : data_priv.get(this, "__className__") || "");
            });
        },
        hasClass: function(selector) {
            for (var className = " " + selector + " ", i = 0, l = this.length; i < l; i++) if (1 === this[i].nodeType && (" " + this[i].className + " ").replace(rclass, " ").indexOf(className) >= 0) return !0;
            return !1;
        }
    });
    var rreturn = /\r/g;
    jQuery.fn.extend({
        val: function(value) {
            var hooks, ret, isFunction, elem = this[0];
            {
                if (arguments.length) return isFunction = jQuery.isFunction(value), this.each(function(i) {
                    var val;
                    1 === this.nodeType && (null == (val = isFunction ? value.call(this, i, jQuery(this).val()) : value) ? val = "" : "number" == typeof val ? val += "" : jQuery.isArray(val) && (val = jQuery.map(val, function(value) {
                        return null == value ? "" : value + "";
                    })), (hooks = jQuery.valHooks[this.type] || jQuery.valHooks[this.nodeName.toLowerCase()]) && "set" in hooks && void 0 !== hooks.set(this, val, "value") || (this.value = val));
                });
                if (elem) return (hooks = jQuery.valHooks[elem.type] || jQuery.valHooks[elem.nodeName.toLowerCase()]) && "get" in hooks && void 0 !== (ret = hooks.get(elem, "value")) ? ret : "string" == typeof (ret = elem.value) ? ret.replace(rreturn, "") : null == ret ? "" : ret;
            }
        }
    }), jQuery.extend({
        valHooks: {
            option: {
                get: function(elem) {
                    var val = jQuery.find.attr(elem, "value");
                    return null != val ? val : jQuery.trim(jQuery.text(elem));
                }
            },
            select: {
                get: function(elem) {
                    for (var value, option, options = elem.options, index = elem.selectedIndex, one = "select-one" === elem.type || index < 0, values = one ? null : [], max = one ? index + 1 : options.length, i = index < 0 ? max : one ? index : 0; i < max; i++) if (((option = options[i]).selected || i === index) && (support.optDisabled ? !option.disabled : null === option.getAttribute("disabled")) && (!option.parentNode.disabled || !jQuery.nodeName(option.parentNode, "optgroup"))) {
                        if (value = jQuery(option).val(), one) return value;
                        values.push(value);
                    }
                    return values;
                },
                set: function(elem, value) {
                    for (var optionSet, option, options = elem.options, values = jQuery.makeArray(value), i = options.length; i--; ) ((option = options[i]).selected = jQuery.inArray(option.value, values) >= 0) && (optionSet = !0);
                    return optionSet || (elem.selectedIndex = -1), values;
                }
            }
        }
    }), jQuery.each([ "radio", "checkbox" ], function() {
        jQuery.valHooks[this] = {
            set: function(elem, value) {
                if (jQuery.isArray(value)) return elem.checked = jQuery.inArray(jQuery(elem).val(), value) >= 0;
            }
        }, support.checkOn || (jQuery.valHooks[this].get = function(elem) {
            return null === elem.getAttribute("value") ? "on" : elem.value;
        });
    }), jQuery.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "), function(i, name) {
        jQuery.fn[name] = function(data, fn) {
            return arguments.length > 0 ? this.on(name, null, data, fn) : this.trigger(name);
        };
    }), jQuery.fn.extend({
        hover: function(fnOver, fnOut) {
            return this.mouseenter(fnOver).mouseleave(fnOut || fnOver);
        },
        bind: function(types, data, fn) {
            return this.on(types, null, data, fn);
        },
        unbind: function(types, fn) {
            return this.off(types, null, fn);
        },
        delegate: function(selector, types, data, fn) {
            return this.on(types, selector, data, fn);
        },
        undelegate: function(selector, types, fn) {
            return 1 === arguments.length ? this.off(selector, "**") : this.off(types, selector || "**", fn);
        }
    });
    var nonce = jQuery.now(), rquery = /\?/;
    jQuery.parseJSON = function(data) {
        return JSON.parse(data + "");
    }, jQuery.parseXML = function(data) {
        var xml, tmp;
        if (!data || "string" != typeof data) return null;
        try {
            tmp = new DOMParser(), xml = tmp.parseFromString(data, "text/xml");
        } catch (e) {
            xml = void 0;
        }
        return xml && !xml.getElementsByTagName("parsererror").length || jQuery.error("Invalid XML: " + data), 
        xml;
    };
    var rhash = /#.*$/, rts = /([?&])_=[^&]*/, rheaders = /^(.*?):[ \t]*([^\r\n]*)$/gm, rlocalProtocol = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/, rnoContent = /^(?:GET|HEAD)$/, rprotocol = /^\/\//, rurl = /^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/, prefilters = {}, transports = {}, allTypes = "*/".concat("*"), ajaxLocation = window.location.href, ajaxLocParts = rurl.exec(ajaxLocation.toLowerCase()) || [];
    jQuery.extend({
        active: 0,
        lastModified: {},
        etag: {},
        ajaxSettings: {
            url: ajaxLocation,
            type: "GET",
            isLocal: rlocalProtocol.test(ajaxLocParts[1]),
            global: !0,
            processData: !0,
            async: !0,
            contentType: "application/x-www-form-urlencoded; charset=UTF-8",
            accepts: {
                "*": allTypes,
                text: "text/plain",
                html: "text/html",
                xml: "application/xml, text/xml",
                json: "application/json, text/javascript"
            },
            contents: {
                xml: /xml/,
                html: /html/,
                json: /json/
            },
            responseFields: {
                xml: "responseXML",
                text: "responseText",
                json: "responseJSON"
            },
            converters: {
                "* text": String,
                "text html": !0,
                "text json": jQuery.parseJSON,
                "text xml": jQuery.parseXML
            },
            flatOptions: {
                url: !0,
                context: !0
            }
        },
        ajaxSetup: function(target, settings) {
            return settings ? ajaxExtend(ajaxExtend(target, jQuery.ajaxSettings), settings) : ajaxExtend(jQuery.ajaxSettings, target);
        },
        ajaxPrefilter: addToPrefiltersOrTransports(prefilters),
        ajaxTransport: addToPrefiltersOrTransports(transports),
        ajax: function(url, options) {
            function done(status, nativeStatusText, responses, headers) {
                var isSuccess, success, error, response, modified, statusText = nativeStatusText;
                2 !== state && (state = 2, timeoutTimer && clearTimeout(timeoutTimer), transport = void 0, 
                responseHeadersString = headers || "", jqXHR.readyState = status > 0 ? 4 : 0, isSuccess = status >= 200 && status < 300 || 304 === status, 
                responses && (response = ajaxHandleResponses(s, jqXHR, responses)), response = ajaxConvert(s, response, jqXHR, isSuccess), 
                isSuccess ? (s.ifModified && ((modified = jqXHR.getResponseHeader("Last-Modified")) && (jQuery.lastModified[cacheURL] = modified), 
                (modified = jqXHR.getResponseHeader("etag")) && (jQuery.etag[cacheURL] = modified)), 
                204 === status || "HEAD" === s.type ? statusText = "nocontent" : 304 === status ? statusText = "notmodified" : (statusText = response.state, 
                success = response.data, isSuccess = !(error = response.error))) : (error = statusText, 
                !status && statusText || (statusText = "error", status < 0 && (status = 0))), jqXHR.status = status, 
                jqXHR.statusText = (nativeStatusText || statusText) + "", isSuccess ? deferred.resolveWith(callbackContext, [ success, statusText, jqXHR ]) : deferred.rejectWith(callbackContext, [ jqXHR, statusText, error ]), 
                jqXHR.statusCode(statusCode), statusCode = void 0, fireGlobals && globalEventContext.trigger(isSuccess ? "ajaxSuccess" : "ajaxError", [ jqXHR, s, isSuccess ? success : error ]), 
                completeDeferred.fireWith(callbackContext, [ jqXHR, statusText ]), fireGlobals && (globalEventContext.trigger("ajaxComplete", [ jqXHR, s ]), 
                --jQuery.active || jQuery.event.trigger("ajaxStop")));
            }
            "object" == typeof url && (options = url, url = void 0), options = options || {};
            var transport, cacheURL, responseHeadersString, responseHeaders, timeoutTimer, parts, fireGlobals, i, s = jQuery.ajaxSetup({}, options), callbackContext = s.context || s, globalEventContext = s.context && (callbackContext.nodeType || callbackContext.jquery) ? jQuery(callbackContext) : jQuery.event, deferred = jQuery.Deferred(), completeDeferred = jQuery.Callbacks("once memory"), statusCode = s.statusCode || {}, requestHeaders = {}, requestHeadersNames = {}, state = 0, strAbort = "canceled", jqXHR = {
                readyState: 0,
                getResponseHeader: function(key) {
                    var match;
                    if (2 === state) {
                        if (!responseHeaders) for (responseHeaders = {}; match = rheaders.exec(responseHeadersString); ) responseHeaders[match[1].toLowerCase()] = match[2];
                        match = responseHeaders[key.toLowerCase()];
                    }
                    return null == match ? null : match;
                },
                getAllResponseHeaders: function() {
                    return 2 === state ? responseHeadersString : null;
                },
                setRequestHeader: function(name, value) {
                    var lname = name.toLowerCase();
                    return state || (name = requestHeadersNames[lname] = requestHeadersNames[lname] || name, 
                    requestHeaders[name] = value), this;
                },
                overrideMimeType: function(type) {
                    return state || (s.mimeType = type), this;
                },
                statusCode: function(map) {
                    var code;
                    if (map) if (state < 2) for (code in map) statusCode[code] = [ statusCode[code], map[code] ]; else jqXHR.always(map[jqXHR.status]);
                    return this;
                },
                abort: function(statusText) {
                    var finalText = statusText || strAbort;
                    return transport && transport.abort(finalText), done(0, finalText), this;
                }
            };
            if (deferred.promise(jqXHR).complete = completeDeferred.add, jqXHR.success = jqXHR.done, 
            jqXHR.error = jqXHR.fail, s.url = ((url || s.url || ajaxLocation) + "").replace(rhash, "").replace(rprotocol, ajaxLocParts[1] + "//"), 
            s.type = options.method || options.type || s.method || s.type, s.dataTypes = jQuery.trim(s.dataType || "*").toLowerCase().match(rnotwhite) || [ "" ], 
            null == s.crossDomain && (parts = rurl.exec(s.url.toLowerCase()), s.crossDomain = !(!parts || parts[1] === ajaxLocParts[1] && parts[2] === ajaxLocParts[2] && (parts[3] || ("http:" === parts[1] ? "80" : "443")) === (ajaxLocParts[3] || ("http:" === ajaxLocParts[1] ? "80" : "443")))), 
            s.data && s.processData && "string" != typeof s.data && (s.data = jQuery.param(s.data, s.traditional)), 
            inspectPrefiltersOrTransports(prefilters, s, options, jqXHR), 2 === state) return jqXHR;
            (fireGlobals = jQuery.event && s.global) && 0 == jQuery.active++ && jQuery.event.trigger("ajaxStart"), 
            s.type = s.type.toUpperCase(), s.hasContent = !rnoContent.test(s.type), cacheURL = s.url, 
            s.hasContent || (s.data && (cacheURL = s.url += (rquery.test(cacheURL) ? "&" : "?") + s.data, 
            delete s.data), !1 === s.cache && (s.url = rts.test(cacheURL) ? cacheURL.replace(rts, "$1_=" + nonce++) : cacheURL + (rquery.test(cacheURL) ? "&" : "?") + "_=" + nonce++)), 
            s.ifModified && (jQuery.lastModified[cacheURL] && jqXHR.setRequestHeader("If-Modified-Since", jQuery.lastModified[cacheURL]), 
            jQuery.etag[cacheURL] && jqXHR.setRequestHeader("If-None-Match", jQuery.etag[cacheURL])), 
            (s.data && s.hasContent && !1 !== s.contentType || options.contentType) && jqXHR.setRequestHeader("Content-Type", s.contentType), 
            jqXHR.setRequestHeader("Accept", s.dataTypes[0] && s.accepts[s.dataTypes[0]] ? s.accepts[s.dataTypes[0]] + ("*" !== s.dataTypes[0] ? ", " + allTypes + "; q=0.01" : "") : s.accepts["*"]);
            for (i in s.headers) jqXHR.setRequestHeader(i, s.headers[i]);
            if (s.beforeSend && (!1 === s.beforeSend.call(callbackContext, jqXHR, s) || 2 === state)) return jqXHR.abort();
            strAbort = "abort";
            for (i in {
                success: 1,
                error: 1,
                complete: 1
            }) jqXHR[i](s[i]);
            if (transport = inspectPrefiltersOrTransports(transports, s, options, jqXHR)) {
                jqXHR.readyState = 1, fireGlobals && globalEventContext.trigger("ajaxSend", [ jqXHR, s ]), 
                s.async && s.timeout > 0 && (timeoutTimer = setTimeout(function() {
                    jqXHR.abort("timeout");
                }, s.timeout));
                try {
                    state = 1, transport.send(requestHeaders, done);
                } catch (e) {
                    if (!(state < 2)) throw e;
                    done(-1, e);
                }
            } else done(-1, "No Transport");
            return jqXHR;
        },
        getJSON: function(url, data, callback) {
            return jQuery.get(url, data, callback, "json");
        },
        getScript: function(url, callback) {
            return jQuery.get(url, void 0, callback, "script");
        }
    }), jQuery.each([ "get", "post" ], function(i, method) {
        jQuery[method] = function(url, data, callback, type) {
            return jQuery.isFunction(data) && (type = type || callback, callback = data, data = void 0), 
            jQuery.ajax({
                url: url,
                type: method,
                dataType: type,
                data: data,
                success: callback
            });
        };
    }), jQuery._evalUrl = function(url) {
        return jQuery.ajax({
            url: url,
            type: "GET",
            dataType: "script",
            async: !1,
            global: !1,
            throws: !0
        });
    }, jQuery.fn.extend({
        wrapAll: function(html) {
            var wrap;
            return jQuery.isFunction(html) ? this.each(function(i) {
                jQuery(this).wrapAll(html.call(this, i));
            }) : (this[0] && (wrap = jQuery(html, this[0].ownerDocument).eq(0).clone(!0), this[0].parentNode && wrap.insertBefore(this[0]), 
            wrap.map(function() {
                for (var elem = this; elem.firstElementChild; ) elem = elem.firstElementChild;
                return elem;
            }).append(this)), this);
        },
        wrapInner: function(html) {
            return jQuery.isFunction(html) ? this.each(function(i) {
                jQuery(this).wrapInner(html.call(this, i));
            }) : this.each(function() {
                var self = jQuery(this), contents = self.contents();
                contents.length ? contents.wrapAll(html) : self.append(html);
            });
        },
        wrap: function(html) {
            var isFunction = jQuery.isFunction(html);
            return this.each(function(i) {
                jQuery(this).wrapAll(isFunction ? html.call(this, i) : html);
            });
        },
        unwrap: function() {
            return this.parent().each(function() {
                jQuery.nodeName(this, "body") || jQuery(this).replaceWith(this.childNodes);
            }).end();
        }
    }), jQuery.expr.filters.hidden = function(elem) {
        return elem.offsetWidth <= 0 && elem.offsetHeight <= 0;
    }, jQuery.expr.filters.visible = function(elem) {
        return !jQuery.expr.filters.hidden(elem);
    };
    var r20 = /%20/g, rbracket = /\[\]$/, rCRLF = /\r?\n/g, rsubmitterTypes = /^(?:submit|button|image|reset|file)$/i, rsubmittable = /^(?:input|select|textarea|keygen)/i;
    jQuery.param = function(a, traditional) {
        var prefix, s = [], add = function(key, value) {
            value = jQuery.isFunction(value) ? value() : null == value ? "" : value, s[s.length] = encodeURIComponent(key) + "=" + encodeURIComponent(value);
        };
        if (void 0 === traditional && (traditional = jQuery.ajaxSettings && jQuery.ajaxSettings.traditional), 
        jQuery.isArray(a) || a.jquery && !jQuery.isPlainObject(a)) jQuery.each(a, function() {
            add(this.name, this.value);
        }); else for (prefix in a) buildParams(prefix, a[prefix], traditional, add);
        return s.join("&").replace(r20, "+");
    }, jQuery.fn.extend({
        serialize: function() {
            return jQuery.param(this.serializeArray());
        },
        serializeArray: function() {
            return this.map(function() {
                var elements = jQuery.prop(this, "elements");
                return elements ? jQuery.makeArray(elements) : this;
            }).filter(function() {
                var type = this.type;
                return this.name && !jQuery(this).is(":disabled") && rsubmittable.test(this.nodeName) && !rsubmitterTypes.test(type) && (this.checked || !rcheckableType.test(type));
            }).map(function(i, elem) {
                var val = jQuery(this).val();
                return null == val ? null : jQuery.isArray(val) ? jQuery.map(val, function(val) {
                    return {
                        name: elem.name,
                        value: val.replace(rCRLF, "\r\n")
                    };
                }) : {
                    name: elem.name,
                    value: val.replace(rCRLF, "\r\n")
                };
            }).get();
        }
    }), jQuery.ajaxSettings.xhr = function() {
        try {
            return new XMLHttpRequest();
        } catch (e) {}
    };
    var xhrId = 0, xhrCallbacks = {}, xhrSuccessStatus = {
        0: 200,
        1223: 204
    }, xhrSupported = jQuery.ajaxSettings.xhr();
    window.attachEvent && window.attachEvent("onunload", function() {
        for (var key in xhrCallbacks) xhrCallbacks[key]();
    }), support.cors = !!xhrSupported && "withCredentials" in xhrSupported, support.ajax = xhrSupported = !!xhrSupported, 
    jQuery.ajaxTransport(function(options) {
        var callback;
        if (support.cors || xhrSupported && !options.crossDomain) return {
            send: function(headers, complete) {
                var i, xhr = options.xhr(), id = ++xhrId;
                if (xhr.open(options.type, options.url, options.async, options.username, options.password), 
                options.xhrFields) for (i in options.xhrFields) xhr[i] = options.xhrFields[i];
                options.mimeType && xhr.overrideMimeType && xhr.overrideMimeType(options.mimeType), 
                options.crossDomain || headers["X-Requested-With"] || (headers["X-Requested-With"] = "XMLHttpRequest");
                for (i in headers) xhr.setRequestHeader(i, headers[i]);
                callback = function(type) {
                    return function() {
                        callback && (delete xhrCallbacks[id], callback = xhr.onload = xhr.onerror = null, 
                        "abort" === type ? xhr.abort() : "error" === type ? complete(xhr.status, xhr.statusText) : complete(xhrSuccessStatus[xhr.status] || xhr.status, xhr.statusText, "string" == typeof xhr.responseText ? {
                            text: xhr.responseText
                        } : void 0, xhr.getAllResponseHeaders()));
                    };
                }, xhr.onload = callback(), xhr.onerror = callback("error"), callback = xhrCallbacks[id] = callback("abort");
                try {
                    xhr.send(options.hasContent && options.data || null);
                } catch (e) {
                    if (callback) throw e;
                }
            },
            abort: function() {
                callback && callback();
            }
        };
    }), jQuery.ajaxSetup({
        accepts: {
            script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
        },
        contents: {
            script: /(?:java|ecma)script/
        },
        converters: {
            "text script": function(text) {
                return jQuery.globalEval(text), text;
            }
        }
    }), jQuery.ajaxPrefilter("script", function(s) {
        void 0 === s.cache && (s.cache = !1), s.crossDomain && (s.type = "GET");
    }), jQuery.ajaxTransport("script", function(s) {
        if (s.crossDomain) {
            var script, callback;
            return {
                send: function(_, complete) {
                    script = jQuery("<script>").prop({
                        async: !0,
                        charset: s.scriptCharset,
                        src: s.url
                    }).on("load error", callback = function(evt) {
                        script.remove(), callback = null, evt && complete("error" === evt.type ? 404 : 200, evt.type);
                    }), document.head.appendChild(script[0]);
                },
                abort: function() {
                    callback && callback();
                }
            };
        }
    });
    var oldCallbacks = [], rjsonp = /(=)\?(?=&|$)|\?\?/;
    jQuery.ajaxSetup({
        jsonp: "callback",
        jsonpCallback: function() {
            var callback = oldCallbacks.pop() || jQuery.expando + "_" + nonce++;
            return this[callback] = !0, callback;
        }
    }), jQuery.ajaxPrefilter("json jsonp", function(s, originalSettings, jqXHR) {
        var callbackName, overwritten, responseContainer, jsonProp = !1 !== s.jsonp && (rjsonp.test(s.url) ? "url" : "string" == typeof s.data && !(s.contentType || "").indexOf("application/x-www-form-urlencoded") && rjsonp.test(s.data) && "data");
        if (jsonProp || "jsonp" === s.dataTypes[0]) return callbackName = s.jsonpCallback = jQuery.isFunction(s.jsonpCallback) ? s.jsonpCallback() : s.jsonpCallback, 
        jsonProp ? s[jsonProp] = s[jsonProp].replace(rjsonp, "$1" + callbackName) : !1 !== s.jsonp && (s.url += (rquery.test(s.url) ? "&" : "?") + s.jsonp + "=" + callbackName), 
        s.converters["script json"] = function() {
            return responseContainer || jQuery.error(callbackName + " was not called"), responseContainer[0];
        }, s.dataTypes[0] = "json", overwritten = window[callbackName], window[callbackName] = function() {
            responseContainer = arguments;
        }, jqXHR.always(function() {
            window[callbackName] = overwritten, s[callbackName] && (s.jsonpCallback = originalSettings.jsonpCallback, 
            oldCallbacks.push(callbackName)), responseContainer && jQuery.isFunction(overwritten) && overwritten(responseContainer[0]), 
            responseContainer = overwritten = void 0;
        }), "script";
    }), jQuery.parseHTML = function(data, context, keepScripts) {
        if (!data || "string" != typeof data) return null;
        "boolean" == typeof context && (keepScripts = context, context = !1), context = context || document;
        var parsed = rsingleTag.exec(data), scripts = !keepScripts && [];
        return parsed ? [ context.createElement(parsed[1]) ] : (parsed = jQuery.buildFragment([ data ], context, scripts), 
        scripts && scripts.length && jQuery(scripts).remove(), jQuery.merge([], parsed.childNodes));
    };
    var _load = jQuery.fn.load;
    jQuery.fn.load = function(url, params, callback) {
        if ("string" != typeof url && _load) return _load.apply(this, arguments);
        var selector, type, response, self = this, off = url.indexOf(" ");
        return off >= 0 && (selector = jQuery.trim(url.slice(off)), url = url.slice(0, off)), 
        jQuery.isFunction(params) ? (callback = params, params = void 0) : params && "object" == typeof params && (type = "POST"), 
        self.length > 0 && jQuery.ajax({
            url: url,
            type: type,
            dataType: "html",
            data: params
        }).done(function(responseText) {
            response = arguments, self.html(selector ? jQuery("<div>").append(jQuery.parseHTML(responseText)).find(selector) : responseText);
        }).complete(callback && function(jqXHR, status) {
            self.each(callback, response || [ jqXHR.responseText, status, jqXHR ]);
        }), this;
    }, jQuery.each([ "ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend" ], function(i, type) {
        jQuery.fn[type] = function(fn) {
            return this.on(type, fn);
        };
    }), jQuery.expr.filters.animated = function(elem) {
        return jQuery.grep(jQuery.timers, function(fn) {
            return elem === fn.elem;
        }).length;
    };
    var docElem = window.document.documentElement;
    jQuery.offset = {
        setOffset: function(elem, options, i) {
            var curPosition, curLeft, curCSSTop, curTop, curOffset, curCSSLeft, position = jQuery.css(elem, "position"), curElem = jQuery(elem), props = {};
            "static" === position && (elem.style.position = "relative"), curOffset = curElem.offset(), 
            curCSSTop = jQuery.css(elem, "top"), curCSSLeft = jQuery.css(elem, "left"), ("absolute" === position || "fixed" === position) && (curCSSTop + curCSSLeft).indexOf("auto") > -1 ? (curTop = (curPosition = curElem.position()).top, 
            curLeft = curPosition.left) : (curTop = parseFloat(curCSSTop) || 0, curLeft = parseFloat(curCSSLeft) || 0), 
            jQuery.isFunction(options) && (options = options.call(elem, i, curOffset)), null != options.top && (props.top = options.top - curOffset.top + curTop), 
            null != options.left && (props.left = options.left - curOffset.left + curLeft), 
            "using" in options ? options.using.call(elem, props) : curElem.css(props);
        }
    }, jQuery.fn.extend({
        offset: function(options) {
            if (arguments.length) return void 0 === options ? this : this.each(function(i) {
                jQuery.offset.setOffset(this, options, i);
            });
            var docElem, win, elem = this[0], box = {
                top: 0,
                left: 0
            }, doc = elem && elem.ownerDocument;
            if (doc) return docElem = doc.documentElement, jQuery.contains(docElem, elem) ? (void 0 !== elem.getBoundingClientRect && (box = elem.getBoundingClientRect()), 
            win = getWindow(doc), {
                top: box.top + win.pageYOffset - docElem.clientTop,
                left: box.left + win.pageXOffset - docElem.clientLeft
            }) : box;
        },
        position: function() {
            if (this[0]) {
                var offsetParent, offset, elem = this[0], parentOffset = {
                    top: 0,
                    left: 0
                };
                return "fixed" === jQuery.css(elem, "position") ? offset = elem.getBoundingClientRect() : (offsetParent = this.offsetParent(), 
                offset = this.offset(), jQuery.nodeName(offsetParent[0], "html") || (parentOffset = offsetParent.offset()), 
                parentOffset.top += jQuery.css(offsetParent[0], "borderTopWidth", !0), parentOffset.left += jQuery.css(offsetParent[0], "borderLeftWidth", !0)), 
                {
                    top: offset.top - parentOffset.top - jQuery.css(elem, "marginTop", !0),
                    left: offset.left - parentOffset.left - jQuery.css(elem, "marginLeft", !0)
                };
            }
        },
        offsetParent: function() {
            return this.map(function() {
                for (var offsetParent = this.offsetParent || docElem; offsetParent && !jQuery.nodeName(offsetParent, "html") && "static" === jQuery.css(offsetParent, "position"); ) offsetParent = offsetParent.offsetParent;
                return offsetParent || docElem;
            });
        }
    }), jQuery.each({
        scrollLeft: "pageXOffset",
        scrollTop: "pageYOffset"
    }, function(method, prop) {
        var top = "pageYOffset" === prop;
        jQuery.fn[method] = function(val) {
            return access(this, function(elem, method, val) {
                var win = getWindow(elem);
                if (void 0 === val) return win ? win[prop] : elem[method];
                win ? win.scrollTo(top ? window.pageXOffset : val, top ? val : window.pageYOffset) : elem[method] = val;
            }, method, val, arguments.length, null);
        };
    }), jQuery.each([ "top", "left" ], function(i, prop) {
        jQuery.cssHooks[prop] = addGetHookIf(support.pixelPosition, function(elem, computed) {
            if (computed) return computed = curCSS(elem, prop), rnumnonpx.test(computed) ? jQuery(elem).position()[prop] + "px" : computed;
        });
    }), jQuery.each({
        Height: "height",
        Width: "width"
    }, function(name, type) {
        jQuery.each({
            padding: "inner" + name,
            content: type,
            "": "outer" + name
        }, function(defaultExtra, funcName) {
            jQuery.fn[funcName] = function(margin, value) {
                var chainable = arguments.length && (defaultExtra || "boolean" != typeof margin), extra = defaultExtra || (!0 === margin || !0 === value ? "margin" : "border");
                return access(this, function(elem, type, value) {
                    var doc;
                    return jQuery.isWindow(elem) ? elem.document.documentElement["client" + name] : 9 === elem.nodeType ? (doc = elem.documentElement, 
                    Math.max(elem.body["scroll" + name], doc["scroll" + name], elem.body["offset" + name], doc["offset" + name], doc["client" + name])) : void 0 === value ? jQuery.css(elem, type, extra) : jQuery.style(elem, type, value, extra);
                }, type, chainable ? margin : void 0, chainable, null);
            };
        });
    }), jQuery.fn.size = function() {
        return this.length;
    }, jQuery.fn.andSelf = jQuery.fn.addBack, "function" == typeof define && define.amd && define("jquery", [], function() {
        return jQuery;
    });
    var _jQuery = window.jQuery, _$ = window.$;
    return jQuery.noConflict = function(deep) {
        return window.$ === jQuery && (window.$ = _$), deep && window.jQuery === jQuery && (window.jQuery = _jQuery), 
        jQuery;
    }, void 0 === noGlobal && (window.jQuery = window.$ = jQuery), jQuery;
}), function() {
    function n(n) {
        function t(t, r, e, u, i, o) {
            for (;i >= 0 && o > i; i += n) {
                var a = u ? u[i] : i;
                e = r(e, t[a], a, t);
            }
            return e;
        }
        return function(r, e, u, i) {
            e = b(e, i, 4);
            var o = !k(r) && m.keys(r), a = (o || r).length, c = n > 0 ? 0 : a - 1;
            return arguments.length < 3 && (u = r[o ? o[c] : c], c += n), t(r, e, u, o, c, a);
        };
    }
    function t(n) {
        return function(t, r, e) {
            r = x(r, e);
            for (var u = O(t), i = n > 0 ? 0 : u - 1; i >= 0 && u > i; i += n) if (r(t[i], i, t)) return i;
            return -1;
        };
    }
    function r(n, t, r) {
        return function(e, u, i) {
            var o = 0, a = O(e);
            if ("number" == typeof i) n > 0 ? o = i >= 0 ? i : Math.max(i + a, o) : a = i >= 0 ? Math.min(i + 1, a) : i + a + 1; else if (r && i && a) return i = r(e, u), 
            e[i] === u ? i : -1;
            if (u !== u) return (i = t(l.call(e, o, a), m.isNaN)) >= 0 ? i + o : -1;
            for (i = n > 0 ? o : a - 1; i >= 0 && a > i; i += n) if (e[i] === u) return i;
            return -1;
        };
    }
    function e(n, t) {
        var r = I.length, e = n.constructor, u = m.isFunction(e) && e.prototype || a, i = "constructor";
        for (m.has(n, i) && !m.contains(t, i) && t.push(i); r--; ) (i = I[r]) in n && n[i] !== u[i] && !m.contains(t, i) && t.push(i);
    }
    var u = this, i = u._, o = Array.prototype, a = Object.prototype, c = Function.prototype, f = o.push, l = o.slice, s = a.toString, p = a.hasOwnProperty, h = Array.isArray, v = Object.keys, g = c.bind, y = Object.create, d = function() {}, m = function(n) {
        return n instanceof m ? n : this instanceof m ? void (this._wrapped = n) : new m(n);
    };
    "undefined" != typeof exports ? ("undefined" != typeof module && module.exports && (exports = module.exports = m), 
    exports._ = m) : u._ = m, m.VERSION = "1.8.3";
    var b = function(n, t, r) {
        if (void 0 === t) return n;
        switch (null == r ? 3 : r) {
          case 1:
            return function(r) {
                return n.call(t, r);
            };

          case 2:
            return function(r, e) {
                return n.call(t, r, e);
            };

          case 3:
            return function(r, e, u) {
                return n.call(t, r, e, u);
            };

          case 4:
            return function(r, e, u, i) {
                return n.call(t, r, e, u, i);
            };
        }
        return function() {
            return n.apply(t, arguments);
        };
    }, x = function(n, t, r) {
        return null == n ? m.identity : m.isFunction(n) ? b(n, t, r) : m.isObject(n) ? m.matcher(n) : m.property(n);
    };
    m.iteratee = function(n, t) {
        return x(n, t, 1 / 0);
    };
    var _ = function(n, t) {
        return function(r) {
            var e = arguments.length;
            if (2 > e || null == r) return r;
            for (var u = 1; e > u; u++) for (var i = arguments[u], o = n(i), a = o.length, c = 0; a > c; c++) {
                var f = o[c];
                t && void 0 !== r[f] || (r[f] = i[f]);
            }
            return r;
        };
    }, j = function(n) {
        if (!m.isObject(n)) return {};
        if (y) return y(n);
        d.prototype = n;
        var t = new d();
        return d.prototype = null, t;
    }, w = function(n) {
        return function(t) {
            return null == t ? void 0 : t[n];
        };
    }, A = Math.pow(2, 53) - 1, O = w("length"), k = function(n) {
        var t = O(n);
        return "number" == typeof t && t >= 0 && A >= t;
    };
    m.each = m.forEach = function(n, t, r) {
        t = b(t, r);
        var e, u;
        if (k(n)) for (e = 0, u = n.length; u > e; e++) t(n[e], e, n); else {
            var i = m.keys(n);
            for (e = 0, u = i.length; u > e; e++) t(n[i[e]], i[e], n);
        }
        return n;
    }, m.map = m.collect = function(n, t, r) {
        t = x(t, r);
        for (var e = !k(n) && m.keys(n), u = (e || n).length, i = Array(u), o = 0; u > o; o++) {
            var a = e ? e[o] : o;
            i[o] = t(n[a], a, n);
        }
        return i;
    }, m.reduce = m.foldl = m.inject = n(1), m.reduceRight = m.foldr = n(-1), m.find = m.detect = function(n, t, r) {
        var e;
        return void 0 !== (e = k(n) ? m.findIndex(n, t, r) : m.findKey(n, t, r)) && -1 !== e ? n[e] : void 0;
    }, m.filter = m.select = function(n, t, r) {
        var e = [];
        return t = x(t, r), m.each(n, function(n, r, u) {
            t(n, r, u) && e.push(n);
        }), e;
    }, m.reject = function(n, t, r) {
        return m.filter(n, m.negate(x(t)), r);
    }, m.every = m.all = function(n, t, r) {
        t = x(t, r);
        for (var e = !k(n) && m.keys(n), u = (e || n).length, i = 0; u > i; i++) {
            var o = e ? e[i] : i;
            if (!t(n[o], o, n)) return !1;
        }
        return !0;
    }, m.some = m.any = function(n, t, r) {
        t = x(t, r);
        for (var e = !k(n) && m.keys(n), u = (e || n).length, i = 0; u > i; i++) {
            var o = e ? e[i] : i;
            if (t(n[o], o, n)) return !0;
        }
        return !1;
    }, m.contains = m.includes = m.include = function(n, t, r, e) {
        return k(n) || (n = m.values(n)), ("number" != typeof r || e) && (r = 0), m.indexOf(n, t, r) >= 0;
    }, m.invoke = function(n, t) {
        var r = l.call(arguments, 2), e = m.isFunction(t);
        return m.map(n, function(n) {
            var u = e ? t : n[t];
            return null == u ? u : u.apply(n, r);
        });
    }, m.pluck = function(n, t) {
        return m.map(n, m.property(t));
    }, m.where = function(n, t) {
        return m.filter(n, m.matcher(t));
    }, m.findWhere = function(n, t) {
        return m.find(n, m.matcher(t));
    }, m.max = function(n, t, r) {
        var e, u, i = -1 / 0, o = -1 / 0;
        if (null == t && null != n) for (var a = 0, c = (n = k(n) ? n : m.values(n)).length; c > a; a++) (e = n[a]) > i && (i = e); else t = x(t, r), 
        m.each(n, function(n, r, e) {
            ((u = t(n, r, e)) > o || u === -1 / 0 && i === -1 / 0) && (i = n, o = u);
        });
        return i;
    }, m.min = function(n, t, r) {
        var e, u, i = 1 / 0, o = 1 / 0;
        if (null == t && null != n) for (var a = 0, c = (n = k(n) ? n : m.values(n)).length; c > a; a++) e = n[a], 
        i > e && (i = e); else t = x(t, r), m.each(n, function(n, r, e) {
            u = t(n, r, e), (o > u || 1 / 0 === u && 1 / 0 === i) && (i = n, o = u);
        });
        return i;
    }, m.shuffle = function(n) {
        for (var t, r = k(n) ? n : m.values(n), e = r.length, u = Array(e), i = 0; e > i; i++) (t = m.random(0, i)) !== i && (u[i] = u[t]), 
        u[t] = r[i];
        return u;
    }, m.sample = function(n, t, r) {
        return null == t || r ? (k(n) || (n = m.values(n)), n[m.random(n.length - 1)]) : m.shuffle(n).slice(0, Math.max(0, t));
    }, m.sortBy = function(n, t, r) {
        return t = x(t, r), m.pluck(m.map(n, function(n, r, e) {
            return {
                value: n,
                index: r,
                criteria: t(n, r, e)
            };
        }).sort(function(n, t) {
            var r = n.criteria, e = t.criteria;
            if (r !== e) {
                if (r > e || void 0 === r) return 1;
                if (e > r || void 0 === e) return -1;
            }
            return n.index - t.index;
        }), "value");
    };
    var F = function(n) {
        return function(t, r, e) {
            var u = {};
            return r = x(r, e), m.each(t, function(e, i) {
                var o = r(e, i, t);
                n(u, e, o);
            }), u;
        };
    };
    m.groupBy = F(function(n, t, r) {
        m.has(n, r) ? n[r].push(t) : n[r] = [ t ];
    }), m.indexBy = F(function(n, t, r) {
        n[r] = t;
    }), m.countBy = F(function(n, t, r) {
        m.has(n, r) ? n[r]++ : n[r] = 1;
    }), m.toArray = function(n) {
        return n ? m.isArray(n) ? l.call(n) : k(n) ? m.map(n, m.identity) : m.values(n) : [];
    }, m.size = function(n) {
        return null == n ? 0 : k(n) ? n.length : m.keys(n).length;
    }, m.partition = function(n, t, r) {
        t = x(t, r);
        var e = [], u = [];
        return m.each(n, function(n, r, i) {
            (t(n, r, i) ? e : u).push(n);
        }), [ e, u ];
    }, m.first = m.head = m.take = function(n, t, r) {
        return null == n ? void 0 : null == t || r ? n[0] : m.initial(n, n.length - t);
    }, m.initial = function(n, t, r) {
        return l.call(n, 0, Math.max(0, n.length - (null == t || r ? 1 : t)));
    }, m.last = function(n, t, r) {
        return null == n ? void 0 : null == t || r ? n[n.length - 1] : m.rest(n, Math.max(0, n.length - t));
    }, m.rest = m.tail = m.drop = function(n, t, r) {
        return l.call(n, null == t || r ? 1 : t);
    }, m.compact = function(n) {
        return m.filter(n, m.identity);
    };
    var S = function(n, t, r, e) {
        for (var u = [], i = 0, o = e || 0, a = O(n); a > o; o++) {
            var c = n[o];
            if (k(c) && (m.isArray(c) || m.isArguments(c))) {
                t || (c = S(c, t, r));
                var f = 0, l = c.length;
                for (u.length += l; l > f; ) u[i++] = c[f++];
            } else r || (u[i++] = c);
        }
        return u;
    };
    m.flatten = function(n, t) {
        return S(n, t, !1);
    }, m.without = function(n) {
        return m.difference(n, l.call(arguments, 1));
    }, m.uniq = m.unique = function(n, t, r, e) {
        m.isBoolean(t) || (e = r, r = t, t = !1), null != r && (r = x(r, e));
        for (var u = [], i = [], o = 0, a = O(n); a > o; o++) {
            var c = n[o], f = r ? r(c, o, n) : c;
            t ? (o && i === f || u.push(c), i = f) : r ? m.contains(i, f) || (i.push(f), u.push(c)) : m.contains(u, c) || u.push(c);
        }
        return u;
    }, m.union = function() {
        return m.uniq(S(arguments, !0, !0));
    }, m.intersection = function(n) {
        for (var t = [], r = arguments.length, e = 0, u = O(n); u > e; e++) {
            var i = n[e];
            if (!m.contains(t, i)) {
                for (var o = 1; r > o && m.contains(arguments[o], i); o++) ;
                o === r && t.push(i);
            }
        }
        return t;
    }, m.difference = function(n) {
        var t = S(arguments, !0, !0, 1);
        return m.filter(n, function(n) {
            return !m.contains(t, n);
        });
    }, m.zip = function() {
        return m.unzip(arguments);
    }, m.unzip = function(n) {
        for (var t = n && m.max(n, O).length || 0, r = Array(t), e = 0; t > e; e++) r[e] = m.pluck(n, e);
        return r;
    }, m.object = function(n, t) {
        for (var r = {}, e = 0, u = O(n); u > e; e++) t ? r[n[e]] = t[e] : r[n[e][0]] = n[e][1];
        return r;
    }, m.findIndex = t(1), m.findLastIndex = t(-1), m.sortedIndex = function(n, t, r, e) {
        for (var u = (r = x(r, e, 1))(t), i = 0, o = O(n); o > i; ) {
            var a = Math.floor((i + o) / 2);
            r(n[a]) < u ? i = a + 1 : o = a;
        }
        return i;
    }, m.indexOf = r(1, m.findIndex, m.sortedIndex), m.lastIndexOf = r(-1, m.findLastIndex), 
    m.range = function(n, t, r) {
        null == t && (t = n || 0, n = 0), r = r || 1;
        for (var e = Math.max(Math.ceil((t - n) / r), 0), u = Array(e), i = 0; e > i; i++, 
        n += r) u[i] = n;
        return u;
    };
    var E = function(n, t, r, e, u) {
        if (!(e instanceof t)) return n.apply(r, u);
        var i = j(n.prototype), o = n.apply(i, u);
        return m.isObject(o) ? o : i;
    };
    m.bind = function(n, t) {
        if (g && n.bind === g) return g.apply(n, l.call(arguments, 1));
        if (!m.isFunction(n)) throw new TypeError("Bind must be called on a function");
        var r = l.call(arguments, 2), e = function() {
            return E(n, e, t, this, r.concat(l.call(arguments)));
        };
        return e;
    }, m.partial = function(n) {
        var t = l.call(arguments, 1), r = function() {
            for (var e = 0, u = t.length, i = Array(u), o = 0; u > o; o++) i[o] = t[o] === m ? arguments[e++] : t[o];
            for (;e < arguments.length; ) i.push(arguments[e++]);
            return E(n, r, this, this, i);
        };
        return r;
    }, m.bindAll = function(n) {
        var t, r, e = arguments.length;
        if (1 >= e) throw new Error("bindAll must be passed function names");
        for (t = 1; e > t; t++) r = arguments[t], n[r] = m.bind(n[r], n);
        return n;
    }, m.memoize = function(n, t) {
        var r = function(e) {
            var u = r.cache, i = "" + (t ? t.apply(this, arguments) : e);
            return m.has(u, i) || (u[i] = n.apply(this, arguments)), u[i];
        };
        return r.cache = {}, r;
    }, m.delay = function(n, t) {
        var r = l.call(arguments, 2);
        return setTimeout(function() {
            return n.apply(null, r);
        }, t);
    }, m.defer = m.partial(m.delay, m, 1), m.throttle = function(n, t, r) {
        var e, u, i, o = null, a = 0;
        r || (r = {});
        var c = function() {
            a = !1 === r.leading ? 0 : m.now(), o = null, i = n.apply(e, u), o || (e = u = null);
        };
        return function() {
            var f = m.now();
            a || !1 !== r.leading || (a = f);
            var l = t - (f - a);
            return e = this, u = arguments, 0 >= l || l > t ? (o && (clearTimeout(o), o = null), 
            a = f, i = n.apply(e, u), o || (e = u = null)) : o || !1 === r.trailing || (o = setTimeout(c, l)), 
            i;
        };
    }, m.debounce = function(n, t, r) {
        var e, u, i, o, a, c = function() {
            var f = m.now() - o;
            t > f && f >= 0 ? e = setTimeout(c, t - f) : (e = null, r || (a = n.apply(i, u), 
            e || (i = u = null)));
        };
        return function() {
            i = this, u = arguments, o = m.now();
            var f = r && !e;
            return e || (e = setTimeout(c, t)), f && (a = n.apply(i, u), i = u = null), a;
        };
    }, m.wrap = function(n, t) {
        return m.partial(t, n);
    }, m.negate = function(n) {
        return function() {
            return !n.apply(this, arguments);
        };
    }, m.compose = function() {
        var n = arguments, t = n.length - 1;
        return function() {
            for (var r = t, e = n[t].apply(this, arguments); r--; ) e = n[r].call(this, e);
            return e;
        };
    }, m.after = function(n, t) {
        return function() {
            return --n < 1 ? t.apply(this, arguments) : void 0;
        };
    }, m.before = function(n, t) {
        var r;
        return function() {
            return --n > 0 && (r = t.apply(this, arguments)), 1 >= n && (t = null), r;
        };
    }, m.once = m.partial(m.before, 2);
    var M = !{
        toString: null
    }.propertyIsEnumerable("toString"), I = [ "valueOf", "isPrototypeOf", "toString", "propertyIsEnumerable", "hasOwnProperty", "toLocaleString" ];
    m.keys = function(n) {
        if (!m.isObject(n)) return [];
        if (v) return v(n);
        var t = [];
        for (var r in n) m.has(n, r) && t.push(r);
        return M && e(n, t), t;
    }, m.allKeys = function(n) {
        if (!m.isObject(n)) return [];
        var t = [];
        for (var r in n) t.push(r);
        return M && e(n, t), t;
    }, m.values = function(n) {
        for (var t = m.keys(n), r = t.length, e = Array(r), u = 0; r > u; u++) e[u] = n[t[u]];
        return e;
    }, m.mapObject = function(n, t, r) {
        t = x(t, r);
        for (var e, u = m.keys(n), i = u.length, o = {}, a = 0; i > a; a++) e = u[a], o[e] = t(n[e], e, n);
        return o;
    }, m.pairs = function(n) {
        for (var t = m.keys(n), r = t.length, e = Array(r), u = 0; r > u; u++) e[u] = [ t[u], n[t[u]] ];
        return e;
    }, m.invert = function(n) {
        for (var t = {}, r = m.keys(n), e = 0, u = r.length; u > e; e++) t[n[r[e]]] = r[e];
        return t;
    }, m.functions = m.methods = function(n) {
        var t = [];
        for (var r in n) m.isFunction(n[r]) && t.push(r);
        return t.sort();
    }, m.extend = _(m.allKeys), m.extendOwn = m.assign = _(m.keys), m.findKey = function(n, t, r) {
        t = x(t, r);
        for (var e, u = m.keys(n), i = 0, o = u.length; o > i; i++) if (e = u[i], t(n[e], e, n)) return e;
    }, m.pick = function(n, t, r) {
        var e, u, i = {}, o = n;
        if (null == o) return i;
        m.isFunction(t) ? (u = m.allKeys(o), e = b(t, r)) : (u = S(arguments, !1, !1, 1), 
        e = function(n, t, r) {
            return t in r;
        }, o = Object(o));
        for (var a = 0, c = u.length; c > a; a++) {
            var f = u[a], l = o[f];
            e(l, f, o) && (i[f] = l);
        }
        return i;
    }, m.omit = function(n, t, r) {
        if (m.isFunction(t)) t = m.negate(t); else {
            var e = m.map(S(arguments, !1, !1, 1), String);
            t = function(n, t) {
                return !m.contains(e, t);
            };
        }
        return m.pick(n, t, r);
    }, m.defaults = _(m.allKeys, !0), m.create = function(n, t) {
        var r = j(n);
        return t && m.extendOwn(r, t), r;
    }, m.clone = function(n) {
        return m.isObject(n) ? m.isArray(n) ? n.slice() : m.extend({}, n) : n;
    }, m.tap = function(n, t) {
        return t(n), n;
    }, m.isMatch = function(n, t) {
        var r = m.keys(t), e = r.length;
        if (null == n) return !e;
        for (var u = Object(n), i = 0; e > i; i++) {
            var o = r[i];
            if (t[o] !== u[o] || !(o in u)) return !1;
        }
        return !0;
    };
    var N = function(n, t, r, e) {
        if (n === t) return 0 !== n || 1 / n == 1 / t;
        if (null == n || null == t) return n === t;
        n instanceof m && (n = n._wrapped), t instanceof m && (t = t._wrapped);
        var u = s.call(n);
        if (u !== s.call(t)) return !1;
        switch (u) {
          case "[object RegExp]":
          case "[object String]":
            return "" + n == "" + t;

          case "[object Number]":
            return +n != +n ? +t != +t : 0 == +n ? 1 / +n == 1 / t : +n == +t;

          case "[object Date]":
          case "[object Boolean]":
            return +n == +t;
        }
        var i = "[object Array]" === u;
        if (!i) {
            if ("object" != typeof n || "object" != typeof t) return !1;
            var o = n.constructor, a = t.constructor;
            if (o !== a && !(m.isFunction(o) && o instanceof o && m.isFunction(a) && a instanceof a) && "constructor" in n && "constructor" in t) return !1;
        }
        r = r || [], e = e || [];
        for (var c = r.length; c--; ) if (r[c] === n) return e[c] === t;
        if (r.push(n), e.push(t), i) {
            if ((c = n.length) !== t.length) return !1;
            for (;c--; ) if (!N(n[c], t[c], r, e)) return !1;
        } else {
            var f, l = m.keys(n);
            if (c = l.length, m.keys(t).length !== c) return !1;
            for (;c--; ) if (f = l[c], !m.has(t, f) || !N(n[f], t[f], r, e)) return !1;
        }
        return r.pop(), e.pop(), !0;
    };
    m.isEqual = function(n, t) {
        return N(n, t);
    }, m.isEmpty = function(n) {
        return null == n || (k(n) && (m.isArray(n) || m.isString(n) || m.isArguments(n)) ? 0 === n.length : 0 === m.keys(n).length);
    }, m.isElement = function(n) {
        return !(!n || 1 !== n.nodeType);
    }, m.isArray = h || function(n) {
        return "[object Array]" === s.call(n);
    }, m.isObject = function(n) {
        var t = typeof n;
        return "function" === t || "object" === t && !!n;
    }, m.each([ "Arguments", "Function", "String", "Number", "Date", "RegExp", "Error" ], function(n) {
        m["is" + n] = function(t) {
            return s.call(t) === "[object " + n + "]";
        };
    }), m.isArguments(arguments) || (m.isArguments = function(n) {
        return m.has(n, "callee");
    }), "function" != typeof /./ && "object" != typeof Int8Array && (m.isFunction = function(n) {
        return "function" == typeof n || !1;
    }), m.isFinite = function(n) {
        return isFinite(n) && !isNaN(parseFloat(n));
    }, m.isNaN = function(n) {
        return m.isNumber(n) && n !== +n;
    }, m.isBoolean = function(n) {
        return !0 === n || !1 === n || "[object Boolean]" === s.call(n);
    }, m.isNull = function(n) {
        return null === n;
    }, m.isUndefined = function(n) {
        return void 0 === n;
    }, m.has = function(n, t) {
        return null != n && p.call(n, t);
    }, m.noConflict = function() {
        return u._ = i, this;
    }, m.identity = function(n) {
        return n;
    }, m.constant = function(n) {
        return function() {
            return n;
        };
    }, m.noop = function() {}, m.property = w, m.propertyOf = function(n) {
        return null == n ? function() {} : function(t) {
            return n[t];
        };
    }, m.matcher = m.matches = function(n) {
        return n = m.extendOwn({}, n), function(t) {
            return m.isMatch(t, n);
        };
    }, m.times = function(n, t, r) {
        var e = Array(Math.max(0, n));
        t = b(t, r, 1);
        for (var u = 0; n > u; u++) e[u] = t(u);
        return e;
    }, m.random = function(n, t) {
        return null == t && (t = n, n = 0), n + Math.floor(Math.random() * (t - n + 1));
    }, m.now = Date.now || function() {
        return new Date().getTime();
    };
    var B = {
        "&": "&amp;",
        "<": "&lt;",
        ">": "&gt;",
        '"': "&quot;",
        "'": "&#x27;",
        "`": "&#x60;"
    }, T = m.invert(B), R = function(n) {
        var t = function(t) {
            return n[t];
        }, r = "(?:" + m.keys(n).join("|") + ")", e = RegExp(r), u = RegExp(r, "g");
        return function(n) {
            return n = null == n ? "" : "" + n, e.test(n) ? n.replace(u, t) : n;
        };
    };
    m.escape = R(B), m.unescape = R(T), m.result = function(n, t, r) {
        var e = null == n ? void 0 : n[t];
        return void 0 === e && (e = r), m.isFunction(e) ? e.call(n) : e;
    };
    var q = 0;
    m.uniqueId = function(n) {
        var t = ++q + "";
        return n ? n + t : t;
    }, m.templateSettings = {
        evaluate: /<%([\s\S]+?)%>/g,
        interpolate: /<%=([\s\S]+?)%>/g,
        escape: /<%-([\s\S]+?)%>/g
    };
    var K = /(.)^/, z = {
        "'": "'",
        "\\": "\\",
        "\r": "r",
        "\n": "n",
        "\u2028": "u2028",
        "\u2029": "u2029"
    }, D = /\\|'|\r|\n|\u2028|\u2029/g, L = function(n) {
        return "\\" + z[n];
    };
    m.template = function(n, t, r) {
        !t && r && (t = r), t = m.defaults({}, t, m.templateSettings);
        var e = RegExp([ (t.escape || K).source, (t.interpolate || K).source, (t.evaluate || K).source ].join("|") + "|$", "g"), u = 0, i = "__p+='";
        n.replace(e, function(t, r, e, o, a) {
            return i += n.slice(u, a).replace(D, L), u = a + t.length, r ? i += "'+\n((__t=(" + r + "))==null?'':_.escape(__t))+\n'" : e ? i += "'+\n((__t=(" + e + "))==null?'':__t)+\n'" : o && (i += "';\n" + o + "\n__p+='"), 
            t;
        }), i += "';\n", t.variable || (i = "with(obj||{}){\n" + i + "}\n"), i = "var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n" + i + "return __p;\n";
        try {
            var o = new Function(t.variable || "obj", "_", i);
        } catch (a) {
            throw a.source = i, a;
        }
        var c = function(n) {
            return o.call(this, n, m);
        }, f = t.variable || "obj";
        return c.source = "function(" + f + "){\n" + i + "}", c;
    }, m.chain = function(n) {
        var t = m(n);
        return t._chain = !0, t;
    };
    var P = function(n, t) {
        return n._chain ? m(t).chain() : t;
    };
    m.mixin = function(n) {
        m.each(m.functions(n), function(t) {
            var r = m[t] = n[t];
            m.prototype[t] = function() {
                var n = [ this._wrapped ];
                return f.apply(n, arguments), P(this, r.apply(m, n));
            };
        });
    }, m.mixin(m), m.each([ "pop", "push", "reverse", "shift", "sort", "splice", "unshift" ], function(n) {
        var t = o[n];
        m.prototype[n] = function() {
            var r = this._wrapped;
            return t.apply(r, arguments), "shift" !== n && "splice" !== n || 0 !== r.length || delete r[0], 
            P(this, r);
        };
    }), m.each([ "concat", "join", "slice" ], function(n) {
        var t = o[n];
        m.prototype[n] = function() {
            return P(this, t.apply(this._wrapped, arguments));
        };
    }), m.prototype.value = function() {
        return this._wrapped;
    }, m.prototype.valueOf = m.prototype.toJSON = m.prototype.value, m.prototype.toString = function() {
        return "" + this._wrapped;
    }, "function" == typeof define && define.amd && define("underscore", [], function() {
        return m;
    });
}.call(this), window.Platform = {};

var logFlags = {}, SideTable;

if ("undefined" != typeof WeakMap && navigator.userAgent.indexOf("Firefox/") < 0 ? SideTable = WeakMap : function() {
    var defineProperty = Object.defineProperty, hasOwnProperty = Object.hasOwnProperty, counter = new Date().getTime() % 1e9;
    (SideTable = function() {
        this.name = "__st" + (1e9 * Math.random() >>> 0) + counter++ + "__";
    }).prototype = {
        set: function(key, value) {
            defineProperty(key, this.name, {
                value: value,
                writable: !0
            });
        },
        get: function(key) {
            return hasOwnProperty.call(key, this.name) ? key[this.name] : void 0;
        },
        delete: function(key) {
            this.set(key, void 0);
        }
    };
}(), window.templateContent = window.templateContent || function(inTemplate) {
    return inTemplate.content;
}, window.wrap = window.unwrap = function(n) {
    return n;
}, window.createShadowRoot = function(inElement) {
    return inElement.webkitCreateShadowRoot();
}, window.templateContent = function(inTemplate) {
    if (window.HTMLTemplateElement && HTMLTemplateElement.bootstrap && HTMLTemplateElement.bootstrap(inTemplate), 
    !inTemplate.content && !inTemplate._content) {
        for (var frag = document.createDocumentFragment(); inTemplate.firstChild; ) frag.appendChild(inTemplate.firstChild);
        inTemplate._content = frag;
    }
    return inTemplate.content || inTemplate._content;
}, function(scope) {
    Function.prototype.bind || (Function.prototype.bind = function(scope) {
        var self = this, args = Array.prototype.slice.call(arguments, 1);
        return function() {
            var args2 = args.slice();
            return args2.push.apply(args2, arguments), self.apply(scope, args2);
        };
    }), scope.mixin = window.mixin;
}(window.Platform), function(scope) {
    "use strict";
    var add = DOMTokenList.prototype.add, remove = DOMTokenList.prototype.remove;
    if (DOMTokenList.prototype.add = function() {
        for (var i = 0; i < arguments.length; i++) add.call(this, arguments[i]);
    }, DOMTokenList.prototype.remove = function() {
        for (var i = 0; i < arguments.length; i++) remove.call(this, arguments[i]);
    }, DOMTokenList.prototype.toggle = function(name, bool) {
        1 == arguments.length && (bool = !this.contains(name)), bool ? this.add(name) : this.remove(name);
    }, DOMTokenList.prototype.switch = function(oldName, newName) {
        oldName && this.remove(oldName), newName && this.add(newName);
    }, NodeList.prototype.forEach = function(cb, context) {
        Array.prototype.slice.call(this).forEach(cb, context);
    }, HTMLCollection.prototype.forEach = function(cb, context) {
        Array.prototype.slice.call(this).forEach(cb, context);
    }, !window.performance) {
        var start = Date.now();
        window.performance = {
            now: function() {
                return Date.now() - start;
            }
        };
    }
    window.requestAnimationFrame || (window.requestAnimationFrame = function() {
        var nativeRaf = window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame;
        return nativeRaf ? function(callback) {
            return nativeRaf(function() {
                callback(performance.now());
            });
        } : function(callback) {
            return window.setTimeout(callback, 1e3 / 60);
        };
    }()), window.cancelAnimationFrame || (window.cancelAnimationFrame = window.webkitCancelAnimationFrame || window.mozCancelAnimationFrame || function(id) {
        clearTimeout(id);
    }), scope.createDOM = function(inTagOrNode, inHTML, inAttrs) {
        var dom = "string" == typeof inTagOrNode ? document.createElement(inTagOrNode) : inTagOrNode.cloneNode(!0);
        if (dom.innerHTML = inHTML, inAttrs) for (var n in inAttrs) dom.setAttribute(n, inAttrs[n]);
        return dom;
    };
}(window.Platform), window.templateContent = window.templateContent || function(inTemplate) {
    return inTemplate.content;
}, function(scope) {
    function isDocumentLink(inElt) {
        return isLinkRel(inElt, IMPORT_LINK_TYPE);
    }
    function isStylesheetLink(inElt) {
        return isLinkRel(inElt, "stylesheet");
    }
    function isLinkRel(inElt, inRel) {
        return "link" === inElt.localName && inElt.getAttribute("rel") === inRel;
    }
    function makeDocument(inHTML, inUrl) {
        var doc = document.implementation.createHTMLDocument(IMPORT_LINK_TYPE);
        doc._URL = inUrl;
        var base = doc.createElement("base");
        return base.setAttribute("href", document.baseURI), doc.head.appendChild(base), 
        doc.body.innerHTML = inHTML, doc;
    }
    scope || (scope = window.HTMLImports = {
        flags: {}
    });
    var loader, IMPORT_LINK_TYPE = "import", importer = {
        documents: {},
        cache: {},
        preloadSelectors: [ "link[rel=" + IMPORT_LINK_TYPE + "]", "script[src]", "link[rel=stylesheet]" ].join(","),
        load: function(inDocument, inNext) {
            (loader = new Loader(importer.loaded, inNext)).cache = importer.cache, importer.preload(inDocument);
        },
        preload: function(inDocument) {
            var nodes = inDocument.querySelectorAll(importer.preloadSelectors);
            inDocument === document && (nodes = Array.prototype.filter.call(nodes, function(n) {
                return isDocumentLink(n);
            })), loader.addNodes(nodes);
        },
        loaded: function(inUrl, inElt, inResource) {
            if (isDocumentLink(inElt)) {
                var document = importer.documents[inUrl];
                document || (document = makeDocument(inResource, inUrl), path.resolvePathsInHTML(document), 
                importer.documents[inUrl] = document, importer.preload(document)), inElt.content = inElt.__resource = document;
            } else inElt.__resource = inResource, isStylesheetLink(inElt) && path.resolvePathsInStylesheet(inElt);
        }
    }, Loader = function(inOnLoad, inOnComplete) {
        this.onload = inOnLoad, this.oncomplete = inOnComplete, this.inflight = 0, this.pending = {}, 
        this.cache = {};
    };
    Loader.prototype = {
        addNodes: function(inNodes) {
            this.inflight += inNodes.length, forEach(inNodes, this.require, this), this.checkDone();
        },
        require: function(inElt) {
            var url = path.nodeUrl(inElt);
            inElt.__nodeUrl = url, this.dedupe(url, inElt) || this.fetch(url, inElt);
        },
        dedupe: function(inUrl, inElt) {
            return this.pending[inUrl] ? (this.pending[inUrl].push(inElt), !0) : this.cache[inUrl] ? (this.onload(inUrl, inElt, loader.cache[inUrl]), 
            this.tail(), !0) : (this.pending[inUrl] = [ inElt ], !1);
        },
        fetch: function(inUrl, inElt) {
            xhr.load(inUrl, function(err, resource) {
                this.receive(inUrl, inElt, err, resource);
            }.bind(this));
        },
        receive: function(inUrl, inElt, inErr, inResource) {
            inErr || (loader.cache[inUrl] = inResource), loader.pending[inUrl].forEach(function(e) {
                inErr || this.onload(inUrl, e, inResource), this.tail();
            }, this), loader.pending[inUrl] = null;
        },
        tail: function() {
            --this.inflight, this.checkDone();
        },
        checkDone: function() {
            this.inflight || this.oncomplete();
        }
    };
    var path = {
        nodeUrl: function(inNode) {
            return path.resolveUrl(path.getDocumentUrl(document), path.hrefOrSrc(inNode));
        },
        hrefOrSrc: function(inNode) {
            return inNode.getAttribute("href") || inNode.getAttribute("src");
        },
        documentUrlFromNode: function(inNode) {
            return path.getDocumentUrl(inNode.ownerDocument);
        },
        getDocumentUrl: function(inDocument) {
            return (inDocument && (inDocument._URL || inDocument.impl && inDocument.impl._URL || inDocument.baseURI || inDocument.URL) || "").split("#")[0];
        },
        resolveUrl: function(inBaseUrl, inUrl, inRelativeToDocument) {
            if (this.isAbsUrl(inUrl)) return inUrl;
            var url = this.compressUrl(this.urlToPath(inBaseUrl) + inUrl);
            return inRelativeToDocument && (url = path.makeRelPath(path.getDocumentUrl(document), url)), 
            url;
        },
        isAbsUrl: function(inUrl) {
            return /(^data:)|(^http[s]?:)|(^\/)/.test(inUrl);
        },
        urlToPath: function(inBaseUrl) {
            var parts = inBaseUrl.split("/");
            return parts.pop(), parts.push(""), parts.join("/");
        },
        compressUrl: function(inUrl) {
            for (var parts = inUrl.split("/"), i = 0; i < parts.length; i++) ".." === parts[i] && (parts.splice(i - 1, 2), 
            i -= 2);
            return parts.join("/");
        },
        makeRelPath: function(inSource, inTarget) {
            var s, t;
            for (s = this.compressUrl(inSource).split("/"), t = this.compressUrl(inTarget).split("/"); s.length && s[0] === t[0]; ) s.shift(), 
            t.shift();
            for (var i = 0, l = s.length - 1; i < l; i++) t.unshift("..");
            return t.join("/");
        },
        resolvePathsInHTML: function(inRoot) {
            var docUrl = path.documentUrlFromNode(inRoot.body);
            window.HTMLTemplateElement && HTMLTemplateElement.bootstrap && HTMLTemplateElement.bootstrap(inRoot);
            var node = inRoot.body;
            path._resolvePathsInHTML(node, docUrl);
        },
        _resolvePathsInHTML: function(inRoot, inUrl) {
            if (path.resolveAttributes(inRoot, inUrl), path.resolveStyleElts(inRoot, inUrl), 
            window.templateContent) {
                var templates = inRoot.querySelectorAll("template");
                templates && forEach(templates, function(t) {
                    path._resolvePathsInHTML(templateContent(t), inUrl);
                });
            }
        },
        resolvePathsInStylesheet: function(inSheet) {
            var docUrl = path.nodeUrl(inSheet);
            inSheet.__resource = path.resolveCssText(inSheet.__resource, docUrl);
        },
        resolveStyleElts: function(inRoot, inUrl) {
            var styles = inRoot.querySelectorAll("style");
            styles && forEach(styles, function(style) {
                style.textContent = path.resolveCssText(style.textContent, inUrl);
            });
        },
        resolveCssText: function(inCssText, inBaseUrl) {
            return inCssText.replace(/url\([^)]*\)/g, function(inMatch) {
                var urlPath = inMatch.replace(/["']/g, "").slice(4, -1);
                return "url(" + (urlPath = path.resolveUrl(inBaseUrl, urlPath, !0)) + ")";
            });
        },
        resolveAttributes: function(inRoot, inUrl) {
            var nodes = inRoot && inRoot.querySelectorAll(URL_ATTRS_SELECTOR);
            nodes && forEach(nodes, function(n) {
                this.resolveNodeAttributes(n, inUrl);
            }, this);
        },
        resolveNodeAttributes: function(inNode, inUrl) {
            URL_ATTRS.forEach(function(v) {
                var attr = inNode.attributes[v];
                if (attr && attr.value && attr.value.search(URL_TEMPLATE_SEARCH) < 0) {
                    var urlPath = path.resolveUrl(inUrl, attr.value, !0);
                    attr.value = urlPath;
                }
            });
        }
    }, URL_ATTRS = [ "href", "src", "action" ], URL_ATTRS_SELECTOR = "[" + URL_ATTRS.join("],[") + "]", URL_TEMPLATE_SEARCH = "{{.*}}", xhr = scope.xhr || {
        async: !0,
        ok: function(inRequest) {
            return inRequest.status >= 200 && inRequest.status < 300 || 304 === inRequest.status || 0 === inRequest.status;
        },
        load: function(url, next, nextContext) {
            var request = new XMLHttpRequest();
            (scope.flags.debug || scope.flags.bust) && (url += "?" + Math.random()), request.open("GET", url, xhr.async), 
            request.addEventListener("readystatechange", function(e) {
                4 === request.readyState && next.call(nextContext, !xhr.ok(request) && request, request.response, url);
            }), request.send();
        }
    }, forEach = Array.prototype.forEach.call.bind(Array.prototype.forEach);
    scope.xhr = xhr, scope.importer = importer, scope.getDocumentUrl = path.getDocumentUrl, 
    "function" != typeof window.CustomEvent && (window.CustomEvent = function(inType) {
        var e = document.createEvent("HTMLEvents");
        return e.initEvent(inType, !0, !0), e;
    }), document.addEventListener("DOMContentLoaded", function() {
        importer.load(document, function() {
            var doc = window.ShadowDOMPolyfill ? ShadowDOMPolyfill.wrap(document) : document;
            HTMLImports.readyTime = new Date().getTime(), doc.body.dispatchEvent(new CustomEvent("HTMLImportsLoaded", {
                bubbles: !0
            }));
        });
    });
}(window.HTMLImports), !window.MutationObserver && (window.MutationObserver = window.WebKitMutationObserver || window.JsMutationObserver, 
!MutationObserver)) throw new Error("no mutation observer support");

!function(scope) {
    function ancestry(inExtends) {
        var extendee = registry[inExtends];
        return extendee ? ancestry(extendee.extends).concat([ extendee ]) : [];
    }
    function resolveTagName(inDefinition) {
        for (var a, baseTag = inDefinition.extends, i = 0; a = inDefinition.ancestry[i]; i++) baseTag = a.is && a.tag;
        inDefinition.tag = baseTag || inDefinition.name, baseTag && (inDefinition.is = inDefinition.name);
    }
    function resolvePrototypeChain(inDefinition) {
        if (!Object.__proto__) {
            var native = HTMLElement.prototype;
            if (inDefinition.is) {
                var inst = document.createElement(inDefinition.tag);
                native = Object.getPrototypeOf(inst);
            }
        }
        inDefinition.native = native;
    }
    function instantiate(inDefinition) {
        return upgrade(domCreateElement(inDefinition.tag), inDefinition);
    }
    function upgrade(inElement, inDefinition) {
        return inDefinition.is && inElement.setAttribute("is", inDefinition.is), implement(inElement, inDefinition), 
        inElement.__upgraded__ = !0, scope.upgradeSubtree(inElement), ready(inElement), 
        inElement;
    }
    function implement(inElement, inDefinition) {
        Object.__proto__ ? inElement.__proto__ = inDefinition.prototype : (customMixin(inElement, inDefinition.prototype, inDefinition.native), 
        inElement.__proto__ = inDefinition.prototype);
    }
    function customMixin(inTarget, inSrc, inNative) {
        for (var used = {}, p = inSrc; p !== inNative && p !== HTMLUnknownElement.prototype; ) {
            for (var k, keys = Object.getOwnPropertyNames(p), i = 0; k = keys[i]; i++) used[k] || (Object.defineProperty(inTarget, k, Object.getOwnPropertyDescriptor(p, k)), 
            used[k] = 1);
            p = Object.getPrototypeOf(p);
        }
    }
    function ready(inElement) {
        inElement.readyCallback && inElement.readyCallback();
    }
    function overrideAttributeApi(prototype) {
        var setAttribute = prototype.setAttribute;
        prototype.setAttribute = function(name, value) {
            changeAttribute.call(this, name, value, setAttribute);
        };
        var removeAttribute = prototype.removeAttribute;
        prototype.removeAttribute = function(name, value) {
            changeAttribute.call(this, name, value, removeAttribute);
        };
    }
    function changeAttribute(name, value, operation) {
        var oldValue = this.getAttribute(name);
        operation.apply(this, arguments), this.attributeChangedCallback && this.getAttribute(name) !== oldValue && this.attributeChangedCallback(name, oldValue);
    }
    function registerDefinition(inName, inDefinition) {
        registry[inName] = inDefinition;
    }
    function generateConstructor(inDefinition) {
        return function() {
            return instantiate(inDefinition);
        };
    }
    if (scope || (scope = window.CustomElements = {
        flags: {}
    }), scope.hasNative = (document.webkitRegister || document.register) && "native" === scope.flags.register, 
    scope.hasNative) {
        document.register = document.register || document.webkitRegister;
        scope.registry = {}, scope.upgradeElement = function() {};
    } else {
        var registry = {}, domCreateElement = document.createElement.bind(document), domCloneNode = Node.prototype.cloneNode;
        document.register = function(inName, inOptions) {
            var definition = inOptions || {};
            if (!inName) throw new Error("Name argument must not be empty");
            if (definition.name = inName, !definition.prototype) throw new Error("Options missing required prototype property");
            return definition.lifecycle = definition.lifecycle || {}, definition.ancestry = ancestry(definition.extends), 
            resolveTagName(definition), resolvePrototypeChain(definition), overrideAttributeApi(definition.prototype), 
            registerDefinition(inName, definition), definition.ctor = generateConstructor(definition), 
            definition.ctor.prototype = definition.prototype, definition.prototype.constructor = definition.ctor, 
            scope.ready && scope.upgradeAll(document), definition.ctor;
        }, document.createElement = function(inTag) {
            var definition = registry[inTag];
            return definition ? new definition.ctor() : domCreateElement(inTag);
        }, Node.prototype.cloneNode = function(deep) {
            var n = domCloneNode.call(this, deep);
            return scope.upgradeAll(n), n;
        }, scope.registry = registry, scope.upgrade = function(inElement) {
            if (!inElement.__upgraded__ && inElement.nodeType === Node.ELEMENT_NODE) {
                var type = inElement.getAttribute("is") || inElement.localName, definition = registry[type];
                return definition && upgrade(inElement, definition);
            }
        };
    }
}(window.CustomElements), function(scope) {
    function findAll(node, find, data) {
        var e = node.firstElementChild;
        if (!e) for (e = node.firstChild; e && e.nodeType !== Node.ELEMENT_NODE; ) e = e.nextSibling;
        for (;e; ) !0 !== find(e, data) && findAll(e, find, data), e = e.nextElementSibling;
        return null;
    }
    function forSubtree(node, cb) {
        findAll(node, function(e) {
            if (cb(e)) return !0;
            e.webkitShadowRoot && forSubtree(e.webkitShadowRoot, cb);
        }), node.webkitShadowRoot && forSubtree(node.webkitShadowRoot, cb);
    }
    function added(node) {
        if (upgrade(node)) return insertedNode(node), !0;
        inserted(node);
    }
    function addedSubtree(node) {
        forSubtree(node, function(e) {
            if (added(e)) return !0;
        });
    }
    function addedNode(node) {
        return added(node) || addedSubtree(node);
    }
    function upgrade(node) {
        if (!node.__upgraded__ && node.nodeType === Node.ELEMENT_NODE) {
            var type = node.getAttribute("is") || node.localName;
            if (scope.registry[type]) return logFlags.dom && console.group("upgrade:", node.localName), 
            scope.upgrade(node), logFlags.dom && console.groupEnd(), !0;
        }
    }
    function insertedNode(node) {
        inserted(node), inDocument(node) && forSubtree(node, function(e) {
            inserted(e);
        });
    }
    function inserted(element) {
        (element.insertedCallback || element.__upgraded__ && logFlags.dom) && (logFlags.dom && console.group("inserted:", element.localName), 
        inDocument(element) && (element.__inserted = (element.__inserted || 0) + 1, element.__inserted < 1 && (element.__inserted = 1), 
        element.__inserted > 1 ? logFlags.dom && console.warn("inserted:", element.localName, "insert/remove count:", element.__inserted) : element.insertedCallback && (logFlags.dom && console.log("inserted:", element.localName), 
        element.insertedCallback())), logFlags.dom && console.groupEnd());
    }
    function removedNode(node) {
        removed(node), forSubtree(node, function(e) {
            removed(e);
        });
    }
    function removed(element) {
        (element.removedCallback || element.__upgraded__ && logFlags.dom) && (logFlags.dom && console.log("removed:", element.localName), 
        inDocument(element) || (element.__inserted = (element.__inserted || 0) - 1, element.__inserted > 0 && (element.__inserted = 0), 
        element.__inserted < 0 ? logFlags.dom && console.warn("removed:", element.localName, "insert/remove count:", element.__inserted) : element.removedCallback && element.removedCallback()));
    }
    function inDocument(element) {
        for (var p = element; p; ) {
            if (p == element.ownerDocument) return !0;
            p = p.parentNode || p.host;
        }
    }
    function watchShadow(node) {
        node.webkitShadowRoot && !node.webkitShadowRoot.__watched && (logFlags.dom && console.log("watching shadow-root for: ", node.localName), 
        observe(node.webkitShadowRoot), node.webkitShadowRoot.__watched = !0);
    }
    function filter(inNode) {
        switch (inNode.localName) {
          case "style":
          case "script":
          case "template":
          case void 0:
            return !0;
        }
    }
    function handler(mutations) {
        if (logFlags.dom) {
            var mx = mutations[0];
            if (mx && "childList" === mx.type && mx.addedNodes && mx.addedNodes) {
                for (var d = mx.addedNodes[0]; d && d !== document && !d.host; ) d = d.parentNode;
                var u = d && (d.URL || d._URL || d.host && d.host.localName) || "";
                u = u.split("/?").shift().split("/").pop();
            }
            console.group("mutations (%d) [%s]", mutations.length, u || "");
        }
        mutations.forEach(function(mx) {
            "childList" === mx.type && (forEach(mx.addedNodes, function(n) {
                filter(n) || addedNode(n);
            }), forEach(mx.removedNodes, function(n) {
                filter(n) || removedNode(n);
            }));
        }), logFlags.dom && console.groupEnd();
    }
    function observe(inRoot) {
        observer.observe(inRoot, {
            childList: !0,
            subtree: !0
        });
    }
    var observer = new MutationObserver(handler), forEach = Array.prototype.forEach.call.bind(Array.prototype.forEach);
    scope.watchShadow = watchShadow, scope.watchAllShadows = function(node) {
        watchShadow(node), forSubtree(node, function(e) {
            watchShadow(node);
        });
    }, scope.upgradeAll = addedNode, scope.upgradeSubtree = addedSubtree, scope.observeDocument = function(document) {
        observe(document);
    }, scope.upgradeDocument = function(document) {
        logFlags.dom && console.group("upgradeDocument: ", (document.URL || document._URL || "").split("/").pop()), 
        addedNode(document), logFlags.dom && console.groupEnd();
    }, scope.takeRecords = function() {
        handler(observer.takeRecords());
    };
}(window.CustomElements), function() {
    function parseElementElement(inElement) {
        var options = {
            name: "",
            extends: null
        };
        takeAttributes(inElement, options);
        var base = HTMLElement.prototype;
        if (options.extends) {
            var archetype = document.createElement(options.extends);
            base = archetype.__proto__ || Object.getPrototypeOf(archetype);
        }
        options.prototype = Object.create(base), inElement.options = options;
        var script = inElement.querySelector('script:not([type]),script[type="text/javascript"],scripts');
        script && executeComponentScript(script.textContent, inElement, options.name);
        var ctor = document.register(options.name, options);
        inElement.ctor = ctor;
        var refName = inElement.getAttribute("constructor");
        refName && (window[refName] = ctor);
    }
    function takeAttributes(inElement, inDictionary) {
        for (var n in inDictionary) {
            var a = inElement.attributes[n];
            a && (inDictionary[n] = a.value);
        }
    }
    function executeComponentScript(inScript, inContext, inName) {
        context = inContext;
        var owner = context.ownerDocument, url = owner._URL || owner.URL || owner.impl && (owner.impl._URL || owner.impl.URL), match = url.match(/.*\/([^.]*)[.]?.*$/);
        if (match) {
            var name = match[1];
            url += name != inName ? ":" + inName : "";
        }
        var code = "__componentScript('" + inName + "', function(){" + inScript + "});\n//@ sourceURL=" + url + "\n";
        eval(code);
    }
    function mixin(obj, props) {
        obj = obj || {};
        try {
            Object.getOwnPropertyNames(props).forEach(function(n) {
                var pd = Object.getOwnPropertyDescriptor(props, n);
                pd && Object.defineProperty(obj, n, pd);
            });
        } catch (x) {}
        return obj;
    }
    var HTMLElementElement = function(inElement) {
        return inElement.register = HTMLElementElement.prototype.register, parseElementElement(inElement), 
        inElement;
    };
    HTMLElementElement.prototype = {
        register: function(inMore) {
            inMore && (this.options.lifecycle = inMore.lifecycle, inMore.prototype && mixin(this.options.prototype, inMore.prototype));
        }
    };
    var context;
    window.__componentScript = function(inName, inFunc) {
        inFunc.call(context);
    }, window.HTMLElementElement = HTMLElementElement;
}(), function() {
    function canAddToMainDoument(node) {
        return !inMainDocument(node) && node.parentNode && !isElementElementChild(node);
    }
    function inMainDocument(inElt) {
        return inElt.ownerDocument === document || inElt.ownerDocument.impl === document;
    }
    function isDocumentLink(inElt) {
        return "link" === inElt.localName && inElt.getAttribute("rel") === IMPORT_LINK_TYPE;
    }
    function isElementElementChild(inElt) {
        if (inElt.parentNode && "element" === inElt.parentNode.localName) return !0;
    }
    var IMPORT_LINK_TYPE = "import", componentParser = {
        selectors: [ "link[rel=" + IMPORT_LINK_TYPE + "]", "link[rel=stylesheet]", "script[src]", "script:not([type])", 'script[type="text/javascript"]', "style", "element" ],
        map: {
            link: "parseLink",
            script: "parseScript",
            element: "parseElement",
            style: "parseStyle"
        },
        parse: function(inDocument) {
            if (!inDocument.__parsed) {
                inDocument.__parsed = !0;
                var elts = inDocument.querySelectorAll(cp.selectors);
                forEach(elts, function(e) {
                    cp[cp.map[e.localName]](e);
                }), CustomElements.upgradeDocument(inDocument), CustomElements.observeDocument(inDocument);
            }
        },
        parseLink: function(inLinkElt) {
            isDocumentLink(inLinkElt) ? inLinkElt.content && cp.parse(inLinkElt.content) : canAddToMainDoument(inLinkElt) && document.head.appendChild(inLinkElt);
        },
        parseScript: function(inScriptElt) {
            if (canAddToMainDoument(inScriptElt)) {
                var code = inScriptElt.__resource || inScriptElt.textContent;
                code && (code += "\n//@ sourceURL=" + inScriptElt.__nodeUrl + "\n", eval.call(window, code));
            }
        },
        parseStyle: function(inStyleElt) {
            canAddToMainDoument(inStyleElt) && document.head.appendChild(inStyleElt);
        },
        parseElement: function(inElementElt) {
            new HTMLElementElement(inElementElt);
        }
    }, cp = componentParser, forEach = Array.prototype.forEach.call.bind(Array.prototype.forEach);
    CustomElements.parser = componentParser;
}(), function() {
    "function" != typeof window.CustomEvent && (window.CustomEvent = function(inType) {
        var e = document.createEvent("HTMLEvents");
        return e.initEvent(inType, !0, !0), e;
    }), setTimeout(function() {
        CustomElements.parser.parse(document), CustomElements.ready = !0, CustomElements.readyTime = new Date().getTime(), 
        window.HTMLImports && (CustomElements.elapsed = CustomElements.readyTime - HTMLImports.readyTime), 
        document.body.dispatchEvent(new CustomEvent("WebComponentsReady", {
            bubbles: !0
        }));
    }, 0);
}(), function() {
    function nop() {}
    var style = document.createElement("style");
    style.textContent = "element {display: none;} /* injected by platform.js */";
    var head = document.querySelector("head");
    if (head.insertBefore(style, head.firstChild), window.ShadowDOMPolyfill) {
        CustomElements.watchShadow = nop, CustomElements.watchAllShadows = nop;
        var fns = [ "upgradeAll", "upgradeSubtree", "observeDocument", "upgradeDocument" ], original = {};
        fns.forEach(function(fn) {
            original[fn] = CustomElements[fn];
        }), fns.forEach(function(fn) {
            CustomElements[fn] = function(inNode) {
                return original[fn](wrap(inNode));
            };
        });
    }
}(), function() {
    function typeOf(obj) {
        return typeObj.toString.call(obj).match(/\s([a-zA-Z]+)/)[1].toLowerCase();
    }
    function clone(item, type) {
        var fn = clone[type || typeOf(item)];
        return fn ? fn(item) : item;
    }
    function toArray(obj) {
        return -1 == unsliceable.indexOf(typeOf(obj)) ? Array.prototype.slice.call(obj, 0) : [ obj ];
    }
    function query(element, selector) {
        return (selector || str).length ? toArray(element.querySelectorAll(selector)) : [];
    }
    function parseMutations(element, mutations) {
        var diff = {
            added: [],
            removed: []
        };
        mutations.forEach(function(record) {
            record._mutation = !0;
            for (var z in diff) for (var type = element._records["added" == z ? "inserted" : "removed"], nodes = record[z + "Nodes"], length = nodes.length, i = 0; i < length && -1 == diff[z].indexOf(nodes[i]); i++) diff[z].push(nodes[i]), 
            type.forEach(function(fn) {
                fn(nodes[i], record);
            });
        });
    }
    function mergeOne(source, key, current) {
        var type = typeOf(current);
        return "object" == type && "object" == typeOf(source[key]) ? xtag.merge(source[key], current) : source[key] = clone(current, type), 
        source;
    }
    function mergeMixin(type, mixin, option) {
        var original = {};
        for (var o in option) original[o.split(":")[0]] = !0;
        for (var x in mixin) original[x.split(":")[0]] || (option[x] = mixin[x]);
    }
    function applyMixins(tag) {
        return tag.mixins.forEach(function(name) {
            var mixin = xtag.mixins[name];
            for (var type in mixin) switch (type) {
              case "lifecycle":
              case "methods":
                mergeMixin(type, mixin[type], tag[type]);
                break;

              case "accessors":
              case "prototype":
                for (var z in mixin[type]) mergeMixin(z, mixin[type], tag.accessors);
            }
        }), tag;
    }
    function touchFilter(custom, event) {
        if (custom.listener.touched) return custom.listener.touched = !1;
        event.type.match("touch") && (custom.listener.touched = !0);
    }
    function createFlowEvent(type) {
        var flow = "over" == type;
        return {
            base: "OverflowEvent" in win ? "overflowchanged" : type + "flow",
            condition: function(custom, event) {
                return event.flow = type, event.type == type + "flow" || 0 === event.orient && event.horizontalOverflow == flow || 1 == event.orient && event.verticalOverflow == flow || 2 == event.orient && event.horizontalOverflow == flow && event.verticalOverflow == flow;
            }
        };
    }
    function getArgs(attr, value) {
        return {
            value: attr.boolean ? "" : value,
            method: !attr.boolean || !1 !== value && null !== value ? "setAttribute" : "removeAttribute"
        };
    }
    function setAttr(attr, name, value) {
        var args = getArgs(attr, value);
        this[args.method](name, args.value);
    }
    function syncAttr(attr, name, value) {
        for (var args = getArgs(attr, value), nodes = attr.property ? [ this.xtag[attr.property] ] : attr.selector ? xtag.query(this, attr.selector) : [], index = nodes.length; index--; ) nodes[index][args.method](name, args.value);
    }
    function wrapAttr(tag, method) {
        var original = tag.prototype[method] || HTMLElement.prototype[method];
        tag.prototype[method] = {
            writable: !0,
            enumberable: !0,
            value: function(name, value, skip) {
                var attr = tag.attributes[name.toLowerCase()];
                original.call(this, name, attr && attr.boolean ? "" : value), attr && (syncAttr.call(this, attr, name, value), 
                attr.skip || this.xtag._skipAttr || attr.setter.call(this, attr.boolean ? "setAttribute" == method : this.getAttribute(name)), 
                delete this.xtag._skipAttr);
            }
        };
    }
    function updateTemplate(element, name, value) {
        element.template && element.xtag.template.updateBindingValue(element, name, value);
    }
    function attachProperties(tag, prop, z, accessor, attr, name) {
        var key = z.split(":"), type = key[0];
        "get" == type ? (key[0] = prop, tag.prototype[prop].get = xtag.applyPseudos(key.join(":"), accessor[z], tag.pseudos)) : "set" == type ? (key[0] = prop, 
        attr && (attr.setter = accessor[z]), tag.prototype[prop].set = xtag.applyPseudos(key.join(":"), attr ? function(value, skip) {
            syncAttr.call(this, attr, name, value), accessor[z].call(this, value), skip || attr.skip || (this.xtag._skipAttr = !0, 
            setAttr.call(this, attr, name, value)), updateTemplate(this, name, value);
        } : accessor[z] ? function(value) {
            accessor[z].call(this, value), updateTemplate(this, name, value);
        } : null, tag.pseudos)) : tag.prototype[prop][z] = accessor[z];
    }
    function parseAccessor(tag, prop) {
        tag.prototype[prop] = {};
        var accessor = tag.accessors[prop], attr = accessor.attribute, name = attr && attr.name ? attr.name.toLowerCase() : prop;
        attr && (tag.attributes[name] = attr);
        for (var z in accessor) attachProperties(tag, prop, z, accessor, attr, name);
        if (attr) {
            if (!tag.prototype[prop].get) {
                var method = (attr.boolean ? "has" : "get") + "Attribute";
                tag.prototype[prop].get = function() {
                    return this[method](name);
                };
            }
            tag.prototype[prop].set || (tag.prototype[prop].set = function(value) {
                this.xtag._skipAttr = !0, setAttr.call(this, attr, name, value), updateTemplate(this, name, value);
            });
        }
    }
    var win = window, doc = document, noop = function() {}, regexPseudoSplit = /([\w-]+(?:\([^\)]+\))?)/g, regexPseudoReplace = /(\w*)(?:\(([^\)]*)\))?/, regexDigits = /(\d+)/g, keypseudo = {
        action: function(pseudo, event) {
            return pseudo.value.match(regexDigits).indexOf(String(event.keyCode)) > -1 == ("keypass" == pseudo.name);
        }
    }, prefix = function() {
        var styles = win.getComputedStyle(doc.documentElement, ""), pre = (Array.prototype.slice.call(styles).join("").match(/-(moz|webkit|ms)-/) || "" === styles.OLink && [ "", "o" ])[1];
        return {
            dom: "ms" == pre ? pre.toUpperCase() : pre,
            lowercase: pre,
            css: "-" + pre + "-",
            js: pre[0].toUpperCase() + pre.substr(1)
        };
    }(), matchSelector = Element.prototype.matchesSelector || Element.prototype[prefix.lowercase + "MatchesSelector"], typeObj = {};
    clone.object = function(src) {
        var obj = {};
        for (var key in src) obj[key] = clone(src[key]);
        return obj;
    }, clone.array = function(src) {
        for (var i = src.length, array = new Array(i); i--; ) array[i] = clone(src[i]);
        return array;
    };
    var unsliceable = [ "number", "boolean", "string", "function" ], str = "", xtag = {
        tags: {},
        defaultOptions: {
            pseudos: [],
            mixins: [],
            events: {},
            methods: {},
            accessors: {
                template: {
                    attribute: {},
                    set: function(value) {
                        var last = this.getAttribute("template");
                        this.xtag.__previousTemplate__ = last, xtag.fireEvent(this, "templatechange", {
                            template: value
                        });
                    }
                }
            },
            lifecycle: {},
            attributes: {},
            prototype: {
                xtag: {
                    get: function() {
                        return this.__xtag__ ? this.__xtag__ : this.__xtag__ = {
                            data: {}
                        };
                    }
                }
            }
        },
        register: function(name, options) {
            var element, _name;
            if ("string" == typeof name) _name = name.toLowerCase(); else {
                if ("ELEMENT" != name.nodeName) return;
                _name = (element = name).getAttribute("name").toLowerCase();
            }
            var tag = xtag.tags[_name] = applyMixins(xtag.merge({}, xtag.defaultOptions, options));
            for (var z in tag.events) tag.events[z] = xtag.parseEvent(z, tag.events[z]);
            for (z in tag.lifecycle) tag.lifecycle[z.split(":")[0]] = xtag.applyPseudos(z, tag.lifecycle[z], tag.pseudos);
            for (z in tag.methods) tag.prototype[z.split(":")[0]] = {
                value: xtag.applyPseudos(z, tag.methods[z], tag.pseudos),
                enumerable: !0
            };
            for (z in tag.accessors) parseAccessor(tag, z);
            var ready = tag.lifecycle.created || tag.lifecycle.ready;
            if (tag.prototype.readyCallback = {
                enumerable: !0,
                value: function() {
                    var element = this, template = element.getAttribute("template");
                    template && xtag.fireEvent(this, "templatechange", {
                        template: template
                    }), xtag.addEvents(this, tag.events), tag.mixins.forEach(function(mixin) {
                        xtag.mixins[mixin].events && xtag.addEvents(element, xtag.mixins[mixin].events);
                    });
                    var output = ready ? ready.apply(this, toArray(arguments)) : null;
                    for (var name in tag.attributes) {
                        var attr = tag.attributes[name], hasAttr = this.hasAttribute(name), value = attr.boolean ? hasAttr : this.getAttribute(name);
                        (attr.boolean || hasAttr) && (syncAttr.call(this, attr, name, value), attr.setter && attr.setter.call(this, value, !0));
                    }
                    return tag.pseudos.forEach(function(obj) {
                        obj.onAdd.call(element, obj);
                    }), output;
                }
            }, tag.lifecycle.inserted && (tag.prototype.insertedCallback = {
                value: tag.lifecycle.inserted,
                enumerable: !0
            }), tag.lifecycle.removed && (tag.prototype.removedCallback = {
                value: tag.lifecycle.removed,
                enumerable: !0
            }), tag.lifecycle.attributeChanged && (tag.prototype.attributeChangedCallback = {
                value: tag.lifecycle.attributeChanged,
                enumerable: !0
            }), wrapAttr(tag, "setAttribute"), wrapAttr(tag, "removeAttribute"), !element) return doc.register(_name, {
                extends: options.extends,
                prototype: Object.create(Object.create((options.extends ? document.createElement(options.extends).constructor : win.HTMLElement).prototype, tag.prototype), tag.prototype)
            });
            element.register({
                prototype: Object.create(Object.prototype, tag.prototype)
            });
        },
        mixins: {},
        prefix: prefix,
        templates: {},
        captureEvents: [ "focus", "blur" ],
        customEvents: {
            overflow: createFlowEvent("over"),
            underflow: createFlowEvent("under"),
            animationstart: {
                base: [ "animationstart", "oAnimationStart", "MSAnimationStart", "webkitAnimationStart" ]
            },
            transitionend: {
                base: [ "transitionend", "oTransitionEnd", "MSTransitionEnd", "webkitTransitionEnd" ]
            },
            tap: {
                base: [ "click", "touchend" ],
                condition: touchFilter
            },
            tapstart: {
                base: [ "mousedown", "touchstart" ],
                condition: touchFilter
            },
            tapend: {
                base: [ "mouseup", "touchend" ],
                condition: touchFilter
            },
            tapenter: {
                base: [ "mouseover", "touchenter" ],
                condition: touchFilter
            },
            tapleave: {
                base: [ "mouseout", "touchleave" ],
                condition: touchFilter
            },
            tapmove: {
                base: [ "mousemove", "touchmove" ],
                condition: touchFilter
            }
        },
        pseudos: {
            keypass: keypseudo,
            keyfail: keypseudo,
            delegate: {
                action: function(pseudo, event) {
                    var target = query(this, pseudo.value).filter(function(node) {
                        return !(node != event.target && !node.contains) && node.contains(event.target);
                    })[0];
                    return !!target && (pseudo.listener = pseudo.listener.bind(target));
                }
            },
            preventable: {
                action: function(pseudo, event) {
                    return !event.defaultPrevented;
                }
            }
        },
        clone: clone,
        typeOf: typeOf,
        toArray: toArray,
        wrap: function(original, fn) {
            return function() {
                var args = toArray(arguments), returned = original.apply(this, args);
                return !1 !== returned && fn.apply(this, void 0 !== returned ? toArray(returned) : args);
            };
        },
        merge: function(source, k, v) {
            if ("string" == typeOf(k)) return mergeOne(source, k, v);
            for (var i = 1, l = arguments.length; i < l; i++) {
                var object = arguments[i];
                for (var key in object) mergeOne(source, key, object[key]);
            }
            return source;
        },
        query: query,
        skipTransition: function(element, fn, bind) {
            var prop = prefix.js + "TransitionProperty";
            element.style[prop] = element.style.transitionProperty = "none", xtag.requestFrame(function() {
                var callback;
                fn && (callback = fn.call(bind)), xtag.requestFrame(function() {
                    element.style[prop] = element.style.transitionProperty = "", callback && xtag.requestFrame(callback);
                });
            });
        },
        requestFrame: function() {
            var raf = win.requestAnimationFrame || win[prefix.lowercase + "RequestAnimationFrame"] || function(fn) {
                return win.setTimeout(fn, 20);
            };
            return function(fn) {
                return raf.call(win, fn);
            };
        }(),
        matchSelector: function(element, selector) {
            return matchSelector.call(element, selector);
        },
        set: function(element, method, value) {
            element[method] = value, window.CustomElements && CustomElements.upgradeAll(element);
        },
        innerHTML: function(el, html) {
            xtag.set(el, "innerHTML", html);
        },
        hasClass: function(element, klass) {
            return element.className.split(" ").indexOf(klass.trim()) > -1;
        },
        addClass: function(element, klass) {
            var list = element.className.trim().split(" ");
            return klass.trim().split(" ").forEach(function(name) {
                ~list.indexOf(name) || list.push(name);
            }), element.className = list.join(" ").trim(), element;
        },
        removeClass: function(element, klass) {
            var classes = klass.trim().split(" ");
            return element.className = element.className.trim().split(" ").filter(function(name) {
                return name && !~classes.indexOf(name);
            }).join(" "), element;
        },
        toggleClass: function(element, klass) {
            return xtag[xtag.hasClass(element, klass) ? "removeClass" : "addClass"].call(null, element, klass);
        },
        queryChildren: function(element, selector) {
            var id = element.id, attr = "#" + (element.id = id || "x_" + new Date().getTime()) + " > ";
            selector = attr + (selector + "").replace(",", "," + attr, "g");
            var result = element.parentNode.querySelectorAll(selector);
            return id || element.removeAttribute("id"), toArray(result);
        },
        createFragment: function(content) {
            var frag = doc.createDocumentFragment();
            if (content) {
                for (var div = frag.appendChild(doc.createElement("div")), nodes = toArray(content.nodeName ? arguments : !(div.innerHTML = content) || div.children), length = nodes.length, index = 0; index < length; ) frag.insertBefore(nodes[index++], div);
                frag.removeChild(div);
            }
            return frag;
        },
        manipulate: function(element, fn) {
            var next = element.nextSibling, parent = element.parentNode, frag = doc.createDocumentFragment(), returned = fn.call(frag.appendChild(element), frag) || element;
            next ? parent.insertBefore(returned, next) : parent.appendChild(returned);
        },
        applyPseudos: function(key, fn, element) {
            var listener = fn, pseudos = {};
            if (key.match(":")) for (var split = key.match(regexPseudoSplit), i = split.length; --i; ) split[i].replace(regexPseudoReplace, function(match, name, value) {
                if (!xtag.pseudos[name]) throw "pseudo not found: " + name + " " + split;
                var pseudo = pseudos[i] = Object.create(xtag.pseudos[name]);
                pseudo.key = key, pseudo.name = name, pseudo.value = value;
                var last = listener;
                listener = function() {
                    var args = toArray(arguments), obj = {
                        key: key,
                        name: name,
                        value: value,
                        listener: last
                    };
                    return (!pseudo.action || !1 !== pseudo.action.apply(this, [ obj ].concat(args))) && obj.listener.apply(this, args);
                }, element && pseudo.onAdd && (element.getAttribute ? pseudo.onAdd.call(element, pseudo) : element.push(pseudo));
            });
            for (var z in pseudos) pseudos[z].onCompiled && (listener = pseudos[z].onCompiled(listener, pseudos[z]));
            return listener;
        },
        removePseudos: function(element, event) {
            event._pseudos.forEach(function(obj) {
                obj.onRemove.call(element, obj);
            });
        },
        parseEvent: function(type, fn) {
            var pseudos = type.split(":"), key = pseudos.shift(), event = xtag.merge({
                base: key,
                pseudos: "",
                _pseudos: [],
                onAdd: noop,
                onRemove: noop,
                condition: noop
            }, xtag.customEvents[key] || {});
            if (event.type = key + (event.pseudos.length ? ":" + event.pseudos : "") + (pseudos.length ? ":" + pseudos.join(":") : ""), 
            fn) {
                var chained = xtag.applyPseudos(event.type, fn, event._pseudos);
                event.listener = function() {
                    var args = toArray(arguments);
                    return !1 !== event.condition.apply(this, [ event ].concat(args)) && chained.apply(this, args);
                };
            }
            return event;
        },
        addEvent: function(element, type, fn) {
            var event = "function" == typeof fn ? xtag.parseEvent(type, fn) : fn;
            return event.listener.event = event, event._pseudos.forEach(function(obj) {
                obj.onAdd.call(element, obj);
            }), event.onAdd.call(element, event, event.listener), toArray(event.base).forEach(function(name) {
                element.addEventListener(name, event.listener, xtag.captureEvents.indexOf(name) > -1);
            }), event.listener;
        },
        addEvents: function(element, events) {
            var listeners = {};
            for (var z in events) listeners[z] = xtag.addEvent(element, z, events[z]);
            return listeners;
        },
        removeEvent: function(element, type, fn) {
            var event = fn.event;
            event.onRemove.call(element, event, fn), xtag.removePseudos(element, event), toArray(event.base).forEach(function(name) {
                element.removeEventListener(name, fn);
            });
        },
        removeEvents: function(element, listeners) {
            for (var z in listeners) xtag.removeEvent(element, z, listeners[z]);
        },
        fireEvent: function(element, type, data, options) {
            options = options || {};
            var event = doc.createEvent("Event");
            event.initEvent(type, !("bubbles" in options) || options.bubbles, !("cancelable" in options) || options.cancelable);
            for (var z in data) event[z] = data[z];
            element.dispatchEvent(event);
        },
        addObserver: function(element, type, fn) {
            element._records || (element._records = {
                inserted: [],
                removed: []
            }, mutation ? (element._observer = new mutation(function(mutations) {
                parseMutations(element, mutations);
            }), element._observer.observe(element, {
                subtree: !0,
                childList: !0,
                attributes: !1,
                characterData: !1
            })) : [ "Inserted", "Removed" ].forEach(function(type) {
                element.addEventListener("DOMNode" + type, function(event) {
                    event._mutation = !0, element._records[type.toLowerCase()].forEach(function(fn) {
                        fn(event.target, event);
                    });
                }, !1);
            })), -1 == element._records[type].indexOf(fn) && element._records[type].push(fn);
        },
        removeObserver: function(element, type, fn) {
            var obj = element._records;
            obj && fn ? obj[type].splice(obj[type].indexOf(fn), 1) : obj[type] = [];
        }
    };
    "function" == typeof define && define.amd ? define(xtag) : win.xtag = xtag, doc.addEventListener("WebComponentsReady", function() {
        xtag.fireEvent(doc.body, "DOMComponentsLoaded");
    });
}(), function() {
    "use strict";
    function swap(obj, p1, p2) {
        !function(_) {
            obj[p1] = obj[p2], obj[p2] = _;
        }(obj[p1]);
    }
    var diffcount, Diff = function(options) {
        var diff = this;
        Object.keys(options).forEach(function(option) {
            diff[option] = options[option];
        });
    };
    Diff.prototype = {
        toString: function() {
            return JSON.stringify(this);
        }
    };
    var SubsetMapping = function(a, b) {
        this.oldValue = a, this.newValue = b;
    };
    SubsetMapping.prototype = {
        contains: function(subset) {
            return subset.length < this.length && (subset.newValue >= this.newValue && subset.newValue < this.newValue + this.length);
        },
        toString: function() {
            return this.length + " element subset, first mapping: old " + this.oldValue + " \u2192 new " + this.newValue;
        }
    };
    var elementDescriptors = function(el) {
        var output = [];
        return "#text" !== el.nodeName && "#comment" !== el.nodeName && (output.push(el.nodeName), 
        el.attributes && (el.attributes.class && output.push(el.nodeName + "." + el.attributes.class.replace(/ /g, ".")), 
        el.attributes.id && output.push(el.nodeName + "#" + el.attributes.id))), output;
    }, findUniqueDescriptors = function(li) {
        var uniqueDescriptors = {}, duplicateDescriptors = {};
        return li.forEach(function(node) {
            elementDescriptors(node).forEach(function(descriptor) {
                var inUnique = descriptor in uniqueDescriptors, inDupes = descriptor in duplicateDescriptors;
                inUnique || inDupes ? inUnique && (delete uniqueDescriptors[descriptor], duplicateDescriptors[descriptor] = !0) : uniqueDescriptors[descriptor] = !0;
            });
        }), uniqueDescriptors;
    }, uniqueInBoth = function(l1, l2) {
        var l1Unique = findUniqueDescriptors(l1), l2Unique = findUniqueDescriptors(l2), inBoth = {};
        return Object.keys(l1Unique).forEach(function(key) {
            l2Unique[key] && (inBoth[key] = !0);
        }), inBoth;
    }, removeDone = function(tree) {
        return delete tree.outerDone, delete tree.innerDone, delete tree.valueDone, !tree.childNodes || tree.childNodes.every(removeDone);
    }, isEqual = function(e1, e2) {
        var e1Attributes, e2Attributes;
        if (![ "nodeName", "value", "checked", "selected", "data" ].every(function(element) {
            return e1[element] === e2[element];
        })) return !1;
        if (Boolean(e1.attributes) !== Boolean(e2.attributes)) return !1;
        if (Boolean(e1.childNodes) !== Boolean(e2.childNodes)) return !1;
        if (e1.attributes) {
            if (e1Attributes = Object.keys(e1.attributes), e2Attributes = Object.keys(e2.attributes), 
            e1Attributes.length !== e2Attributes.length) return !1;
            if (!e1Attributes.every(function(attribute) {
                if (e1.attributes[attribute] !== e2.attributes[attribute]) return !1;
            })) return !1;
        }
        if (e1.childNodes) {
            if (e1.childNodes.length !== e2.childNodes.length) return !1;
            if (!e1.childNodes.every(function(childNode, index) {
                return isEqual(childNode, e2.childNodes[index]);
            })) return !1;
        }
        return !0;
    }, roughlyEqual = function(e1, e2, uniqueDescriptors, sameSiblings, preventRecursion) {
        var childUniqueDescriptors, nodeList1, nodeList2;
        if (!e1 || !e2) return !1;
        if (e1.nodeName !== e2.nodeName) return !1;
        if ("#text" === e1.nodeName) return !!preventRecursion || e1.data === e2.data;
        if (e1.nodeName in uniqueDescriptors) return !0;
        if (e1.attributes && e2.attributes) {
            if (e1.attributes.id && e1.attributes.id === e2.attributes.id && e1.nodeName + "#" + e1.attributes.id in uniqueDescriptors) return !0;
            if (e1.attributes.class && e1.attributes.class === e2.attributes.class && e1.nodeName + "." + e1.attributes.class.replace(/ /g, ".") in uniqueDescriptors) return !0;
        }
        return !!sameSiblings || (nodeList1 = e1.childNodes ? e1.childNodes.slice().reverse() : [], 
        nodeList2 = e2.childNodes ? e2.childNodes.slice().reverse() : [], nodeList1.length === nodeList2.length && (preventRecursion ? nodeList1.every(function(element, index) {
            return element.nodeName === nodeList2[index].nodeName;
        }) : (childUniqueDescriptors = uniqueInBoth(nodeList1, nodeList2), nodeList1.every(function(element, index) {
            return roughlyEqual(element, nodeList2[index], childUniqueDescriptors, !0, !0);
        }))));
    }, cloneObj = function(obj) {
        return JSON.parse(JSON.stringify(obj));
    }, findCommonSubsets = function(c1, c2, marked1, marked2) {
        var origin, ret, lcsSize = 0, index = [], matches = Array.apply(null, new Array(c1.length + 1)).map(function() {
            return [];
        }), uniqueDescriptors = uniqueInBoth(c1, c2), subsetsSame = c1.length === c2.length;
        return subsetsSame && c1.some(function(element, i) {
            var c1Desc = elementDescriptors(element), c2Desc = elementDescriptors(c2[i]);
            return c1Desc.length !== c2Desc.length ? (subsetsSame = !1, !0) : (c1Desc.some(function(description, i) {
                if (description !== c2Desc[i]) return subsetsSame = !1, !0;
            }), !subsetsSame || void 0);
        }), c1.forEach(function(c1Element, c1Index) {
            c2.forEach(function(c2Element, c2Index) {
                marked1[c1Index] || marked2[c2Index] || !roughlyEqual(c1Element, c2Element, uniqueDescriptors, subsetsSame) ? matches[c1Index + 1][c2Index + 1] = 0 : (matches[c1Index + 1][c2Index + 1] = matches[c1Index][c2Index] ? matches[c1Index][c2Index] + 1 : 1, 
                matches[c1Index + 1][c2Index + 1] >= lcsSize && (lcsSize = matches[c1Index + 1][c2Index + 1], 
                index = [ c1Index + 1, c2Index + 1 ]));
            });
        }), 0 !== lcsSize && (origin = [ index[0] - lcsSize, index[1] - lcsSize ], ret = new SubsetMapping(origin[0], origin[1]), 
        ret.length = lcsSize, ret);
    }, makeArray = function(n, v) {
        return Array.apply(null, new Array(n)).map(function() {
            return v;
        });
    }, getGapInformation = function(t1, t2, stable) {
        var gaps1 = t1.childNodes ? makeArray(t1.childNodes.length, !0) : [], gaps2 = t2.childNodes ? makeArray(t2.childNodes.length, !0) : [], group = 0;
        return stable.forEach(function(subset) {
            var i, endOld = subset.oldValue + subset.length, endNew = subset.newValue + subset.length;
            for (i = subset.oldValue; i < endOld; i += 1) gaps1[i] = group;
            for (i = subset.newValue; i < endNew; i += 1) gaps2[i] = group;
            group += 1;
        }), {
            gaps1: gaps1,
            gaps2: gaps2
        };
    }, markSubTrees = function(oldTree, newTree) {
        for (var oldChildren = oldTree.childNodes ? oldTree.childNodes : [], newChildren = newTree.childNodes ? newTree.childNodes : [], marked1 = makeArray(oldChildren.length, !1), marked2 = makeArray(newChildren.length, !1), subsets = [], subset = !0; subset; ) (subset = findCommonSubsets(oldChildren, newChildren, marked1, marked2)) && (subsets.push(subset), 
        Array.apply(null, new Array(subset.length)).map(function() {
            return arguments[1];
        }).forEach(function(i) {
            marked1[subset.oldValue + i] = !0, marked2[subset.newValue + i] = !0;
        }));
        return subsets;
    }, DiffTracker = function() {
        this.list = [];
    };
    DiffTracker.prototype = {
        list: !1,
        add: function(diffs) {
            var list = this.list;
            diffs.forEach(function(diff) {
                list.push(diff);
            });
        },
        forEach: function(fn) {
            this.list.forEach(fn);
        }
    };
    var diffDOM = function(options) {
        var i, defaults = {
            debug: !1,
            diffcap: 10,
            maxDepth: !1,
            valueDiffing: !0,
            textDiff: function() {
                arguments[0].data = arguments[3];
            },
            preVirtualDiffApply: function() {},
            postVirtualDiffApply: function() {},
            preDiffApply: function() {},
            postDiffApply: function() {},
            filterOuterDiff: null
        };
        void 0 === options && (options = {});
        for (i in defaults) void 0 === options[i] ? this[i] = defaults[i] : this[i] = options[i];
    };
    diffDOM.Diff = Diff, diffDOM.prototype = {
        diff: function(t1Node, t2Node) {
            var t1 = this.nodeToObj(t1Node), t2 = this.nodeToObj(t2Node);
            return diffcount = 0, this.debug && (this.t1Orig = this.nodeToObj(t1Node), this.t2Orig = this.nodeToObj(t2Node)), 
            this.tracker = new DiffTracker(), this.findDiffs(t1, t2);
        },
        findDiffs: function(t1, t2) {
            var diffs;
            do {
                if (this.debug && (diffcount += 1) > this.diffcap) throw window.diffError = [ this.t1Orig, this.t2Orig ], 
                new Error("surpassed diffcap:" + JSON.stringify(this.t1Orig) + " -> " + JSON.stringify(this.t2Orig));
                0 === (diffs = this.findNextDiff(t1, t2, [])).length && (isEqual(t1, t2) || (removeDone(t1), 
                diffs = this.findNextDiff(t1, t2, []))), diffs.length > 0 && (this.tracker.add(diffs), 
                this.applyVirtual(t1, diffs));
            } while (diffs.length > 0);
            return this.tracker.list;
        },
        findNextDiff: function(t1, t2, route) {
            var diffs, fdiffs;
            if (this.maxDepth && route.length > this.maxDepth) return [];
            if (!t1.outerDone) {
                if (diffs = this.findOuterDiff(t1, t2, route), this.filterOuterDiff && (fdiffs = this.filterOuterDiff(t1, t2, diffs)) && (diffs = fdiffs), 
                diffs.length > 0) return t1.outerDone = !0, diffs;
                t1.outerDone = !0;
            }
            if (!t1.innerDone) {
                if ((diffs = this.findInnerDiff(t1, t2, route)).length > 0) return diffs;
                t1.innerDone = !0;
            }
            if (this.valueDiffing && !t1.valueDone) {
                if ((diffs = this.findValueDiff(t1, t2, route)).length > 0) return t1.valueDone = !0, 
                diffs;
                t1.valueDone = !0;
            }
            return [];
        },
        findOuterDiff: function(t1, t2, route) {
            var attr1, attr2, diffs = [];
            return t1.nodeName !== t2.nodeName ? [ new Diff({
                action: "replaceElement",
                oldValue: cloneObj(t1),
                newValue: cloneObj(t2),
                route: route
            }) ] : t1.data !== t2.data ? "#text" === t1.nodeName ? [ new Diff({
                action: "modifyTextElement",
                route: route,
                oldValue: t1.data,
                newValue: t2.data
            }) ] : [ new Diff({
                action: "modifyComment",
                route: route,
                oldValue: t1.data,
                newValue: t2.data
            }) ] : (attr1 = t1.attributes ? Object.keys(t1.attributes).sort() : [], attr2 = t2.attributes ? Object.keys(t2.attributes).sort() : [], 
            attr1.forEach(function(attr) {
                var pos = attr2.indexOf(attr);
                -1 === pos ? diffs.push(new Diff({
                    action: "removeAttribute",
                    route: route,
                    name: attr,
                    value: t1.attributes[attr]
                })) : (attr2.splice(pos, 1), t1.attributes[attr] !== t2.attributes[attr] && diffs.push(new Diff({
                    action: "modifyAttribute",
                    route: route,
                    name: attr,
                    oldValue: t1.attributes[attr],
                    newValue: t2.attributes[attr]
                })));
            }), attr2.forEach(function(attr) {
                diffs.push(new Diff({
                    action: "addAttribute",
                    route: route,
                    name: attr,
                    value: t2.attributes[attr]
                }));
            }), diffs);
        },
        nodeToObj: function(node) {
            var objNode = {}, dobj = this;
            return objNode.nodeName = node.nodeName, "#text" === objNode.nodeName || "#comment" === objNode.nodeName ? objNode.data = node.data : (node.attributes && node.attributes.length > 0 && (objNode.attributes = {}, 
            Array.prototype.slice.call(node.attributes).forEach(function(attribute) {
                objNode.attributes[attribute.name] = attribute.value;
            })), node.childNodes && node.childNodes.length > 0 && (objNode.childNodes = [], 
            Array.prototype.slice.call(node.childNodes).forEach(function(childNode) {
                objNode.childNodes.push(dobj.nodeToObj(childNode));
            })), this.valueDiffing && (void 0 !== node.value && (objNode.value = node.value), 
            void 0 !== node.checked && (objNode.checked = node.checked), void 0 !== node.selected && (objNode.selected = node.selected))), 
            objNode;
        },
        objToNode: function(objNode, insideSvg) {
            var node, dobj = this;
            return "#text" === objNode.nodeName ? node = document.createTextNode(objNode.data) : "#comment" === objNode.nodeName ? node = document.createComment(objNode.data) : ("svg" === objNode.nodeName || insideSvg ? (node = document.createElementNS("http://www.w3.org/2000/svg", objNode.nodeName), 
            insideSvg = !0) : node = document.createElement(objNode.nodeName), objNode.attributes && Object.keys(objNode.attributes).forEach(function(attribute) {
                node.setAttribute(attribute, objNode.attributes[attribute]);
            }), objNode.childNodes && objNode.childNodes.forEach(function(childNode) {
                node.appendChild(dobj.objToNode(childNode, insideSvg));
            }), this.valueDiffing && (objNode.value && (node.value = objNode.value), objNode.checked && (node.checked = objNode.checked), 
            objNode.selected && (node.selected = objNode.selected))), node;
        },
        findInnerDiff: function(t1, t2, route) {
            var childNodesLengthDifference, last, e1, e2, i, subtrees = t1.childNodes && t2.childNodes ? markSubTrees(t1, t2) : [], t1ChildNodes = t1.childNodes ? t1.childNodes : [], t2ChildNodes = t2.childNodes ? t2.childNodes : [], diffs = [], index = 0;
            if (subtrees.length > 0 && (diffs = this.attemptGroupRelocation(t1, t2, subtrees, route)).length > 0) return diffs;
            for (last = Math.max(t1ChildNodes.length, t2ChildNodes.length), t1ChildNodes.length !== t2ChildNodes.length && (childNodesLengthDifference = !0), 
            i = 0; i < last; i += 1) e1 = t1ChildNodes[i], e2 = t2ChildNodes[i], childNodesLengthDifference && (e1 && !e2 ? "#text" === e1.nodeName ? (diffs.push(new Diff({
                action: "removeTextElement",
                route: route.concat(index),
                value: e1.data
            })), index -= 1) : (diffs.push(new Diff({
                action: "removeElement",
                route: route.concat(index),
                element: cloneObj(e1)
            })), index -= 1) : e2 && !e1 && ("#text" === e2.nodeName ? diffs.push(new Diff({
                action: "addTextElement",
                route: route.concat(index),
                value: e2.data
            })) : diffs.push(new Diff({
                action: "addElement",
                route: route.concat(index),
                element: cloneObj(e2)
            })))), e1 && e2 && (diffs = diffs.concat(this.findNextDiff(e1, e2, route.concat(index)))), 
            index += 1;
            return t1.innerDone = !0, diffs;
        },
        attemptGroupRelocation: function(t1, t2, subtrees, route) {
            var destinationDifferent, toGroup, group, node, similarNode, testI, index1, index2, j, gapInformation = getGapInformation(t1, t2, subtrees), gaps1 = gapInformation.gaps1, gaps2 = gapInformation.gaps2, shortest = Math.min(gaps1.length, gaps2.length), diffs = [];
            for (index2 = 0, index1 = 0; index2 < shortest; index1 += 1, index2 += 1) if (!0 === gaps1[index2]) if ("#text" === (node = t1.childNodes[index1]).nodeName) {
                if ("#text" === t2.childNodes[index2].nodeName && node.data !== t2.childNodes[index2].data) {
                    for (testI = index1; t1.childNodes.length > testI + 1 && "#text" === t1.childNodes[testI + 1].nodeName; ) if (testI += 1, 
                    t2.childNodes[index2].data === t1.childNodes[testI].data) {
                        similarNode = !0;
                        break;
                    }
                    if (!similarNode) return diffs.push(new Diff({
                        action: "modifyTextElement",
                        route: route.concat(index2),
                        oldValue: node.data,
                        newValue: t2.childNodes[index2].data
                    })), diffs;
                }
                diffs.push(new Diff({
                    action: "removeTextElement",
                    route: route.concat(index2),
                    value: node.data
                })), gaps1.splice(index2, 1), shortest = Math.min(gaps1.length, gaps2.length), index2 -= 1;
            } else diffs.push(new Diff({
                action: "removeElement",
                route: route.concat(index2),
                element: cloneObj(node)
            })), gaps1.splice(index2, 1), shortest = Math.min(gaps1.length, gaps2.length), index2 -= 1; else if (!0 === gaps2[index2]) "#text" === (node = t2.childNodes[index2]).nodeName ? (diffs.push(new Diff({
                action: "addTextElement",
                route: route.concat(index2),
                value: node.data
            })), gaps1.splice(index2, 0, !0), shortest = Math.min(gaps1.length, gaps2.length), 
            index1 -= 1) : (diffs.push(new Diff({
                action: "addElement",
                route: route.concat(index2),
                element: cloneObj(node)
            })), gaps1.splice(index2, 0, !0), shortest = Math.min(gaps1.length, gaps2.length), 
            index1 -= 1); else if (gaps1[index2] !== gaps2[index2]) {
                if (diffs.length > 0) return diffs;
                if (group = subtrees[gaps1[index2]], (toGroup = Math.min(group.newValue, t1.childNodes.length - group.length)) !== group.oldValue) {
                    for (destinationDifferent = !1, j = 0; j < group.length; j += 1) roughlyEqual(t1.childNodes[toGroup + j], t1.childNodes[group.oldValue + j], [], !1, !0) || (destinationDifferent = !0);
                    if (destinationDifferent) return [ new Diff({
                        action: "relocateGroup",
                        groupLength: group.length,
                        from: group.oldValue,
                        to: toGroup,
                        route: route
                    }) ];
                }
            }
            return diffs;
        },
        findValueDiff: function(t1, t2, route) {
            var diffs = [];
            return t1.selected !== t2.selected && diffs.push(new Diff({
                action: "modifySelected",
                oldValue: t1.selected,
                newValue: t2.selected,
                route: route
            })), (t1.value || t2.value) && t1.value !== t2.value && "OPTION" !== t1.nodeName && diffs.push(new Diff({
                action: "modifyValue",
                oldValue: t1.value,
                newValue: t2.value,
                route: route
            })), t1.checked !== t2.checked && diffs.push(new Diff({
                action: "modifyChecked",
                oldValue: t1.checked,
                newValue: t2.checked,
                route: route
            })), diffs;
        },
        applyVirtual: function(tree, diffs) {
            var dobj = this;
            return 0 === diffs.length || (diffs.forEach(function(diff) {
                dobj.applyVirtualDiff(tree, diff);
            }), !0);
        },
        getFromVirtualRoute: function(tree, route) {
            var parentNode, nodeIndex, node = tree;
            for (route = route.slice(); route.length > 0; ) {
                if (!node.childNodes) return !1;
                nodeIndex = route.splice(0, 1)[0], parentNode = node, node = node.childNodes[nodeIndex];
            }
            return {
                node: node,
                parentNode: parentNode,
                nodeIndex: nodeIndex
            };
        },
        applyVirtualDiff: function(tree, diff) {
            var newNode, route, c, routeInfo = this.getFromVirtualRoute(tree, diff.route), node = routeInfo.node, parentNode = routeInfo.parentNode, nodeIndex = routeInfo.nodeIndex, info = {
                diff: diff,
                node: node
            };
            if (this.preVirtualDiffApply(info)) return !0;
            switch (diff.action) {
              case "addAttribute":
                node.attributes || (node.attributes = {}), node.attributes[diff.name] = diff.value, 
                "checked" === diff.name ? node.checked = !0 : "selected" === diff.name ? node.selected = !0 : "INPUT" === node.nodeName && "value" === diff.name && (node.value = diff.value);
                break;

              case "modifyAttribute":
                node.attributes[diff.name] = diff.newValue, "INPUT" === node.nodeName && "value" === diff.name && (node.value = diff.value);
                break;

              case "removeAttribute":
                delete node.attributes[diff.name], 0 === Object.keys(node.attributes).length && delete node.attributes, 
                "checked" === diff.name ? node.checked = !1 : "selected" === diff.name ? delete node.selected : "INPUT" === node.nodeName && "value" === diff.name && delete node.value;
                break;

              case "modifyTextElement":
                node.data = diff.newValue, "TEXTAREA" === parentNode.nodeName && (parentNode.value = diff.newValue);
                break;

              case "modifyValue":
                node.value = diff.newValue;
                break;

              case "modifyComment":
                node.data = diff.newValue;
                break;

              case "modifyChecked":
                node.checked = diff.newValue;
                break;

              case "modifySelected":
                node.selected = diff.newValue;
                break;

              case "replaceElement":
                (newNode = cloneObj(diff.newValue)).outerDone = !0, newNode.innerDone = !0, newNode.valueDone = !0, 
                parentNode.childNodes[nodeIndex] = newNode;
                break;

              case "relocateGroup":
                node.childNodes.splice(diff.from, diff.groupLength).reverse().forEach(function(movedNode) {
                    node.childNodes.splice(diff.to, 0, movedNode);
                });
                break;

              case "removeElement":
                parentNode.childNodes.splice(nodeIndex, 1);
                break;

              case "addElement":
                c = (route = diff.route.slice()).splice(route.length - 1, 1)[0], node = this.getFromVirtualRoute(tree, route).node, 
                (newNode = cloneObj(diff.element)).outerDone = !0, newNode.innerDone = !0, newNode.valueDone = !0, 
                node.childNodes || (node.childNodes = []), c >= node.childNodes.length ? node.childNodes.push(newNode) : node.childNodes.splice(c, 0, newNode);
                break;

              case "removeTextElement":
                parentNode.childNodes.splice(nodeIndex, 1), "TEXTAREA" === parentNode.nodeName && delete parentNode.value;
                break;

              case "addTextElement":
                c = (route = diff.route.slice()).splice(route.length - 1, 1)[0], (newNode = {}).nodeName = "#text", 
                newNode.data = diff.value, (node = this.getFromVirtualRoute(tree, route).node).childNodes || (node.childNodes = []), 
                c >= node.childNodes.length ? node.childNodes.push(newNode) : node.childNodes.splice(c, 0, newNode), 
                "TEXTAREA" === node.nodeName && (node.value = diff.newValue);
                break;

              default:
                console.log("unknown action");
            }
            info.newNode = newNode, this.postVirtualDiffApply(info);
        },
        apply: function(tree, diffs) {
            var dobj = this;
            return 0 === diffs.length || (diffs.forEach(function(diff) {
                if (!dobj.applyDiff(tree, diff)) return !1;
            }), !0);
        },
        getFromRoute: function(tree, route) {
            route = route.slice();
            for (var c, node = tree; route.length > 0; ) {
                if (!node.childNodes) return !1;
                c = route.splice(0, 1)[0], node = node.childNodes[c];
            }
            return node;
        },
        applyDiff: function(tree, diff) {
            var newNode, reference, route, c, node = this.getFromRoute(tree, diff.route), info = {
                diff: diff,
                node: node
            };
            if (this.preDiffApply(info)) return !0;
            switch (diff.action) {
              case "addAttribute":
                if (!node || !node.setAttribute) return !1;
                node.setAttribute(diff.name, diff.value);
                break;

              case "modifyAttribute":
                if (!node || !node.setAttribute) return !1;
                node.setAttribute(diff.name, diff.newValue);
                break;

              case "removeAttribute":
                if (!node || !node.removeAttribute) return !1;
                node.removeAttribute(diff.name);
                break;

              case "modifyTextElement":
                if (!node || 3 !== node.nodeType) return !1;
                this.textDiff(node, node.data, diff.oldValue, diff.newValue);
                break;

              case "modifyValue":
                if (!node || void 0 === node.value) return !1;
                node.value = diff.newValue;
                break;

              case "modifyComment":
                if (!node || void 0 === node.data) return !1;
                this.textDiff(node, node.data, diff.oldValue, diff.newValue);
                break;

              case "modifyChecked":
                if (!node || void 0 === node.checked) return !1;
                node.checked = diff.newValue;
                break;

              case "modifySelected":
                if (!node || void 0 === node.selected) return !1;
                node.selected = diff.newValue;
                break;

              case "replaceElement":
                node.parentNode.replaceChild(this.objToNode(diff.newValue, "http://www.w3.org/2000/svg" === node.namespaceURI), node);
                break;

              case "relocateGroup":
                Array.apply(null, new Array(diff.groupLength)).map(function() {
                    return node.removeChild(node.childNodes[diff.from]);
                }).forEach(function(childNode, index) {
                    0 === index && (reference = node.childNodes[diff.to]), node.insertBefore(childNode, reference);
                });
                break;

              case "removeElement":
                node.parentNode.removeChild(node);
                break;

              case "addElement":
                c = (route = diff.route.slice()).splice(route.length - 1, 1)[0], (node = this.getFromRoute(tree, route)).insertBefore(this.objToNode(diff.element, "http://www.w3.org/2000/svg" === node.namespaceURI), node.childNodes[c]);
                break;

              case "removeTextElement":
                if (!node || 3 !== node.nodeType) return !1;
                node.parentNode.removeChild(node);
                break;

              case "addTextElement":
                if (route = diff.route.slice(), c = route.splice(route.length - 1, 1)[0], newNode = document.createTextNode(diff.value), 
                !(node = this.getFromRoute(tree, route)) || !node.childNodes) return !1;
                node.insertBefore(newNode, node.childNodes[c]);
                break;

              default:
                console.log("unknown action");
            }
            return info.newNode = newNode, this.postDiffApply(info), !0;
        },
        undo: function(tree, diffs) {
            var dobj = this;
            (diffs = diffs.slice()).length || (diffs = [ diffs ]), diffs.reverse(), diffs.forEach(function(diff) {
                dobj.undoDiff(tree, diff);
            });
        },
        undoDiff: function(tree, diff) {
            switch (diff.action) {
              case "addAttribute":
                diff.action = "removeAttribute", this.applyDiff(tree, diff);
                break;

              case "modifyAttribute":
                swap(diff, "oldValue", "newValue"), this.applyDiff(tree, diff);
                break;

              case "removeAttribute":
                diff.action = "addAttribute", this.applyDiff(tree, diff);
                break;

              case "modifyTextElement":
              case "modifyValue":
              case "modifyComment":
              case "modifyChecked":
              case "modifySelected":
              case "replaceElement":
                swap(diff, "oldValue", "newValue"), this.applyDiff(tree, diff);
                break;

              case "relocateGroup":
                swap(diff, "from", "to"), this.applyDiff(tree, diff);
                break;

              case "removeElement":
                diff.action = "addElement", this.applyDiff(tree, diff);
                break;

              case "addElement":
                diff.action = "removeElement", this.applyDiff(tree, diff);
                break;

              case "removeTextElement":
                diff.action = "addTextElement", this.applyDiff(tree, diff);
                break;

              case "addTextElement":
                diff.action = "removeTextElement", this.applyDiff(tree, diff);
                break;

              default:
                console.log("unknown action");
            }
        }
    }, "undefined" != typeof exports ? ("undefined" != typeof module && module.exports && (exports = module.exports = diffDOM), 
    exports.diffDOM = diffDOM) : this.diffDOM = diffDOM;
}.call(this), function() {
    function inputToRGB(color) {
        var rgb = {
            r: 0,
            g: 0,
            b: 0
        }, a = 1, ok = !1, format = !1;
        return "string" == typeof color && (color = stringInputToObject(color)), "object" == typeof color && (color.hasOwnProperty("r") && color.hasOwnProperty("g") && color.hasOwnProperty("b") ? (rgb = rgbToRgb(color.r, color.g, color.b), 
        ok = !0, format = "%" === String(color.r).substr(-1) ? "prgb" : "rgb") : color.hasOwnProperty("h") && color.hasOwnProperty("s") && color.hasOwnProperty("v") ? (color.s = convertToPercentage(color.s), 
        color.v = convertToPercentage(color.v), rgb = hsvToRgb(color.h, color.s, color.v), 
        ok = !0, format = "hsv") : color.hasOwnProperty("h") && color.hasOwnProperty("s") && color.hasOwnProperty("l") && (color.s = convertToPercentage(color.s), 
        color.l = convertToPercentage(color.l), rgb = hslToRgb(color.h, color.s, color.l), 
        ok = !0, format = "hsl"), color.hasOwnProperty("a") && (a = color.a)), a = boundAlpha(a), 
        {
            ok: ok,
            format: color.format || format,
            r: mathMin(255, mathMax(rgb.r, 0)),
            g: mathMin(255, mathMax(rgb.g, 0)),
            b: mathMin(255, mathMax(rgb.b, 0)),
            a: a
        };
    }
    function rgbToRgb(r, g, b) {
        return {
            r: 255 * bound01(r, 255),
            g: 255 * bound01(g, 255),
            b: 255 * bound01(b, 255)
        };
    }
    function rgbToHsl(r, g, b) {
        r = bound01(r, 255), g = bound01(g, 255), b = bound01(b, 255);
        var h, s, max = mathMax(r, g, b), min = mathMin(r, g, b), l = (max + min) / 2;
        if (max == min) h = s = 0; else {
            var d = max - min;
            switch (s = l > .5 ? d / (2 - max - min) : d / (max + min), max) {
              case r:
                h = (g - b) / d + (g < b ? 6 : 0);
                break;

              case g:
                h = (b - r) / d + 2;
                break;

              case b:
                h = (r - g) / d + 4;
            }
            h /= 6;
        }
        return {
            h: h,
            s: s,
            l: l
        };
    }
    function hslToRgb(h, s, l) {
        function hue2rgb(p, q, t) {
            return t < 0 && (t += 1), t > 1 && (t -= 1), t < 1 / 6 ? p + 6 * (q - p) * t : t < .5 ? q : t < 2 / 3 ? p + (q - p) * (2 / 3 - t) * 6 : p;
        }
        var r, g, b;
        if (h = bound01(h, 360), s = bound01(s, 100), l = bound01(l, 100), 0 === s) r = g = b = l; else {
            var q = l < .5 ? l * (1 + s) : l + s - l * s, p = 2 * l - q;
            r = hue2rgb(p, q, h + 1 / 3), g = hue2rgb(p, q, h), b = hue2rgb(p, q, h - 1 / 3);
        }
        return {
            r: 255 * r,
            g: 255 * g,
            b: 255 * b
        };
    }
    function rgbToHsv(r, g, b) {
        r = bound01(r, 255), g = bound01(g, 255), b = bound01(b, 255);
        var h, s, max = mathMax(r, g, b), min = mathMin(r, g, b), v = max, d = max - min;
        if (s = 0 === max ? 0 : d / max, max == min) h = 0; else {
            switch (max) {
              case r:
                h = (g - b) / d + (g < b ? 6 : 0);
                break;

              case g:
                h = (b - r) / d + 2;
                break;

              case b:
                h = (r - g) / d + 4;
            }
            h /= 6;
        }
        return {
            h: h,
            s: s,
            v: v
        };
    }
    function hsvToRgb(h, s, v) {
        h = 6 * bound01(h, 360), s = bound01(s, 100), v = bound01(v, 100);
        var i = math.floor(h), f = h - i, p = v * (1 - s), q = v * (1 - f * s), t = v * (1 - (1 - f) * s), mod = i % 6;
        return {
            r: 255 * [ v, q, p, p, t, v ][mod],
            g: 255 * [ t, v, v, q, p, p ][mod],
            b: 255 * [ p, p, t, v, v, q ][mod]
        };
    }
    function rgbToHex(r, g, b, allow3Char) {
        var hex = [ pad2(mathRound(r).toString(16)), pad2(mathRound(g).toString(16)), pad2(mathRound(b).toString(16)) ];
        return allow3Char && hex[0].charAt(0) == hex[0].charAt(1) && hex[1].charAt(0) == hex[1].charAt(1) && hex[2].charAt(0) == hex[2].charAt(1) ? hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0) : hex.join("");
    }
    function rgbaToHex(r, g, b, a) {
        return [ pad2(convertDecimalToHex(a)), pad2(mathRound(r).toString(16)), pad2(mathRound(g).toString(16)), pad2(mathRound(b).toString(16)) ].join("");
    }
    function desaturate(color, amount) {
        amount = 0 === amount ? 0 : amount || 10;
        var hsl = tinycolor(color).toHsl();
        return hsl.s -= amount / 100, hsl.s = clamp01(hsl.s), tinycolor(hsl);
    }
    function saturate(color, amount) {
        amount = 0 === amount ? 0 : amount || 10;
        var hsl = tinycolor(color).toHsl();
        return hsl.s += amount / 100, hsl.s = clamp01(hsl.s), tinycolor(hsl);
    }
    function greyscale(color) {
        return tinycolor(color).desaturate(100);
    }
    function lighten(color, amount) {
        amount = 0 === amount ? 0 : amount || 10;
        var hsl = tinycolor(color).toHsl();
        return hsl.l += amount / 100, hsl.l = clamp01(hsl.l), tinycolor(hsl);
    }
    function brighten(color, amount) {
        amount = 0 === amount ? 0 : amount || 10;
        var rgb = tinycolor(color).toRgb();
        return rgb.r = mathMax(0, mathMin(255, rgb.r - mathRound(-amount / 100 * 255))), 
        rgb.g = mathMax(0, mathMin(255, rgb.g - mathRound(-amount / 100 * 255))), rgb.b = mathMax(0, mathMin(255, rgb.b - mathRound(-amount / 100 * 255))), 
        tinycolor(rgb);
    }
    function darken(color, amount) {
        amount = 0 === amount ? 0 : amount || 10;
        var hsl = tinycolor(color).toHsl();
        return hsl.l -= amount / 100, hsl.l = clamp01(hsl.l), tinycolor(hsl);
    }
    function spin(color, amount) {
        var hsl = tinycolor(color).toHsl(), hue = (mathRound(hsl.h) + amount) % 360;
        return hsl.h = hue < 0 ? 360 + hue : hue, tinycolor(hsl);
    }
    function complement(color) {
        var hsl = tinycolor(color).toHsl();
        return hsl.h = (hsl.h + 180) % 360, tinycolor(hsl);
    }
    function triad(color) {
        var hsl = tinycolor(color).toHsl(), h = hsl.h;
        return [ tinycolor(color), tinycolor({
            h: (h + 120) % 360,
            s: hsl.s,
            l: hsl.l
        }), tinycolor({
            h: (h + 240) % 360,
            s: hsl.s,
            l: hsl.l
        }) ];
    }
    function tetrad(color) {
        var hsl = tinycolor(color).toHsl(), h = hsl.h;
        return [ tinycolor(color), tinycolor({
            h: (h + 90) % 360,
            s: hsl.s,
            l: hsl.l
        }), tinycolor({
            h: (h + 180) % 360,
            s: hsl.s,
            l: hsl.l
        }), tinycolor({
            h: (h + 270) % 360,
            s: hsl.s,
            l: hsl.l
        }) ];
    }
    function splitcomplement(color) {
        var hsl = tinycolor(color).toHsl(), h = hsl.h;
        return [ tinycolor(color), tinycolor({
            h: (h + 72) % 360,
            s: hsl.s,
            l: hsl.l
        }), tinycolor({
            h: (h + 216) % 360,
            s: hsl.s,
            l: hsl.l
        }) ];
    }
    function analogous(color, results, slices) {
        results = results || 6, slices = slices || 30;
        var hsl = tinycolor(color).toHsl(), part = 360 / slices, ret = [ tinycolor(color) ];
        for (hsl.h = (hsl.h - (part * results >> 1) + 720) % 360; --results; ) hsl.h = (hsl.h + part) % 360, 
        ret.push(tinycolor(hsl));
        return ret;
    }
    function monochromatic(color, results) {
        results = results || 6;
        for (var hsv = tinycolor(color).toHsv(), h = hsv.h, s = hsv.s, v = hsv.v, ret = [], modification = 1 / results; results--; ) ret.push(tinycolor({
            h: h,
            s: s,
            v: v
        })), v = (v + modification) % 1;
        return ret;
    }
    function boundAlpha(a) {
        return a = parseFloat(a), (isNaN(a) || a < 0 || a > 1) && (a = 1), a;
    }
    function bound01(n, max) {
        isOnePointZero(n) && (n = "100%");
        var processPercent = isPercentage(n);
        return n = mathMin(max, mathMax(0, parseFloat(n))), processPercent && (n = parseInt(n * max, 10) / 100), 
        math.abs(n - max) < 1e-6 ? 1 : n % max / parseFloat(max);
    }
    function clamp01(val) {
        return mathMin(1, mathMax(0, val));
    }
    function parseIntFromHex(val) {
        return parseInt(val, 16);
    }
    function isOnePointZero(n) {
        return "string" == typeof n && -1 != n.indexOf(".") && 1 === parseFloat(n);
    }
    function isPercentage(n) {
        return "string" == typeof n && -1 != n.indexOf("%");
    }
    function pad2(c) {
        return 1 == c.length ? "0" + c : "" + c;
    }
    function convertToPercentage(n) {
        return n <= 1 && (n = 100 * n + "%"), n;
    }
    function convertDecimalToHex(d) {
        return Math.round(255 * parseFloat(d)).toString(16);
    }
    function convertHexToDecimal(h) {
        return parseIntFromHex(h) / 255;
    }
    function stringInputToObject(color) {
        color = color.replace(trimLeft, "").replace(trimRight, "").toLowerCase();
        var named = !1;
        if (names[color]) color = names[color], named = !0; else if ("transparent" == color) return {
            r: 0,
            g: 0,
            b: 0,
            a: 0,
            format: "name"
        };
        var match;
        return (match = matchers.rgb.exec(color)) ? {
            r: match[1],
            g: match[2],
            b: match[3]
        } : (match = matchers.rgba.exec(color)) ? {
            r: match[1],
            g: match[2],
            b: match[3],
            a: match[4]
        } : (match = matchers.hsl.exec(color)) ? {
            h: match[1],
            s: match[2],
            l: match[3]
        } : (match = matchers.hsla.exec(color)) ? {
            h: match[1],
            s: match[2],
            l: match[3],
            a: match[4]
        } : (match = matchers.hsv.exec(color)) ? {
            h: match[1],
            s: match[2],
            v: match[3]
        } : (match = matchers.hex8.exec(color)) ? {
            a: convertHexToDecimal(match[1]),
            r: parseIntFromHex(match[2]),
            g: parseIntFromHex(match[3]),
            b: parseIntFromHex(match[4]),
            format: named ? "name" : "hex8"
        } : (match = matchers.hex6.exec(color)) ? {
            r: parseIntFromHex(match[1]),
            g: parseIntFromHex(match[2]),
            b: parseIntFromHex(match[3]),
            format: named ? "name" : "hex"
        } : !!(match = matchers.hex3.exec(color)) && {
            r: parseIntFromHex(match[1] + "" + match[1]),
            g: parseIntFromHex(match[2] + "" + match[2]),
            b: parseIntFromHex(match[3] + "" + match[3]),
            format: named ? "name" : "hex"
        };
    }
    var trimLeft = /^[\s,#]+/, trimRight = /\s+$/, tinyCounter = 0, math = Math, mathRound = math.round, mathMin = math.min, mathMax = math.max, mathRandom = math.random, tinycolor = function tinycolor(color, opts) {
        if (color = color || "", opts = opts || {}, color instanceof tinycolor) return color;
        if (!(this instanceof tinycolor)) return new tinycolor(color, opts);
        var rgb = inputToRGB(color);
        this._originalInput = color, this._r = rgb.r, this._g = rgb.g, this._b = rgb.b, 
        this._a = rgb.a, this._roundA = mathRound(100 * this._a) / 100, this._format = opts.format || rgb.format, 
        this._gradientType = opts.gradientType, this._r < 1 && (this._r = mathRound(this._r)), 
        this._g < 1 && (this._g = mathRound(this._g)), this._b < 1 && (this._b = mathRound(this._b)), 
        this._ok = rgb.ok, this._tc_id = tinyCounter++;
    };
    tinycolor.prototype = {
        isDark: function() {
            return this.getBrightness() < 128;
        },
        isLight: function() {
            return !this.isDark();
        },
        isValid: function() {
            return this._ok;
        },
        getOriginalInput: function() {
            return this._originalInput;
        },
        getFormat: function() {
            return this._format;
        },
        getAlpha: function() {
            return this._a;
        },
        getBrightness: function() {
            var rgb = this.toRgb();
            return (299 * rgb.r + 587 * rgb.g + 114 * rgb.b) / 1e3;
        },
        setAlpha: function(value) {
            return this._a = boundAlpha(value), this._roundA = mathRound(100 * this._a) / 100, 
            this;
        },
        toHsv: function() {
            var hsv = rgbToHsv(this._r, this._g, this._b);
            return {
                h: 360 * hsv.h,
                s: hsv.s,
                v: hsv.v,
                a: this._a
            };
        },
        toHsvString: function() {
            var hsv = rgbToHsv(this._r, this._g, this._b), h = mathRound(360 * hsv.h), s = mathRound(100 * hsv.s), v = mathRound(100 * hsv.v);
            return 1 == this._a ? "hsv(" + h + ", " + s + "%, " + v + "%)" : "hsva(" + h + ", " + s + "%, " + v + "%, " + this._roundA + ")";
        },
        toHsl: function() {
            var hsl = rgbToHsl(this._r, this._g, this._b);
            return {
                h: 360 * hsl.h,
                s: hsl.s,
                l: hsl.l,
                a: this._a
            };
        },
        toHslString: function() {
            var hsl = rgbToHsl(this._r, this._g, this._b), h = mathRound(360 * hsl.h), s = mathRound(100 * hsl.s), l = mathRound(100 * hsl.l);
            return 1 == this._a ? "hsl(" + h + ", " + s + "%, " + l + "%)" : "hsla(" + h + ", " + s + "%, " + l + "%, " + this._roundA + ")";
        },
        toHex: function(allow3Char) {
            return rgbToHex(this._r, this._g, this._b, allow3Char);
        },
        toHexString: function(allow3Char) {
            return "#" + this.toHex(allow3Char);
        },
        toHex8: function() {
            return rgbaToHex(this._r, this._g, this._b, this._a);
        },
        toHex8String: function() {
            return "#" + this.toHex8();
        },
        toRgb: function() {
            return {
                r: mathRound(this._r),
                g: mathRound(this._g),
                b: mathRound(this._b),
                a: this._a
            };
        },
        toRgbString: function() {
            return 1 == this._a ? "rgb(" + mathRound(this._r) + ", " + mathRound(this._g) + ", " + mathRound(this._b) + ")" : "rgba(" + mathRound(this._r) + ", " + mathRound(this._g) + ", " + mathRound(this._b) + ", " + this._roundA + ")";
        },
        toPercentageRgb: function() {
            return {
                r: mathRound(100 * bound01(this._r, 255)) + "%",
                g: mathRound(100 * bound01(this._g, 255)) + "%",
                b: mathRound(100 * bound01(this._b, 255)) + "%",
                a: this._a
            };
        },
        toPercentageRgbString: function() {
            return 1 == this._a ? "rgb(" + mathRound(100 * bound01(this._r, 255)) + "%, " + mathRound(100 * bound01(this._g, 255)) + "%, " + mathRound(100 * bound01(this._b, 255)) + "%)" : "rgba(" + mathRound(100 * bound01(this._r, 255)) + "%, " + mathRound(100 * bound01(this._g, 255)) + "%, " + mathRound(100 * bound01(this._b, 255)) + "%, " + this._roundA + ")";
        },
        toName: function() {
            return 0 === this._a ? "transparent" : !(this._a < 1) && (hexNames[rgbToHex(this._r, this._g, this._b, !0)] || !1);
        },
        toFilter: function(secondColor) {
            var hex8String = "#" + rgbaToHex(this._r, this._g, this._b, this._a), secondHex8String = hex8String, gradientType = this._gradientType ? "GradientType = 1, " : "";
            return secondColor && (secondHex8String = tinycolor(secondColor).toHex8String()), 
            "progid:DXImageTransform.Microsoft.gradient(" + gradientType + "startColorstr=" + hex8String + ",endColorstr=" + secondHex8String + ")";
        },
        toString: function(format) {
            var formatSet = !!format;
            format = format || this._format;
            var formattedString = !1, hasAlpha = this._a < 1 && this._a >= 0;
            return formatSet || !hasAlpha || "hex" !== format && "hex6" !== format && "hex3" !== format && "name" !== format ? ("rgb" === format && (formattedString = this.toRgbString()), 
            "prgb" === format && (formattedString = this.toPercentageRgbString()), "hex" !== format && "hex6" !== format || (formattedString = this.toHexString()), 
            "hex3" === format && (formattedString = this.toHexString(!0)), "hex8" === format && (formattedString = this.toHex8String()), 
            "name" === format && (formattedString = this.toName()), "hsl" === format && (formattedString = this.toHslString()), 
            "hsv" === format && (formattedString = this.toHsvString()), formattedString || this.toHexString()) : "name" === format && 0 === this._a ? this.toName() : this.toRgbString();
        },
        _applyModification: function(fn, args) {
            var color = fn.apply(null, [ this ].concat([].slice.call(args)));
            return this._r = color._r, this._g = color._g, this._b = color._b, this.setAlpha(color._a), 
            this;
        },
        lighten: function() {
            return this._applyModification(lighten, arguments);
        },
        brighten: function() {
            return this._applyModification(brighten, arguments);
        },
        darken: function() {
            return this._applyModification(darken, arguments);
        },
        desaturate: function() {
            return this._applyModification(desaturate, arguments);
        },
        saturate: function() {
            return this._applyModification(saturate, arguments);
        },
        greyscale: function() {
            return this._applyModification(greyscale, arguments);
        },
        spin: function() {
            return this._applyModification(spin, arguments);
        },
        _applyCombination: function(fn, args) {
            return fn.apply(null, [ this ].concat([].slice.call(args)));
        },
        analogous: function() {
            return this._applyCombination(analogous, arguments);
        },
        complement: function() {
            return this._applyCombination(complement, arguments);
        },
        monochromatic: function() {
            return this._applyCombination(monochromatic, arguments);
        },
        splitcomplement: function() {
            return this._applyCombination(splitcomplement, arguments);
        },
        triad: function() {
            return this._applyCombination(triad, arguments);
        },
        tetrad: function() {
            return this._applyCombination(tetrad, arguments);
        }
    }, tinycolor.fromRatio = function(color, opts) {
        if ("object" == typeof color) {
            var newColor = {};
            for (var i in color) color.hasOwnProperty(i) && (newColor[i] = "a" === i ? color[i] : convertToPercentage(color[i]));
            color = newColor;
        }
        return tinycolor(color, opts);
    }, tinycolor.equals = function(color1, color2) {
        return !(!color1 || !color2) && tinycolor(color1).toRgbString() == tinycolor(color2).toRgbString();
    }, tinycolor.random = function() {
        return tinycolor.fromRatio({
            r: mathRandom(),
            g: mathRandom(),
            b: mathRandom()
        });
    }, tinycolor.mix = function(color1, color2, amount) {
        amount = 0 === amount ? 0 : amount || 50;
        var w1, rgb1 = tinycolor(color1).toRgb(), rgb2 = tinycolor(color2).toRgb(), p = amount / 100, w = 2 * p - 1, a = rgb2.a - rgb1.a, w2 = 1 - (w1 = ((w1 = w * a == -1 ? w : (w + a) / (1 + w * a)) + 1) / 2), rgba = {
            r: rgb2.r * w1 + rgb1.r * w2,
            g: rgb2.g * w1 + rgb1.g * w2,
            b: rgb2.b * w1 + rgb1.b * w2,
            a: rgb2.a * p + rgb1.a * (1 - p)
        };
        return tinycolor(rgba);
    }, tinycolor.readability = function(color1, color2) {
        var c1 = tinycolor(color1), c2 = tinycolor(color2), rgb1 = c1.toRgb(), rgb2 = c2.toRgb(), brightnessA = c1.getBrightness(), brightnessB = c2.getBrightness(), colorDiff = Math.max(rgb1.r, rgb2.r) - Math.min(rgb1.r, rgb2.r) + Math.max(rgb1.g, rgb2.g) - Math.min(rgb1.g, rgb2.g) + Math.max(rgb1.b, rgb2.b) - Math.min(rgb1.b, rgb2.b);
        return {
            brightness: Math.abs(brightnessA - brightnessB),
            color: colorDiff
        };
    }, tinycolor.isReadable = function(color1, color2) {
        var readability = tinycolor.readability(color1, color2);
        return readability.brightness > 125 && readability.color > 500;
    }, tinycolor.mostReadable = function(baseColor, colorList) {
        for (var bestColor = null, bestScore = 0, bestIsReadable = !1, i = 0; i < colorList.length; i++) {
            var readability = tinycolor.readability(baseColor, colorList[i]), readable = readability.brightness > 125 && readability.color > 500, score = readability.brightness / 125 * 3 + readability.color / 500;
            (readable && !bestIsReadable || readable && bestIsReadable && score > bestScore || !readable && !bestIsReadable && score > bestScore) && (bestIsReadable = readable, 
            bestScore = score, bestColor = tinycolor(colorList[i]));
        }
        return bestColor;
    };
    var names = tinycolor.names = {
        aliceblue: "f0f8ff",
        antiquewhite: "faebd7",
        aqua: "0ff",
        aquamarine: "7fffd4",
        azure: "f0ffff",
        beige: "f5f5dc",
        bisque: "ffe4c4",
        black: "000",
        blanchedalmond: "ffebcd",
        blue: "00f",
        blueviolet: "8a2be2",
        brown: "a52a2a",
        burlywood: "deb887",
        burntsienna: "ea7e5d",
        cadetblue: "5f9ea0",
        chartreuse: "7fff00",
        chocolate: "d2691e",
        coral: "ff7f50",
        cornflowerblue: "6495ed",
        cornsilk: "fff8dc",
        crimson: "dc143c",
        cyan: "0ff",
        darkblue: "00008b",
        darkcyan: "008b8b",
        darkgoldenrod: "b8860b",
        darkgray: "a9a9a9",
        darkgreen: "006400",
        darkgrey: "a9a9a9",
        darkkhaki: "bdb76b",
        darkmagenta: "8b008b",
        darkolivegreen: "556b2f",
        darkorange: "ff8c00",
        darkorchid: "9932cc",
        darkred: "8b0000",
        darksalmon: "e9967a",
        darkseagreen: "8fbc8f",
        darkslateblue: "483d8b",
        darkslategray: "2f4f4f",
        darkslategrey: "2f4f4f",
        darkturquoise: "00ced1",
        darkviolet: "9400d3",
        deeppink: "ff1493",
        deepskyblue: "00bfff",
        dimgray: "696969",
        dimgrey: "696969",
        dodgerblue: "1e90ff",
        firebrick: "b22222",
        floralwhite: "fffaf0",
        forestgreen: "228b22",
        fuchsia: "f0f",
        gainsboro: "dcdcdc",
        ghostwhite: "f8f8ff",
        gold: "ffd700",
        goldenrod: "daa520",
        gray: "808080",
        green: "008000",
        greenyellow: "adff2f",
        grey: "808080",
        honeydew: "f0fff0",
        hotpink: "ff69b4",
        indianred: "cd5c5c",
        indigo: "4b0082",
        ivory: "fffff0",
        khaki: "f0e68c",
        lavender: "e6e6fa",
        lavenderblush: "fff0f5",
        lawngreen: "7cfc00",
        lemonchiffon: "fffacd",
        lightblue: "add8e6",
        lightcoral: "f08080",
        lightcyan: "e0ffff",
        lightgoldenrodyellow: "fafad2",
        lightgray: "d3d3d3",
        lightgreen: "90ee90",
        lightgrey: "d3d3d3",
        lightpink: "ffb6c1",
        lightsalmon: "ffa07a",
        lightseagreen: "20b2aa",
        lightskyblue: "87cefa",
        lightslategray: "789",
        lightslategrey: "789",
        lightsteelblue: "b0c4de",
        lightyellow: "ffffe0",
        lime: "0f0",
        limegreen: "32cd32",
        linen: "faf0e6",
        magenta: "f0f",
        maroon: "800000",
        mediumaquamarine: "66cdaa",
        mediumblue: "0000cd",
        mediumorchid: "ba55d3",
        mediumpurple: "9370db",
        mediumseagreen: "3cb371",
        mediumslateblue: "7b68ee",
        mediumspringgreen: "00fa9a",
        mediumturquoise: "48d1cc",
        mediumvioletred: "c71585",
        midnightblue: "191970",
        mintcream: "f5fffa",
        mistyrose: "ffe4e1",
        moccasin: "ffe4b5",
        navajowhite: "ffdead",
        navy: "000080",
        oldlace: "fdf5e6",
        olive: "808000",
        olivedrab: "6b8e23",
        orange: "ffa500",
        orangered: "ff4500",
        orchid: "da70d6",
        palegoldenrod: "eee8aa",
        palegreen: "98fb98",
        paleturquoise: "afeeee",
        palevioletred: "db7093",
        papayawhip: "ffefd5",
        peachpuff: "ffdab9",
        peru: "cd853f",
        pink: "ffc0cb",
        plum: "dda0dd",
        powderblue: "b0e0e6",
        purple: "800080",
        rebeccapurple: "663399",
        red: "f00",
        rosybrown: "bc8f8f",
        royalblue: "4169e1",
        saddlebrown: "8b4513",
        salmon: "fa8072",
        sandybrown: "f4a460",
        seagreen: "2e8b57",
        seashell: "fff5ee",
        sienna: "a0522d",
        silver: "c0c0c0",
        skyblue: "87ceeb",
        slateblue: "6a5acd",
        slategray: "708090",
        slategrey: "708090",
        snow: "fffafa",
        springgreen: "00ff7f",
        steelblue: "4682b4",
        tan: "d2b48c",
        teal: "008080",
        thistle: "d8bfd8",
        tomato: "ff6347",
        turquoise: "40e0d0",
        violet: "ee82ee",
        wheat: "f5deb3",
        white: "fff",
        whitesmoke: "f5f5f5",
        yellow: "ff0",
        yellowgreen: "9acd32"
    }, hexNames = tinycolor.hexNames = function(o) {
        var flipped = {};
        for (var i in o) o.hasOwnProperty(i) && (flipped[o[i]] = i);
        return flipped;
    }(names), matchers = function() {
        var CSS_UNIT = "(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)", PERMISSIVE_MATCH3 = "[\\s|\\(]+(" + CSS_UNIT + ")[,|\\s]+(" + CSS_UNIT + ")[,|\\s]+(" + CSS_UNIT + ")\\s*\\)?", PERMISSIVE_MATCH4 = "[\\s|\\(]+(" + CSS_UNIT + ")[,|\\s]+(" + CSS_UNIT + ")[,|\\s]+(" + CSS_UNIT + ")[,|\\s]+(" + CSS_UNIT + ")\\s*\\)?";
        return {
            rgb: new RegExp("rgb" + PERMISSIVE_MATCH3),
            rgba: new RegExp("rgba" + PERMISSIVE_MATCH4),
            hsl: new RegExp("hsl" + PERMISSIVE_MATCH3),
            hsla: new RegExp("hsla" + PERMISSIVE_MATCH4),
            hsv: new RegExp("hsv" + PERMISSIVE_MATCH3),
            hex3: /^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,
            hex6: /^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,
            hex8: /^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/
        };
    }();
    window.tinycolor = tinycolor;
}(), function(jQuery) {
    function keyHandler(handleObj) {
        if ("string" == typeof handleObj.data && (handleObj.data = {
            keys: handleObj.data
        }), handleObj.data && handleObj.data.keys && "string" == typeof handleObj.data.keys) {
            var origHandler = handleObj.handler, keys = handleObj.data.keys.toLowerCase().split(" "), textAcceptingInputTypes = [ "text", "password", "number", "email", "url", "range", "date", "month", "week", "time", "datetime", "datetime-local", "search", "color", "tel" ];
            handleObj.handler = function(event) {
                if (this === event.target || !(/textarea|select/i.test(event.target.nodeName) || jQuery.inArray(event.target.type, textAcceptingInputTypes) > -1)) {
                    var special = jQuery.hotkeys.specialKeys[event.keyCode], character = String.fromCharCode(event.which).toLowerCase(), modif = "", possible = {};
                    event.altKey && "alt" !== special && (modif += "alt+"), event.ctrlKey && "ctrl" !== special && (modif += "ctrl+"), 
                    event.metaKey && !event.ctrlKey && "meta" !== special && (modif += "meta+"), event.shiftKey && "shift" !== special && (modif += "shift+"), 
                    special && (possible[modif + special] = !0), character && (possible[modif + character] = !0, 
                    possible[modif + jQuery.hotkeys.shiftNums[character]] = !0, "shift+" === modif && (possible[jQuery.hotkeys.shiftNums[character]] = !0));
                    for (var i = 0, l = keys.length; i < l; i++) if (possible[keys[i]]) return origHandler.apply(this, arguments);
                }
            };
        }
    }
    jQuery.hotkeys = {
        version: "0.8",
        specialKeys: {
            8: "backspace",
            9: "tab",
            10: "return",
            13: "return",
            16: "shift",
            17: "ctrl",
            18: "alt",
            19: "pause",
            20: "capslock",
            27: "esc",
            32: "space",
            33: "pageup",
            34: "pagedown",
            35: "end",
            36: "home",
            37: "left",
            38: "up",
            39: "right",
            40: "down",
            45: "insert",
            46: "del",
            96: "0",
            97: "1",
            98: "2",
            99: "3",
            100: "4",
            101: "5",
            102: "6",
            103: "7",
            104: "8",
            105: "9",
            106: "*",
            107: "+",
            109: "-",
            110: ".",
            111: "/",
            112: "f1",
            113: "f2",
            114: "f3",
            115: "f4",
            116: "f5",
            117: "f6",
            118: "f7",
            119: "f8",
            120: "f9",
            121: "f10",
            122: "f11",
            123: "f12",
            144: "numlock",
            145: "scroll",
            186: ";",
            191: "/",
            220: "\\",
            222: "'",
            224: "meta"
        },
        shiftNums: {
            "`": "~",
            "1": "!",
            "2": "@",
            "3": "#",
            "4": "$",
            "5": "%",
            "6": "^",
            "7": "&",
            "8": "*",
            "9": "(",
            "0": ")",
            "-": "_",
            "=": "+",
            ";": ": ",
            "'": '"',
            ",": "<",
            ".": ">",
            "/": "?",
            "\\": "|"
        }
    }, jQuery.each([ "keydown", "keyup", "keypress" ], function() {
        jQuery.event.special[this] = {
            add: keyHandler
        };
    });
}(this.jQuery), function(e) {
    "function" == typeof define && define.amd ? define([ "jquery" ], e) : e(jQuery);
}(function(e) {
    function t(t, s) {
        var n, a, o, r = t.nodeName.toLowerCase();
        return "area" === r ? (n = t.parentNode, a = n.name, !(!t.href || !a || "map" !== n.nodeName.toLowerCase()) && (!!(o = e("img[usemap='#" + a + "']")[0]) && i(o))) : (/input|select|textarea|button|object/.test(r) ? !t.disabled : "a" === r ? t.href || s : s) && i(t);
    }
    function i(t) {
        return e.expr.filters.visible(t) && !e(t).parents().addBack().filter(function() {
            return "hidden" === e.css(this, "visibility");
        }).length;
    }
    e.ui = e.ui || {}, e.extend(e.ui, {
        version: "1.11.2",
        keyCode: {
            BACKSPACE: 8,
            COMMA: 188,
            DELETE: 46,
            DOWN: 40,
            END: 35,
            ENTER: 13,
            ESCAPE: 27,
            HOME: 36,
            LEFT: 37,
            PAGE_DOWN: 34,
            PAGE_UP: 33,
            PERIOD: 190,
            RIGHT: 39,
            SPACE: 32,
            TAB: 9,
            UP: 38
        }
    }), e.fn.extend({
        scrollParent: function(t) {
            var i = this.css("position"), s = "absolute" === i, n = t ? /(auto|scroll|hidden)/ : /(auto|scroll)/, a = this.parents().filter(function() {
                var t = e(this);
                return (!s || "static" !== t.css("position")) && n.test(t.css("overflow") + t.css("overflow-y") + t.css("overflow-x"));
            }).eq(0);
            return "fixed" !== i && a.length ? a : e(this[0].ownerDocument || document);
        },
        uniqueId: function() {
            var e = 0;
            return function() {
                return this.each(function() {
                    this.id || (this.id = "ui-id-" + ++e);
                });
            };
        }(),
        removeUniqueId: function() {
            return this.each(function() {
                /^ui-id-\d+$/.test(this.id) && e(this).removeAttr("id");
            });
        }
    }), e.extend(e.expr[":"], {
        data: e.expr.createPseudo ? e.expr.createPseudo(function(t) {
            return function(i) {
                return !!e.data(i, t);
            };
        }) : function(t, i, s) {
            return !!e.data(t, s[3]);
        },
        focusable: function(i) {
            return t(i, !isNaN(e.attr(i, "tabindex")));
        },
        tabbable: function(i) {
            var s = e.attr(i, "tabindex"), n = isNaN(s);
            return (n || s >= 0) && t(i, !n);
        }
    }), e("<a>").outerWidth(1).jquery || e.each([ "Width", "Height" ], function(t, i) {
        function s(t, i, s, a) {
            return e.each(n, function() {
                i -= parseFloat(e.css(t, "padding" + this)) || 0, s && (i -= parseFloat(e.css(t, "border" + this + "Width")) || 0), 
                a && (i -= parseFloat(e.css(t, "margin" + this)) || 0);
            }), i;
        }
        var n = "Width" === i ? [ "Left", "Right" ] : [ "Top", "Bottom" ], a = i.toLowerCase(), o = {
            innerWidth: e.fn.innerWidth,
            innerHeight: e.fn.innerHeight,
            outerWidth: e.fn.outerWidth,
            outerHeight: e.fn.outerHeight
        };
        e.fn["inner" + i] = function(t) {
            return void 0 === t ? o["inner" + i].call(this) : this.each(function() {
                e(this).css(a, s(this, t) + "px");
            });
        }, e.fn["outer" + i] = function(t, n) {
            return "number" != typeof t ? o["outer" + i].call(this, t) : this.each(function() {
                e(this).css(a, s(this, t, !0, n) + "px");
            });
        };
    }), e.fn.addBack || (e.fn.addBack = function(e) {
        return this.add(null == e ? this.prevObject : this.prevObject.filter(e));
    }), e("<a>").data("a-b", "a").removeData("a-b").data("a-b") && (e.fn.removeData = function(t) {
        return function(i) {
            return arguments.length ? t.call(this, e.camelCase(i)) : t.call(this);
        };
    }(e.fn.removeData)), e.ui.ie = !!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()), 
    e.fn.extend({
        focus: function(t) {
            return function(i, s) {
                return "number" == typeof i ? this.each(function() {
                    var t = this;
                    setTimeout(function() {
                        e(t).focus(), s && s.call(t);
                    }, i);
                }) : t.apply(this, arguments);
            };
        }(e.fn.focus),
        disableSelection: function() {
            var e = "onselectstart" in document.createElement("div") ? "selectstart" : "mousedown";
            return function() {
                return this.bind(e + ".ui-disableSelection", function(e) {
                    e.preventDefault();
                });
            };
        }(),
        enableSelection: function() {
            return this.unbind(".ui-disableSelection");
        },
        zIndex: function(t) {
            if (void 0 !== t) return this.css("zIndex", t);
            if (this.length) for (var i, s, n = e(this[0]); n.length && n[0] !== document; ) {
                if (("absolute" === (i = n.css("position")) || "relative" === i || "fixed" === i) && (s = parseInt(n.css("zIndex"), 10), 
                !isNaN(s) && 0 !== s)) return s;
                n = n.parent();
            }
            return 0;
        }
    }), e.ui.plugin = {
        add: function(t, i, s) {
            var n, a = e.ui[t].prototype;
            for (n in s) a.plugins[n] = a.plugins[n] || [], a.plugins[n].push([ i, s[n] ]);
        },
        call: function(e, t, i, s) {
            var n, a = e.plugins[t];
            if (a && (s || e.element[0].parentNode && 11 !== e.element[0].parentNode.nodeType)) for (n = 0; a.length > n; n++) e.options[a[n][0]] && a[n][1].apply(e.element, i);
        }
    };
    var s = 0, n = Array.prototype.slice;
    e.cleanData = function(t) {
        return function(i) {
            var s, n, a;
            for (a = 0; null != (n = i[a]); a++) try {
                (s = e._data(n, "events")) && s.remove && e(n).triggerHandler("remove");
            } catch (o) {}
            t(i);
        };
    }(e.cleanData), e.widget = function(t, i, s) {
        var n, a, o, r, h = {}, l = t.split(".")[0];
        return t = t.split(".")[1], n = l + "-" + t, s || (s = i, i = e.Widget), e.expr[":"][n.toLowerCase()] = function(t) {
            return !!e.data(t, n);
        }, e[l] = e[l] || {}, a = e[l][t], o = e[l][t] = function(e, t) {
            return this._createWidget ? void (arguments.length && this._createWidget(e, t)) : new o(e, t);
        }, e.extend(o, a, {
            version: s.version,
            _proto: e.extend({}, s),
            _childConstructors: []
        }), r = new i(), r.options = e.widget.extend({}, r.options), e.each(s, function(t, s) {
            return e.isFunction(s) ? void (h[t] = function() {
                var e = function() {
                    return i.prototype[t].apply(this, arguments);
                }, n = function(e) {
                    return i.prototype[t].apply(this, e);
                };
                return function() {
                    var t, i = this._super, a = this._superApply;
                    return this._super = e, this._superApply = n, t = s.apply(this, arguments), this._super = i, 
                    this._superApply = a, t;
                };
            }()) : void (h[t] = s);
        }), o.prototype = e.widget.extend(r, {
            widgetEventPrefix: a ? r.widgetEventPrefix || t : t
        }, h, {
            constructor: o,
            namespace: l,
            widgetName: t,
            widgetFullName: n
        }), a ? (e.each(a._childConstructors, function(t, i) {
            var s = i.prototype;
            e.widget(s.namespace + "." + s.widgetName, o, i._proto);
        }), delete a._childConstructors) : i._childConstructors.push(o), e.widget.bridge(t, o), 
        o;
    }, e.widget.extend = function(t) {
        for (var i, s, a = n.call(arguments, 1), o = 0, r = a.length; r > o; o++) for (i in a[o]) s = a[o][i], 
        a[o].hasOwnProperty(i) && void 0 !== s && (t[i] = e.isPlainObject(s) ? e.isPlainObject(t[i]) ? e.widget.extend({}, t[i], s) : e.widget.extend({}, s) : s);
        return t;
    }, e.widget.bridge = function(t, i) {
        var s = i.prototype.widgetFullName || t;
        e.fn[t] = function(a) {
            var o = "string" == typeof a, r = n.call(arguments, 1), h = this;
            return a = !o && r.length ? e.widget.extend.apply(null, [ a ].concat(r)) : a, o ? this.each(function() {
                var i, n = e.data(this, s);
                return "instance" === a ? (h = n, !1) : n ? e.isFunction(n[a]) && "_" !== a.charAt(0) ? (i = n[a].apply(n, r)) !== n && void 0 !== i ? (h = i && i.jquery ? h.pushStack(i.get()) : i, 
                !1) : void 0 : e.error("no such method '" + a + "' for " + t + " widget instance") : e.error("cannot call methods on " + t + " prior to initialization; attempted to call method '" + a + "'");
            }) : this.each(function() {
                var t = e.data(this, s);
                t ? (t.option(a || {}), t._init && t._init()) : e.data(this, s, new i(a, this));
            }), h;
        };
    }, e.Widget = function() {}, e.Widget._childConstructors = [], e.Widget.prototype = {
        widgetName: "widget",
        widgetEventPrefix: "",
        defaultElement: "<div>",
        options: {
            disabled: !1,
            create: null
        },
        _createWidget: function(t, i) {
            i = e(i || this.defaultElement || this)[0], this.element = e(i), this.uuid = s++, 
            this.eventNamespace = "." + this.widgetName + this.uuid, this.bindings = e(), this.hoverable = e(), 
            this.focusable = e(), i !== this && (e.data(i, this.widgetFullName, this), this._on(!0, this.element, {
                remove: function(e) {
                    e.target === i && this.destroy();
                }
            }), this.document = e(i.style ? i.ownerDocument : i.document || i), this.window = e(this.document[0].defaultView || this.document[0].parentWindow)), 
            this.options = e.widget.extend({}, this.options, this._getCreateOptions(), t), this._create(), 
            this._trigger("create", null, this._getCreateEventData()), this._init();
        },
        _getCreateOptions: e.noop,
        _getCreateEventData: e.noop,
        _create: e.noop,
        _init: e.noop,
        destroy: function() {
            this._destroy(), this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)), 
            this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName + "-disabled ui-state-disabled"), 
            this.bindings.unbind(this.eventNamespace), this.hoverable.removeClass("ui-state-hover"), 
            this.focusable.removeClass("ui-state-focus");
        },
        _destroy: e.noop,
        widget: function() {
            return this.element;
        },
        option: function(t, i) {
            var s, n, a, o = t;
            if (0 === arguments.length) return e.widget.extend({}, this.options);
            if ("string" == typeof t) if (o = {}, s = t.split("."), t = s.shift(), s.length) {
                for (n = o[t] = e.widget.extend({}, this.options[t]), a = 0; s.length - 1 > a; a++) n[s[a]] = n[s[a]] || {}, 
                n = n[s[a]];
                if (t = s.pop(), 1 === arguments.length) return void 0 === n[t] ? null : n[t];
                n[t] = i;
            } else {
                if (1 === arguments.length) return void 0 === this.options[t] ? null : this.options[t];
                o[t] = i;
            }
            return this._setOptions(o), this;
        },
        _setOptions: function(e) {
            var t;
            for (t in e) this._setOption(t, e[t]);
            return this;
        },
        _setOption: function(e, t) {
            return this.options[e] = t, "disabled" === e && (this.widget().toggleClass(this.widgetFullName + "-disabled", !!t), 
            t && (this.hoverable.removeClass("ui-state-hover"), this.focusable.removeClass("ui-state-focus"))), 
            this;
        },
        enable: function() {
            return this._setOptions({
                disabled: !1
            });
        },
        disable: function() {
            return this._setOptions({
                disabled: !0
            });
        },
        _on: function(t, i, s) {
            var n, a = this;
            "boolean" != typeof t && (s = i, i = t, t = !1), s ? (i = n = e(i), this.bindings = this.bindings.add(i)) : (s = i, 
            i = this.element, n = this.widget()), e.each(s, function(s, o) {
                function r() {
                    return t || !0 !== a.options.disabled && !e(this).hasClass("ui-state-disabled") ? ("string" == typeof o ? a[o] : o).apply(a, arguments) : void 0;
                }
                "string" != typeof o && (r.guid = o.guid = o.guid || r.guid || e.guid++);
                var h = s.match(/^([\w:-]*)\s*(.*)$/), l = h[1] + a.eventNamespace, u = h[2];
                u ? n.delegate(u, l, r) : i.bind(l, r);
            });
        },
        _off: function(t, i) {
            i = (i || "").split(" ").join(this.eventNamespace + " ") + this.eventNamespace, 
            t.unbind(i).undelegate(i), this.bindings = e(this.bindings.not(t).get()), this.focusable = e(this.focusable.not(t).get()), 
            this.hoverable = e(this.hoverable.not(t).get());
        },
        _delay: function(e, t) {
            var s = this;
            return setTimeout(function() {
                return ("string" == typeof e ? s[e] : e).apply(s, arguments);
            }, t || 0);
        },
        _hoverable: function(t) {
            this.hoverable = this.hoverable.add(t), this._on(t, {
                mouseenter: function(t) {
                    e(t.currentTarget).addClass("ui-state-hover");
                },
                mouseleave: function(t) {
                    e(t.currentTarget).removeClass("ui-state-hover");
                }
            });
        },
        _focusable: function(t) {
            this.focusable = this.focusable.add(t), this._on(t, {
                focusin: function(t) {
                    e(t.currentTarget).addClass("ui-state-focus");
                },
                focusout: function(t) {
                    e(t.currentTarget).removeClass("ui-state-focus");
                }
            });
        },
        _trigger: function(t, i, s) {
            var n, a, o = this.options[t];
            if (s = s || {}, i = e.Event(i), i.type = (t === this.widgetEventPrefix ? t : this.widgetEventPrefix + t).toLowerCase(), 
            i.target = this.element[0], a = i.originalEvent) for (n in a) n in i || (i[n] = a[n]);
            return this.element.trigger(i, s), !(e.isFunction(o) && !1 === o.apply(this.element[0], [ i ].concat(s)) || i.isDefaultPrevented());
        }
    }, e.each({
        show: "fadeIn",
        hide: "fadeOut"
    }, function(t, i) {
        e.Widget.prototype["_" + t] = function(s, n, a) {
            "string" == typeof n && (n = {
                effect: n
            });
            var o, r = n ? !0 === n || "number" == typeof n ? i : n.effect || i : t;
            "number" == typeof (n = n || {}) && (n = {
                duration: n
            }), o = !e.isEmptyObject(n), n.complete = a, n.delay && s.delay(n.delay), o && e.effects && e.effects.effect[r] ? s[t](n) : r !== t && s[r] ? s[r](n.duration, n.easing, a) : s.queue(function(i) {
                e(this)[t](), a && a.call(s[0]), i();
            });
        };
    }), e.widget;
    var a = !1;
    e(document).mouseup(function() {
        a = !1;
    }), e.widget("ui.mouse", {
        version: "1.11.2",
        options: {
            cancel: "input,textarea,button,select,option",
            distance: 1,
            delay: 0
        },
        _mouseInit: function() {
            var t = this;
            this.element.bind("mousedown." + this.widgetName, function(e) {
                return t._mouseDown(e);
            }).bind("click." + this.widgetName, function(i) {
                return !0 === e.data(i.target, t.widgetName + ".preventClickEvent") ? (e.removeData(i.target, t.widgetName + ".preventClickEvent"), 
                i.stopImmediatePropagation(), !1) : void 0;
            }), this.started = !1;
        },
        _mouseDestroy: function() {
            this.element.unbind("." + this.widgetName), this._mouseMoveDelegate && this.document.unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate);
        },
        _mouseDown: function(t) {
            if (!a) {
                this._mouseMoved = !1, this._mouseStarted && this._mouseUp(t), this._mouseDownEvent = t;
                var i = this, s = 1 === t.which, n = !("string" != typeof this.options.cancel || !t.target.nodeName) && e(t.target).closest(this.options.cancel).length;
                return !(s && !n && this._mouseCapture(t)) || (this.mouseDelayMet = !this.options.delay, 
                this.mouseDelayMet || (this._mouseDelayTimer = setTimeout(function() {
                    i.mouseDelayMet = !0;
                }, this.options.delay)), this._mouseDistanceMet(t) && this._mouseDelayMet(t) && (this._mouseStarted = !1 !== this._mouseStart(t), 
                !this._mouseStarted) ? (t.preventDefault(), !0) : (!0 === e.data(t.target, this.widgetName + ".preventClickEvent") && e.removeData(t.target, this.widgetName + ".preventClickEvent"), 
                this._mouseMoveDelegate = function(e) {
                    return i._mouseMove(e);
                }, this._mouseUpDelegate = function(e) {
                    return i._mouseUp(e);
                }, this.document.bind("mousemove." + this.widgetName, this._mouseMoveDelegate).bind("mouseup." + this.widgetName, this._mouseUpDelegate), 
                t.preventDefault(), a = !0, !0));
            }
        },
        _mouseMove: function(t) {
            if (this._mouseMoved) {
                if (e.ui.ie && (!document.documentMode || 9 > document.documentMode) && !t.button) return this._mouseUp(t);
                if (!t.which) return this._mouseUp(t);
            }
            return (t.which || t.button) && (this._mouseMoved = !0), this._mouseStarted ? (this._mouseDrag(t), 
            t.preventDefault()) : (this._mouseDistanceMet(t) && this._mouseDelayMet(t) && (this._mouseStarted = !1 !== this._mouseStart(this._mouseDownEvent, t), 
            this._mouseStarted ? this._mouseDrag(t) : this._mouseUp(t)), !this._mouseStarted);
        },
        _mouseUp: function(t) {
            return this.document.unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate), 
            this._mouseStarted && (this._mouseStarted = !1, t.target === this._mouseDownEvent.target && e.data(t.target, this.widgetName + ".preventClickEvent", !0), 
            this._mouseStop(t)), a = !1, !1;
        },
        _mouseDistanceMet: function(e) {
            return Math.max(Math.abs(this._mouseDownEvent.pageX - e.pageX), Math.abs(this._mouseDownEvent.pageY - e.pageY)) >= this.options.distance;
        },
        _mouseDelayMet: function() {
            return this.mouseDelayMet;
        },
        _mouseStart: function() {},
        _mouseDrag: function() {},
        _mouseStop: function() {},
        _mouseCapture: function() {
            return !0;
        }
    }), e.widget("ui.draggable", e.ui.mouse, {
        version: "1.11.2",
        widgetEventPrefix: "drag",
        options: {
            addClasses: !0,
            appendTo: "parent",
            axis: !1,
            connectToSortable: !1,
            containment: !1,
            cursor: "auto",
            cursorAt: !1,
            grid: !1,
            handle: !1,
            helper: "original",
            iframeFix: !1,
            opacity: !1,
            refreshPositions: !1,
            revert: !1,
            revertDuration: 500,
            scope: "default",
            scroll: !0,
            scrollSensitivity: 20,
            scrollSpeed: 20,
            snap: !1,
            snapMode: "both",
            snapTolerance: 20,
            stack: !1,
            zIndex: !1,
            drag: null,
            start: null,
            stop: null
        },
        _create: function() {
            "original" === this.options.helper && this._setPositionRelative(), this.options.addClasses && this.element.addClass("ui-draggable"), 
            this.options.disabled && this.element.addClass("ui-draggable-disabled"), this._setHandleClassName(), 
            this._mouseInit();
        },
        _setOption: function(e, t) {
            this._super(e, t), "handle" === e && (this._removeHandleClassName(), this._setHandleClassName());
        },
        _destroy: function() {
            return (this.helper || this.element).is(".ui-draggable-dragging") ? void (this.destroyOnClear = !0) : (this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"), 
            this._removeHandleClassName(), void this._mouseDestroy());
        },
        _mouseCapture: function(t) {
            var i = this.options;
            return this._blurActiveElement(t), !(this.helper || i.disabled || e(t.target).closest(".ui-resizable-handle").length > 0) && (this.handle = this._getHandle(t), 
            !!this.handle && (this._blockFrames(!0 === i.iframeFix ? "iframe" : i.iframeFix), 
            !0));
        },
        _blockFrames: function(t) {
            this.iframeBlocks = this.document.find(t).map(function() {
                var t = e(this);
                return e("<div>").css("position", "absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0];
            });
        },
        _unblockFrames: function() {
            this.iframeBlocks && (this.iframeBlocks.remove(), delete this.iframeBlocks);
        },
        _blurActiveElement: function(t) {
            var i = this.document[0];
            if (this.handleElement.is(t.target)) try {
                i.activeElement && "body" !== i.activeElement.nodeName.toLowerCase() && e(i.activeElement).blur();
            } catch (s) {}
        },
        _mouseStart: function(t) {
            var i = this.options;
            return this.helper = this._createHelper(t), this.helper.addClass("ui-draggable-dragging"), 
            this._cacheHelperProportions(), e.ui.ddmanager && (e.ui.ddmanager.current = this), 
            this._cacheMargins(), this.cssPosition = this.helper.css("position"), this.scrollParent = this.helper.scrollParent(!0), 
            this.offsetParent = this.helper.offsetParent(), this.hasFixedAncestor = this.helper.parents().filter(function() {
                return "fixed" === e(this).css("position");
            }).length > 0, this.positionAbs = this.element.offset(), this._refreshOffsets(t), 
            this.originalPosition = this.position = this._generatePosition(t, !1), this.originalPageX = t.pageX, 
            this.originalPageY = t.pageY, i.cursorAt && this._adjustOffsetFromHelper(i.cursorAt), 
            this._setContainment(), !1 === this._trigger("start", t) ? (this._clear(), !1) : (this._cacheHelperProportions(), 
            e.ui.ddmanager && !i.dropBehaviour && e.ui.ddmanager.prepareOffsets(this, t), this._normalizeRightBottom(), 
            this._mouseDrag(t, !0), e.ui.ddmanager && e.ui.ddmanager.dragStart(this, t), !0);
        },
        _refreshOffsets: function(e) {
            this.offset = {
                top: this.positionAbs.top - this.margins.top,
                left: this.positionAbs.left - this.margins.left,
                scroll: !1,
                parent: this._getParentOffset(),
                relative: this._getRelativeOffset()
            }, this.offset.click = {
                left: e.pageX - this.offset.left,
                top: e.pageY - this.offset.top
            };
        },
        _mouseDrag: function(t, i) {
            if (this.hasFixedAncestor && (this.offset.parent = this._getParentOffset()), this.position = this._generatePosition(t, !0), 
            this.positionAbs = this._convertPositionTo("absolute"), !i) {
                var s = this._uiHash();
                if (!1 === this._trigger("drag", t, s)) return this._mouseUp({}), !1;
                this.position = s.position;
            }
            return this.helper[0].style.left = this.position.left + "px", this.helper[0].style.top = this.position.top + "px", 
            e.ui.ddmanager && e.ui.ddmanager.drag(this, t), !1;
        },
        _mouseStop: function(t) {
            var i = this, s = !1;
            return e.ui.ddmanager && !this.options.dropBehaviour && (s = e.ui.ddmanager.drop(this, t)), 
            this.dropped && (s = this.dropped, this.dropped = !1), "invalid" === this.options.revert && !s || "valid" === this.options.revert && s || !0 === this.options.revert || e.isFunction(this.options.revert) && this.options.revert.call(this.element, s) ? e(this.helper).animate(this.originalPosition, parseInt(this.options.revertDuration, 10), function() {
                !1 !== i._trigger("stop", t) && i._clear();
            }) : !1 !== this._trigger("stop", t) && this._clear(), !1;
        },
        _mouseUp: function(t) {
            return this._unblockFrames(), e.ui.ddmanager && e.ui.ddmanager.dragStop(this, t), 
            this.handleElement.is(t.target) && this.element.focus(), e.ui.mouse.prototype._mouseUp.call(this, t);
        },
        cancel: function() {
            return this.helper.is(".ui-draggable-dragging") ? this._mouseUp({}) : this._clear(), 
            this;
        },
        _getHandle: function(t) {
            return !this.options.handle || !!e(t.target).closest(this.element.find(this.options.handle)).length;
        },
        _setHandleClassName: function() {
            this.handleElement = this.options.handle ? this.element.find(this.options.handle) : this.element, 
            this.handleElement.addClass("ui-draggable-handle");
        },
        _removeHandleClassName: function() {
            this.handleElement.removeClass("ui-draggable-handle");
        },
        _createHelper: function(t) {
            var i = this.options, s = e.isFunction(i.helper), n = s ? e(i.helper.apply(this.element[0], [ t ])) : "clone" === i.helper ? this.element.clone().removeAttr("id") : this.element;
            return n.parents("body").length || n.appendTo("parent" === i.appendTo ? this.element[0].parentNode : i.appendTo), 
            s && n[0] === this.element[0] && this._setPositionRelative(), n[0] === this.element[0] || /(fixed|absolute)/.test(n.css("position")) || n.css("position", "absolute"), 
            n;
        },
        _setPositionRelative: function() {
            /^(?:r|a|f)/.test(this.element.css("position")) || (this.element[0].style.position = "relative");
        },
        _adjustOffsetFromHelper: function(t) {
            "string" == typeof t && (t = t.split(" ")), e.isArray(t) && (t = {
                left: +t[0],
                top: +t[1] || 0
            }), "left" in t && (this.offset.click.left = t.left + this.margins.left), "right" in t && (this.offset.click.left = this.helperProportions.width - t.right + this.margins.left), 
            "top" in t && (this.offset.click.top = t.top + this.margins.top), "bottom" in t && (this.offset.click.top = this.helperProportions.height - t.bottom + this.margins.top);
        },
        _isRootNode: function(e) {
            return /(html|body)/i.test(e.tagName) || e === this.document[0];
        },
        _getParentOffset: function() {
            var t = this.offsetParent.offset(), i = this.document[0];
            return "absolute" === this.cssPosition && this.scrollParent[0] !== i && e.contains(this.scrollParent[0], this.offsetParent[0]) && (t.left += this.scrollParent.scrollLeft(), 
            t.top += this.scrollParent.scrollTop()), this._isRootNode(this.offsetParent[0]) && (t = {
                top: 0,
                left: 0
            }), {
                top: t.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0),
                left: t.left + (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0)
            };
        },
        _getRelativeOffset: function() {
            if ("relative" !== this.cssPosition) return {
                top: 0,
                left: 0
            };
            var e = this.element.position(), t = this._isRootNode(this.scrollParent[0]);
            return {
                top: e.top - (parseInt(this.helper.css("top"), 10) || 0) + (t ? 0 : this.scrollParent.scrollTop()),
                left: e.left - (parseInt(this.helper.css("left"), 10) || 0) + (t ? 0 : this.scrollParent.scrollLeft())
            };
        },
        _cacheMargins: function() {
            this.margins = {
                left: parseInt(this.element.css("marginLeft"), 10) || 0,
                top: parseInt(this.element.css("marginTop"), 10) || 0,
                right: parseInt(this.element.css("marginRight"), 10) || 0,
                bottom: parseInt(this.element.css("marginBottom"), 10) || 0
            };
        },
        _cacheHelperProportions: function() {
            this.helperProportions = {
                width: this.helper.outerWidth(),
                height: this.helper.outerHeight()
            };
        },
        _setContainment: function() {
            var t, i, s, n = this.options, a = this.document[0];
            return this.relativeContainer = null, n.containment ? "window" === n.containment ? void (this.containment = [ e(window).scrollLeft() - this.offset.relative.left - this.offset.parent.left, e(window).scrollTop() - this.offset.relative.top - this.offset.parent.top, e(window).scrollLeft() + e(window).width() - this.helperProportions.width - this.margins.left, e(window).scrollTop() + (e(window).height() || a.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top ]) : "document" === n.containment ? void (this.containment = [ 0, 0, e(a).width() - this.helperProportions.width - this.margins.left, (e(a).height() || a.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top ]) : n.containment.constructor === Array ? void (this.containment = n.containment) : ("parent" === n.containment && (n.containment = this.helper[0].parentNode), 
            i = e(n.containment), void ((s = i[0]) && (t = /(scroll|auto)/.test(i.css("overflow")), 
            this.containment = [ (parseInt(i.css("borderLeftWidth"), 10) || 0) + (parseInt(i.css("paddingLeft"), 10) || 0), (parseInt(i.css("borderTopWidth"), 10) || 0) + (parseInt(i.css("paddingTop"), 10) || 0), (t ? Math.max(s.scrollWidth, s.offsetWidth) : s.offsetWidth) - (parseInt(i.css("borderRightWidth"), 10) || 0) - (parseInt(i.css("paddingRight"), 10) || 0) - this.helperProportions.width - this.margins.left - this.margins.right, (t ? Math.max(s.scrollHeight, s.offsetHeight) : s.offsetHeight) - (parseInt(i.css("borderBottomWidth"), 10) || 0) - (parseInt(i.css("paddingBottom"), 10) || 0) - this.helperProportions.height - this.margins.top - this.margins.bottom ], 
            this.relativeContainer = i))) : void (this.containment = null);
        },
        _convertPositionTo: function(e, t) {
            t || (t = this.position);
            var i = "absolute" === e ? 1 : -1, s = this._isRootNode(this.scrollParent[0]);
            return {
                top: t.top + this.offset.relative.top * i + this.offset.parent.top * i - ("fixed" === this.cssPosition ? -this.offset.scroll.top : s ? 0 : this.offset.scroll.top) * i,
                left: t.left + this.offset.relative.left * i + this.offset.parent.left * i - ("fixed" === this.cssPosition ? -this.offset.scroll.left : s ? 0 : this.offset.scroll.left) * i
            };
        },
        _generatePosition: function(e, t) {
            var i, s, n, a, o = this.options, r = this._isRootNode(this.scrollParent[0]), h = e.pageX, l = e.pageY;
            return r && this.offset.scroll || (this.offset.scroll = {
                top: this.scrollParent.scrollTop(),
                left: this.scrollParent.scrollLeft()
            }), t && (this.containment && (this.relativeContainer ? (s = this.relativeContainer.offset(), 
            i = [ this.containment[0] + s.left, this.containment[1] + s.top, this.containment[2] + s.left, this.containment[3] + s.top ]) : i = this.containment, 
            e.pageX - this.offset.click.left < i[0] && (h = i[0] + this.offset.click.left), 
            e.pageY - this.offset.click.top < i[1] && (l = i[1] + this.offset.click.top), e.pageX - this.offset.click.left > i[2] && (h = i[2] + this.offset.click.left), 
            e.pageY - this.offset.click.top > i[3] && (l = i[3] + this.offset.click.top)), o.grid && (n = o.grid[1] ? this.originalPageY + Math.round((l - this.originalPageY) / o.grid[1]) * o.grid[1] : this.originalPageY, 
            l = i ? n - this.offset.click.top >= i[1] || n - this.offset.click.top > i[3] ? n : n - this.offset.click.top >= i[1] ? n - o.grid[1] : n + o.grid[1] : n, 
            a = o.grid[0] ? this.originalPageX + Math.round((h - this.originalPageX) / o.grid[0]) * o.grid[0] : this.originalPageX, 
            h = i ? a - this.offset.click.left >= i[0] || a - this.offset.click.left > i[2] ? a : a - this.offset.click.left >= i[0] ? a - o.grid[0] : a + o.grid[0] : a), 
            "y" === o.axis && (h = this.originalPageX), "x" === o.axis && (l = this.originalPageY)), 
            {
                top: l - this.offset.click.top - this.offset.relative.top - this.offset.parent.top + ("fixed" === this.cssPosition ? -this.offset.scroll.top : r ? 0 : this.offset.scroll.top),
                left: h - this.offset.click.left - this.offset.relative.left - this.offset.parent.left + ("fixed" === this.cssPosition ? -this.offset.scroll.left : r ? 0 : this.offset.scroll.left)
            };
        },
        _clear: function() {
            this.helper.removeClass("ui-draggable-dragging"), this.helper[0] === this.element[0] || this.cancelHelperRemoval || this.helper.remove(), 
            this.helper = null, this.cancelHelperRemoval = !1, this.destroyOnClear && this.destroy();
        },
        _normalizeRightBottom: function() {
            "y" !== this.options.axis && "auto" !== this.helper.css("right") && (this.helper.width(this.helper.width()), 
            this.helper.css("right", "auto")), "x" !== this.options.axis && "auto" !== this.helper.css("bottom") && (this.helper.height(this.helper.height()), 
            this.helper.css("bottom", "auto"));
        },
        _trigger: function(t, i, s) {
            return s = s || this._uiHash(), e.ui.plugin.call(this, t, [ i, s, this ], !0), /^(drag|start|stop)/.test(t) && (this.positionAbs = this._convertPositionTo("absolute"), 
            s.offset = this.positionAbs), e.Widget.prototype._trigger.call(this, t, i, s);
        },
        plugins: {},
        _uiHash: function() {
            return {
                helper: this.helper,
                position: this.position,
                originalPosition: this.originalPosition,
                offset: this.positionAbs
            };
        }
    }), e.ui.plugin.add("draggable", "connectToSortable", {
        start: function(t, i, s) {
            var n = e.extend({}, i, {
                item: s.element
            });
            s.sortables = [], e(s.options.connectToSortable).each(function() {
                var i = e(this).sortable("instance");
                i && !i.options.disabled && (s.sortables.push(i), i.refreshPositions(), i._trigger("activate", t, n));
            });
        },
        stop: function(t, i, s) {
            var n = e.extend({}, i, {
                item: s.element
            });
            s.cancelHelperRemoval = !1, e.each(s.sortables, function() {
                var e = this;
                e.isOver ? (e.isOver = 0, s.cancelHelperRemoval = !0, e.cancelHelperRemoval = !1, 
                e._storedCSS = {
                    position: e.placeholder.css("position"),
                    top: e.placeholder.css("top"),
                    left: e.placeholder.css("left")
                }, e._mouseStop(t), e.options.helper = e.options._helper) : (e.cancelHelperRemoval = !0, 
                e._trigger("deactivate", t, n));
            });
        },
        drag: function(t, i, s) {
            e.each(s.sortables, function() {
                var n = !1, a = this;
                a.positionAbs = s.positionAbs, a.helperProportions = s.helperProportions, a.offset.click = s.offset.click, 
                a._intersectsWith(a.containerCache) && (n = !0, e.each(s.sortables, function() {
                    return this.positionAbs = s.positionAbs, this.helperProportions = s.helperProportions, 
                    this.offset.click = s.offset.click, this !== a && this._intersectsWith(this.containerCache) && e.contains(a.element[0], this.element[0]) && (n = !1), 
                    n;
                })), n ? (a.isOver || (a.isOver = 1, a.currentItem = i.helper.appendTo(a.element).data("ui-sortable-item", !0), 
                a.options._helper = a.options.helper, a.options.helper = function() {
                    return i.helper[0];
                }, t.target = a.currentItem[0], a._mouseCapture(t, !0), a._mouseStart(t, !0, !0), 
                a.offset.click.top = s.offset.click.top, a.offset.click.left = s.offset.click.left, 
                a.offset.parent.left -= s.offset.parent.left - a.offset.parent.left, a.offset.parent.top -= s.offset.parent.top - a.offset.parent.top, 
                s._trigger("toSortable", t), s.dropped = a.element, e.each(s.sortables, function() {
                    this.refreshPositions();
                }), s.currentItem = s.element, a.fromOutside = s), a.currentItem && (a._mouseDrag(t), 
                i.position = a.position)) : a.isOver && (a.isOver = 0, a.cancelHelperRemoval = !0, 
                a.options._revert = a.options.revert, a.options.revert = !1, a._trigger("out", t, a._uiHash(a)), 
                a._mouseStop(t, !0), a.options.revert = a.options._revert, a.options.helper = a.options._helper, 
                a.placeholder && a.placeholder.remove(), s._refreshOffsets(t), i.position = s._generatePosition(t, !0), 
                s._trigger("fromSortable", t), s.dropped = !1, e.each(s.sortables, function() {
                    this.refreshPositions();
                }));
            });
        }
    }), e.ui.plugin.add("draggable", "cursor", {
        start: function(t, i, s) {
            var n = e("body"), a = s.options;
            n.css("cursor") && (a._cursor = n.css("cursor")), n.css("cursor", a.cursor);
        },
        stop: function(t, i, s) {
            var n = s.options;
            n._cursor && e("body").css("cursor", n._cursor);
        }
    }), e.ui.plugin.add("draggable", "opacity", {
        start: function(t, i, s) {
            var n = e(i.helper), a = s.options;
            n.css("opacity") && (a._opacity = n.css("opacity")), n.css("opacity", a.opacity);
        },
        stop: function(t, i, s) {
            var n = s.options;
            n._opacity && e(i.helper).css("opacity", n._opacity);
        }
    }), e.ui.plugin.add("draggable", "scroll", {
        start: function(e, t, i) {
            i.scrollParentNotHidden || (i.scrollParentNotHidden = i.helper.scrollParent(!1)), 
            i.scrollParentNotHidden[0] !== i.document[0] && "HTML" !== i.scrollParentNotHidden[0].tagName && (i.overflowOffset = i.scrollParentNotHidden.offset());
        },
        drag: function(t, i, s) {
            var n = s.options, a = !1, o = s.scrollParentNotHidden[0], r = s.document[0];
            o !== r && "HTML" !== o.tagName ? (n.axis && "x" === n.axis || (s.overflowOffset.top + o.offsetHeight - t.pageY < n.scrollSensitivity ? o.scrollTop = a = o.scrollTop + n.scrollSpeed : t.pageY - s.overflowOffset.top < n.scrollSensitivity && (o.scrollTop = a = o.scrollTop - n.scrollSpeed)), 
            n.axis && "y" === n.axis || (s.overflowOffset.left + o.offsetWidth - t.pageX < n.scrollSensitivity ? o.scrollLeft = a = o.scrollLeft + n.scrollSpeed : t.pageX - s.overflowOffset.left < n.scrollSensitivity && (o.scrollLeft = a = o.scrollLeft - n.scrollSpeed))) : (n.axis && "x" === n.axis || (t.pageY - e(r).scrollTop() < n.scrollSensitivity ? a = e(r).scrollTop(e(r).scrollTop() - n.scrollSpeed) : e(window).height() - (t.pageY - e(r).scrollTop()) < n.scrollSensitivity && (a = e(r).scrollTop(e(r).scrollTop() + n.scrollSpeed))), 
            n.axis && "y" === n.axis || (t.pageX - e(r).scrollLeft() < n.scrollSensitivity ? a = e(r).scrollLeft(e(r).scrollLeft() - n.scrollSpeed) : e(window).width() - (t.pageX - e(r).scrollLeft()) < n.scrollSensitivity && (a = e(r).scrollLeft(e(r).scrollLeft() + n.scrollSpeed)))), 
            !1 !== a && e.ui.ddmanager && !n.dropBehaviour && e.ui.ddmanager.prepareOffsets(s, t);
        }
    }), e.ui.plugin.add("draggable", "snap", {
        start: function(t, i, s) {
            var n = s.options;
            s.snapElements = [], e(n.snap.constructor !== String ? n.snap.items || ":data(ui-draggable)" : n.snap).each(function() {
                var t = e(this), i = t.offset();
                this !== s.element[0] && s.snapElements.push({
                    item: this,
                    width: t.outerWidth(),
                    height: t.outerHeight(),
                    top: i.top,
                    left: i.left
                });
            });
        },
        drag: function(t, i, s) {
            var n, a, o, r, h, l, u, d, c, p, f = s.options, m = f.snapTolerance, g = i.offset.left, v = g + s.helperProportions.width, y = i.offset.top, b = y + s.helperProportions.height;
            for (c = s.snapElements.length - 1; c >= 0; c--) h = s.snapElements[c].left - s.margins.left, 
            l = h + s.snapElements[c].width, u = s.snapElements[c].top - s.margins.top, d = u + s.snapElements[c].height, 
            h - m > v || g > l + m || u - m > b || y > d + m || !e.contains(s.snapElements[c].item.ownerDocument, s.snapElements[c].item) ? (s.snapElements[c].snapping && s.options.snap.release && s.options.snap.release.call(s.element, t, e.extend(s._uiHash(), {
                snapItem: s.snapElements[c].item
            })), s.snapElements[c].snapping = !1) : ("inner" !== f.snapMode && (n = m >= Math.abs(u - b), 
            a = m >= Math.abs(d - y), o = m >= Math.abs(h - v), r = m >= Math.abs(l - g), n && (i.position.top = s._convertPositionTo("relative", {
                top: u - s.helperProportions.height,
                left: 0
            }).top), a && (i.position.top = s._convertPositionTo("relative", {
                top: d,
                left: 0
            }).top), o && (i.position.left = s._convertPositionTo("relative", {
                top: 0,
                left: h - s.helperProportions.width
            }).left), r && (i.position.left = s._convertPositionTo("relative", {
                top: 0,
                left: l
            }).left)), p = n || a || o || r, "outer" !== f.snapMode && (n = m >= Math.abs(u - y), 
            a = m >= Math.abs(d - b), o = m >= Math.abs(h - g), r = m >= Math.abs(l - v), n && (i.position.top = s._convertPositionTo("relative", {
                top: u,
                left: 0
            }).top), a && (i.position.top = s._convertPositionTo("relative", {
                top: d - s.helperProportions.height,
                left: 0
            }).top), o && (i.position.left = s._convertPositionTo("relative", {
                top: 0,
                left: h
            }).left), r && (i.position.left = s._convertPositionTo("relative", {
                top: 0,
                left: l - s.helperProportions.width
            }).left)), !s.snapElements[c].snapping && (n || a || o || r || p) && s.options.snap.snap && s.options.snap.snap.call(s.element, t, e.extend(s._uiHash(), {
                snapItem: s.snapElements[c].item
            })), s.snapElements[c].snapping = n || a || o || r || p);
        }
    }), e.ui.plugin.add("draggable", "stack", {
        start: function(t, i, s) {
            var n, a = s.options, o = e.makeArray(e(a.stack)).sort(function(t, i) {
                return (parseInt(e(t).css("zIndex"), 10) || 0) - (parseInt(e(i).css("zIndex"), 10) || 0);
            });
            o.length && (n = parseInt(e(o[0]).css("zIndex"), 10) || 0, e(o).each(function(t) {
                e(this).css("zIndex", n + t);
            }), this.css("zIndex", n + o.length));
        }
    }), e.ui.plugin.add("draggable", "zIndex", {
        start: function(t, i, s) {
            var n = e(i.helper), a = s.options;
            n.css("zIndex") && (a._zIndex = n.css("zIndex")), n.css("zIndex", a.zIndex);
        },
        stop: function(t, i, s) {
            var n = s.options;
            n._zIndex && e(i.helper).css("zIndex", n._zIndex);
        }
    }), e.ui.draggable, e.widget("ui.droppable", {
        version: "1.11.2",
        widgetEventPrefix: "drop",
        options: {
            accept: "*",
            activeClass: !1,
            addClasses: !0,
            greedy: !1,
            hoverClass: !1,
            scope: "default",
            tolerance: "intersect",
            activate: null,
            deactivate: null,
            drop: null,
            out: null,
            over: null
        },
        _create: function() {
            var t, i = this.options, s = i.accept;
            this.isover = !1, this.isout = !0, this.accept = e.isFunction(s) ? s : function(e) {
                return e.is(s);
            }, this.proportions = function() {
                return arguments.length ? void (t = arguments[0]) : t || (t = {
                    width: this.element[0].offsetWidth,
                    height: this.element[0].offsetHeight
                });
            }, this._addToManager(i.scope), i.addClasses && this.element.addClass("ui-droppable");
        },
        _addToManager: function(t) {
            e.ui.ddmanager.droppables[t] = e.ui.ddmanager.droppables[t] || [], e.ui.ddmanager.droppables[t].push(this);
        },
        _splice: function(e) {
            for (var t = 0; e.length > t; t++) e[t] === this && e.splice(t, 1);
        },
        _destroy: function() {
            var t = e.ui.ddmanager.droppables[this.options.scope];
            this._splice(t), this.element.removeClass("ui-droppable ui-droppable-disabled");
        },
        _setOption: function(t, i) {
            if ("accept" === t) this.accept = e.isFunction(i) ? i : function(e) {
                return e.is(i);
            }; else if ("scope" === t) {
                var s = e.ui.ddmanager.droppables[this.options.scope];
                this._splice(s), this._addToManager(i);
            }
            this._super(t, i);
        },
        _activate: function(t) {
            var i = e.ui.ddmanager.current;
            this.options.activeClass && this.element.addClass(this.options.activeClass), i && this._trigger("activate", t, this.ui(i));
        },
        _deactivate: function(t) {
            var i = e.ui.ddmanager.current;
            this.options.activeClass && this.element.removeClass(this.options.activeClass), 
            i && this._trigger("deactivate", t, this.ui(i));
        },
        _over: function(t) {
            var i = e.ui.ddmanager.current;
            i && (i.currentItem || i.element)[0] !== this.element[0] && this.accept.call(this.element[0], i.currentItem || i.element) && (this.options.hoverClass && this.element.addClass(this.options.hoverClass), 
            this._trigger("over", t, this.ui(i)));
        },
        _out: function(t) {
            var i = e.ui.ddmanager.current;
            i && (i.currentItem || i.element)[0] !== this.element[0] && this.accept.call(this.element[0], i.currentItem || i.element) && (this.options.hoverClass && this.element.removeClass(this.options.hoverClass), 
            this._trigger("out", t, this.ui(i)));
        },
        _drop: function(t, i) {
            var s = i || e.ui.ddmanager.current, n = !1;
            return !(!s || (s.currentItem || s.element)[0] === this.element[0]) && (this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function() {
                var i = e(this).droppable("instance");
                return i.options.greedy && !i.options.disabled && i.options.scope === s.options.scope && i.accept.call(i.element[0], s.currentItem || s.element) && e.ui.intersect(s, e.extend(i, {
                    offset: i.element.offset()
                }), i.options.tolerance, t) ? (n = !0, !1) : void 0;
            }), !n && (!!this.accept.call(this.element[0], s.currentItem || s.element) && (this.options.activeClass && this.element.removeClass(this.options.activeClass), 
            this.options.hoverClass && this.element.removeClass(this.options.hoverClass), this._trigger("drop", t, this.ui(s)), 
            this.element)));
        },
        ui: function(e) {
            return {
                draggable: e.currentItem || e.element,
                helper: e.helper,
                position: e.position,
                offset: e.positionAbs
            };
        }
    }), e.ui.intersect = function() {
        function e(e, t, i) {
            return e >= t && t + i > e;
        }
        return function(t, i, s, n) {
            if (!i.offset) return !1;
            var a = (t.positionAbs || t.position.absolute).left + t.margins.left, o = (t.positionAbs || t.position.absolute).top + t.margins.top, r = a + t.helperProportions.width, h = o + t.helperProportions.height, l = i.offset.left, u = i.offset.top, d = l + i.proportions().width, c = u + i.proportions().height;
            switch (s) {
              case "fit":
                return a >= l && d >= r && o >= u && c >= h;

              case "intersect":
                return a + t.helperProportions.width / 2 > l && d > r - t.helperProportions.width / 2 && o + t.helperProportions.height / 2 > u && c > h - t.helperProportions.height / 2;

              case "pointer":
                return e(n.pageY, u, i.proportions().height) && e(n.pageX, l, i.proportions().width);

              case "touch":
                return (o >= u && c >= o || h >= u && c >= h || u > o && h > c) && (a >= l && d >= a || r >= l && d >= r || l > a && r > d);

              default:
                return !1;
            }
        };
    }(), e.ui.ddmanager = {
        current: null,
        droppables: {
            default: []
        },
        prepareOffsets: function(t, i) {
            var s, n, a = e.ui.ddmanager.droppables[t.options.scope] || [], o = i ? i.type : null, r = (t.currentItem || t.element).find(":data(ui-droppable)").addBack();
            e: for (s = 0; a.length > s; s++) if (!(a[s].options.disabled || t && !a[s].accept.call(a[s].element[0], t.currentItem || t.element))) {
                for (n = 0; r.length > n; n++) if (r[n] === a[s].element[0]) {
                    a[s].proportions().height = 0;
                    continue e;
                }
                a[s].visible = "none" !== a[s].element.css("display"), a[s].visible && ("mousedown" === o && a[s]._activate.call(a[s], i), 
                a[s].offset = a[s].element.offset(), a[s].proportions({
                    width: a[s].element[0].offsetWidth,
                    height: a[s].element[0].offsetHeight
                }));
            }
        },
        drop: function(t, i) {
            var s = !1;
            return e.each((e.ui.ddmanager.droppables[t.options.scope] || []).slice(), function() {
                this.options && (!this.options.disabled && this.visible && e.ui.intersect(t, this, this.options.tolerance, i) && (s = this._drop.call(this, i) || s), 
                !this.options.disabled && this.visible && this.accept.call(this.element[0], t.currentItem || t.element) && (this.isout = !0, 
                this.isover = !1, this._deactivate.call(this, i)));
            }), s;
        },
        dragStart: function(t, i) {
            t.element.parentsUntil("body").bind("scroll.droppable", function() {
                t.options.refreshPositions || e.ui.ddmanager.prepareOffsets(t, i);
            });
        },
        drag: function(t, i) {
            t.options.refreshPositions && e.ui.ddmanager.prepareOffsets(t, i), e.each(e.ui.ddmanager.droppables[t.options.scope] || [], function() {
                if (!this.options.disabled && !this.greedyChild && this.visible) {
                    var s, n, a, o = e.ui.intersect(t, this, this.options.tolerance, i), r = !o && this.isover ? "isout" : o && !this.isover ? "isover" : null;
                    r && (this.options.greedy && (n = this.options.scope, (a = this.element.parents(":data(ui-droppable)").filter(function() {
                        return e(this).droppable("instance").options.scope === n;
                    })).length && (s = e(a[0]).droppable("instance"), s.greedyChild = "isover" === r)), 
                    s && "isover" === r && (s.isover = !1, s.isout = !0, s._out.call(s, i)), this[r] = !0, 
                    this["isout" === r ? "isover" : "isout"] = !1, this["isover" === r ? "_over" : "_out"].call(this, i), 
                    s && "isout" === r && (s.isout = !1, s.isover = !0, s._over.call(s, i)));
                }
            });
        },
        dragStop: function(t, i) {
            t.element.parentsUntil("body").unbind("scroll.droppable"), t.options.refreshPositions || e.ui.ddmanager.prepareOffsets(t, i);
        }
    }, e.ui.droppable, e.widget("ui.resizable", e.ui.mouse, {
        version: "1.11.2",
        widgetEventPrefix: "resize",
        options: {
            alsoResize: !1,
            animate: !1,
            animateDuration: "slow",
            animateEasing: "swing",
            aspectRatio: !1,
            autoHide: !1,
            containment: !1,
            ghost: !1,
            grid: !1,
            handles: "e,s,se",
            helper: !1,
            maxHeight: null,
            maxWidth: null,
            minHeight: 10,
            minWidth: 10,
            zIndex: 90,
            resize: null,
            start: null,
            stop: null
        },
        _num: function(e) {
            return parseInt(e, 10) || 0;
        },
        _isNumber: function(e) {
            return !isNaN(parseInt(e, 10));
        },
        _hasScroll: function(t, i) {
            if ("hidden" === e(t).css("overflow")) return !1;
            var s = i && "left" === i ? "scrollLeft" : "scrollTop", n = !1;
            return t[s] > 0 || (t[s] = 1, n = t[s] > 0, t[s] = 0, n);
        },
        _create: function() {
            var t, i, s, n, a, o = this, r = this.options;
            if (this.element.addClass("ui-resizable"), e.extend(this, {
                _aspectRatio: !!r.aspectRatio,
                aspectRatio: r.aspectRatio,
                originalElement: this.element,
                _proportionallyResizeElements: [],
                _helper: r.helper || r.ghost || r.animate ? r.helper || "ui-resizable-helper" : null
            }), this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i) && (this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({
                position: this.element.css("position"),
                width: this.element.outerWidth(),
                height: this.element.outerHeight(),
                top: this.element.css("top"),
                left: this.element.css("left")
            })), this.element = this.element.parent().data("ui-resizable", this.element.resizable("instance")), 
            this.elementIsWrapper = !0, this.element.css({
                marginLeft: this.originalElement.css("marginLeft"),
                marginTop: this.originalElement.css("marginTop"),
                marginRight: this.originalElement.css("marginRight"),
                marginBottom: this.originalElement.css("marginBottom")
            }), this.originalElement.css({
                marginLeft: 0,
                marginTop: 0,
                marginRight: 0,
                marginBottom: 0
            }), this.originalResizeStyle = this.originalElement.css("resize"), this.originalElement.css("resize", "none"), 
            this._proportionallyResizeElements.push(this.originalElement.css({
                position: "static",
                zoom: 1,
                display: "block"
            })), this.originalElement.css({
                margin: this.originalElement.css("margin")
            }), this._proportionallyResize()), this.handles = r.handles || (e(".ui-resizable-handle", this.element).length ? {
                n: ".ui-resizable-n",
                e: ".ui-resizable-e",
                s: ".ui-resizable-s",
                w: ".ui-resizable-w",
                se: ".ui-resizable-se",
                sw: ".ui-resizable-sw",
                ne: ".ui-resizable-ne",
                nw: ".ui-resizable-nw"
            } : "e,s,se"), this.handles.constructor === String) for ("all" === this.handles && (this.handles = "n,e,s,w,se,sw,ne,nw"), 
            t = this.handles.split(","), this.handles = {}, i = 0; t.length > i; i++) s = e.trim(t[i]), 
            a = "ui-resizable-" + s, (n = e("<div class='ui-resizable-handle " + a + "'></div>")).css({
                zIndex: r.zIndex
            }), "se" === s && n.addClass("ui-icon ui-icon-gripsmall-diagonal-se"), this.handles[s] = ".ui-resizable-" + s, 
            this.element.append(n);
            this._renderAxis = function(t) {
                var i, s, n, a;
                t = t || this.element;
                for (i in this.handles) this.handles[i].constructor === String && (this.handles[i] = this.element.children(this.handles[i]).first().show()), 
                this.elementIsWrapper && this.originalElement[0].nodeName.match(/textarea|input|select|button/i) && (s = e(this.handles[i], this.element), 
                a = /sw|ne|nw|se|n|s/.test(i) ? s.outerHeight() : s.outerWidth(), n = [ "padding", /ne|nw|n/.test(i) ? "Top" : /se|sw|s/.test(i) ? "Bottom" : /^e$/.test(i) ? "Right" : "Left" ].join(""), 
                t.css(n, a), this._proportionallyResize()), e(this.handles[i]).length;
            }, this._renderAxis(this.element), this._handles = e(".ui-resizable-handle", this.element).disableSelection(), 
            this._handles.mouseover(function() {
                o.resizing || (this.className && (n = this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)), 
                o.axis = n && n[1] ? n[1] : "se");
            }), r.autoHide && (this._handles.hide(), e(this.element).addClass("ui-resizable-autohide").mouseenter(function() {
                r.disabled || (e(this).removeClass("ui-resizable-autohide"), o._handles.show());
            }).mouseleave(function() {
                r.disabled || o.resizing || (e(this).addClass("ui-resizable-autohide"), o._handles.hide());
            })), this._mouseInit();
        },
        _destroy: function() {
            this._mouseDestroy();
            var t, i = function(t) {
                e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove();
            };
            return this.elementIsWrapper && (i(this.element), t = this.element, this.originalElement.css({
                position: t.css("position"),
                width: t.outerWidth(),
                height: t.outerHeight(),
                top: t.css("top"),
                left: t.css("left")
            }).insertAfter(t), t.remove()), this.originalElement.css("resize", this.originalResizeStyle), 
            i(this.originalElement), this;
        },
        _mouseCapture: function(t) {
            var i, s, n = !1;
            for (i in this.handles) ((s = e(this.handles[i])[0]) === t.target || e.contains(s, t.target)) && (n = !0);
            return !this.options.disabled && n;
        },
        _mouseStart: function(t) {
            var i, s, n, a = this.options, o = this.element;
            return this.resizing = !0, this._renderProxy(), i = this._num(this.helper.css("left")), 
            s = this._num(this.helper.css("top")), a.containment && (i += e(a.containment).scrollLeft() || 0, 
            s += e(a.containment).scrollTop() || 0), this.offset = this.helper.offset(), this.position = {
                left: i,
                top: s
            }, this.size = this._helper ? {
                width: this.helper.width(),
                height: this.helper.height()
            } : {
                width: o.width(),
                height: o.height()
            }, this.originalSize = this._helper ? {
                width: o.outerWidth(),
                height: o.outerHeight()
            } : {
                width: o.width(),
                height: o.height()
            }, this.sizeDiff = {
                width: o.outerWidth() - o.width(),
                height: o.outerHeight() - o.height()
            }, this.originalPosition = {
                left: i,
                top: s
            }, this.originalMousePosition = {
                left: t.pageX,
                top: t.pageY
            }, this.aspectRatio = "number" == typeof a.aspectRatio ? a.aspectRatio : this.originalSize.width / this.originalSize.height || 1, 
            n = e(".ui-resizable-" + this.axis).css("cursor"), e("body").css("cursor", "auto" === n ? this.axis + "-resize" : n), 
            o.addClass("ui-resizable-resizing"), this._propagate("start", t), !0;
        },
        _mouseDrag: function(t) {
            var i, s, n = this.originalMousePosition, a = this.axis, o = t.pageX - n.left || 0, r = t.pageY - n.top || 0, h = this._change[a];
            return this._updatePrevProperties(), !!h && (i = h.apply(this, [ t, o, r ]), this._updateVirtualBoundaries(t.shiftKey), 
            (this._aspectRatio || t.shiftKey) && (i = this._updateRatio(i, t)), i = this._respectSize(i, t), 
            this._updateCache(i), this._propagate("resize", t), s = this._applyChanges(), !this._helper && this._proportionallyResizeElements.length && this._proportionallyResize(), 
            e.isEmptyObject(s) || (this._updatePrevProperties(), this._trigger("resize", t, this.ui()), 
            this._applyChanges()), !1);
        },
        _mouseStop: function(t) {
            this.resizing = !1;
            var i, s, n, a, o, r, h, l = this.options, u = this;
            return this._helper && (i = this._proportionallyResizeElements, s = i.length && /textarea/i.test(i[0].nodeName), 
            n = s && this._hasScroll(i[0], "left") ? 0 : u.sizeDiff.height, a = s ? 0 : u.sizeDiff.width, 
            o = {
                width: u.helper.width() - a,
                height: u.helper.height() - n
            }, r = parseInt(u.element.css("left"), 10) + (u.position.left - u.originalPosition.left) || null, 
            h = parseInt(u.element.css("top"), 10) + (u.position.top - u.originalPosition.top) || null, 
            l.animate || this.element.css(e.extend(o, {
                top: h,
                left: r
            })), u.helper.height(u.size.height), u.helper.width(u.size.width), this._helper && !l.animate && this._proportionallyResize()), 
            e("body").css("cursor", "auto"), this.element.removeClass("ui-resizable-resizing"), 
            this._propagate("stop", t), this._helper && this.helper.remove(), !1;
        },
        _updatePrevProperties: function() {
            this.prevPosition = {
                top: this.position.top,
                left: this.position.left
            }, this.prevSize = {
                width: this.size.width,
                height: this.size.height
            };
        },
        _applyChanges: function() {
            var e = {};
            return this.position.top !== this.prevPosition.top && (e.top = this.position.top + "px"), 
            this.position.left !== this.prevPosition.left && (e.left = this.position.left + "px"), 
            this.size.width !== this.prevSize.width && (e.width = this.size.width + "px"), this.size.height !== this.prevSize.height && (e.height = this.size.height + "px"), 
            this.helper.css(e), e;
        },
        _updateVirtualBoundaries: function(e) {
            var t, i, s, n, a, o = this.options;
            a = {
                minWidth: this._isNumber(o.minWidth) ? o.minWidth : 0,
                maxWidth: this._isNumber(o.maxWidth) ? o.maxWidth : 1 / 0,
                minHeight: this._isNumber(o.minHeight) ? o.minHeight : 0,
                maxHeight: this._isNumber(o.maxHeight) ? o.maxHeight : 1 / 0
            }, (this._aspectRatio || e) && (t = a.minHeight * this.aspectRatio, s = a.minWidth / this.aspectRatio, 
            i = a.maxHeight * this.aspectRatio, n = a.maxWidth / this.aspectRatio, t > a.minWidth && (a.minWidth = t), 
            s > a.minHeight && (a.minHeight = s), a.maxWidth > i && (a.maxWidth = i), a.maxHeight > n && (a.maxHeight = n)), 
            this._vBoundaries = a;
        },
        _updateCache: function(e) {
            this.offset = this.helper.offset(), this._isNumber(e.left) && (this.position.left = e.left), 
            this._isNumber(e.top) && (this.position.top = e.top), this._isNumber(e.height) && (this.size.height = e.height), 
            this._isNumber(e.width) && (this.size.width = e.width);
        },
        _updateRatio: function(e) {
            var t = this.position, i = this.size, s = this.axis;
            return this._isNumber(e.height) ? e.width = e.height * this.aspectRatio : this._isNumber(e.width) && (e.height = e.width / this.aspectRatio), 
            "sw" === s && (e.left = t.left + (i.width - e.width), e.top = null), "nw" === s && (e.top = t.top + (i.height - e.height), 
            e.left = t.left + (i.width - e.width)), e;
        },
        _respectSize: function(e) {
            var t = this._vBoundaries, i = this.axis, s = this._isNumber(e.width) && t.maxWidth && t.maxWidth < e.width, n = this._isNumber(e.height) && t.maxHeight && t.maxHeight < e.height, a = this._isNumber(e.width) && t.minWidth && t.minWidth > e.width, o = this._isNumber(e.height) && t.minHeight && t.minHeight > e.height, r = this.originalPosition.left + this.originalSize.width, h = this.position.top + this.size.height, l = /sw|nw|w/.test(i), u = /nw|ne|n/.test(i);
            return a && (e.width = t.minWidth), o && (e.height = t.minHeight), s && (e.width = t.maxWidth), 
            n && (e.height = t.maxHeight), a && l && (e.left = r - t.minWidth), s && l && (e.left = r - t.maxWidth), 
            o && u && (e.top = h - t.minHeight), n && u && (e.top = h - t.maxHeight), e.width || e.height || e.left || !e.top ? e.width || e.height || e.top || !e.left || (e.left = null) : e.top = null, 
            e;
        },
        _getPaddingPlusBorderDimensions: function(e) {
            for (var t = 0, i = [], s = [ e.css("borderTopWidth"), e.css("borderRightWidth"), e.css("borderBottomWidth"), e.css("borderLeftWidth") ], n = [ e.css("paddingTop"), e.css("paddingRight"), e.css("paddingBottom"), e.css("paddingLeft") ]; 4 > t; t++) i[t] = parseInt(s[t], 10) || 0, 
            i[t] += parseInt(n[t], 10) || 0;
            return {
                height: i[0] + i[2],
                width: i[1] + i[3]
            };
        },
        _proportionallyResize: function() {
            if (this._proportionallyResizeElements.length) for (var e, t = 0, i = this.helper || this.element; this._proportionallyResizeElements.length > t; t++) e = this._proportionallyResizeElements[t], 
            this.outerDimensions || (this.outerDimensions = this._getPaddingPlusBorderDimensions(e)), 
            e.css({
                height: i.height() - this.outerDimensions.height || 0,
                width: i.width() - this.outerDimensions.width || 0
            });
        },
        _renderProxy: function() {
            var t = this.element, i = this.options;
            this.elementOffset = t.offset(), this._helper ? (this.helper = this.helper || e("<div style='overflow:hidden;'></div>"), 
            this.helper.addClass(this._helper).css({
                width: this.element.outerWidth() - 1,
                height: this.element.outerHeight() - 1,
                position: "absolute",
                left: this.elementOffset.left + "px",
                top: this.elementOffset.top + "px",
                zIndex: ++i.zIndex
            }), this.helper.appendTo("body").disableSelection()) : this.helper = this.element;
        },
        _change: {
            e: function(e, t) {
                return {
                    width: this.originalSize.width + t
                };
            },
            w: function(e, t) {
                var i = this.originalSize;
                return {
                    left: this.originalPosition.left + t,
                    width: i.width - t
                };
            },
            n: function(e, t, i) {
                var s = this.originalSize;
                return {
                    top: this.originalPosition.top + i,
                    height: s.height - i
                };
            },
            s: function(e, t, i) {
                return {
                    height: this.originalSize.height + i
                };
            },
            se: function(t, i, s) {
                return e.extend(this._change.s.apply(this, arguments), this._change.e.apply(this, [ t, i, s ]));
            },
            sw: function(t, i, s) {
                return e.extend(this._change.s.apply(this, arguments), this._change.w.apply(this, [ t, i, s ]));
            },
            ne: function(t, i, s) {
                return e.extend(this._change.n.apply(this, arguments), this._change.e.apply(this, [ t, i, s ]));
            },
            nw: function(t, i, s) {
                return e.extend(this._change.n.apply(this, arguments), this._change.w.apply(this, [ t, i, s ]));
            }
        },
        _propagate: function(t, i) {
            e.ui.plugin.call(this, t, [ i, this.ui() ]), "resize" !== t && this._trigger(t, i, this.ui());
        },
        plugins: {},
        ui: function() {
            return {
                originalElement: this.originalElement,
                element: this.element,
                helper: this.helper,
                position: this.position,
                size: this.size,
                originalSize: this.originalSize,
                originalPosition: this.originalPosition
            };
        }
    }), e.ui.plugin.add("resizable", "animate", {
        stop: function(t) {
            var i = e(this).resizable("instance"), s = i.options, n = i._proportionallyResizeElements, a = n.length && /textarea/i.test(n[0].nodeName), o = a && i._hasScroll(n[0], "left") ? 0 : i.sizeDiff.height, r = a ? 0 : i.sizeDiff.width, h = {
                width: i.size.width - r,
                height: i.size.height - o
            }, l = parseInt(i.element.css("left"), 10) + (i.position.left - i.originalPosition.left) || null, u = parseInt(i.element.css("top"), 10) + (i.position.top - i.originalPosition.top) || null;
            i.element.animate(e.extend(h, u && l ? {
                top: u,
                left: l
            } : {}), {
                duration: s.animateDuration,
                easing: s.animateEasing,
                step: function() {
                    var s = {
                        width: parseInt(i.element.css("width"), 10),
                        height: parseInt(i.element.css("height"), 10),
                        top: parseInt(i.element.css("top"), 10),
                        left: parseInt(i.element.css("left"), 10)
                    };
                    n && n.length && e(n[0]).css({
                        width: s.width,
                        height: s.height
                    }), i._updateCache(s), i._propagate("resize", t);
                }
            });
        }
    }), e.ui.plugin.add("resizable", "containment", {
        start: function() {
            var t, i, s, n, a, o, r, h = e(this).resizable("instance"), l = h.options, u = h.element, d = l.containment, c = d instanceof e ? d.get(0) : /parent/.test(d) ? u.parent().get(0) : d;
            c && (h.containerElement = e(c), /document/.test(d) || d === document ? (h.containerOffset = {
                left: 0,
                top: 0
            }, h.containerPosition = {
                left: 0,
                top: 0
            }, h.parentData = {
                element: e(document),
                left: 0,
                top: 0,
                width: e(document).width(),
                height: e(document).height() || document.body.parentNode.scrollHeight
            }) : (t = e(c), i = [], e([ "Top", "Right", "Left", "Bottom" ]).each(function(e, s) {
                i[e] = h._num(t.css("padding" + s));
            }), h.containerOffset = t.offset(), h.containerPosition = t.position(), h.containerSize = {
                height: t.innerHeight() - i[3],
                width: t.innerWidth() - i[1]
            }, s = h.containerOffset, n = h.containerSize.height, a = h.containerSize.width, 
            o = h._hasScroll(c, "left") ? c.scrollWidth : a, r = h._hasScroll(c) ? c.scrollHeight : n, 
            h.parentData = {
                element: c,
                left: s.left,
                top: s.top,
                width: o,
                height: r
            }));
        },
        resize: function(t) {
            var i, s, n, a, o = e(this).resizable("instance"), r = o.options, h = o.containerOffset, l = o.position, u = o._aspectRatio || t.shiftKey, d = {
                top: 0,
                left: 0
            }, c = o.containerElement, p = !0;
            c[0] !== document && /static/.test(c.css("position")) && (d = h), l.left < (o._helper ? h.left : 0) && (o.size.width = o.size.width + (o._helper ? o.position.left - h.left : o.position.left - d.left), 
            u && (o.size.height = o.size.width / o.aspectRatio, p = !1), o.position.left = r.helper ? h.left : 0), 
            l.top < (o._helper ? h.top : 0) && (o.size.height = o.size.height + (o._helper ? o.position.top - h.top : o.position.top), 
            u && (o.size.width = o.size.height * o.aspectRatio, p = !1), o.position.top = o._helper ? h.top : 0), 
            n = o.containerElement.get(0) === o.element.parent().get(0), a = /relative|absolute/.test(o.containerElement.css("position")), 
            n && a ? (o.offset.left = o.parentData.left + o.position.left, o.offset.top = o.parentData.top + o.position.top) : (o.offset.left = o.element.offset().left, 
            o.offset.top = o.element.offset().top), i = Math.abs(o.sizeDiff.width + (o._helper ? o.offset.left - d.left : o.offset.left - h.left)), 
            s = Math.abs(o.sizeDiff.height + (o._helper ? o.offset.top - d.top : o.offset.top - h.top)), 
            i + o.size.width >= o.parentData.width && (o.size.width = o.parentData.width - i, 
            u && (o.size.height = o.size.width / o.aspectRatio, p = !1)), s + o.size.height >= o.parentData.height && (o.size.height = o.parentData.height - s, 
            u && (o.size.width = o.size.height * o.aspectRatio, p = !1)), p || (o.position.left = o.prevPosition.left, 
            o.position.top = o.prevPosition.top, o.size.width = o.prevSize.width, o.size.height = o.prevSize.height);
        },
        stop: function() {
            var t = e(this).resizable("instance"), i = t.options, s = t.containerOffset, n = t.containerPosition, a = t.containerElement, o = e(t.helper), r = o.offset(), h = o.outerWidth() - t.sizeDiff.width, l = o.outerHeight() - t.sizeDiff.height;
            t._helper && !i.animate && /relative/.test(a.css("position")) && e(this).css({
                left: r.left - n.left - s.left,
                width: h,
                height: l
            }), t._helper && !i.animate && /static/.test(a.css("position")) && e(this).css({
                left: r.left - n.left - s.left,
                width: h,
                height: l
            });
        }
    }), e.ui.plugin.add("resizable", "alsoResize", {
        start: function() {
            var i = e(this).resizable("instance").options, s = function(t) {
                e(t).each(function() {
                    var t = e(this);
                    t.data("ui-resizable-alsoresize", {
                        width: parseInt(t.width(), 10),
                        height: parseInt(t.height(), 10),
                        left: parseInt(t.css("left"), 10),
                        top: parseInt(t.css("top"), 10)
                    });
                });
            };
            "object" != typeof i.alsoResize || i.alsoResize.parentNode ? s(i.alsoResize) : i.alsoResize.length ? (i.alsoResize = i.alsoResize[0], 
            s(i.alsoResize)) : e.each(i.alsoResize, function(e) {
                s(e);
            });
        },
        resize: function(t, i) {
            var s = e(this).resizable("instance"), n = s.options, a = s.originalSize, o = s.originalPosition, r = {
                height: s.size.height - a.height || 0,
                width: s.size.width - a.width || 0,
                top: s.position.top - o.top || 0,
                left: s.position.left - o.left || 0
            }, h = function(t, s) {
                e(t).each(function() {
                    var t = e(this), n = e(this).data("ui-resizable-alsoresize"), a = {}, o = s && s.length ? s : t.parents(i.originalElement[0]).length ? [ "width", "height" ] : [ "width", "height", "top", "left" ];
                    e.each(o, function(e, t) {
                        var i = (n[t] || 0) + (r[t] || 0);
                        i && i >= 0 && (a[t] = i || null);
                    }), t.css(a);
                });
            };
            "object" != typeof n.alsoResize || n.alsoResize.nodeType ? h(n.alsoResize) : e.each(n.alsoResize, function(e, t) {
                h(e, t);
            });
        },
        stop: function() {
            e(this).removeData("resizable-alsoresize");
        }
    }), e.ui.plugin.add("resizable", "ghost", {
        start: function() {
            var t = e(this).resizable("instance"), i = t.options, s = t.size;
            t.ghost = t.originalElement.clone(), t.ghost.css({
                opacity: .25,
                display: "block",
                position: "relative",
                height: s.height,
                width: s.width,
                margin: 0,
                left: 0,
                top: 0
            }).addClass("ui-resizable-ghost").addClass("string" == typeof i.ghost ? i.ghost : ""), 
            t.ghost.appendTo(t.helper);
        },
        resize: function() {
            var t = e(this).resizable("instance");
            t.ghost && t.ghost.css({
                position: "relative",
                height: t.size.height,
                width: t.size.width
            });
        },
        stop: function() {
            var t = e(this).resizable("instance");
            t.ghost && t.helper && t.helper.get(0).removeChild(t.ghost.get(0));
        }
    }), e.ui.plugin.add("resizable", "grid", {
        resize: function() {
            var t, i = e(this).resizable("instance"), s = i.options, n = i.size, a = i.originalSize, o = i.originalPosition, r = i.axis, h = "number" == typeof s.grid ? [ s.grid, s.grid ] : s.grid, l = h[0] || 1, u = h[1] || 1, d = Math.round((n.width - a.width) / l) * l, c = Math.round((n.height - a.height) / u) * u, p = a.width + d, f = a.height + c, m = s.maxWidth && p > s.maxWidth, g = s.maxHeight && f > s.maxHeight, v = s.minWidth && s.minWidth > p, y = s.minHeight && s.minHeight > f;
            s.grid = h, v && (p += l), y && (f += u), m && (p -= l), g && (f -= u), /^(se|s|e)$/.test(r) ? (i.size.width = p, 
            i.size.height = f) : /^(ne)$/.test(r) ? (i.size.width = p, i.size.height = f, i.position.top = o.top - c) : /^(sw)$/.test(r) ? (i.size.width = p, 
            i.size.height = f, i.position.left = o.left - d) : ((0 >= f - u || 0 >= p - l) && (t = i._getPaddingPlusBorderDimensions(this)), 
            f - u > 0 ? (i.size.height = f, i.position.top = o.top - c) : (f = u - t.height, 
            i.size.height = f, i.position.top = o.top + a.height - f), p - l > 0 ? (i.size.width = p, 
            i.position.left = o.left - d) : (p = u - t.height, i.size.width = p, i.position.left = o.left + a.width - p));
        }
    }), e.ui.resizable, e.widget("ui.selectable", e.ui.mouse, {
        version: "1.11.2",
        options: {
            appendTo: "body",
            autoRefresh: !0,
            distance: 0,
            filter: "*",
            tolerance: "touch",
            selected: null,
            selecting: null,
            start: null,
            stop: null,
            unselected: null,
            unselecting: null
        },
        _create: function() {
            var t, i = this;
            this.element.addClass("ui-selectable"), this.dragged = !1, this.refresh = function() {
                (t = e(i.options.filter, i.element[0])).addClass("ui-selectee"), t.each(function() {
                    var t = e(this), i = t.offset();
                    e.data(this, "selectable-item", {
                        element: this,
                        $element: t,
                        left: i.left,
                        top: i.top,
                        right: i.left + t.outerWidth(),
                        bottom: i.top + t.outerHeight(),
                        startselected: !1,
                        selected: t.hasClass("ui-selected"),
                        selecting: t.hasClass("ui-selecting"),
                        unselecting: t.hasClass("ui-unselecting")
                    });
                });
            }, this.refresh(), this.selectees = t.addClass("ui-selectee"), this._mouseInit(), 
            this.helper = e("<div class='ui-selectable-helper'></div>");
        },
        _destroy: function() {
            this.selectees.removeClass("ui-selectee").removeData("selectable-item"), this.element.removeClass("ui-selectable ui-selectable-disabled"), 
            this._mouseDestroy();
        },
        _mouseStart: function(t) {
            var i = this, s = this.options;
            this.opos = [ t.pageX, t.pageY ], this.options.disabled || (this.selectees = e(s.filter, this.element[0]), 
            this._trigger("start", t), e(s.appendTo).append(this.helper), this.helper.css({
                left: t.pageX,
                top: t.pageY,
                width: 0,
                height: 0
            }), s.autoRefresh && this.refresh(), this.selectees.filter(".ui-selected").each(function() {
                var s = e.data(this, "selectable-item");
                s.startselected = !0, t.metaKey || t.ctrlKey || (s.$element.removeClass("ui-selected"), 
                s.selected = !1, s.$element.addClass("ui-unselecting"), s.unselecting = !0, i._trigger("unselecting", t, {
                    unselecting: s.element
                }));
            }), e(t.target).parents().addBack().each(function() {
                var s, n = e.data(this, "selectable-item");
                return n ? (s = !t.metaKey && !t.ctrlKey || !n.$element.hasClass("ui-selected"), 
                n.$element.removeClass(s ? "ui-unselecting" : "ui-selected").addClass(s ? "ui-selecting" : "ui-unselecting"), 
                n.unselecting = !s, n.selecting = s, n.selected = s, s ? i._trigger("selecting", t, {
                    selecting: n.element
                }) : i._trigger("unselecting", t, {
                    unselecting: n.element
                }), !1) : void 0;
            }));
        },
        _mouseDrag: function(t) {
            if (this.dragged = !0, !this.options.disabled) {
                var i, s = this, n = this.options, a = this.opos[0], o = this.opos[1], r = t.pageX, h = t.pageY;
                return a > r && (i = r, r = a, a = i), o > h && (i = h, h = o, o = i), this.helper.css({
                    left: a,
                    top: o,
                    width: r - a,
                    height: h - o
                }), this.selectees.each(function() {
                    var i = e.data(this, "selectable-item"), l = !1;
                    i && i.element !== s.element[0] && ("touch" === n.tolerance ? l = !(i.left > r || a > i.right || i.top > h || o > i.bottom) : "fit" === n.tolerance && (l = i.left > a && r > i.right && i.top > o && h > i.bottom), 
                    l ? (i.selected && (i.$element.removeClass("ui-selected"), i.selected = !1), i.unselecting && (i.$element.removeClass("ui-unselecting"), 
                    i.unselecting = !1), i.selecting || (i.$element.addClass("ui-selecting"), i.selecting = !0, 
                    s._trigger("selecting", t, {
                        selecting: i.element
                    }))) : (i.selecting && ((t.metaKey || t.ctrlKey) && i.startselected ? (i.$element.removeClass("ui-selecting"), 
                    i.selecting = !1, i.$element.addClass("ui-selected"), i.selected = !0) : (i.$element.removeClass("ui-selecting"), 
                    i.selecting = !1, i.startselected && (i.$element.addClass("ui-unselecting"), i.unselecting = !0), 
                    s._trigger("unselecting", t, {
                        unselecting: i.element
                    }))), i.selected && (t.metaKey || t.ctrlKey || i.startselected || (i.$element.removeClass("ui-selected"), 
                    i.selected = !1, i.$element.addClass("ui-unselecting"), i.unselecting = !0, s._trigger("unselecting", t, {
                        unselecting: i.element
                    })))));
                }), !1;
            }
        },
        _mouseStop: function(t) {
            var i = this;
            return this.dragged = !1, e(".ui-unselecting", this.element[0]).each(function() {
                var s = e.data(this, "selectable-item");
                s.$element.removeClass("ui-unselecting"), s.unselecting = !1, s.startselected = !1, 
                i._trigger("unselected", t, {
                    unselected: s.element
                });
            }), e(".ui-selecting", this.element[0]).each(function() {
                var s = e.data(this, "selectable-item");
                s.$element.removeClass("ui-selecting").addClass("ui-selected"), s.selecting = !1, 
                s.selected = !0, s.startselected = !0, i._trigger("selected", t, {
                    selected: s.element
                });
            }), this._trigger("stop", t), this.helper.remove(), !1;
        }
    }), e.widget("ui.sortable", e.ui.mouse, {
        version: "1.11.2",
        widgetEventPrefix: "sort",
        ready: !1,
        options: {
            appendTo: "parent",
            axis: !1,
            connectWith: !1,
            containment: !1,
            cursor: "auto",
            cursorAt: !1,
            dropOnEmpty: !0,
            forcePlaceholderSize: !1,
            forceHelperSize: !1,
            grid: !1,
            handle: !1,
            helper: "original",
            items: "> *",
            opacity: !1,
            placeholder: !1,
            revert: !1,
            scroll: !0,
            scrollSensitivity: 20,
            scrollSpeed: 20,
            scope: "default",
            tolerance: "intersect",
            zIndex: 1e3,
            activate: null,
            beforeStop: null,
            change: null,
            deactivate: null,
            out: null,
            over: null,
            receive: null,
            remove: null,
            sort: null,
            start: null,
            stop: null,
            update: null
        },
        _isOverAxis: function(e, t, i) {
            return e >= t && t + i > e;
        },
        _isFloating: function(e) {
            return /left|right/.test(e.css("float")) || /inline|table-cell/.test(e.css("display"));
        },
        _create: function() {
            var e = this.options;
            this.containerCache = {}, this.element.addClass("ui-sortable"), this.refresh(), 
            this.floating = !!this.items.length && ("x" === e.axis || this._isFloating(this.items[0].item)), 
            this.offset = this.element.offset(), this._mouseInit(), this._setHandleClassName(), 
            this.ready = !0;
        },
        _setOption: function(e, t) {
            this._super(e, t), "handle" === e && this._setHandleClassName();
        },
        _setHandleClassName: function() {
            this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"), e.each(this.items, function() {
                (this.instance.options.handle ? this.item.find(this.instance.options.handle) : this.item).addClass("ui-sortable-handle");
            });
        },
        _destroy: function() {
            this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"), 
            this._mouseDestroy();
            for (var e = this.items.length - 1; e >= 0; e--) this.items[e].item.removeData(this.widgetName + "-item");
            return this;
        },
        _mouseCapture: function(t, i) {
            var s = null, n = !1, a = this;
            return !this.reverting && (!this.options.disabled && "static" !== this.options.type && (this._refreshItems(t), 
            e(t.target).parents().each(function() {
                return e.data(this, a.widgetName + "-item") === a ? (s = e(this), !1) : void 0;
            }), e.data(t.target, a.widgetName + "-item") === a && (s = e(t.target)), !!s && (!(this.options.handle && !i && (e(this.options.handle, s).find("*").addBack().each(function() {
                this === t.target && (n = !0);
            }), !n)) && (this.currentItem = s, this._removeCurrentsFromItems(), !0))));
        },
        _mouseStart: function(t, i, s) {
            var n, a, o = this.options;
            if (this.currentContainer = this, this.refreshPositions(), this.helper = this._createHelper(t), 
            this._cacheHelperProportions(), this._cacheMargins(), this.scrollParent = this.helper.scrollParent(), 
            this.offset = this.currentItem.offset(), this.offset = {
                top: this.offset.top - this.margins.top,
                left: this.offset.left - this.margins.left
            }, e.extend(this.offset, {
                click: {
                    left: t.pageX - this.offset.left,
                    top: t.pageY - this.offset.top
                },
                parent: this._getParentOffset(),
                relative: this._getRelativeOffset()
            }), this.helper.css("position", "absolute"), this.cssPosition = this.helper.css("position"), 
            this.originalPosition = this._generatePosition(t), this.originalPageX = t.pageX, 
            this.originalPageY = t.pageY, o.cursorAt && this._adjustOffsetFromHelper(o.cursorAt), 
            this.domPosition = {
                prev: this.currentItem.prev()[0],
                parent: this.currentItem.parent()[0]
            }, this.helper[0] !== this.currentItem[0] && this.currentItem.hide(), this._createPlaceholder(), 
            o.containment && this._setContainment(), o.cursor && "auto" !== o.cursor && (a = this.document.find("body"), 
            this.storedCursor = a.css("cursor"), a.css("cursor", o.cursor), this.storedStylesheet = e("<style>*{ cursor: " + o.cursor + " !important; }</style>").appendTo(a)), 
            o.opacity && (this.helper.css("opacity") && (this._storedOpacity = this.helper.css("opacity")), 
            this.helper.css("opacity", o.opacity)), o.zIndex && (this.helper.css("zIndex") && (this._storedZIndex = this.helper.css("zIndex")), 
            this.helper.css("zIndex", o.zIndex)), this.scrollParent[0] !== document && "HTML" !== this.scrollParent[0].tagName && (this.overflowOffset = this.scrollParent.offset()), 
            this._trigger("start", t, this._uiHash()), this._preserveHelperProportions || this._cacheHelperProportions(), 
            !s) for (n = this.containers.length - 1; n >= 0; n--) this.containers[n]._trigger("activate", t, this._uiHash(this));
            return e.ui.ddmanager && (e.ui.ddmanager.current = this), e.ui.ddmanager && !o.dropBehaviour && e.ui.ddmanager.prepareOffsets(this, t), 
            this.dragging = !0, this.helper.addClass("ui-sortable-helper"), this._mouseDrag(t), 
            !0;
        },
        _mouseDrag: function(t) {
            var i, s, n, a, o = this.options, r = !1;
            for (this.position = this._generatePosition(t), this.positionAbs = this._convertPositionTo("absolute"), 
            this.lastPositionAbs || (this.lastPositionAbs = this.positionAbs), this.options.scroll && (this.scrollParent[0] !== document && "HTML" !== this.scrollParent[0].tagName ? (this.overflowOffset.top + this.scrollParent[0].offsetHeight - t.pageY < o.scrollSensitivity ? this.scrollParent[0].scrollTop = r = this.scrollParent[0].scrollTop + o.scrollSpeed : t.pageY - this.overflowOffset.top < o.scrollSensitivity && (this.scrollParent[0].scrollTop = r = this.scrollParent[0].scrollTop - o.scrollSpeed), 
            this.overflowOffset.left + this.scrollParent[0].offsetWidth - t.pageX < o.scrollSensitivity ? this.scrollParent[0].scrollLeft = r = this.scrollParent[0].scrollLeft + o.scrollSpeed : t.pageX - this.overflowOffset.left < o.scrollSensitivity && (this.scrollParent[0].scrollLeft = r = this.scrollParent[0].scrollLeft - o.scrollSpeed)) : (t.pageY - e(document).scrollTop() < o.scrollSensitivity ? r = e(document).scrollTop(e(document).scrollTop() - o.scrollSpeed) : e(window).height() - (t.pageY - e(document).scrollTop()) < o.scrollSensitivity && (r = e(document).scrollTop(e(document).scrollTop() + o.scrollSpeed)), 
            t.pageX - e(document).scrollLeft() < o.scrollSensitivity ? r = e(document).scrollLeft(e(document).scrollLeft() - o.scrollSpeed) : e(window).width() - (t.pageX - e(document).scrollLeft()) < o.scrollSensitivity && (r = e(document).scrollLeft(e(document).scrollLeft() + o.scrollSpeed))), 
            !1 !== r && e.ui.ddmanager && !o.dropBehaviour && e.ui.ddmanager.prepareOffsets(this, t)), 
            this.positionAbs = this._convertPositionTo("absolute"), this.options.axis && "y" === this.options.axis || (this.helper[0].style.left = this.position.left + "px"), 
            this.options.axis && "x" === this.options.axis || (this.helper[0].style.top = this.position.top + "px"), 
            i = this.items.length - 1; i >= 0; i--) if (s = this.items[i], n = s.item[0], (a = this._intersectsWithPointer(s)) && s.instance === this.currentContainer && n !== this.currentItem[0] && this.placeholder[1 === a ? "next" : "prev"]()[0] !== n && !e.contains(this.placeholder[0], n) && ("semi-dynamic" !== this.options.type || !e.contains(this.element[0], n))) {
                if (this.direction = 1 === a ? "down" : "up", "pointer" !== this.options.tolerance && !this._intersectsWithSides(s)) break;
                this._rearrange(t, s), this._trigger("change", t, this._uiHash());
                break;
            }
            return this._contactContainers(t), e.ui.ddmanager && e.ui.ddmanager.drag(this, t), 
            this._trigger("sort", t, this._uiHash()), this.lastPositionAbs = this.positionAbs, 
            !1;
        },
        _mouseStop: function(t, i) {
            if (t) {
                if (e.ui.ddmanager && !this.options.dropBehaviour && e.ui.ddmanager.drop(this, t), 
                this.options.revert) {
                    var s = this, n = this.placeholder.offset(), a = this.options.axis, o = {};
                    a && "x" !== a || (o.left = n.left - this.offset.parent.left - this.margins.left + (this.offsetParent[0] === document.body ? 0 : this.offsetParent[0].scrollLeft)), 
                    a && "y" !== a || (o.top = n.top - this.offset.parent.top - this.margins.top + (this.offsetParent[0] === document.body ? 0 : this.offsetParent[0].scrollTop)), 
                    this.reverting = !0, e(this.helper).animate(o, parseInt(this.options.revert, 10) || 500, function() {
                        s._clear(t);
                    });
                } else this._clear(t, i);
                return !1;
            }
        },
        cancel: function() {
            if (this.dragging) {
                this._mouseUp({
                    target: null
                }), "original" === this.options.helper ? this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper") : this.currentItem.show();
                for (var t = this.containers.length - 1; t >= 0; t--) this.containers[t]._trigger("deactivate", null, this._uiHash(this)), 
                this.containers[t].containerCache.over && (this.containers[t]._trigger("out", null, this._uiHash(this)), 
                this.containers[t].containerCache.over = 0);
            }
            return this.placeholder && (this.placeholder[0].parentNode && this.placeholder[0].parentNode.removeChild(this.placeholder[0]), 
            "original" !== this.options.helper && this.helper && this.helper[0].parentNode && this.helper.remove(), 
            e.extend(this, {
                helper: null,
                dragging: !1,
                reverting: !1,
                _noFinalSort: null
            }), this.domPosition.prev ? e(this.domPosition.prev).after(this.currentItem) : e(this.domPosition.parent).prepend(this.currentItem)), 
            this;
        },
        serialize: function(t) {
            var i = this._getItemsAsjQuery(t && t.connected), s = [];
            return t = t || {}, e(i).each(function() {
                var i = (e(t.item || this).attr(t.attribute || "id") || "").match(t.expression || /(.+)[\-=_](.+)/);
                i && s.push((t.key || i[1] + "[]") + "=" + (t.key && t.expression ? i[1] : i[2]));
            }), !s.length && t.key && s.push(t.key + "="), s.join("&");
        },
        toArray: function(t) {
            var i = this._getItemsAsjQuery(t && t.connected), s = [];
            return t = t || {}, i.each(function() {
                s.push(e(t.item || this).attr(t.attribute || "id") || "");
            }), s;
        },
        _intersectsWith: function(e) {
            var t = this.positionAbs.left, i = t + this.helperProportions.width, s = this.positionAbs.top, n = s + this.helperProportions.height, a = e.left, o = a + e.width, r = e.top, h = r + e.height, l = this.offset.click.top, u = this.offset.click.left, d = "x" === this.options.axis || s + l > r && h > s + l, c = "y" === this.options.axis || t + u > a && o > t + u, p = d && c;
            return "pointer" === this.options.tolerance || this.options.forcePointerForContainers || "pointer" !== this.options.tolerance && this.helperProportions[this.floating ? "width" : "height"] > e[this.floating ? "width" : "height"] ? p : t + this.helperProportions.width / 2 > a && o > i - this.helperProportions.width / 2 && s + this.helperProportions.height / 2 > r && h > n - this.helperProportions.height / 2;
        },
        _intersectsWithPointer: function(e) {
            var t = "x" === this.options.axis || this._isOverAxis(this.positionAbs.top + this.offset.click.top, e.top, e.height), i = "y" === this.options.axis || this._isOverAxis(this.positionAbs.left + this.offset.click.left, e.left, e.width), s = t && i, n = this._getDragVerticalDirection(), a = this._getDragHorizontalDirection();
            return !!s && (this.floating ? a && "right" === a || "down" === n ? 2 : 1 : n && ("down" === n ? 2 : 1));
        },
        _intersectsWithSides: function(e) {
            var t = this._isOverAxis(this.positionAbs.top + this.offset.click.top, e.top + e.height / 2, e.height), i = this._isOverAxis(this.positionAbs.left + this.offset.click.left, e.left + e.width / 2, e.width), s = this._getDragVerticalDirection(), n = this._getDragHorizontalDirection();
            return this.floating && n ? "right" === n && i || "left" === n && !i : s && ("down" === s && t || "up" === s && !t);
        },
        _getDragVerticalDirection: function() {
            var e = this.positionAbs.top - this.lastPositionAbs.top;
            return 0 !== e && (e > 0 ? "down" : "up");
        },
        _getDragHorizontalDirection: function() {
            var e = this.positionAbs.left - this.lastPositionAbs.left;
            return 0 !== e && (e > 0 ? "right" : "left");
        },
        refresh: function(e) {
            return this._refreshItems(e), this._setHandleClassName(), this.refreshPositions(), 
            this;
        },
        _connectWith: function() {
            var e = this.options;
            return e.connectWith.constructor === String ? [ e.connectWith ] : e.connectWith;
        },
        _getItemsAsjQuery: function(t) {
            var s, n, a, o, r = [], h = [], l = this._connectWith();
            if (l && t) for (s = l.length - 1; s >= 0; s--) for (a = e(l[s]), n = a.length - 1; n >= 0; n--) (o = e.data(a[n], this.widgetFullName)) && o !== this && !o.options.disabled && h.push([ e.isFunction(o.options.items) ? o.options.items.call(o.element) : e(o.options.items, o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), o ]);
            for (h.push([ e.isFunction(this.options.items) ? this.options.items.call(this.element, null, {
                options: this.options,
                item: this.currentItem
            }) : e(this.options.items, this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), this ]), 
            s = h.length - 1; s >= 0; s--) h[s][0].each(function() {
                r.push(this);
            });
            return e(r);
        },
        _removeCurrentsFromItems: function() {
            var t = this.currentItem.find(":data(" + this.widgetName + "-item)");
            this.items = e.grep(this.items, function(e) {
                for (var i = 0; t.length > i; i++) if (t[i] === e.item[0]) return !1;
                return !0;
            });
        },
        _refreshItems: function(t) {
            this.items = [], this.containers = [ this ];
            var i, s, n, a, o, r, h, l, u = this.items, d = [ [ e.isFunction(this.options.items) ? this.options.items.call(this.element[0], t, {
                item: this.currentItem
            }) : e(this.options.items, this.element), this ] ], c = this._connectWith();
            if (c && this.ready) for (i = c.length - 1; i >= 0; i--) for (n = e(c[i]), s = n.length - 1; s >= 0; s--) (a = e.data(n[s], this.widgetFullName)) && a !== this && !a.options.disabled && (d.push([ e.isFunction(a.options.items) ? a.options.items.call(a.element[0], t, {
                item: this.currentItem
            }) : e(a.options.items, a.element), a ]), this.containers.push(a));
            for (i = d.length - 1; i >= 0; i--) for (o = d[i][1], r = d[i][0], s = 0, l = r.length; l > s; s++) (h = e(r[s])).data(this.widgetName + "-item", o), 
            u.push({
                item: h,
                instance: o,
                width: 0,
                height: 0,
                left: 0,
                top: 0
            });
        },
        refreshPositions: function(t) {
            this.offsetParent && this.helper && (this.offset.parent = this._getParentOffset());
            var i, s, n, a;
            for (i = this.items.length - 1; i >= 0; i--) (s = this.items[i]).instance !== this.currentContainer && this.currentContainer && s.item[0] !== this.currentItem[0] || (n = this.options.toleranceElement ? e(this.options.toleranceElement, s.item) : s.item, 
            t || (s.width = n.outerWidth(), s.height = n.outerHeight()), a = n.offset(), s.left = a.left, 
            s.top = a.top);
            if (this.options.custom && this.options.custom.refreshContainers) this.options.custom.refreshContainers.call(this); else for (i = this.containers.length - 1; i >= 0; i--) a = this.containers[i].element.offset(), 
            this.containers[i].containerCache.left = a.left, this.containers[i].containerCache.top = a.top, 
            this.containers[i].containerCache.width = this.containers[i].element.outerWidth(), 
            this.containers[i].containerCache.height = this.containers[i].element.outerHeight();
            return this;
        },
        _createPlaceholder: function(t) {
            var i, s = (t = t || this).options;
            s.placeholder && s.placeholder.constructor !== String || (i = s.placeholder, s.placeholder = {
                element: function() {
                    var s = t.currentItem[0].nodeName.toLowerCase(), n = e("<" + s + ">", t.document[0]).addClass(i || t.currentItem[0].className + " ui-sortable-placeholder").removeClass("ui-sortable-helper");
                    return "tr" === s ? t.currentItem.children().each(function() {
                        e("<td>&#160;</td>", t.document[0]).attr("colspan", e(this).attr("colspan") || 1).appendTo(n);
                    }) : "img" === s && n.attr("src", t.currentItem.attr("src")), i || n.css("visibility", "hidden"), 
                    n;
                },
                update: function(e, n) {
                    (!i || s.forcePlaceholderSize) && (n.height() || n.height(t.currentItem.innerHeight() - parseInt(t.currentItem.css("paddingTop") || 0, 10) - parseInt(t.currentItem.css("paddingBottom") || 0, 10)), 
                    n.width() || n.width(t.currentItem.innerWidth() - parseInt(t.currentItem.css("paddingLeft") || 0, 10) - parseInt(t.currentItem.css("paddingRight") || 0, 10)));
                }
            }), t.placeholder = e(s.placeholder.element.call(t.element, t.currentItem)), t.currentItem.after(t.placeholder), 
            s.placeholder.update(t, t.placeholder);
        },
        _contactContainers: function(t) {
            var i, s, n, a, o, r, h, l, u, d, c = null, p = null;
            for (i = this.containers.length - 1; i >= 0; i--) if (!e.contains(this.currentItem[0], this.containers[i].element[0])) if (this._intersectsWith(this.containers[i].containerCache)) {
                if (c && e.contains(this.containers[i].element[0], c.element[0])) continue;
                c = this.containers[i], p = i;
            } else this.containers[i].containerCache.over && (this.containers[i]._trigger("out", t, this._uiHash(this)), 
            this.containers[i].containerCache.over = 0);
            if (c) if (1 === this.containers.length) this.containers[p].containerCache.over || (this.containers[p]._trigger("over", t, this._uiHash(this)), 
            this.containers[p].containerCache.over = 1); else {
                for (n = 1e4, a = null, o = (u = c.floating || this._isFloating(this.currentItem)) ? "left" : "top", 
                r = u ? "width" : "height", d = u ? "clientX" : "clientY", s = this.items.length - 1; s >= 0; s--) e.contains(this.containers[p].element[0], this.items[s].item[0]) && this.items[s].item[0] !== this.currentItem[0] && (h = this.items[s].item.offset()[o], 
                l = !1, t[d] - h > this.items[s][r] / 2 && (l = !0), n > Math.abs(t[d] - h) && (n = Math.abs(t[d] - h), 
                a = this.items[s], this.direction = l ? "up" : "down"));
                if (!a && !this.options.dropOnEmpty) return;
                if (this.currentContainer === this.containers[p]) return void (this.currentContainer.containerCache.over || (this.containers[p]._trigger("over", t, this._uiHash()), 
                this.currentContainer.containerCache.over = 1));
                a ? this._rearrange(t, a, null, !0) : this._rearrange(t, null, this.containers[p].element, !0), 
                this._trigger("change", t, this._uiHash()), this.containers[p]._trigger("change", t, this._uiHash(this)), 
                this.currentContainer = this.containers[p], this.options.placeholder.update(this.currentContainer, this.placeholder), 
                this.containers[p]._trigger("over", t, this._uiHash(this)), this.containers[p].containerCache.over = 1;
            }
        },
        _createHelper: function(t) {
            var i = this.options, s = e.isFunction(i.helper) ? e(i.helper.apply(this.element[0], [ t, this.currentItem ])) : "clone" === i.helper ? this.currentItem.clone() : this.currentItem;
            return s.parents("body").length || e("parent" !== i.appendTo ? i.appendTo : this.currentItem[0].parentNode)[0].appendChild(s[0]), 
            s[0] === this.currentItem[0] && (this._storedCSS = {
                width: this.currentItem[0].style.width,
                height: this.currentItem[0].style.height,
                position: this.currentItem.css("position"),
                top: this.currentItem.css("top"),
                left: this.currentItem.css("left")
            }), (!s[0].style.width || i.forceHelperSize) && s.width(this.currentItem.width()), 
            (!s[0].style.height || i.forceHelperSize) && s.height(this.currentItem.height()), 
            s;
        },
        _adjustOffsetFromHelper: function(t) {
            "string" == typeof t && (t = t.split(" ")), e.isArray(t) && (t = {
                left: +t[0],
                top: +t[1] || 0
            }), "left" in t && (this.offset.click.left = t.left + this.margins.left), "right" in t && (this.offset.click.left = this.helperProportions.width - t.right + this.margins.left), 
            "top" in t && (this.offset.click.top = t.top + this.margins.top), "bottom" in t && (this.offset.click.top = this.helperProportions.height - t.bottom + this.margins.top);
        },
        _getParentOffset: function() {
            this.offsetParent = this.helper.offsetParent();
            var t = this.offsetParent.offset();
            return "absolute" === this.cssPosition && this.scrollParent[0] !== document && e.contains(this.scrollParent[0], this.offsetParent[0]) && (t.left += this.scrollParent.scrollLeft(), 
            t.top += this.scrollParent.scrollTop()), (this.offsetParent[0] === document.body || this.offsetParent[0].tagName && "html" === this.offsetParent[0].tagName.toLowerCase() && e.ui.ie) && (t = {
                top: 0,
                left: 0
            }), {
                top: t.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0),
                left: t.left + (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0)
            };
        },
        _getRelativeOffset: function() {
            if ("relative" === this.cssPosition) {
                var e = this.currentItem.position();
                return {
                    top: e.top - (parseInt(this.helper.css("top"), 10) || 0) + this.scrollParent.scrollTop(),
                    left: e.left - (parseInt(this.helper.css("left"), 10) || 0) + this.scrollParent.scrollLeft()
                };
            }
            return {
                top: 0,
                left: 0
            };
        },
        _cacheMargins: function() {
            this.margins = {
                left: parseInt(this.currentItem.css("marginLeft"), 10) || 0,
                top: parseInt(this.currentItem.css("marginTop"), 10) || 0
            };
        },
        _cacheHelperProportions: function() {
            this.helperProportions = {
                width: this.helper.outerWidth(),
                height: this.helper.outerHeight()
            };
        },
        _setContainment: function() {
            var t, i, s, n = this.options;
            "parent" === n.containment && (n.containment = this.helper[0].parentNode), ("document" === n.containment || "window" === n.containment) && (this.containment = [ 0 - this.offset.relative.left - this.offset.parent.left, 0 - this.offset.relative.top - this.offset.parent.top, e("document" === n.containment ? document : window).width() - this.helperProportions.width - this.margins.left, (e("document" === n.containment ? document : window).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top ]), 
            /^(document|window|parent)$/.test(n.containment) || (t = e(n.containment)[0], i = e(n.containment).offset(), 
            s = "hidden" !== e(t).css("overflow"), this.containment = [ i.left + (parseInt(e(t).css("borderLeftWidth"), 10) || 0) + (parseInt(e(t).css("paddingLeft"), 10) || 0) - this.margins.left, i.top + (parseInt(e(t).css("borderTopWidth"), 10) || 0) + (parseInt(e(t).css("paddingTop"), 10) || 0) - this.margins.top, i.left + (s ? Math.max(t.scrollWidth, t.offsetWidth) : t.offsetWidth) - (parseInt(e(t).css("borderLeftWidth"), 10) || 0) - (parseInt(e(t).css("paddingRight"), 10) || 0) - this.helperProportions.width - this.margins.left, i.top + (s ? Math.max(t.scrollHeight, t.offsetHeight) : t.offsetHeight) - (parseInt(e(t).css("borderTopWidth"), 10) || 0) - (parseInt(e(t).css("paddingBottom"), 10) || 0) - this.helperProportions.height - this.margins.top ]);
        },
        _convertPositionTo: function(t, i) {
            i || (i = this.position);
            var s = "absolute" === t ? 1 : -1, n = "absolute" !== this.cssPosition || this.scrollParent[0] !== document && e.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent : this.offsetParent, a = /(html|body)/i.test(n[0].tagName);
            return {
                top: i.top + this.offset.relative.top * s + this.offset.parent.top * s - ("fixed" === this.cssPosition ? -this.scrollParent.scrollTop() : a ? 0 : n.scrollTop()) * s,
                left: i.left + this.offset.relative.left * s + this.offset.parent.left * s - ("fixed" === this.cssPosition ? -this.scrollParent.scrollLeft() : a ? 0 : n.scrollLeft()) * s
            };
        },
        _generatePosition: function(t) {
            var i, s, n = this.options, a = t.pageX, o = t.pageY, r = "absolute" !== this.cssPosition || this.scrollParent[0] !== document && e.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent : this.offsetParent, h = /(html|body)/i.test(r[0].tagName);
            return "relative" !== this.cssPosition || this.scrollParent[0] !== document && this.scrollParent[0] !== this.offsetParent[0] || (this.offset.relative = this._getRelativeOffset()), 
            this.originalPosition && (this.containment && (t.pageX - this.offset.click.left < this.containment[0] && (a = this.containment[0] + this.offset.click.left), 
            t.pageY - this.offset.click.top < this.containment[1] && (o = this.containment[1] + this.offset.click.top), 
            t.pageX - this.offset.click.left > this.containment[2] && (a = this.containment[2] + this.offset.click.left), 
            t.pageY - this.offset.click.top > this.containment[3] && (o = this.containment[3] + this.offset.click.top)), 
            n.grid && (i = this.originalPageY + Math.round((o - this.originalPageY) / n.grid[1]) * n.grid[1], 
            o = this.containment ? i - this.offset.click.top >= this.containment[1] && i - this.offset.click.top <= this.containment[3] ? i : i - this.offset.click.top >= this.containment[1] ? i - n.grid[1] : i + n.grid[1] : i, 
            s = this.originalPageX + Math.round((a - this.originalPageX) / n.grid[0]) * n.grid[0], 
            a = this.containment ? s - this.offset.click.left >= this.containment[0] && s - this.offset.click.left <= this.containment[2] ? s : s - this.offset.click.left >= this.containment[0] ? s - n.grid[0] : s + n.grid[0] : s)), 
            {
                top: o - this.offset.click.top - this.offset.relative.top - this.offset.parent.top + ("fixed" === this.cssPosition ? -this.scrollParent.scrollTop() : h ? 0 : r.scrollTop()),
                left: a - this.offset.click.left - this.offset.relative.left - this.offset.parent.left + ("fixed" === this.cssPosition ? -this.scrollParent.scrollLeft() : h ? 0 : r.scrollLeft())
            };
        },
        _rearrange: function(e, t, i, s) {
            i ? i[0].appendChild(this.placeholder[0]) : t.item[0].parentNode.insertBefore(this.placeholder[0], "down" === this.direction ? t.item[0] : t.item[0].nextSibling), 
            this.counter = this.counter ? ++this.counter : 1;
            var n = this.counter;
            this._delay(function() {
                n === this.counter && this.refreshPositions(!s);
            });
        },
        _clear: function(e, t) {
            function i(e, t, i) {
                return function(s) {
                    i._trigger(e, s, t._uiHash(t));
                };
            }
            this.reverting = !1;
            var s, n = [];
            if (!this._noFinalSort && this.currentItem.parent().length && this.placeholder.before(this.currentItem), 
            this._noFinalSort = null, this.helper[0] === this.currentItem[0]) {
                for (s in this._storedCSS) ("auto" === this._storedCSS[s] || "static" === this._storedCSS[s]) && (this._storedCSS[s] = "");
                this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper");
            } else this.currentItem.show();
            for (this.fromOutside && !t && n.push(function(e) {
                this._trigger("receive", e, this._uiHash(this.fromOutside));
            }), !this.fromOutside && this.domPosition.prev === this.currentItem.prev().not(".ui-sortable-helper")[0] && this.domPosition.parent === this.currentItem.parent()[0] || t || n.push(function(e) {
                this._trigger("update", e, this._uiHash());
            }), this !== this.currentContainer && (t || (n.push(function(e) {
                this._trigger("remove", e, this._uiHash());
            }), n.push(function(e) {
                return function(t) {
                    e._trigger("receive", t, this._uiHash(this));
                };
            }.call(this, this.currentContainer)), n.push(function(e) {
                return function(t) {
                    e._trigger("update", t, this._uiHash(this));
                };
            }.call(this, this.currentContainer)))), s = this.containers.length - 1; s >= 0; s--) t || n.push(i("deactivate", this, this.containers[s])), 
            this.containers[s].containerCache.over && (n.push(i("out", this, this.containers[s])), 
            this.containers[s].containerCache.over = 0);
            if (this.storedCursor && (this.document.find("body").css("cursor", this.storedCursor), 
            this.storedStylesheet.remove()), this._storedOpacity && this.helper.css("opacity", this._storedOpacity), 
            this._storedZIndex && this.helper.css("zIndex", "auto" === this._storedZIndex ? "" : this._storedZIndex), 
            this.dragging = !1, t || this._trigger("beforeStop", e, this._uiHash()), this.placeholder[0].parentNode.removeChild(this.placeholder[0]), 
            this.cancelHelperRemoval || (this.helper[0] !== this.currentItem[0] && this.helper.remove(), 
            this.helper = null), !t) {
                for (s = 0; n.length > s; s++) n[s].call(this, e);
                this._trigger("stop", e, this._uiHash());
            }
            return this.fromOutside = !1, !this.cancelHelperRemoval;
        },
        _trigger: function() {
            !1 === e.Widget.prototype._trigger.apply(this, arguments) && this.cancel();
        },
        _uiHash: function(t) {
            var i = t || this;
            return {
                helper: i.helper,
                placeholder: i.placeholder || e([]),
                position: i.position,
                originalPosition: i.originalPosition,
                offset: i.positionAbs,
                item: i.currentItem,
                sender: t ? t.element : null
            };
        }
    });
    var o = "ui-effects-", r = e;
    e.effects = {
        effect: {}
    }, function(e, t) {
        function i(e, t, i) {
            var s = d[t.type] || {};
            return null == e ? i || !t.def ? null : t.def : (e = s.floor ? ~~e : parseFloat(e), 
            isNaN(e) ? t.def : s.mod ? (e + s.mod) % s.mod : 0 > e ? 0 : e > s.max ? s.max : e);
        }
        function s(i) {
            var s = l(), n = s._rgba = [];
            return i = i.toLowerCase(), f(h, function(e, a) {
                var o, r = a.re.exec(i), h = r && a.parse(r), l = a.space || "rgba";
                return h ? (o = s[l](h), s[u[l].cache] = o[u[l].cache], n = s._rgba = o._rgba, !1) : t;
            }), n.length ? ("0,0,0,0" === n.join() && e.extend(n, a.transparent), s) : a[i];
        }
        function n(e, t, i) {
            return 1 > 6 * (i = (i + 1) % 1) ? e + 6 * (t - e) * i : 1 > 2 * i ? t : 2 > 3 * i ? e + 6 * (t - e) * (2 / 3 - i) : e;
        }
        var a, r = /^([\-+])=\s*(\d+\.?\d*)/, h = [ {
            re: /rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
            parse: function(e) {
                return [ e[1], e[2], e[3], e[4] ];
            }
        }, {
            re: /rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
            parse: function(e) {
                return [ 2.55 * e[1], 2.55 * e[2], 2.55 * e[3], e[4] ];
            }
        }, {
            re: /#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,
            parse: function(e) {
                return [ parseInt(e[1], 16), parseInt(e[2], 16), parseInt(e[3], 16) ];
            }
        }, {
            re: /#([a-f0-9])([a-f0-9])([a-f0-9])/,
            parse: function(e) {
                return [ parseInt(e[1] + e[1], 16), parseInt(e[2] + e[2], 16), parseInt(e[3] + e[3], 16) ];
            }
        }, {
            re: /hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
            space: "hsla",
            parse: function(e) {
                return [ e[1], e[2] / 100, e[3] / 100, e[4] ];
            }
        } ], l = e.Color = function(t, i, s, n) {
            return new e.Color.fn.parse(t, i, s, n);
        }, u = {
            rgba: {
                props: {
                    red: {
                        idx: 0,
                        type: "byte"
                    },
                    green: {
                        idx: 1,
                        type: "byte"
                    },
                    blue: {
                        idx: 2,
                        type: "byte"
                    }
                }
            },
            hsla: {
                props: {
                    hue: {
                        idx: 0,
                        type: "degrees"
                    },
                    saturation: {
                        idx: 1,
                        type: "percent"
                    },
                    lightness: {
                        idx: 2,
                        type: "percent"
                    }
                }
            }
        }, d = {
            byte: {
                floor: !0,
                max: 255
            },
            percent: {
                max: 1
            },
            degrees: {
                mod: 360,
                floor: !0
            }
        }, c = l.support = {}, p = e("<p>")[0], f = e.each;
        p.style.cssText = "background-color:rgba(1,1,1,.5)", c.rgba = p.style.backgroundColor.indexOf("rgba") > -1, 
        f(u, function(e, t) {
            t.cache = "_" + e, t.props.alpha = {
                idx: 3,
                type: "percent",
                def: 1
            };
        }), l.fn = e.extend(l.prototype, {
            parse: function(n, o, r, h) {
                if (n === t) return this._rgba = [ null, null, null, null ], this;
                (n.jquery || n.nodeType) && (n = e(n).css(o), o = t);
                var d = this, c = e.type(n), p = this._rgba = [];
                return o !== t && (n = [ n, o, r, h ], c = "array"), "string" === c ? this.parse(s(n) || a._default) : "array" === c ? (f(u.rgba.props, function(e, t) {
                    p[t.idx] = i(n[t.idx], t);
                }), this) : "object" === c ? (n instanceof l ? f(u, function(e, t) {
                    n[t.cache] && (d[t.cache] = n[t.cache].slice());
                }) : f(u, function(t, s) {
                    var a = s.cache;
                    f(s.props, function(e, t) {
                        if (!d[a] && s.to) {
                            if ("alpha" === e || null == n[e]) return;
                            d[a] = s.to(d._rgba);
                        }
                        d[a][t.idx] = i(n[e], t, !0);
                    }), d[a] && 0 > e.inArray(null, d[a].slice(0, 3)) && (d[a][3] = 1, s.from && (d._rgba = s.from(d[a])));
                }), this) : t;
            },
            is: function(e) {
                var i = l(e), s = !0, n = this;
                return f(u, function(e, a) {
                    var o, r = i[a.cache];
                    return r && (o = n[a.cache] || a.to && a.to(n._rgba) || [], f(a.props, function(e, i) {
                        return null != r[i.idx] ? s = r[i.idx] === o[i.idx] : t;
                    })), s;
                }), s;
            },
            _space: function() {
                var e = [], t = this;
                return f(u, function(i, s) {
                    t[s.cache] && e.push(i);
                }), e.pop();
            },
            transition: function(e, t) {
                var s = l(e), n = s._space(), a = u[n], o = 0 === this.alpha() ? l("transparent") : this, r = o[a.cache] || a.to(o._rgba), h = r.slice();
                return s = s[a.cache], f(a.props, function(e, n) {
                    var a = n.idx, o = r[a], l = s[a], u = d[n.type] || {};
                    null !== l && (null === o ? h[a] = l : (u.mod && (l - o > u.mod / 2 ? o += u.mod : o - l > u.mod / 2 && (o -= u.mod)), 
                    h[a] = i((l - o) * t + o, n)));
                }), this[n](h);
            },
            blend: function(t) {
                if (1 === this._rgba[3]) return this;
                var i = this._rgba.slice(), s = i.pop(), n = l(t)._rgba;
                return l(e.map(i, function(e, t) {
                    return (1 - s) * n[t] + s * e;
                }));
            },
            toRgbaString: function() {
                var t = "rgba(", i = e.map(this._rgba, function(e, t) {
                    return null == e ? t > 2 ? 1 : 0 : e;
                });
                return 1 === i[3] && (i.pop(), t = "rgb("), t + i.join() + ")";
            },
            toHslaString: function() {
                var t = "hsla(", i = e.map(this.hsla(), function(e, t) {
                    return null == e && (e = t > 2 ? 1 : 0), t && 3 > t && (e = Math.round(100 * e) + "%"), 
                    e;
                });
                return 1 === i[3] && (i.pop(), t = "hsl("), t + i.join() + ")";
            },
            toHexString: function(t) {
                var i = this._rgba.slice(), s = i.pop();
                return t && i.push(~~(255 * s)), "#" + e.map(i, function(e) {
                    return 1 === (e = (e || 0).toString(16)).length ? "0" + e : e;
                }).join("");
            },
            toString: function() {
                return 0 === this._rgba[3] ? "transparent" : this.toRgbaString();
            }
        }), l.fn.parse.prototype = l.fn, u.hsla.to = function(e) {
            if (null == e[0] || null == e[1] || null == e[2]) return [ null, null, null, e[3] ];
            var t, i, s = e[0] / 255, n = e[1] / 255, a = e[2] / 255, o = e[3], r = Math.max(s, n, a), h = Math.min(s, n, a), l = r - h, u = r + h, d = .5 * u;
            return t = h === r ? 0 : s === r ? 60 * (n - a) / l + 360 : n === r ? 60 * (a - s) / l + 120 : 60 * (s - n) / l + 240, 
            i = 0 === l ? 0 : .5 >= d ? l / u : l / (2 - u), [ Math.round(t) % 360, i, d, null == o ? 1 : o ];
        }, u.hsla.from = function(e) {
            if (null == e[0] || null == e[1] || null == e[2]) return [ null, null, null, e[3] ];
            var t = e[0] / 360, i = e[1], s = e[2], a = e[3], o = .5 >= s ? s * (1 + i) : s + i - s * i, r = 2 * s - o;
            return [ Math.round(255 * n(r, o, t + 1 / 3)), Math.round(255 * n(r, o, t)), Math.round(255 * n(r, o, t - 1 / 3)), a ];
        }, f(u, function(s, n) {
            var a = n.props, o = n.cache, h = n.to, u = n.from;
            l.fn[s] = function(s) {
                if (h && !this[o] && (this[o] = h(this._rgba)), s === t) return this[o].slice();
                var n, r = e.type(s), d = "array" === r || "object" === r ? s : arguments, c = this[o].slice();
                return f(a, function(e, t) {
                    var s = d["object" === r ? e : t.idx];
                    null == s && (s = c[t.idx]), c[t.idx] = i(s, t);
                }), u ? (n = l(u(c)), n[o] = c, n) : l(c);
            }, f(a, function(t, i) {
                l.fn[t] || (l.fn[t] = function(n) {
                    var a, o = e.type(n), h = "alpha" === t ? this._hsla ? "hsla" : "rgba" : s, l = this[h](), u = l[i.idx];
                    return "undefined" === o ? u : ("function" === o && (n = n.call(this, u), o = e.type(n)), 
                    null == n && i.empty ? this : ("string" === o && (a = r.exec(n)) && (n = u + parseFloat(a[2]) * ("+" === a[1] ? 1 : -1)), 
                    l[i.idx] = n, this[h](l)));
                });
            });
        }), l.hook = function(t) {
            var i = t.split(" ");
            f(i, function(t, i) {
                e.cssHooks[i] = {
                    set: function(t, n) {
                        var a, o, r = "";
                        if ("transparent" !== n && ("string" !== e.type(n) || (a = s(n)))) {
                            if (n = l(a || n), !c.rgba && 1 !== n._rgba[3]) {
                                for (o = "backgroundColor" === i ? t.parentNode : t; ("" === r || "transparent" === r) && o && o.style; ) try {
                                    r = e.css(o, "backgroundColor"), o = o.parentNode;
                                } catch (h) {}
                                n = n.blend(r && "transparent" !== r ? r : "_default");
                            }
                            n = n.toRgbaString();
                        }
                        try {
                            t.style[i] = n;
                        } catch (h) {}
                    }
                }, e.fx.step[i] = function(t) {
                    t.colorInit || (t.start = l(t.elem, i), t.end = l(t.end), t.colorInit = !0), e.cssHooks[i].set(t.elem, t.start.transition(t.end, t.pos));
                };
            });
        }, l.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"), 
        e.cssHooks.borderColor = {
            expand: function(e) {
                var t = {};
                return f([ "Top", "Right", "Bottom", "Left" ], function(i, s) {
                    t["border" + s + "Color"] = e;
                }), t;
            }
        }, a = e.Color.names = {
            aqua: "#00ffff",
            black: "#000000",
            blue: "#0000ff",
            fuchsia: "#ff00ff",
            gray: "#808080",
            green: "#008000",
            lime: "#00ff00",
            maroon: "#800000",
            navy: "#000080",
            olive: "#808000",
            purple: "#800080",
            red: "#ff0000",
            silver: "#c0c0c0",
            teal: "#008080",
            white: "#ffffff",
            yellow: "#ffff00",
            transparent: [ null, null, null, 0 ],
            _default: "#ffffff"
        };
    }(r), function() {
        function t(t) {
            var i, s, n = t.ownerDocument.defaultView ? t.ownerDocument.defaultView.getComputedStyle(t, null) : t.currentStyle, a = {};
            if (n && n.length && n[0] && n[n[0]]) for (s = n.length; s--; ) i = n[s], "string" == typeof n[i] && (a[e.camelCase(i)] = n[i]); else for (i in n) "string" == typeof n[i] && (a[i] = n[i]);
            return a;
        }
        function i(t, i) {
            var s, a, o = {};
            for (s in i) a = i[s], t[s] !== a && (n[s] || (e.fx.step[s] || !isNaN(parseFloat(a))) && (o[s] = a));
            return o;
        }
        var s = [ "add", "remove", "toggle" ], n = {
            border: 1,
            borderBottom: 1,
            borderColor: 1,
            borderLeft: 1,
            borderRight: 1,
            borderTop: 1,
            borderWidth: 1,
            margin: 1,
            padding: 1
        };
        e.each([ "borderLeftStyle", "borderRightStyle", "borderBottomStyle", "borderTopStyle" ], function(t, i) {
            e.fx.step[i] = function(e) {
                ("none" !== e.end && !e.setAttr || 1 === e.pos && !e.setAttr) && (r.style(e.elem, i, e.end), 
                e.setAttr = !0);
            };
        }), e.fn.addBack || (e.fn.addBack = function(e) {
            return this.add(null == e ? this.prevObject : this.prevObject.filter(e));
        }), e.effects.animateClass = function(n, a, o, r) {
            var h = e.speed(a, o, r);
            return this.queue(function() {
                var a, o = e(this), r = o.attr("class") || "", l = h.children ? o.find("*").addBack() : o;
                l = l.map(function() {
                    return {
                        el: e(this),
                        start: t(this)
                    };
                }), (a = function() {
                    e.each(s, function(e, t) {
                        n[t] && o[t + "Class"](n[t]);
                    });
                })(), l = l.map(function() {
                    return this.end = t(this.el[0]), this.diff = i(this.start, this.end), this;
                }), o.attr("class", r), l = l.map(function() {
                    var t = this, i = e.Deferred(), s = e.extend({}, h, {
                        queue: !1,
                        complete: function() {
                            i.resolve(t);
                        }
                    });
                    return this.el.animate(this.diff, s), i.promise();
                }), e.when.apply(e, l.get()).done(function() {
                    a(), e.each(arguments, function() {
                        var t = this.el;
                        e.each(this.diff, function(e) {
                            t.css(e, "");
                        });
                    }), h.complete.call(o[0]);
                });
            });
        }, e.fn.extend({
            addClass: function(t) {
                return function(i, s, n, a) {
                    return s ? e.effects.animateClass.call(this, {
                        add: i
                    }, s, n, a) : t.apply(this, arguments);
                };
            }(e.fn.addClass),
            removeClass: function(t) {
                return function(i, s, n, a) {
                    return arguments.length > 1 ? e.effects.animateClass.call(this, {
                        remove: i
                    }, s, n, a) : t.apply(this, arguments);
                };
            }(e.fn.removeClass),
            toggleClass: function(t) {
                return function(i, s, n, a, o) {
                    return "boolean" == typeof s || void 0 === s ? n ? e.effects.animateClass.call(this, s ? {
                        add: i
                    } : {
                        remove: i
                    }, n, a, o) : t.apply(this, arguments) : e.effects.animateClass.call(this, {
                        toggle: i
                    }, s, n, a);
                };
            }(e.fn.toggleClass),
            switchClass: function(t, i, s, n, a) {
                return e.effects.animateClass.call(this, {
                    add: i,
                    remove: t
                }, s, n, a);
            }
        });
    }(), function() {
        function t(t, i, s, n) {
            return e.isPlainObject(t) && (i = t, t = t.effect), t = {
                effect: t
            }, null == i && (i = {}), e.isFunction(i) && (n = i, s = null, i = {}), ("number" == typeof i || e.fx.speeds[i]) && (n = s, 
            s = i, i = {}), e.isFunction(s) && (n = s, s = null), i && e.extend(t, i), s = s || i.duration, 
            t.duration = e.fx.off ? 0 : "number" == typeof s ? s : s in e.fx.speeds ? e.fx.speeds[s] : e.fx.speeds._default, 
            t.complete = n || i.complete, t;
        }
        function i(t) {
            return !(t && "number" != typeof t && !e.fx.speeds[t]) || ("string" == typeof t && !e.effects.effect[t] || (!!e.isFunction(t) || "object" == typeof t && !t.effect));
        }
        e.extend(e.effects, {
            version: "1.11.2",
            save: function(e, t) {
                for (var i = 0; t.length > i; i++) null !== t[i] && e.data(o + t[i], e[0].style[t[i]]);
            },
            restore: function(e, t) {
                var i, s;
                for (s = 0; t.length > s; s++) null !== t[s] && (void 0 === (i = e.data(o + t[s])) && (i = ""), 
                e.css(t[s], i));
            },
            setMode: function(e, t) {
                return "toggle" === t && (t = e.is(":hidden") ? "show" : "hide"), t;
            },
            getBaseline: function(e, t) {
                var i, s;
                switch (e[0]) {
                  case "top":
                    i = 0;
                    break;

                  case "middle":
                    i = .5;
                    break;

                  case "bottom":
                    i = 1;
                    break;

                  default:
                    i = e[0] / t.height;
                }
                switch (e[1]) {
                  case "left":
                    s = 0;
                    break;

                  case "center":
                    s = .5;
                    break;

                  case "right":
                    s = 1;
                    break;

                  default:
                    s = e[1] / t.width;
                }
                return {
                    x: s,
                    y: i
                };
            },
            createWrapper: function(t) {
                if (t.parent().is(".ui-effects-wrapper")) return t.parent();
                var i = {
                    width: t.outerWidth(!0),
                    height: t.outerHeight(!0),
                    float: t.css("float")
                }, s = e("<div></div>").addClass("ui-effects-wrapper").css({
                    fontSize: "100%",
                    background: "transparent",
                    border: "none",
                    margin: 0,
                    padding: 0
                }), n = {
                    width: t.width(),
                    height: t.height()
                }, a = document.activeElement;
                try {
                    a.id;
                } catch (o) {
                    a = document.body;
                }
                return t.wrap(s), (t[0] === a || e.contains(t[0], a)) && e(a).focus(), s = t.parent(), 
                "static" === t.css("position") ? (s.css({
                    position: "relative"
                }), t.css({
                    position: "relative"
                })) : (e.extend(i, {
                    position: t.css("position"),
                    zIndex: t.css("z-index")
                }), e.each([ "top", "left", "bottom", "right" ], function(e, s) {
                    i[s] = t.css(s), isNaN(parseInt(i[s], 10)) && (i[s] = "auto");
                }), t.css({
                    position: "relative",
                    top: 0,
                    left: 0,
                    right: "auto",
                    bottom: "auto"
                })), t.css(n), s.css(i).show();
            },
            removeWrapper: function(t) {
                var i = document.activeElement;
                return t.parent().is(".ui-effects-wrapper") && (t.parent().replaceWith(t), (t[0] === i || e.contains(t[0], i)) && e(i).focus()), 
                t;
            },
            setTransition: function(t, i, s, n) {
                return n = n || {}, e.each(i, function(e, i) {
                    var a = t.cssUnit(i);
                    a[0] > 0 && (n[i] = a[0] * s + a[1]);
                }), n;
            }
        }), e.fn.extend({
            effect: function() {
                function i(t) {
                    function i() {
                        e.isFunction(a) && a.call(n[0]), e.isFunction(t) && t();
                    }
                    var n = e(this), a = s.complete, r = s.mode;
                    (n.is(":hidden") ? "hide" === r : "show" === r) ? (n[r](), i()) : o.call(n[0], s, i);
                }
                var s = t.apply(this, arguments), n = s.mode, a = s.queue, o = e.effects.effect[s.effect];
                return e.fx.off || !o ? n ? this[n](s.duration, s.complete) : this.each(function() {
                    s.complete && s.complete.call(this);
                }) : !1 === a ? this.each(i) : this.queue(a || "fx", i);
            },
            show: function(e) {
                return function(s) {
                    if (i(s)) return e.apply(this, arguments);
                    var n = t.apply(this, arguments);
                    return n.mode = "show", this.effect.call(this, n);
                };
            }(e.fn.show),
            hide: function(e) {
                return function(s) {
                    if (i(s)) return e.apply(this, arguments);
                    var n = t.apply(this, arguments);
                    return n.mode = "hide", this.effect.call(this, n);
                };
            }(e.fn.hide),
            toggle: function(e) {
                return function(s) {
                    if (i(s) || "boolean" == typeof s) return e.apply(this, arguments);
                    var n = t.apply(this, arguments);
                    return n.mode = "toggle", this.effect.call(this, n);
                };
            }(e.fn.toggle),
            cssUnit: function(t) {
                var i = this.css(t), s = [];
                return e.each([ "em", "px", "%", "pt" ], function(e, t) {
                    i.indexOf(t) > 0 && (s = [ parseFloat(i), t ]);
                }), s;
            }
        });
    }(), function() {
        var t = {};
        e.each([ "Quad", "Cubic", "Quart", "Quint", "Expo" ], function(e, i) {
            t[i] = function(t) {
                return Math.pow(t, e + 2);
            };
        }), e.extend(t, {
            Sine: function(e) {
                return 1 - Math.cos(e * Math.PI / 2);
            },
            Circ: function(e) {
                return 1 - Math.sqrt(1 - e * e);
            },
            Elastic: function(e) {
                return 0 === e || 1 === e ? e : -Math.pow(2, 8 * (e - 1)) * Math.sin((80 * (e - 1) - 7.5) * Math.PI / 15);
            },
            Back: function(e) {
                return e * e * (3 * e - 2);
            },
            Bounce: function(e) {
                for (var t, i = 4; ((t = Math.pow(2, --i)) - 1) / 11 > e; ) ;
                return 1 / Math.pow(4, 3 - i) - 7.5625 * Math.pow((3 * t - 2) / 22 - e, 2);
            }
        }), e.each(t, function(t, i) {
            e.easing["easeIn" + t] = i, e.easing["easeOut" + t] = function(e) {
                return 1 - i(1 - e);
            }, e.easing["easeInOut" + t] = function(e) {
                return .5 > e ? i(2 * e) / 2 : 1 - i(-2 * e + 2) / 2;
            };
        });
    }(), e.effects, e.effects.effect.blind = function(t, i) {
        var s, n, a, o = e(this), r = /up|down|vertical/, h = /up|left|vertical|horizontal/, l = [ "position", "top", "bottom", "left", "right", "height", "width" ], u = e.effects.setMode(o, t.mode || "hide"), d = t.direction || "up", c = r.test(d), p = c ? "height" : "width", f = c ? "top" : "left", m = h.test(d), g = {}, v = "show" === u;
        o.parent().is(".ui-effects-wrapper") ? e.effects.save(o.parent(), l) : e.effects.save(o, l), 
        o.show(), n = (s = e.effects.createWrapper(o).css({
            overflow: "hidden"
        }))[p](), a = parseFloat(s.css(f)) || 0, g[p] = v ? n : 0, m || (o.css(c ? "bottom" : "right", 0).css(c ? "top" : "left", "auto").css({
            position: "absolute"
        }), g[f] = v ? a : n + a), v && (s.css(p, 0), m || s.css(f, a + n)), s.animate(g, {
            duration: t.duration,
            easing: t.easing,
            queue: !1,
            complete: function() {
                "hide" === u && o.hide(), e.effects.restore(o, l), e.effects.removeWrapper(o), i();
            }
        });
    }, e.effects.effect.bounce = function(t, i) {
        var s, n, a, o = e(this), r = [ "position", "top", "bottom", "left", "right", "height", "width" ], h = e.effects.setMode(o, t.mode || "effect"), l = "hide" === h, u = "show" === h, d = t.direction || "up", c = t.distance, p = t.times || 5, f = 2 * p + (u || l ? 1 : 0), m = t.duration / f, g = t.easing, v = "up" === d || "down" === d ? "top" : "left", y = "up" === d || "left" === d, b = o.queue(), _ = b.length;
        for ((u || l) && r.push("opacity"), e.effects.save(o, r), o.show(), e.effects.createWrapper(o), 
        c || (c = o["top" === v ? "outerHeight" : "outerWidth"]() / 3), u && (a = {
            opacity: 1
        }, a[v] = 0, o.css("opacity", 0).css(v, y ? 2 * -c : 2 * c).animate(a, m, g)), l && (c /= Math.pow(2, p - 1)), 
        (a = {})[v] = 0, s = 0; p > s; s++) n = {}, n[v] = (y ? "-=" : "+=") + c, o.animate(n, m, g).animate(a, m, g), 
        c = l ? 2 * c : c / 2;
        l && (n = {
            opacity: 0
        }, n[v] = (y ? "-=" : "+=") + c, o.animate(n, m, g)), o.queue(function() {
            l && o.hide(), e.effects.restore(o, r), e.effects.removeWrapper(o), i();
        }), _ > 1 && b.splice.apply(b, [ 1, 0 ].concat(b.splice(_, f + 1))), o.dequeue();
    }, e.effects.effect.clip = function(t, i) {
        var s, n, a, o = e(this), r = [ "position", "top", "bottom", "left", "right", "height", "width" ], l = "show" === e.effects.setMode(o, t.mode || "hide"), d = "vertical" === (t.direction || "vertical"), c = d ? "height" : "width", p = d ? "top" : "left", f = {};
        e.effects.save(o, r), o.show(), s = e.effects.createWrapper(o).css({
            overflow: "hidden"
        }), a = (n = "IMG" === o[0].tagName ? s : o)[c](), l && (n.css(c, 0), n.css(p, a / 2)), 
        f[c] = l ? a : 0, f[p] = l ? 0 : a / 2, n.animate(f, {
            queue: !1,
            duration: t.duration,
            easing: t.easing,
            complete: function() {
                l || o.hide(), e.effects.restore(o, r), e.effects.removeWrapper(o), i();
            }
        });
    }, e.effects.effect.drop = function(t, i) {
        var s, n = e(this), a = [ "position", "top", "bottom", "left", "right", "opacity", "height", "width" ], o = e.effects.setMode(n, t.mode || "hide"), r = "show" === o, h = t.direction || "left", l = "up" === h || "down" === h ? "top" : "left", u = "up" === h || "left" === h ? "pos" : "neg", d = {
            opacity: r ? 1 : 0
        };
        e.effects.save(n, a), n.show(), e.effects.createWrapper(n), s = t.distance || n["top" === l ? "outerHeight" : "outerWidth"](!0) / 2, 
        r && n.css("opacity", 0).css(l, "pos" === u ? -s : s), d[l] = (r ? "pos" === u ? "+=" : "-=" : "pos" === u ? "-=" : "+=") + s, 
        n.animate(d, {
            queue: !1,
            duration: t.duration,
            easing: t.easing,
            complete: function() {
                "hide" === o && n.hide(), e.effects.restore(n, a), e.effects.removeWrapper(n), i();
            }
        });
    }, e.effects.effect.explode = function(t, i) {
        function n() {
            p.css({
                visibility: "visible"
            }), e(b).remove(), m || p.hide(), i();
        }
        var a, o, r, h, l, u, d = t.pieces ? Math.round(Math.sqrt(t.pieces)) : 3, c = d, p = e(this), m = "show" === e.effects.setMode(p, t.mode || "hide"), g = p.show().css("visibility", "hidden").offset(), v = Math.ceil(p.outerWidth() / c), y = Math.ceil(p.outerHeight() / d), b = [];
        for (a = 0; d > a; a++) for (h = g.top + a * y, u = a - (d - 1) / 2, o = 0; c > o; o++) r = g.left + o * v, 
        l = o - (c - 1) / 2, p.clone().appendTo("body").wrap("<div></div>").css({
            position: "absolute",
            visibility: "visible",
            left: -o * v,
            top: -a * y
        }).parent().addClass("ui-effects-explode").css({
            position: "absolute",
            overflow: "hidden",
            width: v,
            height: y,
            left: r + (m ? l * v : 0),
            top: h + (m ? u * y : 0),
            opacity: m ? 0 : 1
        }).animate({
            left: r + (m ? 0 : l * v),
            top: h + (m ? 0 : u * y),
            opacity: m ? 1 : 0
        }, t.duration || 500, t.easing, function() {
            b.push(this), b.length === d * c && n();
        });
    }, e.effects.effect.fade = function(t, i) {
        var s = e(this), n = e.effects.setMode(s, t.mode || "toggle");
        s.animate({
            opacity: n
        }, {
            queue: !1,
            duration: t.duration,
            easing: t.easing,
            complete: i
        });
    }, e.effects.effect.fold = function(t, i) {
        var s, n, a = e(this), o = [ "position", "top", "bottom", "left", "right", "height", "width" ], r = e.effects.setMode(a, t.mode || "hide"), h = "show" === r, l = "hide" === r, u = t.size || 15, d = /([0-9]+)%/.exec(u), c = !!t.horizFirst, p = h !== c, f = p ? [ "width", "height" ] : [ "height", "width" ], m = t.duration / 2, g = {}, v = {};
        e.effects.save(a, o), a.show(), s = e.effects.createWrapper(a).css({
            overflow: "hidden"
        }), n = p ? [ s.width(), s.height() ] : [ s.height(), s.width() ], d && (u = parseInt(d[1], 10) / 100 * n[l ? 0 : 1]), 
        h && s.css(c ? {
            height: 0,
            width: u
        } : {
            height: u,
            width: 0
        }), g[f[0]] = h ? n[0] : u, v[f[1]] = h ? n[1] : 0, s.animate(g, m, t.easing).animate(v, m, t.easing, function() {
            l && a.hide(), e.effects.restore(a, o), e.effects.removeWrapper(a), i();
        });
    }, e.effects.effect.highlight = function(t, i) {
        var s = e(this), n = [ "backgroundImage", "backgroundColor", "opacity" ], a = e.effects.setMode(s, t.mode || "show"), o = {
            backgroundColor: s.css("backgroundColor")
        };
        "hide" === a && (o.opacity = 0), e.effects.save(s, n), s.show().css({
            backgroundImage: "none",
            backgroundColor: t.color || "#ffff99"
        }).animate(o, {
            queue: !1,
            duration: t.duration,
            easing: t.easing,
            complete: function() {
                "hide" === a && s.hide(), e.effects.restore(s, n), i();
            }
        });
    }, e.effects.effect.size = function(t, i) {
        var s, n, a, o = e(this), r = [ "position", "top", "bottom", "left", "right", "width", "height", "overflow", "opacity" ], h = [ "position", "top", "bottom", "left", "right", "overflow", "opacity" ], l = [ "width", "height", "overflow" ], u = [ "fontSize" ], d = [ "borderTopWidth", "borderBottomWidth", "paddingTop", "paddingBottom" ], c = [ "borderLeftWidth", "borderRightWidth", "paddingLeft", "paddingRight" ], p = e.effects.setMode(o, t.mode || "effect"), f = t.restore || "effect" !== p, m = t.scale || "both", g = t.origin || [ "middle", "center" ], v = o.css("position"), y = f ? r : h, b = {
            height: 0,
            width: 0,
            outerHeight: 0,
            outerWidth: 0
        };
        "show" === p && o.show(), s = {
            height: o.height(),
            width: o.width(),
            outerHeight: o.outerHeight(),
            outerWidth: o.outerWidth()
        }, "toggle" === t.mode && "show" === p ? (o.from = t.to || b, o.to = t.from || s) : (o.from = t.from || ("show" === p ? b : s), 
        o.to = t.to || ("hide" === p ? b : s)), a = {
            from: {
                y: o.from.height / s.height,
                x: o.from.width / s.width
            },
            to: {
                y: o.to.height / s.height,
                x: o.to.width / s.width
            }
        }, ("box" === m || "both" === m) && (a.from.y !== a.to.y && (y = y.concat(d), o.from = e.effects.setTransition(o, d, a.from.y, o.from), 
        o.to = e.effects.setTransition(o, d, a.to.y, o.to)), a.from.x !== a.to.x && (y = y.concat(c), 
        o.from = e.effects.setTransition(o, c, a.from.x, o.from), o.to = e.effects.setTransition(o, c, a.to.x, o.to))), 
        ("content" === m || "both" === m) && a.from.y !== a.to.y && (y = y.concat(u).concat(l), 
        o.from = e.effects.setTransition(o, u, a.from.y, o.from), o.to = e.effects.setTransition(o, u, a.to.y, o.to)), 
        e.effects.save(o, y), o.show(), e.effects.createWrapper(o), o.css("overflow", "hidden").css(o.from), 
        g && (n = e.effects.getBaseline(g, s), o.from.top = (s.outerHeight - o.outerHeight()) * n.y, 
        o.from.left = (s.outerWidth - o.outerWidth()) * n.x, o.to.top = (s.outerHeight - o.to.outerHeight) * n.y, 
        o.to.left = (s.outerWidth - o.to.outerWidth) * n.x), o.css(o.from), ("content" === m || "both" === m) && (d = d.concat([ "marginTop", "marginBottom" ]).concat(u), 
        c = c.concat([ "marginLeft", "marginRight" ]), l = r.concat(d).concat(c), o.find("*[width]").each(function() {
            var i = e(this), s = {
                height: i.height(),
                width: i.width(),
                outerHeight: i.outerHeight(),
                outerWidth: i.outerWidth()
            };
            f && e.effects.save(i, l), i.from = {
                height: s.height * a.from.y,
                width: s.width * a.from.x,
                outerHeight: s.outerHeight * a.from.y,
                outerWidth: s.outerWidth * a.from.x
            }, i.to = {
                height: s.height * a.to.y,
                width: s.width * a.to.x,
                outerHeight: s.height * a.to.y,
                outerWidth: s.width * a.to.x
            }, a.from.y !== a.to.y && (i.from = e.effects.setTransition(i, d, a.from.y, i.from), 
            i.to = e.effects.setTransition(i, d, a.to.y, i.to)), a.from.x !== a.to.x && (i.from = e.effects.setTransition(i, c, a.from.x, i.from), 
            i.to = e.effects.setTransition(i, c, a.to.x, i.to)), i.css(i.from), i.animate(i.to, t.duration, t.easing, function() {
                f && e.effects.restore(i, l);
            });
        })), o.animate(o.to, {
            queue: !1,
            duration: t.duration,
            easing: t.easing,
            complete: function() {
                0 === o.to.opacity && o.css("opacity", o.from.opacity), "hide" === p && o.hide(), 
                e.effects.restore(o, y), f || ("static" === v ? o.css({
                    position: "relative",
                    top: o.to.top,
                    left: o.to.left
                }) : e.each([ "top", "left" ], function(e, t) {
                    o.css(t, function(t, i) {
                        var s = parseInt(i, 10), n = e ? o.to.left : o.to.top;
                        return "auto" === i ? n + "px" : s + n + "px";
                    });
                })), e.effects.removeWrapper(o), i();
            }
        });
    }, e.effects.effect.scale = function(t, i) {
        var s = e(this), n = e.extend(!0, {}, t), a = e.effects.setMode(s, t.mode || "effect"), o = parseInt(t.percent, 10) || (0 === parseInt(t.percent, 10) ? 0 : "hide" === a ? 0 : 100), r = t.direction || "both", h = t.origin, l = {
            height: s.height(),
            width: s.width(),
            outerHeight: s.outerHeight(),
            outerWidth: s.outerWidth()
        }, u = {
            y: "horizontal" !== r ? o / 100 : 1,
            x: "vertical" !== r ? o / 100 : 1
        };
        n.effect = "size", n.queue = !1, n.complete = i, "effect" !== a && (n.origin = h || [ "middle", "center" ], 
        n.restore = !0), n.from = t.from || ("show" === a ? {
            height: 0,
            width: 0,
            outerHeight: 0,
            outerWidth: 0
        } : l), n.to = {
            height: l.height * u.y,
            width: l.width * u.x,
            outerHeight: l.outerHeight * u.y,
            outerWidth: l.outerWidth * u.x
        }, n.fade && ("show" === a && (n.from.opacity = 0, n.to.opacity = 1), "hide" === a && (n.from.opacity = 1, 
        n.to.opacity = 0)), s.effect(n);
    }, e.effects.effect.puff = function(t, i) {
        var s = e(this), n = e.effects.setMode(s, t.mode || "hide"), a = "hide" === n, o = parseInt(t.percent, 10) || 150, r = o / 100, h = {
            height: s.height(),
            width: s.width(),
            outerHeight: s.outerHeight(),
            outerWidth: s.outerWidth()
        };
        e.extend(t, {
            effect: "scale",
            queue: !1,
            fade: !0,
            mode: n,
            complete: i,
            percent: a ? o : 100,
            from: a ? h : {
                height: h.height * r,
                width: h.width * r,
                outerHeight: h.outerHeight * r,
                outerWidth: h.outerWidth * r
            }
        }), s.effect(t);
    }, e.effects.effect.pulsate = function(t, i) {
        var s, n = e(this), a = e.effects.setMode(n, t.mode || "show"), o = "show" === a, r = "hide" === a, h = o || "hide" === a, l = 2 * (t.times || 5) + (h ? 1 : 0), u = t.duration / l, d = 0, c = n.queue(), p = c.length;
        for ((o || !n.is(":visible")) && (n.css("opacity", 0).show(), d = 1), s = 1; l > s; s++) n.animate({
            opacity: d
        }, u, t.easing), d = 1 - d;
        n.animate({
            opacity: d
        }, u, t.easing), n.queue(function() {
            r && n.hide(), i();
        }), p > 1 && c.splice.apply(c, [ 1, 0 ].concat(c.splice(p, l + 1))), n.dequeue();
    }, e.effects.effect.shake = function(t, i) {
        var s, n = e(this), a = [ "position", "top", "bottom", "left", "right", "height", "width" ], o = e.effects.setMode(n, t.mode || "effect"), r = t.direction || "left", h = t.distance || 20, l = t.times || 3, u = 2 * l + 1, d = Math.round(t.duration / u), c = "up" === r || "down" === r ? "top" : "left", p = "up" === r || "left" === r, f = {}, m = {}, g = {}, v = n.queue(), y = v.length;
        for (e.effects.save(n, a), n.show(), e.effects.createWrapper(n), f[c] = (p ? "-=" : "+=") + h, 
        m[c] = (p ? "+=" : "-=") + 2 * h, g[c] = (p ? "-=" : "+=") + 2 * h, n.animate(f, d, t.easing), 
        s = 1; l > s; s++) n.animate(m, d, t.easing).animate(g, d, t.easing);
        n.animate(m, d, t.easing).animate(f, d / 2, t.easing).queue(function() {
            "hide" === o && n.hide(), e.effects.restore(n, a), e.effects.removeWrapper(n), i();
        }), y > 1 && v.splice.apply(v, [ 1, 0 ].concat(v.splice(y, u + 1))), n.dequeue();
    }, e.effects.effect.slide = function(t, i) {
        var s, n = e(this), a = [ "position", "top", "bottom", "left", "right", "width", "height" ], o = e.effects.setMode(n, t.mode || "show"), r = "show" === o, h = t.direction || "left", l = "up" === h || "down" === h ? "top" : "left", u = "up" === h || "left" === h, d = {};
        e.effects.save(n, a), n.show(), s = t.distance || n["top" === l ? "outerHeight" : "outerWidth"](!0), 
        e.effects.createWrapper(n).css({
            overflow: "hidden"
        }), r && n.css(l, u ? isNaN(s) ? "-" + s : -s : s), d[l] = (r ? u ? "+=" : "-=" : u ? "-=" : "+=") + s, 
        n.animate(d, {
            queue: !1,
            duration: t.duration,
            easing: t.easing,
            complete: function() {
                "hide" === o && n.hide(), e.effects.restore(n, a), e.effects.removeWrapper(n), i();
            }
        });
    }, e.effects.effect.transfer = function(t, i) {
        var s = e(this), n = e(t.to), a = "fixed" === n.css("position"), o = e("body"), r = a ? o.scrollTop() : 0, h = a ? o.scrollLeft() : 0, l = n.offset(), u = {
            top: l.top - r,
            left: l.left - h,
            height: n.innerHeight(),
            width: n.innerWidth()
        }, d = s.offset(), c = e("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(t.className).css({
            top: d.top - r,
            left: d.left - h,
            height: s.innerHeight(),
            width: s.innerWidth(),
            position: a ? "fixed" : "absolute"
        }).animate(u, t.duration, t.easing, function() {
            c.remove(), i();
        });
    };
}), function($, window, document, undefined) {
    var $window = $(window);
    $.fn.lazyload = function(options) {
        function update() {
            var counter = 0;
            elements.each(function() {
                var $this = $(this);
                if (!settings.skip_invisible || $this.is(":visible")) if ($.abovethetop(this, settings) || $.leftofbegin(this, settings)) ; else if ($.belowthefold(this, settings) || $.rightoffold(this, settings)) {
                    if (++counter > settings.failure_limit) return !1;
                } else $this.trigger("appear"), counter = 0;
            });
        }
        var $container, elements = this, settings = {
            threshold: 0,
            failure_limit: 0,
            event: "scroll",
            effect: "show",
            container: window,
            data_attribute: "original",
            skip_invisible: !0,
            appear: null,
            load: null,
            placeholder: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"
        };
        return options && (void 0 !== options.failurelimit && (options.failure_limit = options.failurelimit, 
        delete options.failurelimit), void 0 !== options.effectspeed && (options.effect_speed = options.effectspeed, 
        delete options.effectspeed), $.extend(settings, options)), $container = void 0 === settings.container || settings.container === window ? $window : $(settings.container), 
        0 === settings.event.indexOf("scroll") && $container.bind(settings.event, function() {
            return update();
        }), this.each(function() {
            var self = this, $self = $(self);
            self.loaded = !1, void 0 !== $self.attr("src") && !1 !== $self.attr("src") || $self.is("img") && $self.attr("src", settings.placeholder), 
            $self.one("appear", function() {
                if (!this.loaded) {
                    if (settings.appear) {
                        var elements_left = elements.length;
                        settings.appear.call(self, elements_left, settings);
                    }
                    $("<img />").bind("load", function() {
                        var original = $self.attr("data-" + settings.data_attribute);
                        $self.hide(), $self.is("img") ? $self.attr("src", original) : $self.css("background-image", "url('" + original + "')"), 
                        $self[settings.effect](settings.effect_speed), self.loaded = !0;
                        var temp = $.grep(elements, function(element) {
                            return !element.loaded;
                        });
                        if (elements = $(temp), settings.load) {
                            var elements_left = elements.length;
                            settings.load.call(self, elements_left, settings);
                        }
                    }).attr("src", $self.attr("data-" + settings.data_attribute)), "IFRAME" == this.tagName && $(this).attr("src", $self.attr("data-" + settings.data_attribute));
                }
            }), 0 !== settings.event.indexOf("scroll") && $self.bind(settings.event, function() {
                self.loaded || $self.trigger("appear");
            });
        }), /(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion) && $window.bind("pageshow", function(event) {
            event.originalEvent && event.originalEvent.persisted && elements.each(function() {
                $(this).trigger("appear");
            });
        }), $(document).ready(function() {
            update();
        }), this;
    }, $.belowthefold = function(element, settings) {
        return (void 0 === settings.container || settings.container === window ? (window.innerHeight ? window.innerHeight : $window.height()) + $window.scrollTop() : $(settings.container).offset().top + $(settings.container).height()) <= $(element).offset().top - settings.threshold;
    }, $.rightoffold = function(element, settings) {
        return (void 0 === settings.container || settings.container === window ? $window.width() + $window.scrollLeft() : $(settings.container).offset().left + $(settings.container).width()) <= $(element).offset().left - settings.threshold;
    }, $.abovethetop = function(element, settings) {
        return (void 0 === settings.container || settings.container === window ? $window.scrollTop() : $(settings.container).offset().top) >= $(element).offset().top + settings.threshold + $(element).height();
    }, $.leftofbegin = function(element, settings) {
        return (void 0 === settings.container || settings.container === window ? $window.scrollLeft() : $(settings.container).offset().left) >= $(element).offset().left + settings.threshold + $(element).width();
    }, $.inviewport = function(element, settings) {
        return !($.rightoffold(element, settings) || $.leftofbegin(element, settings) || $.belowthefold(element, settings) || $.abovethetop(element, settings));
    }, $.extend($.expr[":"], {
        "below-the-fold": function(a) {
            return $.belowthefold(a, {
                threshold: 0
            });
        },
        "above-the-top": function(a) {
            return !$.belowthefold(a, {
                threshold: 0
            });
        },
        "right-of-screen": function(a) {
            return $.rightoffold(a, {
                threshold: 0
            });
        },
        "left-of-screen": function(a) {
            return !$.rightoffold(a, {
                threshold: 0
            });
        },
        "in-viewport": function(a) {
            return $.inviewport(a, {
                threshold: 0
            });
        },
        "above-the-fold": function(a) {
            return !$.belowthefold(a, {
                threshold: 0
            });
        },
        "right-of-fold": function(a) {
            return $.rightoffold(a, {
                threshold: 0
            });
        },
        "left-of-fold": function(a) {
            return !$.rightoffold(a, {
                threshold: 0
            });
        }
    });
}(jQuery, window, document), function(root, factory) {
    "use strict";
    "object" == typeof exports ? module.exports = factory(require("./punycode"), require("./IPv6"), require("./SecondLevelDomains")) : "function" == typeof define && define.amd ? define([ "./punycode", "./IPv6", "./SecondLevelDomains" ], factory) : root.URI = factory(root.punycode, root.IPv6, root.SecondLevelDomains, root);
}(this, function(punycode, IPv6, SLD, root) {
    "use strict";
    function URI(url, base) {
        var _urlSupplied = arguments.length >= 1, _baseSupplied = arguments.length >= 2;
        if (!(this instanceof URI)) return _urlSupplied ? _baseSupplied ? new URI(url, base) : new URI(url) : new URI();
        if (void 0 === url) {
            if (_urlSupplied) throw new TypeError("undefined is not a valid argument for URI");
            url = "undefined" != typeof location ? location.href + "" : "";
        }
        return this.href(url), void 0 !== base ? this.absoluteTo(base) : this;
    }
    function escapeRegEx(string) {
        return string.replace(/([.*+?^=!:${}()|[\]\/\\])/g, "\\$1");
    }
    function getType(value) {
        return void 0 === value ? "Undefined" : String(Object.prototype.toString.call(value)).slice(8, -1);
    }
    function isArray(obj) {
        return "Array" === getType(obj);
    }
    function filterArrayValues(data, value) {
        var i, length, lookup = {};
        if ("RegExp" === getType(value)) lookup = null; else if (isArray(value)) for (i = 0, 
        length = value.length; i < length; i++) lookup[value[i]] = !0; else lookup[value] = !0;
        for (i = 0, length = data.length; i < length; i++) (lookup && void 0 !== lookup[data[i]] || !lookup && value.test(data[i])) && (data.splice(i, 1), 
        length--, i--);
        return data;
    }
    function arrayContains(list, value) {
        var i, length;
        if (isArray(value)) {
            for (i = 0, length = value.length; i < length; i++) if (!arrayContains(list, value[i])) return !1;
            return !0;
        }
        var _type = getType(value);
        for (i = 0, length = list.length; i < length; i++) if ("RegExp" === _type) {
            if ("string" == typeof list[i] && list[i].match(value)) return !0;
        } else if (list[i] === value) return !0;
        return !1;
    }
    function arraysEqual(one, two) {
        if (!isArray(one) || !isArray(two)) return !1;
        if (one.length !== two.length) return !1;
        one.sort(), two.sort();
        for (var i = 0, l = one.length; i < l; i++) if (one[i] !== two[i]) return !1;
        return !0;
    }
    function trimSlashes(text) {
        var trim_expression = /^\/+|\/+$/g;
        return text.replace(trim_expression, "");
    }
    function escapeForDumbFirefox36(value) {
        return escape(value);
    }
    function strictEncodeURIComponent(string) {
        return encodeURIComponent(string).replace(/[!'()*]/g, escapeForDumbFirefox36).replace(/\*/g, "%2A");
    }
    function generateSimpleAccessor(_part) {
        return function(v, build) {
            return void 0 === v ? this._parts[_part] || "" : (this._parts[_part] = v || null, 
            this.build(!build), this);
        };
    }
    function generatePrefixAccessor(_part, _key) {
        return function(v, build) {
            return void 0 === v ? this._parts[_part] || "" : (null !== v && (v += "").charAt(0) === _key && (v = v.substring(1)), 
            this._parts[_part] = v, this.build(!build), this);
        };
    }
    var _URI = root && root.URI;
    URI.version = "1.17.1";
    var p = URI.prototype, hasOwn = Object.prototype.hasOwnProperty;
    URI._parts = function() {
        return {
            protocol: null,
            username: null,
            password: null,
            hostname: null,
            urn: null,
            port: null,
            path: null,
            query: null,
            fragment: null,
            duplicateQueryParameters: URI.duplicateQueryParameters,
            escapeQuerySpace: URI.escapeQuerySpace
        };
    }, URI.duplicateQueryParameters = !1, URI.escapeQuerySpace = !0, URI.protocol_expression = /^[a-z][a-z0-9.+-]*$/i, 
    URI.idn_expression = /[^a-z0-9\.-]/i, URI.punycode_expression = /(xn--)/i, URI.ip4_expression = /^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/, 
    URI.ip6_expression = /^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/, 
    URI.find_uri_expression = /\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?\xab\xbb\u201c\u201d\u2018\u2019]))/gi, 
    URI.findUri = {
        start: /\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,
        end: /[\s\r\n]|$/,
        trim: /[`!()\[\]{};:'".,<>?\xab\xbb\u201c\u201d\u201e\u2018\u2019]+$/
    }, URI.defaultPorts = {
        http: "80",
        https: "443",
        ftp: "21",
        gopher: "70",
        ws: "80",
        wss: "443"
    }, URI.invalid_hostname_characters = /[^a-zA-Z0-9\.-]/, URI.domAttributes = {
        a: "href",
        blockquote: "cite",
        link: "href",
        base: "href",
        script: "src",
        form: "action",
        img: "src",
        area: "href",
        iframe: "src",
        embed: "src",
        source: "src",
        track: "src",
        input: "src",
        audio: "src",
        video: "src"
    }, URI.getDomAttribute = function(node) {
        if (node && node.nodeName) {
            var nodeName = node.nodeName.toLowerCase();
            if ("input" !== nodeName || "image" === node.type) return URI.domAttributes[nodeName];
        }
    }, URI.encode = strictEncodeURIComponent, URI.decode = decodeURIComponent, URI.iso8859 = function() {
        URI.encode = escape, URI.decode = unescape;
    }, URI.unicode = function() {
        URI.encode = strictEncodeURIComponent, URI.decode = decodeURIComponent;
    }, URI.characters = {
        pathname: {
            encode: {
                expression: /%(24|26|2B|2C|3B|3D|3A|40)/gi,
                map: {
                    "%24": "$",
                    "%26": "&",
                    "%2B": "+",
                    "%2C": ",",
                    "%3B": ";",
                    "%3D": "=",
                    "%3A": ":",
                    "%40": "@"
                }
            },
            decode: {
                expression: /[\/\?#]/g,
                map: {
                    "/": "%2F",
                    "?": "%3F",
                    "#": "%23"
                }
            }
        },
        reserved: {
            encode: {
                expression: /%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,
                map: {
                    "%3A": ":",
                    "%2F": "/",
                    "%3F": "?",
                    "%23": "#",
                    "%5B": "[",
                    "%5D": "]",
                    "%40": "@",
                    "%21": "!",
                    "%24": "$",
                    "%26": "&",
                    "%27": "'",
                    "%28": "(",
                    "%29": ")",
                    "%2A": "*",
                    "%2B": "+",
                    "%2C": ",",
                    "%3B": ";",
                    "%3D": "="
                }
            }
        },
        urnpath: {
            encode: {
                expression: /%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/gi,
                map: {
                    "%21": "!",
                    "%24": "$",
                    "%27": "'",
                    "%28": "(",
                    "%29": ")",
                    "%2A": "*",
                    "%2B": "+",
                    "%2C": ",",
                    "%3B": ";",
                    "%3D": "=",
                    "%40": "@"
                }
            },
            decode: {
                expression: /[\/\?#:]/g,
                map: {
                    "/": "%2F",
                    "?": "%3F",
                    "#": "%23",
                    ":": "%3A"
                }
            }
        }
    }, URI.encodeQuery = function(string, escapeQuerySpace) {
        var escaped = URI.encode(string + "");
        return void 0 === escapeQuerySpace && (escapeQuerySpace = URI.escapeQuerySpace), 
        escapeQuerySpace ? escaped.replace(/%20/g, "+") : escaped;
    }, URI.decodeQuery = function(string, escapeQuerySpace) {
        string += "", void 0 === escapeQuerySpace && (escapeQuerySpace = URI.escapeQuerySpace);
        try {
            return URI.decode(escapeQuerySpace ? string.replace(/\+/g, "%20") : string);
        } catch (e) {
            return string;
        }
    };
    var _part, _parts = {
        encode: "encode",
        decode: "decode"
    }, generateAccessor = function(_group, _part) {
        return function(string) {
            try {
                return URI[_part](string + "").replace(URI.characters[_group][_part].expression, function(c) {
                    return URI.characters[_group][_part].map[c];
                });
            } catch (e) {
                return string;
            }
        };
    };
    for (_part in _parts) URI[_part + "PathSegment"] = generateAccessor("pathname", _parts[_part]), 
    URI[_part + "UrnPathSegment"] = generateAccessor("urnpath", _parts[_part]);
    var generateSegmentedPathFunction = function(_sep, _codingFuncName, _innerCodingFuncName) {
        return function(string) {
            var actualCodingFunc;
            actualCodingFunc = _innerCodingFuncName ? function(string) {
                return URI[_codingFuncName](URI[_innerCodingFuncName](string));
            } : URI[_codingFuncName];
            for (var segments = (string + "").split(_sep), i = 0, length = segments.length; i < length; i++) segments[i] = actualCodingFunc(segments[i]);
            return segments.join(_sep);
        };
    };
    URI.decodePath = generateSegmentedPathFunction("/", "decodePathSegment"), URI.decodeUrnPath = generateSegmentedPathFunction(":", "decodeUrnPathSegment"), 
    URI.recodePath = generateSegmentedPathFunction("/", "encodePathSegment", "decode"), 
    URI.recodeUrnPath = generateSegmentedPathFunction(":", "encodeUrnPathSegment", "decode"), 
    URI.encodeReserved = generateAccessor("reserved", "encode"), URI.parse = function(string, parts) {
        var pos;
        return parts || (parts = {}), (pos = string.indexOf("#")) > -1 && (parts.fragment = string.substring(pos + 1) || null, 
        string = string.substring(0, pos)), (pos = string.indexOf("?")) > -1 && (parts.query = string.substring(pos + 1) || null, 
        string = string.substring(0, pos)), "//" === string.substring(0, 2) ? (parts.protocol = null, 
        string = string.substring(2), string = URI.parseAuthority(string, parts)) : (pos = string.indexOf(":")) > -1 && (parts.protocol = string.substring(0, pos) || null, 
        parts.protocol && !parts.protocol.match(URI.protocol_expression) ? parts.protocol = void 0 : "//" === string.substring(pos + 1, pos + 3) ? (string = string.substring(pos + 3), 
        string = URI.parseAuthority(string, parts)) : (string = string.substring(pos + 1), 
        parts.urn = !0)), parts.path = string, parts;
    }, URI.parseHost = function(string, parts) {
        var bracketPos, t, pos = (string = string.replace(/\\/g, "/")).indexOf("/");
        if (-1 === pos && (pos = string.length), "[" === string.charAt(0)) bracketPos = string.indexOf("]"), 
        parts.hostname = string.substring(1, bracketPos) || null, parts.port = string.substring(bracketPos + 2, pos) || null, 
        "/" === parts.port && (parts.port = null); else {
            var firstColon = string.indexOf(":"), firstSlash = string.indexOf("/"), nextColon = string.indexOf(":", firstColon + 1);
            -1 !== nextColon && (-1 === firstSlash || nextColon < firstSlash) ? (parts.hostname = string.substring(0, pos) || null, 
            parts.port = null) : (t = string.substring(0, pos).split(":"), parts.hostname = t[0] || null, 
            parts.port = t[1] || null);
        }
        return parts.hostname && "/" !== string.substring(pos).charAt(0) && (pos++, string = "/" + string), 
        string.substring(pos) || "/";
    }, URI.parseAuthority = function(string, parts) {
        return string = URI.parseUserinfo(string, parts), URI.parseHost(string, parts);
    }, URI.parseUserinfo = function(string, parts) {
        var t, firstSlash = string.indexOf("/"), pos = string.lastIndexOf("@", firstSlash > -1 ? firstSlash : string.length - 1);
        return pos > -1 && (-1 === firstSlash || pos < firstSlash) ? (t = string.substring(0, pos).split(":"), 
        parts.username = t[0] ? URI.decode(t[0]) : null, t.shift(), parts.password = t[0] ? URI.decode(t.join(":")) : null, 
        string = string.substring(pos + 1)) : (parts.username = null, parts.password = null), 
        string;
    }, URI.parseQuery = function(string, escapeQuerySpace) {
        if (!string) return {};
        if (!(string = string.replace(/&+/g, "&").replace(/^\?*&*|&+$/g, ""))) return {};
        for (var v, name, value, items = {}, splits = string.split("&"), length = splits.length, i = 0; i < length; i++) v = splits[i].split("="), 
        name = URI.decodeQuery(v.shift(), escapeQuerySpace), value = v.length ? URI.decodeQuery(v.join("="), escapeQuerySpace) : null, 
        hasOwn.call(items, name) ? ("string" != typeof items[name] && null !== items[name] || (items[name] = [ items[name] ]), 
        items[name].push(value)) : items[name] = value;
        return items;
    }, URI.build = function(parts) {
        var t = "";
        return parts.protocol && (t += parts.protocol + ":"), parts.urn || !t && !parts.hostname || (t += "//"), 
        t += URI.buildAuthority(parts) || "", "string" == typeof parts.path && ("/" !== parts.path.charAt(0) && "string" == typeof parts.hostname && (t += "/"), 
        t += parts.path), "string" == typeof parts.query && parts.query && (t += "?" + parts.query), 
        "string" == typeof parts.fragment && parts.fragment && (t += "#" + parts.fragment), 
        t;
    }, URI.buildHost = function(parts) {
        var t = "";
        return parts.hostname ? (URI.ip6_expression.test(parts.hostname) ? t += "[" + parts.hostname + "]" : t += parts.hostname, 
        parts.port && (t += ":" + parts.port), t) : "";
    }, URI.buildAuthority = function(parts) {
        return URI.buildUserinfo(parts) + URI.buildHost(parts);
    }, URI.buildUserinfo = function(parts) {
        var t = "";
        return parts.username && (t += URI.encode(parts.username), parts.password && (t += ":" + URI.encode(parts.password)), 
        t += "@"), t;
    }, URI.buildQuery = function(data, duplicateQueryParameters, escapeQuerySpace) {
        var unique, key, i, length, t = "";
        for (key in data) if (hasOwn.call(data, key) && key) if (isArray(data[key])) for (unique = {}, 
        i = 0, length = data[key].length; i < length; i++) void 0 !== data[key][i] && void 0 === unique[data[key][i] + ""] && (t += "&" + URI.buildQueryParameter(key, data[key][i], escapeQuerySpace), 
        !0 !== duplicateQueryParameters && (unique[data[key][i] + ""] = !0)); else void 0 !== data[key] && (t += "&" + URI.buildQueryParameter(key, data[key], escapeQuerySpace));
        return t.substring(1);
    }, URI.buildQueryParameter = function(name, value, escapeQuerySpace) {
        return URI.encodeQuery(name, escapeQuerySpace) + (null !== value ? "=" + URI.encodeQuery(value, escapeQuerySpace) : "");
    }, URI.addQuery = function(data, name, value) {
        if ("object" == typeof name) for (var key in name) hasOwn.call(name, key) && URI.addQuery(data, key, name[key]); else {
            if ("string" != typeof name) throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");
            if (void 0 === data[name]) return void (data[name] = value);
            "string" == typeof data[name] && (data[name] = [ data[name] ]), isArray(value) || (value = [ value ]), 
            data[name] = (data[name] || []).concat(value);
        }
    }, URI.removeQuery = function(data, name, value) {
        var i, length, key;
        if (isArray(name)) for (i = 0, length = name.length; i < length; i++) data[name[i]] = void 0; else if ("RegExp" === getType(name)) for (key in data) name.test(key) && (data[key] = void 0); else if ("object" == typeof name) for (key in name) hasOwn.call(name, key) && URI.removeQuery(data, key, name[key]); else {
            if ("string" != typeof name) throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter");
            void 0 !== value ? "RegExp" === getType(value) ? !isArray(data[name]) && value.test(data[name]) ? data[name] = void 0 : data[name] = filterArrayValues(data[name], value) : data[name] !== String(value) || isArray(value) && 1 !== value.length ? isArray(data[name]) && (data[name] = filterArrayValues(data[name], value)) : data[name] = void 0 : data[name] = void 0;
        }
    }, URI.hasQuery = function(data, name, value, withinArray) {
        switch (getType(name)) {
          case "String":
            break;

          case "RegExp":
            for (var key in data) if (hasOwn.call(data, key) && name.test(key) && (void 0 === value || URI.hasQuery(data, key, value))) return !0;
            return !1;

          case "Object":
            for (var _key in name) if (hasOwn.call(name, _key) && !URI.hasQuery(data, _key, name[_key])) return !1;
            return !0;

          default:
            throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter");
        }
        switch (getType(value)) {
          case "Undefined":
            return name in data;

          case "Boolean":
            return value === Boolean(isArray(data[name]) ? data[name].length : data[name]);

          case "Function":
            return !!value(data[name], name, data);

          case "Array":
            return !!isArray(data[name]) && (withinArray ? arrayContains : arraysEqual)(data[name], value);

          case "RegExp":
            return isArray(data[name]) ? !!withinArray && arrayContains(data[name], value) : Boolean(data[name] && data[name].match(value));

          case "Number":
            value = String(value);

          case "String":
            return isArray(data[name]) ? !!withinArray && arrayContains(data[name], value) : data[name] === value;

          default:
            throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter");
        }
    }, URI.commonPath = function(one, two) {
        var pos, length = Math.min(one.length, two.length);
        for (pos = 0; pos < length; pos++) if (one.charAt(pos) !== two.charAt(pos)) {
            pos--;
            break;
        }
        return pos < 1 ? one.charAt(0) === two.charAt(0) && "/" === one.charAt(0) ? "/" : "" : ("/" === one.charAt(pos) && "/" === two.charAt(pos) || (pos = one.substring(0, pos).lastIndexOf("/")), 
        one.substring(0, pos + 1));
    }, URI.withinString = function(string, callback, options) {
        options || (options = {});
        var _start = options.start || URI.findUri.start, _end = options.end || URI.findUri.end, _trim = options.trim || URI.findUri.trim, _attributeOpen = /[a-z0-9-]=["']?$/i;
        for (_start.lastIndex = 0; ;) {
            var match = _start.exec(string);
            if (!match) break;
            var start = match.index;
            if (options.ignoreHtml) {
                var attributeOpen = string.slice(Math.max(start - 3, 0), start);
                if (attributeOpen && _attributeOpen.test(attributeOpen)) continue;
            }
            var end = start + string.slice(start).search(_end), slice = string.slice(start, end).replace(_trim, "");
            if (!options.ignore || !options.ignore.test(slice)) {
                var result = callback(slice, start, end = start + slice.length, string);
                string = string.slice(0, start) + result + string.slice(end), _start.lastIndex = start + result.length;
            }
        }
        return _start.lastIndex = 0, string;
    }, URI.ensureValidHostname = function(v) {
        if (v.match(URI.invalid_hostname_characters)) {
            if (!punycode) throw new TypeError('Hostname "' + v + '" contains characters other than [A-Z0-9.-] and Punycode.js is not available');
            if (punycode.toASCII(v).match(URI.invalid_hostname_characters)) throw new TypeError('Hostname "' + v + '" contains characters other than [A-Z0-9.-]');
        }
    }, URI.noConflict = function(removeAll) {
        if (removeAll) {
            var unconflicted = {
                URI: this.noConflict()
            };
            return root.URITemplate && "function" == typeof root.URITemplate.noConflict && (unconflicted.URITemplate = root.URITemplate.noConflict()), 
            root.IPv6 && "function" == typeof root.IPv6.noConflict && (unconflicted.IPv6 = root.IPv6.noConflict()), 
            root.SecondLevelDomains && "function" == typeof root.SecondLevelDomains.noConflict && (unconflicted.SecondLevelDomains = root.SecondLevelDomains.noConflict()), 
            unconflicted;
        }
        return root.URI === this && (root.URI = _URI), this;
    }, p.build = function(deferBuild) {
        return !0 === deferBuild ? this._deferred_build = !0 : (void 0 === deferBuild || this._deferred_build) && (this._string = URI.build(this._parts), 
        this._deferred_build = !1), this;
    }, p.clone = function() {
        return new URI(this);
    }, p.valueOf = p.toString = function() {
        return this.build(!1)._string;
    }, p.protocol = generateSimpleAccessor("protocol"), p.username = generateSimpleAccessor("username"), 
    p.password = generateSimpleAccessor("password"), p.hostname = generateSimpleAccessor("hostname"), 
    p.port = generateSimpleAccessor("port"), p.query = generatePrefixAccessor("query", "?"), 
    p.fragment = generatePrefixAccessor("fragment", "#"), p.search = function(v, build) {
        var t = this.query(v, build);
        return "string" == typeof t && t.length ? "?" + t : t;
    }, p.hash = function(v, build) {
        var t = this.fragment(v, build);
        return "string" == typeof t && t.length ? "#" + t : t;
    }, p.pathname = function(v, build) {
        if (void 0 === v || !0 === v) {
            var res = this._parts.path || (this._parts.hostname ? "/" : "");
            return v ? (this._parts.urn ? URI.decodeUrnPath : URI.decodePath)(res) : res;
        }
        return this._parts.urn ? this._parts.path = v ? URI.recodeUrnPath(v) : "" : this._parts.path = v ? URI.recodePath(v) : "/", 
        this.build(!build), this;
    }, p.path = p.pathname, p.href = function(href, build) {
        var key;
        if (void 0 === href) return this.toString();
        this._string = "", this._parts = URI._parts();
        var _URI = href instanceof URI, _object = "object" == typeof href && (href.hostname || href.path || href.pathname);
        if (href.nodeName && (href = href[URI.getDomAttribute(href)] || "", _object = !1), 
        !_URI && _object && void 0 !== href.pathname && (href = href.toString()), "string" == typeof href || href instanceof String) this._parts = URI.parse(String(href), this._parts); else {
            if (!_URI && !_object) throw new TypeError("invalid input");
            var src = _URI ? href._parts : href;
            for (key in src) hasOwn.call(this._parts, key) && (this._parts[key] = src[key]);
        }
        return this.build(!build), this;
    }, p.is = function(what) {
        var ip = !1, ip4 = !1, ip6 = !1, name = !1, sld = !1, idn = !1, punycode = !1, relative = !this._parts.urn;
        switch (this._parts.hostname && (relative = !1, ip4 = URI.ip4_expression.test(this._parts.hostname), 
        ip6 = URI.ip6_expression.test(this._parts.hostname), sld = (name = !(ip = ip4 || ip6)) && SLD && SLD.has(this._parts.hostname), 
        idn = name && URI.idn_expression.test(this._parts.hostname), punycode = name && URI.punycode_expression.test(this._parts.hostname)), 
        what.toLowerCase()) {
          case "relative":
            return relative;

          case "absolute":
            return !relative;

          case "domain":
          case "name":
            return name;

          case "sld":
            return sld;

          case "ip":
            return ip;

          case "ip4":
          case "ipv4":
          case "inet4":
            return ip4;

          case "ip6":
          case "ipv6":
          case "inet6":
            return ip6;

          case "idn":
            return idn;

          case "url":
            return !this._parts.urn;

          case "urn":
            return !!this._parts.urn;

          case "punycode":
            return punycode;
        }
        return null;
    };
    var _protocol = p.protocol, _port = p.port, _hostname = p.hostname;
    p.protocol = function(v, build) {
        if (void 0 !== v && v && !(v = v.replace(/:(\/\/)?$/, "")).match(URI.protocol_expression)) throw new TypeError('Protocol "' + v + "\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");
        return _protocol.call(this, v, build);
    }, p.scheme = p.protocol, p.port = function(v, build) {
        if (this._parts.urn) return void 0 === v ? "" : this;
        if (void 0 !== v && (0 === v && (v = null), v && (":" === (v += "").charAt(0) && (v = v.substring(1)), 
        v.match(/[^0-9]/)))) throw new TypeError('Port "' + v + '" contains characters other than [0-9]');
        return _port.call(this, v, build);
    }, p.hostname = function(v, build) {
        if (this._parts.urn) return void 0 === v ? "" : this;
        if (void 0 !== v) {
            var x = {};
            if ("/" !== URI.parseHost(v, x)) throw new TypeError('Hostname "' + v + '" contains characters other than [A-Z0-9.-]');
            v = x.hostname;
        }
        return _hostname.call(this, v, build);
    }, p.origin = function(v, build) {
        if (this._parts.urn) return void 0 === v ? "" : this;
        if (void 0 === v) {
            var protocol = this.protocol();
            return this.authority() ? (protocol ? protocol + "://" : "") + this.authority() : "";
        }
        var origin = URI(v);
        return this.protocol(origin.protocol()).authority(origin.authority()).build(!build), 
        this;
    }, p.host = function(v, build) {
        if (this._parts.urn) return void 0 === v ? "" : this;
        if (void 0 === v) return this._parts.hostname ? URI.buildHost(this._parts) : "";
        if ("/" !== URI.parseHost(v, this._parts)) throw new TypeError('Hostname "' + v + '" contains characters other than [A-Z0-9.-]');
        return this.build(!build), this;
    }, p.authority = function(v, build) {
        if (this._parts.urn) return void 0 === v ? "" : this;
        if (void 0 === v) return this._parts.hostname ? URI.buildAuthority(this._parts) : "";
        if ("/" !== URI.parseAuthority(v, this._parts)) throw new TypeError('Hostname "' + v + '" contains characters other than [A-Z0-9.-]');
        return this.build(!build), this;
    }, p.userinfo = function(v, build) {
        if (this._parts.urn) return void 0 === v ? "" : this;
        if (void 0 === v) {
            if (!this._parts.username) return "";
            var t = URI.buildUserinfo(this._parts);
            return t.substring(0, t.length - 1);
        }
        return "@" !== v[v.length - 1] && (v += "@"), URI.parseUserinfo(v, this._parts), 
        this.build(!build), this;
    }, p.resource = function(v, build) {
        var parts;
        return void 0 === v ? this.path() + this.search() + this.hash() : (parts = URI.parse(v), 
        this._parts.path = parts.path, this._parts.query = parts.query, this._parts.fragment = parts.fragment, 
        this.build(!build), this);
    }, p.subdomain = function(v, build) {
        if (this._parts.urn) return void 0 === v ? "" : this;
        if (void 0 === v) {
            if (!this._parts.hostname || this.is("IP")) return "";
            var end = this._parts.hostname.length - this.domain().length - 1;
            return this._parts.hostname.substring(0, end) || "";
        }
        var e = this._parts.hostname.length - this.domain().length, sub = this._parts.hostname.substring(0, e), replace = new RegExp("^" + escapeRegEx(sub));
        return v && "." !== v.charAt(v.length - 1) && (v += "."), v && URI.ensureValidHostname(v), 
        this._parts.hostname = this._parts.hostname.replace(replace, v), this.build(!build), 
        this;
    }, p.domain = function(v, build) {
        if (this._parts.urn) return void 0 === v ? "" : this;
        if ("boolean" == typeof v && (build = v, v = void 0), void 0 === v) {
            if (!this._parts.hostname || this.is("IP")) return "";
            var t = this._parts.hostname.match(/\./g);
            if (t && t.length < 2) return this._parts.hostname;
            var end = this._parts.hostname.length - this.tld(build).length - 1;
            return end = this._parts.hostname.lastIndexOf(".", end - 1) + 1, this._parts.hostname.substring(end) || "";
        }
        if (!v) throw new TypeError("cannot set domain empty");
        if (URI.ensureValidHostname(v), !this._parts.hostname || this.is("IP")) this._parts.hostname = v; else {
            var replace = new RegExp(escapeRegEx(this.domain()) + "$");
            this._parts.hostname = this._parts.hostname.replace(replace, v);
        }
        return this.build(!build), this;
    }, p.tld = function(v, build) {
        if (this._parts.urn) return void 0 === v ? "" : this;
        if ("boolean" == typeof v && (build = v, v = void 0), void 0 === v) {
            if (!this._parts.hostname || this.is("IP")) return "";
            var pos = this._parts.hostname.lastIndexOf("."), tld = this._parts.hostname.substring(pos + 1);
            return !0 !== build && SLD && SLD.list[tld.toLowerCase()] ? SLD.get(this._parts.hostname) || tld : tld;
        }
        var replace;
        if (!v) throw new TypeError("cannot set TLD empty");
        if (v.match(/[^a-zA-Z0-9-]/)) {
            if (!SLD || !SLD.is(v)) throw new TypeError('TLD "' + v + '" contains characters other than [A-Z0-9]');
            replace = new RegExp(escapeRegEx(this.tld()) + "$"), this._parts.hostname = this._parts.hostname.replace(replace, v);
        } else {
            if (!this._parts.hostname || this.is("IP")) throw new ReferenceError("cannot set TLD on non-domain host");
            replace = new RegExp(escapeRegEx(this.tld()) + "$"), this._parts.hostname = this._parts.hostname.replace(replace, v);
        }
        return this.build(!build), this;
    }, p.directory = function(v, build) {
        if (this._parts.urn) return void 0 === v ? "" : this;
        if (void 0 === v || !0 === v) {
            if (!this._parts.path && !this._parts.hostname) return "";
            if ("/" === this._parts.path) return "/";
            var end = this._parts.path.length - this.filename().length - 1, res = this._parts.path.substring(0, end) || (this._parts.hostname ? "/" : "");
            return v ? URI.decodePath(res) : res;
        }
        var e = this._parts.path.length - this.filename().length, directory = this._parts.path.substring(0, e), replace = new RegExp("^" + escapeRegEx(directory));
        return this.is("relative") || (v || (v = "/"), "/" !== v.charAt(0) && (v = "/" + v)), 
        v && "/" !== v.charAt(v.length - 1) && (v += "/"), v = URI.recodePath(v), this._parts.path = this._parts.path.replace(replace, v), 
        this.build(!build), this;
    }, p.filename = function(v, build) {
        if (this._parts.urn) return void 0 === v ? "" : this;
        if (void 0 === v || !0 === v) {
            if (!this._parts.path || "/" === this._parts.path) return "";
            var pos = this._parts.path.lastIndexOf("/"), res = this._parts.path.substring(pos + 1);
            return v ? URI.decodePathSegment(res) : res;
        }
        var mutatedDirectory = !1;
        "/" === v.charAt(0) && (v = v.substring(1)), v.match(/\.?\//) && (mutatedDirectory = !0);
        var replace = new RegExp(escapeRegEx(this.filename()) + "$");
        return v = URI.recodePath(v), this._parts.path = this._parts.path.replace(replace, v), 
        mutatedDirectory ? this.normalizePath(build) : this.build(!build), this;
    }, p.suffix = function(v, build) {
        if (this._parts.urn) return void 0 === v ? "" : this;
        if (void 0 === v || !0 === v) {
            if (!this._parts.path || "/" === this._parts.path) return "";
            var s, res, filename = this.filename(), pos = filename.lastIndexOf(".");
            return -1 === pos ? "" : (s = filename.substring(pos + 1), res = /^[a-z0-9%]+$/i.test(s) ? s : "", 
            v ? URI.decodePathSegment(res) : res);
        }
        "." === v.charAt(0) && (v = v.substring(1));
        var replace, suffix = this.suffix();
        if (suffix) replace = v ? new RegExp(escapeRegEx(suffix) + "$") : new RegExp(escapeRegEx("." + suffix) + "$"); else {
            if (!v) return this;
            this._parts.path += "." + URI.recodePath(v);
        }
        return replace && (v = URI.recodePath(v), this._parts.path = this._parts.path.replace(replace, v)), 
        this.build(!build), this;
    }, p.segment = function(segment, v, build) {
        var separator = this._parts.urn ? ":" : "/", path = this.path(), absolute = "/" === path.substring(0, 1), segments = path.split(separator);
        if (void 0 !== segment && "number" != typeof segment && (build = v, v = segment, 
        segment = void 0), void 0 !== segment && "number" != typeof segment) throw new Error('Bad segment "' + segment + '", must be 0-based integer');
        if (absolute && segments.shift(), segment < 0 && (segment = Math.max(segments.length + segment, 0)), 
        void 0 === v) return void 0 === segment ? segments : segments[segment];
        if (null === segment || void 0 === segments[segment]) if (isArray(v)) {
            segments = [];
            for (var i = 0, l = v.length; i < l; i++) (v[i].length || segments.length && segments[segments.length - 1].length) && (segments.length && !segments[segments.length - 1].length && segments.pop(), 
            segments.push(trimSlashes(v[i])));
        } else (v || "string" == typeof v) && (v = trimSlashes(v), "" === segments[segments.length - 1] ? segments[segments.length - 1] = v : segments.push(v)); else v ? segments[segment] = trimSlashes(v) : segments.splice(segment, 1);
        return absolute && segments.unshift(""), this.path(segments.join(separator), build);
    }, p.segmentCoded = function(segment, v, build) {
        var segments, i, l;
        if ("number" != typeof segment && (build = v, v = segment, segment = void 0), void 0 === v) {
            if (segments = this.segment(segment, v, build), isArray(segments)) for (i = 0, l = segments.length; i < l; i++) segments[i] = URI.decode(segments[i]); else segments = void 0 !== segments ? URI.decode(segments) : void 0;
            return segments;
        }
        if (isArray(v)) for (i = 0, l = v.length; i < l; i++) v[i] = URI.encode(v[i]); else v = "string" == typeof v || v instanceof String ? URI.encode(v) : v;
        return this.segment(segment, v, build);
    };
    var q = p.query;
    return p.query = function(v, build) {
        if (!0 === v) return URI.parseQuery(this._parts.query, this._parts.escapeQuerySpace);
        if ("function" == typeof v) {
            var data = URI.parseQuery(this._parts.query, this._parts.escapeQuerySpace), result = v.call(this, data);
            return this._parts.query = URI.buildQuery(result || data, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace), 
            this.build(!build), this;
        }
        return void 0 !== v && "string" != typeof v ? (this._parts.query = URI.buildQuery(v, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace), 
        this.build(!build), this) : q.call(this, v, build);
    }, p.setQuery = function(name, value, build) {
        var data = URI.parseQuery(this._parts.query, this._parts.escapeQuerySpace);
        if ("string" == typeof name || name instanceof String) data[name] = void 0 !== value ? value : null; else {
            if ("object" != typeof name) throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");
            for (var key in name) hasOwn.call(name, key) && (data[key] = name[key]);
        }
        return this._parts.query = URI.buildQuery(data, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace), 
        "string" != typeof name && (build = value), this.build(!build), this;
    }, p.addQuery = function(name, value, build) {
        var data = URI.parseQuery(this._parts.query, this._parts.escapeQuerySpace);
        return URI.addQuery(data, name, void 0 === value ? null : value), this._parts.query = URI.buildQuery(data, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace), 
        "string" != typeof name && (build = value), this.build(!build), this;
    }, p.removeQuery = function(name, value, build) {
        var data = URI.parseQuery(this._parts.query, this._parts.escapeQuerySpace);
        return URI.removeQuery(data, name, value), this._parts.query = URI.buildQuery(data, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace), 
        "string" != typeof name && (build = value), this.build(!build), this;
    }, p.hasQuery = function(name, value, withinArray) {
        var data = URI.parseQuery(this._parts.query, this._parts.escapeQuerySpace);
        return URI.hasQuery(data, name, value, withinArray);
    }, p.setSearch = p.setQuery, p.addSearch = p.addQuery, p.removeSearch = p.removeQuery, 
    p.hasSearch = p.hasQuery, p.normalize = function() {
        return this._parts.urn ? this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build() : this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build();
    }, p.normalizeProtocol = function(build) {
        return "string" == typeof this._parts.protocol && (this._parts.protocol = this._parts.protocol.toLowerCase(), 
        this.build(!build)), this;
    }, p.normalizeHostname = function(build) {
        return this._parts.hostname && (this.is("IDN") && punycode ? this._parts.hostname = punycode.toASCII(this._parts.hostname) : this.is("IPv6") && IPv6 && (this._parts.hostname = IPv6.best(this._parts.hostname)), 
        this._parts.hostname = this._parts.hostname.toLowerCase(), this.build(!build)), 
        this;
    }, p.normalizePort = function(build) {
        return "string" == typeof this._parts.protocol && this._parts.port === URI.defaultPorts[this._parts.protocol] && (this._parts.port = null, 
        this.build(!build)), this;
    }, p.normalizePath = function(build) {
        var _path = this._parts.path;
        if (!_path) return this;
        if (this._parts.urn) return this._parts.path = URI.recodeUrnPath(this._parts.path), 
        this.build(!build), this;
        if ("/" === this._parts.path) return this;
        var _was_relative, _parent, _pos, _leadingParents = "";
        for ("/" !== (_path = URI.recodePath(_path)).charAt(0) && (_was_relative = !0, _path = "/" + _path), 
        "/.." !== _path.slice(-3) && "/." !== _path.slice(-2) || (_path += "/"), _path = _path.replace(/(\/(\.\/)+)|(\/\.$)/g, "/").replace(/\/{2,}/g, "/"), 
        _was_relative && (_leadingParents = _path.substring(1).match(/^(\.\.\/)+/) || "") && (_leadingParents = _leadingParents[0]); ;) {
            if (-1 === (_parent = _path.search(/\/\.\.(\/|$)/))) break;
            0 !== _parent ? (-1 === (_pos = _path.substring(0, _parent).lastIndexOf("/")) && (_pos = _parent), 
            _path = _path.substring(0, _pos) + _path.substring(_parent + 3)) : _path = _path.substring(3);
        }
        return _was_relative && this.is("relative") && (_path = _leadingParents + _path.substring(1)), 
        this._parts.path = _path, this.build(!build), this;
    }, p.normalizePathname = p.normalizePath, p.normalizeQuery = function(build) {
        return "string" == typeof this._parts.query && (this._parts.query.length ? this.query(URI.parseQuery(this._parts.query, this._parts.escapeQuerySpace)) : this._parts.query = null, 
        this.build(!build)), this;
    }, p.normalizeFragment = function(build) {
        return this._parts.fragment || (this._parts.fragment = null, this.build(!build)), 
        this;
    }, p.normalizeSearch = p.normalizeQuery, p.normalizeHash = p.normalizeFragment, 
    p.iso8859 = function() {
        var e = URI.encode, d = URI.decode;
        URI.encode = escape, URI.decode = decodeURIComponent;
        try {
            this.normalize();
        } finally {
            URI.encode = e, URI.decode = d;
        }
        return this;
    }, p.unicode = function() {
        var e = URI.encode, d = URI.decode;
        URI.encode = strictEncodeURIComponent, URI.decode = unescape;
        try {
            this.normalize();
        } finally {
            URI.encode = e, URI.decode = d;
        }
        return this;
    }, p.readable = function() {
        var uri = this.clone();
        uri.username("").password("").normalize();
        var t = "";
        if (uri._parts.protocol && (t += uri._parts.protocol + "://"), uri._parts.hostname && (uri.is("punycode") && punycode ? (t += punycode.toUnicode(uri._parts.hostname), 
        uri._parts.port && (t += ":" + uri._parts.port)) : t += uri.host()), uri._parts.hostname && uri._parts.path && "/" !== uri._parts.path.charAt(0) && (t += "/"), 
        t += uri.path(!0), uri._parts.query) {
            for (var q = "", i = 0, qp = uri._parts.query.split("&"), l = qp.length; i < l; i++) {
                var kv = (qp[i] || "").split("=");
                q += "&" + URI.decodeQuery(kv[0], this._parts.escapeQuerySpace).replace(/&/g, "%26"), 
                void 0 !== kv[1] && (q += "=" + URI.decodeQuery(kv[1], this._parts.escapeQuerySpace).replace(/&/g, "%26"));
            }
            t += "?" + q.substring(1);
        }
        return t += URI.decodeQuery(uri.hash(), !0);
    }, p.absoluteTo = function(base) {
        var basedir, i, p, resolved = this.clone(), properties = [ "protocol", "username", "password", "hostname", "port" ];
        if (this._parts.urn) throw new Error("URNs do not have any generally defined hierarchical components");
        if (base instanceof URI || (base = new URI(base)), resolved._parts.protocol || (resolved._parts.protocol = base._parts.protocol), 
        this._parts.hostname) return resolved;
        for (i = 0; p = properties[i]; i++) resolved._parts[p] = base._parts[p];
        return resolved._parts.path ? ".." === resolved._parts.path.substring(-2) && (resolved._parts.path += "/") : (resolved._parts.path = base._parts.path, 
        resolved._parts.query || (resolved._parts.query = base._parts.query)), "/" !== resolved.path().charAt(0) && (basedir = (basedir = base.directory()) || (0 === base.path().indexOf("/") ? "/" : ""), 
        resolved._parts.path = (basedir ? basedir + "/" : "") + resolved._parts.path, resolved.normalizePath()), 
        resolved.build(), resolved;
    }, p.relativeTo = function(base) {
        var relativeParts, baseParts, common, relativePath, basePath, relative = this.clone().normalize();
        if (relative._parts.urn) throw new Error("URNs do not have any generally defined hierarchical components");
        if (base = new URI(base).normalize(), relativeParts = relative._parts, baseParts = base._parts, 
        relativePath = relative.path(), basePath = base.path(), "/" !== relativePath.charAt(0)) throw new Error("URI is already relative");
        if ("/" !== basePath.charAt(0)) throw new Error("Cannot calculate a URI relative to another relative URI");
        if (relativeParts.protocol === baseParts.protocol && (relativeParts.protocol = null), 
        relativeParts.username !== baseParts.username || relativeParts.password !== baseParts.password) return relative.build();
        if (null !== relativeParts.protocol || null !== relativeParts.username || null !== relativeParts.password) return relative.build();
        if (relativeParts.hostname !== baseParts.hostname || relativeParts.port !== baseParts.port) return relative.build();
        if (relativeParts.hostname = null, relativeParts.port = null, relativePath === basePath) return relativeParts.path = "", 
        relative.build();
        if (!(common = URI.commonPath(relativePath, basePath))) return relative.build();
        var parents = baseParts.path.substring(common.length).replace(/[^\/]*$/, "").replace(/.*?\//g, "../");
        return relativeParts.path = parents + relativeParts.path.substring(common.length) || "./", 
        relative.build();
    }, p.equals = function(uri) {
        var one_query, two_query, key, one = this.clone(), two = new URI(uri), one_map = {}, two_map = {}, checked = {};
        if (one.normalize(), two.normalize(), one.toString() === two.toString()) return !0;
        if (one_query = one.query(), two_query = two.query(), one.query(""), two.query(""), 
        one.toString() !== two.toString()) return !1;
        if (one_query.length !== two_query.length) return !1;
        one_map = URI.parseQuery(one_query, this._parts.escapeQuerySpace), two_map = URI.parseQuery(two_query, this._parts.escapeQuerySpace);
        for (key in one_map) if (hasOwn.call(one_map, key)) {
            if (isArray(one_map[key])) {
                if (!arraysEqual(one_map[key], two_map[key])) return !1;
            } else if (one_map[key] !== two_map[key]) return !1;
            checked[key] = !0;
        }
        for (key in two_map) if (hasOwn.call(two_map, key) && !checked[key]) return !1;
        return !0;
    }, p.duplicateQueryParameters = function(v) {
        return this._parts.duplicateQueryParameters = !!v, this;
    }, p.escapeQuerySpace = function(v) {
        return this._parts.escapeQuerySpace = !!v, this;
    }, URI;
});

var firebase = null;

if (function() {
    function P(a, b) {
        if (!(b instanceof Object)) return b;
        switch (b.constructor) {
          case Date:
            return new Date(b.getTime());

          case Object:
            void 0 === a && (a = {});
            break;

          case Array:
            a = [];
            break;

          default:
            return b;
        }
        for (var c in b) b.hasOwnProperty(c) && (a[c] = P(a[c], b[c]));
        return a;
    }
    function Fa(a, b) {
        return (a = new T(a, b)).subscribe.bind(a);
    }
    function Ga(a) {
        if ("object" != typeof a || null === a) return !1;
        var b;
        b = [ "next", "error", "complete" ], n();
        var c = b[Symbol.iterator];
        for (c = (b = c ? c.call(b) : m(b)).next(); !c.done; c = b.next()) if ((c = c.value) in a && "function" == typeof a[c]) return !0;
        return !1;
    }
    function V() {}
    function Ja() {
        function a(a) {
            var b = d[a = a || "[DEFAULT]"];
            return void 0 === b && Z("noApp", {
                name: a
            }), b;
        }
        function b(a, b) {
            Object.keys(e).forEach(function(d) {
                null !== (d = c(a, d)) && f[d] && f[d](b, a);
            });
        }
        function c(a, b) {
            if ("serverAuth" === b) return null;
            var c = b;
            return a = a.options, "auth" === b && (a.serviceAccount || a.credential) && (c = "serverAuth", 
            "serverAuth" in e || Z("serverAuthMissing")), c;
        }
        var d = {}, e = {}, f = {}, g = {
            __esModule: !0,
            initializeApp: function(a, c) {
                return void 0 === c ? c = "[DEFAULT]" : "string" == typeof c && "" !== c || Z("bad-app-name", {
                    name: c + ""
                }), void 0 !== d[c] && Z("dupApp", {
                    name: c
                }), a = new X(a, c, g), d[c] = a, b(a, "create"), void 0 != a.INTERNAL && void 0 != a.INTERNAL.getToken || P(a, {
                    INTERNAL: {
                        getToken: function() {
                            return W.resolve(null);
                        },
                        addAuthTokenListener: function() {},
                        removeAuthTokenListener: function() {}
                    }
                }), a;
            },
            app: a,
            apps: null,
            Promise: W,
            SDK_VERSION: "0.0.0",
            INTERNAL: {
                registerService: function(b, c, d, u) {
                    return e[b] && Z("dupService", {
                        name: b
                    }), e[b] = c, u && (f[b] = u), c = function(c) {
                        return void 0 === c && (c = a()), c[b]();
                    }, void 0 !== d && P(c, d), g[b] = c;
                },
                createFirebaseNamespace: Ja,
                extendNamespace: function(a) {
                    P(g, a);
                },
                createSubscribe: Fa,
                ErrorFactory: Q,
                removeApp: function(a) {
                    b(d[a], "delete"), delete d[a];
                },
                factories: e,
                useAsService: c,
                Promise: O,
                deepExtend: P
            }
        };
        return g.default = g, Object.defineProperty(g, "apps", {
            get: function() {
                return Object.keys(d).map(function(a) {
                    return d[a];
                });
            }
        }), a.App = X, g;
    }
    function Z(a, b) {
        throw Error(Ia(a, b));
    }
    function Ia(a, b) {
        return b = b || {}, void 0 === (b = {
            noApp: "No Firebase App '" + b.name + "' has been created - call Firebase App.initializeApp().",
            "bad-app-name": "Illegal App name: '" + b.name + "'.",
            dupApp: "Firebase App named '" + b.name + "' already exists.",
            deleted: "Firebase App named '" + b.name + "' already deleted.",
            dupService: "Firebase Service named '" + b.name + "' already registered.",
            serverAuthMissing: "Initializing the Firebase SDK with a service account is only allowed in a Node.js environment. On client devices, you should instead initialize the SDK with an api key and auth domain."
        }[a]) ? "Application Error: (" + a + ")" : b;
    }
    var z, aa = "function" == typeof Object.defineProperties ? Object.defineProperty : function(a, b, c) {
        if (c.get || c.set) throw new TypeError("ES3 does not support getters and setters.");
        a != Array.prototype && a != Object.prototype && (a[b] = c.value);
    }, h = "undefined" != typeof window && window === this ? this : "undefined" != typeof global ? global : this, k = function() {
        k = function() {}, h.Symbol || (h.Symbol = ba);
    }, ca = 0, ba = function(a) {
        return "jscomp_symbol_" + (a || "") + ca++;
    }, n = function() {
        k();
        var a = h.Symbol.iterator;
        a || (a = h.Symbol.iterator = h.Symbol("iterator")), "function" != typeof Array.prototype[a] && aa(Array.prototype, a, {
            configurable: !0,
            writable: !0,
            value: function() {
                return m(this);
            }
        }), n = function() {};
    }, m = function(a) {
        var b = 0;
        return da(function() {
            return b < a.length ? {
                done: !1,
                value: a[b++]
            } : {
                done: !0
            };
        });
    }, da = function(a) {
        return n(), a = {
            next: a
        }, a[h.Symbol.iterator] = function() {
            return this;
        }, a;
    }, q = this, r = function() {}, t = function(a) {
        var b = typeof a;
        if ("object" == b) {
            if (!a) return "null";
            if (a instanceof Array) return "array";
            if (a instanceof Object) return b;
            var c = Object.prototype.toString.call(a);
            if ("[object Window]" == c) return "object";
            if ("[object Array]" == c || "number" == typeof a.length && void 0 !== a.splice && void 0 !== a.propertyIsEnumerable && !a.propertyIsEnumerable("splice")) return "array";
            if ("[object Function]" == c || void 0 !== a.call && void 0 !== a.propertyIsEnumerable && !a.propertyIsEnumerable("call")) return "function";
        } else if ("function" == b && void 0 === a.call) return "object";
        return b;
    }, v = function(a) {
        return "function" == t(a);
    }, ea = function(a, b, c) {
        return a.call.apply(a.bind, arguments);
    }, fa = function(a, b, c) {
        if (!a) throw Error();
        if (2 < arguments.length) {
            var d = Array.prototype.slice.call(arguments, 2);
            return function() {
                var c = Array.prototype.slice.call(arguments);
                return Array.prototype.unshift.apply(c, d), a.apply(b, c);
            };
        }
        return function() {
            return a.apply(b, arguments);
        };
    }, w = function(a, b, c) {
        return (w = Function.prototype.bind && -1 != Function.prototype.bind.toString().indexOf("native code") ? ea : fa).apply(null, arguments);
    }, x = function(a, b) {
        var c = Array.prototype.slice.call(arguments, 1);
        return function() {
            var b = c.slice();
            return b.push.apply(b, arguments), a.apply(this, b);
        };
    }, y = function(a, b) {
        function c() {}
        c.prototype = b.prototype, a.ga = b.prototype, a.prototype = new c(), a.prototype.constructor = a, 
        a.fa = function(a, c, f) {
            for (var d = Array(arguments.length - 2), e = 2; e < arguments.length; e++) d[e - 2] = arguments[e];
            return b.prototype[c].apply(a, d);
        };
    };
    void 0 !== (z = "undefined" != typeof window ? window : "undefined" != typeof self ? self : global).L && z.L || (z.ca = function(a, b) {
        function c() {
            this.constructor = a;
        }
        for (var d in b) b.hasOwnProperty(d) && (a[d] = b[d]);
        a.prototype = null === b ? Object.create(b) : (c.prototype = b.prototype, new c());
    }, z.ba = function(a, b, c, d) {
        var g, e = arguments.length, f = 3 > e ? b : null === d ? d = Object.getOwnPropertyDescriptor(b, c) : d;
        if ("object" == typeof (g = z.Reflect) && "function" == typeof g.decorate) f = g.decorate(a, b, c, d); else for (var l = a.length - 1; 0 <= l; l--) (g = a[l]) && (f = (3 > e ? g(f) : 3 < e ? g(b, c, f) : g(b, c)) || f);
        return 3 < e && f && Object.defineProperty(b, c, f), f;
    }, z.da = function(a, b) {
        var c = z.Reflect;
        if ("object" == typeof c && "function" == typeof c.metadata) return c.metadata(a, b);
    }, z.ea = function(a, b) {
        return function(c, d) {
            b(c, d, a);
        };
    }, z.aa = function(a, b, c, d) {
        return new (c || (c = Promise))(function(e, f) {
            function g(a) {
                try {
                    p(d.next(a));
                } catch (u) {
                    f(u);
                }
            }
            function l(a) {
                try {
                    p(d.throw(a));
                } catch (u) {
                    f(u);
                }
            }
            function p(a) {
                a.done ? e(a.value) : new c(function(b) {
                    b(a.value);
                }).then(g, l);
            }
            p((d = d.apply(a, b)).next());
        });
    });
    var A = function(a) {
        if (Error.captureStackTrace) Error.captureStackTrace(this, A); else {
            var b = Error().stack;
            b && (this.stack = b);
        }
        a && (this.message = String(a));
    };
    y(A, Error), A.prototype.name = "CustomError";
    var ga = function(a, b) {
        for (var c = a.split("%s"), d = "", e = Array.prototype.slice.call(arguments, 1); e.length && 1 < c.length; ) d += c.shift() + e.shift();
        return d + c.join("%s");
    }, B = function(a, b) {
        b.unshift(a), A.call(this, ga.apply(null, b)), b.shift();
    };
    y(B, A), B.prototype.name = "AssertionError";
    var ha = function(a, b, c, d) {
        e = "Assertion failed";
        if (c) var e = e + ": " + c, f = d; else a && (e += ": " + a, f = b);
        throw new B("" + e, f || []);
    }, C = function(a, b, c) {
        a || ha("", null, b, Array.prototype.slice.call(arguments, 2));
    }, D = function(a, b, c) {
        v(a) || ha("Expected function but got %s: %s.", [ t(a), a ], b, Array.prototype.slice.call(arguments, 2));
    }, E = function(a, b, c) {
        this.S = c, this.M = a, this.U = b, this.s = 0, this.o = null;
    };
    E.prototype.get = function() {
        var a;
        return 0 < this.s ? (this.s--, a = this.o, this.o = a.next, a.next = null) : a = this.M(), 
        a;
    }, E.prototype.put = function(a) {
        this.U(a), this.s < this.S && (this.s++, a.next = this.o, this.o = a);
    };
    var F;
    a: {
        var ia = q.navigator;
        if (ia) {
            var ja = ia.userAgent;
            if (ja) {
                F = ja;
                break a;
            }
        }
        F = "";
    }
    var G, ka = function(a) {
        q.setTimeout(function() {
            throw a;
        }, 0);
    }, la = function() {
        var a = q.MessageChannel;
        if (void 0 === a && "undefined" != typeof window && window.postMessage && window.addEventListener && -1 == F.indexOf("Presto") && (a = function() {
            (a = document.createElement("IFRAME")).style.display = "none", a.src = "", document.documentElement.appendChild(a);
            var b = a.contentWindow;
            (a = b.document).open(), a.write(""), a.close();
            var c = "callImmediate" + Math.random(), d = "file:" == b.location.protocol ? "*" : b.location.protocol + "//" + b.location.host, a = w(function(a) {
                "*" != d && a.origin != d || a.data != c || this.port1.onmessage();
            }, this);
            b.addEventListener("message", a, !1), this.port1 = {}, this.port2 = {
                postMessage: function() {
                    b.postMessage(c, d);
                }
            };
        }), void 0 !== a && -1 == F.indexOf("Trident") && -1 == F.indexOf("MSIE")) {
            var b = new a(), c = {}, d = c;
            return b.port1.onmessage = function() {
                if (void 0 !== c.next) {
                    var a = (c = c.next).F;
                    c.F = null, a();
                }
            }, function(a) {
                d.next = {
                    F: a
                }, d = d.next, b.port2.postMessage(0);
            };
        }
        return "undefined" != typeof document && "onreadystatechange" in document.createElement("SCRIPT") ? function(a) {
            var b = document.createElement("SCRIPT");
            b.onreadystatechange = function() {
                b.onreadystatechange = null, b.parentNode.removeChild(b), b = null, a(), a = null;
            }, document.documentElement.appendChild(b);
        } : function(a) {
            q.setTimeout(a, 0);
        };
    }, H = function() {
        this.v = this.f = null;
    }, ma = new E(function() {
        return new I();
    }, function(a) {
        a.reset();
    }, 100);
    H.prototype.add = function(a, b) {
        var c = ma.get();
        c.set(a, b), this.v ? this.v.next = c : (C(!this.f), this.f = c), this.v = c;
    }, H.prototype.remove = function() {
        var a = null;
        return this.f && (a = this.f, this.f = this.f.next, this.f || (this.v = null), a.next = null), 
        a;
    };
    var I = function() {
        this.next = this.scope = this.B = null;
    };
    I.prototype.set = function(a, b) {
        this.B = a, this.scope = b, this.next = null;
    }, I.prototype.reset = function() {
        this.next = this.scope = this.B = null;
    };
    var J, M = function(a, b) {
        J || na(), L || (J(), L = !0), oa.add(a, b);
    }, na = function() {
        if (q.Promise && q.Promise.resolve) {
            var a = q.Promise.resolve(void 0);
            J = function() {
                a.then(pa);
            };
        } else J = function() {
            var a = pa;
            !v(q.setImmediate) || q.Window && q.Window.prototype && -1 == F.indexOf("Edge") && q.Window.prototype.setImmediate == q.setImmediate ? (G || (G = la()), 
            G(a)) : q.setImmediate(a);
        };
    }, L = !1, oa = new H(), pa = function() {
        for (var a; a = oa.remove(); ) {
            try {
                a.B.call(a.scope);
            } catch (b) {
                ka(b);
            }
            ma.put(a);
        }
        L = !1;
    }, O = function(a, b) {
        if (this.b = 0, this.K = void 0, this.j = this.g = this.u = null, this.m = this.A = !1, 
        a != r) try {
            var c = this;
            a.call(b, function(a) {
                N(c, 2, a);
            }, function(a) {
                try {
                    if (a instanceof Error) throw a;
                    throw Error("Promise rejected.");
                } catch (e) {}
                N(c, 3, a);
            });
        } catch (d) {
            N(this, 3, d);
        }
    }, qa = function() {
        this.next = this.context = this.h = this.c = this.child = null, this.w = !1;
    };
    qa.prototype.reset = function() {
        this.context = this.h = this.c = this.child = null, this.w = !1;
    };
    var ra = new E(function() {
        return new qa();
    }, function(a) {
        a.reset();
    }, 100), sa = function(a, b, c) {
        var d = ra.get();
        return d.c = a, d.h = b, d.context = c, d;
    }, ua = function(a, b, c) {
        ta(a, b, c, null) || M(x(b, a));
    };
    O.prototype.then = function(a, b, c) {
        return null != a && D(a, "opt_onFulfilled should be a function."), null != b && D(b, "opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?"), 
        va(this, v(a) ? a : null, v(b) ? b : null, c);
    }, O.prototype.then = O.prototype.then, O.prototype.$goog_Thenable = !0, O.prototype.X = function(a, b) {
        return va(this, null, a, b);
    };
    var xa = function(a, b) {
        a.g || 2 != a.b && 3 != a.b || wa(a), C(null != b.c), a.j ? a.j.next = b : a.g = b, 
        a.j = b;
    }, va = function(a, b, c, d) {
        var e = sa(null, null, null);
        return e.child = new O(function(a, g) {
            e.c = b ? function(c) {
                try {
                    var e = b.call(d, c);
                    a(e);
                } catch (K) {
                    g(K);
                }
            } : a, e.h = c ? function(b) {
                try {
                    var e = c.call(d, b);
                    a(e);
                } catch (K) {
                    g(K);
                }
            } : g;
        }), e.child.u = a, xa(a, e), e.child;
    };
    O.prototype.Y = function(a) {
        C(1 == this.b), this.b = 0, N(this, 2, a);
    }, O.prototype.Z = function(a) {
        C(1 == this.b), this.b = 0, N(this, 3, a);
    };
    var N = function(a, b, c) {
        0 == a.b && (a === c && (b = 3, c = new TypeError("Promise cannot resolve to itself")), 
        a.b = 1, ta(c, a.Y, a.Z, a) || (a.K = c, a.b = b, a.u = null, wa(a), 3 != b || ya(a, c)));
    }, ta = function(a, b, c, d) {
        if (a instanceof O) return null != b && D(b, "opt_onFulfilled should be a function."), 
        null != c && D(c, "opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?"), 
        xa(a, sa(b || r, c || null, d)), !0;
        var e;
        if (a) try {
            e = !!a.$goog_Thenable;
        } catch (g) {
            e = !1;
        } else e = !1;
        if (e) return a.then(b, c, d), !0;
        if ("object" == (e = typeof a) && null != a || "function" == e) try {
            var f = a.then;
            if (v(f)) return za(a, f, b, c, d), !0;
        } catch (g) {
            return c.call(d, g), !0;
        }
        return !1;
    }, za = function(a, b, c, d, e) {
        var f = !1, l = function(a) {
            f || (f = !0, d.call(e, a));
        };
        try {
            b.call(a, function(a) {
                f || (f = !0, c.call(e, a));
            }, l);
        } catch (p) {
            l(p);
        }
    }, wa = function(a) {
        a.A || (a.A = !0, M(a.O, a));
    }, Aa = function(a) {
        var b = null;
        return a.g && (b = a.g, a.g = b.next, b.next = null), a.g || (a.j = null), null != b && C(null != b.c), 
        b;
    };
    O.prototype.O = function() {
        for (var a; a = Aa(this); ) {
            var b = this.b, c = this.K;
            if (3 == b && a.h && !a.w) {
                var d;
                for (d = this; d && d.m; d = d.u) d.m = !1;
            }
            if (a.child) a.child.u = null, Ba(a, b, c); else try {
                a.w ? a.c.call(a.context) : Ba(a, b, c);
            } catch (e) {
                Ca.call(null, e);
            }
            ra.put(a);
        }
        this.A = !1;
    };
    var Ba = function(a, b, c) {
        2 == b ? a.c.call(a.context, c) : a.h && a.h.call(a.context, c);
    }, ya = function(a, b) {
        a.m = !0, M(function() {
            a.m && Ca.call(null, b);
        });
    }, Ca = ka, Da = Error.captureStackTrace, R = function(a, b) {
        if (this.code = a, this.message = b, Da) Da(this, Q.prototype.create); else {
            var c = Error.apply(this, arguments);
            this.name = "FirebaseError", Object.defineProperty(this, "stack", {
                get: function() {
                    return c.stack;
                }
            });
        }
    };
    (R.prototype = Object.create(Error.prototype)).constructor = R, R.prototype.name = "FirebaseError";
    var Q = function(a, b, c) {
        this.V = a, this.W = b, this.N = c, this.pattern = /\{\$([^}]+)}/g;
    };
    Q.prototype.create = function(a, b) {
        void 0 === b && (b = {});
        c = this.N[a];
        a = this.V + "/" + a;
        var d, c = void 0 === c ? "Error" : c.replace(this.pattern, function(a, c) {
            return void 0 !== (a = b[c]) ? a.toString() : "<" + c + "?>";
        }), c = this.W + ": " + c + " (" + a + ").", c = new R(a, c);
        for (d in b) b.hasOwnProperty(d) && "_" !== d.slice(-1) && (c[d] = b[d]);
        return c;
    }, O.all = function(a) {
        return new O(function(b, c) {
            var d = a.length, e = [];
            if (d) for (var p, l = 0; l < a.length; l++) p = a[l], ua(p, x(function(a, c) {
                d--, e[a] = c, 0 == d && b(e);
            }, l), function(a) {
                c(a);
            }); else b(e);
        });
    }, O.resolve = function(a) {
        if (a instanceof O) return a;
        var b = new O(r);
        return N(b, 2, a), b;
    }, O.reject = function(a) {
        return new O(function(b, c) {
            c(a);
        });
    }, O.prototype.catch = O.prototype.X;
    var S = O;
    "undefined" != typeof Promise && (S = Promise);
    var Ea = S, T = function(a, b) {
        var c = this;
        this.a = [], this.J = 0, this.task = Ea.resolve(), this.l = !1, this.D = b, this.task.then(function() {
            a(c);
        }).catch(function(a) {
            c.error(a);
        });
    };
    T.prototype.next = function(a) {
        U(this, function(b) {
            b.next(a);
        });
    }, T.prototype.error = function(a) {
        U(this, function(b) {
            b.error(a);
        }), this.close(a);
    }, T.prototype.complete = function() {
        U(this, function(a) {
            a.complete();
        }), this.close();
    }, T.prototype.subscribe = function(a, b, c) {
        var e, d = this;
        if (void 0 === a && void 0 === b && void 0 === c) throw Error("Missing Observer.");
        return void 0 === (e = Ga(a) ? a : {
            next: a,
            error: b,
            complete: c
        }).next && (e.next = V), void 0 === e.error && (e.error = V), void 0 === e.complete && (e.complete = V), 
        a = this.$.bind(this, this.a.length), this.l && this.task.then(function() {
            try {
                d.G ? e.error(d.G) : e.complete();
            } catch (f) {}
        }), this.a.push(e), a;
    }, T.prototype.$ = function(a) {
        void 0 !== this.a && void 0 !== this.a[a] && (delete this.a[a], 0 === --this.J && void 0 !== this.D && this.D(this));
    };
    var U = function(a, b) {
        if (!a.l) for (var c = 0; c < a.a.length; c++) Ha(a, c, b);
    }, Ha = function(a, b, c) {
        a.task.then(function() {
            if (void 0 !== a.a && void 0 !== a.a[b]) try {
                c(a.a[b]);
            } catch (d) {}
        });
    };
    T.prototype.close = function(a) {
        var b = this;
        this.l || (this.l = !0, void 0 !== a && (this.G = a), this.task.then(function() {
            b.a = void 0, b.D = void 0;
        }));
    };
    var W = S, X = function(a, b, c) {
        var d = this;
        this.H = c, this.I = !1, this.i = {}, this.C = b, this.T = P(void 0, a), Object.keys(c.INTERNAL.factories).forEach(function(a) {
            var b = c.INTERNAL.useAsService(d, a);
            null !== b && (d[a] = d.R.bind(d, b));
        });
    };
    X.prototype.delete = function() {
        var a = this;
        return new W(function(b) {
            Y(a), b();
        }).then(function() {
            return a.H.INTERNAL.removeApp(a.C), W.all(Object.keys(a.i).map(function(b) {
                return a.i[b].INTERNAL.delete();
            }));
        }).then(function() {
            a.I = !0, a.i = {};
        });
    }, X.prototype.R = function(a) {
        return Y(this), void 0 === this.i[a] && (this.i[a] = this.H.INTERNAL.factories[a](this, this.P.bind(this))), 
        this.i[a];
    }, X.prototype.P = function(a) {
        P(this, a);
    };
    var Y = function(a) {
        a.I && Z(Ia("deleted", {
            name: a.C
        }));
    };
    h.Object.defineProperties(X.prototype, {
        name: {
            configurable: !0,
            enumerable: !0,
            get: function() {
                return Y(this), this.C;
            }
        },
        options: {
            configurable: !0,
            enumerable: !0,
            get: function() {
                return Y(this), this.T;
            }
        }
    }), X.prototype.name && X.prototype.options || X.prototype.delete || console.log("dc"), 
    void 0 !== firebase && (firebase = Ja());
}(), firebase.SDK_VERSION = "3.4.0", function() {
    var h, aa = aa || {}, l = this, ba = function() {}, ca = function() {
        throw Error("unimplemented abstract method");
    }, m = function(a) {
        var b = typeof a;
        if ("object" == b) {
            if (!a) return "null";
            if (a instanceof Array) return "array";
            if (a instanceof Object) return b;
            var c = Object.prototype.toString.call(a);
            if ("[object Window]" == c) return "object";
            if ("[object Array]" == c || "number" == typeof a.length && void 0 !== a.splice && void 0 !== a.propertyIsEnumerable && !a.propertyIsEnumerable("splice")) return "array";
            if ("[object Function]" == c || void 0 !== a.call && void 0 !== a.propertyIsEnumerable && !a.propertyIsEnumerable("call")) return "function";
        } else if ("function" == b && void 0 === a.call) return "object";
        return b;
    }, da = function(a) {
        return null === a;
    }, ea = function(a) {
        return "array" == m(a);
    }, fa = function(a) {
        var b = m(a);
        return "array" == b || "object" == b && "number" == typeof a.length;
    }, n = function(a) {
        return "string" == typeof a;
    }, ga = function(a) {
        return "number" == typeof a;
    }, p = function(a) {
        return "function" == m(a);
    }, ha = function(a) {
        var b = typeof a;
        return "object" == b && null != a || "function" == b;
    }, ia = function(a, b, c) {
        return a.call.apply(a.bind, arguments);
    }, ja = function(a, b, c) {
        if (!a) throw Error();
        if (2 < arguments.length) {
            var d = Array.prototype.slice.call(arguments, 2);
            return function() {
                var c = Array.prototype.slice.call(arguments);
                return Array.prototype.unshift.apply(c, d), a.apply(b, c);
            };
        }
        return function() {
            return a.apply(b, arguments);
        };
    }, r = function(a, b, c) {
        return (r = Function.prototype.bind && -1 != Function.prototype.bind.toString().indexOf("native code") ? ia : ja).apply(null, arguments);
    }, ka = function(a, b) {
        var c = Array.prototype.slice.call(arguments, 1);
        return function() {
            var b = c.slice();
            return b.push.apply(b, arguments), a.apply(this, b);
        };
    }, la = Date.now || function() {
        return +new Date();
    }, t = function(a, b) {
        function c() {}
        c.prototype = b.prototype, a.Pc = b.prototype, a.prototype = new c(), a.prototype.constructor = a, 
        a.Ne = function(a, c, f) {
            for (var d = Array(arguments.length - 2), e = 2; e < arguments.length; e++) d[e - 2] = arguments[e];
            return b.prototype[c].apply(a, d);
        };
    }, u = function(a) {
        if (Error.captureStackTrace) Error.captureStackTrace(this, u); else {
            var b = Error().stack;
            b && (this.stack = b);
        }
        a && (this.message = String(a));
    };
    t(u, Error), u.prototype.name = "CustomError";
    var ma = function(a, b) {
        for (var c = a.split("%s"), d = "", e = Array.prototype.slice.call(arguments, 1); e.length && 1 < c.length; ) d += c.shift() + e.shift();
        return d + c.join("%s");
    }, na = String.prototype.trim ? function(a) {
        return a.trim();
    } : function(a) {
        return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g, "");
    }, oa = /&/g, pa = /</g, qa = />/g, sa = /"/g, ta = /'/g, ua = /\x00/g, va = /[\x00&<>"']/, v = function(a, b) {
        return -1 != a.indexOf(b);
    }, wa = function(a, b) {
        return a < b ? -1 : a > b ? 1 : 0;
    }, xa = function(a, b) {
        b.unshift(a), u.call(this, ma.apply(null, b)), b.shift();
    };
    t(xa, u), xa.prototype.name = "AssertionError";
    var ya = function(a, b, c, d) {
        e = "Assertion failed";
        if (c) var e = e + ": " + c, f = d; else a && (e += ": " + a, f = b);
        throw new xa("" + e, f || []);
    }, w = function(a, b, c) {
        a || ya("", null, b, Array.prototype.slice.call(arguments, 2));
    }, za = function(a, b) {
        throw new xa("Failure" + (a ? ": " + a : ""), Array.prototype.slice.call(arguments, 1));
    }, Aa = function(a, b, c) {
        return ga(a) || ya("Expected number but got %s: %s.", [ m(a), a ], b, Array.prototype.slice.call(arguments, 2)), 
        a;
    }, Ba = function(a, b, c) {
        n(a) || ya("Expected string but got %s: %s.", [ m(a), a ], b, Array.prototype.slice.call(arguments, 2));
    }, Ca = function(a, b, c) {
        p(a) || ya("Expected function but got %s: %s.", [ m(a), a ], b, Array.prototype.slice.call(arguments, 2));
    }, Da = Array.prototype.indexOf ? function(a, b, c) {
        return w(null != a.length), Array.prototype.indexOf.call(a, b, c);
    } : function(a, b, c) {
        if (c = null == c ? 0 : 0 > c ? Math.max(0, a.length + c) : c, n(a)) return n(b) && 1 == b.length ? a.indexOf(b, c) : -1;
        for (;c < a.length; c++) if (c in a && a[c] === b) return c;
        return -1;
    }, x = Array.prototype.forEach ? function(a, b, c) {
        w(null != a.length), Array.prototype.forEach.call(a, b, c);
    } : function(a, b, c) {
        for (var d = a.length, e = n(a) ? a.split("") : a, f = 0; f < d; f++) f in e && b.call(c, e[f], f, a);
    }, Ea = function(a, b) {
        for (var c = n(a) ? a.split("") : a, d = a.length - 1; 0 <= d; --d) d in c && b.call(void 0, c[d], d, a);
    }, Fa = Array.prototype.map ? function(a, b, c) {
        return w(null != a.length), Array.prototype.map.call(a, b, c);
    } : function(a, b, c) {
        for (var d = a.length, e = Array(d), f = n(a) ? a.split("") : a, g = 0; g < d; g++) g in f && (e[g] = b.call(c, f[g], g, a));
        return e;
    }, Ga = Array.prototype.some ? function(a, b, c) {
        return w(null != a.length), Array.prototype.some.call(a, b, c);
    } : function(a, b, c) {
        for (var d = a.length, e = n(a) ? a.split("") : a, f = 0; f < d; f++) if (f in e && b.call(c, e[f], f, a)) return !0;
        return !1;
    }, Ia = function(a) {
        var b;
        a: {
            b = Ha;
            for (var c = a.length, d = n(a) ? a.split("") : a, e = 0; e < c; e++) if (e in d && b.call(void 0, d[e], e, a)) {
                b = e;
                break a;
            }
            b = -1;
        }
        return 0 > b ? null : n(a) ? a.charAt(b) : a[b];
    }, Ja = function(a, b) {
        return 0 <= Da(a, b);
    }, La = function(a, b) {
        var c;
        return (c = 0 <= (b = Da(a, b))) && Ka(a, b), c;
    }, Ka = function(a, b) {
        return w(null != a.length), 1 == Array.prototype.splice.call(a, b, 1).length;
    }, Ma = function(a, b) {
        var c = 0;
        Ea(a, function(d, e) {
            b.call(void 0, d, e, a) && Ka(a, e) && c++;
        });
    }, Na = function(a) {
        return Array.prototype.concat.apply(Array.prototype, arguments);
    }, Oa = function(a) {
        return Array.prototype.concat.apply(Array.prototype, arguments);
    }, Pa = function(a) {
        var b = a.length;
        if (0 < b) {
            for (var c = Array(b), d = 0; d < b; d++) c[d] = a[d];
            return c;
        }
        return [];
    }, Qa = function(a, b) {
        for (var c = 1; c < arguments.length; c++) {
            var d = arguments[c];
            if (fa(d)) {
                var e = a.length || 0, f = d.length || 0;
                a.length = e + f;
                for (var g = 0; g < f; g++) a[e + g] = d[g];
            } else a.push(d);
        }
    }, Ra = function(a, b) {
        for (var c in a) b.call(void 0, a[c], c, a);
    }, Sa = function(a) {
        var d, b = [], c = 0;
        for (d in a) b[c++] = a[d];
        return b;
    }, Ta = function(a) {
        var d, b = [], c = 0;
        for (d in a) b[c++] = d;
        return b;
    }, Ua = function(a) {
        for (var b in a) return !1;
        return !0;
    }, Va = function(a, b) {
        for (var c in a) if (!(c in b) || a[c] !== b[c]) return !1;
        for (c in b) if (!(c in a)) return !1;
        return !0;
    }, Wa = function(a) {
        var c, b = {};
        for (c in a) b[c] = a[c];
        return b;
    }, Xa = "constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "), Ya = function(a, b) {
        for (var c, d, e = 1; e < arguments.length; e++) {
            d = arguments[e];
            for (c in d) a[c] = d[c];
            for (var f = 0; f < Xa.length; f++) c = Xa[f], Object.prototype.hasOwnProperty.call(d, c) && (a[c] = d[c]);
        }
    }, Za;
    a: {
        var $a = l.navigator;
        if ($a) {
            var ab = $a.userAgent;
            if (ab) {
                Za = ab;
                break a;
            }
        }
        Za = "";
    }
    var y = function(a) {
        return v(Za, a);
    }, bb = function(a) {
        return bb[" "](a), a;
    };
    bb[" "] = ba;
    var db = function(a, b) {
        var c = cb;
        return Object.prototype.hasOwnProperty.call(c, a) ? c[a] : c[a] = b(a);
    }, eb = y("Opera"), z = y("Trident") || y("MSIE"), fb = y("Edge"), gb = fb || z, hb = y("Gecko") && !(v(Za.toLowerCase(), "webkit") && !y("Edge")) && !(y("Trident") || y("MSIE")) && !y("Edge"), ib = v(Za.toLowerCase(), "webkit") && !y("Edge"), jb = function() {
        var a = l.document;
        return a ? a.documentMode : void 0;
    }, kb;
    a: {
        var lb = "", mb = function() {
            var a = Za;
            return hb ? /rv\:([^\);]+)(\)|;)/.exec(a) : fb ? /Edge\/([\d\.]+)/.exec(a) : z ? /\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a) : ib ? /WebKit\/(\S+)/.exec(a) : eb ? /(?:Version)[ \/]?(\S+)/.exec(a) : void 0;
        }();
        if (mb && (lb = mb ? mb[1] : ""), z) {
            var nb = jb();
            if (null != nb && nb > parseFloat(lb)) {
                kb = String(nb);
                break a;
            }
        }
        kb = lb;
    }
    var ob = kb, cb = {}, A = function(a) {
        return db(a, function() {
            for (var b = 0, c = na(String(ob)).split("."), d = na(String(a)).split("."), e = Math.max(c.length, d.length), f = 0; 0 == b && f < e; f++) {
                var g = c[f] || "", k = d[f] || "";
                do {
                    if (g = /(\d*)(\D*)(.*)/.exec(g) || [ "", "", "", "" ], k = /(\d*)(\D*)(.*)/.exec(k) || [ "", "", "", "" ], 
                    0 == g[0].length && 0 == k[0].length) break;
                    b = wa(0 == g[1].length ? 0 : parseInt(g[1], 10), 0 == k[1].length ? 0 : parseInt(k[1], 10)) || wa(0 == g[2].length, 0 == k[2].length) || wa(g[2], k[2]), 
                    g = g[3], k = k[3];
                } while (0 == b);
            }
            return 0 <= b;
        });
    }, pb = l.document, qb = pb && z ? jb() || ("CSS1Compat" == pb.compatMode ? parseInt(ob, 10) : 5) : void 0, rb = null, sb = null, ub = function(a) {
        var b = "";
        return tb(a, function(a) {
            b += String.fromCharCode(a);
        }), b;
    }, tb = function(a, b) {
        function c(b) {
            for (;d < a.length; ) {
                var c = a.charAt(d++), e = sb[c];
                if (null != e) return e;
                if (!/^[\s\xa0]*$/.test(c)) throw Error("Unknown base64 encoding at char: " + c);
            }
            return b;
        }
        vb();
        for (var d = 0; ;) {
            var e = c(-1), f = c(0), g = c(64), k = c(64);
            if (64 === k && -1 === e) break;
            b(e << 2 | f >> 4), 64 != g && (b(f << 4 & 240 | g >> 2), 64 != k && b(g << 6 & 192 | k));
        }
    }, vb = function() {
        if (!rb) {
            rb = {}, sb = {};
            for (var a = 0; 65 > a; a++) rb[a] = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(a), 
            sb[rb[a]] = a, 62 <= a && (sb["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(a)] = a);
        }
    }, wb = !z || 9 <= Number(qb), xb = z && !A("9");
    !ib || A("528"), hb && A("1.9b") || z && A("8") || eb && A("9.5") || ib && A("528"), 
    hb && !A("8") || z && A("9");
    var yb = function() {
        this.ya = this.ya, this.Tb = this.Tb;
    };
    yb.prototype.ya = !1, yb.prototype.isDisposed = function() {
        return this.ya;
    }, yb.prototype.Oa = function() {
        if (this.Tb) for (;this.Tb.length; ) this.Tb.shift()();
    };
    var zb = function(a, b) {
        this.type = a, this.currentTarget = this.target = b, this.defaultPrevented = this.Va = !1, 
        this.ud = !0;
    };
    zb.prototype.preventDefault = function() {
        this.defaultPrevented = !0, this.ud = !1;
    };
    var Ab = function(a, b) {
        zb.call(this, a ? a.type : ""), this.relatedTarget = this.currentTarget = this.target = null, 
        this.charCode = this.keyCode = this.button = this.screenY = this.screenX = this.clientY = this.clientX = this.offsetY = this.offsetX = 0, 
        this.metaKey = this.shiftKey = this.altKey = this.ctrlKey = !1, this.lb = this.state = null, 
        a && this.init(a, b);
    };
    t(Ab, zb), Ab.prototype.init = function(a, b) {
        var c = this.type = a.type, d = a.changedTouches ? a.changedTouches[0] : null;
        if (this.target = a.target || a.srcElement, this.currentTarget = b, b = a.relatedTarget) {
            if (hb) {
                var e;
                a: {
                    try {
                        bb(b.nodeName), e = !0;
                        break a;
                    } catch (f) {}
                    e = !1;
                }
                e || (b = null);
            }
        } else "mouseover" == c ? b = a.fromElement : "mouseout" == c && (b = a.toElement);
        this.relatedTarget = b, null === d ? (this.offsetX = ib || void 0 !== a.offsetX ? a.offsetX : a.layerX, 
        this.offsetY = ib || void 0 !== a.offsetY ? a.offsetY : a.layerY, this.clientX = void 0 !== a.clientX ? a.clientX : a.pageX, 
        this.clientY = void 0 !== a.clientY ? a.clientY : a.pageY, this.screenX = a.screenX || 0, 
        this.screenY = a.screenY || 0) : (this.clientX = void 0 !== d.clientX ? d.clientX : d.pageX, 
        this.clientY = void 0 !== d.clientY ? d.clientY : d.pageY, this.screenX = d.screenX || 0, 
        this.screenY = d.screenY || 0), this.button = a.button, this.keyCode = a.keyCode || 0, 
        this.charCode = a.charCode || ("keypress" == c ? a.keyCode : 0), this.ctrlKey = a.ctrlKey, 
        this.altKey = a.altKey, this.shiftKey = a.shiftKey, this.metaKey = a.metaKey, this.state = a.state, 
        this.lb = a, a.defaultPrevented && this.preventDefault();
    }, Ab.prototype.preventDefault = function() {
        Ab.Pc.preventDefault.call(this);
        var a = this.lb;
        if (a.preventDefault) a.preventDefault(); else if (a.returnValue = !1, xb) try {
            (a.ctrlKey || 112 <= a.keyCode && 123 >= a.keyCode) && (a.keyCode = -1);
        } catch (b) {}
    }, Ab.prototype.ce = function() {
        return this.lb;
    };
    var Bb = "closure_listenable_" + (1e6 * Math.random() | 0), Cb = 0, Db = function(a, b, c, d, e) {
        this.listener = a, this.Xb = null, this.src = b, this.type = c, this.Cb = !!d, this.Kb = e, 
        this.key = ++Cb, this.$a = this.Bb = !1;
    }, Eb = function(a) {
        a.$a = !0, a.listener = null, a.Xb = null, a.src = null, a.Kb = null;
    }, Fb = function(a) {
        this.src = a, this.w = {}, this.yb = 0;
    };
    Fb.prototype.add = function(a, b, c, d, e) {
        var f = a.toString();
        (a = this.w[f]) || (a = this.w[f] = [], this.yb++);
        var g = Gb(a, b, d, e);
        return -1 < g ? (b = a[g], c || (b.Bb = !1)) : (b = new Db(b, this.src, f, !!d, e), 
        b.Bb = c, a.push(b)), b;
    }, Fb.prototype.remove = function(a, b, c, d) {
        if (!((a = a.toString()) in this.w)) return !1;
        var e = this.w[a];
        return -1 < (b = Gb(e, b, c, d)) && (Eb(e[b]), Ka(e, b), 0 == e.length && (delete this.w[a], 
        this.yb--), !0);
    };
    var Hb = function(a, b) {
        var c = b.type;
        c in a.w && La(a.w[c], b) && (Eb(b), 0 == a.w[c].length && (delete a.w[c], a.yb--));
    };
    Fb.prototype.uc = function(a, b, c, d) {
        var e = -1;
        return (a = this.w[a.toString()]) && (e = Gb(a, b, c, d)), -1 < e ? a[e] : null;
    };
    var Gb = function(a, b, c, d) {
        for (var e = 0; e < a.length; ++e) {
            var f = a[e];
            if (!f.$a && f.listener == b && f.Cb == !!c && f.Kb == d) return e;
        }
        return -1;
    }, Ib = "closure_lm_" + (1e6 * Math.random() | 0), Jb = {}, Kb = 0, Lb = function(a, b, c, d, e) {
        if (ea(b)) for (var f = 0; f < b.length; f++) Lb(a, b[f], c, d, e); else c = Mb(c), 
        a && a[Bb] ? a.listen(b, c, d, e) : Nb(a, b, c, !1, d, e);
    }, Nb = function(a, b, c, d, e, f) {
        if (!b) throw Error("Invalid event type");
        var g = !!e, k = Ob(a);
        if (k || (a[Ib] = k = new Fb(a)), !(c = k.add(b, c, d, e, f)).Xb) {
            if (d = Pb(), c.Xb = d, d.src = a, d.listener = c, a.addEventListener) a.addEventListener(b.toString(), d, g); else {
                if (!a.attachEvent) throw Error("addEventListener and attachEvent are unavailable.");
                a.attachEvent(Qb(b.toString()), d);
            }
            Kb++;
        }
    }, Pb = function() {
        var a = Rb, b = wb ? function(c) {
            return a.call(b.src, b.listener, c);
        } : function(c) {
            if (!(c = a.call(b.src, b.listener, c))) return c;
        };
        return b;
    }, Sb = function(a, b, c, d, e) {
        if (ea(b)) for (var f = 0; f < b.length; f++) Sb(a, b[f], c, d, e); else c = Mb(c), 
        a && a[Bb] ? Tb(a, b, c, d, e) : Nb(a, b, c, !0, d, e);
    }, Ub = function(a, b, c, d, e) {
        if (ea(b)) for (var f = 0; f < b.length; f++) Ub(a, b[f], c, d, e); else c = Mb(c), 
        a && a[Bb] ? a.Y.remove(String(b), c, d, e) : a && (a = Ob(a)) && (b = a.uc(b, c, !!d, e)) && Vb(b);
    }, Vb = function(a) {
        if (!ga(a) && a && !a.$a) {
            var b = a.src;
            if (b && b[Bb]) Hb(b.Y, a); else {
                var c = a.type, d = a.Xb;
                b.removeEventListener ? b.removeEventListener(c, d, a.Cb) : b.detachEvent && b.detachEvent(Qb(c), d), 
                Kb--, (c = Ob(b)) ? (Hb(c, a), 0 == c.yb && (c.src = null, b[Ib] = null)) : Eb(a);
            }
        }
    }, Qb = function(a) {
        return a in Jb ? Jb[a] : Jb[a] = "on" + a;
    }, Xb = function(a, b, c, d) {
        var e = !0;
        if ((a = Ob(a)) && (b = a.w[b.toString()])) for (b = b.concat(), a = 0; a < b.length; a++) {
            var f = b[a];
            f && f.Cb == c && !f.$a && (f = Wb(f, d), e = e && !1 !== f);
        }
        return e;
    }, Wb = function(a, b) {
        var c = a.listener, d = a.Kb || a.src;
        return a.Bb && Vb(a), c.call(d, b);
    }, Rb = function(a, b) {
        if (a.$a) return !0;
        if (!wb) {
            if (!b) a: {
                b = [ "window", "event" ];
                for (var d, c = l; d = b.shift(); ) {
                    if (null == c[d]) {
                        b = null;
                        break a;
                    }
                    c = c[d];
                }
                b = c;
            }
            if (d = b, b = new Ab(d, this), c = !0, !(0 > d.keyCode || void 0 != d.returnValue)) {
                a: {
                    var e = !1;
                    if (0 == d.keyCode) try {
                        d.keyCode = -1;
                        break a;
                    } catch (g) {
                        e = !0;
                    }
                    (e || void 0 == d.returnValue) && (d.returnValue = !0);
                }
                for (d = [], e = b.currentTarget; e; e = e.parentNode) d.push(e);
                for (a = a.type, e = d.length - 1; !b.Va && 0 <= e; e--) {
                    b.currentTarget = d[e];
                    var f = Xb(d[e], a, !0, b), c = c && f;
                }
                for (e = 0; !b.Va && e < d.length; e++) b.currentTarget = d[e], f = Xb(d[e], a, !1, b), 
                c = c && f;
            }
            return c;
        }
        return Wb(a, new Ab(b, this));
    }, Ob = function(a) {
        return (a = a[Ib]) instanceof Fb ? a : null;
    }, Yb = "__closure_events_fn_" + (1e9 * Math.random() >>> 0), Mb = function(a) {
        return w(a, "Listener can not be null."), p(a) ? a : (w(a.handleEvent, "An object listener must have handleEvent method."), 
        a[Yb] || (a[Yb] = function(b) {
            return a.handleEvent(b);
        }), a[Yb]);
    }, Zb = /^[+a-zA-Z0-9_.!#$%&'*\/=?^`{|}~-]+@([a-zA-Z0-9-]+\.)+[a-zA-Z0-9]{2,63}$/, ac = function() {
        this.fc = "", this.Md = $b;
    };
    ac.prototype.Nb = !0, ac.prototype.Ib = function() {
        return this.fc;
    }, ac.prototype.toString = function() {
        return "Const{" + this.fc + "}";
    };
    var bc = function(a) {
        return a instanceof ac && a.constructor === ac && a.Md === $b ? a.fc : (za("expected object of type Const, got '" + a + "'"), 
        "type_error:Const");
    }, $b = {}, B = function() {
        this.ja = "", this.Ld = cc;
    };
    B.prototype.Nb = !0, B.prototype.Ib = function() {
        return this.ja;
    }, B.prototype.toString = function() {
        return "SafeUrl{" + this.ja + "}";
    };
    var dc = function(a) {
        return a instanceof B && a.constructor === B && a.Ld === cc ? a.ja : (za("expected object of type SafeUrl, got '" + a + "' of type " + m(a)), 
        "type_error:SafeUrl");
    }, ec = /^(?:(?:https?|mailto|ftp):|[^&:/?#]*(?:[/?#]|$))/i, gc = function(a) {
        return a instanceof B ? a : (a = a.Nb ? a.Ib() : String(a), ec.test(a) || (a = "about:invalid#zClosurez"), 
        fc(a));
    }, cc = {}, fc = function(a) {
        var b = new B();
        return b.ja = a, b;
    };
    fc("about:blank");
    var hc = function(a) {
        return !/^\s*$/.test(a) && /^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g, "@").replace(/(?:"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)[\s\u2028\u2029]*(?=:|,|]|}|$)/g, "]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g, ""));
    }, ic = function(a) {
        if (a = String(a), hc(a)) try {
            return eval("(" + a + ")");
        } catch (b) {}
        throw Error("Invalid JSON string: " + a);
    }, lc = function(a) {
        var b = [];
        return jc(new kc(), a, b), b.join("");
    }, kc = function() {
        this.ac = void 0;
    }, jc = function(a, b, c) {
        if (null == b) c.push("null"); else {
            if ("object" == typeof b) {
                if (ea(b)) {
                    var d = b;
                    b = d.length, c.push("[");
                    for (var e = "", f = 0; f < b; f++) c.push(e), e = d[f], jc(a, a.ac ? a.ac.call(d, String(f), e) : e, c), 
                    e = ",";
                    return void c.push("]");
                }
                if (!(b instanceof String || b instanceof Number || b instanceof Boolean)) {
                    c.push("{"), f = "";
                    for (d in b) Object.prototype.hasOwnProperty.call(b, d) && "function" != typeof (e = b[d]) && (c.push(f), 
                    mc(d, c), c.push(":"), jc(a, a.ac ? a.ac.call(b, d, e) : e, c), f = ",");
                    return void c.push("}");
                }
                b = b.valueOf();
            }
            switch (typeof b) {
              case "string":
                mc(b, c);
                break;

              case "number":
                c.push(isFinite(b) && !isNaN(b) ? String(b) : "null");
                break;

              case "boolean":
                c.push(String(b));
                break;

              case "function":
                c.push("null");
                break;

              default:
                throw Error("Unknown type: " + typeof b);
            }
        }
    }, nc = {
        '"': '\\"',
        "\\": "\\\\",
        "/": "\\/",
        "\b": "\\b",
        "\f": "\\f",
        "\n": "\\n",
        "\r": "\\r",
        "\t": "\\t",
        "\v": "\\u000b"
    }, oc = /\uffff/.test("\uffff") ? /[\\\"\x00-\x1f\x7f-\uffff]/g : /[\\\"\x00-\x1f\x7f-\xff]/g, mc = function(a, b) {
        b.push('"', a.replace(oc, function(a) {
            var b = nc[a];
            return b || (b = "\\u" + (65536 | a.charCodeAt(0)).toString(16).substr(1), nc[a] = b), 
            b;
        }), '"');
    }, pc = function() {};
    pc.prototype.Tc = null, pc.prototype.kb = ca;
    var qc = function(a) {
        return a.Tc || (a.Tc = a.Qb());
    };
    pc.prototype.Qb = ca;
    var rc, sc = function() {};
    t(sc, pc), sc.prototype.kb = function() {
        var a = tc(this);
        return a ? new ActiveXObject(a) : new XMLHttpRequest();
    }, sc.prototype.Qb = function() {
        var a = {};
        return tc(this) && (a[0] = !0, a[1] = !0), a;
    };
    var tc = function(a) {
        if (!a.gd && "undefined" == typeof XMLHttpRequest && "undefined" != typeof ActiveXObject) {
            for (var b = [ "MSXML2.XMLHTTP.6.0", "MSXML2.XMLHTTP.3.0", "MSXML2.XMLHTTP", "Microsoft.XMLHTTP" ], c = 0; c < b.length; c++) {
                var d = b[c];
                try {
                    return new ActiveXObject(d), a.gd = d;
                } catch (e) {}
            }
            throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");
        }
        return a.gd;
    };
    rc = new sc();
    var uc = function() {};
    t(uc, pc), uc.prototype.kb = function() {
        var a = new XMLHttpRequest();
        if ("withCredentials" in a) return a;
        if ("undefined" != typeof XDomainRequest) return new vc();
        throw Error("Unsupported browser");
    }, uc.prototype.Qb = function() {
        return {};
    };
    var vc = function() {
        this.oa = new XDomainRequest(), this.readyState = 0, this.onreadystatechange = null, 
        this.responseText = "", this.status = -1, this.statusText = this.responseXML = null, 
        this.oa.onload = r(this.ee, this), this.oa.onerror = r(this.ed, this), this.oa.onprogress = r(this.fe, this), 
        this.oa.ontimeout = r(this.ge, this);
    };
    h = vc.prototype, h.open = function(a, b, c) {
        if (null != c && !c) throw Error("Only async requests are supported.");
        this.oa.open(a, b);
    }, h.send = function(a) {
        if (a) {
            if ("string" != typeof a) throw Error("Only string data is supported");
            this.oa.send(a);
        } else this.oa.send();
    }, h.abort = function() {
        this.oa.abort();
    }, h.setRequestHeader = function() {}, h.ee = function() {
        this.status = 200, this.responseText = this.oa.responseText, wc(this, 4);
    }, h.ed = function() {
        this.status = 500, this.responseText = "", wc(this, 4);
    }, h.ge = function() {
        this.ed();
    }, h.fe = function() {
        this.status = 200, wc(this, 1);
    };
    var wc = function(a, b) {
        a.readyState = b, a.onreadystatechange && a.onreadystatechange();
    }, C = function(a, b) {
        this.h = [], this.g = b;
        for (var c = !0, d = a.length - 1; 0 <= d; d--) {
            var e = 0 | a[d];
            c && e == b || (this.h[d] = e, c = !1);
        }
    }, xc = {}, yc = function(a) {
        if (-128 <= a && 128 > a) {
            var b = xc[a];
            if (b) return b;
        }
        return b = new C([ 0 | a ], 0 > a ? -1 : 0), -128 <= a && 128 > a && (xc[a] = b), 
        b;
    }, F = function(a) {
        if (isNaN(a) || !isFinite(a)) return D;
        if (0 > a) return E(F(-a));
        for (var b = [], c = 1, d = 0; a >= c; d++) b[d] = a / c | 0, c *= 4294967296;
        return new C(b, 0);
    }, zc = function(a, b) {
        if (0 == a.length) throw Error("number format error: empty string");
        if (2 > (b = b || 10) || 36 < b) throw Error("radix out of range: " + b);
        if ("-" == a.charAt(0)) return E(zc(a.substring(1), b));
        if (0 <= a.indexOf("-")) throw Error('number format error: interior "-" character');
        for (var c = F(Math.pow(b, 8)), d = D, e = 0; e < a.length; e += 8) {
            var f = Math.min(8, a.length - e), g = parseInt(a.substring(e, e + f), b);
            8 > f ? (f = F(Math.pow(b, f)), d = d.multiply(f).add(F(g))) : (d = d.multiply(c), 
            d = d.add(F(g)));
        }
        return d;
    }, D = yc(0), Ac = yc(1), Bc = yc(16777216), Cc = function(a) {
        if (-1 == a.g) return -Cc(E(a));
        for (var b = 0, c = 1, d = 0; d < a.h.length; d++) b += Dc(a, d) * c, c *= 4294967296;
        return b;
    };
    C.prototype.toString = function(a) {
        if (2 > (a = a || 10) || 36 < a) throw Error("radix out of range: " + a);
        if (G(this)) return "0";
        if (-1 == this.g) return "-" + E(this).toString(a);
        for (var b = F(Math.pow(a, 6)), c = this, d = ""; ;) {
            var e = Ec(c, b), f = ((0 < (c = Fc(c, e.multiply(b))).h.length ? c.h[0] : c.g) >>> 0).toString(a);
            if (G(c = e)) return f + d;
            for (;6 > f.length; ) f = "0" + f;
            d = "" + f + d;
        }
    };
    var H = function(a, b) {
        return 0 > b ? 0 : b < a.h.length ? a.h[b] : a.g;
    }, Dc = function(a, b) {
        return 0 <= (a = H(a, b)) ? a : 4294967296 + a;
    }, G = function(a) {
        if (0 != a.g) return !1;
        for (var b = 0; b < a.h.length; b++) if (0 != a.h[b]) return !1;
        return !0;
    };
    C.prototype.Eb = function(a) {
        if (this.g != a.g) return !1;
        for (var b = Math.max(this.h.length, a.h.length), c = 0; c < b; c++) if (H(this, c) != H(a, c)) return !1;
        return !0;
    }, C.prototype.compare = function(a) {
        return -1 == (a = Fc(this, a)).g ? -1 : G(a) ? 0 : 1;
    };
    var E = function(a) {
        for (var b = a.h.length, c = [], d = 0; d < b; d++) c[d] = ~a.h[d];
        return new C(c, ~a.g).add(Ac);
    };
    C.prototype.add = function(a) {
        for (var b = Math.max(this.h.length, a.h.length), c = [], d = 0, e = 0; e <= b; e++) {
            var d = (g = ((f = d + (65535 & H(this, e)) + (65535 & H(a, e))) >>> 16) + (H(this, e) >>> 16) + (H(a, e) >>> 16)) >>> 16, f = 65535 & f, g = 65535 & g;
            c[e] = g << 16 | f;
        }
        return new C(c, -2147483648 & c[c.length - 1] ? -1 : 0);
    };
    var Fc = function(a, b) {
        return a.add(E(b));
    };
    C.prototype.multiply = function(a) {
        if (G(this) || G(a)) return D;
        if (-1 == this.g) return -1 == a.g ? E(this).multiply(E(a)) : E(E(this).multiply(a));
        if (-1 == a.g) return E(this.multiply(E(a)));
        if (0 > this.compare(Bc) && 0 > a.compare(Bc)) return F(Cc(this) * Cc(a));
        for (var b = this.h.length + a.h.length, c = [], d = 0; d < 2 * b; d++) c[d] = 0;
        for (d = 0; d < this.h.length; d++) for (var e = 0; e < a.h.length; e++) {
            var f = H(this, d) >>> 16, g = 65535 & H(this, d), k = H(a, e) >>> 16, q = 65535 & H(a, e);
            c[2 * d + 2 * e] += g * q, Gc(c, 2 * d + 2 * e), c[2 * d + 2 * e + 1] += f * q, 
            Gc(c, 2 * d + 2 * e + 1), c[2 * d + 2 * e + 1] += g * k, Gc(c, 2 * d + 2 * e + 1), 
            c[2 * d + 2 * e + 2] += f * k, Gc(c, 2 * d + 2 * e + 2);
        }
        for (d = 0; d < b; d++) c[d] = c[2 * d + 1] << 16 | c[2 * d];
        for (d = b; d < 2 * b; d++) c[d] = 0;
        return new C(c, 0);
    };
    var Gc = function(a, b) {
        for (;(65535 & a[b]) != a[b]; ) a[b + 1] += a[b] >>> 16, a[b] &= 65535, b++;
    }, Ec = function(a, b) {
        if (G(b)) throw Error("division by zero");
        if (G(a)) return D;
        if (-1 == a.g) return -1 == b.g ? Ec(E(a), E(b)) : E(Ec(E(a), b));
        if (-1 == b.g) return E(Ec(a, E(b)));
        if (30 < a.h.length) {
            if (-1 == a.g || -1 == b.g) throw Error("slowDivide_ only works with positive integers.");
            for (var c = Ac; 0 >= b.compare(a); ) c = c.shiftLeft(1), b = b.shiftLeft(1);
            var f, d = Hc(c, 1), e = Hc(b, 1);
            for (b = Hc(b, 2), c = Hc(c, 2); !G(b); ) 0 >= (f = e.add(b)).compare(a) && (d = d.add(c), 
            e = f), b = Hc(b, 1), c = Hc(c, 1);
            return d;
        }
        for (c = D; 0 <= a.compare(b); ) {
            d = Math.max(1, Math.floor(Cc(a) / Cc(b))), e = 48 >= (e = Math.ceil(Math.log(d) / Math.LN2)) ? 1 : Math.pow(2, e - 48);
            for (var g = (f = F(d)).multiply(b); -1 == g.g || 0 < g.compare(a); ) d -= e, f = F(d), 
            g = f.multiply(b);
            G(f) && (f = Ac), c = c.add(f), a = Fc(a, g);
        }
        return c;
    }, Ic = function(a, b) {
        for (var c = Math.max(a.h.length, b.h.length), d = [], e = 0; e < c; e++) d[e] = H(a, e) | H(b, e);
        return new C(d, a.g | b.g);
    };
    C.prototype.shiftLeft = function(a) {
        var b = a >> 5;
        a %= 32;
        for (var c = this.h.length + b + (0 < a ? 1 : 0), d = [], e = 0; e < c; e++) d[e] = 0 < a ? H(this, e - b) << a | H(this, e - b - 1) >>> 32 - a : H(this, e - b);
        return new C(d, this.g);
    };
    var Hc = function(a, b) {
        var c = b >> 5;
        b %= 32;
        for (var d = a.h.length - c, e = [], f = 0; f < d; f++) e[f] = 0 < b ? H(a, f + c) >>> b | H(a, f + c + 1) << 32 - b : H(a, f + c);
        return new C(e, a.g);
    }, Jc = function(a, b) {
        this.pb = a, this.na = b;
    };
    Jc.prototype.Eb = function(a) {
        return this.na == a.na && this.pb.Eb(Wa(a.pb));
    }, Jc.prototype.toString = ca;
    var Mc = function(a) {
        try {
            var b;
            if (b = 0 == a.lastIndexOf("[", 0)) {
                var c = a.length - 1;
                b = 0 <= c && a.indexOf("]", c) == c;
            }
            return b ? new Kc(a.substring(1, a.length - 1)) : new Lc(a);
        } catch (d) {
            return null;
        }
    }, Lc = function(a) {
        var b = D;
        if (a instanceof C) {
            if (0 != a.g || 0 > a.compare(D) || 0 < a.compare(Nc)) throw Error("The address does not look like an IPv4.");
            b = Wa(a);
        } else {
            if (!Oc.test(a)) throw Error(a + " does not look like an IPv4 address.");
            var c = a.split(".");
            if (4 != c.length) throw Error(a + " does not look like an IPv4 address.");
            for (var d = 0; d < c.length; d++) {
                var e;
                e = c[d];
                var f = Number(e);
                if (e = 0 == f && /^[\s\xa0]*$/.test(e) ? NaN : f, isNaN(e) || 0 > e || 255 < e || 1 != c[d].length && 0 == c[d].lastIndexOf("0", 0)) throw Error("In " + a + ", octet " + d + " is not valid");
                e = F(e), b = Ic(b.shiftLeft(8), e);
            }
        }
        Jc.call(this, b, 4);
    };
    t(Lc, Jc);
    var Oc = /^[0-9.]*$/, Nc = Fc(Ac.shiftLeft(32), Ac);
    Lc.prototype.toString = function() {
        if (this.Ca) return this.Ca;
        for (var a = Dc(this.pb, 0), b = [], c = 3; 0 <= c; c--) b[c] = String(255 & a), 
        a >>>= 8;
        return this.Ca = b.join(".");
    };
    var Kc = function(a) {
        var b = D;
        if (a instanceof C) {
            if (0 != a.g || 0 > a.compare(D) || 0 < a.compare(Pc)) throw Error("The address does not look like a valid IPv6.");
            b = Wa(a);
        } else {
            if (!Qc.test(a)) throw Error(a + " is not a valid IPv6 address.");
            var c = a.split(":");
            if (-1 != c[c.length - 1].indexOf(".")) {
                a = Dc(Wa(new Lc(c[c.length - 1]).pb), 0);
                var d = [];
                d.push((a >>> 16 & 65535).toString(16)), d.push((65535 & a).toString(16)), Ka(c, c.length - 1), 
                Qa(c, d), a = c.join(":");
            }
            if (2 < (d = a.split("::")).length || 1 == d.length && 8 != c.length) throw Error(a + " is not a valid IPv6 address.");
            if (1 < d.length) {
                c = d[0].split(":"), d = d[1].split(":"), 1 == c.length && "" == c[0] && (c = []), 
                1 == d.length && "" == d[0] && (d = []);
                var e = 8 - (c.length + d.length);
                if (1 > e) c = []; else {
                    for (var f = [], g = 0; g < e; g++) f[g] = "0";
                    c = Oa(c, f, d);
                }
            }
            if (8 != c.length) throw Error(a + " is not a valid IPv6 address");
            for (d = 0; d < c.length; d++) {
                if (0 > (e = zc(c[d], 16)).compare(D) || 0 < e.compare(Rc)) throw Error(c[d] + " in " + a + " is not a valid hextet.");
                b = Ic(b.shiftLeft(16), e);
            }
        }
        Jc.call(this, b, 6);
    };
    t(Kc, Jc);
    var Qc = /^([a-fA-F0-9]*:){2}[a-fA-F0-9:.]*$/, Rc = yc(65535), Pc = Fc(Ac.shiftLeft(128), Ac);
    Kc.prototype.toString = function() {
        if (this.Ca) return this.Ca;
        for (var a = [], b = 3; 0 <= b; b--) {
            var d = 65535 & (c = Dc(this.pb, b));
            a.push((c >>> 16).toString(16)), a.push(d.toString(16));
        }
        for (var c = b = -1, e = d = 0, f = 0; f < a.length; f++) "0" == a[f] ? (e++, -1 == c && (c = f), 
        e > d && (d = e, b = c)) : (c = -1, e = 0);
        return 0 < d && (b + d == a.length && a.push(""), a.splice(b, d, ""), 0 == b && (a = [ "" ].concat(a))), 
        this.Ca = a.join(":");
    };
    var Tc = function() {
        this.Wb = "", this.Nd = Sc;
    };
    Tc.prototype.Nb = !0, Tc.prototype.Ib = function() {
        return this.Wb;
    }, Tc.prototype.toString = function() {
        return "TrustedResourceUrl{" + this.Wb + "}";
    };
    var Sc = {}, Vc = function() {
        this.ja = "", this.Kd = Uc;
    };
    Vc.prototype.Nb = !0, Vc.prototype.Ib = function() {
        return this.ja;
    }, Vc.prototype.toString = function() {
        return "SafeHtml{" + this.ja + "}";
    };
    var Wc = function(a) {
        return a instanceof Vc && a.constructor === Vc && a.Kd === Uc ? a.ja : (za("expected object of type SafeHtml, got '" + a + "' of type " + m(a)), 
        "type_error:SafeHtml");
    }, Uc = {};
    Vc.prototype.ne = function(a) {
        return this.ja = a, this;
    }, !hb && !z || z && 9 <= Number(qb) || hb && A("1.9.1"), z && A("9");
    var Yc = function(a, b) {
        Ra(b, function(b, d) {
            "style" == d ? a.style.cssText = b : "class" == d ? a.className = b : "for" == d ? a.htmlFor = b : Xc.hasOwnProperty(d) ? a.setAttribute(Xc[d], b) : 0 == d.lastIndexOf("aria-", 0) || 0 == d.lastIndexOf("data-", 0) ? a.setAttribute(d, b) : a[d] = b;
        });
    }, Xc = {
        cellpadding: "cellPadding",
        cellspacing: "cellSpacing",
        colspan: "colSpan",
        frameborder: "frameBorder",
        height: "height",
        maxlength: "maxLength",
        nonce: "nonce",
        role: "role",
        rowspan: "rowSpan",
        type: "type",
        usemap: "useMap",
        valign: "vAlign",
        width: "width"
    }, Zc = function(a, b, c) {
        this.pe = c, this.Td = a, this.ye = b, this.Sb = 0, this.Lb = null;
    };
    Zc.prototype.get = function() {
        var a;
        return 0 < this.Sb ? (this.Sb--, a = this.Lb, this.Lb = a.next, a.next = null) : a = this.Td(), 
        a;
    }, Zc.prototype.put = function(a) {
        this.ye(a), this.Sb < this.pe && (this.Sb++, a.next = this.Lb, this.Lb = a);
    };
    var $c = function(a) {
        l.setTimeout(function() {
            throw a;
        }, 0);
    }, ad, bd = function() {
        var a = l.MessageChannel;
        if (void 0 === a && "undefined" != typeof window && window.postMessage && window.addEventListener && !y("Presto") && (a = function() {
            (a = document.createElement("IFRAME")).style.display = "none", a.src = "", document.documentElement.appendChild(a);
            var b = a.contentWindow;
            (a = b.document).open(), a.write(""), a.close();
            var c = "callImmediate" + Math.random(), d = "file:" == b.location.protocol ? "*" : b.location.protocol + "//" + b.location.host, a = r(function(a) {
                "*" != d && a.origin != d || a.data != c || this.port1.onmessage();
            }, this);
            b.addEventListener("message", a, !1), this.port1 = {}, this.port2 = {
                postMessage: function() {
                    b.postMessage(c, d);
                }
            };
        }), void 0 !== a && !y("Trident") && !y("MSIE")) {
            var b = new a(), c = {}, d = c;
            return b.port1.onmessage = function() {
                if (void 0 !== c.next) {
                    var a = (c = c.next).Xc;
                    c.Xc = null, a();
                }
            }, function(a) {
                d.next = {
                    Xc: a
                }, d = d.next, b.port2.postMessage(0);
            };
        }
        return "undefined" != typeof document && "onreadystatechange" in document.createElement("SCRIPT") ? function(a) {
            var b = document.createElement("SCRIPT");
            b.onreadystatechange = function() {
                b.onreadystatechange = null, b.parentNode.removeChild(b), b = null, a(), a = null;
            }, document.documentElement.appendChild(b);
        } : function(a) {
            l.setTimeout(a, 0);
        };
    }, cd = function() {
        this.kc = this.Ja = null;
    }, ed = new Zc(function() {
        return new dd();
    }, function(a) {
        a.reset();
    }, 100);
    cd.prototype.add = function(a, b) {
        var c = ed.get();
        c.set(a, b), this.kc ? this.kc.next = c : (w(!this.Ja), this.Ja = c), this.kc = c;
    }, cd.prototype.remove = function() {
        var a = null;
        return this.Ja && (a = this.Ja, this.Ja = this.Ja.next, this.Ja || (this.kc = null), 
        a.next = null), a;
    };
    var dd = function() {
        this.next = this.scope = this.tc = null;
    };
    dd.prototype.set = function(a, b) {
        this.tc = a, this.scope = b, this.next = null;
    }, dd.prototype.reset = function() {
        this.next = this.scope = this.tc = null;
    };
    var jd = function(a, b) {
        fd || gd(), hd || (fd(), hd = !0), id.add(a, b);
    }, fd, gd = function() {
        if (l.Promise && l.Promise.resolve) {
            var a = l.Promise.resolve(void 0);
            fd = function() {
                a.then(kd);
            };
        } else fd = function() {
            var a = kd;
            !p(l.setImmediate) || l.Window && l.Window.prototype && !y("Edge") && l.Window.prototype.setImmediate == l.setImmediate ? (ad || (ad = bd()), 
            ad(a)) : l.setImmediate(a);
        };
    }, hd = !1, id = new cd(), kd = function() {
        for (var a; a = id.remove(); ) {
            try {
                a.tc.call(a.scope);
            } catch (b) {
                $c(b);
            }
            ed.put(a);
        }
        hd = !1;
    }, ld = function(a) {
        a.prototype.then = a.prototype.then, a.prototype.$goog_Thenable = !0;
    }, md = function(a) {
        if (!a) return !1;
        try {
            return !!a.$goog_Thenable;
        } catch (b) {
            return !1;
        }
    }, I = function(a, b) {
        if (this.F = 0, this.ka = void 0, this.Ma = this.fa = this.o = null, this.Jb = this.sc = !1, 
        a != ba) try {
            var c = this;
            a.call(b, function(a) {
                nd(c, 2, a);
            }, function(a) {
                if (!(a instanceof od)) try {
                    if (a instanceof Error) throw a;
                    throw Error("Promise rejected.");
                } catch (e) {}
                nd(c, 3, a);
            });
        } catch (d) {
            nd(this, 3, d);
        }
    }, pd = function() {
        this.next = this.context = this.Sa = this.Ea = this.child = null, this.ib = !1;
    };
    pd.prototype.reset = function() {
        this.context = this.Sa = this.Ea = this.child = null, this.ib = !1;
    };
    var qd = new Zc(function() {
        return new pd();
    }, function(a) {
        a.reset();
    }, 100), rd = function(a, b, c) {
        var d = qd.get();
        return d.Ea = a, d.Sa = b, d.context = c, d;
    }, J = function(a) {
        if (a instanceof I) return a;
        var b = new I(ba);
        return nd(b, 2, a), b;
    }, K = function(a) {
        return new I(function(b, c) {
            c(a);
        });
    }, td = function(a, b, c) {
        sd(a, b, c, null) || jd(ka(b, a));
    }, ud = function(a) {
        return new I(function(b) {
            var c = a.length, d = [];
            if (c) for (var g, e = function(a, e, f) {
                c--, d[a] = e ? {
                    be: !0,
                    value: f
                } : {
                    be: !1,
                    reason: f
                }, 0 == c && b(d);
            }, f = 0; f < a.length; f++) g = a[f], td(g, ka(e, f, !0), ka(e, f, !1)); else b(d);
        });
    };
    I.prototype.then = function(a, b, c) {
        return null != a && Ca(a, "opt_onFulfilled should be a function."), null != b && Ca(b, "opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?"), 
        vd(this, p(a) ? a : null, p(b) ? b : null, c);
    }, ld(I);
    var xd = function(a, b) {
        return b = rd(b, b, void 0), b.ib = !0, wd(a, b), a;
    };
    I.prototype.l = function(a, b) {
        return vd(this, null, a, b);
    }, I.prototype.cancel = function(a) {
        0 == this.F && jd(function() {
            var b = new od(a);
            yd(this, b);
        }, this);
    };
    var yd = function(a, b) {
        if (0 == a.F) if (a.o) {
            var c = a.o;
            if (c.fa) {
                for (var d = 0, e = null, f = null, g = c.fa; g && (g.ib || (d++, g.child == a && (e = g), 
                !(e && 1 < d))); g = g.next) e || (f = g);
                e && (0 == c.F && 1 == d ? yd(c, b) : (f ? (d = f, w(c.fa), w(null != d), d.next == c.Ma && (c.Ma = d), 
                d.next = d.next.next) : zd(c), Ad(c, e, 3, b)));
            }
            a.o = null;
        } else nd(a, 3, b);
    }, wd = function(a, b) {
        a.fa || 2 != a.F && 3 != a.F || Bd(a), w(null != b.Ea), a.Ma ? a.Ma.next = b : a.fa = b, 
        a.Ma = b;
    }, vd = function(a, b, c, d) {
        var e = rd(null, null, null);
        return e.child = new I(function(a, g) {
            e.Ea = b ? function(c) {
                try {
                    var e = b.call(d, c);
                    a(e);
                } catch (ra) {
                    g(ra);
                }
            } : a, e.Sa = c ? function(b) {
                try {
                    var e = c.call(d, b);
                    void 0 === e && b instanceof od ? g(b) : a(e);
                } catch (ra) {
                    g(ra);
                }
            } : g;
        }), e.child.o = a, wd(a, e), e.child;
    };
    I.prototype.He = function(a) {
        w(1 == this.F), this.F = 0, nd(this, 2, a);
    }, I.prototype.Ie = function(a) {
        w(1 == this.F), this.F = 0, nd(this, 3, a);
    };
    var nd = function(a, b, c) {
        0 == a.F && (a === c && (b = 3, c = new TypeError("Promise cannot resolve to itself")), 
        a.F = 1, sd(c, a.He, a.Ie, a) || (a.ka = c, a.F = b, a.o = null, Bd(a), 3 != b || c instanceof od || Cd(a, c)));
    }, sd = function(a, b, c, d) {
        if (a instanceof I) return null != b && Ca(b, "opt_onFulfilled should be a function."), 
        null != c && Ca(c, "opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?"), 
        wd(a, rd(b || ba, c || null, d)), !0;
        if (md(a)) return a.then(b, c, d), !0;
        if (ha(a)) try {
            var e = a.then;
            if (p(e)) return Dd(a, e, b, c, d), !0;
        } catch (f) {
            return c.call(d, f), !0;
        }
        return !1;
    }, Dd = function(a, b, c, d, e) {
        var f = !1, k = function(a) {
            f || (f = !0, d.call(e, a));
        };
        try {
            b.call(a, function(a) {
                f || (f = !0, c.call(e, a));
            }, k);
        } catch (q) {
            k(q);
        }
    }, Bd = function(a) {
        a.sc || (a.sc = !0, jd(a.Xd, a));
    }, zd = function(a) {
        var b = null;
        return a.fa && (b = a.fa, a.fa = b.next, b.next = null), a.fa || (a.Ma = null), 
        null != b && w(null != b.Ea), b;
    };
    I.prototype.Xd = function() {
        for (var a; a = zd(this); ) Ad(this, a, this.F, this.ka);
        this.sc = !1;
    };
    var Ad = function(a, b, c, d) {
        if (3 == c && b.Sa && !b.ib) for (;a && a.Jb; a = a.o) a.Jb = !1;
        if (b.child) b.child.o = null, Ed(b, c, d); else try {
            b.ib ? b.Ea.call(b.context) : Ed(b, c, d);
        } catch (e) {
            Fd.call(null, e);
        }
        qd.put(b);
    }, Ed = function(a, b, c) {
        2 == b ? a.Ea.call(a.context, c) : a.Sa && a.Sa.call(a.context, c);
    }, Cd = function(a, b) {
        a.Jb = !0, jd(function() {
            a.Jb && Fd.call(null, b);
        });
    }, Fd = $c, od = function(a) {
        u.call(this, a);
    };
    t(od, u), od.prototype.name = "cancel";
    var Gd = function(a, b) {
        this.bc = [], this.nd = a, this.Zc = b || null, this.nb = this.Qa = !1, this.ka = void 0, 
        this.Nc = this.Sc = this.nc = !1, this.ic = 0, this.o = null, this.oc = 0;
    };
    Gd.prototype.cancel = function(a) {
        if (this.Qa) this.ka instanceof Gd && this.ka.cancel(); else {
            if (this.o) {
                var b = this.o;
                delete this.o, a ? b.cancel(a) : (b.oc--, 0 >= b.oc && b.cancel());
            }
            this.nd ? this.nd.call(this.Zc, this) : this.Nc = !0, this.Qa || Hd(this, new Id());
        }
    }, Gd.prototype.Yc = function(a, b) {
        this.nc = !1, Jd(this, a, b);
    };
    var Jd = function(a, b, c) {
        a.Qa = !0, a.ka = c, a.nb = !b, Kd(a);
    }, Md = function(a) {
        if (a.Qa) {
            if (!a.Nc) throw new Ld();
            a.Nc = !1;
        }
    };
    Gd.prototype.callback = function(a) {
        Md(this), Nd(a), Jd(this, !0, a);
    };
    var Hd = function(a, b) {
        Md(a), Nd(b), Jd(a, !1, b);
    }, Nd = function(a) {
        w(!(a instanceof Gd), "An execution sequence may not be initiated with a blocking Deferred.");
    }, Rd = function(a) {
        var b = Od("https://apis.google.com/js/client.js?onload=" + Pd);
        Qd(b, null, a, void 0);
    }, Qd = function(a, b, c, d) {
        w(!a.Sc, "Blocking Deferreds can not be re-used"), a.bc.push([ b, c, d ]), a.Qa && Kd(a);
    };
    Gd.prototype.then = function(a, b, c) {
        var d, e, f = new I(function(a, b) {
            d = a, e = b;
        });
        return Qd(this, d, function(a) {
            a instanceof Id ? f.cancel() : e(a);
        }), f.then(a, b, c);
    }, ld(Gd);
    var Sd = function(a) {
        return Ga(a.bc, function(a) {
            return p(a[1]);
        });
    }, Kd = function(a) {
        if (a.ic && a.Qa && Sd(a)) {
            var b = a.ic, c = Td[b];
            c && (l.clearTimeout(c.ob), delete Td[b]), a.ic = 0;
        }
        a.o && (a.o.oc--, delete a.o);
        for (var b = a.ka, d = c = !1; a.bc.length && !a.nc; ) {
            var f = (e = a.bc.shift())[0], g = e[1], e = e[2];
            if (f = a.nb ? g : f) try {
                var k = f.call(e || a.Zc, b);
                void 0 !== k && (a.nb = a.nb && (k == b || k instanceof Error), a.ka = b = k), (md(b) || "function" == typeof l.Promise && b instanceof l.Promise) && (d = !0, 
                a.nc = !0);
            } catch (q) {
                b = q, a.nb = !0, Sd(a) || (c = !0);
            }
        }
        a.ka = b, d && (k = r(a.Yc, a, !0), d = r(a.Yc, a, !1), b instanceof Gd ? (Qd(b, k, d), 
        b.Sc = !0) : b.then(k, d)), c && (b = new Ud(b), Td[b.ob] = b, a.ic = b.ob);
    }, Ld = function() {
        u.call(this);
    };
    t(Ld, u), Ld.prototype.message = "Deferred has already fired", Ld.prototype.name = "AlreadyCalledError";
    var Id = function() {
        u.call(this);
    };
    t(Id, u), Id.prototype.message = "Deferred was canceled", Id.prototype.name = "CanceledError";
    var Ud = function(a) {
        this.ob = l.setTimeout(r(this.Ge, this), 0), this.J = a;
    };
    Ud.prototype.Ge = function() {
        throw w(Td[this.ob], "Cannot throw an error that is not scheduled."), delete Td[this.ob], 
        this.J;
    };
    var Td = {}, Od = function(a) {
        var b = new Tc();
        return b.Wb = a, Vd(b);
    }, Vd = function(a) {
        var d, b = {}, c = b.document || document;
        a instanceof Tc && a.constructor === Tc && a.Nd === Sc ? d = a.Wb : (za("expected object of type TrustedResourceUrl, got '" + a + "' of type " + m(a)), 
        d = "type_error:TrustedResourceUrl");
        var e = document.createElement("SCRIPT"), f = new Gd(Wd, a = {
            vd: e,
            xb: void 0
        }), g = null, k = null != b.timeout ? b.timeout : 5e3;
        return 0 < k && (g = window.setTimeout(function() {
            Xd(e, !0), Hd(f, new Yd(1, "Timeout reached for loading script " + d));
        }, k), a.xb = g), e.onload = e.onreadystatechange = function() {
            e.readyState && "loaded" != e.readyState && "complete" != e.readyState || (Xd(e, b.Oe || !1, g), 
            f.callback(null));
        }, e.onerror = function() {
            Xd(e, !0, g), Hd(f, new Yd(0, "Error while loading script " + d));
        }, a = b.attributes || {}, Ya(a, {
            type: "text/javascript",
            charset: "UTF-8",
            src: d
        }), Yc(e, a), Zd(c).appendChild(e), f;
    }, Zd = function(a) {
        var b;
        return (b = (a || document).getElementsByTagName("HEAD")) && 0 != b.length ? b[0] : a.documentElement;
    }, Wd = function() {
        if (this && this.vd) {
            var a = this.vd;
            a && "SCRIPT" == a.tagName && Xd(a, !0, this.xb);
        }
    }, Xd = function(a, b, c) {
        null != c && l.clearTimeout(c), a.onload = ba, a.onerror = ba, a.onreadystatechange = ba, 
        b && window.setTimeout(function() {
            a && a.parentNode && a.parentNode.removeChild(a);
        }, 0);
    }, Yd = function(a, b) {
        var c = "Jsloader error (code #" + a + ")";
        b && (c += ": " + b), u.call(this, c), this.code = a;
    };
    t(Yd, u);
    var $d = function() {
        yb.call(this), this.Y = new Fb(this), this.Qd = this, this.Cc = null;
    };
    t($d, yb), $d.prototype[Bb] = !0, h = $d.prototype, h.addEventListener = function(a, b, c, d) {
        Lb(this, a, b, c, d);
    }, h.removeEventListener = function(a, b, c, d) {
        Ub(this, a, b, c, d);
    }, h.dispatchEvent = function(a) {
        ae(this);
        var b, c = this.Cc;
        if (c) {
            b = [];
            for (var d = 1; c; c = c.Cc) b.push(c), w(1e3 > ++d, "infinite loop");
        }
        if (c = this.Qd, d = a.type || a, n(a)) a = new zb(a, c); else if (a instanceof zb) a.target = a.target || c; else {
            e = a;
            a = new zb(d, c), Ya(a, e);
        }
        var f, e = !0;
        if (b) for (var g = b.length - 1; !a.Va && 0 <= g; g--) f = a.currentTarget = b[g], 
        e = be(f, d, !0, a) && e;
        if (a.Va || (f = a.currentTarget = c, e = be(f, d, !0, a) && e, a.Va || (e = be(f, d, !1, a) && e)), 
        b) for (g = 0; !a.Va && g < b.length; g++) f = a.currentTarget = b[g], e = be(f, d, !1, a) && e;
        return e;
    }, h.Oa = function() {
        if ($d.Pc.Oa.call(this), this.Y) {
            var c, a = this.Y;
            for (c in a.w) {
                for (var d = a.w[c], e = 0; e < d.length; e++) 0, Eb(d[e]);
                delete a.w[c], a.yb--;
            }
        }
        this.Cc = null;
    }, h.listen = function(a, b, c, d) {
        return ae(this), this.Y.add(String(a), b, !1, c, d);
    };
    var Tb = function(a, b, c, d, e) {
        a.Y.add(String(b), c, !0, d, e);
    }, be = function(a, b, c, d) {
        if (!(b = a.Y.w[String(b)])) return !0;
        b = b.concat();
        for (var e = !0, f = 0; f < b.length; ++f) {
            var g = b[f];
            if (g && !g.$a && g.Cb == c) {
                var k = g.listener, q = g.Kb || g.src;
                g.Bb && Hb(a.Y, g), e = !1 !== k.call(q, d) && e;
            }
        }
        return e && 0 != d.ud;
    };
    $d.prototype.uc = function(a, b, c, d) {
        return this.Y.uc(String(a), b, c, d);
    };
    var ae = function(a) {
        w(a.Y, "Event target is not initialized. Did you call the superclass (goog.events.EventTarget) constructor?");
    }, ce = "StopIteration" in l ? l.StopIteration : {
        message: "StopIteration",
        stack: ""
    }, de = function() {};
    de.prototype.next = function() {
        throw ce;
    }, de.prototype.Pd = function() {
        return this;
    };
    var ee = function(a, b) {
        this.Z = {}, this.s = [], this.na = this.i = 0;
        var c = arguments.length;
        if (1 < c) {
            if (c % 2) throw Error("Uneven number of arguments");
            for (var d = 0; d < c; d += 2) this.set(arguments[d], arguments[d + 1]);
        } else a && this.addAll(a);
    };
    h = ee.prototype, h.dd = function() {
        return this.i;
    }, h.T = function() {
        fe(this);
        for (var a = [], b = 0; b < this.s.length; b++) a.push(this.Z[this.s[b]]);
        return a;
    }, h.ha = function() {
        return fe(this), this.s.concat();
    }, h.jb = function(a) {
        return ge(this.Z, a);
    }, h.Eb = function(a, b) {
        if (this === a) return !0;
        if (this.i != a.dd()) return !1;
        b = b || he, fe(this);
        for (var c, d = 0; c = this.s[d]; d++) if (!b(this.get(c), a.get(c))) return !1;
        return !0;
    };
    var he = function(a, b) {
        return a === b;
    };
    ee.prototype.remove = function(a) {
        return !!ge(this.Z, a) && (delete this.Z[a], this.i--, this.na++, this.s.length > 2 * this.i && fe(this), 
        !0);
    };
    var fe = function(a) {
        if (a.i != a.s.length) {
            for (var b = 0, c = 0; b < a.s.length; ) {
                var d = a.s[b];
                ge(a.Z, d) && (a.s[c++] = d), b++;
            }
            a.s.length = c;
        }
        if (a.i != a.s.length) {
            for (var e = {}, c = b = 0; b < a.s.length; ) d = a.s[b], ge(e, d) || (a.s[c++] = d, 
            e[d] = 1), b++;
            a.s.length = c;
        }
    };
    h = ee.prototype, h.get = function(a, b) {
        return ge(this.Z, a) ? this.Z[a] : b;
    }, h.set = function(a, b) {
        ge(this.Z, a) || (this.i++, this.s.push(a), this.na++), this.Z[a] = b;
    }, h.addAll = function(a) {
        var b;
        a instanceof ee ? (b = a.ha(), a = a.T()) : (b = Ta(a), a = Sa(a));
        for (var c = 0; c < b.length; c++) this.set(b[c], a[c]);
    }, h.forEach = function(a, b) {
        for (var c = this.ha(), d = 0; d < c.length; d++) {
            var e = c[d], f = this.get(e);
            a.call(b, f, e, this);
        }
    }, h.clone = function() {
        return new ee(this);
    }, h.Pd = function(a) {
        fe(this);
        var b = 0, c = this.na, d = this, e = new de();
        return e.next = function() {
            if (c != d.na) throw Error("The map has changed since the iterator was created");
            if (b >= d.s.length) throw ce;
            var e = d.s[b++];
            return a ? e : d.Z[e];
        }, e;
    };
    var ge = function(a, b) {
        return Object.prototype.hasOwnProperty.call(a, b);
    }, ie = function(a) {
        if (a.T && "function" == typeof a.T) return a.T();
        if (n(a)) return a.split("");
        if (fa(a)) {
            for (var b = [], c = a.length, d = 0; d < c; d++) b.push(a[d]);
            return b;
        }
        return Sa(a);
    }, je = function(a) {
        if (a.ha && "function" == typeof a.ha) return a.ha();
        if (!a.T || "function" != typeof a.T) {
            if (fa(a) || n(a)) {
                var b = [];
                a = a.length;
                for (var c = 0; c < a; c++) b.push(c);
                return b;
            }
            return Ta(a);
        }
    }, ke = function(a, b) {
        if (a.forEach && "function" == typeof a.forEach) a.forEach(b, void 0); else if (fa(a) || n(a)) x(a, b, void 0); else for (var c = je(a), d = ie(a), e = d.length, f = 0; f < e; f++) b.call(void 0, d[f], c && c[f], a);
    }, le = function(a, b, c, d, e) {
        this.reset(a, b, c, d, e);
    };
    le.prototype.ad = null;
    var me = 0;
    le.prototype.reset = function(a, b, c, d, e) {
        "number" == typeof e || me++, d || la(), this.rb = a, this.re = b, delete this.ad;
    }, le.prototype.yd = function(a) {
        this.rb = a;
    };
    var ne = function(a) {
        this.se = a, this.fd = this.pc = this.rb = this.o = null;
    }, oe = function(a, b) {
        this.name = a, this.value = b;
    };
    oe.prototype.toString = function() {
        return this.name;
    };
    var pe = new oe("SEVERE", 1e3), qe = new oe("CONFIG", 700), re = new oe("FINE", 500);
    ne.prototype.getParent = function() {
        return this.o;
    }, ne.prototype.yd = function(a) {
        this.rb = a;
    };
    var se = function(a) {
        return a.rb ? a.rb : a.o ? se(a.o) : (za("Root logger has no level set."), null);
    };
    ne.prototype.log = function(a, b, c) {
        if (a.value >= se(this).value) for (p(b) && (b = b()), a = new le(a, String(b), this.se), 
        c && (a.ad = c), c = "log:" + a.re, l.console && (l.console.timeStamp ? l.console.timeStamp(c) : l.console.markTimeline && l.console.markTimeline(c)), 
        l.msWriteProfilerMark && l.msWriteProfilerMark(c), c = this; c; ) {
            var d = a;
            if ((b = c).fd) for (var f, e = 0; f = b.fd[e]; e++) f(d);
            c = c.getParent();
        }
    };
    var te = {}, ue = null, ve = function(a) {
        ue || (ue = new ne(""), te[""] = ue, ue.yd(qe));
        var b;
        if (!(b = te[a])) {
            b = new ne(a);
            var c = a.lastIndexOf("."), d = a.substr(c + 1);
            (c = ve(a.substr(0, c))).pc || (c.pc = {}), c.pc[d] = b, b.o = c, te[a] = b;
        }
        return b;
    }, L = function(a, b) {
        a && a.log(re, b, void 0);
    }, we = function(a, b, c) {
        if (p(a)) c && (a = r(a, c)); else {
            if (!a || "function" != typeof a.handleEvent) throw Error("Invalid listener argument");
            a = r(a.handleEvent, a);
        }
        return 2147483647 < Number(b) ? -1 : l.setTimeout(a, b || 0);
    }, xe = function(a) {
        var b = null;
        return new I(function(c, d) {
            -1 == (b = we(function() {
                c(void 0);
            }, a)) && d(Error("Failed to schedule timer."));
        }).l(function(a) {
            throw l.clearTimeout(b), a;
        });
    }, ye = /^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/, ze = function(a, b) {
        if (a) {
            a = a.split("&");
            for (var c = 0; c < a.length; c++) {
                var e, d = a[c].indexOf("="), f = null;
                0 <= d ? (e = a[c].substring(0, d), f = a[c].substring(d + 1)) : e = a[c], b(e, f ? decodeURIComponent(f.replace(/\+/g, " ")) : "");
            }
        }
    }, M = function(a) {
        $d.call(this), this.headers = new ee(), this.mc = a || null, this.pa = !1, this.lc = this.a = null, 
        this.qb = this.ld = this.Rb = "", this.Ba = this.xc = this.Ob = this.rc = !1, this.fb = 0, 
        this.hc = null, this.td = "", this.jc = this.xe = this.Gd = !1;
    };
    t(M, $d);
    var Ae = M.prototype, Be = ve("goog.net.XhrIo");
    Ae.P = Be;
    var Ce = /^https?$/i, De = [ "POST", "PUT" ];
    M.prototype.send = function(a, b, c, d) {
        if (this.a) throw Error("[goog.net.XhrIo] Object is active with another request=" + this.Rb + "; newUri=" + a);
        b = b ? b.toUpperCase() : "GET", this.Rb = a, this.qb = "", this.ld = b, this.rc = !1, 
        this.pa = !0, this.a = this.mc ? this.mc.kb() : rc.kb(), this.lc = qc(this.mc ? this.mc : rc), 
        this.a.onreadystatechange = r(this.qd, this), this.xe && "onprogress" in this.a && (this.a.onprogress = r(function(a) {
            this.pd(a, !0);
        }, this), this.a.upload && (this.a.upload.onprogress = r(this.pd, this)));
        try {
            L(this.P, Ee(this, "Opening Xhr")), this.xc = !0, this.a.open(b, String(a), !0), 
            this.xc = !1;
        } catch (f) {
            return L(this.P, Ee(this, "Error opening Xhr: " + f.message)), void this.J(5, f);
        }
        a = c || "";
        var e = this.headers.clone();
        d && ke(d, function(a, b) {
            e.set(b, a);
        }), d = Ia(e.ha()), c = l.FormData && a instanceof l.FormData, !Ja(De, b) || d || c || e.set("Content-Type", "application/x-www-form-urlencoded;charset=utf-8"), 
        e.forEach(function(a, b) {
            this.a.setRequestHeader(b, a);
        }, this), this.td && (this.a.responseType = this.td), "withCredentials" in this.a && this.a.withCredentials !== this.Gd && (this.a.withCredentials = this.Gd);
        try {
            Fe(this), 0 < this.fb && (this.jc = Ge(this.a), L(this.P, Ee(this, "Will abort after " + this.fb + "ms if incomplete, xhr2 " + this.jc)), 
            this.jc ? (this.a.timeout = this.fb, this.a.ontimeout = r(this.xb, this)) : this.hc = we(this.xb, this.fb, this)), 
            L(this.P, Ee(this, "Sending request")), this.Ob = !0, this.a.send(a), this.Ob = !1;
        } catch (f) {
            L(this.P, Ee(this, "Send error: " + f.message)), this.J(5, f);
        }
    };
    var Ge = function(a) {
        return z && A(9) && ga(a.timeout) && void 0 !== a.ontimeout;
    }, Ha = function(a) {
        return "content-type" == a.toLowerCase();
    };
    M.prototype.xb = function() {
        void 0 !== aa && this.a && (this.qb = "Timed out after " + this.fb + "ms, aborting", 
        L(this.P, Ee(this, this.qb)), this.dispatchEvent("timeout"), this.abort(8));
    }, M.prototype.J = function(a, b) {
        this.pa = !1, this.a && (this.Ba = !0, this.a.abort(), this.Ba = !1), this.qb = b, 
        He(this), Ie(this);
    };
    var He = function(a) {
        a.rc || (a.rc = !0, a.dispatchEvent("complete"), a.dispatchEvent("error"));
    };
    M.prototype.abort = function() {
        this.a && this.pa && (L(this.P, Ee(this, "Aborting")), this.pa = !1, this.Ba = !0, 
        this.a.abort(), this.Ba = !1, this.dispatchEvent("complete"), this.dispatchEvent("abort"), 
        Ie(this));
    }, M.prototype.Oa = function() {
        this.a && (this.pa && (this.pa = !1, this.Ba = !0, this.a.abort(), this.Ba = !1), 
        Ie(this, !0)), M.Pc.Oa.call(this);
    }, M.prototype.qd = function() {
        this.isDisposed() || (this.xc || this.Ob || this.Ba ? Je(this) : this.ve());
    }, M.prototype.ve = function() {
        Je(this);
    };
    var Je = function(a) {
        if (a.pa && void 0 !== aa) if (a.lc[1] && 4 == Ke(a) && 2 == Le(a)) L(a.P, Ee(a, "Local request error detected and ignored")); else if (a.Ob && 4 == Ke(a)) we(a.qd, 0, a); else if (a.dispatchEvent("readystatechange"), 
        4 == Ke(a)) {
            L(a.P, Ee(a, "Request complete")), a.pa = !1;
            try {
                var c, b = Le(a);
                a: switch (b) {
                  case 200:
                  case 201:
                  case 202:
                  case 204:
                  case 206:
                  case 304:
                  case 1223:
                    c = !0;
                    break a;

                  default:
                    c = !1;
                }
                var d;
                if (!(d = c)) {
                    var e;
                    if (e = 0 === b) {
                        if (!(f = String(a.Rb).match(ye)[1] || null) && l.self && l.self.location) var g = l.self.location.protocol, f = g.substr(0, g.length - 1);
                        e = !Ce.test(f ? f.toLowerCase() : "");
                    }
                    d = e;
                }
                if (d) a.dispatchEvent("complete"), a.dispatchEvent("success"); else {
                    var k;
                    try {
                        k = 2 < Ke(a) ? a.a.statusText : "";
                    } catch (q) {
                        L(a.P, "Can not get status: " + q.message), k = "";
                    }
                    a.qb = k + " [" + Le(a) + "]", He(a);
                }
            } finally {
                Ie(a);
            }
        }
    };
    M.prototype.pd = function(a, b) {
        w("progress" === a.type, "goog.net.EventType.PROGRESS is of the same type as raw XHR progress."), 
        this.dispatchEvent(Me(a, "progress")), this.dispatchEvent(Me(a, b ? "downloadprogress" : "uploadprogress"));
    };
    var Me = function(a, b) {
        return {
            type: b,
            lengthComputable: a.lengthComputable,
            loaded: a.loaded,
            total: a.total
        };
    }, Ie = function(a, b) {
        if (a.a) {
            Fe(a);
            var c = a.a, d = a.lc[0] ? ba : null;
            a.a = null, a.lc = null, b || a.dispatchEvent("ready");
            try {
                c.onreadystatechange = d;
            } catch (e) {
                (a = a.P) && a.log(pe, "Problem encountered resetting onreadystatechange: " + e.message, void 0);
            }
        }
    }, Fe = function(a) {
        a.a && a.jc && (a.a.ontimeout = null), ga(a.hc) && (l.clearTimeout(a.hc), a.hc = null);
    }, Ke = function(a) {
        return a.a ? a.a.readyState : 0;
    }, Le = function(a) {
        try {
            return 2 < Ke(a) ? a.a.status : -1;
        } catch (b) {
            return -1;
        }
    }, Ne = function(a) {
        try {
            return a.a ? a.a.responseText : "";
        } catch (b) {
            return L(a.P, "Can not get responseText: " + b.message), "";
        }
    }, Ee = function(a, b) {
        return b + " [" + a.ld + " " + a.Rb + " " + Le(a) + "]";
    }, Oe = function(a, b) {
        this.ga = this.Ia = this.la = "", this.Ua = null, this.Aa = this.ra = "", this.M = this.oe = !1;
        var c;
        a instanceof Oe ? (this.M = void 0 !== b ? b : a.M, Pe(this, a.la), c = a.Ia, N(this), 
        this.Ia = c, Qe(this, a.ga), Re(this, a.Ua), Se(this, a.ra), Te(this, a.aa.clone()), 
        a = a.Aa, N(this), this.Aa = a) : a && (c = String(a).match(ye)) ? (this.M = !!b, 
        Pe(this, c[1] || "", !0), a = c[2] || "", N(this), this.Ia = Ue(a), Qe(this, c[3] || "", !0), 
        Re(this, c[4]), Se(this, c[5] || "", !0), Te(this, c[6] || "", !0), a = c[7] || "", 
        N(this), this.Aa = Ue(a)) : (this.M = !!b, this.aa = new O(null, 0, this.M));
    };
    Oe.prototype.toString = function() {
        var a = [], b = this.la;
        b && a.push(Ve(b, We, !0), ":");
        var c = this.ga;
        return (c || "file" == b) && (a.push("//"), (b = this.Ia) && a.push(Ve(b, We, !0), "@"), 
        a.push(encodeURIComponent(String(c)).replace(/%25([0-9a-fA-F]{2})/g, "%$1")), null != (c = this.Ua) && a.push(":", String(c))), 
        (c = this.ra) && (this.ga && "/" != c.charAt(0) && a.push("/"), a.push(Ve(c, "/" == c.charAt(0) ? Xe : Ye, !0))), 
        (c = this.aa.toString()) && a.push("?", c), (c = this.Aa) && a.push("#", Ve(c, Ze)), 
        a.join("");
    }, Oe.prototype.resolve = function(a) {
        var b = this.clone(), c = !!a.la;
        if (c ? Pe(b, a.la) : c = !!a.Ia, c) {
            d = a.Ia;
            N(b), b.Ia = d;
        } else c = !!a.ga;
        if (c ? Qe(b, a.ga) : c = null != a.Ua, d = a.ra, c) Re(b, a.Ua); else if (c = !!a.ra) if ("/" != d.charAt(0) && (this.ga && !this.ra ? d = "/" + d : -1 != (e = b.ra.lastIndexOf("/")) && (d = b.ra.substr(0, e + 1) + d)), 
        ".." == (e = d) || "." == e) d = ""; else if (v(e, "./") || v(e, "/.")) {
            for (var d = 0 == e.lastIndexOf("/", 0), e = e.split("/"), f = [], g = 0; g < e.length; ) {
                var k = e[g++];
                "." == k ? d && g == e.length && f.push("") : ".." == k ? ((1 < f.length || 1 == f.length && "" != f[0]) && f.pop(), 
                d && g == e.length && f.push("")) : (f.push(k), d = !0);
            }
            d = f.join("/");
        } else d = e;
        return c ? Se(b, d) : c = "" !== a.aa.toString(), c ? Te(b, Ue(a.aa.toString())) : c = !!a.Aa, 
        c && (a = a.Aa, N(b), b.Aa = a), b;
    }, Oe.prototype.clone = function() {
        return new Oe(this);
    };
    var Pe = function(a, b, c) {
        N(a), a.la = c ? Ue(b, !0) : b, a.la && (a.la = a.la.replace(/:$/, ""));
    }, Qe = function(a, b, c) {
        N(a), a.ga = c ? Ue(b, !0) : b;
    }, Re = function(a, b) {
        if (N(a), b) {
            if (b = Number(b), isNaN(b) || 0 > b) throw Error("Bad port number " + b);
            a.Ua = b;
        } else a.Ua = null;
    }, Se = function(a, b, c) {
        N(a), a.ra = c ? Ue(b, !0) : b;
    }, Te = function(a, b, c) {
        N(a), b instanceof O ? (a.aa = b, a.aa.Mc(a.M)) : (c || (b = Ve(b, $e)), a.aa = new O(b, 0, a.M));
    }, P = function(a, b, c) {
        N(a), a.aa.set(b, c);
    }, N = function(a) {
        if (a.oe) throw Error("Tried to modify a read-only Uri");
    };
    Oe.prototype.Mc = function(a) {
        return this.M = a, this.aa && this.aa.Mc(a), this;
    };
    var af = function(a) {
        return a instanceof Oe ? a.clone() : new Oe(a, void 0);
    }, bf = function(a, b) {
        var c = new Oe(null, void 0);
        return Pe(c, "https"), a && Qe(c, a), b && Se(c, b), c;
    }, Ue = function(a, b) {
        return a ? b ? decodeURI(a.replace(/%25/g, "%2525")) : decodeURIComponent(a) : "";
    }, Ve = function(a, b, c) {
        return n(a) ? (a = encodeURI(a).replace(b, cf), c && (a = a.replace(/%25([0-9a-fA-F]{2})/g, "%$1")), 
        a) : null;
    }, cf = function(a) {
        return "%" + ((a = a.charCodeAt(0)) >> 4 & 15).toString(16) + (15 & a).toString(16);
    }, We = /[#\/\?@]/g, Ye = /[\#\?:]/g, Xe = /[\#\?]/g, $e = /[\#\?@]/g, Ze = /#/g, O = function(a, b, c) {
        this.i = this.j = null, this.I = a || null, this.M = !!c;
    }, df = function(a) {
        a.j || (a.j = new ee(), a.i = 0, a.I && ze(a.I, function(b, c) {
            a.add(decodeURIComponent(b.replace(/\+/g, " ")), c);
        }));
    }, ff = function(a) {
        var b = je(a);
        if (void 0 === b) throw Error("Keys are undefined");
        var c = new O(null, 0, void 0);
        a = ie(a);
        for (var d = 0; d < b.length; d++) {
            var e = b[d], f = a[d];
            ea(f) ? ef(c, e, f) : c.add(e, f);
        }
        return c;
    };
    h = O.prototype, h.dd = function() {
        return df(this), this.i;
    }, h.add = function(a, b) {
        df(this), this.I = null, a = this.K(a);
        var c = this.j.get(a);
        return c || this.j.set(a, c = []), c.push(b), this.i = Aa(this.i) + 1, this;
    }, h.remove = function(a) {
        return df(this), a = this.K(a), !!this.j.jb(a) && (this.I = null, this.i = Aa(this.i) - this.j.get(a).length, 
        this.j.remove(a));
    }, h.jb = function(a) {
        return df(this), a = this.K(a), this.j.jb(a);
    }, h.ha = function() {
        df(this);
        for (var a = this.j.T(), b = this.j.ha(), c = [], d = 0; d < b.length; d++) for (var e = a[d], f = 0; f < e.length; f++) c.push(b[d]);
        return c;
    }, h.T = function(a) {
        df(this);
        var b = [];
        if (n(a)) this.jb(a) && (b = Na(b, this.j.get(this.K(a)))); else {
            a = this.j.T();
            for (var c = 0; c < a.length; c++) b = Na(b, a[c]);
        }
        return b;
    }, h.set = function(a, b) {
        return df(this), this.I = null, a = this.K(a), this.jb(a) && (this.i = Aa(this.i) - this.j.get(a).length), 
        this.j.set(a, [ b ]), this.i = Aa(this.i) + 1, this;
    }, h.get = function(a, b) {
        return 0 < (a = a ? this.T(a) : []).length ? String(a[0]) : b;
    };
    var ef = function(a, b, c) {
        a.remove(b), 0 < c.length && (a.I = null, a.j.set(a.K(b), Pa(c)), a.i = Aa(a.i) + c.length);
    };
    O.prototype.toString = function() {
        if (this.I) return this.I;
        if (!this.j) return "";
        for (var a = [], b = this.j.ha(), c = 0; c < b.length; c++) for (var d = b[c], e = encodeURIComponent(String(d)), d = this.T(d), f = 0; f < d.length; f++) {
            var g = e;
            "" !== d[f] && (g += "=" + encodeURIComponent(String(d[f]))), a.push(g);
        }
        return this.I = a.join("&");
    }, O.prototype.clone = function() {
        var a = new O();
        return a.I = this.I, this.j && (a.j = this.j.clone(), a.i = this.i), a;
    }, O.prototype.K = function(a) {
        return a = String(a), this.M && (a = a.toLowerCase()), a;
    }, O.prototype.Mc = function(a) {
        a && !this.M && (df(this), this.I = null, this.j.forEach(function(a, c) {
            var b = c.toLowerCase();
            c != b && (this.remove(c), ef(this, b, a));
        }, this)), this.M = a;
    };
    var hf = function() {
        var a = gf();
        return z && !!qb && 11 == qb || /Edge\/\d+/.test(a);
    }, jf = function() {
        return l.window && l.window.location.href || "";
    }, kf = function(a, b) {
        var d, c = [];
        for (d in a) d in b ? typeof a[d] != typeof b[d] ? c.push(d) : ea(a[d]) ? Va(a[d], b[d]) || c.push(d) : "object" == typeof a[d] && null != a[d] && null != b[d] ? 0 < kf(a[d], b[d]).length && c.push(d) : a[d] !== b[d] && c.push(d) : c.push(d);
        for (d in b) d in a || c.push(d);
        return c;
    }, mf = function() {
        var a;
        return a = gf(), !((a = "Chrome" != lf(a) ? null : (a = a.match(/\sChrome\/(\d+)/i)) && 2 == a.length ? parseInt(a[1], 10) : null) && 30 > a) && (!z || !qb || 9 < qb);
    }, nf = function(a) {
        (a || l.window).close();
    }, of = function(a, b, c) {
        var d = Math.floor(1e9 * Math.random()).toString();
        b = b || 500, c = c || 600;
        var e = (window.screen.availHeight - c) / 2, f = (window.screen.availWidth - b) / 2;
        b = {
            width: b,
            height: c,
            top: 0 < e ? e : 0,
            left: 0 < f ? f : 0,
            location: !0,
            resizable: !0,
            statusbar: !0,
            toolbar: !1
        }, d && (b.target = d), "Firefox" == lf(gf()) && (a = a || "http://localhost", b.scrollbars = !0);
        var g;
        c = a || "about:blank", (d = b) || (d = {}), a = window, b = c instanceof B ? c : gc(void 0 !== c.href ? c.href : String(c)), 
        c = d.target || c.target, e = [];
        for (g in d) switch (g) {
          case "width":
          case "height":
          case "top":
          case "left":
            e.push(g + "=" + d[g]);
            break;

          case "target":
          case "noreferrer":
            break;

          default:
            e.push(g + "=" + (d[g] ? 1 : 0));
        }
        if (g = e.join(","), (y("iPhone") && !y("iPod") && !y("iPad") || y("iPad") || y("iPod")) && a.navigator && a.navigator.standalone && c && "_self" != c ? (g = a.document.createElement("A"), 
        "undefined" != typeof HTMLAnchorElement && "undefined" != typeof Location && "undefined" != typeof Element && (e = g && (g instanceof HTMLAnchorElement || !(g instanceof Location || g instanceof Element)), 
        f = ha(g) ? g.constructor.displayName || g.constructor.name || Object.prototype.toString.call(g) : void 0 === g ? "undefined" : null === g ? "null" : typeof g, 
        w(e, "Argument is not a HTMLAnchorElement (or a non-Element mock); got: %s", f)), 
        b = b instanceof B ? b : gc(b), g.href = dc(b), g.setAttribute("target", c), d.noreferrer && g.setAttribute("rel", "noreferrer"), 
        (d = document.createEvent("MouseEvent")).initMouseEvent("click", !0, !0, a, 1), 
        g.dispatchEvent(d), g = {}) : d.noreferrer ? (g = a.open("", c, g), d = dc(b), g && (gb && v(d, ";") && (d = "'" + d.replace(/'/g, "%27") + "'"), 
        g.opener = null, a = new ac(), a.fc = "b/12014412, meta tag with sanitized URL", 
        va.test(d) && (-1 != d.indexOf("&") && (d = d.replace(oa, "&amp;")), -1 != d.indexOf("<") && (d = d.replace(pa, "&lt;")), 
        -1 != d.indexOf(">") && (d = d.replace(qa, "&gt;")), -1 != d.indexOf('"') && (d = d.replace(sa, "&quot;")), 
        -1 != d.indexOf("'") && (d = d.replace(ta, "&#39;")), -1 != d.indexOf("\0") && (d = d.replace(ua, "&#0;"))), 
        d = '<META HTTP-EQUIV="refresh" content="0; url=' + d + '">', Ba(bc(a), "must provide justification"), 
        w(!/^[\s\xa0]*$/.test(bc(a)), "must provide non-empty justification"), g.document.write(Wc(new Vc().ne(d))), 
        g.document.close())) : g = a.open(dc(b), c, g), g) try {
            g.focus();
        } catch (k) {}
        return g;
    }, pf = function(a) {
        return new I(function(b) {
            var c = function() {
                xe(2e3).then(function() {
                    if (a && !a.closed) return c();
                    b();
                });
            };
            return c();
        });
    }, qf = function() {
        var a = null;
        return new I(function(b) {
            "complete" == l.document.readyState ? b() : (a = function() {
                b();
            }, Sb(window, "load", a));
        }).l(function(b) {
            throw Ub(window, "load", a), b;
        });
    }, rf = function(a) {
        switch (a || l.navigator && l.navigator.product || "") {
          case "ReactNative":
            return "ReactNative";

          default:
            return void 0 !== l.process ? "Node" : "Browser";
        }
    }, sf = function() {
        var a = rf();
        return "ReactNative" === a || "Node" === a;
    }, lf = function(a) {
        var b = a.toLowerCase();
        return v(b, "opera/") || v(b, "opr/") || v(b, "opios/") ? "Opera" : v(b, "iemobile") ? "IEMobile" : v(b, "msie") || v(b, "trident/") ? "IE" : v(b, "edge/") ? "Edge" : v(b, "firefox/") ? "Firefox" : v(b, "silk/") ? "Silk" : v(b, "blackberry") ? "Blackberry" : v(b, "webos") ? "Webos" : !v(b, "safari/") || v(b, "chrome/") || v(b, "crios/") || v(b, "android") ? !v(b, "chrome/") && !v(b, "crios/") || v(b, "edge/") ? v(b, "android") ? "Android" : (a = a.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/)) && 2 == a.length ? a[1] : "Other" : "Chrome" : "Safari";
    }, tf = function(a) {
        var b = rf(void 0);
        return ("Browser" === b ? lf(gf()) : b) + "/JsCore/" + a;
    }, gf = function() {
        return l.navigator && l.navigator.userAgent || "";
    }, uf = function(a) {
        a = a.split(".");
        for (var b = l, c = 0; c < a.length && "object" == typeof b && null != b; c++) b = b[a[c]];
        return c != a.length && (b = void 0), b;
    }, wf = function() {
        var a;
        if (!(a = !l.location || !l.location.protocol || "http:" != l.location.protocol && "https:" != l.location.protocol || sf())) {
            var b;
            a: {
                try {
                    var c = l.localStorage, d = vf();
                    if (c) {
                        c.setItem(d, "1"), c.removeItem(d), b = !hf() || !!l.indexedDB;
                        break a;
                    }
                } catch (e) {}
                b = !1;
            }
            a = !b;
        }
        return !a;
    }, xf = function(a) {
        var b = ((a = a || gf()) || gf()).toLowerCase();
        return !(b.match(/android/) || b.match(/webos/) || b.match(/iphone|ipad|ipod/) || b.match(/blackberry/) || b.match(/windows phone/) || b.match(/iemobile/) || "Firefox" == lf(a));
    }, yf = function(a) {
        return void 0 === a ? null : lc(a);
    }, zf = function(a) {
        if (null !== a) {
            var b;
            try {
                b = ic(a);
            } catch (c) {
                try {
                    b = JSON.parse(a);
                } catch (d) {
                    throw c;
                }
            }
            return b;
        }
    }, vf = function(a) {
        return a || "" + Math.floor(1e9 * Math.random()).toString();
    }, Af = function() {
        var a = l.___jsl;
        if (a && a.H) for (var b in a.H) if (a.H[b].r = a.H[b].r || [], a.H[b].L = a.H[b].L || [], 
        a.H[b].r = a.H[b].L.concat(), a.CP) for (var c = 0; c < a.CP.length; c++) a.CP[c] = null;
    }, Bf;
    try {
        var Cf = {};
        Object.defineProperty(Cf, "abcd", {
            configurable: !0,
            enumerable: !0,
            value: 1
        }), Object.defineProperty(Cf, "abcd", {
            configurable: !0,
            enumerable: !0,
            value: 2
        }), Bf = 2 == Cf.abcd;
    } catch (a) {
        Bf = !1;
    }
    var Q = function(a, b, c) {
        Bf ? Object.defineProperty(a, b, {
            configurable: !0,
            enumerable: !0,
            value: c
        }) : a[b] = c;
    }, Df = function(a, b) {
        if (b) for (var c in b) b.hasOwnProperty(c) && Q(a, c, b[c]);
    }, Ef = function(a) {
        var c, b = {};
        for (c in a) a.hasOwnProperty(c) && (b[c] = a[c]);
        return b;
    }, Ff = function(a, b) {
        if (!b || !b.length) return !0;
        if (!a) return !1;
        for (var c = 0; c < b.length; c++) {
            var d = a[b[c]];
            if (void 0 === d || null === d || "" === d) return !1;
        }
        return !0;
    }, Gf = {
        Hd: {
            ub: 500,
            tb: 600,
            providerId: "facebook.com"
        },
        Id: {
            ub: 500,
            tb: 620,
            providerId: "github.com"
        },
        Jd: {
            ub: 515,
            tb: 680,
            providerId: "google.com"
        },
        Od: {
            ub: 485,
            tb: 705,
            providerId: "twitter.com"
        }
    }, Hf = function(a) {
        for (var b in Gf) if (Gf[b].providerId == a) return Gf[b];
        return null;
    }, R = function(a, b) {
        this.code = "auth/" + a, this.message = b || If[a] || "";
    };
    t(R, Error), R.prototype.G = function() {
        return {
            name: this.code,
            code: this.code,
            message: this.message
        };
    };
    var If = {
        "argument-error": "",
        "app-not-authorized": "This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.",
        "cors-unsupported": "This browser is not supported.",
        "credential-already-in-use": "This credential is already associated with a different user account.",
        "custom-token-mismatch": "The custom token corresponds to a different audience.",
        "requires-recent-login": "This operation is sensitive and requires recent authentication. Log in again before retrying this request.",
        "email-already-in-use": "The email address is already in use by another account.",
        "expired-action-code": "The action code has expired. ",
        "cancelled-popup-request": "This operation has been cancelled due to another conflicting popup being opened.",
        "internal-error": "An internal error has occurred.",
        "invalid-user-token": "The user's credential is no longer valid. The user must sign in again.",
        "invalid-auth-event": "An internal error has occurred.",
        "invalid-custom-token": "The custom token format is incorrect. Please check the documentation.",
        "invalid-email": "The email address is badly formatted.",
        "invalid-api-key": "Your API key is invalid, please check you have copied it correctly.",
        "invalid-credential": "The supplied auth credential is malformed or has expired.",
        "invalid-oauth-provider": "EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.",
        "unauthorized-domain": "This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.",
        "invalid-action-code": "The action code is invalid. This can happen if the code is malformed, expired, or has already been used.",
        "wrong-password": "The password is invalid or the user does not have a password.",
        "missing-iframe-start": "An internal error has occurred.",
        "auth-domain-config-required": "Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.",
        "app-deleted": "This instance of FirebaseApp has been deleted.",
        "account-exists-with-different-credential": "An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.",
        "network-request-failed": "A network error (such as timeout, interrupted connection or unreachable host) has occurred.",
        "no-auth-event": "An internal error has occurred.",
        "no-such-provider": "User was not linked to an account with the given provider.",
        "operation-not-allowed": "The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.",
        "operation-not-supported-in-this-environment": 'This operation is not supported in the environment this application is running on. "location.protocol" must be http or https and web storage must be enabled.',
        "popup-blocked": "Unable to establish a connection with the popup. It may have been blocked by the browser.",
        "popup-closed-by-user": "The popup has been closed by the user before finalizing the operation.",
        "provider-already-linked": "User can only be linked to one identity for the given provider.",
        timeout: "The operation has timed out.",
        "user-token-expired": "The user's credential is no longer valid. The user must sign in again.",
        "too-many-requests": "We have blocked all requests from this device due to unusual activity. Try again later.",
        "user-cancelled": "User did not grant your application the permissions it requested.",
        "user-not-found": "There is no user record corresponding to this identifier. The user may have been deleted.",
        "user-disabled": "The user account has been disabled by an administrator.",
        "user-mismatch": "The supplied credentials do not correspond to the previously signed in user.",
        "user-signed-out": "",
        "weak-password": "The password must be 6 characters long or more.",
        "web-storage-unsupported": "This browser is not supported."
    }, Jf = function(a, b, c, d, e) {
        if (this.va = a, this.za = b || null, this.hb = c || null, this.cc = d || null, 
        this.J = e || null, !this.hb && !this.J) throw new R("invalid-auth-event");
        if (this.hb && this.J) throw new R("invalid-auth-event");
        if (this.hb && !this.cc) throw new R("invalid-auth-event");
    };
    Jf.prototype.getError = function() {
        return this.J;
    }, Jf.prototype.G = function() {
        return {
            type: this.va,
            eventId: this.za,
            urlResponse: this.hb,
            sessionId: this.cc,
            error: this.J && this.J.G()
        };
    };
    var Kf = function(a) {
        var b = "unauthorized-domain", c = void 0, d = af(a);
        a = d.ga, "http" != (d = d.la) && "https" != d ? b = "operation-not-supported-in-this-environment" : c = ma("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.", a), 
        R.call(this, b, c);
    };
    t(Kf, R);
    var Lf = function(a) {
        this.qe = a.sub, la(), this.Db = a.email || null;
    }, Mf = function(a, b, c, d) {
        var e = {};
        if (ha(c) ? e = c : b && n(c) && n(d) ? e = {
            oauthToken: c,
            oauthTokenSecret: d
        } : !b && n(c) && (e = {
            accessToken: c
        }), b || !e.idToken && !e.accessToken) {
            if (!(b && e.oauthToken && e.oauthTokenSecret)) {
                if (b) throw new R("argument-error", "credential failed: expected 2 arguments (the OAuth access token and secret).");
                throw new R("argument-error", "credential failed: expected 1 argument (the OAuth access token).");
            }
            Q(this, "accessToken", e.oauthToken), Q(this, "secret", e.oauthTokenSecret);
        } else e.idToken && Q(this, "idToken", e.idToken), e.accessToken && Q(this, "accessToken", e.accessToken);
        Q(this, "provider", a);
    };
    Mf.prototype.Gb = function(a) {
        return Nf(a, Of(this));
    }, Mf.prototype.md = function(a, b) {
        var c = Of(this);
        return c.idToken = b, Pf(a, c);
    };
    var Of = function(a) {
        var b = {};
        return a.idToken && (b.id_token = a.idToken), a.accessToken && (b.access_token = a.accessToken), 
        a.secret && (b.oauth_token_secret = a.secret), b.providerId = a.provider, {
            postBody: ff(b).toString(),
            requestUri: wf() ? jf() : "http://localhost"
        };
    };
    Mf.prototype.G = function() {
        var a = {
            provider: this.provider
        };
        return this.idToken && (a.oauthIdToken = this.idToken), this.accessToken && (a.oauthAccessToken = this.accessToken), 
        this.secret && (a.oauthTokenSecret = this.secret), a;
    };
    var Qf = function(a, b) {
        var c = !!b;
        return b = function() {
            Df(this, {
                providerId: a,
                isOAuthProvider: !0
            }), this.Lc = [], "google.com" == a && this.addScope("profile");
        }, c || (b.prototype.addScope = function(a) {
            Ja(this.Lc, a) || this.Lc.push(a);
        }), b.prototype.Hb = function() {
            return Pa(this.Lc);
        }, b.credential = function(b, e) {
            return new Mf(a, c, b, e);
        }, Df(b, {
            PROVIDER_ID: a
        }), b;
    }, Rf = Qf("facebook.com");
    Rf.prototype.addScope = Rf.prototype.addScope || void 0;
    var Sf = Qf("github.com");
    Sf.prototype.addScope = Sf.prototype.addScope || void 0;
    var Tf = Qf("google.com");
    Tf.prototype.addScope = Tf.prototype.addScope || void 0, Tf.credential = function(a, b) {
        if (!a && !b) throw new R("argument-error", "credential failed: must provide the ID token and/or the access token.");
        return new Mf("google.com", !1, ha(a) ? a : {
            idToken: a || null,
            accessToken: b || null
        });
    };
    var Uf = Qf("twitter.com", !0), Vf = function(a, b) {
        this.Db = a, this.Dc = b, Q(this, "provider", "password");
    };
    Vf.prototype.Gb = function(a) {
        return S(a, Wf, {
            email: this.Db,
            password: this.Dc
        });
    }, Vf.prototype.md = function(a, b) {
        return S(a, Xf, {
            idToken: b,
            email: this.Db,
            password: this.Dc
        });
    }, Vf.prototype.G = function() {
        return {
            email: this.Db,
            password: this.Dc
        };
    };
    var Yf = function() {
        Df(this, {
            providerId: "password",
            isOAuthProvider: !1
        });
    };
    Df(Yf, {
        PROVIDER_ID: "password"
    });
    var Zf = {
        Me: Yf,
        Hd: Rf,
        Jd: Tf,
        Id: Sf,
        Od: Uf
    }, $f = function(a) {
        var b = a && a.providerId;
        if (!b) return null;
        var c = a && a.oauthAccessToken, d = a && a.oauthTokenSecret;
        a = a && a.oauthIdToken;
        for (var e in Zf) if (Zf[e].PROVIDER_ID == b) try {
            return Zf[e].credential({
                accessToken: c,
                idToken: a,
                oauthToken: c,
                oauthTokenSecret: d
            });
        } catch (f) {
            break;
        }
        return null;
    }, ag = function(a, b, c, d) {
        R.call(this, a, d), Q(this, "email", b), Q(this, "credential", c);
    };
    t(ag, R), ag.prototype.G = function() {
        var a = {
            code: this.code,
            message: this.message,
            email: this.email
        }, b = this.credential && this.credential.G();
        return b && (Ya(a, b), a.providerId = b.provider, delete a.provider), a;
    };
    var bg = function(a) {
        if (a.code) {
            var b = a.code || "";
            return 0 == b.indexOf("auth/") && (b = b.substring(5)), a.email ? new ag(b, a.email, $f(a), a.message) : new R(b, a.message || void 0);
        }
        return null;
    }, cg = function(a) {
        this.Le = a;
    };
    t(cg, pc), cg.prototype.kb = function() {
        return new this.Le();
    }, cg.prototype.Qb = function() {
        return {};
    };
    var T = function(a, b, c) {
        var d;
        if (d = "Node" == rf(), !(d = l.XMLHttpRequest || d && firebase.INTERNAL.node && firebase.INTERNAL.node.XMLHttpRequest)) throw new R("internal-error", "The XMLHttpRequest compatibility library was not found.");
        this.v = a, a = b || {}, this.Ae = a.secureTokenEndpoint || "https://securetoken.googleapis.com/v1/token", 
        this.Be = a.secureTokenTimeout || 1e4, this.wd = Wa(a.secureTokenHeaders || dg), 
        this.$d = a.firebaseEndpoint || "https://www.googleapis.com/identitytoolkit/v3/relyingparty/", 
        this.ae = a.firebaseTimeout || 1e4, this.cd = Wa(a.firebaseHeaders || eg), c && (this.cd["X-Client-Version"] = c, 
        this.wd["X-Client-Version"] = c), this.Sd = new uc(), this.Ke = new cg(d);
    }, fg, dg = {
        "Content-Type": "application/x-www-form-urlencoded"
    }, eg = {
        "Content-Type": "application/json"
    }, hg = function(a, b, c, d, e, f, g) {
        mf() ? a = r(a.De, a) : (fg || (fg = new I(function(a, b) {
            gg(a, b);
        })), a = r(a.Ce, a)), a(b, c, d, e, f, g);
    };
    T.prototype.De = function(a, b, c, d, e, f) {
        var q, g = "Node" == rf(), k = sf() ? g ? new M(this.Ke) : new M() : new M(this.Sd);
        f && (k.fb = Math.max(0, f), q = setTimeout(function() {
            k.dispatchEvent("timeout");
        }, f)), k.listen("complete", function() {
            q && clearTimeout(q);
            var a = null;
            try {
                var c;
                c = this.a ? ic(this.a.responseText) : void 0, a = c || null;
            } catch (Pi) {
                try {
                    a = JSON.parse(Ne(this)) || null;
                } catch (Qi) {
                    a = null;
                }
            }
            b && b(a);
        }), Tb(k, "ready", function() {
            q && clearTimeout(q), this.ya || (this.ya = !0, this.Oa());
        }), Tb(k, "timeout", function() {
            q && clearTimeout(q), this.ya || (this.ya = !0, this.Oa()), b && b(null);
        }), k.send(a, c, d, e);
    };
    var Pd = "__fcb" + Math.floor(1e6 * Math.random()).toString(), gg = function(a, b) {
        ((window.gapi || {}).client || {}).request ? a() : (l[Pd] = function() {
            ((window.gapi || {}).client || {}).request ? a() : b(Error("CORS_UNSUPPORTED"));
        }, Rd(function() {
            b(Error("CORS_UNSUPPORTED"));
        }));
    };
    T.prototype.Ce = function(a, b, c, d, e) {
        var f = this;
        fg.then(function() {
            window.gapi.client.setApiKey(f.v);
            var g = window.gapi.auth.getToken();
            window.gapi.auth.setToken(null), window.gapi.client.request({
                path: a,
                method: c,
                body: d,
                headers: e,
                authType: "none",
                callback: function(a) {
                    window.gapi.auth.setToken(g), b && b(a);
                }
            });
        }).l(function(a) {
            b && b({
                error: {
                    message: a && a.message || "CORS_UNSUPPORTED"
                }
            });
        });
    };
    var jg = function(a, b) {
        return new I(function(c, d) {
            "refresh_token" == b.grant_type && b.refresh_token || "authorization_code" == b.grant_type && b.code ? hg(a, a.Ae + "?key=" + encodeURIComponent(a.v), function(a) {
                a ? a.error ? d(ig(a)) : a.access_token && a.refresh_token ? c(a) : d(new R("internal-error")) : d(new R("network-request-failed"));
            }, "POST", ff(b).toString(), a.wd, a.Be) : d(new R("internal-error"));
        });
    }, kg = function(a) {
        var c, b = {};
        for (c in a) null !== a[c] && void 0 !== a[c] && (b[c] = a[c]);
        return lc(b);
    }, lg = function(a, b, c, d, e) {
        var f = a.$d + b + "?key=" + encodeURIComponent(a.v);
        return e && (f += "&cb=" + la().toString()), new I(function(b, e) {
            hg(a, f, function(a) {
                a ? a.error ? e(ig(a)) : b(a) : e(new R("network-request-failed"));
            }, c, kg(d), a.cd, a.ae);
        });
    }, mg = function(a) {
        if (!Zb.test(a.email)) throw new R("invalid-email");
    }, ng = function(a) {
        "email" in a && mg(a);
    }, pg = function(a, b) {
        var c = wf() ? jf() : "http://localhost";
        return S(a, og, {
            identifier: b,
            continueUri: c
        }).then(function(a) {
            return a.allProviders || [];
        });
    }, rg = function(a) {
        return S(a, qg, {}).then(function(a) {
            return a.authorizedDomains || [];
        });
    }, sg = function(a) {
        if (!a.idToken) throw new R("internal-error");
    };
    T.prototype.signInAnonymously = function() {
        return S(this, tg, {});
    }, T.prototype.updateEmail = function(a, b) {
        return S(this, ug, {
            idToken: a,
            email: b
        });
    }, T.prototype.updatePassword = function(a, b) {
        return S(this, Xf, {
            idToken: a,
            password: b
        });
    };
    var vg = {
        displayName: "DISPLAY_NAME",
        photoUrl: "PHOTO_URL"
    };
    T.prototype.updateProfile = function(a, b) {
        var c = {
            idToken: a
        }, d = [];
        return Ra(vg, function(a, f) {
            var e = b[f];
            null === e ? d.push(a) : f in b && (c[f] = e);
        }), d.length && (c.deleteAttribute = d), S(this, ug, c);
    }, T.prototype.sendPasswordResetEmail = function(a) {
        return S(this, wg, {
            requestType: "PASSWORD_RESET",
            email: a
        });
    }, T.prototype.sendEmailVerification = function(a) {
        return S(this, xg, {
            requestType: "VERIFY_EMAIL",
            idToken: a
        });
    };
    var zg = function(a, b, c) {
        return S(a, yg, {
            idToken: b,
            deleteProvider: c
        });
    }, Ag = function(a) {
        if (!a.requestUri || !a.sessionId && !a.postBody) throw new R("internal-error");
    }, Bg = function(a) {
        var b = null;
        if (a.needConfirmation ? (a.code = "account-exists-with-different-credential", b = bg(a)) : "FEDERATED_USER_ID_ALREADY_LINKED" == a.errorMessage ? (a.code = "credential-already-in-use", 
        b = bg(a)) : "EMAIL_EXISTS" == a.errorMessage && (a.code = "email-already-in-use", 
        b = bg(a)), b) throw b;
        if (!a.idToken) throw new R("internal-error");
    }, Nf = function(a, b) {
        return b.returnIdpCredential = !0, S(a, Cg, b);
    }, Pf = function(a, b) {
        return b.returnIdpCredential = !0, S(a, Dg, b);
    }, Eg = function(a) {
        if (!a.oobCode) throw new R("invalid-action-code");
    };
    T.prototype.confirmPasswordReset = function(a, b) {
        return S(this, Fg, {
            oobCode: a,
            newPassword: b
        });
    }, T.prototype.checkActionCode = function(a) {
        return S(this, Gg, {
            oobCode: a
        });
    }, T.prototype.applyActionCode = function(a) {
        return S(this, Hg, {
            oobCode: a
        });
    };
    var Hg = {
        endpoint: "setAccountInfo",
        D: Eg,
        cb: "email"
    }, Gg = {
        endpoint: "resetPassword",
        D: Eg,
        ta: function(a) {
            if (!Zb.test(a.email)) throw new R("internal-error");
        }
    }, Ig = {
        endpoint: "signupNewUser",
        D: function(a) {
            if (mg(a), !a.password) throw new R("weak-password");
        },
        ta: sg,
        ua: !0
    }, og = {
        endpoint: "createAuthUri"
    }, Jg = {
        endpoint: "deleteAccount",
        ab: [ "idToken" ]
    }, yg = {
        endpoint: "setAccountInfo",
        ab: [ "idToken", "deleteProvider" ],
        D: function(a) {
            if (!ea(a.deleteProvider)) throw new R("internal-error");
        }
    }, Kg = {
        endpoint: "getAccountInfo"
    }, xg = {
        endpoint: "getOobConfirmationCode",
        ab: [ "idToken", "requestType" ],
        D: function(a) {
            if ("VERIFY_EMAIL" != a.requestType) throw new R("internal-error");
        },
        cb: "email"
    }, wg = {
        endpoint: "getOobConfirmationCode",
        ab: [ "requestType" ],
        D: function(a) {
            if ("PASSWORD_RESET" != a.requestType) throw new R("internal-error");
            mg(a);
        },
        cb: "email"
    }, qg = {
        Rd: !0,
        endpoint: "getProjectConfig",
        je: "GET"
    }, Fg = {
        endpoint: "resetPassword",
        D: Eg,
        cb: "email"
    }, ug = {
        endpoint: "setAccountInfo",
        ab: [ "idToken" ],
        D: ng,
        ua: !0
    }, Xf = {
        endpoint: "setAccountInfo",
        ab: [ "idToken" ],
        D: function(a) {
            if (ng(a), !a.password) throw new R("weak-password");
        },
        ta: sg,
        ua: !0
    }, tg = {
        endpoint: "signupNewUser",
        ta: sg,
        ua: !0
    }, Cg = {
        endpoint: "verifyAssertion",
        D: Ag,
        ta: Bg,
        ua: !0
    }, Dg = {
        endpoint: "verifyAssertion",
        D: function(a) {
            if (Ag(a), !a.idToken) throw new R("internal-error");
        },
        ta: Bg,
        ua: !0
    }, Lg = {
        endpoint: "verifyCustomToken",
        D: function(a) {
            if (!a.token) throw new R("invalid-custom-token");
        },
        ta: sg,
        ua: !0
    }, Wf = {
        endpoint: "verifyPassword",
        D: function(a) {
            if (mg(a), !a.password) throw new R("wrong-password");
        },
        ta: sg,
        ua: !0
    }, S = function(a, b, c) {
        if (!Ff(c, b.ab)) return K(new R("internal-error"));
        var e, d = b.je || "POST";
        return J(c).then(b.D).then(function() {
            return b.ua && (c.returnSecureToken = !0), lg(a, b.endpoint, d, c, b.Rd || !1);
        }).then(function(a) {
            return e = a;
        }).then(b.ta).then(function() {
            if (!b.cb) return e;
            if (!(b.cb in e)) throw new R("internal-error");
            return e[b.cb];
        });
    }, ig = function(a) {
        var b, c, d = {
            keyInvalid: "invalid-api-key",
            ipRefererBlocked: "app-not-authorized"
        };
        if (c = d[c = (a.error && a.error.errors && a.error.errors[0] || {}).reason || ""] ? new R(d[c]) : null) return c;
        d = {
            INVALID_CUSTOM_TOKEN: "invalid-custom-token",
            CREDENTIAL_MISMATCH: "custom-token-mismatch",
            MISSING_CUSTOM_TOKEN: "internal-error",
            INVALID_IDENTIFIER: "invalid-email",
            MISSING_CONTINUE_URI: "internal-error",
            INVALID_EMAIL: "invalid-email",
            INVALID_PASSWORD: "wrong-password",
            USER_DISABLED: "user-disabled",
            MISSING_PASSWORD: "internal-error",
            EMAIL_EXISTS: "email-already-in-use",
            PASSWORD_LOGIN_DISABLED: "operation-not-allowed",
            INVALID_IDP_RESPONSE: "invalid-credential",
            FEDERATED_USER_ID_ALREADY_LINKED: "credential-already-in-use",
            EMAIL_NOT_FOUND: "user-not-found",
            EXPIRED_OOB_CODE: "expired-action-code",
            INVALID_OOB_CODE: "invalid-action-code",
            MISSING_OOB_CODE: "internal-error",
            CREDENTIAL_TOO_OLD_LOGIN_AGAIN: "requires-recent-login",
            INVALID_ID_TOKEN: "invalid-user-token",
            TOKEN_EXPIRED: "user-token-expired",
            USER_NOT_FOUND: "user-token-expired",
            CORS_UNSUPPORTED: "cors-unsupported",
            TOO_MANY_ATTEMPTS_TRY_LATER: "too-many-requests",
            WEAK_PASSWORD: "weak-password",
            OPERATION_NOT_ALLOWED: "operation-not-allowed",
            USER_CANCELLED: "user-cancelled"
        }, b = (b = (c = a.error && a.error.message || "").match(/^[^\s]+\s*:\s*(.*)$/)) && 1 < b.length ? b[1] : void 0;
        for (var e in d) if (0 === c.indexOf(e)) return new R(d[e], b);
        return !b && a && (b = yf(a)), new R("internal-error", b);
    }, Mg = function(a) {
        this.R = a;
    };
    Mg.prototype.value = function() {
        return this.R;
    }, Mg.prototype.zd = function(a) {
        return this.R.style = a, this;
    };
    var Ng = function(a) {
        this.R = a || {};
    };
    Ng.prototype.value = function() {
        return this.R;
    }, Ng.prototype.zd = function(a) {
        return this.R.style = a, this;
    };
    var Pg = function(a) {
        this.Je = a, this.wc = null, this.od = Og(this);
    };
    Pg.prototype.Bc = function() {
        return this.od;
    };
    var Qg = function(a) {
        var b = new Ng();
        return b.R.where = document.body, b.R.url = a.Je, b.R.messageHandlersFilter = uf("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"), 
        b.R.attributes = b.R.attributes || {}, new Mg(b.R.attributes).zd({
            position: "absolute",
            top: "-100px",
            width: "1px",
            height: "1px"
        }), b.R.dontclear = !0, b;
    }, Og = function(a) {
        return Rg().then(function() {
            return new I(function(b, c) {
                uf("gapi.iframes.getContext")().open(Qg(a).value(), function(d) {
                    a.wc = d, a.wc.restyle({
                        setHideOnLeave: !1
                    });
                    var e = setTimeout(function() {
                        c(Error("Network Error"));
                    }, 5e3), f = function() {
                        clearTimeout(e), b();
                    };
                    d.ping(f).then(f, function() {
                        c(Error("Network Error"));
                    });
                });
            });
        });
    }, Sg = function(a, b) {
        a.od.then(function() {
            a.wc.register("authEvent", b, uf("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"));
        });
    }, Tg = "__iframefcb" + Math.floor(1e6 * Math.random()).toString(), Rg = function() {
        return new I(function(a, b) {
            var c = function() {
                Af(), uf("gapi.load")("gapi.iframes", {
                    callback: a,
                    ontimeout: function() {
                        Af(), b(Error("Network Error"));
                    },
                    timeout: 3e3
                });
            };
            uf("gapi.iframes.Iframe") ? a() : uf("gapi.load") ? c() : (l[Tg] = function() {
                uf("gapi.load") ? c() : b(Error("Network Error"));
            }, J(Od("https://apis.google.com/js/api.js?onload=" + Tg)).l(function() {
                b(Error("Network Error"));
            }));
        });
    }, Vg = function(a, b, c, d) {
        this.X = a, this.v = b, this.ea = c, d = this.xa = d || null, a = bf(a, "/__/auth/iframe"), 
        P(a, "apiKey", b), P(a, "appName", c), d && P(a, "v", d), this.ke = a.toString(), 
        this.hd = new Pg(this.ke), this.zb = [], Ug(this);
    };
    Vg.prototype.Bc = function() {
        return this.hd.Bc();
    };
    var Wg = function(a, b, c, d, e, f, g, k, q) {
        return a = bf(a, "/__/auth/handler"), P(a, "apiKey", b), P(a, "appName", c), P(a, "authType", d), 
        P(a, "providerId", e), f && f.length && P(a, "scopes", f.join(",")), g && P(a, "redirectUrl", g), 
        k && P(a, "eventId", k), q && P(a, "v", q), a.toString();
    }, Ug = function(a) {
        Sg(a.hd, function(b) {
            c = {};
            if (b && b.authEvent) {
                var d = !1;
                if ((b = b.authEvent || {}).type) {
                    if (c = b.error) var e = (c = b.error) && (c.name || c.code), c = e ? new R(e.substring(5), c.message) : null;
                    b = new Jf(b.type, b.eventId, b.urlResponse, b.sessionId, c);
                } else b = null;
                for (c = 0; c < a.zb.length; c++) d = a.zb[c](b) || d;
                return c = {}, c.status = d ? "ACK" : "ERROR", J(c);
            }
            return c.status = "ERROR", J(c);
        });
    }, Xg = function(a, b) {
        Ma(a.zb, function(a) {
            return a == b;
        });
    }, Yg = function(a) {
        if (this.u = a || firebase.INTERNAL.reactNative && firebase.INTERNAL.reactNative.AsyncStorage, 
        !this.u) throw new R("internal-error", "The React Native compatibility library was not found.");
    };
    h = Yg.prototype, h.get = function(a) {
        return J(this.u.getItem(a)).then(function(a) {
            return a && zf(a);
        });
    }, h.set = function(a, b) {
        return J(this.u.setItem(a, yf(b)));
    }, h.remove = function(a) {
        return J(this.u.removeItem(a));
    }, h.Ka = function() {}, h.Za = function() {};
    var Zg = function() {
        this.u = {};
    };
    h = Zg.prototype, h.get = function(a) {
        return J(this.u[a]);
    }, h.set = function(a, b) {
        return this.u[a] = b, J();
    }, h.remove = function(a) {
        return delete this.u[a], J();
    }, h.Ka = function() {}, h.Za = function() {};
    var ah = function() {
        if (!$g()) {
            if ("Node" == rf()) throw new R("internal-error", "The LocalStorage compatibility library was not found.");
            throw new R("web-storage-unsupported");
        }
        this.u = l.localStorage || firebase.INTERNAL.node.localStorage;
    }, $g = function() {
        var a = "Node" == rf();
        if (!(a = l.localStorage || a && firebase.INTERNAL.node && firebase.INTERNAL.node.localStorage)) return !1;
        try {
            return a.setItem("__sak", "1"), a.removeItem("__sak"), !0;
        } catch (b) {
            return !1;
        }
    };
    h = ah.prototype, h.get = function(a) {
        var b = this;
        return J().then(function() {
            var c = b.u.getItem(a);
            return zf(c);
        });
    }, h.set = function(a, b) {
        var c = this;
        return J().then(function() {
            var d = yf(b);
            null === d ? c.remove(a) : c.u.setItem(a, d);
        });
    }, h.remove = function(a) {
        var b = this;
        return J().then(function() {
            b.u.removeItem(a);
        });
    }, h.Ka = function(a) {
        l.window && Lb(l.window, "storage", a);
    }, h.Za = function(a) {
        l.window && Ub(l.window, "storage", a);
    };
    var bh = function() {
        this.u = {};
    };
    h = bh.prototype, h.get = function() {
        return J(null);
    }, h.set = function() {
        return J();
    }, h.remove = function() {
        return J();
    }, h.Ka = function() {}, h.Za = function() {};
    var dh = function() {
        if (!ch()) {
            if ("Node" == rf()) throw new R("internal-error", "The SessionStorage compatibility library was not found.");
            throw new R("web-storage-unsupported");
        }
        this.u = l.sessionStorage || firebase.INTERNAL.node.sessionStorage;
    }, ch = function() {
        var a = "Node" == rf();
        if (!(a = l.sessionStorage || a && firebase.INTERNAL.node && firebase.INTERNAL.node.sessionStorage)) return !1;
        try {
            return a.setItem("__sak", "1"), a.removeItem("__sak"), !0;
        } catch (b) {
            return !1;
        }
    };
    h = dh.prototype, h.get = function(a) {
        var b = this;
        return J().then(function() {
            var c = b.u.getItem(a);
            return zf(c);
        });
    }, h.set = function(a, b) {
        var c = this;
        return J().then(function() {
            var d = yf(b);
            null === d ? c.remove(a) : c.u.setItem(a, d);
        });
    }, h.remove = function(a) {
        var b = this;
        return J().then(function() {
            b.u.removeItem(a);
        });
    }, h.Ka = function() {}, h.Za = function() {};
    var eh = function(a, b, c, d, e, f) {
        if (!window.indexedDB) throw new R("web-storage-unsupported");
        this.Ud = a, this.Ac = b, this.qc = c, this.Fd = d, this.na = e, this.O = {}, this.vb = [], 
        this.sb = 0, this.le = f || l.indexedDB;
    }, fh, gh = function(a) {
        return new I(function(b, c) {
            var d = a.le.open(a.Ud, a.na);
            d.onerror = function(a) {
                c(Error(a.target.errorCode));
            }, d.onupgradeneeded = function(b) {
                b = b.target.result;
                try {
                    b.createObjectStore(a.Ac, {
                        keyPath: a.qc
                    });
                } catch (f) {
                    c(f);
                }
            }, d.onsuccess = function(a) {
                b(a.target.result);
            };
        });
    }, hh = function(a) {
        return a.jd || (a.jd = gh(a)), a.jd;
    }, ih = function(a, b) {
        return b.objectStore(a.Ac);
    }, jh = function(a, b, c) {
        return b.transaction([ a.Ac ], c ? "readwrite" : "readonly");
    }, kh = function(a) {
        return new I(function(b, c) {
            a.onsuccess = function(a) {
                a && a.target ? b(a.target.result) : b();
            }, a.onerror = function(a) {
                c(Error(a.target.errorCode));
            };
        });
    };
    h = eh.prototype, h.set = function(a, b) {
        var d, c = !1, e = this;
        return xd(hh(this).then(function(b) {
            return d = b, b = ih(e, jh(e, d, !0)), kh(b.get(a));
        }).then(function(f) {
            var g = ih(e, jh(e, d, !0));
            return f ? (f.value = b, kh(g.put(f))) : (e.sb++, c = !0, f = {}, f[e.qc] = a, f[e.Fd] = b, 
            kh(g.add(f)));
        }).then(function() {
            e.O[a] = b;
        }), function() {
            c && e.sb--;
        });
    }, h.get = function(a) {
        var b = this;
        return hh(this).then(function(c) {
            return kh(ih(b, jh(b, c, !1)).get(a));
        }).then(function(a) {
            return a && a.value;
        });
    }, h.remove = function(a) {
        var b = !1, c = this;
        return xd(hh(this).then(function(d) {
            return b = !0, c.sb++, kh(ih(c, jh(c, d, !0)).delete(a));
        }).then(function() {
            delete c.O[a];
        }), function() {
            b && c.sb--;
        });
    }, h.Fe = function() {
        var a = this;
        return hh(this).then(function(b) {
            var c = ih(a, jh(a, b, !1));
            return c.getAll ? kh(c.getAll()) : new I(function(a, b) {
                var d = [], e = c.openCursor();
                e.onsuccess = function(b) {
                    (b = b.target.result) ? (d.push(b.value), b.continue()) : a(d);
                }, e.onerror = function(a) {
                    b(Error(a.target.errorCode));
                };
            });
        }).then(function(b) {
            var c = {}, d = [];
            if (0 == a.sb) {
                for (d = 0; d < b.length; d++) c[b[d][a.qc]] = b[d][a.Fd];
                d = kf(a.O, c), a.O = c;
            }
            return d;
        });
    }, h.Ka = function(a) {
        0 == this.vb.length && this.Oc(), this.vb.push(a);
    }, h.Za = function(a) {
        Ma(this.vb, function(b) {
            return b == a;
        }), 0 == this.vb.length && this.ec();
    }, h.Oc = function() {
        var a = this;
        this.ec();
        var b = function() {
            return a.Fc = xe(800).then(r(a.Fe, a)).then(function(b) {
                0 < b.length && x(a.vb, function(a) {
                    a(b);
                });
            }).then(b).l(function(a) {
                "STOP_EVENT" != a.message && b();
            }), a.Fc;
        };
        b();
    }, h.ec = function() {
        this.Fc && this.Fc.cancel("STOP_EVENT");
    };
    var oh = function() {
        this.$c = {
            Browser: lh,
            Node: mh,
            ReactNative: nh
        }[rf()];
    }, ph, lh = {
        V: ah,
        Qc: dh
    }, mh = {
        V: ah,
        Qc: dh
    }, nh = {
        V: Yg,
        Qc: bh
    }, qh = "First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" "), U = function(a, b) {
        return {
            name: a || "",
            ca: "a valid string",
            optional: !!b,
            da: n
        };
    }, rh = function(a) {
        return {
            name: a || "",
            ca: "a valid object",
            optional: !1,
            da: ha
        };
    }, sh = function(a, b) {
        return {
            name: a || "",
            ca: "a function",
            optional: !!b,
            da: p
        };
    }, th = function() {
        return {
            name: "",
            ca: "null",
            optional: !1,
            da: da
        };
    }, uh = function() {
        return {
            name: "credential",
            ca: "a valid credential",
            optional: !1,
            da: function(a) {
                return !(!a || !a.Gb);
            }
        };
    }, vh = function() {
        return {
            name: "authProvider",
            ca: "a valid Auth provider",
            optional: !1,
            da: function(a) {
                return !!(a && a.providerId && a.hasOwnProperty && a.hasOwnProperty("isOAuthProvider"));
            }
        };
    }, wh = function(a, b, c, d) {
        return {
            name: c || "",
            ca: a.ca + " or " + b.ca,
            optional: !!d,
            da: function(c) {
                return a.da(c) || b.da(c);
            }
        };
    }, yh = function(a, b) {
        for (var c in b) {
            var d = b[c].name;
            a[d] = xh(d, a[c], b[c].b);
        }
    }, V = function(a, b, c, d) {
        a[b] = xh(b, c, d);
    }, xh = function(a, b, c) {
        if (!c) return b;
        var d = zh(a);
        a = function() {
            var e, a = Array.prototype.slice.call(arguments);
            a: {
                e = Array.prototype.slice.call(a);
                var k;
                k = 0;
                for (var q = !1, ra = 0; ra < c.length; ra++) if (c[ra].optional) q = !0; else {
                    if (q) throw new R("internal-error", "Argument validator encountered a required argument after an optional argument.");
                    k++;
                }
                if (q = c.length, e.length < k || q < e.length) e = "Expected " + (k == q ? 1 == k ? "1 argument" : k + " arguments" : k + "-" + q + " arguments") + " but got " + e.length + "."; else {
                    for (k = 0; k < e.length; k++) if (q = c[k].optional && void 0 === e[k], !c[k].da(e[k]) && !q) {
                        if (e = c[k], 0 > k || k >= qh.length) throw new R("internal-error", "Argument validator received an unsupported number of arguments.");
                        e = qh[k] + " argument " + (e.name ? '"' + e.name + '" ' : "") + "must be " + e.ca + ".";
                        break a;
                    }
                    e = null;
                }
            }
            if (e) throw new R("argument-error", d + " failed: " + e);
            return b.apply(this, a);
        };
        for (var e in b) a[e] = b[e];
        for (e in b.prototype) a.prototype[e] = b.prototype[e];
        return a;
    }, zh = function(a) {
        return (a = a.split("."))[a.length - 1];
    }, Ah = function(a, b, c, d) {
        this.te = a, this.xd = b, this.ze = c, this.eb = d, this.N = {}, ph || (ph = new oh()), 
        a = ph;
        try {
            var e;
            hf() ? (fh || (fh = new eh("firebaseLocalStorageDb", "firebaseLocalStorage", "fbase_key", "value", 1)), 
            e = fh) : e = new a.$c.V(), this.Ta = e;
        } catch (f) {
            this.Ta = new Zg(), this.eb = !0;
        }
        try {
            this.gc = new a.$c.Qc();
        } catch (f) {
            this.gc = new Zg();
        }
        this.Ad = r(this.Bd, this), this.O = {};
    }, Bh, Ch = function() {
        return Bh || (Bh = new Ah("firebase", ":", !("Safari" != lf(gf()) || !l.window || l.window == l.window.top), xf())), 
        Bh;
    };
    h = Ah.prototype, h.K = function(a, b) {
        return this.te + this.xd + a.name + (b ? this.xd + b : "");
    }, h.get = function(a, b) {
        return (a.V ? this.Ta : this.gc).get(this.K(a, b));
    }, h.remove = function(a, b) {
        return b = this.K(a, b), a.V && !this.eb && (this.O[b] = null), (a.V ? this.Ta : this.gc).remove(b);
    }, h.set = function(a, b, c) {
        var d = this.K(a, c), e = this, f = a.V ? this.Ta : this.gc;
        return f.set(d, b).then(function() {
            return f.get(d);
        }).then(function(b) {
            a.V && !this.eb && (e.O[d] = b);
        });
    }, h.addListener = function(a, b, c) {
        a = this.K(a, b), this.eb || (this.O[a] = l.localStorage.getItem(a)), Ua(this.N) && this.Oc(), 
        this.N[a] || (this.N[a] = []), this.N[a].push(c);
    }, h.removeListener = function(a, b, c) {
        a = this.K(a, b), this.N[a] && (Ma(this.N[a], function(a) {
            return a == c;
        }), 0 == this.N[a].length && delete this.N[a]), Ua(this.N) && this.ec();
    }, h.Oc = function() {
        this.Ta.Ka(this.Ad), this.eb || Dh(this);
    };
    var Dh = function(a) {
        Eh(a), a.zc = setInterval(function() {
            for (var b in a.N) {
                var c = l.localStorage.getItem(b);
                c != a.O[b] && (a.O[b] = c, c = new Ab({
                    type: "storage",
                    key: b,
                    target: window,
                    oldValue: a.O[b],
                    newValue: c
                }), a.Bd(c));
            }
        }, 1e3);
    }, Eh = function(a) {
        a.zc && (clearInterval(a.zc), a.zc = null);
    };
    Ah.prototype.ec = function() {
        this.Ta.Za(this.Ad), this.eb || Eh(this);
    }, Ah.prototype.Bd = function(a) {
        if (a && a.ce) {
            var b = a.lb.key;
            if (this.ze) {
                var c = l.localStorage.getItem(b);
                (a = a.lb.newValue) != c && (a ? l.localStorage.setItem(b, a) : a || l.localStorage.removeItem(b));
            }
            this.O[b] = l.localStorage.getItem(b), this.Vc(b);
        } else x(a, r(this.Vc, this));
    }, Ah.prototype.Vc = function(a) {
        this.N[a] && x(this.N[a], function(a) {
            a();
        });
    };
    var Fh = function(a) {
        this.B = a, this.A = Ch();
    }, Gh = {
        name: "pendingRedirect",
        V: !1
    }, Hh = function(a) {
        return a.A.set(Gh, "pending", a.B);
    }, Ih = function(a) {
        return a.A.remove(Gh, a.B);
    }, Jh = function(a) {
        return a.A.get(Gh, a.B).then(function(a) {
            return "pending" == a;
        });
    }, Mh = function(a, b, c) {
        var d = this, e = (this.xa = firebase.SDK_VERSION || null) ? tf(this.xa) : null;
        this.f = new T(b, null, e), this.qa = null, this.X = a, this.v = b, this.ea = c, 
        this.wb = [], this.Pb = !1, this.Rc = r(this.de, this), this.Wa = new Kh(this), 
        this.rd = new Lh(this), this.Ec = new Fh(this.v + ":" + this.ea), this.gb = {}, 
        this.gb.unknown = this.Wa, this.gb.signInViaRedirect = this.Wa, this.gb.linkViaRedirect = this.Wa, 
        this.gb.signInViaPopup = this.rd, this.gb.linkViaPopup = this.rd, this.$b = this.bb = null, 
        this.Ub = new I(function(a, b) {
            d.bb = a, d.$b = b;
        });
    };
    Mh.prototype.reset = function() {
        var a = this;
        this.qa = null, this.Ub.cancel(), this.Pb = !1, this.$b = this.bb = null, this.Mb && Xg(this.Mb, this.Rc), 
        this.Ub = new I(function(b, c) {
            a.bb = b, a.$b = c;
        });
    };
    var Nh = function(a) {
        var b = jf();
        return rg(a).then(function(a) {
            a: {
                for (var c = af(b).ga, e = 0; e < a.length; e++) {
                    var f, g = a[e];
                    f = c;
                    var k = Mc(g);
                    if (k ? f = !!(f = Mc(f)) && k.Eb(f) : (k = g.split(".").join("\\."), f = new RegExp("^(.+\\." + k + "|" + k + ")$", "i").test(f)), 
                    f) {
                        a = !0;
                        break a;
                    }
                }
                a = !1;
            }
            if (!a) throw new Kf(jf());
        });
    }, Oh = function(a) {
        return a.Pb || (a.Pb = !0, qf().then(function() {
            a.Mb = new Vg(a.X, a.v, a.ea, a.xa), a.Mb.Bc().l(function() {
                a.$b(new R("network-request-failed")), a.reset();
            }), a.Mb.zb.push(a.Rc);
        })), a.Ub;
    };
    Mh.prototype.subscribe = function(a) {
        if (Ja(this.wb, a) || this.wb.push(a), !this.Pb) {
            var b = this, c = function() {
                var c, a = gf();
                (c = xf(a)) || (a = a || gf(), c = "Safari" != lf(a) && !a.toLowerCase().match(/iphone|ipad|ipod/)), 
                c ? Ph(b.Wa) : Oh(b);
            };
            Jh(this.Ec).then(function(a) {
                a ? Ih(b.Ec).then(function() {
                    Oh(b);
                }) : c();
            }).l(function() {
                c();
            });
        }
    }, Mh.prototype.unsubscribe = function(a) {
        Ma(this.wb, function(b) {
            return b == a;
        });
    }, Mh.prototype.de = function(a) {
        if (!a) throw new R("invalid-auth-event");
        this.bb && (this.bb(), this.bb = null);
        for (var b = !1, c = 0; c < this.wb.length; c++) {
            var d = this.wb[c];
            if (d.Wc(a.va, a.za)) {
                (b = this.gb[a.va]) && b.sd(a, d), b = !0;
                break;
            }
        }
        return Ph(this.Wa), b;
    }, Mh.prototype.getRedirectResult = function() {
        return this.Wa.getRedirectResult();
    };
    var Rh = function(a, b, c, d, e, f) {
        return b ? f ? (Oh(a), J()) : (a.qa || (a.qa = Nh(a.f)), a.qa.then(function() {
            return Oh(a);
        }).then(function() {
            Qh(d);
            var f = Wg(a.X, a.v, a.ea, c, d.providerId, d.Hb(), null, e, a.xa);
            (b || l.window).location.href = dc(gc(f));
        }).l(function(b) {
            throw "auth/network-request-failed" == b.code && (a.qa = null), b;
        })) : K(new R("popup-blocked"));
    }, Sh = function(a, b, c, d) {
        return a.qa || (a.qa = Nh(a.f)), a.qa.then(function() {
            Qh(c);
            var e = Wg(a.X, a.v, a.ea, b, c.providerId, c.Hb(), jf(), d, a.xa);
            Hh(a.Ec).then(function() {
                l.window.location.href = dc(gc(e));
            });
        });
    }, Th = function(a, b, c, d, e) {
        var f = new R("popup-closed-by-user");
        return a.Ub.l(function() {}).then(function() {
            return pf(d);
        }).then(function() {
            return xe(2e3).then(function() {
                b.Ha(c, null, f, e);
            });
        });
    }, Qh = function(a) {
        if (!a.isOAuthProvider) throw new R("invalid-oauth-provider");
    }, Uh = {}, Vh = function(a, b, c) {
        var d = b + ":" + c;
        return Uh[d] || (Uh[d] = new Mh(a, b, c)), Uh[d];
    }, Kh = function(a) {
        this.A = a, this.Jc = this.Zb = this.Xa = this.W = null, this.Ic = !1;
    };
    Kh.prototype.sd = function(a, b) {
        if (!a) return K(new R("invalid-auth-event"));
        this.Ic = !0;
        var c = a.va, d = a.za;
        return "unknown" == c ? (this.W || Wh(this, !1, null, null), a = J()) : a = a.J ? this.Gc(a, b) : b.mb(c, d) ? this.Hc(a, b) : K(new R("invalid-auth-event")), 
        a;
    };
    var Ph = function(a) {
        a.Ic || (a.Ic = !0, Wh(a, !1, null, null));
    };
    Kh.prototype.Gc = function(a) {
        return this.W || Wh(this, !0, null, a.getError()), J();
    }, Kh.prototype.Hc = function(a, b) {
        var c = this, d = a.va;
        b = b.mb(d, a.za);
        var e = a.hb;
        a = a.cc;
        var f = "signInViaRedirect" == d || "linkViaRedirect" == d;
        return this.W ? J() : b(e, a).then(function(a) {
            c.W || Wh(c, f, a, null);
        }).l(function(a) {
            c.W || Wh(c, f, null, a);
        });
    };
    var Wh = function(a, b, c, d) {
        b ? d ? (a.W = function() {
            return K(d);
        }, a.Zb && a.Zb(d)) : (a.W = function() {
            return J(c);
        }, a.Xa && a.Xa(c)) : (a.W = function() {
            return J({
                user: null
            });
        }, a.Xa && a.Xa({
            user: null
        })), a.Xa = null, a.Zb = null;
    };
    Kh.prototype.getRedirectResult = function() {
        var a = this;
        return this.Uc || (this.Uc = new I(function(b, c) {
            a.W ? a.W().then(b, c) : (a.Xa = b, a.Zb = c, Xh(a));
        })), this.Uc;
    };
    var Xh = function(a) {
        var b = new R("timeout");
        a.Jc && a.Jc.cancel(), a.Jc = xe(1e4).then(function() {
            a.W || Wh(a, !0, null, b);
        });
    }, Lh = function(a) {
        this.A = a;
    };
    Lh.prototype.sd = function(a, b) {
        if (!a) return K(new R("invalid-auth-event"));
        var c = a.va, d = a.za;
        return a.J ? this.Gc(a, b) : b.mb(c, d) ? this.Hc(a, b) : K(new R("invalid-auth-event"));
    }, Lh.prototype.Gc = function(a, b) {
        return b.Ha(a.va, null, a.getError(), a.za), J();
    }, Lh.prototype.Hc = function(a, b) {
        var c = a.za, d = a.va;
        return b.mb(d, c)(a.hb, a.cc).then(function(a) {
            b.Ha(d, a, null, c);
        }).l(function(a) {
            b.Ha(d, null, a, c);
        });
    };
    var Yh = function(a) {
        this.f = a, this.wa = this.S = null, this.Pa = 0;
    };
    Yh.prototype.G = function() {
        return {
            apiKey: this.f.v,
            refreshToken: this.S,
            accessToken: this.wa,
            expirationTime: this.Pa
        };
    };
    var $h = function(a, b) {
        var c = b.idToken, d = b.refreshToken;
        b = Zh(b.expiresIn), a.wa = c, a.Pa = b, a.S = d;
    }, Zh = function(a) {
        return la() + 1e3 * parseInt(a, 10);
    }, ai = function(a, b) {
        return jg(a.f, b).then(function(b) {
            return a.wa = b.access_token, a.Pa = Zh(b.expires_in), a.S = b.refresh_token, {
                accessToken: a.wa,
                expirationTime: a.Pa,
                refreshToken: a.S
            };
        }).l(function(b) {
            throw "auth/user-token-expired" == b.code && (a.S = null), b;
        });
    }, bi = function(a) {
        return !(!a.wa || a.S);
    };
    Yh.prototype.getToken = function(a) {
        return a = !!a, bi(this) ? K(new R("user-token-expired")) : a || !this.wa || la() > this.Pa - 3e4 ? this.S ? ai(this, {
            grant_type: "refresh_token",
            refresh_token: this.S
        }) : J(null) : J({
            accessToken: this.wa,
            expirationTime: this.Pa,
            refreshToken: this.S
        });
    };
    var ci = function(a, b, c, d, e) {
        Df(this, {
            uid: a,
            displayName: d || null,
            photoURL: e || null,
            email: c || null,
            providerId: b
        });
    }, di = function(a, b) {
        zb.call(this, a);
        for (var c in b) this[c] = b[c];
    };
    t(di, zb);
    var W = function(a, b, c) {
        this.U = [], this.v = a.apiKey, this.ea = a.appName, this.X = a.authDomain || null, 
        a = firebase.SDK_VERSION ? tf(firebase.SDK_VERSION) : null, this.f = new T(this.v, null, a), 
        this.ba = new Yh(this.f), ei(this, b.idToken), $h(this.ba, b), Q(this, "refreshToken", this.ba.S), 
        fi(this, c || {}), $d.call(this), this.Vb = !1, this.X && wf() && (this.m = Vh(this.X, this.v, this.ea)), 
        this.dc = [];
    };
    t(W, $d);
    var ei = function(a, b) {
        a.kd = b, Q(a, "_lat", b);
    }, gi = function(a, b) {
        Ma(a.dc, function(a) {
            return a == b;
        });
    }, hi = function(a) {
        for (var b = [], c = 0; c < a.dc.length; c++) b.push(a.dc[c](a));
        return ud(b).then(function() {
            return a;
        });
    }, ii = function(a) {
        a.m && !a.Vb && (a.Vb = !0, a.m.subscribe(a));
    }, fi = function(a, b) {
        Df(a, {
            uid: b.uid,
            displayName: b.displayName || null,
            photoURL: b.photoURL || null,
            email: b.email || null,
            emailVerified: b.emailVerified || !1,
            isAnonymous: b.isAnonymous || !1,
            providerData: []
        });
    };
    Q(W.prototype, "providerId", "firebase");
    var ji = function() {}, ki = function(a) {
        return J().then(function() {
            if (a.Vd) throw new R("app-deleted");
        });
    }, li = function(a) {
        return Fa(a.providerData, function(a) {
            return a.providerId;
        });
    }, ni = function(a, b) {
        b && (mi(a, b.providerId), a.providerData.push(b));
    }, mi = function(a, b) {
        Ma(a.providerData, function(a) {
            return a.providerId == b;
        });
    }, oi = function(a, b, c) {
        ("uid" != b || c) && a.hasOwnProperty(b) && Q(a, b, c);
    };
    W.prototype.copy = function(a) {
        var b = this;
        b != a && (Df(this, {
            uid: a.uid,
            displayName: a.displayName,
            photoURL: a.photoURL,
            email: a.email,
            emailVerified: a.emailVerified,
            isAnonymous: a.isAnonymous,
            providerData: []
        }), x(a.providerData, function(a) {
            ni(b, a);
        }), this.ba = a.ba, Q(this, "refreshToken", this.ba.S));
    }, W.prototype.reload = function() {
        var a = this;
        return ki(this).then(function() {
            return pi(a).then(function() {
                return hi(a);
            }).then(ji);
        });
    };
    var pi = function(a) {
        return a.getToken().then(function(b) {
            var c = a.isAnonymous;
            return qi(a, b).then(function() {
                return c || oi(a, "isAnonymous", !1), b;
            }).l(function(b) {
                throw "auth/user-token-expired" == b.code && (a.dispatchEvent(new di("userDeleted")), 
                ri(a)), b;
            });
        });
    };
    W.prototype.getToken = function(a) {
        var b = this, c = bi(this.ba);
        return ki(this).then(function() {
            return b.ba.getToken(a);
        }).then(function(a) {
            if (!a) throw new R("internal-error");
            return a.accessToken != b.kd && (ei(b, a.accessToken), b.Da()), oi(b, "refreshToken", a.refreshToken), 
            a.accessToken;
        }).l(function(a) {
            if ("auth/user-token-expired" == a.code && !c) return hi(b).then(function() {
                throw oi(b, "refreshToken", null), a;
            });
            throw a;
        });
    };
    var si = function(a, b) {
        b.idToken && a.kd != b.idToken && ($h(a.ba, b), a.Da(), ei(a, b.idToken), oi(a, "refreshToken", a.ba.S));
    };
    W.prototype.Da = function() {
        this.dispatchEvent(new di("tokenChanged"));
    };
    var qi = function(a, b) {
        return S(a.f, Kg, {
            idToken: b
        }).then(r(a.we, a));
    };
    W.prototype.we = function(a) {
        if (!(a = a.users) || !a.length) throw new R("internal-error");
        a = a[0], fi(this, {
            uid: a.localId,
            displayName: a.displayName,
            photoURL: a.photoUrl,
            email: a.email,
            emailVerified: !!a.emailVerified
        });
        for (var b = ti(a), c = 0; c < b.length; c++) ni(this, b[c]);
        oi(this, "isAnonymous", !(this.email && a.passwordHash || this.providerData && this.providerData.length));
    };
    var ti = function(a) {
        return (a = a.providerUserInfo) && a.length ? Fa(a, function(a) {
            return new ci(a.rawId, a.providerId, a.email, a.displayName, a.photoUrl);
        }) : [];
    };
    W.prototype.reauthenticate = function(a) {
        var b = this;
        return this.c(a.Gb(this.f).then(function(a) {
            var c;
            a: {
                var e = a.idToken.split(".");
                if (3 == e.length) {
                    for (var f = (4 - (e = e[1]).length % 4) % 4, g = 0; g < f; g++) e += ".";
                    try {
                        var k = ic(ub(e));
                        if (k.sub && k.iss && k.aud && k.exp) {
                            c = new Lf(k);
                            break a;
                        }
                    } catch (q) {}
                }
                c = null;
            }
            if (!c || b.uid != c.qe) throw new R("user-mismatch");
            return si(b, a), b.reload();
        }));
    };
    var ui = function(a, b) {
        return pi(a).then(function() {
            if (Ja(li(a), b)) return hi(a).then(function() {
                throw new R("provider-already-linked");
            });
        });
    };
    h = W.prototype, h.link = function(a) {
        var b = this;
        return this.c(ui(this, a.provider).then(function() {
            return b.getToken();
        }).then(function(c) {
            return a.md(b.f, c);
        }).then(r(this.bd, this)));
    }, h.bd = function(a) {
        si(this, a);
        var b = this;
        return this.reload().then(function() {
            return b;
        });
    }, h.updateEmail = function(a) {
        var b = this;
        return this.c(this.getToken().then(function(c) {
            return b.f.updateEmail(c, a);
        }).then(function(a) {
            return si(b, a), b.reload();
        }));
    }, h.updatePassword = function(a) {
        var b = this;
        return this.c(this.getToken().then(function(c) {
            return b.f.updatePassword(c, a);
        }).then(function(a) {
            return si(b, a), b.reload();
        }));
    }, h.updateProfile = function(a) {
        if (void 0 === a.displayName && void 0 === a.photoURL) return ki(this);
        var b = this;
        return this.c(this.getToken().then(function(c) {
            return b.f.updateProfile(c, {
                displayName: a.displayName,
                photoUrl: a.photoURL
            });
        }).then(function(a) {
            return si(b, a), oi(b, "displayName", a.displayName || null), oi(b, "photoURL", a.photoUrl || null), 
            hi(b);
        }).then(ji));
    }, h.unlink = function(a) {
        var b = this;
        return this.c(pi(this).then(function(c) {
            return Ja(li(b), a) ? zg(b.f, c, [ a ]).then(function(a) {
                var c = {};
                return x(a.providerUserInfo || [], function(a) {
                    c[a.providerId] = !0;
                }), x(li(b), function(a) {
                    c[a] || mi(b, a);
                }), hi(b);
            }) : hi(b).then(function() {
                throw new R("no-such-provider");
            });
        }));
    }, h.delete = function() {
        var a = this;
        return this.c(this.getToken().then(function(b) {
            return S(a.f, Jg, {
                idToken: b
            });
        }).then(function() {
            a.dispatchEvent(new di("userDeleted"));
        })).then(function() {
            ri(a);
        });
    }, h.Wc = function(a, b) {
        return !!("linkViaPopup" == a && (this.ia || null) == b && this.$ || "linkViaRedirect" == a && (this.Yb || null) == b);
    }, h.Ha = function(a, b, c, d) {
        "linkViaPopup" == a && d == (this.ia || null) && (c && this.Fa ? this.Fa(c) : b && !c && this.$ && this.$(b), 
        this.C && (this.C.cancel(), this.C = null), delete this.$, delete this.Fa);
    }, h.mb = function(a, b) {
        return "linkViaPopup" == a && b == (this.ia || null) || "linkViaRedirect" == a && (this.Yb || null) == b ? r(this.Yd, this) : null;
    }, h.Fb = function() {
        return vf(this.uid + ":::");
    }, h.linkWithPopup = function(a) {
        if (!wf()) return K(new R("operation-not-supported-in-this-environment"));
        var b = this, c = Hf(a.providerId), d = this.Fb(), e = null;
        !xf() && this.X && a.isOAuthProvider && (e = Wg(this.X, this.v, this.ea, "linkViaPopup", a.providerId, a.Hb(), null, d, firebase.SDK_VERSION || null));
        var f = of(e, c && c.ub, c && c.tb), c = ui(this, a.providerId).then(function() {
            return hi(b);
        }).then(function() {
            return vi(b), b.getToken();
        }).then(function() {
            return Rh(b.m, f, "linkViaPopup", a, d, !!e);
        }).then(function() {
            return new I(function(a, c) {
                b.Ha("linkViaPopup", null, new R("cancelled-popup-request"), b.ia || null), b.$ = a, 
                b.Fa = c, b.ia = d, b.C = Th(b.m, b, "linkViaPopup", f, d);
            });
        }).then(function(a) {
            return f && nf(f), a;
        }).l(function(a) {
            throw f && nf(f), a;
        });
        return this.c(c);
    }, h.linkWithRedirect = function(a) {
        if (!wf()) return K(new R("operation-not-supported-in-this-environment"));
        var b = this, c = null, d = this.Fb(), e = ui(this, a.providerId).then(function() {
            return vi(b), b.getToken();
        }).then(function() {
            return b.Yb = d, hi(b);
        }).then(function(a) {
            return b.Ga && (a = b.Ga, a = a.A.set(wi, b.G(), a.B)), a;
        }).then(function() {
            return Sh(b.m, "linkViaRedirect", a, d);
        }).l(function(a) {
            if (c = a, b.Ga) return xi(b.Ga);
            throw c;
        }).then(function() {
            if (c) throw c;
        });
        return this.c(e);
    };
    var vi = function(a) {
        if (!a.m || !a.Vb) {
            if (a.m && !a.Vb) throw new R("internal-error");
            throw new R("auth-domain-config-required");
        }
    };
    W.prototype.Yd = function(a, b) {
        var c = this;
        this.C && (this.C.cancel(), this.C = null);
        var d = null, e = this.getToken().then(function(d) {
            return Pf(c.f, {
                requestUri: a,
                sessionId: b,
                idToken: d
            });
        }).then(function(a) {
            return d = $f(a), c.bd(a);
        }).then(function(a) {
            return {
                user: a,
                credential: d
            };
        });
        return this.c(e);
    }, W.prototype.sendEmailVerification = function() {
        var a = this;
        return this.c(this.getToken().then(function(b) {
            return a.f.sendEmailVerification(b);
        }).then(function(b) {
            if (a.email != b) return a.reload();
        }).then(function() {}));
    };
    var ri = function(a) {
        for (var b = 0; b < a.U.length; b++) a.U[b].cancel("app-deleted");
        a.U = [], a.Vd = !0, Q(a, "refreshToken", null), a.m && a.m.unsubscribe(a);
    };
    W.prototype.c = function(a) {
        var b = this;
        return this.U.push(a), xd(a, function() {
            La(b.U, a);
        }), a;
    }, W.prototype.toJSON = function() {
        return this.G();
    }, W.prototype.G = function() {
        var a = {
            uid: this.uid,
            displayName: this.displayName,
            photoURL: this.photoURL,
            email: this.email,
            emailVerified: this.emailVerified,
            isAnonymous: this.isAnonymous,
            providerData: [],
            apiKey: this.v,
            appName: this.ea,
            authDomain: this.X,
            stsTokenManager: this.ba.G(),
            redirectEventId: this.Yb || null
        };
        return x(this.providerData, function(b) {
            a.providerData.push(Ef(b));
        }), a;
    };
    var yi = function(a) {
        if (!a.apiKey) return null;
        var b = {
            apiKey: a.apiKey,
            authDomain: a.authDomain,
            appName: a.appName
        }, c = {};
        if (!(a.stsTokenManager && a.stsTokenManager.accessToken && a.stsTokenManager.expirationTime)) return null;
        c.idToken = a.stsTokenManager.accessToken, c.refreshToken = a.stsTokenManager.refreshToken || null, 
        c.expiresIn = (a.stsTokenManager.expirationTime - la()) / 1e3;
        var d = new W(b, c, a);
        return a.providerData && x(a.providerData, function(a) {
            if (a) {
                var b = {};
                Df(b, a), ni(d, b);
            }
        }), a.redirectEventId && (d.Yb = a.redirectEventId), d;
    }, zi = function(a, b, c) {
        var d = new W(a, b);
        return c && (d.Ga = c), d.reload().then(function() {
            return d;
        });
    }, Ai = function(a) {
        this.B = a, this.A = Ch();
    }, wi = {
        name: "redirectUser",
        V: !1
    }, xi = function(a) {
        return a.A.remove(wi, a.B);
    }, Bi = function(a, b) {
        return a.A.get(wi, a.B).then(function(a) {
            return a && b && (a.authDomain = b), yi(a || {});
        });
    }, Ci = function(a) {
        this.B = a, this.A = Ch();
    }, Di = {
        name: "authUser",
        V: !0
    }, Ei = function(a, b) {
        return a.A.set(Di, b.G(), a.B);
    }, Fi = function(a) {
        return a.A.remove(Di, a.B);
    }, Gi = function(a, b) {
        return a.A.get(Di, a.B).then(function(a) {
            return a && b && (a.authDomain = b), yi(a || {});
        });
    }, Y = function(a) {
        if (this.Na = !1, Q(this, "app", a), !X(this).options || !X(this).options.apiKey) throw new R("invalid-api-key");
        a = firebase.SDK_VERSION ? tf(firebase.SDK_VERSION) : null, this.f = new T(X(this).options && X(this).options.apiKey, null, a), 
        this.U = [], this.La = [], this.ue = firebase.INTERNAL.createSubscribe(r(this.me, this)), 
        Hi(this, null), this.ma = new Ci(X(this).options.apiKey + ":" + X(this).name), this.Ya = new Ai(X(this).options.apiKey + ":" + X(this).name), 
        this.Ab = this.c(Ii(this)), this.sa = this.c(Ji(this)), this.yc = !1, this.vc = r(this.Ee, this), 
        this.Dd = r(this.Ra, this), this.Ed = r(this.ie, this), this.Cd = r(this.he, this), 
        Ki(this), this.INTERNAL = {}, this.INTERNAL.delete = r(this.delete, this);
    };
    Y.prototype.toJSON = function() {
        return {
            apiKey: X(this).options.apiKey,
            authDomain: X(this).options.authDomain,
            appName: X(this).name,
            currentUser: Z(this) && Z(this).G()
        };
    };
    var Li = function(a) {
        return a.Wd || K(new R("auth-domain-config-required"));
    }, Ki = function(a) {
        var b = X(a).options.authDomain, c = X(a).options.apiKey;
        b && wf() && (a.Wd = a.Ab.then(function() {
            if (!a.Na) return a.m = Vh(b, c, X(a).name), a.m.subscribe(a), Z(a) && ii(Z(a)), 
            a.Kc && (ii(a.Kc), a.Kc = null), a.m;
        }));
    };
    h = Y.prototype, h.Wc = function(a, b) {
        switch (a) {
          case "unknown":
          case "signInViaRedirect":
            return !0;

          case "signInViaPopup":
            return this.ia == b && !!this.$;

          default:
            return !1;
        }
    }, h.Ha = function(a, b, c, d) {
        "signInViaPopup" == a && this.ia == d && (c && this.Fa ? this.Fa(c) : b && !c && this.$ && this.$(b), 
        this.C && (this.C.cancel(), this.C = null), delete this.$, delete this.Fa);
    }, h.mb = function(a, b) {
        return "signInViaRedirect" == a || "signInViaPopup" == a && this.ia == b && this.$ ? r(this.Zd, this) : null;
    }, h.Zd = function(a, b) {
        var c = this;
        a = {
            requestUri: a,
            sessionId: b
        }, this.C && (this.C.cancel(), this.C = null);
        var d = null, e = Nf(c.f, a).then(function(a) {
            return d = $f(a), a;
        });
        return a = c.Ab.then(function() {
            return e;
        }).then(function(a) {
            return Mi(c, a);
        }).then(function() {
            return {
                user: Z(c),
                credential: d
            };
        }), this.c(a);
    }, h.Fb = function() {
        return vf();
    }, h.signInWithPopup = function(a) {
        if (!wf()) return K(new R("operation-not-supported-in-this-environment"));
        var b = this, c = Hf(a.providerId), d = this.Fb(), e = null;
        !xf() && X(this).options.authDomain && a.isOAuthProvider && (e = Wg(X(this).options.authDomain, X(this).options.apiKey, X(this).name, "signInViaPopup", a.providerId, a.Hb(), null, d, firebase.SDK_VERSION || null));
        var f = of(e, c && c.ub, c && c.tb), c = Li(this).then(function(b) {
            return Rh(b, f, "signInViaPopup", a, d, !!e);
        }).then(function() {
            return new I(function(a, c) {
                b.Ha("signInViaPopup", null, new R("cancelled-popup-request"), b.ia), b.$ = a, b.Fa = c, 
                b.ia = d, b.C = Th(b.m, b, "signInViaPopup", f, d);
            });
        }).then(function(a) {
            return f && nf(f), a;
        }).l(function(a) {
            throw f && nf(f), a;
        });
        return this.c(c);
    }, h.signInWithRedirect = function(a) {
        if (!wf()) return K(new R("operation-not-supported-in-this-environment"));
        var b = this, c = Li(this).then(function() {
            return Sh(b.m, "signInViaRedirect", a);
        });
        return this.c(c);
    }, h.getRedirectResult = function() {
        if (!wf()) return K(new R("operation-not-supported-in-this-environment"));
        var a = this, b = Li(this).then(function() {
            return a.m.getRedirectResult();
        });
        return this.c(b);
    };
    var Mi = function(a, b) {
        var c = {};
        return c.apiKey = X(a).options.apiKey, c.authDomain = X(a).options.authDomain, c.appName = X(a).name, 
        a.Ab.then(function() {
            return zi(c, b, a.Ya);
        }).then(function(b) {
            return Z(a) && b.uid == Z(a).uid ? (Z(a).copy(b), a.Ra(b)) : (Hi(a, b), ii(b), a.Ra(b));
        }).then(function() {
            a.Da();
        });
    }, Hi = function(a, b) {
        Z(a) && (gi(Z(a), a.Dd), Ub(Z(a), "tokenChanged", a.Ed), Ub(Z(a), "userDeleted", a.Cd)), 
        b && (b.dc.push(a.Dd), Lb(b, "tokenChanged", a.Ed), Lb(b, "userDeleted", a.Cd)), 
        Q(a, "currentUser", b);
    };
    Y.prototype.signOut = function() {
        var a = this, b = this.sa.then(function() {
            return Z(a) ? (Hi(a, null), Fi(a.ma).then(function() {
                a.Da();
            })) : J();
        });
        return this.c(b);
    };
    var Ni = function(a) {
        var b = Bi(a.Ya, X(a).options.authDomain).then(function(b) {
            return (a.Kc = b) && (b.Ga = a.Ya), xi(a.Ya);
        });
        return a.c(b);
    }, Ii = function(a) {
        var b = X(a).options.authDomain, c = Ni(a).then(function() {
            return Gi(a.ma, b);
        }).then(function(b) {
            return b ? (b.Ga = a.Ya, b.reload().then(function() {
                return Ei(a.ma, b).then(function() {
                    return b;
                });
            }).l(function(c) {
                return "auth/network-request-failed" == c.code ? b : Fi(a.ma);
            })) : null;
        }).then(function(b) {
            Hi(a, b || null);
        });
        return a.c(c);
    }, Ji = function(a) {
        return a.Ab.then(function() {
            return a.getRedirectResult();
        }).l(function() {}).then(function() {
            return a.Na ? void 0 : a.vc();
        }).l(function() {}).then(function() {
            if (!a.Na) {
                a.yc = !0;
                var b = a.ma;
                b.A.addListener(Di, b.B, a.vc);
            }
        });
    };
    Y.prototype.Ee = function() {
        var a = this;
        return Gi(this.ma, X(this).options.authDomain).then(function(b) {
            if (!a.Na) {
                var c;
                if (c = Z(a) && b) {
                    c = Z(a).uid;
                    var d = b.uid;
                    c = void 0 !== c && null !== c && "" !== c && void 0 !== d && null !== d && "" !== d && c == d;
                }
                if (c) return Z(a).copy(b), Z(a).getToken();
                (Z(a) || b) && (Hi(a, b), b && (ii(b), b.Ga = a.Ya), a.m && a.m.subscribe(a), a.Da());
            }
        });
    }, Y.prototype.Ra = function(a) {
        return Ei(this.ma, a);
    }, Y.prototype.ie = function() {
        this.Da(), this.Ra(Z(this));
    }, Y.prototype.he = function() {
        this.signOut();
    };
    var Oi = function(a, b) {
        return a.c(b.then(function(b) {
            return Mi(a, b);
        }).then(function() {
            return Z(a);
        }));
    };
    h = Y.prototype, h.me = function(a) {
        var b = this;
        this.addAuthTokenListener(function() {
            a.next(Z(b));
        });
    }, h.onAuthStateChanged = function(a, b, c) {
        var d = this;
        return this.yc && firebase.Promise.resolve().then(function() {
            p(a) ? a(Z(d)) : p(a.next) && a.next(Z(d));
        }), this.ue(a, b, c);
    }, h.getToken = function(a) {
        var b = this, c = this.sa.then(function() {
            return Z(b) ? Z(b).getToken(a).then(function(a) {
                return {
                    accessToken: a
                };
            }) : null;
        });
        return this.c(c);
    }, h.signInWithCustomToken = function(a) {
        var b = this;
        return this.sa.then(function() {
            return Oi(b, S(b.f, Lg, {
                token: a
            }));
        }).then(function(a) {
            return oi(a, "isAnonymous", !1), b.Ra(a);
        }).then(function() {
            return Z(b);
        });
    }, h.signInWithEmailAndPassword = function(a, b) {
        var c = this;
        return this.sa.then(function() {
            return Oi(c, S(c.f, Wf, {
                email: a,
                password: b
            }));
        });
    }, h.createUserWithEmailAndPassword = function(a, b) {
        var c = this;
        return this.sa.then(function() {
            return Oi(c, S(c.f, Ig, {
                email: a,
                password: b
            }));
        });
    }, h.signInWithCredential = function(a) {
        var b = this;
        return this.sa.then(function() {
            return Oi(b, a.Gb(b.f));
        });
    }, h.signInAnonymously = function() {
        var a = Z(this), b = this;
        return a && a.isAnonymous ? J(a) : this.sa.then(function() {
            return Oi(b, b.f.signInAnonymously());
        }).then(function(a) {
            return oi(a, "isAnonymous", !0), b.Ra(a);
        }).then(function() {
            return Z(b);
        });
    };
    var X = function(a) {
        return a.app;
    }, Z = function(a) {
        return a.currentUser;
    };
    h = Y.prototype, h.Da = function() {
        if (this.yc) for (var a = 0; a < this.La.length; a++) this.La[a] && this.La[a](Z(this) && Z(this)._lat || null);
    }, h.addAuthTokenListener = function(a) {
        var b = this;
        this.La.push(a), this.c(this.sa.then(function() {
            b.Na || Ja(b.La, a) && a(Z(b) && Z(b)._lat || null);
        }));
    }, h.removeAuthTokenListener = function(a) {
        Ma(this.La, function(b) {
            return b == a;
        });
    }, h.delete = function() {
        this.Na = !0;
        for (var a = 0; a < this.U.length; a++) this.U[a].cancel("app-deleted");
        return this.U = [], this.ma && (a = this.ma).A.removeListener(Di, a.B, this.vc), 
        this.m && this.m.unsubscribe(this), firebase.Promise.resolve();
    }, h.c = function(a) {
        var b = this;
        return this.U.push(a), xd(a, function() {
            La(b.U, a);
        }), a;
    }, h.fetchProvidersForEmail = function(a) {
        return this.c(pg(this.f, a));
    }, h.verifyPasswordResetCode = function(a) {
        return this.checkActionCode(a).then(function(a) {
            return a.data.email;
        });
    }, h.confirmPasswordReset = function(a, b) {
        return this.c(this.f.confirmPasswordReset(a, b).then(function() {}));
    }, h.checkActionCode = function(a) {
        return this.c(this.f.checkActionCode(a).then(function(a) {
            return {
                data: {
                    email: a.email
                }
            };
        }));
    }, h.applyActionCode = function(a) {
        return this.c(this.f.applyActionCode(a).then(function() {}));
    }, h.sendPasswordResetEmail = function(a) {
        return this.c(this.f.sendPasswordResetEmail(a).then(function() {}));
    }, yh(Y.prototype, {
        applyActionCode: {
            name: "applyActionCode",
            b: [ U("code") ]
        },
        checkActionCode: {
            name: "checkActionCode",
            b: [ U("code") ]
        },
        confirmPasswordReset: {
            name: "confirmPasswordReset",
            b: [ U("code"), U("newPassword") ]
        },
        createUserWithEmailAndPassword: {
            name: "createUserWithEmailAndPassword",
            b: [ U("email"), U("password") ]
        },
        fetchProvidersForEmail: {
            name: "fetchProvidersForEmail",
            b: [ U("email") ]
        },
        getRedirectResult: {
            name: "getRedirectResult",
            b: []
        },
        onAuthStateChanged: {
            name: "onAuthStateChanged",
            b: [ wh(rh(), sh(), "nextOrObserver"), sh("opt_error", !0), sh("opt_completed", !0) ]
        },
        sendPasswordResetEmail: {
            name: "sendPasswordResetEmail",
            b: [ U("email") ]
        },
        signInAnonymously: {
            name: "signInAnonymously",
            b: []
        },
        signInWithCredential: {
            name: "signInWithCredential",
            b: [ uh() ]
        },
        signInWithCustomToken: {
            name: "signInWithCustomToken",
            b: [ U("token") ]
        },
        signInWithEmailAndPassword: {
            name: "signInWithEmailAndPassword",
            b: [ U("email"), U("password") ]
        },
        signInWithPopup: {
            name: "signInWithPopup",
            b: [ vh() ]
        },
        signInWithRedirect: {
            name: "signInWithRedirect",
            b: [ vh() ]
        },
        signOut: {
            name: "signOut",
            b: []
        },
        toJSON: {
            name: "toJSON",
            b: [ U(null, !0) ]
        },
        verifyPasswordResetCode: {
            name: "verifyPasswordResetCode",
            b: [ U("code") ]
        }
    }), yh(W.prototype, {
        delete: {
            name: "delete",
            b: []
        },
        getToken: {
            name: "getToken",
            b: [ {
                name: "opt_forceRefresh",
                ca: "a boolean",
                optional: !0,
                da: function(a) {
                    return "boolean" == typeof a;
                }
            } ]
        },
        link: {
            name: "link",
            b: [ uh() ]
        },
        linkWithPopup: {
            name: "linkWithPopup",
            b: [ vh() ]
        },
        linkWithRedirect: {
            name: "linkWithRedirect",
            b: [ vh() ]
        },
        reauthenticate: {
            name: "reauthenticate",
            b: [ uh() ]
        },
        reload: {
            name: "reload",
            b: []
        },
        sendEmailVerification: {
            name: "sendEmailVerification",
            b: []
        },
        toJSON: {
            name: "toJSON",
            b: [ U(null, !0) ]
        },
        unlink: {
            name: "unlink",
            b: [ U("provider") ]
        },
        updateEmail: {
            name: "updateEmail",
            b: [ U("email") ]
        },
        updatePassword: {
            name: "updatePassword",
            b: [ U("password") ]
        },
        updateProfile: {
            name: "updateProfile",
            b: [ rh("profile") ]
        }
    }), yh(I.prototype, {
        l: {
            name: "catch"
        },
        then: {
            name: "then"
        }
    }), V(Yf, "credential", function(a, b) {
        return new Vf(a, b);
    }, [ U("email"), U("password") ]), yh(Rf.prototype, {
        addScope: {
            name: "addScope",
            b: [ U("scope") ]
        }
    }), V(Rf, "credential", Rf.credential, [ wh(U(), rh(), "token") ]), yh(Sf.prototype, {
        addScope: {
            name: "addScope",
            b: [ U("scope") ]
        }
    }), V(Sf, "credential", Sf.credential, [ wh(U(), rh(), "token") ]), yh(Tf.prototype, {
        addScope: {
            name: "addScope",
            b: [ U("scope") ]
        }
    }), V(Tf, "credential", Tf.credential, [ wh(U(), wh(rh(), th()), "idToken"), wh(U(), th(), "accessToken", !0) ]), 
    V(Uf, "credential", Uf.credential, [ wh(U(), rh(), "token"), U("secret", !0) ]), 
    function() {
        if (void 0 === firebase || !firebase.INTERNAL || !firebase.INTERNAL.registerService) throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");
        var a = {
            Auth: Y,
            Error: R
        };
        V(a, "EmailAuthProvider", Yf, []), V(a, "FacebookAuthProvider", Rf, []), V(a, "GithubAuthProvider", Sf, []), 
        V(a, "GoogleAuthProvider", Tf, []), V(a, "TwitterAuthProvider", Uf, []), firebase.INTERNAL.registerService("auth", function(a, c) {
            return a = new Y(a), c({
                INTERNAL: {
                    getToken: r(a.getToken, a),
                    addAuthTokenListener: r(a.addAuthTokenListener, a),
                    removeAuthTokenListener: r(a.removeAuthTokenListener, a)
                }
            }), a;
        }, a, function(a, c) {
            if ("create" === a) try {
                c.auth();
            } catch (d) {}
        }), firebase.INTERNAL.extendNamespace({
            User: W
        });
    }();
}(), function() {
    function p(a) {
        return void 0 !== a;
    }
    function aa() {}
    function ba(a) {
        a.Wb = function() {
            return a.bf ? a.bf : a.bf = new a();
        };
    }
    function ca(a) {
        var b = typeof a;
        if ("object" == b) {
            if (!a) return "null";
            if (a instanceof Array) return "array";
            if (a instanceof Object) return b;
            var c = Object.prototype.toString.call(a);
            if ("[object Window]" == c) return "object";
            if ("[object Array]" == c || "number" == typeof a.length && void 0 !== a.splice && void 0 !== a.propertyIsEnumerable && !a.propertyIsEnumerable("splice")) return "array";
            if ("[object Function]" == c || void 0 !== a.call && void 0 !== a.propertyIsEnumerable && !a.propertyIsEnumerable("call")) return "function";
        } else if ("function" == b && void 0 === a.call) return "object";
        return b;
    }
    function da(a) {
        return "array" == ca(a);
    }
    function ea(a) {
        var b = ca(a);
        return "array" == b || "object" == b && "number" == typeof a.length;
    }
    function q(a) {
        return "string" == typeof a;
    }
    function fa(a) {
        return "number" == typeof a;
    }
    function ga(a) {
        return "function" == ca(a);
    }
    function ha(a) {
        var b = typeof a;
        return "object" == b && null != a || "function" == b;
    }
    function ia(a, b, c) {
        return a.call.apply(a.bind, arguments);
    }
    function ja(a, b, c) {
        if (!a) throw Error();
        if (2 < arguments.length) {
            var d = Array.prototype.slice.call(arguments, 2);
            return function() {
                var c = Array.prototype.slice.call(arguments);
                return Array.prototype.unshift.apply(c, d), a.apply(b, c);
            };
        }
        return function() {
            return a.apply(b, arguments);
        };
    }
    function r(a, b, c) {
        return (r = Function.prototype.bind && -1 != Function.prototype.bind.toString().indexOf("native code") ? ia : ja).apply(null, arguments);
    }
    function ka(a, b) {
        function c() {}
        c.prototype = b.prototype, a.Ig = b.prototype, a.prototype = new c(), a.prototype.constructor = a, 
        a.Eg = function(a, c, f) {
            for (var h = Array(arguments.length - 2), k = 2; k < arguments.length; k++) h[k - 2] = arguments[k];
            return b.prototype[c].apply(a, h);
        };
    }
    function t(a, b) {
        for (var c in a) b.call(void 0, a[c], c, a);
    }
    function la(a, b) {
        var d, c = {};
        for (d in a) c[d] = b.call(void 0, a[d], d, a);
        return c;
    }
    function ma(a, b) {
        for (var c in a) if (!b.call(void 0, a[c], c, a)) return !1;
        return !0;
    }
    function na(a) {
        var c, b = 0;
        for (c in a) b++;
        return b;
    }
    function oa(a) {
        for (var b in a) return b;
    }
    function pa(a) {
        var d, b = [], c = 0;
        for (d in a) b[c++] = a[d];
        return b;
    }
    function qa(a) {
        var d, b = [], c = 0;
        for (d in a) b[c++] = d;
        return b;
    }
    function ra(a, b) {
        for (var c in a) if (a[c] == b) return !0;
        return !1;
    }
    function sa(a, b, c) {
        for (var d in a) if (b.call(c, a[d], d, a)) return d;
    }
    function ta(a, b) {
        var c = sa(a, b, void 0);
        return c && a[c];
    }
    function ua(a) {
        for (var b in a) return !1;
        return !0;
    }
    function va(a) {
        var c, b = {};
        for (c in a) b[c] = a[c];
        return b;
    }
    function wa(a) {
        if (a = String(a), /^\s*$/.test(a) ? 0 : /^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g, "@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, "]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g, ""))) try {
            return eval("(" + a + ")");
        } catch (b) {}
        throw Error("Invalid JSON string: " + a);
    }
    function xa() {
        this.Fd = void 0;
    }
    function ya(a, b, c) {
        switch (typeof b) {
          case "string":
            za(b, c);
            break;

          case "number":
            c.push(isFinite(b) && !isNaN(b) ? b : "null");
            break;

          case "boolean":
            c.push(b);
            break;

          case "undefined":
            c.push("null");
            break;

          case "object":
            if (null == b) {
                c.push("null");
                break;
            }
            if (da(b)) {
                var d = b.length;
                c.push("[");
                for (var e = "", f = 0; f < d; f++) c.push(e), e = b[f], ya(a, a.Fd ? a.Fd.call(b, String(f), e) : e, c), 
                e = ",";
                c.push("]");
                break;
            }
            c.push("{"), d = "";
            for (f in b) Object.prototype.hasOwnProperty.call(b, f) && "function" != typeof (e = b[f]) && (c.push(d), 
            za(f, c), c.push(":"), ya(a, a.Fd ? a.Fd.call(b, f, e) : e, c), d = ",");
            c.push("}");
            break;

          case "function":
            break;

          default:
            throw Error("Unknown type: " + typeof b);
        }
    }
    function za(a, b) {
        b.push('"', a.replace(Ba, function(a) {
            if (a in Aa) return Aa[a];
            var b = a.charCodeAt(0), e = "\\u";
            return 16 > b ? e += "000" : 256 > b ? e += "00" : 4096 > b && (e += "0"), Aa[a] = e + b.toString(16);
        }), '"');
    }
    function Ea(a) {
        if (Error.captureStackTrace) Error.captureStackTrace(this, Ea); else {
            var b = Error().stack;
            b && (this.stack = b);
        }
        a && (this.message = String(a));
    }
    function La(a, b) {
        var c = Ma(a, b, void 0);
        return 0 > c ? null : q(a) ? a.charAt(c) : a[c];
    }
    function Ma(a, b, c) {
        for (var d = a.length, e = q(a) ? a.split("") : a, f = 0; f < d; f++) if (f in e && b.call(c, e[f], f, a)) return f;
        return -1;
    }
    function Na(a, b) {
        var c = Fa(a, b);
        0 <= c && w.splice.call(a, c, 1);
    }
    function Oa(a, b, c) {
        return 2 >= arguments.length ? w.slice.call(a, b) : w.slice.call(a, b, c);
    }
    function Pa(a, b) {
        a.sort(b || Qa);
    }
    function Qa(a, b) {
        return a > b ? 1 : a < b ? -1 : 0;
    }
    function Va(a) {
        n.setTimeout(function() {
            throw a;
        }, 0);
    }
    function Xa() {
        var a = n.MessageChannel;
        if (void 0 === a && "undefined" != typeof window && window.postMessage && window.addEventListener && -1 == v.indexOf("Presto") && (a = function() {
            (a = document.createElement("iframe")).style.display = "none", a.src = "", document.documentElement.appendChild(a);
            var b = a.contentWindow;
            (a = b.document).open(), a.write(""), a.close();
            var c = "callImmediate" + Math.random(), d = "file:" == b.location.protocol ? "*" : b.location.protocol + "//" + b.location.host, a = r(function(a) {
                "*" != d && a.origin != d || a.data != c || this.port1.onmessage();
            }, this);
            b.addEventListener("message", a, !1), this.port1 = {}, this.port2 = {
                postMessage: function() {
                    b.postMessage(c, d);
                }
            };
        }), void 0 !== a && -1 == v.indexOf("Trident") && -1 == v.indexOf("MSIE")) {
            var b = new a(), c = {}, d = c;
            return b.port1.onmessage = function() {
                if (p(c.next)) {
                    var a = (c = c.next).Le;
                    c.Le = null, a();
                }
            }, function(a) {
                d.next = {
                    Le: a
                }, d = d.next, b.port2.postMessage(0);
            };
        }
        return "undefined" != typeof document && "onreadystatechange" in document.createElement("script") ? function(a) {
            var b = document.createElement("script");
            b.onreadystatechange = function() {
                b.onreadystatechange = null, b.parentNode.removeChild(b), b = null, a(), a = null;
            }, document.documentElement.appendChild(b);
        } : function(a) {
            n.setTimeout(a, 0);
        };
    }
    function Ya(a, b) {
        Za || $a(), ab || (Za(), ab = !0), bb.push(new cb(a, b));
    }
    function $a() {
        if (n.Promise && n.Promise.resolve) {
            var a = n.Promise.resolve();
            Za = function() {
                a.then(db);
            };
        } else Za = function() {
            var a = db;
            !ga(n.setImmediate) || n.Window && n.Window.prototype && n.Window.prototype.setImmediate == n.setImmediate ? (Wa || (Wa = Xa()), 
            Wa(a)) : n.setImmediate(a);
        };
    }
    function db() {
        for (;bb.length; ) {
            var a = bb;
            bb = [];
            for (var b = 0; b < a.length; b++) {
                var c = a[b];
                try {
                    c.Wf.call(c.scope);
                } catch (d) {
                    Va(d);
                }
            }
        }
        ab = !1;
    }
    function cb(a, b) {
        this.Wf = a, this.scope = b;
    }
    function eb(a, b) {
        if (this.L = fb, this.uf = void 0, this.Ca = this.Ha = null, this.jd = this.be = !1, 
        a == gb) hb(this, ib, b); else try {
            var c = this;
            a.call(b, function(a) {
                hb(c, ib, a);
            }, function(a) {
                if (!(a instanceof jb)) try {
                    if (a instanceof Error) throw a;
                    throw Error("Promise rejected.");
                } catch (b) {}
                hb(c, kb, a);
            });
        } catch (d) {
            hb(this, kb, d);
        }
    }
    function gb() {}
    function mb(a, b) {
        if (a.L == fb) if (a.Ha) {
            var c = a.Ha;
            if (c.Ca) {
                for (var h, d = 0, e = -1, f = 0; (h = c.Ca[f]) && !((h = h.m) && (d++, h == a && (e = f), 
                0 <= e && 1 < d)); f++) ;
                0 <= e && (c.L == fb && 1 == d ? mb(c, b) : (d = c.Ca.splice(e, 1)[0], nb(c, d, kb, b)));
            }
            a.Ha = null;
        } else hb(a, kb, b);
    }
    function ob(a, b) {
        a.Ca && a.Ca.length || a.L != ib && a.L != kb || pb(a), a.Ca || (a.Ca = []), a.Ca.push(b);
    }
    function lb(a, b, c, d) {
        var e = {
            m: null,
            hf: null,
            kf: null
        };
        return e.m = new eb(function(a, h) {
            e.hf = b ? function(c) {
                try {
                    var e = b.call(d, c);
                    a(e);
                } catch (l) {
                    h(l);
                }
            } : a, e.kf = c ? function(b) {
                try {
                    var e = c.call(d, b);
                    !p(e) && b instanceof jb ? h(b) : a(e);
                } catch (l) {
                    h(l);
                }
            } : h;
        }), e.m.Ha = a, ob(a, e), e.m;
    }
    function hb(a, b, c) {
        if (a.L == fb) {
            if (a == c) b = kb, c = new TypeError("Promise cannot resolve to itself"); else {
                var d;
                if (c) try {
                    d = !!c.$goog_Thenable;
                } catch (e) {
                    d = !1;
                } else d = !1;
                if (d) return a.L = 1, void c.then(a.Cf, a.Df, a);
                if (ha(c)) try {
                    var f = c.then;
                    if (ga(f)) return void qb(a, c, f);
                } catch (h) {
                    b = kb, c = h;
                }
            }
            a.uf = c, a.L = b, a.Ha = null, pb(a), b != kb || c instanceof jb || rb(a, c);
        }
    }
    function qb(a, b, c) {
        function d(b) {
            f || (f = !0, a.Df(b));
        }
        a.L = 1;
        var f = !1;
        try {
            c.call(b, function(b) {
                f || (f = !0, a.Cf(b));
            }, d);
        } catch (h) {
            d(h);
        }
    }
    function pb(a) {
        a.be || (a.be = !0, Ya(a.Uf, a));
    }
    function nb(a, b, c, d) {
        if (c == ib) b.hf(d); else {
            if (b.m) for (;a && a.jd; a = a.Ha) a.jd = !1;
            b.kf(d);
        }
    }
    function rb(a, b) {
        a.jd = !0, Ya(function() {
            a.jd && sb.call(null, b);
        });
    }
    function jb(a) {
        Ea.call(this, a);
    }
    function wb(a, b) {
        if (!ea(a)) throw Error("encodeByteArray takes an array as a parameter");
        xb();
        for (var c = b ? ub : tb, d = [], e = 0; e < a.length; e += 3) {
            var f = a[e], h = e + 1 < a.length, k = h ? a[e + 1] : 0, m = e + 2 < a.length, u = f >> 2, f = (3 & f) << 4 | k >> 4, k = (15 & k) << 2 | (l = m ? a[e + 2] : 0) >> 6, l = 63 & l;
            m || (l = 64, h || (k = 64)), d.push(c[u], c[f], c[k], c[l]);
        }
        return d.join("");
    }
    function xb() {
        if (!tb) {
            tb = {}, ub = {}, vb = {};
            for (var a = 0; 65 > a; a++) tb[a] = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(a), 
            ub[a] = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(a), 
            vb[ub[a]] = a, 62 <= a && (vb["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(a)] = a);
        }
    }
    function yb() {
        this.Ya = -1;
    }
    function zb() {
        this.Ya = -1, this.Ya = 64, this.N = [], this.Wd = [], this.Jf = [], this.zd = [], 
        this.zd[0] = 128;
        for (var a = 1; a < this.Ya; ++a) this.zd[a] = 0;
        this.Pd = this.ac = 0, this.reset();
    }
    function Ab(a, b, c) {
        c || (c = 0);
        var d = a.Jf;
        if (q(b)) for (e = 0; 16 > e; e++) d[e] = b.charCodeAt(c) << 24 | b.charCodeAt(c + 1) << 16 | b.charCodeAt(c + 2) << 8 | b.charCodeAt(c + 3), 
        c += 4; else for (e = 0; 16 > e; e++) d[e] = b[c] << 24 | b[c + 1] << 16 | b[c + 2] << 8 | b[c + 3], 
        c += 4;
        for (e = 16; 80 > e; e++) {
            var f = d[e - 3] ^ d[e - 8] ^ d[e - 14] ^ d[e - 16];
            d[e] = 4294967295 & (f << 1 | f >>> 31);
        }
        b = a.N[0], c = a.N[1];
        for (var l, h = a.N[2], k = a.N[3], m = a.N[4], e = 0; 80 > e; e++) 40 > e ? 20 > e ? (f = k ^ c & (h ^ k), 
        l = 1518500249) : (f = c ^ h ^ k, l = 1859775393) : 60 > e ? (f = c & h | k & (c | h), 
        l = 2400959708) : (f = c ^ h ^ k, l = 3395469782), f = (b << 5 | b >>> 27) + f + m + l + d[e] & 4294967295, 
        m = k, k = h, h = 4294967295 & (c << 30 | c >>> 2), c = b, b = f;
        a.N[0] = a.N[0] + b & 4294967295, a.N[1] = a.N[1] + c & 4294967295, a.N[2] = a.N[2] + h & 4294967295, 
        a.N[3] = a.N[3] + k & 4294967295, a.N[4] = a.N[4] + m & 4294967295;
    }
    function x(a, b, c, d) {
        var e;
        if (d < b ? e = "at least " + b : d > c && (e = 0 === c ? "none" : "no more than " + c), 
        e) throw Error(a + " failed: Was called with " + d + (1 === d ? " argument." : " arguments.") + " Expects " + e + ".");
    }
    function Bb(a, b, c) {
        var d = "";
        switch (b) {
          case 1:
            d = c ? "first" : "First";
            break;

          case 2:
            d = c ? "second" : "Second";
            break;

          case 3:
            d = c ? "third" : "Third";
            break;

          case 4:
            d = c ? "fourth" : "Fourth";
            break;

          default:
            throw Error("errorPrefix called with argumentNumber > 4.  Need to update it?");
        }
        return a = a + " failed: " + d + " argument ";
    }
    function y(a, b, c, d) {
        if ((!d || p(c)) && !ga(c)) throw Error(Bb(a, b, d) + "must be a valid function.");
    }
    function Cb(a, b, c) {
        if (p(c) && (!ha(c) || null === c)) throw Error(Bb(a, b, !0) + "must be a valid context object.");
    }
    function Eb() {
        var a = this;
        this.reject = this.resolve = null, this.sa = new Db(function(b, c) {
            a.resolve = b, a.reject = c;
        });
    }
    function Fb(a, b) {
        return function(c, d) {
            c ? a.reject(c) : a.resolve(d), ga(b) && (Gb(a.sa), 1 === b.length ? b(c) : b(c, d));
        };
    }
    function Gb(a) {
        a.then(void 0, aa);
    }
    function Hb(a, b) {
        return Object.prototype.hasOwnProperty.call(a, b);
    }
    function A(a, b) {
        if (Object.prototype.hasOwnProperty.call(a, b)) return a[b];
    }
    function Ib(a, b) {
        for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && b(c, a[c]);
    }
    function Jb(a) {
        var b = [];
        return Ib(a, function(a, d) {
            da(d) ? Ga(d, function(d) {
                b.push(encodeURIComponent(a) + "=" + encodeURIComponent(d));
            }) : b.push(encodeURIComponent(a) + "=" + encodeURIComponent(d));
        }), b.length ? "&" + b.join("&") : "";
    }
    function Kb(a) {
        return "undefined" != typeof JSON && p(JSON.parse) ? JSON.parse(a) : wa(a);
    }
    function B(a) {
        if ("undefined" != typeof JSON && p(JSON.stringify)) a = JSON.stringify(a); else {
            var b = [];
            ya(new xa(), a, b), a = b.join("");
        }
        return a;
    }
    function Lb(a, b) {
        if (!a) throw Mb(b);
    }
    function Mb(a) {
        return Error("Firebase Database (" + firebase.SDK_VERSION + ") INTERNAL ASSERT FAILED: " + a);
    }
    function Nb(a) {
        for (var b = [], c = 0, d = 0; d < a.length; d++) {
            var e = a.charCodeAt(d);
            55296 <= e && 56319 >= e && (e -= 55296, d++, Lb(d < a.length, "Surrogate pair missing trail surrogate."), 
            e = 65536 + (e << 10) + (a.charCodeAt(d) - 56320)), 128 > e ? b[c++] = e : (2048 > e ? b[c++] = e >> 6 | 192 : (65536 > e ? b[c++] = e >> 12 | 224 : (b[c++] = e >> 18 | 240, 
            b[c++] = e >> 12 & 63 | 128), b[c++] = e >> 6 & 63 | 128), b[c++] = 63 & e | 128);
        }
        return b;
    }
    function Ob(a) {
        for (var b = 0, c = 0; c < a.length; c++) {
            var d = a.charCodeAt(c);
            128 > d ? b++ : 2048 > d ? b += 2 : 55296 <= d && 56319 >= d ? (b += 4, c++) : b += 3;
        }
        return b;
    }
    function Pb() {
        return "undefined" != typeof window && !!(window.cordova || window.phonegap || window.PhoneGap) && /ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test("undefined" != typeof navigator && "string" == typeof navigator.userAgent ? navigator.userAgent : "");
    }
    function Qb(a) {
        this.te = a, this.Bd = [], this.Rb = 0, this.Yd = -1, this.Gb = null;
    }
    function Rb(a, b, c) {
        a.Yd = b, a.Gb = c, a.Yd < a.Rb && (a.Gb(), a.Gb = null);
    }
    function Sb(a, b, c) {
        for (a.Bd[b] = c; a.Bd[a.Rb]; ) {
            var d = a.Bd[a.Rb];
            delete a.Bd[a.Rb];
            for (var e = 0; e < d.length; ++e) if (d[e]) {
                var f = a;
                Tb(function() {
                    f.te(d[e]);
                });
            }
            if (a.Rb === a.Yd) {
                a.Gb && (clearTimeout(a.Gb), a.Gb(), a.Gb = null);
                break;
            }
            a.Rb++;
        }
    }
    function Ub() {
        this.qc = {};
    }
    function Vb(a) {
        this.vc = a, this.Cd = "firebase:";
    }
    function Wb(a) {
        try {
            if ("undefined" != typeof window && void 0 !== window[a]) {
                var b = window[a];
                return b.setItem("firebase:sentinel", "cache"), b.removeItem("firebase:sentinel"), 
                new Vb(b);
            }
        } catch (c) {}
        return new Ub();
    }
    function Zb(a, b) {
        this.type = $b, this.source = a, this.path = b;
    }
    function ac(a, b, c) {
        this.type = bc, this.source = a, this.path = b, this.Ja = c;
    }
    function cc(a, b, c, d, e) {
        this.host = a.toLowerCase(), this.domain = this.host.substr(this.host.indexOf(".") + 1), 
        this.Sc = b, this.pe = c, this.Cg = d, this.nf = e || "", this.bb = Xb.get("host:" + a) || this.host;
    }
    function dc(a, b) {
        b !== a.bb && (a.bb = b, "s-" === a.bb.substr(0, 2) && Xb.set("host:" + a.host, a.bb));
    }
    function ec(a, b, c) {
        if (E("string" == typeof b, "typeof type must == string"), E("object" == typeof c, "typeof params must == object"), 
        "websocket" === b) b = (a.Sc ? "wss://" : "ws://") + a.bb + "/.ws?"; else {
            if ("long_polling" !== b) throw Error("Unknown connection type: " + b);
            b = (a.Sc ? "https://" : "http://") + a.bb + "/.lp?";
        }
        a.host !== a.bb && (c.ns = a.pe);
        var d = [];
        return t(c, function(a, b) {
            d.push(b + "=" + a);
        }), b + d.join("&");
    }
    function fc() {
        this.Jd = F;
    }
    function H(a, b, c, d) {
        this.type = a, this.Ma = b, this.Za = c, this.qe = d, this.Dd = void 0;
    }
    function gc(a) {
        return new H(hc, a);
    }
    function ic(a, b, c, d) {
        this.ae = b, this.Md = c, this.Dd = d, this.gd = a;
    }
    function jc(a, b, c) {
        this.ae = a, this.error = b, this.path = c;
    }
    function kc() {}
    function mc(a, b, c) {
        this.Gf = a, this.Na = b, this.yd = c;
    }
    function qc() {
        this.wb = [];
    }
    function rc(a, b) {
        for (var c = null, d = 0; d < b.length; d++) {
            var e = b[d], f = e.Zb();
            null === c || f.$(c.Zb()) || (a.wb.push(c), c = null), null === c && (c = new sc(f)), 
            c.add(e);
        }
        c && a.wb.push(c);
    }
    function tc(a, b, c) {
        rc(a, c), uc(a, function(a) {
            return a.$(b);
        });
    }
    function vc(a, b, c) {
        rc(a, c), uc(a, function(a) {
            return a.contains(b) || b.contains(a);
        });
    }
    function uc(a, b) {
        for (var c = !0, d = 0; d < a.wb.length; d++) if (e = a.wb[d]) if (e = e.Zb(), b(e)) {
            for (var e = a.wb[d], f = 0; f < e.hd.length; f++) {
                var h = e.hd[f];
                if (null !== h) {
                    e.hd[f] = null;
                    var k = h.Ub();
                    wc && I("event: " + h.toString()), Tb(k);
                }
            }
            a.wb[d] = null;
        } else c = !1;
        c && (a.wb = []);
    }
    function sc(a) {
        this.ra = a, this.hd = [];
    }
    function oc(a, b, c) {
        this.A = a, this.ea = b, this.Tb = c;
    }
    function xc(a) {
        return a.ea;
    }
    function yc(a) {
        return a.Tb;
    }
    function zc(a, b) {
        return b.e() ? a.ea && !a.Tb : nc(a, J(b));
    }
    function nc(a, b) {
        return a.ea && !a.Tb || a.A.Fa(b);
    }
    function Ac(a, b) {
        this.Oa = a, this.ca = b || Bc;
    }
    function Cc(a, b) {
        for (var c, d = a.ca, e = null; !d.e(); ) {
            if (0 === (c = a.Oa(b, d.key))) {
                if (d.left.e()) return e ? e.key : null;
                for (d = d.left; !d.right.e(); ) d = d.right;
                return d.key;
            }
            0 > c ? d = d.left : 0 < c && (e = d, d = d.right);
        }
        throw Error("Attempted to find predecessor key for a nonexistent key.  What gives?");
    }
    function Dc(a, b, c, d, e) {
        for (this.Hd = e || null, this.le = d, this.Sa = [], e = 1; !a.e(); ) if (e = b ? c(a.key, b) : 1, 
        d && (e *= -1), 0 > e) a = this.le ? a.left : a.right; else {
            if (0 === e) {
                this.Sa.push(a);
                break;
            }
            this.Sa.push(a), a = this.le ? a.right : a.left;
        }
    }
    function K(a) {
        if (0 === a.Sa.length) return null;
        var c, b = a.Sa.pop();
        if (c = a.Hd ? a.Hd(b.key, b.value) : {
            key: b.key,
            value: b.value
        }, a.le) for (b = b.left; !b.e(); ) a.Sa.push(b), b = b.right; else for (b = b.right; !b.e(); ) a.Sa.push(b), 
        b = b.left;
        return c;
    }
    function Ec(a) {
        if (0 === a.Sa.length) return null;
        var b;
        return b = a.Sa, b = b[b.length - 1], a.Hd ? a.Hd(b.key, b.value) : {
            key: b.key,
            value: b.value
        };
    }
    function Fc(a, b, c, d, e) {
        this.key = a, this.value = b, this.color = null == c || c, this.left = null != d ? d : Bc, 
        this.right = null != e ? e : Bc;
    }
    function Gc(a) {
        return a.left.e() ? a : Gc(a.left);
    }
    function Ic(a) {
        return a.left.e() ? Bc : (a.left.fa() || a.left.left.fa() || (a = Jc(a)), a = a.Y(null, null, null, Ic(a.left), null), 
        Hc(a));
    }
    function Hc(a) {
        return a.right.fa() && !a.left.fa() && (a = Mc(a)), a.left.fa() && a.left.left.fa() && (a = Kc(a)), 
        a.left.fa() && a.right.fa() && (a = Lc(a)), a;
    }
    function Jc(a) {
        return (a = Lc(a)).right.left.fa() && (a = a.Y(null, null, null, null, Kc(a.right)), 
        a = Mc(a), a = Lc(a)), a;
    }
    function Mc(a) {
        return a.right.Y(null, null, a.color, a.Y(null, null, !0, null, a.right.left), null);
    }
    function Kc(a) {
        return a.left.Y(null, null, a.color, null, a.Y(null, null, !0, a.left.right, null));
    }
    function Lc(a) {
        return a.Y(null, null, !a.color, a.left.Y(null, null, !a.left.color, null, null), a.right.Y(null, null, !a.right.color, null, null));
    }
    function Nc() {}
    function Qc(a) {
        try {
            var b;
            xb();
            for (var c = vb, d = [], e = 0; e < a.length; ) {
                var f = c[a.charAt(e++)], h = e < a.length ? c[a.charAt(e)] : 0, k = ++e < a.length ? c[a.charAt(e)] : 64, m = ++e < a.length ? c[a.charAt(e)] : 64;
                if (++e, null == f || null == h || null == k || null == m) throw Error();
                d.push(f << 2 | h >> 4), 64 != k && (d.push(h << 4 & 240 | k >> 2), 64 != m && d.push(k << 6 & 192 | m));
            }
            if (8192 > d.length) b = String.fromCharCode.apply(null, d); else {
                for (a = "", c = 0; c < d.length; c += 8192) a += String.fromCharCode.apply(null, Oa(d, c, c + 8192));
                b = a;
            }
            return b;
        } catch (l) {
            I("base64Decode failed: ", l);
        }
        return null;
    }
    function Rc(a) {
        b = Nb(a);
        (a = new zb()).update(b);
        var b = [], c = 8 * a.Pd;
        56 > a.ac ? a.update(a.zd, 56 - a.ac) : a.update(a.zd, a.Ya - (a.ac - 56));
        for (var d = a.Ya - 1; 56 <= d; d--) a.Wd[d] = 255 & c, c /= 256;
        for (Ab(a, a.Wd), d = c = 0; 5 > d; d++) for (var e = 24; 0 <= e; e -= 8) b[c] = a.N[d] >> e & 255, 
        ++c;
        return wb(b);
    }
    function Sc(a) {
        for (var b = "", c = 0; c < arguments.length; c++) b = ea(arguments[c]) ? b + Sc.apply(null, arguments[c]) : "object" == typeof arguments[c] ? b + B(arguments[c]) : b + arguments[c], 
        b += " ";
        return b;
    }
    function Uc(a, b) {
        Lb(!b || !0 === a || !1 === a, "Can't turn on custom loggers persistently."), !0 === a ? ("undefined" != typeof console && ("function" == typeof console.log ? wc = r(console.log, console) : "object" == typeof console.log && (wc = function(a) {
            console.log(a);
        })), b && Yb.set("logging_enabled", !0)) : ga(a) ? wc = a : (wc = null, Yb.remove("logging_enabled"));
    }
    function I(a) {
        if (!0 === Tc && (Tc = !1, null === wc && !0 === Yb.get("logging_enabled") && Uc(!0)), 
        wc) {
            var b = Sc.apply(null, arguments);
            wc(b);
        }
    }
    function Vc(a) {
        return function() {
            I(a, arguments);
        };
    }
    function Wc(a) {
        if ("undefined" != typeof console) {
            var b = "FIREBASE INTERNAL ERROR: " + Sc.apply(null, arguments);
            void 0 !== console.error ? console.error(b) : console.log(b);
        }
    }
    function Xc(a) {
        var b = Sc.apply(null, arguments);
        throw Error("FIREBASE FATAL ERROR: " + b);
    }
    function L(a) {
        if ("undefined" != typeof console) {
            var b = "FIREBASE WARNING: " + Sc.apply(null, arguments);
            void 0 !== console.warn ? console.warn(b) : console.log(b);
        }
    }
    function Yc(a) {
        var b, c, d, e, f, h = a;
        if (f = c = a = b = "", d = !0, e = "https", q(h)) {
            var k = h.indexOf("//");
            for (0 <= k && (e = h.substring(0, k - 1), h = h.substring(k + 2)), -1 === (k = h.indexOf("/")) && (k = h.length), 
            b = h.substring(0, k), f = "", h = h.substring(k).split("/"), k = 0; k < h.length; k++) if (0 < h[k].length) {
                var m = h[k];
                try {
                    m = decodeURIComponent(m.replace(/\+/g, " "));
                } catch (l) {}
                f += "/" + m;
            }
            3 === (h = b.split(".")).length ? (a = h[1], c = h[0].toLowerCase()) : 2 === h.length && (a = h[0]), 
            0 <= (k = b.indexOf(":")) && (d = "https" === e || "wss" === e);
        }
        return "firebase" === a && Xc(b + " is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"), 
        c && "undefined" != c || Xc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"), 
        d || "undefined" != typeof window && window.location && window.location.protocol && -1 !== window.location.protocol.indexOf("https:") && L("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."), 
        {
            kc: new cc(b, d, c, "ws" === e || "wss" === e),
            path: new M(f)
        };
    }
    function Zc(a) {
        return fa(a) && (a != a || a == Number.POSITIVE_INFINITY || a == Number.NEGATIVE_INFINITY);
    }
    function $c(a) {
        if ("complete" === document.readyState) a(); else {
            var b = !1, c = function() {
                document.body ? b || (b = !0, a()) : setTimeout(c, Math.floor(10));
            };
            document.addEventListener ? (document.addEventListener("DOMContentLoaded", c, !1), 
            window.addEventListener("load", c, !1)) : document.attachEvent && (document.attachEvent("onreadystatechange", function() {
                "complete" === document.readyState && c();
            }), window.attachEvent("onload", c));
        }
    }
    function ad(a, b) {
        if (a === b) return 0;
        if ("[MIN_NAME]" === a || "[MAX_NAME]" === b) return -1;
        if ("[MIN_NAME]" === b || "[MAX_NAME]" === a) return 1;
        var c = bd(a), d = bd(b);
        return null !== c ? null !== d ? 0 == c - d ? a.length - b.length : c - d : -1 : null !== d ? 1 : a < b ? -1 : 1;
    }
    function cd(a, b) {
        if (b && a in b) return b[a];
        throw Error("Missing required key (" + a + ") in object: " + B(b));
    }
    function dd(a) {
        if ("object" != typeof a || null === a) return B(a);
        var c, b = [];
        for (c in a) b.push(c);
        b.sort(), c = "{";
        for (var d = 0; d < b.length; d++) 0 !== d && (c += ","), c += B(b[d]), c += ":", 
        c += dd(a[b[d]]);
        return c + "}";
    }
    function ed(a, b) {
        if (a.length <= b) return [ a ];
        for (var c = [], d = 0; d < a.length; d += b) d + b > a ? c.push(a.substring(d, a.length)) : c.push(a.substring(d, d + b));
        return c;
    }
    function fd(a, b) {
        if (da(a)) for (var c = 0; c < a.length; ++c) b(c, a[c]); else t(a, b);
    }
    function gd(a) {
        E(!Zc(a), "Invalid JSON number");
        var b, c, d, e;
        for (0 === a ? (d = c = 0, b = -1 / 0 == 1 / a ? 1 : 0) : (b = 0 > a, (a = Math.abs(a)) >= Math.pow(2, -1022) ? (d = Math.min(Math.floor(Math.log(a) / Math.LN2), 1023), 
        c = d + 1023, d = Math.round(a * Math.pow(2, 52 - d) - Math.pow(2, 52))) : (c = 0, 
        d = Math.round(a / Math.pow(2, -1074)))), e = [], a = 52; a; --a) e.push(d % 2 ? 1 : 0), 
        d = Math.floor(d / 2);
        for (a = 11; a; --a) e.push(c % 2 ? 1 : 0), c = Math.floor(c / 2);
        for (e.push(b ? 1 : 0), e.reverse(), b = e.join(""), c = "", a = 0; 64 > a; a += 8) 1 === (d = parseInt(b.substr(a, 8), 2).toString(16)).length && (d = "0" + d), 
        c += d;
        return c.toLowerCase();
    }
    function bd(a) {
        return hd.test(a) && -2147483648 <= (a = Number(a)) && 2147483647 >= a ? a : null;
    }
    function Tb(a) {
        try {
            a();
        } catch (b) {
            setTimeout(function() {
                throw L("Exception was thrown by user callback.", b.stack || ""), b;
            }, Math.floor(0));
        }
    }
    function id(a, b, c) {
        Object.defineProperty(a, b, {
            get: c
        });
    }
    function jd(a) {
        var b = {}, c = {}, d = {}, e = "";
        try {
            var f = a.split("."), b = Kb(Qc(f[0]) || ""), c = Kb(Qc(f[1]) || ""), e = f[2], d = c.d || {};
            delete c.d;
        } catch (h) {}
        return {
            Fg: b,
            Me: c,
            data: d,
            xg: e
        };
    }
    function kd(a) {
        var b = (a = jd(a)).Me;
        return !!a.xg && !!b && "object" == typeof b && b.hasOwnProperty("iat");
    }
    function ld(a) {
        return "object" == typeof (a = jd(a).Me) && !0 === A(a, "admin");
    }
    function md(a, b, c) {
        this.type = nd, this.source = a, this.path = b, this.children = c;
    }
    function od(a) {
        this.g = a;
    }
    function qd(a) {
        this.he = new od(a.g), this.g = a.g;
        var b;
        a.la ? (b = rd(a), b = a.g.Fc(sd(a), b)) : b = a.g.Ic(), this.Uc = b, a.oa ? (b = td(a), 
        a = a.g.Fc(ud(a), b)) : a = a.g.Gc(), this.wc = a;
    }
    function vd() {
        this.hb = {};
    }
    function pd(a, b) {
        var c = b.type, d = b.Za;
        E("child_added" == c || "child_changed" == c || "child_removed" == c, "Only child changes supported for tracking"), 
        E(".priority" !== d, "Only non-priority child changes can be tracked.");
        var e = A(a.hb, d);
        if (e) {
            var f = e.type;
            if ("child_added" == c && "child_removed" == f) a.hb[d] = new H("child_changed", b.Ma, d, e.Ma); else if ("child_removed" == c && "child_added" == f) delete a.hb[d]; else if ("child_removed" == c && "child_changed" == f) a.hb[d] = new H("child_removed", e.qe, d); else if ("child_changed" == c && "child_added" == f) a.hb[d] = new H("child_added", b.Ma, d); else {
                if ("child_changed" != c || "child_changed" != f) throw Pc("Illegal combination of changes: " + b + " occurred after " + e);
                a.hb[d] = new H("child_changed", b.Ma, d, e.qe);
            }
        } else a.hb[d] = b;
    }
    function wd(a, b) {
        this.Sd = a, this.Mf = b;
    }
    function xd(a) {
        this.V = a;
    }
    function Gd(a, b, c, d, e, f) {
        var h = b.O;
        if (null != d.mc(c)) return b;
        var k;
        if (c.e()) E(xc(b.w()), "If change path is empty, we must have complete server data"), 
        yc(b.w()) ? (e = pc(b), d = d.sc(e instanceof P ? e : F)) : d = d.Ba(pc(b)), f = a.V.za(b.O.j(), d, f); else {
            var m = J(c);
            if (".priority" == m) E(1 == Jd(c), "Can't have a priority with additional path components"), 
            f = h.j(), k = b.w().j(), d = d.$c(c, f, k), f = null != d ? a.V.ga(f, d) : h.j(); else {
                var l = D(c);
                nc(h, m) ? (k = b.w().j(), d = d.$c(c, h.j(), k), d = null != d ? h.j().R(m).F(l, d) : h.j().R(m)) : d = d.rc(m, b.w()), 
                f = null != d ? a.V.F(h.j(), m, d, l, e, f) : h.j();
            }
        }
        return Ed(b, f, h.ea || c.e(), a.V.Qa());
    }
    function zd(a, b, c, d, e, f, h, k) {
        var m = b.w();
        if (h = h ? a.V : a.V.Vb(), c.e()) d = h.za(m.j(), d, null); else if (h.Qa() && !m.Tb) d = m.j().F(c, d), 
        d = h.za(m.j(), d, null); else {
            var l = J(c);
            if (!zc(m, c) && 1 < Jd(c)) return b;
            var u = D(c);
            d = m.j().R(l).F(u, d), d = ".priority" == l ? h.ga(m.j(), d) : h.F(m.j(), l, d, u, lc, null);
        }
        return m = m.ea || c.e(), b = new Hd(b.O, new oc(d, m, h.Qa())), Gd(a, b, c, e, new mc(e, b, f), k);
    }
    function yd(a, b, c, d, e, f, h) {
        var k = b.O;
        if (e = new mc(e, b, f), c.e()) h = a.V.za(b.O.j(), d, h), a = Ed(b, h, !0, a.V.Qa()); else if (".priority" === (f = J(c))) h = a.V.ga(b.O.j(), d), 
        a = Ed(b, h, k.ea, k.Tb); else {
            c = D(c);
            var m = k.j().R(f);
            if (!c.e()) {
                var l = e.Xe(f);
                d = null != l ? ".priority" === Kd(c) && l.Q(c.parent()).e() ? l : l.F(c, d) : F;
            }
            m.$(d) ? a = b : (h = a.V.F(k.j(), f, d, c, e, h), a = Ed(b, h, k.ea, a.V.Qa()));
        }
        return a;
    }
    function Ad(a, b, c, d, e, f, h) {
        var k = b;
        return Ld(d, function(d, l) {
            var u = c.m(d);
            nc(b.O, J(u)) && (k = yd(a, k, u, l, e, f, h));
        }), Ld(d, function(d, l) {
            var u = c.m(d);
            nc(b.O, J(u)) || (k = yd(a, k, u, l, e, f, h));
        }), k;
    }
    function Md(a, b) {
        return Ld(b, function(b, d) {
            a = a.F(b, d);
        }), a;
    }
    function Bd(a, b, c, d, e, f, h, k) {
        if (b.w().j().e() && !xc(b.w())) return b;
        var m = b;
        c = c.e() ? d : Nd(Q, c, d);
        var l = b.w().j();
        return c.children.ia(function(c, d) {
            if (l.Fa(c)) {
                var G = Md(G = b.w().j().R(c), d);
                m = zd(a, m, new M(c), G, e, f, h, k);
            }
        }), c.children.ia(function(c, d) {
            var G = !nc(b.w(), c) && null == d.value;
            l.Fa(c) || G || (G = b.w().j().R(c), G = Md(G, d), m = zd(a, m, new M(c), G, e, f, h, k));
        }), m;
    }
    function Fd(a, b, c, d, e, f, h) {
        if (null != e.mc(c)) return b;
        var k = yc(b.w()), m = b.w();
        if (null != d.value) {
            if (c.e() && m.ea || zc(m, c)) return zd(a, b, c, m.j().Q(c), e, f, k, h);
            if (c.e()) {
                var l = Q;
                return m.j().P(Od, function(a, b) {
                    l = l.set(new M(a), b);
                }), Bd(a, b, c, l, e, f, k, h);
            }
            return b;
        }
        return l = Q, Ld(d, function(a) {
            var b = c.m(a);
            zc(m, b) && (l = l.set(a, m.j().Q(b)));
        }), Bd(a, b, c, l, e, f, k, h);
    }
    function M(a, b) {
        if (1 == arguments.length) {
            this.o = a.split("/");
            for (var c = 0, d = 0; d < this.o.length; d++) 0 < this.o[d].length && (this.o[c] = this.o[d], 
            c++);
            this.o.length = c, this.Z = 0;
        } else this.o = a, this.Z = b;
    }
    function R(a, b) {
        var c = J(a);
        if (null === c) return b;
        if (c === J(b)) return R(D(a), D(b));
        throw Error("INTERNAL ERROR: innerPath (" + b + ") is not within outerPath (" + a + ")");
    }
    function Qd(a, b) {
        for (var c = a.slice(), d = b.slice(), e = 0; e < c.length && e < d.length; e++) {
            var f = ad(c[e], d[e]);
            if (0 !== f) return f;
        }
        return c.length === d.length ? 0 : c.length < d.length ? -1 : 1;
    }
    function J(a) {
        return a.Z >= a.o.length ? null : a.o[a.Z];
    }
    function Jd(a) {
        return a.o.length - a.Z;
    }
    function D(a) {
        var b = a.Z;
        return b < a.o.length && b++, new M(a.o, b);
    }
    function Kd(a) {
        return a.Z < a.o.length ? a.o[a.o.length - 1] : null;
    }
    function Rd(a, b) {
        this.Ta = a.slice(), this.Ka = Math.max(1, this.Ta.length), this.Te = b;
        for (var c = 0; c < this.Ta.length; c++) this.Ka += Ob(this.Ta[c]);
        Sd(this);
    }
    function Sd(a) {
        if (768 < a.Ka) throw Error(a.Te + "has a key path longer than 768 bytes (" + a.Ka + ").");
        if (32 < a.Ta.length) throw Error(a.Te + "path specified exceeds the maximum depth that can be written (32) or object contains a cycle " + Td(a));
    }
    function Td(a) {
        return 0 == a.Ta.length ? "" : "in property '" + a.Ta.join(".") + "'";
    }
    function Wd(a) {
        return q(a) && 0 !== a.length && !Ud.test(a);
    }
    function Xd(a) {
        return null === a || q(a) || fa(a) && !Zc(a) || ha(a) && Hb(a, ".sv");
    }
    function Yd(a, b, c, d) {
        d && !p(b) || Zd(Bb(a, 1, d), b, c);
    }
    function Zd(a, b, c) {
        if (c instanceof M && (c = new Rd(c, a)), !p(b)) throw Error(a + "contains undefined " + Td(c));
        if (ga(b)) throw Error(a + "contains a function " + Td(c) + " with contents: " + b.toString());
        if (Zc(b)) throw Error(a + "contains " + b.toString() + " " + Td(c));
        if (q(b) && b.length > 10485760 / 3 && 10485760 < Ob(b)) throw Error(a + "contains a string greater than 10485760 utf8 bytes " + Td(c) + " ('" + b.substring(0, 50) + "...')");
        if (ha(b)) {
            var d = !1, e = !1;
            if (Ib(b, function(b, h) {
                if (".value" === b) d = !0; else if (".priority" !== b && ".sv" !== b && (e = !0, 
                !Wd(b))) throw Error(a + " contains an invalid key (" + b + ") " + Td(c) + '.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');
                c.push(b), Zd(a, h, c), c.pop();
            }), d && e) throw Error(a + ' contains ".value" child ' + Td(c) + " in addition to actual children.");
        }
    }
    function $d(a, b) {
        var c, d;
        for (c = 0; c < b.length; c++) for (var e = (d = b[c]).slice(), f = 0; f < e.length; f++) if ((".priority" !== e[f] || f !== e.length - 1) && !Wd(e[f])) throw Error(a + "contains an invalid key (" + e[f] + ") in path " + d.toString() + '. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');
        for (b.sort(Qd), e = null, c = 0; c < b.length; c++) {
            if (d = b[c], null !== e && e.contains(d)) throw Error(a + "contains a path " + e.toString() + " that is ancestor of another path " + d.toString());
            e = d;
        }
    }
    function ae(a, b, c) {
        var d = Bb(a, 1, !1);
        if (!ha(b) || da(b)) throw Error(d + " must be an object containing the children to replace.");
        var e = [];
        Ib(b, function(a, b) {
            var k = new M(a);
            if (Zd(d, b, c.m(k)), ".priority" === Kd(k) && !Xd(b)) throw Error(d + "contains an invalid value for '" + k.toString() + "', which must be a valid Firebase priority (a string, finite number, server value, or null).");
            e.push(k);
        }), $d(d, e);
    }
    function be(a, b, c) {
        if (Zc(c)) throw Error(Bb(a, b, !1) + "is " + c.toString() + ", but must be a valid Firebase priority (a string, finite number, server value, or null).");
        if (!Xd(c)) throw Error(Bb(a, b, !1) + "must be a valid Firebase priority (a string, finite number, server value, or null).");
    }
    function ce(a, b, c) {
        if (!c || p(b)) switch (b) {
          case "value":
          case "child_added":
          case "child_removed":
          case "child_changed":
          case "child_moved":
            break;

          default:
            throw Error(Bb(a, 1, c) + 'must be a valid event type: "value", "child_added", "child_removed", "child_changed", or "child_moved".');
        }
    }
    function de(a, b) {
        if (p(b) && !Wd(b)) throw Error(Bb(a, 2, !0) + 'was an invalid key: "' + b + '".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").');
    }
    function ee(a, b) {
        if (!q(b) || 0 === b.length || Vd.test(b)) throw Error(Bb(a, 1, !1) + 'was an invalid path: "' + b + '". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"');
    }
    function fe(a, b) {
        if (".info" === J(b)) throw Error(a + " failed: Can't modify data under /.info/");
    }
    function ge(a, b) {
        var d, c = b.path.toString();
        if (!(d = !q(b.kc.host) || 0 === b.kc.host.length || !Wd(b.kc.pe)) && (d = 0 !== c.length) && (c && (c = c.replace(/^\/*\.info(\/|$)/, "/")), 
        d = !(q(c) && 0 !== c.length && !Vd.test(c))), d) throw Error(Bb(a, 1, !1) + 'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".');
    }
    function he() {
        this.children = {}, this.ad = 0, this.value = null;
    }
    function ie(a, b, c) {
        this.ud = a || "", this.Ha = b || null, this.A = c || new he();
    }
    function je(a, b) {
        for (var e, c = b instanceof M ? b : new M(b), d = a; null !== (e = J(c)); ) d = new ie(e, d, A(d.A.children, e) || new he()), 
        c = D(c);
        return d;
    }
    function ke(a, b) {
        E(void 0 !== b, "Cannot set value to undefined"), a.A.value = b, le(a);
    }
    function me(a, b, c, d) {
        c && !d && b(a), a.P(function(a) {
            me(a, b, !0, d);
        }), c && d && b(a);
    }
    function ne(a, b) {
        for (var c = a.parent(); null !== c && !b(c); ) c = c.parent();
    }
    function le(a) {
        if (null !== a.Ha) {
            var b = a.Ha, c = a.ud, d = a.e(), e = Hb(b.A.children, c);
            d && e ? (delete b.A.children[c], b.A.ad--, le(b)) : d || e || (b.A.children[c] = a.A, 
            b.A.ad++, le(b));
        }
    }
    function oe(a) {
        E(da(a) && 0 < a.length, "Requires a non-empty array"), this.Kf = a, this.Ec = {};
    }
    function pe(a, b) {
        E(La(a.Kf, function(a) {
            return a === b;
        }), "Unknown event: " + b);
    }
    function qe(a, b) {
        this.value = a, this.children = b || re;
    }
    function se(a) {
        var b = Q;
        return t(a, function(a, d) {
            b = b.set(new M(d), a);
        }), b;
    }
    function te(a, b, c) {
        if (null != a.value && c(a.value)) return {
            path: C,
            value: a.value
        };
        if (b.e()) return null;
        var d = J(b);
        return null !== (a = a.children.get(d)) && null != (b = te(a, D(b), c)) ? {
            path: new M(d).m(b.path),
            value: b.value
        } : null;
    }
    function ue(a, b) {
        return te(a, b, function() {
            return !0;
        });
    }
    function Nd(a, b, c) {
        if (b.e()) return c;
        var d = J(b);
        return b = Nd(a.children.get(d) || Q, D(b), c), d = b.e() ? a.children.remove(d) : a.children.Ra(d, b), 
        new qe(a.value, d);
    }
    function ve(a, b) {
        return we(a, C, b);
    }
    function we(a, b, c) {
        var d = {};
        return a.children.ia(function(a, f) {
            d[a] = we(f, b.m(a), c);
        }), c(b, a.value, d);
    }
    function xe(a, b, c) {
        return ye(a, b, C, c);
    }
    function ye(a, b, c, d) {
        var e = !!a.value && d(c, a.value);
        return e || (b.e() ? null : (e = J(b), (a = a.children.get(e)) ? ye(a, D(b), c.m(e), d) : null));
    }
    function ze(a, b, c) {
        Ae(a, b, C, c);
    }
    function Ae(a, b, c, d) {
        if (b.e()) return a;
        a.value && d(c, a.value);
        var e = J(b);
        return (a = a.children.get(e)) ? Ae(a, D(b), c.m(e), d) : Q;
    }
    function Ld(a, b) {
        Be(a, C, b);
    }
    function Be(a, b, c) {
        a.children.ia(function(a, e) {
            Be(e, b.m(a), c);
        }), a.value && c(b, a.value);
    }
    function Ce(a, b) {
        a.children.ia(function(a, d) {
            d.value && b(a, d.value);
        });
    }
    function De(a, b, c) {
        this.type = Dd, this.source = Ee, this.path = a, this.Pb = b, this.Id = c;
    }
    function Fe(a, b, c, d) {
        this.ee = a, this.We = b, this.Ib = c, this.Ee = d, E(!d || b, "Tagged queries must be from server.");
    }
    function He() {
        oe.call(this, [ "visible" ]);
        var a, b;
        if ("undefined" != typeof document && void 0 !== document.addEventListener && (void 0 !== document.hidden ? (b = "visibilitychange", 
        a = "hidden") : void 0 !== document.mozHidden ? (b = "mozvisibilitychange", a = "mozHidden") : void 0 !== document.msHidden ? (b = "msvisibilitychange", 
        a = "msHidden") : void 0 !== document.webkitHidden && (b = "webkitvisibilitychange", 
        a = "webkitHidden")), this.Nb = !0, b) {
            var c = this;
            document.addEventListener(b, function() {
                var b = !document[a];
                b !== c.Nb && (c.Nb = b, c.Ge("visible", b));
            }, !1);
        }
    }
    function Ie() {
        this.set = {};
    }
    function Je(a, b) {
        t(a.set, function(a, d) {
            b(d, a);
        });
    }
    function Ke(a, b) {
        return a && "object" == typeof a ? (E(".sv" in a, "Unexpected leaf node or priority contents"), 
        b[a[".sv"]]) : a;
    }
    function Le(a, b) {
        var c = new Me();
        return Ne(a, new M(""), function(a, e) {
            Oe(c, a, Pe(e, b));
        }), c;
    }
    function Pe(a, b) {
        var d, c = Ke(c = a.C().H(), b);
        if (a.J()) {
            var e = Ke(a.Ea(), b);
            return e !== a.Ea() || c !== a.C().H() ? new Qe(e, S(c)) : a;
        }
        return d = a, c !== a.C().H() && (d = d.ga(new Qe(c))), a.P(N, function(a, c) {
            var e = Pe(c, b);
            e !== c && (d = d.U(a, e));
        }), d;
    }
    function Re() {
        if (oe.call(this, [ "online" ]), this.ic = !0, "undefined" != typeof window && void 0 !== window.addEventListener && !Pb()) {
            var a = this;
            window.addEventListener("online", function() {
                a.ic || (a.ic = !0, a.Ge("online", !0));
            }, !1), window.addEventListener("offline", function() {
                a.ic && (a.ic = !1, a.Ge("online", !1));
            }, !1);
        }
    }
    function Se() {}
    function Ue(a) {
        return r(a.compare, a);
    }
    function We(a) {
        E(!a.e() && ".priority" !== J(a), "Can't create PathIndex with empty path or .priority key"), 
        this.cc = a;
    }
    function Ye() {}
    function Ze() {}
    function $e() {}
    function cf(a, b) {
        return ad(a.name, b.name);
    }
    function df(a, b) {
        return ad(a, b);
    }
    function ef(a, b) {
        this.od = a, this.dc = b;
    }
    function ff(a, b, c) {
        return new ef(la(a.od, function(d, f) {
            var h = A(a.dc, f);
            if (E(h, "Missing index implementation for " + f), d === Te) {
                if (h.yc(b.S)) {
                    for (var k = [], m = c.Xb(gf), l = K(m); l; ) l.name != b.name && k.push(l), l = K(m);
                    return k.push(b), hf(k, Ue(h));
                }
                return Te;
            }
            return h = c.get(b.name), k = d, h && (k = k.remove(new O(b.name, h))), k.Ra(b, b.S);
        }), a.dc);
    }
    function jf(a, b, c) {
        return new ef(la(a.od, function(a) {
            if (a === Te) return a;
            var d = c.get(b.name);
            return d ? a.remove(new O(b.name, d)) : a;
        }), a.dc);
    }
    function O(a, b) {
        this.name = a, this.S = b;
    }
    function gf(a, b) {
        return new O(a, b);
    }
    function lf(a) {
        this.ta = new qd(a), this.g = a.g, E(a.ya, "Only valid if limit has been set"), 
        this.pa = a.pa, this.Jb = !mf(a);
    }
    function nf(a, b, c, d, e, f) {
        var h;
        if (a.Jb) {
            var k = Ue(a.g);
            h = function(a, b) {
                return k(b, a);
            };
        } else h = Ue(a.g);
        E(b.Fb() == a.pa, "");
        var m = new O(c, d), l = a.Jb ? of(b, a.g) : pf(b, a.g), u = a.ta.matches(m);
        if (b.Fa(c)) {
            for (var z = b.R(c), l = e.fe(a.g, l, a.Jb); null != l && (l.name == c || b.Fa(l.name)); ) l = e.fe(a.g, l, a.Jb);
            return e = null == l ? 1 : h(l, m), u && !d.e() && 0 <= e ? (null != f && pd(f, new H("child_changed", d, c, z)), 
            b.U(c, d)) : (null != f && pd(f, new H("child_removed", z, c)), b = b.U(c, F), null != l && a.ta.matches(l) ? (null != f && pd(f, new H("child_added", l.S, l.name)), 
            b.U(l.name, l.S)) : b);
        }
        return d.e() ? b : u && 0 <= h(l, m) ? (null != f && (pd(f, new H("child_removed", l.S, l.name)), 
        pd(f, new H("child_added", d, c))), b.U(c, d).U(l.name, F)) : b;
    }
    function qf(a) {
        this.W = a, this.g = a.n.g;
    }
    function rf(a, b, c, d) {
        var e = [], f = [];
        return Ga(b, function(b) {
            "child_changed" === b.type && a.g.nd(b.qe, b.Ma) && f.push(new H("child_moved", b.Ma, b.Za));
        }), sf(a, e, "child_removed", b, d, c), sf(a, e, "child_added", b, d, c), sf(a, e, "child_moved", f, d, c), 
        sf(a, e, "child_changed", b, d, c), sf(a, e, hc, b, d, c), e;
    }
    function sf(a, b, c, d, e, f) {
        Pa(d = Ha(d, function(a) {
            return a.type === c;
        }), r(a.Of, a)), Ga(d, function(c) {
            var d = tf(a, c, f);
            Ga(e, function(e) {
                e.tf(c.type) && b.push(e.createEvent(d, a.W));
            });
        });
    }
    function tf(a, b, c) {
        return "value" !== b.type && "child_removed" !== b.type && (b.Dd = c.Ze(b.Za, b.Ma, a.g)), 
        b;
    }
    function uf() {
        this.Sb = this.oa = this.Lb = this.la = this.ya = !1, this.pa = 0, this.oc = "", 
        this.ec = null, this.Ab = "", this.bc = null, this.yb = "", this.g = N;
    }
    function mf(a) {
        return "" === a.oc ? a.la : "l" === a.oc;
    }
    function sd(a) {
        return E(a.la, "Only valid if start has been set"), a.ec;
    }
    function rd(a) {
        return E(a.la, "Only valid if start has been set"), a.Lb ? a.Ab : "[MIN_NAME]";
    }
    function ud(a) {
        return E(a.oa, "Only valid if end has been set"), a.bc;
    }
    function td(a) {
        return E(a.oa, "Only valid if end has been set"), a.Sb ? a.yb : "[MAX_NAME]";
    }
    function wf(a) {
        var b = new uf();
        return b.ya = a.ya, b.pa = a.pa, b.la = a.la, b.ec = a.ec, b.Lb = a.Lb, b.Ab = a.Ab, 
        b.oa = a.oa, b.bc = a.bc, b.Sb = a.Sb, b.yb = a.yb, b.g = a.g, b;
    }
    function xf(a, b) {
        var c = wf(a);
        return c.g = b, c;
    }
    function yf(a) {
        var b = {};
        if (a.la && (b.sp = a.ec, a.Lb && (b.sn = a.Ab)), a.oa && (b.ep = a.bc, a.Sb && (b.en = a.yb)), 
        a.ya) {
            b.l = a.pa;
            var c = a.oc;
            "" === c && (c = mf(a) ? "l" : "r"), b.vf = c;
        }
        return a.g !== N && (b.i = a.g.toString()), b;
    }
    function T(a) {
        return !(a.la || a.oa || a.ya);
    }
    function zf(a) {
        return T(a) && a.g == N;
    }
    function Af(a) {
        var b = {};
        if (zf(a)) return b;
        var c;
        return a.g === N ? c = "$priority" : a.g === bf ? c = "$value" : a.g === Od ? c = "$key" : (E(a.g instanceof We, "Unrecognized index type!"), 
        c = a.g.toString()), b.orderBy = B(c), a.la && (b.startAt = B(a.ec), a.Lb && (b.startAt += "," + B(a.Ab))), 
        a.oa && (b.endAt = B(a.bc), a.Sb && (b.endAt += "," + B(a.yb))), a.ya && (mf(a) ? b.limitToFirst = a.pa : b.limitToLast = a.pa), 
        b;
    }
    function Qe(a, b) {
        this.B = a, E(p(this.B) && null !== this.B, "LeafNode shouldn't be created with null/undefined value."), 
        this.ba = b || F, Bf(this.ba), this.Eb = null;
    }
    function P(a, b, c) {
        this.k = a, (this.ba = b) && Bf(this.ba), a.e() && E(!this.ba || this.ba.e(), "An empty node cannot have a priority"), 
        this.zb = c, this.Eb = null;
    }
    function of(a, b) {
        var c;
        return (c = (c = Ff(a, b)) ? (c = c.Hc()) && c.name : a.k.Hc()) ? new O(c, a.k.get(c)) : null;
    }
    function pf(a, b) {
        var c;
        return (c = (c = Ff(a, b)) ? (c = c.fc()) && c.name : a.k.fc()) ? new O(c, a.k.get(c)) : null;
    }
    function Ff(a, b) {
        return b === Od ? null : a.zb.get(b.toString());
    }
    function S(a, b) {
        if (null === a) return F;
        var c = null;
        if ("object" == typeof a && ".priority" in a ? c = a[".priority"] : void 0 !== b && (c = b), 
        E(null === c || "string" == typeof c || "number" == typeof c || "object" == typeof c && ".sv" in c, "Invalid priority type found: " + typeof c), 
        "object" == typeof a && ".value" in a && null !== a[".value"] && (a = a[".value"]), 
        "object" != typeof a || ".sv" in a) return new Qe(a, S(c));
        if (a instanceof Array) {
            var d = F, e = a;
            return t(e, function(a, b) {
                if (Hb(e, b) && "." !== b.substring(0, 1)) {
                    var c = S(a);
                    !c.J() && c.e() || (d = d.U(b, c));
                }
            }), d.ga(S(c));
        }
        var f = [], h = !1, k = a;
        if (Ib(k, function(a) {
            if ("string" != typeof a || "." !== a.substring(0, 1)) {
                var b = S(k[a]);
                b.e() || (h = h || !b.C().e(), f.push(new O(a, b)));
            }
        }), 0 == f.length) return F;
        var m = hf(f, cf, function(a) {
            return a.name;
        }, df);
        if (h) {
            var l = hf(f, Ue(N));
            return new P(m, S(c), new ef({
                ".priority": l
            }, {
                ".priority": N
            }));
        }
        return new P(m, S(c), kf);
    }
    function Hf(a) {
        this.count = parseInt(Math.log(a + 1) / Gf, 10), this.Re = this.count - 1, this.Lf = a + 1 & parseInt(Array(this.count + 1).join("1"), 2);
    }
    function If(a) {
        var b = !(a.Lf & 1 << a.Re);
        return a.Re--, b;
    }
    function hf(a, b, c, d) {
        function e(b, d) {
            if (0 == (f = d - b)) return null;
            if (1 == f) {
                l = a[b];
                return new Fc(u = c ? c(l) : l, l.S, !1, null, null);
            }
            var f = e(b, l = parseInt(f / 2, 10) + b), z = e(l + 1, d), l = a[l], u = c ? c(l) : l;
            return new Fc(u, l.S, !1, f, z);
        }
        a.sort(b);
        var f = function(b) {
            function d(b, h) {
                var k = u - b, z = u;
                u -= b;
                var z = e(k + 1, z), k = a[k], z = new Fc(c ? c(k) : k, k.S, h, null, z);
                f ? f.left = z : l = z, f = z;
            }
            for (var f = null, l = null, u = a.length, z = 0; z < b.count; ++z) {
                var G = If(b), Cd = Math.pow(2, b.count - (z + 1));
                G ? d(Cd, !1) : (d(Cd, !1), d(Cd, !0));
            }
            return l;
        }(new Hf(a.length));
        return null !== f ? new Ac(d || b, f) : new Ac(d || b);
    }
    function Df(a) {
        return "number" == typeof a ? "number:" + gd(a) : "string:" + a;
    }
    function Bf(a) {
        if (a.J()) {
            var b = a.H();
            E("string" == typeof b || "number" == typeof b || "object" == typeof b && Hb(b, ".sv"), "Priority must be a string or number.");
        } else E(a === Xe || a.e(), "priority of unexpected type.");
        E(a === Xe || a.C().e(), "Priority nodes can't have a priority of their own.");
    }
    function Jf() {
        P.call(this, new Ac(df), F, kf);
    }
    function Hd(a, b) {
        this.O = a, this.Ld = b;
    }
    function Ed(a, b, c, d) {
        return new Hd(new oc(b, c, d), a.Ld);
    }
    function Id(a) {
        return a.O.ea ? a.O.j() : null;
    }
    function pc(a) {
        return a.Ld.ea ? a.Ld.j() : null;
    }
    function Kf(a, b) {
        this.W = a;
        var d = new od((c = a.n).g), c = T(c) ? new od(c.g) : c.ya ? new lf(c) : new qd(c);
        this.of = new xd(c);
        var e = b.w(), f = b.O, h = d.za(F, e.j(), null), k = c.za(F, f.j(), null);
        this.Na = new Hd(new oc(k, f.ea, c.Qa()), new oc(h, e.ea, d.Qa())), this.ab = [], 
        this.Sf = new qf(a);
    }
    function Lf(a) {
        return a.W;
    }
    function Nf(a, b) {
        var c = a.Na.O, d = [];
        return c.j().J() || c.j().P(N, function(a, b) {
            d.push(new H("child_added", b, a));
        }), c.ea && d.push(gc(c.j())), Mf(a, d, c.j(), b);
    }
    function Mf(a, b, c, d) {
        return rf(a.Sf, b, c, d ? [ d ] : a.ab);
    }
    function Of(a, b, c) {
        this.f = Vc("p:rest:"), this.M = a, this.Hb = b, this.Vd = c, this.aa = {};
    }
    function Pf(a, b) {
        return p(b) ? "tag$" + b : (E(zf(a.n), "should have a tag if it's not a default query."), 
        a.path.toString());
    }
    function Qf(a, b, c, d) {
        (c = c || {}).format = "export", a.Vd.getToken(!1).then(function(e) {
            (e = e && e.accessToken) && (c.auth = e);
            var f = (a.M.Sc ? "https://" : "http://") + a.M.host + b + "?" + Jb(c);
            a.f("Sending REST request for " + f);
            var h = new XMLHttpRequest();
            h.onreadystatechange = function() {
                if (d && 4 === h.readyState) {
                    a.f("REST Response for " + f + " received. status:", h.status, "response:", h.responseText);
                    var b = null;
                    if (200 <= h.status && 300 > h.status) {
                        try {
                            b = Kb(h.responseText);
                        } catch (c) {
                            L("Failed to parse JSON response for " + f + ": " + h.responseText);
                        }
                        d(null, b);
                    } else 401 !== h.status && 404 !== h.status && L("Got unsuccessful REST response for " + f + " Status: " + h.status), 
                    d(h.status);
                    d = null;
                }
            }, h.open("GET", f, !0), h.send();
        });
    }
    function Rf(a) {
        this.He = a;
    }
    function Sf(a, b) {
        a.He.INTERNAL.addAuthTokenListener(b);
    }
    function Tf(a) {
        this.Nf = a, this.rd = null;
    }
    function Uf() {
        this.uc = {};
    }
    function Vf(a, b, c) {
        p(c) || (c = 1), Hb(a.uc, b) || (a.uc[b] = 0), a.uc[b] += c;
    }
    function Wf(a, b) {
        this.zf = {}, this.Vc = new Tf(a), this.wa = b;
        var c = 1e4 + 2e4 * Math.random();
        setTimeout(r(this.rf, this), Math.floor(c));
    }
    function Zf(a) {
        return a = a.toString(), Xf[a] || (Xf[a] = new Uf()), Xf[a];
    }
    function $f(a, b) {
        var c = a.toString();
        return Yf[c] || (Yf[c] = b()), Yf[c];
    }
    function bg(a, b, c, d) {
        this.Zd = a, this.f = Vc(this.Zd), this.frames = this.Ac = null, this.qb = this.rb = this.Fe = 0, 
        this.Xa = Zf(b), a = {
            v: "5"
        }, "undefined" != typeof location && location.href && -1 !== location.href.indexOf("firebaseio.com") && (a.r = "f"), 
        c && (a.s = c), d && (a.ls = d), this.Ne = ec(b, "websocket", a);
    }
    function eg(a, b) {
        if (a.frames.push(b), a.frames.length == a.Fe) {
            var c = a.frames.join("");
            a.frames = null, c = Kb(c), a.hg(c);
        }
    }
    function dg(a) {
        clearInterval(a.Ac), a.Ac = setInterval(function() {
            a.La && fg(a, "0"), dg(a);
        }, Math.floor(45e3));
    }
    function fg(a, b) {
        try {
            a.La.send(b);
        } catch (c) {
            a.f("Exception thrown from WebSocket.send():", c.message || c.data, "Closing connection."), 
            setTimeout(r(a.fb, a), 0);
        }
    }
    function gg(a, b, c, d) {
        this.Zd = a, this.f = Vc(a), this.kc = b, this.qb = this.rb = 0, this.Xa = Zf(b), 
        this.Bf = c, this.xc = !1, this.Db = d, this.Yc = function(a) {
            return ec(b, "long_polling", a);
        };
    }
    function kg(a, b) {
        var c = B(b).length;
        a.qb += c, Vf(a.Xa, "bytes_received", c);
    }
    function jg(a, b, c, d) {
        if (this.Yc = d, this.kb = c, this.ve = new Ie(), this.Qc = [], this.$d = Math.floor(1e8 * Math.random()), 
        this.Kd = !0, this.Qd = Oc(), window["pLPCommand" + this.Qd] = a, window["pRTLPCB" + this.Qd] = b, 
        a = document.createElement("iframe"), a.style.display = "none", !document.body) throw "Document body has not initialized. Wait to initialize Firebase until after the document is ready.";
        document.body.appendChild(a);
        try {
            a.contentWindow.document || I("No IE domain setting required");
        } catch (e) {
            a.src = "javascript:void((function(){document.open();document.domain='" + document.domain + "';document.close();})())";
        }
        a.contentDocument ? a.ib = a.contentDocument : a.contentWindow ? a.ib = a.contentWindow.document : a.document && (a.ib = a.document), 
        this.Ga = a, a = "", this.Ga.src && "javascript:" === this.Ga.src.substr(0, 11) && (a = '<script>document.domain="' + document.domain + '";<\/script>'), 
        a = "<html><body>" + a + "</body></html>";
        try {
            this.Ga.ib.open(), this.Ga.ib.write(a), this.Ga.ib.close();
        } catch (f) {
            I("frame writing exception"), f.stack && I(f.stack), I(f);
        }
    }
    function mg(a) {
        if (a.Ud && a.Kd && a.ve.count() < (0 < a.Qc.length ? 2 : 1)) {
            a.$d++, (b = {}).id = a.fg, b.pw = a.gg, b.ser = a.$d;
            for (var b = a.Yc(b), c = "", d = 0; 0 < a.Qc.length && 1870 >= a.Qc[0].Se.length + 30 + c.length; ) {
                var e = a.Qc.shift(), c = c + "&seg" + d + "=" + e.ug + "&ts" + d + "=" + e.Bg + "&d" + d + "=" + e.Se;
                d++;
            }
            return ng(a, b + c, a.$d), !0;
        }
        return !1;
    }
    function ng(a, b, c) {
        function d() {
            a.ve.remove(c), mg(a);
        }
        a.ve.add(c, 1);
        var e = setTimeout(d, Math.floor(25e3));
        lg(a, b, function() {
            clearTimeout(e), d();
        });
    }
    function lg(a, b, c) {
        setTimeout(function() {
            try {
                if (a.Kd) {
                    var d = a.Ga.ib.createElement("script");
                    d.type = "text/javascript", d.async = !0, d.src = b, d.onload = d.onreadystatechange = function() {
                        var a = d.readyState;
                        a && "loaded" !== a && "complete" !== a || (d.onload = d.onreadystatechange = null, 
                        d.parentNode && d.parentNode.removeChild(d), c());
                    }, d.onerror = function() {
                        I("Long-poll script failed to load: " + b), a.Kd = !1, a.close();
                    }, a.Ga.ib.body.appendChild(d);
                }
            } catch (e) {}
        }, Math.floor(1));
    }
    function og(a) {
        pg(this, a);
    }
    function pg(a, b) {
        var c = bg && bg.isAvailable(), d = c && !(Xb.cf || !0 === Xb.get("previous_websocket_failure"));
        if (b.Cg && (c || L("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."), 
        d = !0), d) a.Wc = [ bg ]; else {
            var e = a.Wc = [];
            fd(qg, function(a, b) {
                b && b.isAvailable() && e.push(b);
            });
        }
    }
    function rg(a) {
        if (0 < a.Wc.length) return a.Wc[0];
        throw Error("No transports available");
    }
    function sg(a, b, c, d, e, f, h) {
        this.id = a, this.f = Vc("c:" + this.id + ":"), this.te = c, this.Mc = d, this.ja = e, 
        this.se = f, this.M = b, this.Ad = [], this.Oe = 0, this.Af = new og(b), this.L = 0, 
        this.Db = h, this.f("Connection created"), tg(this);
    }
    function tg(a) {
        var b = rg(a.Af);
        a.I = new b("c:" + a.id + ":" + a.Oe++, a.M, void 0, a.Db), a.xe = b.responsesRequiredToBeHealthy || 0;
        var c = ug(a, a.I), d = vg(a, a.I);
        a.Xc = a.I, a.Rc = a.I, a.D = null, a.Cb = !1, setTimeout(function() {
            a.I && a.I.open(c, d);
        }, Math.floor(0)), 0 < (b = b.healthyTimeout || 0) && (a.md = setTimeout(function() {
            a.md = null, a.Cb || (a.I && 102400 < a.I.qb ? (a.f("Connection exceeded healthy timeout but has received " + a.I.qb + " bytes.  Marking connection healthy."), 
            a.Cb = !0, a.I.sd()) : a.I && 10240 < a.I.rb ? a.f("Connection exceeded healthy timeout but has sent " + a.I.rb + " bytes.  Leaving connection alive.") : (a.f("Closing unhealthy connection after timeout."), 
            a.close()));
        }, Math.floor(b)));
    }
    function vg(a, b) {
        return function(c) {
            b === a.I ? (a.I = null, c || 0 !== a.L ? 1 === a.L && a.f("Realtime connection lost.") : (a.f("Realtime connection failed."), 
            "s-" === a.M.bb.substr(0, 2) && (Xb.remove("host:" + a.M.host), a.M.bb = a.M.host)), 
            a.close()) : b === a.D ? (a.f("Secondary connection lost."), c = a.D, a.D = null, 
            a.Xc !== c && a.Rc !== c || a.close()) : a.f("closing an old connection");
        };
    }
    function ug(a, b) {
        return function(c) {
            if (2 != a.L) if (b === a.Rc) {
                d = cd("t", c);
                if (c = cd("d", c), "c" == d) {
                    if (d = cd("t", c), "d" in c) if (c = c.d, "h" === d) {
                        var d = c.ts, e = c.v, f = c.h;
                        a.yf = c.s, dc(a.M, f), 0 == a.L && (a.I.start(), wg(a, a.I, d), "5" !== e && L("Protocol version mismatch detected"), 
                        c = a.Af, (c = 1 < c.Wc.length ? c.Wc[1] : null) && xg(a, c));
                    } else if ("n" === d) {
                        for (a.f("recvd end transmission on primary"), a.Rc = a.D, c = 0; c < a.Ad.length; ++c) a.wd(a.Ad[c]);
                        a.Ad = [], yg(a);
                    } else "s" === d ? (a.f("Connection shutdown command received. Shutting down..."), 
                    a.se && (a.se(c), a.se = null), a.ja = null, a.close()) : "r" === d ? (a.f("Reset packet received.  New host: " + c), 
                    dc(a.M, c), 1 === a.L ? a.close() : (zg(a), tg(a))) : "e" === d ? Wc("Server Error: " + c) : "o" === d ? (a.f("got pong on primary."), 
                    Ag(a), Bg(a)) : Wc("Unknown control packet command: " + d);
                } else "d" == d && a.wd(c);
            } else if (b === a.D) if (d = cd("t", c), c = cd("d", c), "c" == d) "t" in c && ("a" === (c = c.t) ? Cg(a) : "r" === c ? (a.f("Got a reset on secondary, closing it"), 
            a.D.close(), a.Xc !== a.D && a.Rc !== a.D || a.close()) : "o" === c && (a.f("got pong on secondary."), 
            a.xf--, Cg(a))); else {
                if ("d" != d) throw Error("Unknown protocol layer: " + d);
                a.Ad.push(c);
            } else a.f("message on old connection");
        };
    }
    function yg(a) {
        a.Xc === a.D && a.Rc === a.D && (a.f("cleaning up and promoting a connection: " + a.D.Zd), 
        a.I = a.D, a.D = null);
    }
    function Cg(a) {
        0 >= a.xf ? (a.f("Secondary connection is healthy."), a.Cb = !0, a.D.sd(), a.D.start(), 
        a.f("sending client ack on secondary"), a.D.send({
            t: "c",
            d: {
                t: "a",
                d: {}
            }
        }), a.f("Ending transmission on primary"), a.I.send({
            t: "c",
            d: {
                t: "n",
                d: {}
            }
        }), a.Xc = a.D, yg(a)) : (a.f("sending ping on secondary."), a.D.send({
            t: "c",
            d: {
                t: "p",
                d: {}
            }
        }));
    }
    function Ag(a) {
        a.Cb || (a.xe--, 0 >= a.xe && (a.f("Primary connection is healthy."), a.Cb = !0, 
        a.I.sd()));
    }
    function xg(a, b) {
        a.D = new b("c:" + a.id + ":" + a.Oe++, a.M, a.yf), a.xf = b.responsesRequiredToBeHealthy || 0, 
        a.D.open(ug(a, a.D), vg(a, a.D)), setTimeout(function() {
            a.D && (a.f("Timed out trying to upgrade."), a.D.close());
        }, Math.floor(6e4));
    }
    function wg(a, b, c) {
        a.f("Realtime connection established."), a.I = b, a.L = 1, a.Mc && (a.Mc(c, a.yf), 
        a.Mc = null), 0 === a.xe ? (a.f("Primary connection is healthy."), a.Cb = !0) : setTimeout(function() {
            Bg(a);
        }, Math.floor(5e3));
    }
    function Bg(a) {
        a.Cb || 1 !== a.L || (a.f("sending ping on primary."), Dg(a, {
            t: "c",
            d: {
                t: "p",
                d: {}
            }
        }));
    }
    function Dg(a, b) {
        if (1 !== a.L) throw "Connection is not connected";
        a.Xc.send(b);
    }
    function zg(a) {
        a.f("Shutting down all connections"), a.I && (a.I.close(), a.I = null), a.D && (a.D.close(), 
        a.D = null), a.md && (clearTimeout(a.md), a.md = null);
    }
    function Eg(a, b, c, d, e, f) {
        if (this.id = Fg++, this.f = Vc("p:" + this.id + ":"), this.qd = {}, this.aa = {}, 
        this.qa = [], this.Pc = 0, this.Lc = [], this.na = !1, this.Va = 1e3, this.td = 3e5, 
        this.Hb = b, this.Kc = c, this.ue = d, this.M = a, this.pb = this.Ia = this.Db = this.ze = null, 
        this.Vd = e, this.de = !1, this.ke = 0, f) throw Error("Auth override specified in options, but not supported on non Node.js platforms");
        this.Je = f || null, this.vb = null, this.Nb = !1, this.Gd = {}, this.tg = 0, this.Ve = !0, 
        this.Bc = this.me = null, Gg(this, 0), He.Wb().hc("visible", this.jg, this), -1 === a.host.indexOf("fblocal") && Re.Wb().hc("online", this.ig, this);
    }
    function Ig(a, b) {
        var c = b.pg, d = c.path.toString(), e = c.ka();
        a.f("Listen on " + d + " for " + e);
        var f = {
            p: d
        };
        b.tag && (f.q = yf(c.n), f.t = b.tag), f.h = b.ld(), a.va("q", f, function(f) {
            var k = f.d, m = f.s;
            if (k && "object" == typeof k && Hb(k, "w")) {
                var l = A(k, "w");
                da(l) && 0 <= Fa(l, "no_index") && L('Using an unspecified index. Consider adding ".indexOn": "' + c.n.g.toString() + '" at ' + c.path.toString() + " to your security rules for better performance");
            }
            (a.aa[d] && a.aa[d][e]) === b && (a.f("listen response", f), "ok" !== m && Jg(a, d, e), 
            b.G && b.G(m, k));
        });
    }
    function Kg(a) {
        if (a.na && a.pb) {
            var b = a.pb, c = kd(b) ? "auth" : "gauth", d = {
                cred: b
            };
            a.Je && (d.authvar = a.Je), a.va(c, d, function(c) {
                var d = c.s;
                c = c.d || "error", a.pb === b && ("ok" === d ? this.ke = 0 : Lg(a, d, c));
            });
        }
    }
    function Mg(a, b, c, d, e) {
        c = {
            p: c,
            d: d
        }, a.f("onDisconnect " + b, c), a.va(b, c, function(a) {
            e && setTimeout(function() {
                e(a.s, a.d);
            }, Math.floor(0));
        });
    }
    function Ng(a, b, c, d, e, f) {
        d = {
            p: c,
            d: d
        }, p(f) && (d.h = f), a.qa.push({
            action: b,
            sf: d,
            G: e
        }), a.Pc++, b = a.qa.length - 1, a.na ? Og(a, b) : a.f("Buffering put: " + c);
    }
    function Og(a, b) {
        var c = a.qa[b].action, d = a.qa[b].sf, e = a.qa[b].G;
        a.qa[b].qg = a.na, a.va(c, d, function(d) {
            a.f(c + " response", d), delete a.qa[b], a.Pc--, 0 === a.Pc && (a.qa = []), e && e(d.s, d.d);
        });
    }
    function Gg(a, b) {
        E(!a.Ia, "Scheduling a connect when we're already connected/ing?"), a.vb && clearTimeout(a.vb), 
        a.vb = setTimeout(function() {
            a.vb = null, Rg(a);
        }, Math.floor(b));
    }
    function Rg(a) {
        if (Sg(a)) {
            a.f("Making a connection attempt"), a.me = new Date().getTime(), a.Bc = null;
            var b = r(a.wd, a), c = r(a.Mc, a), d = r(a.jf, a), e = a.id + ":" + Hg++, f = a.Db, h = !1, k = null, m = function() {
                k ? k.close() : (h = !0, d());
            };
            a.Ia = {
                close: m,
                va: function(a) {
                    E(k, "sendRequest call when we're not connected not allowed."), k.va(a);
                }
            };
            var l = a.de;
            a.de = !1, a.Vd.getToken(l).then(function(l) {
                h ? I("getToken() completed but was canceled") : (I("getToken() completed. Creating connection."), 
                a.pb = l && l.accessToken, k = new sg(e, a.M, b, c, d, function(b) {
                    L(b + " (" + a.M.toString() + ")"), a.eb("server_kill");
                }, f));
            }).then(null, function(b) {
                a.f("Failed to get token: " + b), h || m();
            });
        }
    }
    function Pg(a, b, c) {
        (a = Jg(a, b, c = c ? Ia(c, function(a) {
            return dd(a);
        }).join("$") : "default")) && a.G && a.G("permission_denied");
    }
    function Jg(a, b, c) {
        b = new M(b).toString();
        var d;
        return p(a.aa[b]) ? (d = a.aa[b][c], delete a.aa[b][c], 0 === na(a.aa[b]) && delete a.aa[b]) : d = void 0, 
        d;
    }
    function Lg(a, b, c) {
        I("Auth token revoked: " + b + "/" + c), a.pb = null, a.de = !0, a.Ia.close(), "invalid_token" === b && (a.ke++, 
        3 <= a.ke && (a.Va = 3e4, L("Provided authentication credentials are invalid. This usually indicates your FirebaseApp instance was not initialized correctly. Make sure your apiKey and databaseURL match the values provided for your app at https://console.firebase.google.com/, or if you're using a service account, make sure it's authorized to access the specified databaseURL and is from the correct project.")));
    }
    function Qg(a) {
        Kg(a), t(a.aa, function(b) {
            t(b, function(b) {
                Ig(a, b);
            });
        });
        for (var b = 0; b < a.qa.length; b++) a.qa[b] && Og(a, b);
        for (;a.Lc.length; ) b = a.Lc.shift(), Mg(a, b.action, b.we, b.data, b.G);
    }
    function Sg(a) {
        var b;
        return b = Re.Wb().ic, ua(a.qd) && b;
    }
    function Tg(a) {
        this.X = a;
    }
    function Vg(a, b, c) {
        if (b.e()) return new Tg(new qe(c));
        if (null != (d = ue(a.X, b))) {
            var e = d.path, d = d.value;
            return b = R(e, b), d = d.F(b, c), new Tg(a.X.set(e, d));
        }
        return a = Nd(a.X, b, new qe(c)), new Tg(a);
    }
    function Wg(a, b, c) {
        var d = a;
        return Ib(c, function(a, c) {
            d = Vg(d, b.m(a), c);
        }), d;
    }
    function Xg(a, b) {
        var c = ue(a.X, b);
        return null != c ? a.X.get(c.path).Q(R(c.path, b)) : null;
    }
    function Yg(a) {
        var b = [], c = a.X.value;
        return null != c ? c.J() || c.P(N, function(a, c) {
            b.push(new O(a, c));
        }) : a.X.children.ia(function(a, c) {
            null != c.value && b.push(new O(a, c.value));
        }), b;
    }
    function Zg(a, b) {
        if (b.e()) return a;
        var c = Xg(a, b);
        return new Tg(null != c ? new qe(c) : a.X.subtree(b));
    }
    function $g(a, b, c) {
        if (null != b.value) return c.F(a, b.value);
        var d = null;
        return b.children.ia(function(b, f) {
            ".priority" === b ? (E(null !== f.value, "Priority writes must always be leaf nodes"), 
            d = f.value) : c = $g(a.m(b), f, c);
        }), c.Q(a).e() || null === d || (c = c.F(a.m(".priority"), d)), c;
    }
    function ah() {
        this.T = Ug, this.ma = [], this.Cc = -1;
    }
    function bh(a, b) {
        for (var c = 0; c < a.ma.length; c++) {
            var d = a.ma[c];
            if (d.Zc === b) return d;
        }
        return null;
    }
    function ch(a, b) {
        return a.Ja ? a.path.contains(b) : !!sa(a.children, function(c, d) {
            return a.path.m(d).contains(b);
        });
    }
    function eh(a) {
        return a.visible;
    }
    function dh(a, b, c) {
        for (var d = Ug, e = 0; e < a.length; ++e) {
            var f = a[e];
            if (b(f)) {
                var h = f.path;
                if (f.Ja) c.contains(h) ? (h = R(c, h), d = Vg(d, h, f.Ja)) : h.contains(c) && (h = R(h, c), 
                d = Vg(d, C, f.Ja.Q(h))); else {
                    if (!f.children) throw Pc("WriteRecord should have .snap or .children");
                    c.contains(h) ? (h = R(c, h), d = Wg(d, h, f.children)) : h.contains(c) && ((h = R(h, c)).e() ? d = Wg(d, C, f.children) : (f = A(f.children, J(h))) && (f = f.Q(D(h)), 
                    d = Vg(d, C, f)));
                }
            }
        }
        return d;
    }
    function fh(a, b) {
        this.Mb = a, this.X = b;
    }
    function Me() {
        this.k = this.B = null;
    }
    function Oe(a, b, c) {
        if (b.e()) a.B = c, a.k = null; else if (null !== a.B) a.B = a.B.F(b, c); else {
            null == a.k && (a.k = new Ie());
            var d = J(b);
            a.k.contains(d) || a.k.add(d, new Me()), Oe(a = a.k.get(d), b = D(b), c);
        }
    }
    function gh(a, b) {
        if (b.e()) return a.B = null, a.k = null, !0;
        if (null !== a.B) {
            if (a.B.J()) return !1;
            var c = a.B;
            return a.B = null, c.P(N, function(b, c) {
                Oe(a, new M(b), c);
            }), gh(a, b);
        }
        return null === a.k || (c = J(b), b = D(b), a.k.contains(c) && gh(a.k.get(c), b) && a.k.remove(c), 
        !!a.k.e() && (a.k = null, !0));
    }
    function Ne(a, b, c) {
        null !== a.B ? c(b, a.B) : a.P(function(a, e) {
            Ne(e, new M(b.toString() + "/" + a), c);
        });
    }
    function U(a, b) {
        this.ua = a, this.ra = b;
    }
    function V(a, b, c) {
        this.A = a, this.W = b, this.g = c;
    }
    function kh(a, b, c) {
        this.Qb = a, this.sb = b, this.ub = c || null;
    }
    function lh(a, b, c) {
        this.ha = a, this.sb = b, this.ub = c;
    }
    function mh() {
        this.Aa = {};
    }
    function oh(a) {
        return Ha(pa(a.Aa), function(a) {
            return !T(a.W.n);
        });
    }
    function ph(a, b) {
        if (T(b.n)) return nh(a);
        var c = b.ka();
        return A(a.Aa, c);
    }
    function nh(a) {
        return ta(a.Aa, function(a) {
            return T(a.W.n);
        }) || null;
    }
    function qh(a) {
        this.xa = Q, this.lb = new ah(), this.De = {}, this.jc = {}, this.Dc = a;
    }
    function rh(a, b, c, d, e) {
        var f = a.lb, h = e;
        return E(d > f.Cc, "Stacking an older write on top of newer ones"), p(h) || (h = !0), 
        f.ma.push({
            path: b,
            Ja: c,
            Zc: d,
            visible: h
        }), h && (f.T = Vg(f.T, b, c)), f.Cc = d, e ? sh(a, new ac(Ee, b, c)) : [];
    }
    function th(a, b, c, d) {
        var e = a.lb;
        return E(d > e.Cc, "Stacking an older merge on top of newer ones"), e.ma.push({
            path: b,
            children: c,
            Zc: d,
            visible: !0
        }), e.T = Wg(e.T, b, c), e.Cc = d, c = se(c), sh(a, new md(Ee, b, c));
    }
    function uh(a, b, c) {
        c = c || !1;
        var d = bh(a.lb, b);
        if (a.lb.Ed(b)) {
            var e = Q;
            return null != d.Ja ? e = e.set(C, !0) : Ib(d.children, function(a, b) {
                e = e.set(new M(a), b);
            }), sh(a, new De(d.path, e, c));
        }
        return [];
    }
    function vh(a, b, c) {
        return c = se(c), sh(a, new md(Ge, b, c));
    }
    function wh(a, b, c, d) {
        if (null != (d = xh(a, d))) {
            var e = yh(d);
            return d = e.path, e = e.Ib, b = R(d, b), c = new ac(new Fe(!1, !0, e, !0), b, c), 
            zh(a, d, c);
        }
        return [];
    }
    function Ah(a, b, c, d) {
        if (d = xh(a, d)) {
            var e = yh(d);
            return d = e.path, e = e.Ib, b = R(d, b), c = se(c), c = new md(new Fe(!1, !0, e, !0), b, c), 
            zh(a, d, c);
        }
        return [];
    }
    function Eh(a) {
        return ve(a, function(a, c, d) {
            if (c && null != nh(c)) return [ nh(c) ];
            var e = [];
            return c && (e = oh(c)), t(d, function(a) {
                e = e.concat(a);
            }), e;
        });
    }
    function Ih(a, b) {
        for (var c = 0; c < b.length; ++c) if (!T((d = b[c]).n)) {
            var d = Bh(d), e = a.jc[d];
            delete a.jc[d], delete a.De["_" + e];
        }
    }
    function Gh(a) {
        return T(a.n) && !zf(a.n) ? a.xb() : a;
    }
    function Dh(a, b, c) {
        var d = b.path, e = Hh(a, b);
        if (c = Fh(a, c), b = a.Dc.Ae(Gh(b), e, c.ld, c.G), d = a.xa.subtree(d), e) E(null == nh(d.value), "If we're adding a query, it shouldn't be shadowed"); else for (e = ve(d, function(a, b, c) {
            if (!a.e() && b && null != nh(b)) return [ Lf(nh(b)) ];
            var d = [];
            return b && (d = d.concat(Ia(oh(b), function(a) {
                return a.W;
            }))), t(c, function(a) {
                d = d.concat(a);
            }), d;
        }), d = 0; d < e.length; ++d) c = e[d], a.Dc.Od(Gh(c), Hh(a, c));
        return b;
    }
    function Fh(a, b) {
        var c = b.W, d = Hh(a, c);
        return {
            ld: function() {
                return (b.w() || F).hash();
            },
            G: function(b) {
                if ("ok" === b) {
                    if (d) {
                        var f = c.path;
                        if (b = xh(a, d)) {
                            var h = yh(b);
                            b = h.path, h = h.Ib, f = R(b, f), f = new Zb(new Fe(!1, !0, h, !0), f), b = zh(a, b, f);
                        } else b = [];
                    } else b = sh(a, new Zb(Ge, c.path));
                    return b;
                }
                return f = "Unknown Error", "too_big" === b ? f = "The data requested exceeds the maximum size that can be accessed with a single request." : "permission_denied" == b ? f = "Client doesn't have permission to access the desired data." : "unavailable" == b && (f = "The service is unavailable"), 
                f = Error(b + " at " + c.path.toString() + ": " + f), f.code = b.toUpperCase(), 
                a.mb(c, null, f);
            }
        };
    }
    function Bh(a) {
        return a.path.toString() + "$" + a.ka();
    }
    function yh(a) {
        var b = a.indexOf("$");
        return E(-1 !== b && b < a.length - 1, "Bad queryKey."), {
            Ib: a.substr(b + 1),
            path: new M(a.substr(0, b))
        };
    }
    function xh(a, b) {
        var c = a.De, d = "_" + b;
        return d in c ? c[d] : void 0;
    }
    function Hh(a, b) {
        var c = Bh(b);
        return A(a.jc, c);
    }
    function zh(a, b, c) {
        var d = a.xa.get(b);
        return E(d, "Missing sync point for query tag that we're tracking"), d.gb(c, new fh(b, a.lb), null);
    }
    function sh(a, b) {
        return Jh(a, b, a.xa, null, new fh(C, a.lb));
    }
    function Jh(a, b, c, d, e) {
        if (b.path.e()) return Kh(a, b, c, d, e);
        var f = c.get(C);
        null == d && null != f && (d = f.jb(C));
        var h = [], k = J(b.path), m = b.Nc(k);
        if ((c = c.children.get(k)) && m) var l = d ? d.R(k) : null, k = e.m(k), h = h.concat(Jh(a, m, c, l, k));
        return f && (h = h.concat(f.gb(b, e, d))), h;
    }
    function Kh(a, b, c, d, e) {
        var f = c.get(C);
        null == d && null != f && (d = f.jb(C));
        var h = [];
        return c.children.ia(function(c, f) {
            var l = d ? d.R(c) : null, u = e.m(c), z = b.Nc(c);
            z && (h = h.concat(Kh(a, z, f, l, u)));
        }), f && (h = h.concat(f.gb(b, e, d))), h;
    }
    function X(a, b, c, d) {
        this.u = a, this.path = b, this.n = c, this.Oc = d;
    }
    function Lh(a) {
        var b = null, c = null;
        if (a.la && (b = sd(a)), a.oa && (c = ud(a)), a.g === Od) {
            if (a.la) {
                if ("[MIN_NAME]" != rd(a)) throw Error("Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().");
                if ("string" != typeof b) throw Error("Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.");
            }
            if (a.oa) {
                if ("[MAX_NAME]" != td(a)) throw Error("Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().");
                if ("string" != typeof c) throw Error("Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.");
            }
        } else if (a.g === N) {
            if (null != b && !Xd(b) || null != c && !Xd(c)) throw Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).");
        } else if (E(a.g instanceof We || a.g === bf, "unknown index type."), null != b && "object" == typeof b || null != c && "object" == typeof c) throw Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.");
    }
    function Mh(a) {
        if (a.la && a.oa && a.ya && (!a.ya || "" === a.oc)) throw Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.");
    }
    function Nh(a, b) {
        if (!0 === a.Oc) throw Error(b + ": You can't combine multiple orderBy calls.");
    }
    function Oh(a, b, c) {
        var d = {
            cancel: null,
            Pa: null
        };
        if (b && c) d.cancel = b, y(a, 3, d.cancel, !0), d.Pa = c, Cb(a, 4, d.Pa); else if (b) if ("object" == typeof b && null !== b) d.Pa = b; else {
            if ("function" != typeof b) throw Error(Bb(a, 3, !0) + " must either be a cancel callback or a context object.");
            d.cancel = b;
        }
        return d;
    }
    function Qh(a) {
        a instanceof Rh || Xc("Don't call new Database() directly - please use firebase.database()."), 
        this.ua = a, this.ca = new W(a, C), this.INTERNAL = new Sh(this);
    }
    function Uh(a, b) {
        null === a.ua && Xc("Cannot call " + b + " on a deleted database.");
    }
    function Sh(a) {
        this.$a = a;
    }
    function Rh(a, b, c) {
        this.app = c;
        var d = new Rf(c);
        if (this.M = a, this.Xa = Zf(a), this.Vc = null, this.da = new qc(), this.vd = 1, 
        this.Ua = null, b || 0 <= ("object" == typeof window && window.navigator && window.navigator.userAgent || "").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)) this.wa = new Of(this.M, r(this.Hb, this), d), 
        setTimeout(r(this.Kc, this, !0), 0); else {
            if (null !== (b = c.options.databaseAuthVariableOverride || null)) {
                if ("object" !== ca(b)) throw Error("Only objects are supported for option databaseAuthVariableOverride");
                try {
                    B(b);
                } catch (e) {
                    throw Error("Invalid authOverride provided: " + e);
                }
            }
            this.wa = this.Ua = new Eg(this.M, r(this.Hb, this), r(this.Kc, this), r(this.ue, this), d, b);
        }
        var f = this;
        Sf(d, function(a) {
            f.wa.qf(a);
        }), this.zg = $f(a, r(function() {
            return new Wf(this.Xa, this.wa);
        }, this)), this.nc = new ie(), this.ie = new fc(), this.pd = new qh({
            Ae: function(a, b, c, d) {
                return b = [], (c = f.ie.j(a.path)).e() || (b = sh(f.pd, new ac(Ge, a.path, c)), 
                setTimeout(function() {
                    d("ok");
                }, 0)), b;
            },
            Od: aa
        }), Wh(this, "connected", !1), this.ja = new Me(), this.$a = new Qh(this), this.ed = 0, 
        this.je = null, this.K = new qh({
            Ae: function(a, b, c, d) {
                return f.wa.df(a, c, b, function(b, c) {
                    var e = d(b, c);
                    vc(f.da, a.path, e);
                }), [];
            },
            Od: function(a, b) {
                f.wa.Ef(a, b);
            }
        });
    }
    function Xh(a) {
        return a = a.ie.j(new M(".info/serverTimeOffset")).H() || 0, new Date().getTime() + a;
    }
    function Yh(a) {
        return a = a = {
            timestamp: Xh(a)
        }, a.timestamp = a.timestamp || new Date().getTime(), a;
    }
    function Wh(a, b, c) {
        b = new M("/.info/" + b), c = S(c);
        var d = a.ie;
        d.Jd = d.Jd.F(b, c), c = sh(a.pd, new ac(Ge, b, c)), vc(a.da, b, c);
    }
    function $h(a) {
        a.f("onDisconnectEvents");
        var b = Yh(a), c = [];
        Ne(Le(a.ja, b), C, function(b, e) {
            c = c.concat(sh(a.K, new ac(Ge, b, e)));
            var f = bi(a, b);
            Zh(a, f);
        }), a.ja = new Me(), vc(a.da, C, c);
    }
    function hh(a, b, c, d) {
        var e = S(c);
        a.wa.re(b.toString(), e.H(!0), function(c, h) {
            "ok" === c && Oe(a.ja, b, e), ai(d, c, h);
        });
    }
    function ih(a, b, c, d, e) {
        var f = S(c, d);
        a.wa.re(b.toString(), f.H(!0), function(c, d) {
            "ok" === c && Oe(a.ja, b, f), ai(e, c, d);
        });
    }
    function jh(a, b, c, d) {
        var f, e = !0;
        for (f in c) e = !1;
        e ? (I("onDisconnect().update() called with empty data.  Don't do anything."), ai(d, "ok")) : a.wa.gf(b.toString(), c, function(e, f) {
            if ("ok" === e) for (var m in c) {
                var l = S(c[m]);
                Oe(a.ja, b.m(m), l);
            }
            ai(d, e, f);
        });
    }
    function Ph(a, b, c) {
        c = ".info" === J(b.path) ? a.pd.Ob(b, c) : a.K.Ob(b, c), tc(a.da, b.path, c);
    }
    function ai(a, b, c) {
        a && Tb(function() {
            if ("ok" == b) a(null); else {
                var d = (b || "error").toUpperCase(), e = d;
                c && (e += ": " + c), (e = Error(e)).code = d, a(e);
            }
        });
    }
    function ci(a, b, c, d, e) {
        function f() {}
        a.f("transaction on " + b);
        var h = new W(a, b);
        if (h.hc("value", f), c = {
            path: b,
            update: c,
            G: d,
            status: null,
            lf: Oc(),
            Ie: e,
            wf: 0,
            Rd: function() {
                h.Jc("value", f);
            },
            Td: null,
            Da: null,
            bd: null,
            cd: null,
            dd: null
        }, d = a.K.Ba(b, void 0) || F, c.bd = d, d = c.update(d.H()), p(d)) {
            Zd("transaction failed: Data returned ", d, c.path), c.status = 1;
            var k = (e = je(a.nc, b)).Ea() || [];
            k.push(c), ke(e, k), "object" == typeof d && null !== d && Hb(d, ".priority") ? (k = A(d, ".priority"), 
            E(Xd(k), "Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")) : k = (a.K.Ba(b) || F).C().H(), 
            e = Yh(a), e = Pe(d = S(d, k), e), c.cd = d, c.dd = e, c.Da = a.vd++, c = rh(a.K, b, e, c.Da, c.Ie), 
            vc(a.da, b, c), di(a);
        } else c.Rd(), c.cd = null, c.dd = null, c.G && (a = new V(c.bd, new W(a, c.path), N), 
        c.G(null, !1, a));
    }
    function di(a, b) {
        var c = b || a.nc;
        if (b || ei(a, c), null !== c.Ea()) {
            var d = fi(a, c);
            E(0 < d.length, "Sending zero length transaction queue"), Ka(d, function(a) {
                return 1 === a.status;
            }) && gi(a, c.path(), d);
        } else c.kd() && c.P(function(b) {
            di(a, b);
        });
    }
    function gi(a, b, c) {
        for (var d = Ia(c, function(a) {
            return a.Da;
        }), d = e = a.K.Ba(b, d) || F, e = e.hash(), f = 0; f < c.length; f++) {
            var h = c[f];
            E(1 === h.status, "tryToSendTransactionQueue_: items in queue should all be run."), 
            h.status = 2, h.wf++;
            var k = R(b, h.path), d = d.F(k, h.cd);
        }
        d = d.H(!0), a.wa.put(b.toString(), d, function(d) {
            a.f("transaction put response", {
                path: b.toString(),
                status: d
            });
            var e = [];
            if ("ok" === d) {
                for (d = [], f = 0; f < c.length; f++) {
                    if (c[f].status = 3, e = e.concat(uh(a.K, c[f].Da)), c[f].G) {
                        var h = c[f].dd, k = new W(a, c[f].path);
                        d.push(r(c[f].G, null, null, !0, new V(h, k, N)));
                    }
                    c[f].Rd();
                }
                for (ei(a, je(a.nc, b)), di(a), vc(a.da, b, e), f = 0; f < d.length; f++) Tb(d[f]);
            } else {
                if ("datastale" === d) for (f = 0; f < c.length; f++) c[f].status = 4 === c[f].status ? 5 : 1; else for (L("transaction at " + b.toString() + " failed: " + d), 
                f = 0; f < c.length; f++) c[f].status = 5, c[f].Td = d;
                Zh(a, b);
            }
        }, e);
    }
    function Zh(a, b) {
        var c = hi(a, b), d = c.path();
        return ii(a, c = fi(a, c), d), d;
    }
    function ii(a, b, c) {
        if (0 !== b.length) {
            for (var d = [], e = [], f = Ha(b, function(a) {
                return 1 === a.status;
            }), f = Ia(f, function(a) {
                return a.Da;
            }), h = 0; h < b.length; h++) {
                var u, k = b[h], m = R(c, k.path), l = !1;
                if (E(null !== m, "rerunTransactionsUnderNode_: relativePath should not be null."), 
                5 === k.status) l = !0, u = k.Td, e = e.concat(uh(a.K, k.Da, !0)); else if (1 === k.status) if (25 <= k.wf) l = !0, 
                u = "maxretry", e = e.concat(uh(a.K, k.Da, !0)); else {
                    var z = a.K.Ba(k.path, f) || F;
                    k.bd = z;
                    var G = b[h].update(z.H());
                    p(G) ? (Zd("transaction failed: Data returned ", G, k.path), m = S(G), "object" == typeof G && null != G && Hb(G, ".priority") || (m = m.ga(z.C())), 
                    z = k.Da, G = Yh(a), G = Pe(m, G), k.cd = m, k.dd = G, k.Da = a.vd++, Na(f, z), 
                    e = e.concat(rh(a.K, k.path, G, k.Da, k.Ie)), e = e.concat(uh(a.K, z, !0))) : (l = !0, 
                    u = "nodata", e = e.concat(uh(a.K, k.Da, !0)));
                }
                vc(a.da, c, e), e = [], l && (b[h].status = 3, setTimeout(b[h].Rd, Math.floor(0)), 
                b[h].G && ("nodata" === u ? (k = new W(a, b[h].path), d.push(r(b[h].G, null, null, !1, new V(b[h].bd, k, N)))) : d.push(r(b[h].G, null, Error(u), !1, null))));
            }
            for (ei(a, a.nc), h = 0; h < d.length; h++) Tb(d[h]);
            di(a);
        }
    }
    function hi(a, b) {
        for (var c, d = a.nc; null !== (c = J(b)) && null === d.Ea(); ) d = je(d, c), b = D(b);
        return d;
    }
    function fi(a, b) {
        var c = [];
        return ji(a, b, c), c.sort(function(a, b) {
            return a.lf - b.lf;
        }), c;
    }
    function ji(a, b, c) {
        var d = b.Ea();
        if (null !== d) for (var e = 0; e < d.length; e++) c.push(d[e]);
        b.P(function(b) {
            ji(a, b, c);
        });
    }
    function ei(a, b) {
        var c = b.Ea();
        if (c) {
            for (var d = 0, e = 0; e < c.length; e++) 3 !== c[e].status && (c[d] = c[e], d++);
            c.length = d, ke(b, 0 < c.length ? c : null);
        }
        b.P(function(b) {
            ei(a, b);
        });
    }
    function bi(a, b) {
        var c = hi(a, b).path(), d = je(a.nc, b);
        return ne(d, function(b) {
            ki(a, b);
        }), ki(a, d), me(d, function(b) {
            ki(a, b);
        }), c;
    }
    function ki(a, b) {
        var c = b.Ea();
        if (null !== c) {
            for (var d = [], e = [], f = -1, h = 0; h < c.length; h++) 4 !== c[h].status && (2 === c[h].status ? (E(f === h - 1, "All SENT items should be at beginning of queue."), 
            f = h, c[h].status = 4, c[h].Td = "set") : (E(1 === c[h].status, "Unexpected transaction status in abort"), 
            c[h].Rd(), e = e.concat(uh(a.K, c[h].Da, !0)), c[h].G && d.push(r(c[h].G, null, Error("set"), !1, null))));
            for (-1 === f ? ke(b, null) : c.length = f + 1, vc(a.da, b.path(), e), h = 0; h < d.length; h++) Tb(d[h]);
        }
    }
    function Vh() {
        this.nb = {}, this.Ff = !1;
    }
    function li(a, b) {
        this.committed = a, this.snapshot = b;
    }
    function W(a, b) {
        if (!(a instanceof Rh)) throw Error("new Firebase() no longer supported - use app.database().");
        X.call(this, a, b, vf, !1), this.then = void 0, this.catch = void 0;
    }
    var g, n = this, Aa = {
        '"': '\\"',
        "\\": "\\\\",
        "/": "\\/",
        "\b": "\\b",
        "\f": "\\f",
        "\n": "\\n",
        "\r": "\\r",
        "\t": "\\t",
        "\v": "\\u000b"
    }, Ba = /\uffff/.test("\uffff") ? /[\\\"\x00-\x1f\x7f-\uffff]/g : /[\\\"\x00-\x1f\x7f-\xff]/g, v;
    a: {
        var Ca = n.navigator;
        if (Ca) {
            var Da = Ca.userAgent;
            if (Da) {
                v = Da;
                break a;
            }
        }
        v = "";
    }
    ka(Ea, Error), Ea.prototype.name = "CustomError";
    var w = Array.prototype, Fa = w.indexOf ? function(a, b, c) {
        return w.indexOf.call(a, b, c);
    } : function(a, b, c) {
        if (c = null == c ? 0 : 0 > c ? Math.max(0, a.length + c) : c, q(a)) return q(b) && 1 == b.length ? a.indexOf(b, c) : -1;
        for (;c < a.length; c++) if (c in a && a[c] === b) return c;
        return -1;
    }, Ga = w.forEach ? function(a, b, c) {
        w.forEach.call(a, b, c);
    } : function(a, b, c) {
        for (var d = a.length, e = q(a) ? a.split("") : a, f = 0; f < d; f++) f in e && b.call(c, e[f], f, a);
    }, Ha = w.filter ? function(a, b, c) {
        return w.filter.call(a, b, c);
    } : function(a, b, c) {
        for (var d = a.length, e = [], f = 0, h = q(a) ? a.split("") : a, k = 0; k < d; k++) if (k in h) {
            var m = h[k];
            b.call(c, m, k, a) && (e[f++] = m);
        }
        return e;
    }, Ia = w.map ? function(a, b, c) {
        return w.map.call(a, b, c);
    } : function(a, b, c) {
        for (var d = a.length, e = Array(d), f = q(a) ? a.split("") : a, h = 0; h < d; h++) h in f && (e[h] = b.call(c, f[h], h, a));
        return e;
    }, Ja = w.reduce ? function(a, b, c, d) {
        for (var e = [], f = 1, h = arguments.length; f < h; f++) e.push(arguments[f]);
        return d && (e[0] = r(b, d)), w.reduce.apply(a, e);
    } : function(a, b, c, d) {
        var e = c;
        return Ga(a, function(c, h) {
            e = b.call(d, e, c, h, a);
        }), e;
    }, Ka = w.every ? function(a, b, c) {
        return w.every.call(a, b, c);
    } : function(a, b, c) {
        for (var d = a.length, e = q(a) ? a.split("") : a, f = 0; f < d; f++) if (f in e && !b.call(c, e[f], f, a)) return !1;
        return !0;
    }, Ra = -1 != v.indexOf("Opera") || -1 != v.indexOf("OPR"), Sa = -1 != v.indexOf("Trident") || -1 != v.indexOf("MSIE"), Ta = -1 != v.indexOf("Gecko") && -1 == v.toLowerCase().indexOf("webkit") && !(-1 != v.indexOf("Trident") || -1 != v.indexOf("MSIE")), Ua = -1 != v.toLowerCase().indexOf("webkit");
    !function() {
        var b, a = "";
        Ra && n.opera ? (a = n.opera.version, ga(a) && a()) : (Ta ? b = /rv\:([^\);]+)(\)|;)/ : Sa ? b = /\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/ : Ua && (b = /WebKit\/(\S+)/), 
        b && (a = (a = b.exec(v)) ? a[1] : ""), Sa && (b = (b = n.document) ? b.documentMode : void 0) > parseFloat(a) && String(b));
    }();
    var Wa, Za, ab = !1, bb = [];
    [].push(function() {
        ab = !1, bb = [];
    });
    var fb = 0, ib = 2, kb = 3;
    eb.prototype.then = function(a, b, c) {
        return lb(this, ga(a) ? a : null, ga(b) ? b : null, c);
    }, eb.prototype.then = eb.prototype.then, eb.prototype.$goog_Thenable = !0, g = eb.prototype, 
    g.Ag = function(a, b) {
        return lb(this, null, a, b);
    }, g.cancel = function(a) {
        this.L == fb && Ya(function() {
            mb(this, new jb(a));
        }, this);
    }, g.Cf = function(a) {
        this.L = fb, hb(this, ib, a);
    }, g.Df = function(a) {
        this.L = fb, hb(this, kb, a);
    }, g.Uf = function() {
        for (;this.Ca && this.Ca.length; ) {
            var a = this.Ca;
            this.Ca = null;
            for (var b = 0; b < a.length; b++) nb(this, a[b], this.L, this.uf);
        }
        this.be = !1;
    };
    var sb = Va;
    ka(jb, Ea), jb.prototype.name = "cancel";
    var tb = null, ub = null, vb = null;
    ka(zb, yb), zb.prototype.reset = function() {
        this.N[0] = 1732584193, this.N[1] = 4023233417, this.N[2] = 2562383102, this.N[3] = 271733878, 
        this.N[4] = 3285377520, this.Pd = this.ac = 0;
    }, zb.prototype.update = function(a, b) {
        if (null != a) {
            p(b) || (b = a.length);
            for (var c = b - this.Ya, d = 0, e = this.Wd, f = this.ac; d < b; ) {
                if (0 == f) for (;d <= c; ) Ab(this, a, d), d += this.Ya;
                if (q(a)) {
                    for (;d < b; ) if (e[f] = a.charCodeAt(d), ++f, ++d, f == this.Ya) {
                        Ab(this, e), f = 0;
                        break;
                    }
                } else for (;d < b; ) if (e[f] = a[d], ++f, ++d, f == this.Ya) {
                    Ab(this, e), f = 0;
                    break;
                }
            }
            this.ac = f, this.Pd += b;
        }
    };
    var Db = n.Promise || eb;
    eb.prototype.catch = eb.prototype.Ag, Ub.prototype.set = function(a, b) {
        null == b ? delete this.qc[a] : this.qc[a] = b;
    }, Ub.prototype.get = function(a) {
        return Hb(this.qc, a) ? this.qc[a] : null;
    }, Ub.prototype.remove = function(a) {
        delete this.qc[a];
    }, Ub.prototype.cf = !0, g = Vb.prototype, g.set = function(a, b) {
        null == b ? this.vc.removeItem(this.Cd + a) : this.vc.setItem(this.Cd + a, B(b));
    }, g.get = function(a) {
        return null == (a = this.vc.getItem(this.Cd + a)) ? null : Kb(a);
    }, g.remove = function(a) {
        this.vc.removeItem(this.Cd + a);
    }, g.cf = !1, g.toString = function() {
        return this.vc.toString();
    };
    var Xb = Wb("localStorage"), Yb = Wb("sessionStorage");
    Zb.prototype.Nc = function() {
        return this.path.e() ? new Zb(this.source, C) : new Zb(this.source, D(this.path));
    }, Zb.prototype.toString = function() {
        return "Operation(" + this.path + ": " + this.source.toString() + " listen_complete)";
    }, ac.prototype.Nc = function(a) {
        return this.path.e() ? new ac(this.source, C, this.Ja.R(a)) : new ac(this.source, D(this.path), this.Ja);
    }, ac.prototype.toString = function() {
        return "Operation(" + this.path + ": " + this.source.toString() + " overwrite: " + this.Ja.toString() + ")";
    }, cc.prototype.toString = function() {
        var a = (this.Sc ? "https://" : "http://") + this.host;
        return this.nf && (a += "<" + this.nf + ">"), a;
    }, fc.prototype.j = function(a) {
        return this.Jd.Q(a);
    }, fc.prototype.toString = function() {
        return this.Jd.toString();
    };
    var hc = "value";
    ic.prototype.Zb = function() {
        var a = this.Md.xb();
        return "value" === this.gd ? a.path : a.getParent().path;
    }, ic.prototype.ge = function() {
        return this.gd;
    }, ic.prototype.Ub = function() {
        return this.ae.Ub(this);
    }, ic.prototype.toString = function() {
        return this.Zb().toString() + ":" + this.gd + ":" + B(this.Md.Ue());
    }, jc.prototype.Zb = function() {
        return this.path;
    }, jc.prototype.ge = function() {
        return "cancel";
    }, jc.prototype.Ub = function() {
        return this.ae.Ub(this);
    }, jc.prototype.toString = function() {
        return this.path.toString() + ":cancel";
    }, kc.prototype.Xe = function() {
        return null;
    }, kc.prototype.fe = function() {
        return null;
    };
    var lc = new kc();
    mc.prototype.Xe = function(a) {
        var b = this.Na.O;
        return nc(b, a) ? b.j().R(a) : (b = null != this.yd ? new oc(this.yd, !0, !1) : this.Na.w(), 
        this.Gf.rc(a, b));
    }, mc.prototype.fe = function(a, b, c) {
        var d = null != this.yd ? this.yd : pc(this.Na);
        return 0 === (a = this.Gf.Xd(d, b, 1, c, a)).length ? null : a[0];
    }, sc.prototype.add = function(a) {
        this.hd.push(a);
    }, sc.prototype.Zb = function() {
        return this.ra;
    }, oc.prototype.j = function() {
        return this.A;
    }, g = Ac.prototype, g.Ra = function(a, b) {
        return new Ac(this.Oa, this.ca.Ra(a, b, this.Oa).Y(null, null, !1, null, null));
    }, g.remove = function(a) {
        return new Ac(this.Oa, this.ca.remove(a, this.Oa).Y(null, null, !1, null, null));
    }, g.get = function(a) {
        for (var b, c = this.ca; !c.e(); ) {
            if (0 === (b = this.Oa(a, c.key))) return c.value;
            0 > b ? c = c.left : 0 < b && (c = c.right);
        }
        return null;
    }, g.e = function() {
        return this.ca.e();
    }, g.count = function() {
        return this.ca.count();
    }, g.Hc = function() {
        return this.ca.Hc();
    }, g.fc = function() {
        return this.ca.fc();
    }, g.ia = function(a) {
        return this.ca.ia(a);
    }, g.Xb = function(a) {
        return new Dc(this.ca, null, this.Oa, !1, a);
    }, g.Yb = function(a, b) {
        return new Dc(this.ca, a, this.Oa, !1, b);
    }, g.$b = function(a, b) {
        return new Dc(this.ca, a, this.Oa, !0, b);
    }, g.$e = function(a) {
        return new Dc(this.ca, null, this.Oa, !0, a);
    }, g = Fc.prototype, g.Y = function(a, b, c, d, e) {
        return new Fc(null != a ? a : this.key, null != b ? b : this.value, null != c ? c : this.color, null != d ? d : this.left, null != e ? e : this.right);
    }, g.count = function() {
        return this.left.count() + 1 + this.right.count();
    }, g.e = function() {
        return !1;
    }, g.ia = function(a) {
        return this.left.ia(a) || a(this.key, this.value) || this.right.ia(a);
    }, g.Hc = function() {
        return Gc(this).key;
    }, g.fc = function() {
        return this.right.e() ? this.key : this.right.fc();
    }, g.Ra = function(a, b, c) {
        var d, e;
        return e = this, d = c(a, e.key), e = 0 > d ? e.Y(null, null, null, e.left.Ra(a, b, c), null) : 0 === d ? e.Y(null, b, null, null, null) : e.Y(null, null, null, null, e.right.Ra(a, b, c)), 
        Hc(e);
    }, g.remove = function(a, b) {
        var c, d;
        if (c = this, 0 > b(a, c.key)) c.left.e() || c.left.fa() || c.left.left.fa() || (c = Jc(c)), 
        c = c.Y(null, null, null, c.left.remove(a, b), null); else {
            if (c.left.fa() && (c = Kc(c)), c.right.e() || c.right.fa() || c.right.left.fa() || (c = Lc(c)).left.left.fa() && (c = Kc(c), 
            c = Lc(c)), 0 === b(a, c.key)) {
                if (c.right.e()) return Bc;
                d = Gc(c.right), c = c.Y(d.key, d.value, null, null, Ic(c.right));
            }
            c = c.Y(null, null, null, null, c.right.remove(a, b));
        }
        return Hc(c);
    }, g.fa = function() {
        return this.color;
    }, g = Nc.prototype, g.Y = function() {
        return this;
    }, g.Ra = function(a, b) {
        return new Fc(a, b, null);
    }, g.remove = function() {
        return this;
    }, g.count = function() {
        return 0;
    }, g.e = function() {
        return !0;
    }, g.ia = function() {
        return !1;
    }, g.Hc = function() {
        return null;
    }, g.fc = function() {
        return null;
    }, g.fa = function() {
        return !1;
    };
    var Bc = new Nc(), Oc = function() {
        var a = 1;
        return function() {
            return a++;
        };
    }(), E = Lb, Pc = Mb, wc = null, Tc = !0, hd = /^-?\d{1,10}$/;
    md.prototype.Nc = function(a) {
        return this.path.e() ? (a = this.children.subtree(new M(a))).e() ? null : a.value ? new ac(this.source, C, a.value) : new md(this.source, C, a) : (E(J(this.path) === a, "Can't get a merge for a child not on the path of the operation"), 
        new md(this.source, D(this.path), this.children));
    }, md.prototype.toString = function() {
        return "Operation(" + this.path + ": " + this.source.toString() + " merge: " + this.children.toString() + ")";
    }, g = od.prototype, g.F = function(a, b, c, d, e, f) {
        return E(a.zc(this.g), "A node must be indexed if only a child is updated"), (e = a.R(b)).Q(d).$(c.Q(d)) && e.e() == c.e() ? a : (null != f && (c.e() ? a.Fa(b) ? pd(f, new H("child_removed", e, b)) : E(a.J(), "A child remove without an old child only makes sense on a leaf node") : e.e() ? pd(f, new H("child_added", c, b)) : pd(f, new H("child_changed", c, b, e))), 
        a.J() && c.e() ? a : a.U(b, c).ob(this.g));
    }, g.za = function(a, b, c) {
        return null != c && (a.J() || a.P(N, function(a, e) {
            b.Fa(a) || pd(c, new H("child_removed", e, a));
        }), b.J() || b.P(N, function(b, e) {
            if (a.Fa(b)) {
                var f = a.R(b);
                f.$(e) || pd(c, new H("child_changed", e, b, f));
            } else pd(c, new H("child_added", e, b));
        })), b.ob(this.g);
    }, g.ga = function(a, b) {
        return a.e() ? F : a.ga(b);
    }, g.Qa = function() {
        return !1;
    }, g.Vb = function() {
        return this;
    }, g = qd.prototype, g.matches = function(a) {
        return 0 >= this.g.compare(this.Uc, a) && 0 >= this.g.compare(a, this.wc);
    }, g.F = function(a, b, c, d, e, f) {
        return this.matches(new O(b, c)) || (c = F), this.he.F(a, b, c, d, e, f);
    }, g.za = function(a, b, c) {
        b.J() && (b = F);
        var d = (d = b.ob(this.g)).ga(F), e = this;
        return b.P(N, function(a, b) {
            e.matches(new O(a, b)) || (d = d.U(a, F));
        }), this.he.za(a, d, c);
    }, g.ga = function(a) {
        return a;
    }, g.Qa = function() {
        return !0;
    }, g.Vb = function() {
        return this.he;
    }, xd.prototype.gb = function(a, b, c, d) {
        var f, e = new vd();
        if (b.type === bc) b.source.ee ? c = yd(this, a, b.path, b.Ja, c, d, e) : (E(b.source.We, "Unknown source."), 
        f = b.source.Ee || yc(a.w()) && !b.path.e(), c = zd(this, a, b.path, b.Ja, c, d, f, e)); else if (b.type === nd) b.source.ee ? c = Ad(this, a, b.path, b.children, c, d, e) : (E(b.source.We, "Unknown source."), 
        f = b.source.Ee || yc(a.w()), c = Bd(this, a, b.path, b.children, c, d, f, e)); else if (b.type === Dd) if (b.Id) if (b = b.path, 
        null != c.mc(b)) c = a; else {
            if (f = new mc(c, a, d), d = a.O.j(), b.e() || ".priority" === J(b)) xc(a.w()) ? b = c.Ba(pc(a)) : (b = a.w().j(), 
            E(b instanceof P, "serverChildren would be complete if leaf node"), b = c.sc(b)), 
            b = this.V.za(d, b, e); else {
                var h = J(b), k = c.rc(h, a.w());
                null == k && nc(a.w(), h) && (k = d.R(h)), (b = null != k ? this.V.F(d, h, k, D(b), f, e) : a.O.j().Fa(h) ? this.V.F(d, h, F, D(b), f, e) : d).e() && xc(a.w()) && (d = c.Ba(pc(a))).J() && (b = this.V.za(b, d, e));
            }
            c = Ed(a, b, d = xc(a.w()) || null != c.mc(C), this.V.Qa());
        } else c = Fd(this, a, b.path, b.Pb, c, d, e); else {
            if (b.type !== $b) throw Pc("Unknown operation type: " + b.type);
            d = b.path, f = (b = a.w()).j(), h = b.ea || d.e(), c = Gd(this, new Hd(a.O, new oc(f, h, b.Tb)), d, c, lc, e);
        }
        return e = pa(e.hb), d = c, (b = d.O).ea && (f = b.j().J() || b.j().e(), h = Id(a), 
        (0 < e.length || !a.O.ea || f && !b.j().$(h) || !b.j().C().$(h.C())) && e.push(gc(Id(d)))), 
        new wd(c, e);
    };
    var Pd = function() {
        var a = 0, b = [];
        return function(c) {
            var d = c === a;
            a = c;
            for (var e = Array(8), f = 7; 0 <= f; f--) e[f] = "-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz".charAt(c % 64), 
            c = Math.floor(c / 64);
            if (E(0 === c, "Cannot push at time == 0"), c = e.join(""), d) {
                for (f = 11; 0 <= f && 63 === b[f]; f--) b[f] = 0;
                b[f]++;
            } else for (f = 0; 12 > f; f++) b[f] = Math.floor(64 * Math.random());
            for (f = 0; 12 > f; f++) c += "-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz".charAt(b[f]);
            return E(20 === c.length, "nextPushId: Length should be 20."), c;
        };
    }();
    g = M.prototype, g.toString = function() {
        for (var a = "", b = this.Z; b < this.o.length; b++) "" !== this.o[b] && (a += "/" + this.o[b]);
        return a || "/";
    }, g.slice = function(a) {
        return this.o.slice(this.Z + (a || 0));
    }, g.parent = function() {
        if (this.Z >= this.o.length) return null;
        for (var a = [], b = this.Z; b < this.o.length - 1; b++) a.push(this.o[b]);
        return new M(a, 0);
    }, g.m = function(a) {
        for (var b = [], c = this.Z; c < this.o.length; c++) b.push(this.o[c]);
        if (a instanceof M) for (c = a.Z; c < a.o.length; c++) b.push(a.o[c]); else for (a = a.split("/"), 
        c = 0; c < a.length; c++) 0 < a[c].length && b.push(a[c]);
        return new M(b, 0);
    }, g.e = function() {
        return this.Z >= this.o.length;
    }, g.$ = function(a) {
        if (Jd(this) !== Jd(a)) return !1;
        for (var b = this.Z, c = a.Z; b <= this.o.length; b++, c++) if (this.o[b] !== a.o[c]) return !1;
        return !0;
    }, g.contains = function(a) {
        var b = this.Z, c = a.Z;
        if (Jd(this) > Jd(a)) return !1;
        for (;b < this.o.length; ) {
            if (this.o[b] !== a.o[c]) return !1;
            ++b, ++c;
        }
        return !0;
    };
    var C = new M("");
    Rd.prototype.push = function(a) {
        0 < this.Ta.length && (this.Ka += 1), this.Ta.push(a), this.Ka += Ob(a), Sd(this);
    }, Rd.prototype.pop = function() {
        var a = this.Ta.pop();
        this.Ka -= Ob(a), 0 < this.Ta.length && --this.Ka;
    };
    var Ud = /[\[\].#$\/\u0000-\u001F\u007F]/, Vd = /[\[\].#$\u0000-\u001F\u007F]/;
    g = ie.prototype, g.Ea = function() {
        return this.A.value;
    }, g.clear = function() {
        this.A.value = null, this.A.children = {}, this.A.ad = 0, le(this);
    }, g.kd = function() {
        return 0 < this.A.ad;
    }, g.e = function() {
        return null === this.Ea() && !this.kd();
    }, g.P = function(a) {
        var b = this;
        t(this.A.children, function(c, d) {
            a(new ie(d, b, c));
        });
    }, g.path = function() {
        return new M(null === this.Ha ? this.ud : this.Ha.path() + "/" + this.ud);
    }, g.name = function() {
        return this.ud;
    }, g.parent = function() {
        return this.Ha;
    }, oe.prototype.Ge = function(a, b) {
        var c, d = (c = this.Ec[a] || []).length;
        if (0 < d) {
            for (var e = Array(d), f = 0; f < d; f++) e[f] = c[f];
            c = e;
        } else c = [];
        for (d = 0; d < c.length; d++) c[d].Ke.apply(c[d].Pa, Array.prototype.slice.call(arguments, 1));
    }, oe.prototype.hc = function(a, b, c) {
        pe(this, a), this.Ec[a] = this.Ec[a] || [], this.Ec[a].push({
            Ke: b,
            Pa: c
        }), (a = this.Ye(a)) && b.apply(c, a);
    }, oe.prototype.Jc = function(a, b, c) {
        pe(this, a), a = this.Ec[a] || [];
        for (var d = 0; d < a.length; d++) if (a[d].Ke === b && (!c || c === a[d].Pa)) {
            a.splice(d, 1);
            break;
        }
    };
    var re = new Ac(function(a, b) {
        return a === b ? 0 : a < b ? -1 : 1;
    });
    g = qe.prototype, g.e = function() {
        return null === this.value && this.children.e();
    }, g.subtree = function(a) {
        if (a.e()) return this;
        var b = this.children.get(J(a));
        return null !== b ? b.subtree(D(a)) : Q;
    }, g.set = function(a, b) {
        if (a.e()) return new qe(b, this.children);
        var c = J(a), d = (this.children.get(c) || Q).set(D(a), b), c = this.children.Ra(c, d);
        return new qe(this.value, c);
    }, g.remove = function(a) {
        if (a.e()) return this.children.e() ? Q : new qe(null, this.children);
        var b = J(a), c = this.children.get(b);
        return c ? (a = c.remove(D(a)), b = a.e() ? this.children.remove(b) : this.children.Ra(b, a), 
        null === this.value && b.e() ? Q : new qe(this.value, b)) : this;
    }, g.get = function(a) {
        if (a.e()) return this.value;
        var b = this.children.get(J(a));
        return b ? b.get(D(a)) : null;
    };
    var Q = new qe(null);
    qe.prototype.toString = function() {
        var a = {};
        return Ld(this, function(b, c) {
            a[b.toString()] = c.toString();
        }), B(a);
    }, De.prototype.Nc = function(a) {
        return this.path.e() ? null != this.Pb.value ? (E(this.Pb.children.e(), "affectedTree should not have overlapping affected paths."), 
        this) : (a = this.Pb.subtree(new M(a)), new De(C, a, this.Id)) : (E(J(this.path) === a, "operationForChild called for unrelated child."), 
        new De(D(this.path), this.Pb, this.Id));
    }, De.prototype.toString = function() {
        return "Operation(" + this.path + ": " + this.source.toString() + " ack write revert=" + this.Id + " affectedTree=" + this.Pb + ")";
    };
    var bc = 0, nd = 1, Dd = 2, $b = 3, Ee = new Fe(!0, !1, null, !1), Ge = new Fe(!1, !0, null, !1);
    Fe.prototype.toString = function() {
        return this.ee ? "user" : this.Ee ? "server(queryID=" + this.Ib + ")" : "server";
    }, ka(He, oe), He.prototype.Ye = function(a) {
        return E("visible" === a, "Unknown event type: " + a), [ this.Nb ];
    }, ba(He), g = Ie.prototype, g.add = function(a, b) {
        this.set[a] = null === b || b;
    }, g.contains = function(a) {
        return Hb(this.set, a);
    }, g.get = function(a) {
        return this.contains(a) ? this.set[a] : void 0;
    }, g.remove = function(a) {
        delete this.set[a];
    }, g.clear = function() {
        this.set = {};
    }, g.e = function() {
        return ua(this.set);
    }, g.count = function() {
        return na(this.set);
    }, g.keys = function() {
        var a = [];
        return t(this.set, function(b, c) {
            a.push(c);
        }), a;
    }, ka(Re, oe), Re.prototype.Ye = function(a) {
        return E("online" === a, "Unknown event type: " + a), [ this.ic ];
    }, ba(Re);
    var Te = {};
    Se.prototype.nd = function(a, b) {
        return 0 !== this.compare(new O("[MIN_NAME]", a), new O("[MIN_NAME]", b));
    }, Se.prototype.Ic = function() {
        return Ve;
    }, ka(We, Se), g = We.prototype, g.yc = function(a) {
        return !a.Q(this.cc).e();
    }, g.compare = function(a, b) {
        var c = a.S.Q(this.cc), d = b.S.Q(this.cc);
        return 0 === (c = c.tc(d)) ? ad(a.name, b.name) : c;
    }, g.Fc = function(a, b) {
        var c = S(a);
        return new O(b, c = F.F(this.cc, c));
    }, g.Gc = function() {
        return new O("[MAX_NAME]", F.F(this.cc, Xe));
    }, g.toString = function() {
        return this.cc.slice().join("/");
    }, ka(Ye, Se), g = Ye.prototype, g.compare = function(a, b) {
        var c = a.S.C(), d = b.S.C();
        return 0 === (c = c.tc(d)) ? ad(a.name, b.name) : c;
    }, g.yc = function(a) {
        return !a.C().e();
    }, g.nd = function(a, b) {
        return !a.C().$(b.C());
    }, g.Ic = function() {
        return Ve;
    }, g.Gc = function() {
        return new O("[MAX_NAME]", new Qe("[PRIORITY-POST]", Xe));
    }, g.Fc = function(a, b) {
        return new O(b, new Qe("[PRIORITY-POST]", S(a)));
    }, g.toString = function() {
        return ".priority";
    };
    var N = new Ye();
    ka(Ze, Se), g = Ze.prototype, g.compare = function(a, b) {
        return ad(a.name, b.name);
    }, g.yc = function() {
        throw Pc("KeyIndex.isDefinedOn not expected to be called.");
    }, g.nd = function() {
        return !1;
    }, g.Ic = function() {
        return Ve;
    }, g.Gc = function() {
        return new O("[MAX_NAME]", F);
    }, g.Fc = function(a) {
        return E(q(a), "KeyIndex indexValue must always be a string."), new O(a, F);
    }, g.toString = function() {
        return ".key";
    };
    var Od = new Ze();
    ka($e, Se), g = $e.prototype, g.compare = function(a, b) {
        var c = a.S.tc(b.S);
        return 0 === c ? ad(a.name, b.name) : c;
    }, g.yc = function() {
        return !0;
    }, g.nd = function(a, b) {
        return !a.$(b);
    }, g.Ic = function() {
        return Ve;
    }, g.Gc = function() {
        return af;
    }, g.Fc = function(a, b) {
        return new O(b, S(a));
    }, g.toString = function() {
        return ".value";
    };
    var bf = new $e();
    ef.prototype.get = function(a) {
        var b = A(this.od, a);
        if (!b) throw Error("No index defined for " + a);
        return b === Te ? null : b;
    };
    var kf = new ef({
        ".priority": Te
    }, {
        ".priority": N
    });
    g = lf.prototype, g.F = function(a, b, c, d, e, f) {
        return this.ta.matches(new O(b, c)) || (c = F), a.R(b).$(c) ? a : a.Fb() < this.pa ? this.ta.Vb().F(a, b, c, d, e, f) : nf(this, a, b, c, e, f);
    }, g.za = function(a, b, c) {
        var d;
        if (b.J() || b.e()) d = F.ob(this.g); else if (2 * this.pa < b.Fb() && b.zc(this.g)) {
            d = F.ob(this.g), b = this.Jb ? b.$b(this.ta.wc, this.g) : b.Yb(this.ta.Uc, this.g);
            for (e = 0; 0 < b.Sa.length && e < this.pa; ) {
                var f = K(b);
                if (!(this.Jb ? 0 >= this.g.compare(this.ta.Uc, f) : 0 >= this.g.compare(f, this.ta.wc))) break;
                d = d.U(f.name, f.S), e++;
            }
        } else {
            d = (d = b.ob(this.g)).ga(F);
            var k, m, l;
            if (this.Jb) {
                b = d.$e(this.g), k = this.ta.wc, m = this.ta.Uc;
                var u = Ue(this.g);
                l = function(a, b) {
                    return u(b, a);
                };
            } else b = d.Xb(this.g), k = this.ta.Uc, m = this.ta.wc, l = Ue(this.g);
            for (var e = 0, z = !1; 0 < b.Sa.length; ) f = K(b), !z && 0 >= l(k, f) && (z = !0), 
            z && e < this.pa && 0 >= l(f, m) ? e++ : d = d.U(f.name, F);
        }
        return this.ta.Vb().za(a, d, c);
    }, g.ga = function(a) {
        return a;
    }, g.Qa = function() {
        return !0;
    }, g.Vb = function() {
        return this.ta.Vb();
    }, qf.prototype.Of = function(a, b) {
        if (null == a.Za || null == b.Za) throw Pc("Should only compare child_ events.");
        return this.g.compare(new O(a.Za, a.Ma), new O(b.Za, b.Ma));
    };
    var vf = new uf();
    g = uf.prototype, g.ne = function(a) {
        var b = wf(this);
        return b.ya = !0, b.pa = a, b.oc = "l", b;
    }, g.oe = function(a) {
        var b = wf(this);
        return b.ya = !0, b.pa = a, b.oc = "r", b;
    }, g.Nd = function(a, b) {
        var c = wf(this);
        return c.la = !0, p(a) || (a = null), c.ec = a, null != b ? (c.Lb = !0, c.Ab = b) : (c.Lb = !1, 
        c.Ab = ""), c;
    }, g.fd = function(a, b) {
        var c = wf(this);
        return c.oa = !0, p(a) || (a = null), c.bc = a, p(b) ? (c.Sb = !0, c.yb = b) : (c.Hg = !1, 
        c.yb = ""), c;
    }, g.toString = function() {
        return B(yf(this));
    };
    var Cf = [ "object", "boolean", "number", "string" ];
    g = Qe.prototype, g.J = function() {
        return !0;
    }, g.C = function() {
        return this.ba;
    }, g.ga = function(a) {
        return new Qe(this.B, a);
    }, g.R = function(a) {
        return ".priority" === a ? this.ba : F;
    }, g.Q = function(a) {
        return a.e() ? this : ".priority" === J(a) ? this.ba : F;
    }, g.Fa = function() {
        return !1;
    }, g.Ze = function() {
        return null;
    }, g.U = function(a, b) {
        return ".priority" === a ? this.ga(b) : b.e() && ".priority" !== a ? this : F.U(a, b).ga(this.ba);
    }, g.F = function(a, b) {
        var c = J(a);
        return null === c ? b : b.e() && ".priority" !== c ? this : (E(".priority" !== c || 1 === Jd(a), ".priority must be the last token in a path"), 
        this.U(c, F.F(D(a), b)));
    }, g.e = function() {
        return !1;
    }, g.Fb = function() {
        return 0;
    }, g.P = function() {
        return !1;
    }, g.H = function(a) {
        return a && !this.C().e() ? {
            ".value": this.Ea(),
            ".priority": this.C().H()
        } : this.Ea();
    }, g.hash = function() {
        if (null === this.Eb) {
            a = "";
            this.ba.e() || (a += "priority:" + Df(this.ba.H()) + ":");
            var b = typeof this.B, a = a + (b + ":"), a = "number" === b ? a + gd(this.B) : a + this.B;
            this.Eb = Rc(a);
        }
        return this.Eb;
    }, g.Ea = function() {
        return this.B;
    }, g.tc = function(a) {
        if (a === F) return 1;
        if (a instanceof P) return -1;
        E(a.J(), "Unknown node type");
        var b = typeof a.B, c = typeof this.B, d = Fa(Cf, b), e = Fa(Cf, c);
        return E(0 <= d, "Unknown leaf type: " + b), E(0 <= e, "Unknown leaf type: " + c), 
        d === e ? "object" === c ? 0 : this.B < a.B ? -1 : this.B === a.B ? 0 : 1 : e - d;
    }, g.ob = function() {
        return this;
    }, g.zc = function() {
        return !0;
    }, g.$ = function(a) {
        return a === this || !!a.J() && (this.B === a.B && this.ba.$(a.ba));
    }, g.toString = function() {
        return B(this.H(!0));
    }, g = P.prototype, g.J = function() {
        return !1;
    }, g.C = function() {
        return this.ba || F;
    }, g.ga = function(a) {
        return this.k.e() ? this : new P(this.k, a, this.zb);
    }, g.R = function(a) {
        return ".priority" === a ? this.C() : null === (a = this.k.get(a)) ? F : a;
    }, g.Q = function(a) {
        var b = J(a);
        return null === b ? this : this.R(b).Q(D(a));
    }, g.Fa = function(a) {
        return null !== this.k.get(a);
    }, g.U = function(a, b) {
        if (E(b, "We should always be passing snapshot nodes"), ".priority" === a) return this.ga(b);
        var d, e, c = new O(a, b);
        return b.e() ? (d = this.k.remove(a), c = jf(this.zb, c, this.k)) : (d = this.k.Ra(a, b), 
        c = ff(this.zb, c, this.k)), e = d.e() ? F : this.ba, new P(d, e, c);
    }, g.F = function(a, b) {
        var c = J(a);
        if (null === c) return b;
        E(".priority" !== J(a) || 1 === Jd(a), ".priority must be the last token in a path");
        var d = this.R(c).F(D(a), b);
        return this.U(c, d);
    }, g.e = function() {
        return this.k.e();
    }, g.Fb = function() {
        return this.k.count();
    };
    var Ef = /^(0|[1-9]\d*)$/;
    g = P.prototype, g.H = function(a) {
        if (this.e()) return null;
        var b = {}, c = 0, d = 0, e = !0;
        if (this.P(N, function(f, h) {
            b[f] = h.H(a), c++, e && Ef.test(f) ? d = Math.max(d, Number(f)) : e = !1;
        }), !a && e && d < 2 * c) {
            var h, f = [];
            for (h in b) f[h] = b[h];
            return f;
        }
        return a && !this.C().e() && (b[".priority"] = this.C().H()), b;
    }, g.hash = function() {
        if (null === this.Eb) {
            var a = "";
            this.C().e() || (a += "priority:" + Df(this.C().H()) + ":"), this.P(N, function(b, c) {
                var d = c.hash();
                "" !== d && (a += ":" + b + ":" + d);
            }), this.Eb = "" === a ? "" : Rc(a);
        }
        return this.Eb;
    }, g.Ze = function(a, b, c) {
        return (c = Ff(this, c)) ? (a = Cc(c, new O(a, b))) ? a.name : null : Cc(this.k, a);
    }, g.P = function(a, b) {
        var c = Ff(this, a);
        return c ? c.ia(function(a) {
            return b(a.name, a.S);
        }) : this.k.ia(b);
    }, g.Xb = function(a) {
        return this.Yb(a.Ic(), a);
    }, g.Yb = function(a, b) {
        var c = Ff(this, b);
        if (c) return c.Yb(a, function(a) {
            return a;
        });
        for (var d = Ec(c = this.k.Yb(a.name, gf)); null != d && 0 > b.compare(d, a); ) K(c), 
        d = Ec(c);
        return c;
    }, g.$e = function(a) {
        return this.$b(a.Gc(), a);
    }, g.$b = function(a, b) {
        var c = Ff(this, b);
        if (c) return c.$b(a, function(a) {
            return a;
        });
        for (var d = Ec(c = this.k.$b(a.name, gf)); null != d && 0 < b.compare(d, a); ) K(c), 
        d = Ec(c);
        return c;
    }, g.tc = function(a) {
        return this.e() ? a.e() ? 0 : -1 : a.J() || a.e() ? 1 : a === Xe ? -1 : 0;
    }, g.ob = function(a) {
        if (a === Od || ra(this.zb.dc, a.toString())) return this;
        var b = this.zb, c = this.k;
        E(a !== Od, "KeyIndex always exists and isn't meant to be added to the IndexMap.");
        for (var d = [], e = !1, f = K(c = c.Xb(gf)); f; ) e = e || a.yc(f.S), d.push(f), 
        f = K(c);
        return d = e ? hf(d, Ue(a)) : Te, e = a.toString(), c = va(b.dc), c[e] = a, a = va(b.od), 
        a[e] = d, new P(this.k, this.ba, new ef(a, c));
    }, g.zc = function(a) {
        return a === Od || ra(this.zb.dc, a.toString());
    }, g.$ = function(a) {
        if (a === this) return !0;
        if (a.J()) return !1;
        if (this.C().$(a.C()) && this.k.count() === a.k.count()) {
            var b = this.Xb(N);
            a = a.Xb(N);
            for (var c = K(b), d = K(a); c && d; ) {
                if (c.name !== d.name || !c.S.$(d.S)) return !1;
                c = K(b), d = K(a);
            }
            return null === c && null === d;
        }
        return !1;
    }, g.toString = function() {
        return B(this.H(!0));
    };
    var Gf = Math.log(2), F = new P(new Ac(df), null, kf);
    ka(Jf, P), g = Jf.prototype, g.tc = function(a) {
        return a === this ? 0 : 1;
    }, g.$ = function(a) {
        return a === this;
    }, g.C = function() {
        return this;
    }, g.R = function() {
        return F;
    }, g.e = function() {
        return !1;
    };
    var Xe = new Jf(), Ve = new O("[MIN_NAME]", F), af = new O("[MAX_NAME]", Xe);
    Hd.prototype.w = function() {
        return this.Ld;
    }, g = Kf.prototype, g.w = function() {
        return this.Na.w().j();
    }, g.jb = function(a) {
        var b = pc(this.Na);
        return b && (T(this.W.n) || !a.e() && !b.R(J(a)).e()) ? b.Q(a) : null;
    }, g.e = function() {
        return 0 === this.ab.length;
    }, g.Ob = function(a) {
        this.ab.push(a);
    }, g.mb = function(a, b) {
        var c = [];
        if (b) {
            E(null == a, "A cancel should cancel all event registrations.");
            var d = this.W.path;
            Ga(this.ab, function(a) {
                (a = a.Pe(b, d)) && c.push(a);
            });
        }
        if (a) {
            for (var e = [], f = 0; f < this.ab.length; ++f) {
                var h = this.ab[f];
                if (h.matches(a)) {
                    if (a.af()) {
                        e = e.concat(this.ab.slice(f + 1));
                        break;
                    }
                } else e.push(h);
            }
            this.ab = e;
        } else this.ab = [];
        return c;
    }, g.gb = function(a, b, c) {
        a.type === nd && null !== a.source.Ib && (E(pc(this.Na), "We should always have a full cache before handling merges"), 
        E(Id(this.Na), "Missing event cache, even though we have a server cache"));
        var d = this.Na;
        return a = this.of.gb(d, a, b, c), b = this.of, c = a.Sd, E(c.O.j().zc(b.V.g), "Event snap not indexed"), 
        E(c.w().j().zc(b.V.g), "Server snap not indexed"), E(xc(a.Sd.w()) || !xc(d.w()), "Once a server snap is complete, it should never go back"), 
        this.Na = a.Sd, Mf(this, a.Mf, a.Sd.O.j(), null);
    }, g = Of.prototype, g.df = function(a, b, c, d) {
        var e = a.path.toString();
        this.f("Listen called for " + e + " " + a.ka());
        var f = Pf(a, c), h = {};
        this.aa[f] = h, a = Af(a.n);
        var k = this;
        Qf(this, e + ".json", a, function(a, b) {
            var u = b;
            404 === a && (a = u = null), null === a && k.Hb(e, u, !1, c), A(k.aa, f) === h && d(a ? 401 == a ? "permission_denied" : "rest_error:" + a : "ok", null);
        });
    }, g.Ef = function(a, b) {
        var c = Pf(a, b);
        delete this.aa[c];
    }, g.qf = function() {}, g.re = function() {}, g.gf = function() {}, g.xd = function() {}, 
    g.put = function() {}, g.ef = function() {}, g.ye = function() {}, Rf.prototype.getToken = function(a) {
        return this.He.INTERNAL.getToken(a).then(null, function(a) {
            return a && "auth/token-not-initialized" === a.code ? (I("Got auth/token-not-initialized error.  Treating as null token."), 
            null) : Promise.reject(a);
        });
    }, Tf.prototype.get = function() {
        var a = this.Nf.get(), b = va(a);
        if (this.rd) for (var c in this.rd) b[c] -= this.rd[c];
        return this.rd = a, b;
    }, Uf.prototype.get = function() {
        return va(this.uc);
    }, Wf.prototype.rf = function() {
        var d, a = this.Vc.get(), b = {}, c = !1;
        for (d in a) 0 < a[d] && Hb(this.zf, d) && (b[d] = a[d], c = !0);
        c && this.wa.ye(b), setTimeout(r(this.rf, this), Math.floor(6e5 * Math.random()));
    };
    var Xf = {}, Yf = {}, ag = null;
    "undefined" != typeof MozWebSocket ? ag = MozWebSocket : "undefined" != typeof WebSocket && (ag = WebSocket);
    var cg;
    bg.prototype.open = function(a, b) {
        this.kb = b, this.hg = a, this.f("Websocket connecting to " + this.Ne), this.xc = !1, 
        Xb.set("previous_websocket_failure", !0);
        try {
            this.La = new ag(this.Ne);
        } catch (c) {
            this.f("Error instantiating WebSocket.");
            var d = c.message || c.data;
            return d && this.f(d), void this.fb();
        }
        var e = this;
        this.La.onopen = function() {
            e.f("Websocket connected."), e.xc = !0;
        }, this.La.onclose = function() {
            e.f("Websocket connection was disconnected."), e.La = null, e.fb();
        }, this.La.onmessage = function(a) {
            if (null !== e.La) if (a = a.data, e.qb += a.length, Vf(e.Xa, "bytes_received", a.length), 
            dg(e), null !== e.frames) eg(e, a); else {
                a: {
                    if (E(null === e.frames, "We already have a frame buffer"), 6 >= a.length) {
                        var b = Number(a);
                        if (!isNaN(b)) {
                            e.Fe = b, e.frames = [], a = null;
                            break a;
                        }
                    }
                    e.Fe = 1, e.frames = [];
                }
                null !== a && eg(e, a);
            }
        }, this.La.onerror = function(a) {
            e.f("WebSocket error.  Closing connection."), (a = a.message || a.data) && e.f(a), 
            e.fb();
        };
    }, bg.prototype.start = function() {}, bg.isAvailable = function() {
        var a = !1;
        if ("undefined" != typeof navigator && navigator.userAgent) {
            var b = navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);
            b && 1 < b.length && 4.4 > parseFloat(b[1]) && (a = !0);
        }
        return !a && null !== ag && !cg;
    }, bg.responsesRequiredToBeHealthy = 2, bg.healthyTimeout = 3e4, g = bg.prototype, 
    g.sd = function() {
        Xb.remove("previous_websocket_failure");
    }, g.send = function(a) {
        dg(this), a = B(a), this.rb += a.length, Vf(this.Xa, "bytes_sent", a.length), 1 < (a = ed(a, 16384)).length && fg(this, String(a.length));
        for (var b = 0; b < a.length; b++) fg(this, a[b]);
    }, g.Tc = function() {
        this.Bb = !0, this.Ac && (clearInterval(this.Ac), this.Ac = null), this.La && (this.La.close(), 
        this.La = null);
    }, g.fb = function() {
        this.Bb || (this.f("WebSocket is closing itself"), this.Tc(), this.kb && (this.kb(this.xc), 
        this.kb = null));
    }, g.close = function() {
        this.Bb || (this.f("WebSocket is being closed"), this.Tc());
    };
    var hg, ig;
    gg.prototype.open = function(a, b) {
        this.Qe = 0, this.ja = b, this.ff = new Qb(a), this.Bb = !1;
        var c = this;
        this.tb = setTimeout(function() {
            c.f("Timed out trying to connect."), c.fb(), c.tb = null;
        }, Math.floor(3e4)), $c(function() {
            if (!c.Bb) {
                c.Wa = new jg(function(a, b, d, k, m) {
                    if (kg(c, arguments), c.Wa) if (c.tb && (clearTimeout(c.tb), c.tb = null), c.xc = !0, 
                    "start" == a) c.id = b, c.mf = d; else {
                        if ("close" !== a) throw Error("Unrecognized command received: " + a);
                        b ? (c.Wa.Kd = !1, Rb(c.ff, b, function() {
                            c.fb();
                        })) : c.fb();
                    }
                }, function(a, b) {
                    kg(c, arguments), Sb(c.ff, a, b);
                }, function() {
                    c.fb();
                }, c.Yc);
                var a = {
                    start: "t"
                };
                a.ser = Math.floor(1e8 * Math.random()), c.Wa.Qd && (a.cb = c.Wa.Qd), a.v = "5", 
                c.Bf && (a.s = c.Bf), c.Db && (a.ls = c.Db), "undefined" != typeof location && location.href && -1 !== location.href.indexOf("firebaseio.com") && (a.r = "f"), 
                a = c.Yc(a), c.f("Connecting via long-poll to " + a), lg(c.Wa, a, function() {});
            }
        });
    }, gg.prototype.start = function() {
        var a = this.Wa, b = this.mf;
        for (a.fg = this.id, a.gg = b, a.Ud = !0; mg(a); ) ;
        a = this.id, b = this.mf, this.gc = document.createElement("iframe");
        var c = {
            dframe: "t"
        };
        c.id = a, c.pw = b, this.gc.src = this.Yc(c), this.gc.style.display = "none", document.body.appendChild(this.gc);
    }, gg.isAvailable = function() {
        return hg || !ig && "undefined" != typeof document && null != document.createElement && !("object" == typeof window && window.chrome && window.chrome.extension && !/^chrome/.test(window.location.href)) && !("object" == typeof Windows && "object" == typeof Windows.Dg) && !0;
    }, g = gg.prototype, g.sd = function() {}, g.Tc = function() {
        this.Bb = !0, this.Wa && (this.Wa.close(), this.Wa = null), this.gc && (document.body.removeChild(this.gc), 
        this.gc = null), this.tb && (clearTimeout(this.tb), this.tb = null);
    }, g.fb = function() {
        this.Bb || (this.f("Longpoll is closing itself"), this.Tc(), this.ja && (this.ja(this.xc), 
        this.ja = null));
    }, g.close = function() {
        this.Bb || (this.f("Longpoll is being closed."), this.Tc());
    }, g.send = function(a) {
        a = B(a), this.rb += a.length, Vf(this.Xa, "bytes_sent", a.length), a = ed(a = wb(a = Nb(a), !0), 1840);
        for (var b = 0; b < a.length; b++) {
            var c = this.Wa;
            c.Qc.push({
                ug: this.Qe,
                Bg: a.length,
                Se: a[b]
            }), c.Ud && mg(c), this.Qe++;
        }
    }, jg.prototype.close = function() {
        if (this.Ud = !1, this.Ga) {
            this.Ga.ib.body.innerHTML = "";
            var a = this;
            setTimeout(function() {
                null !== a.Ga && (document.body.removeChild(a.Ga), a.Ga = null);
            }, Math.floor(0));
        }
        var b = this.kb;
        b && (this.kb = null, b());
    };
    var qg = [ gg, bg ];
    sg.prototype.va = function(a) {
        Dg(this, {
            t: "d",
            d: a
        });
    }, sg.prototype.wd = function(a) {
        Ag(this), this.te(a);
    }, sg.prototype.close = function() {
        2 !== this.L && (this.f("Closing realtime connection."), this.L = 2, zg(this), this.ja && (this.ja(), 
        this.ja = null));
    };
    var Fg = 0, Hg = 0;
    g = Eg.prototype, g.va = function(a, b, c) {
        var d = ++this.tg;
        a = {
            r: d,
            a: a,
            b: b
        }, this.f(B(a)), E(this.na, "sendRequest call when we're not connected not allowed."), 
        this.Ia.va(a), c && (this.Gd[d] = c);
    }, g.df = function(a, b, c, d) {
        var e = a.ka(), f = a.path.toString();
        this.f("Listen called for " + f + " " + e), this.aa[f] = this.aa[f] || {}, E(zf(a.n) || !T(a.n), "listen() called for non-default but complete query"), 
        E(!this.aa[f][e], "listen() called twice for same path/queryId."), a = {
            G: d,
            ld: b,
            pg: a,
            tag: c
        }, this.aa[f][e] = a, this.na && Ig(this, a);
    }, g.qf = function(a) {
        this.pb = a, this.f("Auth token refreshed"), this.pb ? Kg(this) : this.na && this.va("unauth", {}, function() {}), 
        (a && 40 === a.length || ld(a)) && (this.f("Admin auth credential detected.  Reducing max reconnect time."), 
        this.td = 3e4);
    }, g.Ef = function(a, b) {
        var c = a.path.toString(), d = a.ka();
        if (this.f("Unlisten called for " + c + " " + d), E(zf(a.n) || !T(a.n), "unlisten() called for non-default but complete query"), 
        Jg(this, c, d) && this.na) {
            var e = yf(a.n);
            this.f("Unlisten on " + c + " for " + d), c = {
                p: c
            }, b && (c.q = e, c.t = b), this.va("n", c);
        }
    }, g.re = function(a, b, c) {
        this.na ? Mg(this, "o", a, b, c) : this.Lc.push({
            we: a,
            action: "o",
            data: b,
            G: c
        });
    }, g.gf = function(a, b, c) {
        this.na ? Mg(this, "om", a, b, c) : this.Lc.push({
            we: a,
            action: "om",
            data: b,
            G: c
        });
    }, g.xd = function(a, b) {
        this.na ? Mg(this, "oc", a, null, b) : this.Lc.push({
            we: a,
            action: "oc",
            data: null,
            G: b
        });
    }, g.put = function(a, b, c, d) {
        Ng(this, "p", a, b, c, d);
    }, g.ef = function(a, b, c, d) {
        Ng(this, "m", a, b, c, d);
    }, g.ye = function(a) {
        this.na && (a = {
            c: a
        }, this.f("reportStats", a), this.va("s", a, function(a) {
            "ok" !== a.s && this.f("reportStats", "Error sending stats: " + a.d);
        }));
    }, g.wd = function(a) {
        if ("r" in a) {
            this.f("from server: " + B(a));
            var b = a.r, c = this.Gd[b];
            c && (delete this.Gd[b], c(a.b));
        } else {
            if ("error" in a) throw "A server-side error has occurred: " + a.error;
            "a" in a && (b = a.a, a = a.b, this.f("handleServerMessage", b, a), "d" === b ? this.Hb(a.p, a.d, !1, a.t) : "m" === b ? this.Hb(a.p, a.d, !0, a.t) : "c" === b ? Pg(this, a.p, a.q) : "ac" === b ? Lg(this, a.s, a.d) : "sd" === b ? this.ze ? this.ze(a) : "msg" in a && "undefined" != typeof console && console.log("FIREBASE: " + a.msg.replace("\n", "\nFIREBASE: ")) : Wc("Unrecognized action received from server: " + B(b) + "\nAre you using the latest client?"));
        }
    }, g.Mc = function(a, b) {
        if (this.f("connection ready"), this.na = !0, this.Bc = new Date().getTime(), this.ue({
            serverTimeOffset: a - new Date().getTime()
        }), this.Db = b, this.Ve) {
            var c = {};
            c["sdk.js." + firebase.SDK_VERSION.replace(/\./g, "-")] = 1, Pb() ? c["framework.cordova"] = 1 : "object" == typeof navigator && "ReactNative" === navigator.product && (c["framework.reactnative"] = 1), 
            this.ye(c);
        }
        Qg(this), this.Ve = !1, this.Kc(!0);
    }, g.jg = function(a) {
        a && !this.Nb && this.Va === this.td && (this.f("Window became visible.  Reducing delay."), 
        this.Va = 1e3, this.Ia || Gg(this, 0)), this.Nb = a;
    }, g.ig = function(a) {
        a ? (this.f("Browser went online."), this.Va = 1e3, this.Ia || Gg(this, 0)) : (this.f("Browser went offline.  Killing connection."), 
        this.Ia && this.Ia.close());
    }, g.jf = function() {
        this.f("data client disconnected"), this.na = !1, this.Ia = null;
        for (var a = 0; a < this.qa.length; a++) {
            var b = this.qa[a];
            b && "h" in b.sf && b.qg && (b.G && b.G("disconnect"), delete this.qa[a], this.Pc--);
        }
        0 === this.Pc && (this.qa = []), this.Gd = {}, Sg(this) && (this.Nb ? this.Bc && (3e4 < new Date().getTime() - this.Bc && (this.Va = 1e3), 
        this.Bc = null) : (this.f("Window isn't visible.  Delaying reconnect."), this.Va = this.td, 
        this.me = new Date().getTime()), a = Math.max(0, this.Va - (new Date().getTime() - this.me)), 
        a *= Math.random(), this.f("Trying to reconnect in " + a + "ms"), Gg(this, a), this.Va = Math.min(this.td, 1.3 * this.Va)), 
        this.Kc(!1);
    }, g.eb = function(a) {
        I("Interrupting connection for reason: " + a), this.qd[a] = !0, this.Ia ? this.Ia.close() : (this.vb && (clearTimeout(this.vb), 
        this.vb = null), this.na && this.jf());
    }, g.lc = function(a) {
        I("Resuming connection for reason: " + a), delete this.qd[a], ua(this.qd) && (this.Va = 1e3, 
        this.Ia || Gg(this, 0));
    };
    var Ug = new Tg(new qe(null));
    Tg.prototype.Ed = function(a) {
        return a.e() ? Ug : (a = Nd(this.X, a, Q), new Tg(a));
    }, Tg.prototype.e = function() {
        return this.X.e();
    }, Tg.prototype.apply = function(a) {
        return $g(C, this.X, a);
    }, g = ah.prototype, g.Ed = function(a) {
        var b = Ma(this.ma, function(b) {
            return b.Zc === a;
        });
        E(0 <= b, "removeWrite called with nonexistent writeId.");
        var c = this.ma[b];
        this.ma.splice(b, 1);
        for (var d = c.visible, e = !1, f = this.ma.length - 1; d && 0 <= f; ) {
            var h = this.ma[f];
            h.visible && (f >= b && ch(h, c.path) ? d = !1 : c.path.contains(h.path) && (e = !0)), 
            f--;
        }
        if (d) {
            if (e) this.T = dh(this.ma, eh, C), this.Cc = 0 < this.ma.length ? this.ma[this.ma.length - 1].Zc : -1; else if (c.Ja) this.T = this.T.Ed(c.path); else {
                var k = this;
                t(c.children, function(a, b) {
                    k.T = k.T.Ed(c.path.m(b));
                });
            }
            return !0;
        }
        return !1;
    }, g.Ba = function(a, b, c, d) {
        if (c || d) {
            var e = Zg(this.T, a);
            return !d && e.e() ? b : d || null != b || null != Xg(e, C) ? (e = dh(this.ma, function(b) {
                return (b.visible || d) && (!c || !(0 <= Fa(c, b.Zc))) && (b.path.contains(a) || a.contains(b.path));
            }, a), b = b || F, e.apply(b)) : null;
        }
        return null != (e = Xg(this.T, a)) ? e : (e = Zg(this.T, a)).e() ? b : null != b || null != Xg(e, C) ? (b = b || F, 
        e.apply(b)) : null;
    }, g.sc = function(a, b) {
        var c = F, d = Xg(this.T, a);
        if (d) d.J() || d.P(N, function(a, b) {
            c = c.U(a, b);
        }); else if (b) {
            var e = Zg(this.T, a);
            b.P(N, function(a, b) {
                var d = Zg(e, new M(a)).apply(b);
                c = c.U(a, d);
            }), Ga(Yg(e), function(a) {
                c = c.U(a.name, a.S);
            });
        } else e = Zg(this.T, a), Ga(Yg(e), function(a) {
            c = c.U(a.name, a.S);
        });
        return c;
    }, g.$c = function(a, b, c, d) {
        return E(c || d, "Either existingEventSnap or existingServerSnap must exist"), a = a.m(b), 
        null != Xg(this.T, a) ? null : (a = Zg(this.T, a)).e() ? d.Q(b) : a.apply(d.Q(b));
    }, g.rc = function(a, b, c) {
        a = a.m(b);
        var d = Xg(this.T, a);
        return null != d ? d : nc(c, b) ? Zg(this.T, a).apply(c.j().R(b)) : null;
    }, g.mc = function(a) {
        return Xg(this.T, a);
    }, g.Xd = function(a, b, c, d, e, f) {
        var h;
        if (a = Zg(this.T, a), null == (h = Xg(a, C))) {
            if (null == b) return [];
            h = a.apply(b);
        }
        if ((h = h.ob(f)).e() || h.J()) return [];
        for (b = [], a = Ue(f), f = K(e = e ? h.$b(c, f) : h.Yb(c, f)); f && b.length < d; ) 0 !== a(f, c) && b.push(f), 
        f = K(e);
        return b;
    }, g = fh.prototype, g.Ba = function(a, b, c) {
        return this.X.Ba(this.Mb, a, b, c);
    }, g.sc = function(a) {
        return this.X.sc(this.Mb, a);
    }, g.$c = function(a, b, c) {
        return this.X.$c(this.Mb, a, b, c);
    }, g.mc = function(a) {
        return this.X.mc(this.Mb.m(a));
    }, g.Xd = function(a, b, c, d, e) {
        return this.X.Xd(this.Mb, a, b, c, d, e);
    }, g.rc = function(a, b) {
        return this.X.rc(this.Mb, a, b);
    }, g.m = function(a) {
        return new fh(this.Mb.m(a), this.X);
    }, Me.prototype.find = function(a) {
        if (null != this.B) return this.B.Q(a);
        if (a.e() || null == this.k) return null;
        var b = J(a);
        return a = D(a), this.k.contains(b) ? this.k.get(b).find(a) : null;
    }, Me.prototype.P = function(a) {
        null !== this.k && Je(this.k, function(b, c) {
            a(b, c);
        });
    }, U.prototype.cancel = function(a) {
        x("Firebase.onDisconnect().cancel", 0, 1, arguments.length), y("Firebase.onDisconnect().cancel", 1, a, !0);
        var b = new Eb();
        return this.ua.xd(this.ra, Fb(b, a)), b.sa;
    }, U.prototype.cancel = U.prototype.cancel, U.prototype.remove = function(a) {
        x("Firebase.onDisconnect().remove", 0, 1, arguments.length), fe("Firebase.onDisconnect().remove", this.ra), 
        y("Firebase.onDisconnect().remove", 1, a, !0);
        var b = new Eb();
        return hh(this.ua, this.ra, null, Fb(b, a)), b.sa;
    }, U.prototype.remove = U.prototype.remove, U.prototype.set = function(a, b) {
        x("Firebase.onDisconnect().set", 1, 2, arguments.length), fe("Firebase.onDisconnect().set", this.ra), 
        Yd("Firebase.onDisconnect().set", a, this.ra, !1), y("Firebase.onDisconnect().set", 2, b, !0);
        var c = new Eb();
        return hh(this.ua, this.ra, a, Fb(c, b)), c.sa;
    }, U.prototype.set = U.prototype.set, U.prototype.Kb = function(a, b, c) {
        x("Firebase.onDisconnect().setWithPriority", 2, 3, arguments.length), fe("Firebase.onDisconnect().setWithPriority", this.ra), 
        Yd("Firebase.onDisconnect().setWithPriority", a, this.ra, !1), be("Firebase.onDisconnect().setWithPriority", 2, b), 
        y("Firebase.onDisconnect().setWithPriority", 3, c, !0);
        var d = new Eb();
        return ih(this.ua, this.ra, a, b, Fb(d, c)), d.sa;
    }, U.prototype.setWithPriority = U.prototype.Kb, U.prototype.update = function(a, b) {
        if (x("Firebase.onDisconnect().update", 1, 2, arguments.length), fe("Firebase.onDisconnect().update", this.ra), 
        da(a)) {
            for (var c = {}, d = 0; d < a.length; ++d) c["" + d] = a[d];
            a = c, L("Passing an Array to Firebase.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.");
        }
        return ae("Firebase.onDisconnect().update", a, this.ra), y("Firebase.onDisconnect().update", 2, b, !0), 
        c = new Eb(), jh(this.ua, this.ra, a, Fb(c, b)), c.sa;
    }, U.prototype.update = U.prototype.update, V.prototype.H = function() {
        return x("Firebase.DataSnapshot.val", 0, 0, arguments.length), this.A.H();
    }, V.prototype.val = V.prototype.H, V.prototype.Ue = function() {
        return x("Firebase.DataSnapshot.exportVal", 0, 0, arguments.length), this.A.H(!0);
    }, V.prototype.exportVal = V.prototype.Ue, V.prototype.Vf = function() {
        return x("Firebase.DataSnapshot.exists", 0, 0, arguments.length), !this.A.e();
    }, V.prototype.exists = V.prototype.Vf, V.prototype.m = function(a) {
        x("Firebase.DataSnapshot.child", 0, 1, arguments.length), fa(a) && (a = String(a)), 
        ee("Firebase.DataSnapshot.child", a);
        var b = new M(a), c = this.W.m(b);
        return new V(this.A.Q(b), c, N);
    }, V.prototype.child = V.prototype.m, V.prototype.Fa = function(a) {
        x("Firebase.DataSnapshot.hasChild", 1, 1, arguments.length), ee("Firebase.DataSnapshot.hasChild", a);
        var b = new M(a);
        return !this.A.Q(b).e();
    }, V.prototype.hasChild = V.prototype.Fa, V.prototype.C = function() {
        return x("Firebase.DataSnapshot.getPriority", 0, 0, arguments.length), this.A.C().H();
    }, V.prototype.getPriority = V.prototype.C, V.prototype.forEach = function(a) {
        if (x("Firebase.DataSnapshot.forEach", 1, 1, arguments.length), y("Firebase.DataSnapshot.forEach", 1, a, !1), 
        this.A.J()) return !1;
        var b = this;
        return !!this.A.P(this.g, function(c, d) {
            return a(new V(d, b.W.m(c), N));
        });
    }, V.prototype.forEach = V.prototype.forEach, V.prototype.kd = function() {
        return x("Firebase.DataSnapshot.hasChildren", 0, 0, arguments.length), !this.A.J() && !this.A.e();
    }, V.prototype.hasChildren = V.prototype.kd, V.prototype.getKey = function() {
        return x("Firebase.DataSnapshot.key", 0, 0, arguments.length), this.W.getKey();
    }, id(V.prototype, "key", V.prototype.getKey), V.prototype.Fb = function() {
        return x("Firebase.DataSnapshot.numChildren", 0, 0, arguments.length), this.A.Fb();
    }, V.prototype.numChildren = V.prototype.Fb, V.prototype.xb = function() {
        return x("Firebase.DataSnapshot.ref", 0, 0, arguments.length), this.W;
    }, id(V.prototype, "ref", V.prototype.xb), g = kh.prototype, g.tf = function(a) {
        return "value" === a;
    }, g.createEvent = function(a, b) {
        var c = b.n.g;
        return new ic("value", this, new V(a.Ma, b.xb(), c));
    }, g.Ub = function(a) {
        var b = this.ub;
        if ("cancel" === a.ge()) {
            E(this.sb, "Raising a cancel event on a listener with no cancel callback");
            var c = this.sb;
            return function() {
                c.call(b, a.error);
            };
        }
        var d = this.Qb;
        return function() {
            d.call(b, a.Md);
        };
    }, g.Pe = function(a, b) {
        return this.sb ? new jc(this, a, b) : null;
    }, g.matches = function(a) {
        return a instanceof kh && (!a.Qb || !this.Qb || a.Qb === this.Qb && a.ub === this.ub);
    }, g.af = function() {
        return null !== this.Qb;
    }, g = lh.prototype, g.tf = function(a) {
        return ("children_removed" === (a = "children_added" === a ? "child_added" : a) ? "child_removed" : a) in this.ha;
    }, g.Pe = function(a, b) {
        return this.sb ? new jc(this, a, b) : null;
    }, g.createEvent = function(a, b) {
        E(null != a.Za, "Child events should have a childName.");
        var c = b.xb().m(a.Za);
        return new ic(a.type, this, new V(a.Ma, c, b.n.g), a.Dd);
    }, g.Ub = function(a) {
        var b = this.ub;
        if ("cancel" === a.ge()) {
            E(this.sb, "Raising a cancel event on a listener with no cancel callback");
            var c = this.sb;
            return function() {
                c.call(b, a.error);
            };
        }
        var d = this.ha[a.gd];
        return function() {
            d.call(b, a.Md, a.Dd);
        };
    }, g.matches = function(a) {
        if (a instanceof lh) {
            if (!this.ha || !a.ha) return !0;
            if (this.ub === a.ub && (b = na(a.ha)) === na(this.ha)) {
                if (1 === b) {
                    var b = oa(a.ha), c = oa(this.ha);
                    return !(c !== b || a.ha[b] && this.ha[c] && a.ha[b] !== this.ha[c]);
                }
                return ma(this.ha, function(b, c) {
                    return a.ha[c] === b;
                });
            }
        }
        return !1;
    }, g.af = function() {
        return null !== this.ha;
    }, g = mh.prototype, g.e = function() {
        return ua(this.Aa);
    }, g.gb = function(a, b, c) {
        var d = a.source.Ib;
        if (null !== d) return d = A(this.Aa, d), E(null != d, "SyncTree gave us an op for an invalid query."), 
        d.gb(a, b, c);
        var e = [];
        return t(this.Aa, function(d) {
            e = e.concat(d.gb(a, b, c));
        }), e;
    }, g.Ob = function(a, b, c, d, e) {
        var f = a.ka(), h = A(this.Aa, f);
        if (!h) {
            var k = !1;
            (h = c.Ba(e ? d : null)) ? k = !0 : (h = d instanceof P ? c.sc(d) : F, k = !1), 
            h = new Kf(a, new Hd(new oc(h, k, !1), new oc(d, e, !1))), this.Aa[f] = h;
        }
        return h.Ob(b), Nf(h, b);
    }, g.mb = function(a, b, c) {
        var d = a.ka(), e = [], f = [], h = null != nh(this);
        if ("default" === d) {
            var k = this;
            t(this.Aa, function(a, d) {
                f = f.concat(a.mb(b, c)), a.e() && (delete k.Aa[d], T(a.W.n) || e.push(a.W));
            });
        } else {
            var m = A(this.Aa, d);
            m && (f = f.concat(m.mb(b, c)), m.e() && (delete this.Aa[d], T(m.W.n) || e.push(m.W)));
        }
        return h && null == nh(this) && e.push(new W(a.u, a.path)), {
            sg: e,
            Tf: f
        };
    }, g.jb = function(a) {
        var b = null;
        return t(this.Aa, function(c) {
            b = b || c.jb(a);
        }), b;
    }, qh.prototype.Ob = function(a, b) {
        var c = a.path, d = null, e = !1;
        ze(this.xa, c, function(a, b) {
            var f = R(a, c);
            d = d || b.jb(f), e = e || null != nh(b);
        });
        var f = this.xa.get(c);
        f ? (e = e || null != nh(f), d = d || f.jb(C)) : (f = new mh(), this.xa = this.xa.set(c, f));
        var h;
        null != d ? h = !0 : (h = !1, d = F, Ce(this.xa.subtree(c), function(a, b) {
            var c = b.jb(C);
            c && (d = d.U(a, c));
        }));
        var k = null != ph(f, a);
        if (!k && !T(a.n)) {
            var m = Bh(a);
            E(!(m in this.jc), "View does not exist, but we have a tag");
            var l = Ch++;
            this.jc[m] = l, this.De["_" + l] = m;
        }
        return h = f.Ob(a, b, new fh(c, this.lb), d, h), k || e || (f = ph(f, a), h = h.concat(Dh(this, a, f))), 
        h;
    }, qh.prototype.mb = function(a, b, c) {
        var d = a.path, e = this.xa.get(d), f = [];
        if (e && ("default" === a.ka() || null != ph(e, a))) {
            f = e.mb(a, b, c), e.e() && (this.xa = this.xa.remove(d)), e = f.sg, f = f.Tf, b = -1 !== Ma(e, function(a) {
                return T(a.n);
            });
            var h = xe(this.xa, d, function(a, b) {
                return null != nh(b);
            });
            if (b && !h && !(d = this.xa.subtree(d)).e()) for (var d = Eh(d), k = 0; k < d.length; ++k) {
                var l = (m = d[k]).W, m = Fh(this, m);
                this.Dc.Ae(Gh(l), Hh(this, l), m.ld, m.G);
            }
            if (!h && 0 < e.length && !c) if (b) this.Dc.Od(Gh(a), null); else {
                var u = this;
                Ga(e, function(a) {
                    a.ka();
                    var b = u.jc[Bh(a)];
                    u.Dc.Od(Gh(a), b);
                });
            }
            Ih(this, e);
        }
        return f;
    }, qh.prototype.Ba = function(a, b) {
        var c = this.lb, d = xe(this.xa, a, function(b, c) {
            var d = R(b, a);
            if (d = c.jb(d)) return d;
        });
        return c.Ba(a, d, b, !0);
    };
    var Ch = 1;
    g = X.prototype, g.xb = function() {
        return x("Query.ref", 0, 0, arguments.length), new W(this.u, this.path);
    }, g.hc = function(a, b, c, d) {
        x("Query.on", 2, 4, arguments.length), ce("Query.on", a, !1), y("Query.on", 2, b, !1);
        var e = Oh("Query.on", c, d);
        if ("value" === a) Ph(this.u, this, new kh(b, e.cancel || null, e.Pa || null)); else {
            var f = {};
            f[a] = b, Ph(this.u, this, new lh(f, e.cancel, e.Pa));
        }
        return b;
    }, g.Jc = function(a, b, c) {
        x("Query.off", 0, 3, arguments.length), ce("Query.off", a, !0), y("Query.off", 2, b, !0), 
        Cb("Query.off", 3, c);
        var d = null, e = null;
        "value" === a ? d = new kh(b || null, null, c || null) : a && (b && (e = {}, e[a] = b), 
        d = new lh(e, null, c || null)), e = this.u, d = ".info" === J(this.path) ? e.pd.mb(this, d) : e.K.mb(this, d), 
        tc(e.da, this.path, d);
    }, g.kg = function(a, b) {
        function c(k) {
            f && (f = !1, e.Jc(a, c), b && b.call(d.Pa, k), h.resolve(k));
        }
        x("Query.once", 1, 4, arguments.length), ce("Query.once", a, !1), y("Query.once", 2, b, !0);
        var d = Oh("Query.once", arguments[2], arguments[3]), e = this, f = !0, h = new Eb();
        return Gb(h.sa), this.hc(a, c, function(b) {
            e.Jc(a, c), d.cancel && d.cancel.call(d.Pa, b), h.reject(b);
        }), h.sa;
    }, g.ne = function(a) {
        if (x("Query.limitToFirst", 1, 1, arguments.length), !fa(a) || Math.floor(a) !== a || 0 >= a) throw Error("Query.limitToFirst: First argument must be a positive integer.");
        if (this.n.ya) throw Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");
        return new X(this.u, this.path, this.n.ne(a), this.Oc);
    }, g.oe = function(a) {
        if (x("Query.limitToLast", 1, 1, arguments.length), !fa(a) || Math.floor(a) !== a || 0 >= a) throw Error("Query.limitToLast: First argument must be a positive integer.");
        if (this.n.ya) throw Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");
        return new X(this.u, this.path, this.n.oe(a), this.Oc);
    }, g.lg = function(a) {
        if (x("Query.orderByChild", 1, 1, arguments.length), "$key" === a) throw Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');
        if ("$priority" === a) throw Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');
        if ("$value" === a) throw Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');
        ee("Query.orderByChild", a), Nh(this, "Query.orderByChild");
        var b = new M(a);
        if (b.e()) throw Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");
        return b = new We(b), b = xf(this.n, b), Lh(b), new X(this.u, this.path, b, !0);
    }, g.mg = function() {
        x("Query.orderByKey", 0, 0, arguments.length), Nh(this, "Query.orderByKey");
        var a = xf(this.n, Od);
        return Lh(a), new X(this.u, this.path, a, !0);
    }, g.ng = function() {
        x("Query.orderByPriority", 0, 0, arguments.length), Nh(this, "Query.orderByPriority");
        var a = xf(this.n, N);
        return Lh(a), new X(this.u, this.path, a, !0);
    }, g.og = function() {
        x("Query.orderByValue", 0, 0, arguments.length), Nh(this, "Query.orderByValue");
        var a = xf(this.n, bf);
        return Lh(a), new X(this.u, this.path, a, !0);
    }, g.Nd = function(a, b) {
        x("Query.startAt", 0, 2, arguments.length), Yd("Query.startAt", a, this.path, !0), 
        de("Query.startAt", b);
        var c = this.n.Nd(a, b);
        if (Mh(c), Lh(c), this.n.la) throw Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");
        return p(a) || (b = a = null), new X(this.u, this.path, c, this.Oc);
    }, g.fd = function(a, b) {
        x("Query.endAt", 0, 2, arguments.length), Yd("Query.endAt", a, this.path, !0), de("Query.endAt", b);
        var c = this.n.fd(a, b);
        if (Mh(c), Lh(c), this.n.oa) throw Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");
        return new X(this.u, this.path, c, this.Oc);
    }, g.Rf = function(a, b) {
        if (x("Query.equalTo", 1, 2, arguments.length), Yd("Query.equalTo", a, this.path, !1), 
        de("Query.equalTo", b), this.n.la) throw Error("Query.equalTo: Starting point was already set (by another call to endAt or equalTo).");
        if (this.n.oa) throw Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");
        return this.Nd(a, b).fd(a, b);
    }, g.toString = function() {
        x("Query.toString", 0, 0, arguments.length);
        for (var a = this.path, b = "", c = a.Z; c < a.o.length; c++) "" !== a.o[c] && (b += "/" + encodeURIComponent(String(a.o[c])));
        return this.u.toString() + (b || "/");
    }, g.ka = function() {
        var a = dd(yf(this.n));
        return "{}" === a ? "default" : a;
    }, g.isEqual = function(a) {
        if (x("Query.isEqual", 1, 1, arguments.length), !(a instanceof X)) throw Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");
        var b = this.u === a.u, c = this.path.$(a.path), d = this.ka() === a.ka();
        return b && c && d;
    }, X.prototype.on = X.prototype.hc, X.prototype.off = X.prototype.Jc, X.prototype.once = X.prototype.kg, 
    X.prototype.limitToFirst = X.prototype.ne, X.prototype.limitToLast = X.prototype.oe, 
    X.prototype.orderByChild = X.prototype.lg, X.prototype.orderByKey = X.prototype.mg, 
    X.prototype.orderByPriority = X.prototype.ng, X.prototype.orderByValue = X.prototype.og, 
    X.prototype.startAt = X.prototype.Nd, X.prototype.endAt = X.prototype.fd, X.prototype.equalTo = X.prototype.Rf, 
    X.prototype.toString = X.prototype.toString, X.prototype.isEqual = X.prototype.isEqual, 
    id(X.prototype, "ref", X.prototype.xb);
    var Th = {
        TIMESTAMP: {
            ".sv": "timestamp"
        }
    };
    g = Qh.prototype, g.app = null, g.pf = function(a) {
        return Uh(this, "ref"), x("database.ref", 0, 1, arguments.length), p(a) ? this.ca.m(a) : this.ca;
    }, g.rg = function(a) {
        Uh(this, "database.refFromURL"), x("database.refFromURL", 1, 1, arguments.length);
        var b = Yc(a);
        ge("database.refFromURL", b);
        var c = b.kc;
        return c.host !== this.ua.M.host && Xc("database.refFromURL: Host name does not match the current database: (found " + c.host + " but expected " + this.ua.M.host + ")"), 
        this.pf(b.path.toString());
    }, g.$f = function() {
        x("database.goOffline", 0, 0, arguments.length), Uh(this, "goOffline"), this.ua.eb();
    }, g.ag = function() {
        x("database.goOnline", 0, 0, arguments.length), Uh(this, "goOnline"), this.ua.lc();
    }, Object.defineProperty(Qh.prototype, "app", {
        get: function() {
            return this.ua.app;
        }
    }), Sh.prototype.delete = function() {
        Uh(this.$a, "delete");
        var a = Vh.Wb(), b = this.$a.ua;
        return A(a.nb, b.app.name) !== b && Xc("Database " + b.app.name + " has already been deleted."), 
        b.eb(), delete a.nb[b.app.name], this.$a.ua = null, this.$a.ca = null, this.$a = this.$a.INTERNAL = null, 
        firebase.Promise.resolve();
    }, Qh.prototype.ref = Qh.prototype.pf, Qh.prototype.refFromURL = Qh.prototype.rg, 
    Qh.prototype.goOnline = Qh.prototype.ag, Qh.prototype.goOffline = Qh.prototype.$f, 
    Sh.prototype.delete = Sh.prototype.delete, g = Rh.prototype, g.toString = function() {
        return (this.M.Sc ? "https://" : "http://") + this.M.host;
    }, g.name = function() {
        return this.M.pe;
    }, g.Hb = function(a, b, c, d) {
        this.ed++;
        var e = new M(a);
        b = this.je ? this.je(a, b) : b, a = [], d ? c ? (b = la(b, function(a) {
            return S(a);
        }), a = Ah(this.K, e, b, d)) : (b = S(b), a = wh(this.K, e, b, d)) : c ? (d = la(b, function(a) {
            return S(a);
        }), a = vh(this.K, e, d)) : (d = S(b), a = sh(this.K, new ac(Ge, e, d))), d = e, 
        0 < a.length && (d = Zh(this, e)), vc(this.da, d, a);
    }, g.Kc = function(a) {
        Wh(this, "connected", a), !1 === a && $h(this);
    }, g.ue = function(a) {
        var b = this;
        fd(a, function(a, d) {
            Wh(b, d, a);
        });
    }, g.Kb = function(a, b, c, d) {
        this.f("set", {
            path: a.toString(),
            value: b,
            Gg: c
        });
        var e = Yh(this), e = Pe(b = S(b, c), e), f = this.vd++, e = rh(this.K, a, e, f, !0);
        rc(this.da, e);
        var h = this;
        this.wa.put(a.toString(), b.H(!0), function(b, c) {
            var e = "ok" === b;
            e || L("set at " + a + " failed: " + b), e = uh(h.K, f, !e), vc(h.da, a, e), ai(d, b, c);
        }), Zh(this, e = bi(this, a)), vc(this.da, e, []);
    }, g.update = function(a, b, c) {
        this.f("update", {
            path: a.toString(),
            value: b
        });
        var d = !0, e = Yh(this), f = {};
        if (t(b, function(a, b) {
            d = !1;
            var c = S(a);
            f[b] = Pe(c, e);
        }), d) I("update() called with empty data.  Don't do anything."), ai(c, "ok"); else {
            var h = this.vd++, k = th(this.K, a, f, h);
            rc(this.da, k);
            var m = this;
            this.wa.ef(a.toString(), b, function(b, d) {
                (e = "ok" === b) || L("update at " + a + " failed: " + b);
                var e = uh(m.K, h, !e), f = a;
                0 < e.length && (f = Zh(m, a)), vc(m.da, f, e), ai(c, b, d);
            }), Zh(this, b = bi(this, a)), vc(this.da, a, []);
        }
    }, g.xd = function(a, b) {
        var c = this;
        this.wa.xd(a.toString(), function(d, e) {
            "ok" === d && gh(c.ja, a), ai(b, d, e);
        });
    }, g.eb = function() {
        this.Ua && this.Ua.eb("repo_interrupt");
    }, g.lc = function() {
        this.Ua && this.Ua.lc("repo_interrupt");
    }, g.Be = function(a) {
        if ("undefined" != typeof console) {
            a ? (this.Vc || (this.Vc = new Tf(this.Xa)), a = this.Vc.get()) : a = this.Xa.get();
            var c, b = Ja(qa(a), function(a, b) {
                return Math.max(b.length, a);
            }, 0);
            for (c in a) {
                for (var d = a[c], e = c.length; e < b + 2; e++) c += " ";
                console.log(c + d);
            }
        }
    }, g.Ce = function(a) {
        Vf(this.Xa, a), this.zg.zf[a] = !0;
    }, g.f = function(a) {
        var b = "";
        this.Ua && (b = this.Ua.id + ":"), I(b, arguments);
    }, Vh.prototype.eb = function() {
        for (var a in this.nb) this.nb[a].eb();
    }, Vh.prototype.lc = function() {
        for (var a in this.nb) this.nb[a].lc();
    }, Vh.prototype.ce = function(a) {
        this.Ff = a;
    }, ba(Vh), Vh.prototype.interrupt = Vh.prototype.eb, Vh.prototype.resume = Vh.prototype.lc;
    var Y = {};
    Y.pc = Eg, Y.DataConnection = Y.pc, Eg.prototype.yg = function(a, b) {
        this.va("q", {
            p: a
        }, b);
    }, Y.pc.prototype.simpleListen = Y.pc.prototype.yg, Eg.prototype.Qf = function(a, b) {
        this.va("echo", {
            d: a
        }, b);
    }, Y.pc.prototype.echo = Y.pc.prototype.Qf, Eg.prototype.interrupt = Eg.prototype.eb, 
    Y.If = sg, Y.RealTimeConnection = Y.If, sg.prototype.sendRequest = sg.prototype.va, 
    sg.prototype.close = sg.prototype.close, Y.bg = function(a) {
        var b = Eg.prototype.put;
        return Eg.prototype.put = function(c, d, e, f) {
            p(f) && (f = a()), b.call(this, c, d, e, f);
        }, function() {
            Eg.prototype.put = b;
        };
    }, Y.hijackHash = Y.bg, Y.Hf = cc, Y.ConnectionTarget = Y.Hf, Y.ka = function(a) {
        return a.ka();
    }, Y.queryIdentifier = Y.ka, Y.eg = function(a) {
        return a.u.Ua.aa;
    }, Y.listens = Y.eg, Y.ce = function(a) {
        Vh.Wb().ce(a);
    }, Y.forceRestClient = Y.ce, Y.Context = Vh;
    var Z = {
        Xf: function() {
            hg = cg = !0;
        }
    };
    if (Z.forceLongPolling = Z.Xf, Z.Yf = function() {
        ig = !0;
    }, Z.forceWebSockets = Z.Yf, Z.dg = function() {
        return bg.isAvailable();
    }, Z.isWebSocketsAvailable = Z.dg, Z.wg = function(a, b) {
        a.u.Ua.ze = b;
    }, Z.setSecurityDebugCallback = Z.wg, Z.Be = function(a, b) {
        a.u.Be(b);
    }, Z.stats = Z.Be, Z.Ce = function(a, b) {
        a.u.Ce(b);
    }, Z.statsIncrementCounter = Z.Ce, Z.ed = function(a) {
        return a.u.ed;
    }, Z.dataUpdateCount = Z.ed, Z.cg = function(a, b) {
        a.u.je = b;
    }, Z.interceptServerData = Z.cg, ka(W, X), g = W.prototype, g.getKey = function() {
        return x("Firebase.key", 0, 0, arguments.length), this.path.e() ? null : Kd(this.path);
    }, g.m = function(a) {
        if (x("Firebase.child", 1, 1, arguments.length), fa(a)) a = String(a); else if (!(a instanceof M)) if (null === J(this.path)) {
            var b = a;
            b && (b = b.replace(/^\/*\.info(\/|$)/, "/")), ee("Firebase.child", b);
        } else ee("Firebase.child", a);
        return new W(this.u, this.path.m(a));
    }, g.getParent = function() {
        x("Firebase.parent", 0, 0, arguments.length);
        var a = this.path.parent();
        return null === a ? null : new W(this.u, a);
    }, g.Zf = function() {
        x("Firebase.ref", 0, 0, arguments.length);
        for (var a = this; null !== a.getParent(); ) a = a.getParent();
        return a;
    }, g.Pf = function() {
        return this.u.$a;
    }, g.set = function(a, b) {
        x("Firebase.set", 1, 2, arguments.length), fe("Firebase.set", this.path), Yd("Firebase.set", a, this.path, !1), 
        y("Firebase.set", 2, b, !0);
        var c = new Eb();
        return this.u.Kb(this.path, a, null, Fb(c, b)), c.sa;
    }, g.update = function(a, b) {
        if (x("Firebase.update", 1, 2, arguments.length), fe("Firebase.update", this.path), 
        da(a)) {
            for (var c = {}, d = 0; d < a.length; ++d) c["" + d] = a[d];
            a = c, L("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.");
        }
        return ae("Firebase.update", a, this.path), y("Firebase.update", 2, b, !0), c = new Eb(), 
        this.u.update(this.path, a, Fb(c, b)), c.sa;
    }, g.Kb = function(a, b, c) {
        if (x("Firebase.setWithPriority", 2, 3, arguments.length), fe("Firebase.setWithPriority", this.path), 
        Yd("Firebase.setWithPriority", a, this.path, !1), be("Firebase.setWithPriority", 2, b), 
        y("Firebase.setWithPriority", 3, c, !0), ".length" === this.getKey() || ".keys" === this.getKey()) throw "Firebase.setWithPriority failed: " + this.getKey() + " is a read-only object.";
        var d = new Eb();
        return this.u.Kb(this.path, a, b, Fb(d, c)), d.sa;
    }, g.remove = function(a) {
        return x("Firebase.remove", 0, 1, arguments.length), fe("Firebase.remove", this.path), 
        y("Firebase.remove", 1, a, !0), this.set(null, a);
    }, g.transaction = function(a, b, c) {
        if (x("Firebase.transaction", 1, 3, arguments.length), fe("Firebase.transaction", this.path), 
        y("Firebase.transaction", 1, a, !1), y("Firebase.transaction", 2, b, !0), p(c) && "boolean" != typeof c) throw Error(Bb("Firebase.transaction", 3, !0) + "must be a boolean.");
        if (".length" === this.getKey() || ".keys" === this.getKey()) throw "Firebase.transaction failed: " + this.getKey() + " is a read-only object.";
        void 0 === c && (c = !0);
        var d = new Eb();
        return ga(b) && Gb(d.sa), ci(this.u, this.path, a, function(a, c, h) {
            a ? d.reject(a) : d.resolve(new li(c, h)), ga(b) && b(a, c, h);
        }, c), d.sa;
    }, g.vg = function(a, b) {
        x("Firebase.setPriority", 1, 2, arguments.length), fe("Firebase.setPriority", this.path), 
        be("Firebase.setPriority", 1, a), y("Firebase.setPriority", 2, b, !0);
        var c = new Eb();
        return this.u.Kb(this.path.m(".priority"), a, null, Fb(c, b)), c.sa;
    }, g.push = function(a, b) {
        x("Firebase.push", 0, 2, arguments.length), fe("Firebase.push", this.path), Yd("Firebase.push", a, this.path, !0), 
        y("Firebase.push", 2, b, !0);
        var c = Xh(this.u), d = Pd(c), c = this.m(d);
        if (null != a) {
            var e = this, f = c.set(a, b).then(function() {
                return e.m(d);
            });
            c.then = r(f.then, f), c.catch = r(f.then, f, void 0), ga(b) && Gb(f);
        }
        return c;
    }, g.kb = function() {
        return fe("Firebase.onDisconnect", this.path), new U(this.u, this.path);
    }, W.prototype.child = W.prototype.m, W.prototype.set = W.prototype.set, W.prototype.update = W.prototype.update, 
    W.prototype.setWithPriority = W.prototype.Kb, W.prototype.remove = W.prototype.remove, 
    W.prototype.transaction = W.prototype.transaction, W.prototype.setPriority = W.prototype.vg, 
    W.prototype.push = W.prototype.push, W.prototype.onDisconnect = W.prototype.kb, 
    id(W.prototype, "database", W.prototype.Pf), id(W.prototype, "key", W.prototype.getKey), 
    id(W.prototype, "parent", W.prototype.getParent), id(W.prototype, "root", W.prototype.Zf), 
    void 0 === firebase) throw Error("Cannot install Firebase Database - be sure to load firebase-app.js first.");
    try {
        firebase.INTERNAL.registerService("database", function(a) {
            var b = Vh.Wb();
            p(c = a.options.databaseURL) || Xc("Can't determine Firebase Database URL.  Be sure to include databaseURL option when calling firebase.intializeApp().");
            var d = Yc(c), c = d.kc;
            return ge("Invalid Firebase Database URL", d), d.path.e() || Xc("Database URL must point to the root of a Firebase Database (not including a child path)."), 
            (d = A(b.nb, a.name)) && Xc("FIREBASE INTERNAL ERROR: Database initialized multiple times."), 
            d = new Rh(c, b.Ff, a), b.nb[a.name] = d, d.$a;
        }, {
            Reference: W,
            Query: X,
            Database: Qh,
            enableLogging: Uc,
            INTERNAL: Z,
            TEST_ACCESS: Y,
            ServerValue: Th
        });
    } catch (mi) {
        Xc("Failed to register the Firebase Database Service (" + mi + ")");
    }
}(), function() {
    var k, aa = aa || {}, l = this, n = function(a) {
        return void 0 !== a;
    }, ba = function() {}, ca = function() {
        throw Error("unimplemented abstract method");
    }, p = function(a) {
        var b = typeof a;
        if ("object" == b) {
            if (!a) return "null";
            if (a instanceof Array) return "array";
            if (a instanceof Object) return b;
            var c = Object.prototype.toString.call(a);
            if ("[object Window]" == c) return "object";
            if ("[object Array]" == c || "number" == typeof a.length && void 0 !== a.splice && void 0 !== a.propertyIsEnumerable && !a.propertyIsEnumerable("splice")) return "array";
            if ("[object Function]" == c || void 0 !== a.call && void 0 !== a.propertyIsEnumerable && !a.propertyIsEnumerable("call")) return "function";
        } else if ("function" == b && void 0 === a.call) return "object";
        return b;
    }, da = function(a) {
        var b = p(a);
        return "array" == b || "object" == b && "number" == typeof a.length;
    }, q = function(a) {
        return "string" == typeof a;
    }, r = function(a) {
        return "function" == p(a);
    }, ea = function(a) {
        var b = typeof a;
        return "object" == b && null != a || "function" == b;
    }, fa = "closure_uid_" + (1e9 * Math.random() >>> 0), ga = 0, ha = function(a, b, c) {
        return a.call.apply(a.bind, arguments);
    }, ia = function(a, b, c) {
        if (!a) throw Error();
        if (2 < arguments.length) {
            var d = Array.prototype.slice.call(arguments, 2);
            return function() {
                var c = Array.prototype.slice.call(arguments);
                return Array.prototype.unshift.apply(c, d), a.apply(b, c);
            };
        }
        return function() {
            return a.apply(b, arguments);
        };
    }, t = function(a, b, c) {
        return (t = Function.prototype.bind && -1 != Function.prototype.bind.toString().indexOf("native code") ? ha : ia).apply(null, arguments);
    }, ja = Date.now || function() {
        return +new Date();
    }, u = function(a, b) {
        function c() {}
        c.prototype = b.prototype, a.I = b.prototype, a.prototype = new c(), a.Ka = function(a, c, f) {
            for (var d = Array(arguments.length - 2), e = 2; e < arguments.length; e++) d[e - 2] = arguments[e];
            return b.prototype[c].apply(a, d);
        };
    }, ka = function(a, b, c) {
        function d() {
            N || (N = !0, b.apply(null, arguments));
        }
        function e(b) {
            m = setTimeout(function() {
                m = null, a(f, 2 === O);
            }, b);
        }
        function f(a, b) {
            if (!N) if (a) d.apply(null, arguments); else if (2 === O || x) d.apply(null, arguments); else {
                64 > h && (h *= 2);
                var c;
                1 === O ? (O = 2, c = 0) : c = 1e3 * (h + Math.random()), e(c);
            }
        }
        function g(a) {
            ec || (ec = !0, N || (null !== m ? (a || (O = 2), clearTimeout(m), e(0)) : a || (O = 1)));
        }
        var h = 1, m = null, x = !1, O = 0, N = !1, ec = !1;
        return e(0), setTimeout(function() {
            x = !0, g(!0);
        }, c), g;
    }, la = "https://firebasestorage.googleapis.com", v = function(a, b) {
        this.code = "storage/" + a, this.message = "Firebase Storage: " + b, this.serverResponse = null, 
        this.name = "FirebaseError";
    };
    u(v, Error);
    var ma = function() {
        return new v("unknown", "An unknown error occurred, please check the error payload for server response.");
    }, na = function() {
        return new v("canceled", "User canceled the upload/download.");
    }, oa = function() {
        return new v("cannot-slice-blob", "Cannot slice blob for upload. Please retry the upload.");
    }, pa = function(a, b, c) {
        return new v("invalid-argument", "Invalid argument in `" + b + "` at index " + a + ": " + c);
    }, qa = function() {
        return new v("app-deleted", "The Firebase app was deleted.");
    }, ra = function(a, b) {
        return new v("invalid-format", "String does not match format '" + a + "': " + b);
    }, sa = function(a, b) {
        for (var c in a) Object.prototype.hasOwnProperty.call(a, c) && b(c, a[c]);
    }, ta = function(a) {
        var b = {};
        return sa(a, function(a, d) {
            b[a] = d;
        }), b;
    }, w = function(a, b, c, d) {
        this.i = a, this.b = {}, this.method = b, this.headers = {}, this.body = "", this.N = c, 
        this.c = this.a = null, this.f = [ 200 ], this.g = [], this.h = d;
    }, ua = {
        STATE_CHANGED: "state_changed"
    }, va = {
        RUNNING: "running",
        PAUSED: "paused",
        SUCCESS: "success",
        CANCELED: "canceled",
        ERROR: "error"
    }, wa = function(a) {
        switch (a) {
          case "running":
          case "pausing":
          case "canceling":
            return "running";

          case "paused":
            return "paused";

          case "success":
            return "success";

          case "canceled":
            return "canceled";

          case "error":
          default:
            return "error";
        }
    }, y = function(a) {
        return n(a) && null !== a;
    }, xa = function(a) {
        return "string" == typeof a || a instanceof String;
    }, ya = function() {
        return "undefined" != typeof Blob;
    }, za = function(a, b, c) {
        this.f = c, this.c = a, this.g = b, this.b = 0, this.a = null;
    };
    za.prototype.get = function() {
        var a;
        return 0 < this.b ? (this.b--, a = this.a, this.a = a.next, a.next = null) : a = this.c(), 
        a;
    };
    var Aa = function(a, b) {
        a.g(b), a.b < a.f && (a.b++, b.next = a.a, a.a = b);
    }, Ba = function(a) {
        if (Error.captureStackTrace) Error.captureStackTrace(this, Ba); else {
            var b = Error().stack;
            b && (this.stack = b);
        }
        a && (this.message = String(a));
    };
    u(Ba, Error), Ba.prototype.name = "CustomError";
    var Ca = function(a, b, c, d, e) {
        this.reset(a, b, c, d, e);
    };
    Ca.prototype.a = null;
    var Da = 0;
    Ca.prototype.reset = function(a, b, c, d, e) {
        "number" == typeof e || Da++, d || ja(), this.b = b, delete this.a;
    };
    var Ea = function(a) {
        var d, b = [], c = 0;
        for (d in a) b[c++] = a[d];
        return b;
    }, Fa = function(a) {
        var d, b = [], c = 0;
        for (d in a) b[c++] = d;
        return b;
    }, Ga = "constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "), Ha = function(a, b) {
        for (var c, d, e = 1; e < arguments.length; e++) {
            d = arguments[e];
            for (c in d) a[c] = d[c];
            for (var f = 0; f < Ga.length; f++) c = Ga[f], Object.prototype.hasOwnProperty.call(d, c) && (a[c] = d[c]);
        }
    }, Ia = function(a) {
        a.prototype.then = a.prototype.then, a.prototype.$goog_Thenable = !0;
    }, Ja = function(a) {
        if (!a) return !1;
        try {
            return !!a.$goog_Thenable;
        } catch (b) {
            return !1;
        }
    }, Ka = function(a) {
        return Ka[" "](a), a;
    };
    Ka[" "] = ba;
    var Ma = function(a, b) {
        var c = La;
        return Object.prototype.hasOwnProperty.call(c, a) ? c[a] : c[a] = b(a);
    }, Na = function(a, b) {
        for (var c = a.split("%s"), d = "", e = Array.prototype.slice.call(arguments, 1); e.length && 1 < c.length; ) d += c.shift() + e.shift();
        return d + c.join("%s");
    }, Oa = String.prototype.trim ? function(a) {
        return a.trim();
    } : function(a) {
        return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g, "");
    }, Pa = function(a, b) {
        return a < b ? -1 : a > b ? 1 : 0;
    }, Qa = function(a, b) {
        this.a = a, this.b = b;
    }, z = function(a, b) {
        this.bucket = a, this.path = b;
    }, Ra = function(a) {
        var b = encodeURIComponent;
        return "/b/" + b(a.bucket) + "/o/" + b(a.path);
    }, Sa = function(a) {
        for (var b = null, c = [ {
            ia: /^gs:\/\/([A-Za-z0-9.\-]+)(\/(.*))?$/i,
            ba: {
                bucket: 1,
                path: 3
            },
            ha: function(a) {
                "/" === a.path.charAt(a.path.length - 1) && (a.path = a.path.slice(0, -1));
            }
        }, {
            ia: /^https?:\/\/firebasestorage\.googleapis\.com\/v[A-Za-z0-9_]+\/b\/([A-Za-z0-9.\-]+)\/o(\/([^?#]*).*)?$/i,
            ba: {
                bucket: 1,
                path: 3
            },
            ha: function(a) {
                a.path = decodeURIComponent(a.path);
            }
        } ], d = 0; d < c.length; d++) {
            var e = c[d], f = e.ia.exec(a);
            if (f) {
                b = f[e.ba.bucket], (f = f[e.ba.path]) || (f = ""), b = new z(b, f), e.ha(b);
                break;
            }
        }
        if (null == b) throw new v("invalid-url", "Invalid URL '" + a + "'.");
        return b;
    }, Ta = function(a, b, c) {
        r(a) || y(b) || y(c) ? (this.next = a, this.a = b || null, this.b = c || null) : (this.next = a.next || null, 
        this.a = a.error || null, this.b = a.complete || null);
    }, Ua = {
        RAW: "raw",
        BASE64: "base64",
        BASE64URL: "base64url",
        DATA_URL: "data_url"
    }, Va = function(a) {
        switch (a) {
          case "raw":
          case "base64":
          case "base64url":
          case "data_url":
            break;

          default:
            throw "Expected one of the event types: [raw, base64, base64url, data_url].";
        }
    }, Wa = function(a, b) {
        this.data = a, this.a = b || null;
    }, $a = function(a, b) {
        switch (a) {
          case "raw":
            return new Wa(Xa(b));

          case "base64":
          case "base64url":
            return new Wa(Ya(a, b));

          case "data_url":
            return a = new Za(b), a = a.a ? Ya("base64", a.c) : Xa(a.c), new Wa(a, new Za(b).b);
        }
        throw ma();
    }, Xa = function(a) {
        for (var b = [], c = 0; c < a.length; c++) if (127 >= (d = a.charCodeAt(c))) b.push(d); else if (2047 >= d) b.push(192 | d >> 6, 128 | 63 & d); else if (55296 == (64512 & d)) if (c < a.length - 1 && 56320 == (64512 & a.charCodeAt(c + 1))) {
            var d = 65536 | (1023 & d) << 10 | 1023 & a.charCodeAt(++c);
            b.push(240 | d >> 18, 128 | d >> 12 & 63, 128 | d >> 6 & 63, 128 | 63 & d);
        } else b.push(239, 191, 189); else 56320 == (64512 & d) ? b.push(239, 191, 189) : b.push(224 | d >> 12, 128 | d >> 6 & 63, 128 | 63 & d);
        return new Uint8Array(b);
    }, Ya = function(a, b) {
        switch (a) {
          case "base64":
            var c = -1 !== b.indexOf("-"), d = -1 !== b.indexOf("_");
            if (c || d) throw ra(a, "Invalid character '" + (c ? "-" : "_") + "' found: is it base64url encoded?");
            break;

          case "base64url":
            if (c = -1 !== b.indexOf("+"), d = -1 !== b.indexOf("/"), c || d) throw ra(a, "Invalid character '" + (c ? "+" : "/") + "' found: is it base64 encoded?");
            b = b.replace(/-/g, "+").replace(/_/g, "/");
        }
        var e;
        try {
            e = atob(b);
        } catch (f) {
            throw ra(a, "Invalid character found");
        }
        for (a = new Uint8Array(e.length), b = 0; b < e.length; b++) a[b] = e.charCodeAt(b);
        return a;
    }, Za = function(a) {
        var b = a.match(/^data:([^,]+)?,/);
        if (null === b) throw ra("data_url", "Must be formatted 'data:[<mediatype>][;base64],<data>");
        if (b = b[1] || null, this.a = !1, this.b = null, null != b) {
            var c = b.length - 7;
            this.b = (this.a = 0 <= c && b.indexOf(";base64", c) == c) ? b.substring(0, b.length - 7) : b;
        }
        this.c = a.substring(a.indexOf(",") + 1);
    }, ab = function(a) {
        var b = encodeURIComponent, c = "?";
        return sa(a, function(a, e) {
            a = b(a) + "=" + b(e), c = c + a + "&";
        }), c = c.slice(0, -1);
    }, A = function(a, b, c, d, e, f) {
        this.b = a, this.h = b, this.f = c, this.a = d, this.g = e, this.c = f;
    };
    (k = A.prototype).na = function() {
        return this.b;
    }, k.Ja = function() {
        return this.h;
    }, k.Ga = function() {
        return this.f;
    }, k.Ba = function() {
        return this.a;
    }, k.pa = function() {
        if (y(this.a)) {
            var a = this.a.downloadURLs;
            return y(a) && y(a[0]) ? a[0] : null;
        }
        return null;
    }, k.Ia = function() {
        return this.g;
    }, k.Ea = function() {
        return this.c;
    };
    var bb = function(a, b) {
        b.unshift(a), Ba.call(this, Na.apply(null, b)), b.shift();
    };
    u(bb, Ba), bb.prototype.name = "AssertionError";
    var cb = function(a, b, c, d) {
        e = "Assertion failed";
        if (c) var e = e + ": " + c, f = d; else a && (e += ": " + a, f = b);
        throw new bb("" + e, f || []);
    }, B = function(a, b, c) {
        a || cb("", null, b, Array.prototype.slice.call(arguments, 2));
    }, db = function(a, b) {
        throw new bb("Failure" + (a ? ": " + a : ""), Array.prototype.slice.call(arguments, 1));
    }, eb = function(a, b, c) {
        r(a) || cb("Expected function but got %s: %s.", [ p(a), a ], b, Array.prototype.slice.call(arguments, 2));
    }, fb = function() {
        this.g = this.g, this.o = this.o;
    };
    fb.prototype.g = !1, fb.prototype.ea = function() {
        this.g || (this.g = !0, this.C());
    }, fb.prototype.C = function() {
        if (this.o) for (;this.o.length; ) this.o.shift()();
    };
    var ib, gb = "closure_listenable_" + (1e6 * Math.random() | 0), hb = 0;
    a: {
        var jb = l.navigator;
        if (jb) {
            var kb = jb.userAgent;
            if (kb) {
                ib = kb;
                break a;
            }
        }
        ib = "";
    }
    var C = function(a) {
        return -1 != ib.indexOf(a);
    }, lb = function() {};
    lb.prototype.b = null, lb.prototype.a = ca;
    var mb = function(a) {
        return a.b || (a.b = a.f());
    };
    lb.prototype.f = ca;
    var nb = Array.prototype.indexOf ? function(a, b, c) {
        return B(null != a.length), Array.prototype.indexOf.call(a, b, c);
    } : function(a, b, c) {
        if (c = null == c ? 0 : 0 > c ? Math.max(0, a.length + c) : c, q(a)) return q(b) && 1 == b.length ? a.indexOf(b, c) : -1;
        for (;c < a.length; c++) if (c in a && a[c] === b) return c;
        return -1;
    }, ob = Array.prototype.forEach ? function(a, b, c) {
        B(null != a.length), Array.prototype.forEach.call(a, b, c);
    } : function(a, b, c) {
        for (var d = a.length, e = q(a) ? a.split("") : a, f = 0; f < d; f++) f in e && b.call(c, e[f], f, a);
    }, pb = Array.prototype.filter ? function(a, b, c) {
        return B(null != a.length), Array.prototype.filter.call(a, b, c);
    } : function(a, b, c) {
        for (var d = a.length, e = [], f = 0, g = q(a) ? a.split("") : a, h = 0; h < d; h++) if (h in g) {
            var m = g[h];
            b.call(c, m, h, a) && (e[f++] = m);
        }
        return e;
    }, qb = Array.prototype.map ? function(a, b, c) {
        return B(null != a.length), Array.prototype.map.call(a, b, c);
    } : function(a, b, c) {
        for (var d = a.length, e = Array(d), f = q(a) ? a.split("") : a, g = 0; g < d; g++) g in f && (e[g] = b.call(c, f[g], g, a));
        return e;
    }, rb = Array.prototype.some ? function(a, b, c) {
        return B(null != a.length), Array.prototype.some.call(a, b, c);
    } : function(a, b, c) {
        for (var d = a.length, e = q(a) ? a.split("") : a, f = 0; f < d; f++) if (f in e && b.call(c, e[f], f, a)) return !0;
        return !1;
    }, tb = function(a) {
        var b;
        a: {
            b = sb;
            for (var c = a.length, d = q(a) ? a.split("") : a, e = 0; e < c; e++) if (e in d && b.call(void 0, d[e], e, a)) {
                b = e;
                break a;
            }
            b = -1;
        }
        return 0 > b ? null : q(a) ? a.charAt(b) : a[b];
    }, ub = function(a, b) {
        return 0 <= nb(a, b);
    }, vb = function(a) {
        if ("array" != p(a)) for (var b = a.length - 1; 0 <= b; b--) delete a[b];
        a.length = 0;
    }, wb = function(a, b) {
        var c;
        return (c = 0 <= (b = nb(a, b))) && (B(null != a.length), Array.prototype.splice.call(a, b, 1)), 
        c;
    }, xb = function(a) {
        var b = a.length;
        if (0 < b) {
            for (var c = Array(b), d = 0; d < b; d++) c[d] = a[d];
            return c;
        }
        return [];
    }, zb = new za(function() {
        return new yb();
    }, function(a) {
        a.reset();
    }, 100), Bb = function() {
        var a = Ab, b = null;
        return a.a && (b = a.a, a.a = a.a.next, a.a || (a.b = null), b.next = null), b;
    }, yb = function() {
        this.next = this.b = this.a = null;
    };
    yb.prototype.set = function(a, b) {
        this.a = a, this.b = b, this.next = null;
    }, yb.prototype.reset = function() {
        this.next = this.b = this.a = null;
    };
    var Cb = function(a, b) {
        this.type = a, this.a = this.target = b, this.ja = !0;
    };
    Cb.prototype.b = function() {
        this.ja = !1;
    };
    var Mb, Db = function(a, b, c, d, e) {
        this.listener = a, this.a = null, this.src = b, this.type = c, this.U = !!d, this.N = e, 
        ++hb, this.O = this.T = !1;
    }, Eb = function(a) {
        a.O = !0, a.listener = null, a.a = null, a.src = null, a.N = null;
    }, Fb = /^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/, Gb = function(a, b) {
        return b = pb(b.split("/"), function(a) {
            return 0 < a.length;
        }).join("/"), 0 === a.length ? b : a + "/" + b;
    }, Hb = function(a) {
        var b = a.lastIndexOf("/", a.length - 2);
        return -1 === b ? a : a.slice(b + 1);
    }, Ib = function(a) {
        this.src = a, this.a = {}, this.b = 0;
    }, Kb = function(a, b, c, d, e, f) {
        var g = b.toString();
        (b = a.a[g]) || (b = a.a[g] = [], a.b++);
        var h = Jb(b, c, e, f);
        return -1 < h ? (a = b[h], d || (a.T = !1)) : (a = new Db(c, a.src, g, !!e, f), 
        a.T = d, b.push(a)), a;
    }, Lb = function(a, b) {
        var c = b.type;
        c in a.a && wb(a.a[c], b) && (Eb(b), 0 == a.a[c].length && (delete a.a[c], a.b--));
    }, Jb = function(a, b, c, d) {
        for (var e = 0; e < a.length; ++e) {
            var f = a[e];
            if (!f.O && f.listener == b && f.U == !!c && f.N == d) return e;
        }
        return -1;
    }, Nb = function() {};
    u(Nb, lb), Nb.prototype.a = function() {
        var a = Ob(this);
        return a ? new ActiveXObject(a) : new XMLHttpRequest();
    }, Nb.prototype.f = function() {
        var a = {};
        return Ob(this) && (a[0] = !0, a[1] = !0), a;
    };
    var Ob = function(a) {
        if (!a.c && "undefined" == typeof XMLHttpRequest && "undefined" != typeof ActiveXObject) {
            for (var b = [ "MSXML2.XMLHTTP.6.0", "MSXML2.XMLHTTP.3.0", "MSXML2.XMLHTTP", "Microsoft.XMLHTTP" ], c = 0; c < b.length; c++) {
                var d = b[c];
                try {
                    return new ActiveXObject(d), a.c = d;
                } catch (e) {}
            }
            throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");
        }
        return a.c;
    };
    Mb = new Nb();
    var Pb = function(a) {
        if (this.a = [], a) a: {
            var b;
            if (a instanceof Pb) {
                if (b = a.H(), a = a.A(), 0 >= this.b()) {
                    for (var c = this.a, d = 0; d < b.length; d++) c.push(new Qa(b[d], a[d]));
                    break a;
                }
            } else b = Fa(a), a = Ea(a);
            for (d = 0; d < b.length; d++) Qb(this, b[d], a[d]);
        }
    }, Qb = function(a, b, c) {
        var d = a.a;
        for (d.push(new Qa(b, c)), b = d.length - 1, c = (a = a.a)[b]; 0 < b && (d = b - 1 >> 1, 
        a[d].a > c.a); ) a[b] = a[d], b = d;
        a[b] = c;
    };
    Pb.prototype.A = function() {
        for (var a = this.a, b = [], c = a.length, d = 0; d < c; d++) b.push(a[d].b);
        return b;
    }, Pb.prototype.H = function() {
        for (var a = this.a, b = [], c = a.length, d = 0; d < c; d++) b.push(a[d].a);
        return b;
    }, Pb.prototype.b = function() {
        return this.a.length;
    };
    var Rb = function() {
        this.c = [], this.a = [];
    }, Sb = function(a) {
        return 0 == a.c.length && (a.c = a.a, a.c.reverse(), a.a = []), a.c.pop();
    };
    Rb.prototype.b = function() {
        return this.c.length + this.a.length;
    }, Rb.prototype.A = function() {
        for (var a = [], b = this.c.length - 1; 0 <= b; --b) a.push(this.c[b]);
        for (var c = this.a.length, b = 0; b < c; ++b) a.push(this.a[b]);
        return a;
    };
    var Wb, Tb = function(a) {
        if (a.A && "function" == typeof a.A) return a.A();
        if (q(a)) return a.split("");
        if (da(a)) {
            for (var b = [], c = a.length, d = 0; d < c; d++) b.push(a[d]);
            return b;
        }
        return Ea(a);
    }, Ub = function(a, b) {
        if (a.forEach && "function" == typeof a.forEach) a.forEach(b, void 0); else if (da(a) || q(a)) ob(a, b, void 0); else {
            var c;
            if (a.H && "function" == typeof a.H) c = a.H(); else if (a.A && "function" == typeof a.A) c = void 0; else if (da(a) || q(a)) {
                c = [];
                for (var d = a.length, e = 0; e < d; e++) c.push(e);
            } else c = Fa(a);
            for (var e = (d = Tb(a)).length, f = 0; f < e; f++) b.call(void 0, d[f], c && c[f], a);
        }
    }, Vb = function(a) {
        l.setTimeout(function() {
            throw a;
        }, 0);
    }, Xb = function() {
        var a = l.MessageChannel;
        if (void 0 === a && "undefined" != typeof window && window.postMessage && window.addEventListener && !C("Presto") && (a = function() {
            (a = document.createElement("IFRAME")).style.display = "none", a.src = "", document.documentElement.appendChild(a);
            var b = a.contentWindow;
            (a = b.document).open(), a.write(""), a.close();
            var c = "callImmediate" + Math.random(), d = "file:" == b.location.protocol ? "*" : b.location.protocol + "//" + b.location.host, a = t(function(a) {
                "*" != d && a.origin != d || a.data != c || this.port1.onmessage();
            }, this);
            b.addEventListener("message", a, !1), this.port1 = {}, this.port2 = {
                postMessage: function() {
                    b.postMessage(c, d);
                }
            };
        }), void 0 !== a && !C("Trident") && !C("MSIE")) {
            var b = new a(), c = {}, d = c;
            return b.port1.onmessage = function() {
                if (n(c.next)) {
                    var a = (c = c.next).da;
                    c.da = null, a();
                }
            }, function(a) {
                d.next = {
                    da: a
                }, d = d.next, b.port2.postMessage(0);
            };
        }
        return "undefined" != typeof document && "onreadystatechange" in document.createElement("SCRIPT") ? function(a) {
            var b = document.createElement("SCRIPT");
            b.onreadystatechange = function() {
                b.onreadystatechange = null, b.parentNode.removeChild(b), b = null, a(), a = null;
            }, document.documentElement.appendChild(b);
        } : function(a) {
            l.setTimeout(a, 0);
        };
    }, Yb = "StopIteration" in l ? l.StopIteration : {
        message: "StopIteration",
        stack: ""
    }, Zb = function() {};
    Zb.prototype.next = function() {
        throw Yb;
    }, Zb.prototype.h = function() {
        return this;
    };
    var $b = function() {
        Pb.call(this);
    };
    u($b, Pb);
    var gc, ac = C("Opera"), D = C("Trident") || C("MSIE"), bc = C("Edge"), cc = C("Gecko") && !(-1 != ib.toLowerCase().indexOf("webkit") && !C("Edge")) && !(C("Trident") || C("MSIE")) && !C("Edge"), dc = -1 != ib.toLowerCase().indexOf("webkit") && !C("Edge"), fc = function() {
        var a = l.document;
        return a ? a.documentMode : void 0;
    };
    a: {
        var hc = "", ic = function() {
            var a = ib;
            return cc ? /rv\:([^\);]+)(\)|;)/.exec(a) : bc ? /Edge\/([\d\.]+)/.exec(a) : D ? /\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a) : dc ? /WebKit\/(\S+)/.exec(a) : ac ? /(?:Version)[ \/]?(\S+)/.exec(a) : void 0;
        }();
        if (ic && (hc = ic ? ic[1] : ""), D) {
            var jc = fc();
            if (null != jc && jc > parseFloat(hc)) {
                gc = String(jc);
                break a;
            }
        }
        gc = hc;
    }
    var nc, sc, kc = gc, La = {}, E = function(a) {
        return Ma(a, function() {
            for (var b = 0, c = Oa(String(kc)).split("."), d = Oa(String(a)).split("."), e = Math.max(c.length, d.length), f = 0; 0 == b && f < e; f++) {
                var g = c[f] || "", h = d[f] || "";
                do {
                    if (g = /(\d*)(\D*)(.*)/.exec(g) || [ "", "", "", "" ], h = /(\d*)(\D*)(.*)/.exec(h) || [ "", "", "", "" ], 
                    0 == g[0].length && 0 == h[0].length) break;
                    b = Pa(0 == g[1].length ? 0 : parseInt(g[1], 10), 0 == h[1].length ? 0 : parseInt(h[1], 10)) || Pa(0 == g[2].length, 0 == h[2].length) || Pa(g[2], h[2]), 
                    g = g[3], h = h[3];
                } while (0 == b);
            }
            return 0 <= b;
        });
    }, lc = l.document, mc = lc && D ? fc() || ("CSS1Compat" == lc.compatMode ? parseInt(kc, 10) : 5) : void 0, qc = function(a, b) {
        nc || oc(), pc || (nc(), pc = !0);
        var c = Ab, d = zb.get();
        d.set(a, b), c.b ? c.b.next = d : (B(!c.a), c.a = d), c.b = d;
    }, oc = function() {
        if (l.Promise && l.Promise.resolve) {
            var a = l.Promise.resolve(void 0);
            nc = function() {
                a.then(rc);
            };
        } else nc = function() {
            var a = rc;
            !r(l.setImmediate) || l.Window && l.Window.prototype && !C("Edge") && l.Window.prototype.setImmediate == l.setImmediate ? (Wb || (Wb = Xb()), 
            Wb(a)) : l.setImmediate(a);
        };
    }, pc = !1, Ab = new function() {
        this.b = this.a = null;
    }(), rc = function() {
        for (var a; a = Bb(); ) {
            try {
                a.a.call(a.b);
            } catch (b) {
                Vb(b);
            }
            Aa(zb, a);
        }
        pc = !1;
    };
    (sc = !D) || (sc = 9 <= Number(mc));
    var tc = sc, uc = D && !E("9");
    !dc || E("528"), cc && E("1.9b") || D && E("8") || ac && E("9.5") || dc && E("528"), 
    cc && !E("8") || D && E("9");
    var F = function(a, b) {
        this.c = {}, this.a = [], this.g = this.f = 0;
        var c = arguments.length;
        if (1 < c) {
            if (c % 2) throw Error("Uneven number of arguments");
            for (var d = 0; d < c; d += 2) this.set(arguments[d], arguments[d + 1]);
        } else if (a) {
            a instanceof F ? (c = a.H(), d = a.A()) : (c = Fa(a), d = Ea(a));
            for (var e = 0; e < c.length; e++) this.set(c[e], d[e]);
        }
    };
    F.prototype.b = function() {
        return this.f;
    }, F.prototype.A = function() {
        vc(this);
        for (var a = [], b = 0; b < this.a.length; b++) a.push(this.c[this.a[b]]);
        return a;
    }, F.prototype.H = function() {
        return vc(this), this.a.concat();
    };
    var wc = function(a, b) {
        return !!Object.prototype.hasOwnProperty.call(a.c, b) && (delete a.c[b], a.f--, 
        a.g++, a.a.length > 2 * a.f && vc(a), !0);
    }, vc = function(a) {
        if (a.f != a.a.length) {
            for (var b = 0, c = 0; b < a.a.length; ) {
                var d = a.a[b];
                Object.prototype.hasOwnProperty.call(a.c, d) && (a.a[c++] = d), b++;
            }
            a.a.length = c;
        }
        if (a.f != a.a.length) {
            for (var e = {}, c = b = 0; b < a.a.length; ) d = a.a[b], Object.prototype.hasOwnProperty.call(e, d) || (a.a[c++] = d, 
            e[d] = 1), b++;
            a.a.length = c;
        }
    };
    F.prototype.get = function(a, b) {
        return Object.prototype.hasOwnProperty.call(this.c, a) ? this.c[a] : b;
    }, F.prototype.set = function(a, b) {
        Object.prototype.hasOwnProperty.call(this.c, a) || (this.f++, this.a.push(a), this.g++), 
        this.c[a] = b;
    }, F.prototype.forEach = function(a, b) {
        for (var c = this.H(), d = 0; d < c.length; d++) {
            var e = c[d], f = this.get(e);
            a.call(b, f, e, this);
        }
    }, F.prototype.h = function(a) {
        vc(this);
        var b = 0, c = this.g, d = this, e = new Zb();
        return e.next = function() {
            if (c != d.g) throw Error("The map has changed since the iterator was created");
            if (b >= d.a.length) throw Yb;
            var e = d.a[b++];
            return a ? e : d.c[e];
        }, e;
    };
    var xc = function(a, b) {
        if (Cb.call(this, a ? a.type : ""), this.c = this.a = this.target = null, a) {
            if (this.type = a.type, this.target = a.target || a.srcElement, this.a = b, (b = a.relatedTarget) && cc) try {
                Ka(b.nodeName);
            } catch (c) {}
            this.c = a, a.defaultPrevented && this.b();
        }
    };
    u(xc, Cb), xc.prototype.b = function() {
        xc.I.b.call(this);
        var a = this.c;
        if (a.preventDefault) a.preventDefault(); else if (a.returnValue = !1, uc) try {
            (a.ctrlKey || 112 <= a.keyCode && 123 >= a.keyCode) && (a.keyCode = -1);
        } catch (b) {}
    };
    var G = function(a, b) {
        if (this.a = 0, this.i = void 0, this.c = this.b = this.f = null, this.g = this.h = !1, 
        a != ba) try {
            var c = this;
            a.call(b, function(a) {
                yc(c, 2, a);
            }, function(a) {
                try {
                    if (a instanceof Error) throw a;
                    throw Error("Promise rejected.");
                } catch (e) {}
                yc(c, 3, a);
            });
        } catch (d) {
            yc(this, 3, d);
        }
    }, zc = function() {
        this.next = this.f = this.c = this.a = this.b = null, this.g = !1;
    };
    zc.prototype.reset = function() {
        this.f = this.c = this.a = this.b = null, this.g = !1;
    };
    var Ac = new za(function() {
        return new zc();
    }, function(a) {
        a.reset();
    }, 100), Bc = function(a, b, c) {
        var d = Ac.get();
        return d.a = a, d.c = b, d.f = c, d;
    }, Cc = function(a) {
        if (a instanceof G) return a;
        var b = new G(ba);
        return yc(b, 2, a), b;
    }, Dc = function(a) {
        return new G(function(b, c) {
            c(a);
        });
    };
    G.prototype.then = function(a, b, c) {
        return null != a && eb(a, "opt_onFulfilled should be a function."), null != b && eb(b, "opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?"), 
        Ec(this, r(a) ? a : null, r(b) ? b : null, c);
    }, Ia(G), G.prototype.l = function(a, b) {
        return Ec(this, null, a, b);
    };
    var Gc = function(a, b) {
        a.b || 2 != a.a && 3 != a.a || Fc(a), B(null != b.a), a.c ? a.c.next = b : a.b = b, 
        a.c = b;
    }, Ec = function(a, b, c, d) {
        var e = Bc(null, null, null);
        return e.b = new G(function(a, g) {
            e.a = b ? function(c) {
                try {
                    var e = b.call(d, c);
                    a(e);
                } catch (x) {
                    g(x);
                }
            } : a, e.c = c ? function(b) {
                try {
                    var e = c.call(d, b);
                    a(e);
                } catch (x) {
                    g(x);
                }
            } : g;
        }), e.b.f = a, Gc(a, e), e.b;
    };
    G.prototype.o = function(a) {
        B(1 == this.a), this.a = 0, yc(this, 2, a);
    }, G.prototype.m = function(a) {
        B(1 == this.a), this.a = 0, yc(this, 3, a);
    };
    var yc = function(a, b, c) {
        if (0 == a.a) {
            a === c && (b = 3, c = new TypeError("Promise cannot resolve to itself")), a.a = 1;
            var d;
            a: {
                var e = c, f = a.o, g = a.m;
                if (e instanceof G) null != f && eb(f, "opt_onFulfilled should be a function."), 
                null != g && eb(g, "opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?"), 
                Gc(e, Bc(f || ba, g || null, a)), d = !0; else if (Ja(e)) e.then(f, g, a), d = !0; else {
                    if (ea(e)) try {
                        var h = e.then;
                        if (r(h)) {
                            Hc(e, h, f, g, a), d = !0;
                            break a;
                        }
                    } catch (m) {
                        g.call(a, m), d = !0;
                        break a;
                    }
                    d = !1;
                }
            }
            d || (a.i = c, a.a = b, a.f = null, Fc(a), 3 != b || Ic(a, c));
        }
    }, Hc = function(a, b, c, d, e) {
        var f = !1, h = function(a) {
            f || (f = !0, d.call(e, a));
        };
        try {
            b.call(a, function(a) {
                f || (f = !0, c.call(e, a));
            }, h);
        } catch (m) {
            h(m);
        }
    }, Fc = function(a) {
        a.h || (a.h = !0, qc(a.j, a));
    }, Jc = function(a) {
        var b = null;
        return a.b && (b = a.b, a.b = b.next, b.next = null), a.b || (a.c = null), null != b && B(null != b.a), 
        b;
    };
    G.prototype.j = function() {
        for (var a; a = Jc(this); ) {
            var b = this.a, c = this.i;
            if (3 == b && a.c && !a.g) {
                var d;
                for (d = this; d && d.g; d = d.f) d.g = !1;
            }
            if (a.b) a.b.f = null, Kc(a, b, c); else try {
                a.g ? a.a.call(a.f) : Kc(a, b, c);
            } catch (e) {
                Lc.call(null, e);
            }
            Aa(Ac, a);
        }
        this.h = !1;
    };
    var Kc = function(a, b, c) {
        2 == b ? a.a.call(a.f, c) : a.c && a.c.call(a.f, c);
    }, Ic = function(a, b) {
        a.g = !0, qc(function() {
            a.g && Lc.call(null, b);
        });
    }, Lc = Vb, Nc = function(a) {
        if (this.a = new F(), a) for (var b = (a = Tb(a)).length, c = 0; c < b; c++) {
            var d = a[c];
            this.a.set(Mc(d), d);
        }
    }, Mc = function(a) {
        var b = typeof a;
        return "object" == b && a || "function" == b ? "o" + (a[fa] || (a[fa] = ++ga)) : b.substr(0, 1) + a;
    };
    Nc.prototype.b = function() {
        return this.a.b();
    }, Nc.prototype.A = function() {
        return this.a.A();
    }, Nc.prototype.h = function() {
        return this.a.h(!1);
    };
    var Oc = function(a) {
        return function() {
            var b = [];
            Array.prototype.push.apply(b, arguments), Cc(!0).then(function() {
                a.apply(null, b);
            });
        };
    }, Pc = "closure_lm_" + (1e6 * Math.random() | 0), Qc = {}, Rc = 0, Sc = function(a, b, c, d, e) {
        if ("array" == p(b)) {
            for (var f = 0; f < b.length; f++) Sc(a, b[f], c, d, e);
            return null;
        }
        return c = Tc(c), a && a[gb] ? (Uc(a), a = Kb(a.b, String(b), c, !1, d, e)) : a = Vc(a, b, c, !1, d, e), 
        a;
    }, Vc = function(a, b, c, d, e, f) {
        if (!b) throw Error("Invalid event type");
        var g = !!e, h = Wc(a);
        if (h || (a[Pc] = h = new Ib(a)), (c = Kb(h, b, c, d, e, f)).a) return c;
        if (d = Xc(), c.a = d, d.src = a, d.listener = c, a.addEventListener) a.addEventListener(b.toString(), d, g); else {
            if (!a.attachEvent) throw Error("addEventListener and attachEvent are unavailable.");
            a.attachEvent(Yc(b.toString()), d);
        }
        return Rc++, c;
    }, Xc = function() {
        var a = Zc, b = tc ? function(c) {
            return a.call(b.src, b.listener, c);
        } : function(c) {
            if (!(c = a.call(b.src, b.listener, c))) return c;
        };
        return b;
    }, $c = function(a, b, c, d, e) {
        if ("array" == p(b)) for (var f = 0; f < b.length; f++) $c(a, b[f], c, d, e); else c = Tc(c), 
        a && a[gb] ? Kb(a.b, String(b), c, !0, d, e) : Vc(a, b, c, !0, d, e);
    }, ad = function(a, b, c, d, e) {
        if ("array" == p(b)) for (var f = 0; f < b.length; f++) ad(a, b[f], c, d, e); else c = Tc(c), 
        a && a[gb] ? (a = a.b, (b = String(b).toString()) in a.a && (f = a.a[b], -1 < (c = Jb(f, c, d, e)) && (Eb(f[c]), 
        B(null != f.length), Array.prototype.splice.call(f, c, 1), 0 == f.length && (delete a.a[b], 
        a.b--)))) : a && (a = Wc(a)) && (b = a.a[b.toString()], a = -1, b && (a = Jb(b, c, !!d, e)), 
        (c = -1 < a ? b[a] : null) && bd(c));
    }, bd = function(a) {
        if ("number" != typeof a && a && !a.O) {
            var b = a.src;
            if (b && b[gb]) Lb(b.b, a); else {
                var c = a.type, d = a.a;
                b.removeEventListener ? b.removeEventListener(c, d, a.U) : b.detachEvent && b.detachEvent(Yc(c), d), 
                Rc--, (c = Wc(b)) ? (Lb(c, a), 0 == c.b && (c.src = null, b[Pc] = null)) : Eb(a);
            }
        }
    }, Yc = function(a) {
        return a in Qc ? Qc[a] : Qc[a] = "on" + a;
    }, dd = function(a, b, c, d) {
        var e = !0;
        if ((a = Wc(a)) && (b = a.a[b.toString()])) for (b = b.concat(), a = 0; a < b.length; a++) {
            var f = b[a];
            f && f.U == c && !f.O && (f = cd(f, d), e = e && !1 !== f);
        }
        return e;
    }, cd = function(a, b) {
        var c = a.listener, d = a.N || a.src;
        return a.T && bd(a), c.call(d, b);
    }, Zc = function(a, b) {
        if (a.O) return !0;
        if (!tc) {
            if (!b) a: {
                b = [ "window", "event" ];
                for (var d, c = l; d = b.shift(); ) {
                    if (null == c[d]) {
                        b = null;
                        break a;
                    }
                    c = c[d];
                }
                b = c;
            }
            if (d = b, b = new xc(d, this), c = !0, !(0 > d.keyCode || void 0 != d.returnValue)) {
                a: {
                    var e = !1;
                    if (0 == d.keyCode) try {
                        d.keyCode = -1;
                        break a;
                    } catch (g) {
                        e = !0;
                    }
                    (e || void 0 == d.returnValue) && (d.returnValue = !0);
                }
                for (d = [], e = b.a; e; e = e.parentNode) d.push(e);
                for (a = a.type, e = d.length - 1; 0 <= e; e--) {
                    b.a = d[e];
                    var f = dd(d[e], a, !0, b), c = c && f;
                }
                for (e = 0; e < d.length; e++) b.a = d[e], f = dd(d[e], a, !1, b), c = c && f;
            }
            return c;
        }
        return cd(a, new xc(b, this));
    }, Wc = function(a) {
        return (a = a[Pc]) instanceof Ib ? a : null;
    }, ed = "__closure_events_fn_" + (1e9 * Math.random() >>> 0), Tc = function(a) {
        return B(a, "Listener can not be null."), r(a) ? a : (B(a.handleEvent, "An object listener must have handleEvent method."), 
        a[ed] || (a[ed] = function(b) {
            return a.handleEvent(b);
        }), a[ed]);
    }, H = function(a, b) {
        if (fb.call(this), this.m = a || 0, this.f = b || 10, this.m > this.f) throw Error("[goog.structs.Pool] Min can not be greater than max");
        this.a = new Rb(), this.c = new Nc(), this.j = null, this.S();
    };
    u(H, fb), H.prototype.W = function() {
        var a = ja();
        if (!(null != this.j && 0 > a - this.j)) {
            for (var b; 0 < this.a.b() && (b = Sb(this.a), !this.l(b)); ) this.S();
            return !b && this.b() < this.f && (b = this.i()), b && (this.j = a, this.c.a.set(Mc(b), b)), 
            b;
        }
    };
    var gd = function(a) {
        var b = fd;
        wc(b.c.a, Mc(a)) && b.$(a);
    };
    H.prototype.$ = function(a) {
        wc(this.c.a, Mc(a)), this.l(a) && this.b() < this.f ? this.a.a.push(a) : hd(a);
    }, H.prototype.S = function() {
        for (var a = this.a; this.b() < this.m; ) {
            var b = this.i();
            a.a.push(b);
        }
        for (;this.b() > this.f && 0 < this.a.b(); ) hd(Sb(a));
    }, H.prototype.i = function() {
        return {};
    };
    var hd = function(a) {
        if ("function" == typeof a.ea) a.ea(); else for (var b in a) a[b] = null;
    };
    H.prototype.l = function(a) {
        return "function" != typeof a.oa || a.oa();
    }, H.prototype.b = function() {
        return this.a.b() + this.c.b();
    }, H.prototype.C = function() {
        if (H.I.C.call(this), 0 < this.c.b()) throw Error("[goog.structs.Pool] Objects not released");
        delete this.c;
        for (var a = this.a; 0 != a.c.length || 0 != a.a.length; ) hd(Sb(a));
        delete this.a;
    };
    var id = function(a, b) {
        this.c = [], this.m = b || null, this.a = this.h = !1, this.b = void 0, this.j = this.g = !1, 
        this.f = 0, this.i = null, this.o = 0;
    };
    id.prototype.l = function(a, b) {
        this.g = !1, this.h = !0, this.b = b, this.a = !a, jd(this);
    };
    var kd = function(a, b, c) {
        B(!a.j, "Blocking Deferreds can not be re-used"), a.c.push([ b, c, void 0 ]), a.h && jd(a);
    };
    id.prototype.then = function(a, b, c) {
        var d, e, f = new G(function(a, b) {
            d = a, e = b;
        });
        return kd(this, d, function(a) {
            e(a);
        }), f.then(a, b, c);
    }, Ia(id);
    var ld = function(a) {
        return rb(a.c, function(a) {
            return r(a[1]);
        });
    }, jd = function(a) {
        if (a.f && a.h && ld(a)) {
            var b = a.f, c = md[b];
            c && (l.clearTimeout(c.a), delete md[b]), a.f = 0;
        }
        a.i && (a.i.o--, delete a.i);
        for (var b = a.b, d = c = !1; a.c.length && !a.g; ) {
            var f = (e = a.c.shift())[0], g = e[1], e = e[2];
            if (f = a.a ? g : f) try {
                var h = f.call(e || a.m, b);
                n(h) && (a.a = a.a && (h == b || h instanceof Error), a.b = b = h), (Ja(b) || "function" == typeof l.Promise && b instanceof l.Promise) && (d = !0, 
                a.g = !0);
            } catch (m) {
                b = m, a.a = !0, ld(a) || (c = !0);
            }
        }
        a.b = b, d && (h = t(a.l, a, !0), d = t(a.l, a, !1), b instanceof id ? (kd(b, h, d), 
        b.j = !0) : b.then(h, d)), c && (b = new nd(b), md[b.a] = b, a.f = b.a);
    }, nd = function(a) {
        this.a = l.setTimeout(t(this.c, this), 0), this.b = a;
    };
    nd.prototype.c = function() {
        throw B(md[this.a], "Cannot throw an error that is not scheduled."), delete md[this.a], 
        this.b;
    };
    var md = {}, od = function(a) {
        this.f = a, this.b = this.c = this.a = null;
    }, pd = function(a, b) {
        this.name = a, this.value = b;
    };
    pd.prototype.toString = function() {
        return this.name;
    };
    var qd = new pd("SEVERE", 1e3), rd = new pd("CONFIG", 700), sd = new pd("FINE", 500), td = function(a) {
        return a.c ? a.c : a.a ? td(a.a) : (db("Root logger has no level set."), null);
    };
    od.prototype.log = function(a, b, c) {
        if (a.value >= td(this).value) for (r(b) && (b = b()), a = new Ca(a, String(b), this.f), 
        c && (a.a = c), c = "log:" + a.b, l.console && (l.console.timeStamp ? l.console.timeStamp(c) : l.console.markTimeline && l.console.markTimeline(c)), 
        l.msWriteProfilerMark && l.msWriteProfilerMark(c), c = this; c; ) c = c.a;
    };
    var ud = {}, vd = null, wd = function(a) {
        vd || (vd = new od(""), ud[""] = vd, vd.c = rd);
        var b;
        if (!(b = ud[a])) {
            b = new od(a);
            var c = a.lastIndexOf("."), d = a.substr(c + 1);
            (c = wd(a.substr(0, c))).b || (c.b = {}), c.b[d] = b, b.a = c, ud[a] = b;
        }
        return b;
    }, xd = function() {
        fb.call(this), this.b = new Ib(this), this.Y = this, this.G = null;
    };
    u(xd, fb), xd.prototype[gb] = !0, xd.prototype.removeEventListener = function(a, b, c, d) {
        ad(this, a, b, c, d);
    };
    var I = function(a, b) {
        Uc(a);
        var c, d = a.G;
        if (d) {
            c = [];
            for (e = 1; d; d = d.G) c.push(d), B(1e3 > ++e, "infinite loop");
        }
        a = a.Y, d = b.type || b, q(b) ? b = new Cb(b, a) : b instanceof Cb ? b.target = b.target || a : (e = b, 
        b = new Cb(d, a), Ha(b, e));
        var f, e = !0;
        if (c) for (var g = c.length - 1; 0 <= g; g--) f = b.a = c[g], e = yd(f, d, !0, b) && e;
        if (f = b.a = a, e = yd(f, d, !0, b) && e, e = yd(f, d, !1, b) && e, c) for (g = 0; g < c.length; g++) f = b.a = c[g], 
        e = yd(f, d, !1, b) && e;
    };
    xd.prototype.C = function() {
        if (xd.I.C.call(this), this.b) {
            var c, a = this.b;
            for (c in a.a) {
                for (var d = a.a[c], e = 0; e < d.length; e++) 0, Eb(d[e]);
                delete a.a[c], a.b--;
            }
        }
        this.G = null;
    };
    var yd = function(a, b, c, d) {
        if (!(b = a.b.a[String(b)])) return !0;
        b = b.concat();
        for (var e = !0, f = 0; f < b.length; ++f) {
            var g = b[f];
            if (g && !g.O && g.U == c) {
                var h = g.listener, m = g.N || g.src;
                g.T && Lb(a.b, g), e = !1 !== h.call(m, d) && e;
            }
        }
        return e && 0 != d.ja;
    }, Uc = function(a) {
        B(a.b, "Event target is not initialized. Did you call the superclass (goog.events.EventTarget) constructor?");
    }, J = function(a, b) {
        this.h = new $b(), H.call(this, a, b);
    };
    u(J, H), (k = J.prototype).W = function(a, b) {
        if (!a) return J.I.W.call(this);
        Qb(this.h, n(b) ? b : 100, a), this.aa();
    }, k.aa = function() {
        for (var a = this.h; 0 < a.b(); ) {
            var b = this.W();
            if (!b) break;
            var c, d = a, f = (e = d.a).length;
            if (c = e[0], 0 >= f) c = void 0; else {
                if (1 == f) vb(e); else {
                    e[0] = e.pop();
                    for (var e = 0, f = (d = d.a).length, g = d[e]; e < f >> 1; ) {
                        var h = 2 * e + 1, m = 2 * e + 2;
                        if (d[h = m < f && d[m].a < d[h].a ? m : h].a > g.a) break;
                        d[e] = d[h], e = h;
                    }
                    d[e] = g;
                }
                c = c.b;
            }
            c.apply(this, [ b ]);
        }
    }, k.$ = function(a) {
        J.I.$.call(this, a), this.aa();
    }, k.S = function() {
        J.I.S.call(this), this.aa();
    }, k.C = function() {
        J.I.C.call(this), l.clearTimeout(void 0), vb(this.h.a), this.h = null;
    };
    var K = function(a, b) {
        a && a.log(sd, b, void 0);
    }, zd = function(a, b, c) {
        if (r(a)) c && (a = t(a, c)); else {
            if (!a || "function" != typeof a.handleEvent) throw Error("Invalid listener argument");
            a = t(a.handleEvent, a);
        }
        return 2147483647 < Number(b) ? -1 : l.setTimeout(a, b || 0);
    }, L = function(a) {
        xd.call(this), this.headers = new F(), this.B = a || null, this.c = !1, this.w = this.a = null, 
        this.L = this.l = "", this.J = 0, this.h = "", this.f = this.F = this.j = this.D = !1, 
        this.i = 0, this.m = null, this.R = "", this.u = this.ca = this.X = !1;
    };
    u(L, xd);
    var Ad = L.prototype, Bd = wd("goog.net.XhrIo");
    Ad.v = Bd;
    var Cd = /^https?$/i, Dd = [ "POST", "PUT" ];
    L.prototype.send = function(a, b, c, d) {
        if (this.a) throw Error("[goog.net.XhrIo] Object is active with another request=" + this.l + "; newUri=" + a);
        b = b ? b.toUpperCase() : "GET", this.l = a, this.h = "", this.J = 0, this.L = b, 
        this.D = !1, this.c = !0, this.a = this.B ? this.B.a() : Mb.a(), this.w = mb(this.B ? this.B : Mb), 
        this.a.onreadystatechange = t(this.P, this), this.ca && "onprogress" in this.a && (this.a.onprogress = t(function(a) {
            this.M(a, !0);
        }, this), this.a.upload && (this.a.upload.onprogress = t(this.M, this)));
        try {
            K(this.v, M(this, "Opening Xhr")), this.F = !0, this.a.open(b, String(a), !0), this.F = !1;
        } catch (f) {
            return K(this.v, M(this, "Error opening Xhr: " + f.message)), void Ed(this, f);
        }
        a = c || "";
        var e = new F(this.headers);
        d && Ub(d, function(a, b) {
            e.set(b, a);
        }), d = tb(e.H()), c = l.FormData && a instanceof l.FormData, !ub(Dd, b) || d || c || e.set("Content-Type", "application/x-www-form-urlencoded;charset=utf-8"), 
        e.forEach(function(a, b) {
            this.a.setRequestHeader(b, a);
        }, this), this.R && (this.a.responseType = this.R), "withCredentials" in this.a && this.a.withCredentials !== this.X && (this.a.withCredentials = this.X);
        try {
            Fd(this), 0 < this.i && (this.u = Gd(this.a), K(this.v, M(this, "Will abort after " + this.i + "ms if incomplete, xhr2 " + this.u)), 
            this.u ? (this.a.timeout = this.i, this.a.ontimeout = t(this.K, this)) : this.m = zd(this.K, this.i, this)), 
            K(this.v, M(this, "Sending request")), this.j = !0, this.a.send(a), this.j = !1;
        } catch (f) {
            K(this.v, M(this, "Send error: " + f.message)), Ed(this, f);
        }
    };
    var Gd = function(a) {
        return D && E(9) && "number" == typeof a.timeout && n(a.ontimeout);
    }, sb = function(a) {
        return "content-type" == a.toLowerCase();
    };
    L.prototype.K = function() {
        void 0 !== aa && this.a && (this.h = "Timed out after " + this.i + "ms, aborting", 
        this.J = 8, K(this.v, M(this, this.h)), I(this, "timeout"), Hd(this, 8));
    };
    var Ed = function(a, b) {
        a.c = !1, a.a && (a.f = !0, a.a.abort(), a.f = !1), a.h = b, a.J = 5, Id(a), Jd(a);
    }, Id = function(a) {
        a.D || (a.D = !0, I(a, "complete"), I(a, "error"));
    }, Hd = function(a, b) {
        a.a && a.c && (K(a.v, M(a, "Aborting")), a.c = !1, a.f = !0, a.a.abort(), a.f = !1, 
        a.J = b || 7, I(a, "complete"), I(a, "abort"), Jd(a));
    };
    L.prototype.C = function() {
        this.a && (this.c && (this.c = !1, this.f = !0, this.a.abort(), this.f = !1), Jd(this, !0)), 
        L.I.C.call(this);
    }, L.prototype.P = function() {
        this.g || (this.F || this.j || this.f ? Kd(this) : this.Z());
    }, L.prototype.Z = function() {
        Kd(this);
    };
    var Kd = function(a) {
        if (a.c && void 0 !== aa) if (a.w[1] && 4 == Ld(a) && 2 == P(a)) K(a.v, M(a, "Local request error detected and ignored")); else if (a.j && 4 == Ld(a)) zd(a.P, 0, a); else if (I(a, "readystatechange"), 
        4 == Ld(a)) {
            K(a.v, M(a, "Request complete")), a.c = !1;
            try {
                if (Md(a)) I(a, "complete"), I(a, "success"); else {
                    a.J = 6;
                    var b;
                    try {
                        b = 2 < Ld(a) ? a.a.statusText : "";
                    } catch (c) {
                        K(a.v, "Can not get status: " + c.message), b = "";
                    }
                    a.h = b + " [" + P(a) + "]", Id(a);
                }
            } finally {
                Jd(a);
            }
        }
    };
    L.prototype.M = function(a, b) {
        B("progress" === a.type, "goog.net.EventType.PROGRESS is of the same type as raw XHR progress."), 
        I(this, Nd(a, "progress")), I(this, Nd(a, b ? "downloadprogress" : "uploadprogress"));
    };
    var Nd = function(a, b) {
        return {
            type: b,
            lengthComputable: a.lengthComputable,
            loaded: a.loaded,
            total: a.total
        };
    }, Jd = function(a, b) {
        if (a.a) {
            Fd(a);
            var c = a.a, d = a.w[0] ? ba : null;
            a.a = null, a.w = null, b || I(a, "ready");
            try {
                c.onreadystatechange = d;
            } catch (e) {
                (a = a.v) && a.log(qd, "Problem encountered resetting onreadystatechange: " + e.message, void 0);
            }
        }
    }, Fd = function(a) {
        a.a && a.u && (a.a.ontimeout = null), "number" == typeof a.m && (l.clearTimeout(a.m), 
        a.m = null);
    }, Md = function(a) {
        var c, b = P(a);
        a: switch (b) {
          case 200:
          case 201:
          case 202:
          case 204:
          case 206:
          case 304:
          case 1223:
            c = !0;
            break a;

          default:
            c = !1;
        }
        return c || ((b = 0 === b) && (!(a = String(a.l).match(Fb)[1] || null) && l.self && l.self.location && (a = l.self.location.protocol, 
        a = a.substr(0, a.length - 1)), b = !Cd.test(a ? a.toLowerCase() : "")), c = b), 
        c;
    }, Ld = function(a) {
        return a.a ? a.a.readyState : 0;
    }, P = function(a) {
        try {
            return 2 < Ld(a) ? a.a.status : -1;
        } catch (b) {
            return -1;
        }
    }, Od = function(a) {
        try {
            return a.a ? a.a.responseText : "";
        } catch (b) {
            return K(a.v, "Can not get responseText: " + b.message), "";
        }
    }, Pd = function(a, b) {
        return a.a && 4 == Ld(a) ? a.a.getResponseHeader(b) : void 0;
    }, M = function(a, b) {
        return b + " [" + a.L + " " + a.l + " " + P(a) + "]";
    }, Qd = function(a, b, c, d) {
        this.u = a, this.w = !!d, J.call(this, b, c);
    };
    u(Qd, J), Qd.prototype.i = function() {
        var a = new L(), b = this.u;
        return b && b.forEach(function(b, d) {
            a.headers.set(d, b);
        }), this.w && (a.X = !0), a;
    }, Qd.prototype.l = function(a) {
        return !a.g && !a.a;
    };
    var fd = new Qd(), Sd = function(a, b, c, d, e, f, g, h, m, x, O) {
        this.L = a, this.G = b, this.B = c, this.u = d, this.K = e.slice(), this.m = f.slice(), 
        this.l = this.o = this.f = this.c = null, this.h = this.i = !1, this.w = g, this.j = h, 
        this.g = x, this.M = O, this.F = m;
        var N = this;
        this.D = new G(function(a, b) {
            N.o = a, N.l = b, Rd(N);
        });
    }, Td = function(a, b, c) {
        this.b = a, this.c = b, this.a = !!c;
    }, Rd = function(a) {
        function c(a, b) {
            var c = d.o;
            a = d.l;
            var e = b.c;
            if (b.b) try {
                var f = d.w(e, Od(e));
                n(f) ? c(f) : c();
            } catch (x) {
                a(x);
            } else null !== e ? (b = ma(), f = Od(e), b.serverResponse = f, a(d.j ? d.j(e, b) : b)) : (b = b.a ? d.h ? qa() : na() : new v("retry-limit-exceeded", "Max retry time for operation exceeded, please try again."), 
            a(b));
            gd(e);
        }
        var d = a;
        a.i ? c(0, new Td(!1, null, !0)) : a.f = ka(function(a, b) {
            b ? a(!1, new Td(!1, null, !0)) : fd.W(function(b) {
                b.X = d.M, d.c = b;
                var c = null;
                null !== d.g && (b.ca = !0, c = Sc(b, "uploadprogress", function(a) {
                    d.g(a.loaded, a.lengthComputable ? a.total : -1);
                }), b.ca = null !== d.g), b.send(d.L, d.G, d.u, d.B), $c(b, "complete", function(b) {
                    null !== c && bd(c), d.c = null;
                    var e = 6 === (b = b.target).J && 100 <= P(b), f = Md(b) || e, e = P(b);
                    if (!(f = !f)) var g = d, f = 500 <= e && 600 > e, h = ub([ 408, 429 ], e), g = ub(g.m, e), f = f || h || g;
                    f ? (e = 7 === b.J, gd(b), a(!1, new Td(!1, null, e))) : (e = ub(d.K, e), a(!0, new Td(e, b)));
                });
            });
        }, c, a.F);
    };
    Sd.prototype.a = function() {
        return this.D;
    }, Sd.prototype.b = function(a) {
        this.i = !0, this.h = a || !1, null !== this.f && (0, this.f)(!1), null !== this.c && Hd(this.c);
    };
    var Ud = function(a, b, c) {
        var d = ab(a.b), d = a.i + d, e = a.headers ? ta(a.headers) : {};
        return null !== b && 0 < b.length && (e.Authorization = "Firebase " + b), e["X-Firebase-Storage-Version"] = "webjs/" + (void 0 !== firebase ? firebase.SDK_VERSION : "AppManager"), 
        new Sd(d, a.method, e, a.body, a.f, a.g, a.N, a.a, a.h, a.c, c);
    }, Vd = function(a) {
        b = l.BlobBuilder || l.WebKitBlobBuilder;
        if (n(b)) {
            for (var b = new b(), c = 0; c < arguments.length; c++) b.append(arguments[c]);
            return b.getBlob();
        }
        if (b = xb(arguments), c = l.BlobBuilder || l.WebKitBlobBuilder, n(c)) {
            for (var c = new c(), d = 0; d < b.length; d++) c.append(b[d], void 0);
            b = c.getBlob(void 0);
        } else {
            if (!n(l.Blob)) throw Error("This browser doesn't seem to support creating Blobs");
            b = new Blob(b, {});
        }
        return b;
    }, Wd = function(a, b, c) {
        return n(c) || (c = a.size), a.webkitSlice ? a.webkitSlice(b, c) : a.mozSlice ? a.mozSlice(b, c) : a.slice ? cc && !E("13.0") || dc && !E("537.1") ? (0 > b && (b += a.size), 
        0 > b && (b = 0), 0 > c && (c += a.size), c < b && (c = b), a.slice(b, c - b)) : a.slice(b, c) : null;
    }, Q = function(a, b) {
        ya() && a instanceof Blob ? (this.s = a, b = a.size, a = a.type) : (a instanceof ArrayBuffer ? (b ? this.s = new Uint8Array(a) : (this.s = new Uint8Array(a.byteLength), 
        this.s.set(new Uint8Array(a))), b = this.s.length) : (b ? this.s = a : (this.s = new Uint8Array(a.length), 
        this.s.set(a)), b = a.length), a = ""), this.a = b, this.b = a;
    };
    Q.prototype.type = function() {
        return this.b;
    }, Q.prototype.slice = function(a, b) {
        return ya() && this.s instanceof Blob ? null === (a = Wd(this.s, a, b)) ? null : new Q(a) : (a = new Uint8Array(this.s.buffer, a, b - a), 
        new Q(a, !0));
    };
    var Xd = function(a) {
        b = [];
        if (Array.prototype.push.apply(b, arguments), ya()) return b = qb(b, function(a) {
            return a instanceof Q ? a.s : a;
        }), new Q(Vd.apply(null, b));
        var b = qb(b, function(a) {
            return xa(a) ? $a("raw", a).data.buffer : a.s.buffer;
        }), c = 0;
        ob(b, function(a) {
            c += a.byteLength;
        });
        var d = new Uint8Array(c), e = 0;
        return ob(b, function(a) {
            a = new Uint8Array(a);
            for (var b = 0; b < a.length; b++) d[e++] = a[b];
        }), new Q(d, !0);
    }, Yd = function(a) {
        this.c = Dc(a);
    };
    Yd.prototype.a = function() {
        return this.c;
    }, Yd.prototype.b = function() {};
    var Zd = function() {
        this.a = {}, this.b = Number.MIN_SAFE_INTEGER;
    }, $d = function(a, b) {
        function c() {
            delete e.a[d];
        }
        var d = a.b;
        a.b++, a.a[d] = b;
        var e = a;
        b.a().then(c, c);
    }, ae = function(a) {
        sa(a.a, function(a, c) {
            c && c.b(!0);
        }), a.a = {};
    }, be = function(a, b, c, d) {
        if (this.a = a, this.g = null, null !== this.a && (a = this.a.options, y(a))) {
            if (null == (a = a.storageBucket || null)) a = null; else {
                var e = null;
                try {
                    e = Sa(a);
                } catch (f) {}
                if (null !== e) {
                    if ("" !== e.path) throw new v("invalid-default-bucket", "Invalid default bucket '" + a + "'.");
                    a = e.bucket;
                }
            }
            this.g = a;
        }
        this.l = b, this.j = c, this.i = d, this.c = 12e4, this.b = 6e4, this.h = new Zd(), 
        this.f = !1;
    }, ce = function(a) {
        return null !== a.a && y(a.a.INTERNAL) && y(a.a.INTERNAL.getToken) ? a.a.INTERNAL.getToken().then(function(a) {
            return y(a) ? a.accessToken : null;
        }, function() {
            return null;
        }) : Cc(null);
    };
    be.prototype.bucket = function() {
        if (this.f) throw qa();
        return this.g;
    };
    var R = function(a, b, c) {
        return a.f ? new Yd(qa()) : (b = a.j(b, c, null === a.a), $d(a.h, b), b);
    }, de = function(a, b) {
        return b;
    }, S = function(a, b, c, d) {
        this.c = a, this.b = b || a, this.f = !!c, this.a = d || de;
    }, ee = null, fe = function() {
        if (ee) return ee;
        var a = [];
        a.push(new S("bucket")), a.push(new S("generation")), a.push(new S("metageneration")), 
        a.push(new S("name", "fullPath", !0));
        var b = new S("name");
        return b.a = function(a, b) {
            return !xa(b) || 2 > b.length ? b : Hb(b);
        }, a.push(b), b = new S("size"), b.a = function(a, b) {
            return y(b) ? +b : b;
        }, a.push(b), a.push(new S("timeCreated")), a.push(new S("updated")), a.push(new S("md5Hash", null, !0)), 
        a.push(new S("cacheControl", null, !0)), a.push(new S("contentDisposition", null, !0)), 
        a.push(new S("contentEncoding", null, !0)), a.push(new S("contentLanguage", null, !0)), 
        a.push(new S("contentType", null, !0)), a.push(new S("metadata", "customMetadata", !0)), 
        a.push(new S("downloadTokens", "downloadURLs", !1, function(a, b) {
            if (!(xa(b) && 0 < b.length)) return [];
            var c = encodeURIComponent;
            return qb(b.split(","), function(b) {
                var d = a.fullPath, d = "https://firebasestorage.googleapis.com/v0/b/" + c(a.bucket) + "/o/" + c(d);
                return b = ab({
                    alt: "media",
                    token: b
                }), d + b;
            });
        })), ee = a;
    }, ge = function(a, b) {
        Object.defineProperty(a, "ref", {
            get: function() {
                return b.l(b, new z(a.bucket, a.fullPath));
            }
        });
    }, he = function(a, b) {
        for (var c = {}, d = b.length, e = 0; e < d; e++) {
            var f = b[e];
            f.f && (c[f.c] = a[f.b]);
        }
        return JSON.stringify(c);
    }, ie = function(a) {
        if (!a || "object" != typeof a) throw "Expected Metadata object.";
        for (var b in a) {
            var c = a[b];
            if ("customMetadata" === b && "object" != typeof c) throw "Expected object for 'customMetadata' mapping.";
        }
    }, T = function(a, b, c) {
        for (var d = b.length, e = b.length, f = 0; f < b.length; f++) if (b[f].b) {
            d = f;
            break;
        }
        if (!(d <= c.length && c.length <= e)) throw d === e ? (b = d, d = 1 === d ? "argument" : "arguments") : (b = "between " + d + " and " + e, 
        d = "arguments"), new v("invalid-argument-count", "Invalid argument count in `" + a + "`: Expected " + b + " " + d + ", received " + c.length + ".");
        for (f = 0; f < c.length; f++) try {
            b[f].a(c[f]);
        } catch (g) {
            if (g instanceof Error) throw pa(f, a, g.message);
            throw pa(f, a, g);
        }
    }, U = function(a, b) {
        var c = this;
        this.a = function(b) {
            c.b && !n(b) || a(b);
        }, this.b = !!b;
    }, je = function(a, b) {
        return function(c) {
            a(c), b(c);
        };
    }, ke = function(a, b) {
        function c(a) {
            if (!("string" == typeof a || a instanceof String)) throw "Expected string.";
        }
        var d;
        return d = a ? je(c, a) : c, new U(d, b);
    }, le = function() {
        return new U(function(a) {
            if (!(a instanceof Uint8Array || a instanceof ArrayBuffer || ya() && a instanceof Blob)) throw "Expected Blob or File.";
        });
    }, me = function() {
        return new U(function(a) {
            if (!(("number" == typeof a || a instanceof Number) && 0 <= a)) throw "Expected a number 0 or greater.";
        });
    }, ne = function(a, b) {
        return new U(function(b) {
            if (!(null === b || y(b) && b instanceof Object)) throw "Expected an Object.";
            y(a) && a(b);
        }, b);
    }, oe = function() {
        return new U(function(a) {
            if (null !== a && !r(a)) throw "Expected a Function.";
        }, !0);
    }, pe = function(a) {
        if (!a) throw ma();
    }, qe = function(a, b) {
        return function(c, d) {
            a: {
                var e;
                try {
                    e = JSON.parse(d);
                } catch (h) {
                    c = null;
                    break a;
                }
                c = ea(e) ? e : null;
            }
            if (null === c) c = null; else {
                d = {
                    type: "file"
                }, e = b.length;
                for (var f = 0; f < e; f++) {
                    var g = b[f];
                    d[g.b] = g.a(d, c[g.c]);
                }
                ge(d, a), c = d;
            }
            return pe(null !== c), c;
        };
    }, re = function(a) {
        return function(b, c) {
            return b = 401 === P(b) ? new v("unauthenticated", "User is not authenticated, please authenticate using Firebase Authentication and try again.") : 402 === P(b) ? new v("quota-exceeded", "Quota for bucket '" + a.bucket + "' exceeded, please view quota on https://firebase.google.com/pricing/.") : 403 === P(b) ? new v("unauthorized", "User does not have permission to access '" + a.path + "'.") : c, 
            b.serverResponse = c.serverResponse, b;
        };
    }, se = function(a) {
        var b = re(a);
        return function(c, d) {
            var e = b(c, d);
            return 404 === P(c) && (e = new v("object-not-found", "Object '" + a.path + "' does not exist.")), 
            e.serverResponse = d.serverResponse, e;
        };
    }, te = function(a, b, c) {
        var d = Ra(b);
        return a = new w(la + "/v0" + d, "GET", qe(a, c), a.c), a.a = se(b), a;
    }, ue = function(a, b) {
        var c = Ra(b);
        return a = new w(la + "/v0" + c, "DELETE", function() {}, a.c), a.f = [ 200, 204 ], 
        a.a = se(b), a;
    }, ve = function(a, b, c) {
        return c = c ? ta(c) : {}, c.fullPath = a.path, c.size = b.a, c.contentType || (a = b && b.type() || "application/octet-stream", 
        c.contentType = a), c;
    }, we = function(a, b, c, d, e) {
        var h, f = "/b/" + encodeURIComponent(b.bucket) + "/o", g = {
            "X-Goog-Upload-Protocol": "multipart"
        };
        h = "";
        for (var m = 0; 2 > m; m++) h += Math.random().toString().slice(2);
        if (g["Content-Type"] = "multipart/related; boundary=" + h, e = ve(b, d, e), m = he(e, c), 
        null === (d = Xd("--" + h + "\r\nContent-Type: application/json; charset=utf-8\r\n\r\n" + m + "\r\n--" + h + "\r\nContent-Type: " + e.contentType + "\r\n\r\n", d, "\r\n--" + h + "--"))) throw oa();
        return a = new w(la + "/v0" + f, "POST", qe(a, c), a.b), a.b = {
            name: e.fullPath
        }, a.headers = g, a.body = d.s, a.a = re(b), a;
    }, xe = function(a, b, c, d) {
        this.a = a, this.total = b, this.b = !!c, this.c = d || null;
    }, ye = function(a, b) {
        var c;
        try {
            c = Pd(a, "X-Goog-Upload-Status");
        } catch (d) {
            pe(!1);
        }
        return pe(ub(b || [ "active" ], c)), c;
    }, ze = function(a, b, c, d, e) {
        var f = "/b/" + encodeURIComponent(b.bucket) + "/o", g = ve(b, d, e);
        return e = {
            name: g.fullPath
        }, f = la + "/v0" + f, d = {
            "X-Goog-Upload-Protocol": "resumable",
            "X-Goog-Upload-Command": "start",
            "X-Goog-Upload-Header-Content-Length": d.a,
            "X-Goog-Upload-Header-Content-Type": g.contentType,
            "Content-Type": "application/json; charset=utf-8"
        }, c = he(g, c), a = new w(f, "POST", function(a) {
            ye(a);
            var b;
            try {
                b = Pd(a, "X-Goog-Upload-URL");
            } catch (x) {
                pe(!1);
            }
            return pe(xa(b)), b;
        }, a.b), a.b = e, a.headers = d, a.body = c, a.a = re(b), a;
    }, Ae = function(a, b, c, d) {
        return a = new w(c, "POST", function(a) {
            var c, b = ye(a, [ "active", "final" ]);
            try {
                c = Pd(a, "X-Goog-Upload-Size-Received");
            } catch (h) {
                pe(!1);
            }
            return a = c, isFinite(a) && (a = String(a)), a = q(a) ? /^\s*-?0x/i.test(a) ? parseInt(a, 16) : parseInt(a, 10) : NaN, 
            pe(!isNaN(a)), new xe(a, d.a, "final" === b);
        }, a.b), a.headers = {
            "X-Goog-Upload-Command": "query"
        }, a.a = re(b), a;
    }, Be = function(a, b, c, d, e, f) {
        var g = new xe(0, 0);
        if (f ? (g.a = f.a, g.total = f.total) : (g.a = 0, g.total = d.a), d.a !== g.total) throw new v("server-file-wrong-size", "Server recorded incorrect upload file size, please retry the upload.");
        var h = f = g.total - g.a, h = Math.min(h, 262144), m = g.a;
        if (f = {
            "X-Goog-Upload-Command": h === f ? "upload, finalize" : "upload",
            "X-Goog-Upload-Offset": g.a
        }, null === (m = d.slice(m, m + h))) throw oa();
        return c = new w(c, "POST", function(a, c) {
            var x, f = ye(a, [ "active", "final" ]), m = g.a + h, O = d.a;
            return x = "final" === f ? qe(b, e)(a, c) : null, new xe(m, O, "final" === f, x);
        }, b.b), c.headers = f, c.body = m.s, c.c = null, c.a = re(a), c;
    }, W = function(a, b, c, d, e, f) {
        this.K = a, this.c = b, this.i = c, this.f = e, this.h = f || null, this.o = d, 
        this.j = 0, this.G = this.m = !1, this.B = [], this.Z = 262144 < this.f.a, this.b = "running", 
        this.a = this.u = this.g = null;
        var g = this;
        this.V = function(a) {
            g.a = null, "storage/canceled" === a.code ? (g.m = !0, Ce(g)) : (g.g = a, V(g, "error"));
        }, this.Y = function(a) {
            g.a = null, "storage/canceled" === a.code ? Ce(g) : (g.g = a, V(g, "error"));
        }, this.w = this.l = null, this.F = new G(function(a, b) {
            g.l = a, g.w = b, De(g);
        }), this.F.then(null, function() {});
    }, De = function(a) {
        "running" === a.b && null === a.a && (a.Z ? null === a.u ? Ee(a) : a.m ? Fe(a) : a.G ? Ge(a) : He(a) : Ie(a));
    }, Je = function(a, b) {
        ce(a.c).then(function(c) {
            switch (a.b) {
              case "running":
                b(c);
                break;

              case "canceling":
                V(a, "canceled");
                break;

              case "pausing":
                V(a, "paused");
            }
        });
    }, Ee = function(a) {
        Je(a, function(b) {
            var c = ze(a.c, a.i, a.o, a.f, a.h);
            a.a = R(a.c, c, b), a.a.a().then(function(b) {
                a.a = null, a.u = b, a.m = !1, Ce(a);
            }, this.V);
        });
    }, Fe = function(a) {
        var b = a.u;
        Je(a, function(c) {
            var d = Ae(a.c, a.i, b, a.f);
            a.a = R(a.c, d, c), a.a.a().then(function(b) {
                a.a = null, Ke(a, b.a), a.m = !1, b.b && (a.G = !0), Ce(a);
            }, a.V);
        });
    }, He = function(a) {
        var b = new xe(a.j, a.f.a), c = a.u;
        Je(a, function(d) {
            var e;
            try {
                e = Be(a.i, a.c, c, a.f, a.o, b);
            } catch (f) {
                return a.g = f, void V(a, "error");
            }
            a.a = R(a.c, e, d), a.a.a().then(function(b) {
                a.a = null, Ke(a, b.a), b.b ? (a.h = b.c, V(a, "success")) : Ce(a);
            }, a.V);
        });
    }, Ge = function(a) {
        Je(a, function(b) {
            var c = te(a.c, a.i, a.o);
            a.a = R(a.c, c, b), a.a.a().then(function(b) {
                a.a = null, a.h = b, V(a, "success");
            }, a.Y);
        });
    }, Ie = function(a) {
        Je(a, function(b) {
            var c = we(a.c, a.i, a.o, a.f, a.h);
            a.a = R(a.c, c, b), a.a.a().then(function(b) {
                a.a = null, a.h = b, Ke(a, a.f.a), V(a, "success");
            }, a.V);
        });
    }, Ke = function(a, b) {
        var c = a.j;
        a.j = b, a.j > c && Le(a);
    }, V = function(a, b) {
        if (a.b !== b) switch (b) {
          case "canceling":
          case "pausing":
            a.b = b, null !== a.a && a.a.b();
            break;

          case "running":
            var c = "paused" === a.b;
            a.b = b, c && (Le(a), De(a));
            break;

          case "paused":
            a.b = b, Le(a);
            break;

          case "canceled":
            a.g = na(), a.b = b, Le(a);
            break;

          case "error":
            a.b = b, Le(a);
            break;

          case "success":
            a.b = b, Le(a);
        }
    }, Ce = function(a) {
        switch (a.b) {
          case "pausing":
            V(a, "paused");
            break;

          case "canceling":
            V(a, "canceled");
            break;

          case "running":
            De(a);
        }
    };
    W.prototype.D = function() {
        return new A(this.j, this.f.a, wa(this.b), this.h, this, this.K);
    }, W.prototype.M = function(a, b, c, d) {
        function e(a) {
            try {
                return void g(a);
            } catch (N) {}
            try {
                if (h(a), !(n(a.next) || n(a.error) || n(a.complete))) throw "";
            } catch (N) {
                throw "Expected a function or an Object with one of `next`, `error`, `complete` properties.";
            }
        }
        function f(a) {
            return function(b, c, d) {
                null !== a && T("on", a, arguments);
                var e = new Ta(b, c, d);
                return Me(m, e), function() {
                    wb(m.B, e);
                };
            };
        }
        var g = oe().a, h = ne(null, !0).a;
        T("on", [ ke(function() {
            if ("state_changed" !== a) throw "Expected one of the event types: [state_changed].";
        }), ne(e, !0), oe(), oe() ], arguments);
        var m = this, x = [ ne(function(a) {
            if (null === a) throw "Expected a function or an Object with one of `next`, `error`, `complete` properties.";
            e(a);
        }), oe(), oe() ];
        return n(b) || n(c) || n(d) ? f(null)(b, c, d) : f(x);
    }, W.prototype.then = function(a, b) {
        return this.F.then(a, b);
    };
    var Me = function(a, b) {
        a.B.push(b), Ne(a, b);
    }, Le = function(a) {
        Oe(a);
        var b = xb(a.B);
        ob(b, function(b) {
            Ne(a, b);
        });
    }, Oe = function(a) {
        if (null !== a.l) {
            var b = !0;
            switch (wa(a.b)) {
              case "success":
                Oc(a.l.bind(null, a.D()))();
                break;

              case "canceled":
              case "error":
                Oc(a.w.bind(null, a.g))();
                break;

              default:
                b = !1;
            }
            b && (a.l = null, a.w = null);
        }
    }, Ne = function(a, b) {
        switch (wa(a.b)) {
          case "running":
          case "paused":
            null !== b.next && Oc(b.next.bind(b, a.D()))();
            break;

          case "success":
            null !== b.b && Oc(b.b.bind(b))();
            break;

          case "canceled":
          case "error":
            null !== b.a && Oc(b.a.bind(b, a.g))();
            break;

          default:
            null !== b.a && Oc(b.a.bind(b, a.g))();
        }
    };
    W.prototype.R = function() {
        T("resume", [], arguments);
        var a = "paused" === this.b || "pausing" === this.b;
        return a && V(this, "running"), a;
    }, W.prototype.P = function() {
        T("pause", [], arguments);
        var a = "running" === this.b;
        return a && V(this, "pausing"), a;
    }, W.prototype.L = function() {
        T("cancel", [], arguments);
        var a = "running" === this.b || "pausing" === this.b;
        return a && V(this, "canceling"), a;
    };
    var X = function(a, b) {
        if (this.b = a, b) this.a = b instanceof z ? b : Sa(b); else {
            if (null === (a = a.bucket())) throw new v("no-default-bucket", "No default bucket found. Did you set the 'storageBucket' property when initializing the app?");
            this.a = new z(a, "");
        }
    };
    X.prototype.toString = function() {
        return T("toString", [], arguments), "gs://" + this.a.bucket + "/" + this.a.path;
    };
    var Pe = function(a, b) {
        return new X(a, b);
    };
    (k = X.prototype).fa = function(a) {
        T("child", [ ke() ], arguments);
        var b = Gb(this.a.path, a);
        return Pe(this.b, new z(this.a.bucket, b));
    }, k.Da = function() {
        var a;
        if (0 == (a = this.a.path).length) a = null; else {
            var b = a.lastIndexOf("/");
            a = -1 === b ? "" : a.slice(0, b);
        }
        return null === a ? null : Pe(this.b, new z(this.a.bucket, a));
    }, k.Fa = function() {
        return Pe(this.b, new z(this.a.bucket, ""));
    }, k.ma = function() {
        return this.a.bucket;
    }, k.ya = function() {
        return this.a.path;
    }, k.Ca = function() {
        return Hb(this.a.path);
    }, k.Ha = function() {
        return this.b.i;
    }, k.ra = function(a, b) {
        return T("put", [ le(), new U(ie, !0) ], arguments), Qe(this, "put"), new W(this, this.b, this.a, fe(), new Q(a), b);
    }, k.sa = function(a, b, c) {
        T("putString", [ ke(), ke(Va, !0), new U(ie, !0) ], arguments), Qe(this, "putString");
        var d = $a(y(b) ? b : "raw", a), e = c ? ta(c) : {};
        return !y(e.contentType) && y(d.a) && (e.contentType = d.a), new W(this, this.b, this.a, fe(), new Q(d.data, !0), e);
    }, k.delete = function() {
        T("delete", [], arguments), Qe(this, "delete");
        var a = this;
        return ce(this.b).then(function(b) {
            var c = ue(a.b, a.a);
            return R(a.b, c, b).a();
        });
    }, k.ga = function() {
        T("getMetadata", [], arguments), Qe(this, "getMetadata");
        var a = this;
        return ce(this.b).then(function(b) {
            var c = te(a.b, a.a, fe());
            return R(a.b, c, b).a();
        });
    }, k.ta = function(a) {
        T("updateMetadata", [ new U(ie, void 0) ], arguments), Qe(this, "updateMetadata");
        var b = this;
        return ce(this.b).then(function(c) {
            var d = b.b, e = b.a, f = a, g = fe(), h = Ra(e), h = la + "/v0" + h, f = he(f, g);
            return (d = new w(h, "PATCH", qe(d, g), d.c)).headers = {
                "Content-Type": "application/json; charset=utf-8"
            }, d.body = f, d.a = se(e), R(b.b, d, c).a();
        });
    }, k.qa = function() {
        return T("getDownloadURL", [], arguments), Qe(this, "getDownloadURL"), this.ga().then(function(a) {
            if (a = a.downloadURLs[0], y(a)) return a;
            throw new v("no-download-url", "The given file does not have any download URLs.");
        });
    };
    var Qe = function(a, b) {
        if ("" === a.a.path) throw new v("invalid-root-operation", "The operation '" + b + "' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').");
    }, Y = function(a) {
        this.a = new be(a, function(a, c) {
            return new X(a, c);
        }, Ud, this), this.b = a, this.c = new Re(this);
    };
    (k = Y.prototype).ua = function(a) {
        T("ref", [ ke(function(a) {
            if (/^[A-Za-z]+:\/\//.test(a)) throw "Expected child path but got a URL, use refFromURL instead.";
        }, !0) ], arguments);
        var b = new X(this.a);
        return n(a) ? b.fa(a) : b;
    }, k.va = function(a) {
        return T("refFromURL", [ ke(function(a) {
            if (!/^[A-Za-z]+:\/\//.test(a)) throw "Expected full URL but got a child path, use ref instead.";
            try {
                Sa(a);
            } catch (c) {
                throw "Expected valid full URL but got an invalid one.";
            }
        }, !1) ], arguments), new X(this.a, a);
    }, k.Aa = function() {
        return this.a.b;
    }, k.xa = function(a) {
        T("setMaxUploadRetryTime", [ me() ], arguments), this.a.b = a;
    }, k.za = function() {
        return this.a.c;
    }, k.wa = function(a) {
        T("setMaxOperationRetryTime", [ me() ], arguments), this.a.c = a;
    }, k.la = function() {
        return this.b;
    }, k.ka = function() {
        return this.c;
    };
    var Re = function(a) {
        this.a = a;
    };
    Re.prototype.delete = function() {
        var a = this.a.a;
        a.f = !0, a.a = null, ae(a.h);
    };
    var Z = function(a, b, c) {
        Object.defineProperty(a, b, {
            get: c
        });
    };
    X.prototype.toString = X.prototype.toString, X.prototype.child = X.prototype.fa, 
    X.prototype.put = X.prototype.ra, X.prototype.putString = X.prototype.sa, X.prototype.delete = X.prototype.delete, 
    X.prototype.getMetadata = X.prototype.ga, X.prototype.updateMetadata = X.prototype.ta, 
    X.prototype.getDownloadURL = X.prototype.qa, Z(X.prototype, "parent", X.prototype.Da), 
    Z(X.prototype, "root", X.prototype.Fa), Z(X.prototype, "bucket", X.prototype.ma), 
    Z(X.prototype, "fullPath", X.prototype.ya), Z(X.prototype, "name", X.prototype.Ca), 
    Z(X.prototype, "storage", X.prototype.Ha), Y.prototype.ref = Y.prototype.ua, Y.prototype.refFromURL = Y.prototype.va, 
    Z(Y.prototype, "maxOperationRetryTime", Y.prototype.za), Y.prototype.setMaxOperationRetryTime = Y.prototype.wa, 
    Z(Y.prototype, "maxUploadRetryTime", Y.prototype.Aa), Y.prototype.setMaxUploadRetryTime = Y.prototype.xa, 
    Z(Y.prototype, "app", Y.prototype.la), Z(Y.prototype, "INTERNAL", Y.prototype.ka), 
    Re.prototype.delete = Re.prototype.delete, Y.prototype.capi_ = function(a) {
        la = a;
    }, W.prototype.on = W.prototype.M, W.prototype.resume = W.prototype.R, W.prototype.pause = W.prototype.P, 
    W.prototype.cancel = W.prototype.L, Z(W.prototype, "snapshot", W.prototype.D), Z(A.prototype, "bytesTransferred", A.prototype.na), 
    Z(A.prototype, "totalBytes", A.prototype.Ja), Z(A.prototype, "state", A.prototype.Ga), 
    Z(A.prototype, "metadata", A.prototype.Ba), Z(A.prototype, "downloadURL", A.prototype.pa), 
    Z(A.prototype, "task", A.prototype.Ia), Z(A.prototype, "ref", A.prototype.Ea), ua.STATE_CHANGED = "state_changed", 
    va.RUNNING = "running", va.PAUSED = "paused", va.SUCCESS = "success", va.CANCELED = "canceled", 
    va.ERROR = "error", Ua.RAW = "raw", Ua.BASE64 = "base64", Ua.BASE64URL = "base64url", 
    Ua.DATA_URL = "data_url", G.prototype.catch = G.prototype.l, G.prototype.then = G.prototype.then, 
    function() {
        var b = {
            TaskState: va,
            TaskEvent: ua,
            StringFormat: Ua,
            Storage: Y,
            Reference: X
        };
        if (void 0 === firebase) throw Error("Cannot install Firebase Storage - be sure to load firebase-app.js first.");
        firebase.INTERNAL.registerService("storage", function(a) {
            return new Y(a);
        }, b);
    }();
}(), function(S, X, u) {
    "use strict";
    function y(b) {
        return function() {
            var c, a = arguments[0];
            for (c = "[" + (b ? b + ":" : "") + a + "] http://errors.angularjs.org/1.3.0/" + (b ? b + "/" : "") + a, 
            a = 1; a < arguments.length; a++) {
                c = c + (1 == a ? "?" : "&") + "p" + (a - 1) + "=";
                var e;
                c += encodeURIComponent(e = "function" == typeof (e = arguments[a]) ? e.toString().replace(/ \{[\s\S]*$/, "") : void 0 === e ? "undefined" : "string" != typeof e ? JSON.stringify(e) : e);
            }
            return Error(c);
        };
    }
    function Ra(b) {
        if (null == b || Sa(b)) return !1;
        var a = b.length;
        return !(b.nodeType !== ka || !a) || (I(b) || B(b) || 0 === a || "number" == typeof a && 0 < a && a - 1 in b);
    }
    function r(b, a, c) {
        var d, e;
        if (b) if (F(b)) for (d in b) "prototype" == d || "length" == d || "name" == d || b.hasOwnProperty && !b.hasOwnProperty(d) || a.call(c, b[d], d, b); else if (B(b) || Ra(b)) {
            var f = "object" != typeof b;
            for (d = 0, e = b.length; d < e; d++) (f || d in b) && a.call(c, b[d], d, b);
        } else if (b.forEach && b.forEach !== r) b.forEach(a, c, b); else for (d in b) b.hasOwnProperty(d) && a.call(c, b[d], d, b);
        return b;
    }
    function ic(b) {
        var c, a = [];
        for (c in b) b.hasOwnProperty(c) && a.push(c);
        return a.sort();
    }
    function zd(b, a, c) {
        for (var d = ic(b), e = 0; e < d.length; e++) a.call(c, b[d[e]], d[e]);
        return d;
    }
    function jc(b) {
        return function(a, c) {
            b(c, a);
        };
    }
    function Ad() {
        return ++hb;
    }
    function kc(b, a) {
        a ? b.$$hashKey = a : delete b.$$hashKey;
    }
    function E(b) {
        for (var a = b.$$hashKey, c = 1, d = arguments.length; c < d; c++) {
            var e = arguments[c];
            if (e) for (var f = Object.keys(e), g = 0, k = f.length; g < k; g++) {
                var h = f[g];
                b[h] = e[h];
            }
        }
        return kc(b, a), b;
    }
    function ba(b) {
        return parseInt(b, 10);
    }
    function lc(b, a) {
        return E(new (E(function() {}, {
            prototype: b
        }))(), a);
    }
    function A() {}
    function Ta(b) {
        return b;
    }
    function da(b) {
        return function() {
            return b;
        };
    }
    function w(b) {
        return void 0 === b;
    }
    function z(b) {
        return void 0 !== b;
    }
    function G(b) {
        return null !== b && "object" == typeof b;
    }
    function I(b) {
        return "string" == typeof b;
    }
    function W(b) {
        return "number" == typeof b;
    }
    function ea(b) {
        return "[object Date]" === Ia.call(b);
    }
    function F(b) {
        return "function" == typeof b;
    }
    function ib(b) {
        return "[object RegExp]" === Ia.call(b);
    }
    function Sa(b) {
        return b && b.window === b;
    }
    function Ua(b) {
        return b && b.$evalAsync && b.$watch;
    }
    function Va(b) {
        return "boolean" == typeof b;
    }
    function mc(b) {
        return !(!b || !(b.nodeName || b.prop && b.attr && b.find));
    }
    function Bd(b) {
        var a = {};
        b = b.split(",");
        var c;
        for (c = 0; c < b.length; c++) a[b[c]] = !0;
        return a;
    }
    function pa(b) {
        return N(b.nodeName || b[0].nodeName);
    }
    function Wa(b, a) {
        var c = b.indexOf(a);
        return 0 <= c && b.splice(c, 1), a;
    }
    function Ca(b, a, c, d) {
        if (Sa(b) || Ua(b)) throw Xa("cpws");
        if (a) {
            if (b === a) throw Xa("cpi");
            if (c = c || [], d = d || [], G(b)) {
                var e = c.indexOf(b);
                if (-1 !== e) return d[e];
                c.push(b), d.push(a);
            }
            if (B(b)) for (var f = a.length = 0; f < b.length; f++) e = Ca(b[f], null, c, d), 
            G(b[f]) && (c.push(b[f]), d.push(e)), a.push(e); else {
                var g = a.$$hashKey;
                B(a) ? a.length = 0 : r(a, function(b, c) {
                    delete a[c];
                });
                for (f in b) b.hasOwnProperty(f) && (e = Ca(b[f], null, c, d), G(b[f]) && (c.push(b[f]), 
                d.push(e)), a[f] = e);
                kc(a, g);
            }
        } else (a = b) && (B(b) ? a = Ca(b, [], c, d) : ea(b) ? a = new Date(b.getTime()) : ib(b) ? (a = new RegExp(b.source, b.toString().match(/[^\/]*$/)[0]), 
        a.lastIndex = b.lastIndex) : G(b) && (e = Object.create(Object.getPrototypeOf(b)), 
        a = Ca(b, e, c, d)));
        return a;
    }
    function qa(b, a) {
        if (B(b)) {
            a = a || [];
            for (var c = 0, d = b.length; c < d; c++) a[c] = b[c];
        } else if (G(b)) for (c in a = a || {}, b) "$" === c.charAt(0) && "$" === c.charAt(1) || (a[c] = b[c]);
        return a || b;
    }
    function la(b, a) {
        if (b === a) return !0;
        if (null === b || null === a) return !1;
        if (b !== b && a !== a) return !0;
        var d, c = typeof b;
        if (c == typeof a && "object" == c) {
            if (!B(b)) {
                if (ea(b)) return !!ea(a) && la(b.getTime(), a.getTime());
                if (ib(b) && ib(a)) return b.toString() == a.toString();
                if (Ua(b) || Ua(a) || Sa(b) || Sa(a) || B(a)) return !1;
                c = {};
                for (d in b) if ("$" !== d.charAt(0) && !F(b[d])) {
                    if (!la(b[d], a[d])) return !1;
                    c[d] = !0;
                }
                for (d in a) if (!c.hasOwnProperty(d) && "$" !== d.charAt(0) && a[d] !== u && !F(a[d])) return !1;
                return !0;
            }
            if (!B(a)) return !1;
            if ((c = b.length) == a.length) {
                for (d = 0; d < c; d++) if (!la(b[d], a[d])) return !1;
                return !0;
            }
        }
        return !1;
    }
    function jb(b, a, c) {
        return b.concat(Ya.call(a, c));
    }
    function nc(b, a) {
        var c = 2 < arguments.length ? Ya.call(arguments, 2) : [];
        return !F(a) || a instanceof RegExp ? a : c.length ? function() {
            return arguments.length ? a.apply(b, c.concat(Ya.call(arguments, 0))) : a.apply(b, c);
        } : function() {
            return arguments.length ? a.apply(b, arguments) : a.call(b);
        };
    }
    function Cd(b, a) {
        var c = a;
        return "string" == typeof b && "$" === b.charAt(0) && "$" === b.charAt(1) ? c = u : Sa(a) ? c = "$WINDOW" : a && X === a ? c = "$DOCUMENT" : Ua(a) && (c = "$SCOPE"), 
        c;
    }
    function ra(b, a) {
        return void 0 === b ? u : JSON.stringify(b, Cd, a ? "  " : null);
    }
    function oc(b) {
        return I(b) ? JSON.parse(b) : b;
    }
    function sa(b) {
        b = D(b).clone();
        try {
            b.empty();
        } catch (a) {}
        var c = D("<div>").append(b).html();
        try {
            return b[0].nodeType === kb ? N(c) : c.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/, function(a, b) {
                return "<" + N(b);
            });
        } catch (d) {
            return N(c);
        }
    }
    function pc(b) {
        try {
            return decodeURIComponent(b);
        } catch (a) {}
    }
    function qc(b) {
        var c, d, a = {};
        return r((b || "").split("&"), function(b) {
            b && (c = b.replace(/\+/g, "%20").split("="), d = pc(c[0]), z(d) && (b = !z(c[1]) || pc(c[1]), 
            Hb.call(a, d) ? B(a[d]) ? a[d].push(b) : a[d] = [ a[d], b ] : a[d] = b));
        }), a;
    }
    function Ib(b) {
        var a = [];
        return r(b, function(b, d) {
            B(b) ? r(b, function(b) {
                a.push(Da(d, !0) + (!0 === b ? "" : "=" + Da(b, !0)));
            }) : a.push(Da(d, !0) + (!0 === b ? "" : "=" + Da(b, !0)));
        }), a.length ? a.join("&") : "";
    }
    function lb(b) {
        return Da(b, !0).replace(/%26/gi, "&").replace(/%3D/gi, "=").replace(/%2B/gi, "+");
    }
    function Da(b, a) {
        return encodeURIComponent(b).replace(/%40/gi, "@").replace(/%3A/gi, ":").replace(/%24/g, "$").replace(/%2C/gi, ",").replace(/%3B/gi, ";").replace(/%20/g, a ? "%20" : "+");
    }
    function Dd(b, a) {
        var c, d, e = mb.length;
        for (b = D(b), d = 0; d < e; ++d) if (c = mb[d] + a, I(c = b.attr(c))) return c;
        return null;
    }
    function Ed(b, a) {
        var c, d, e = {};
        r(mb, function(a) {
            a += "app", !c && b.hasAttribute && b.hasAttribute(a) && (c = b, d = b.getAttribute(a));
        }), r(mb, function(a) {
            a += "app";
            var e;
            !c && (e = b.querySelector("[" + a.replace(":", "\\:") + "]")) && (c = e, d = e.getAttribute(a));
        }), c && (e.strictDi = null !== Dd(c, "strict-di"), a(c, d ? [ d ] : [], e));
    }
    function rc(b, a, c) {
        G(c) || (c = {}), c = E({
            strictDi: !1
        }, c);
        var d = function() {
            if ((b = D(b)).injector()) {
                var d = b[0] === X ? "document" : sa(b);
                throw Xa("btstrpd", d.replace(/</, "&lt;").replace(/>/, "&gt;"));
            }
            return (a = a || []).unshift([ "$provide", function(a) {
                a.value("$rootElement", b);
            } ]), c.debugInfoEnabled && a.push([ "$compileProvider", function(a) {
                a.debugInfoEnabled(!0);
            } ]), a.unshift("ng"), (d = Jb(a, c.strictDi)).invoke([ "$rootScope", "$rootElement", "$compile", "$injector", function(a, b, c, d) {
                a.$apply(function() {
                    b.data("$injector", d), c(b)(a);
                });
            } ]), d;
        }, e = /^NG_ENABLE_DEBUG_INFO!/, f = /^NG_DEFER_BOOTSTRAP!/;
        if (S && e.test(S.name) && (c.debugInfoEnabled = !0, S.name = S.name.replace(e, "")), 
        S && !f.test(S.name)) return d();
        S.name = S.name.replace(f, ""), ta.resumeBootstrap = function(b) {
            r(b, function(b) {
                a.push(b);
            }), d();
        };
    }
    function Fd() {
        S.name = "NG_ENABLE_DEBUG_INFO!" + S.name, S.location.reload();
    }
    function Gd(b) {
        return ta.element(b).injector().get("$$testability");
    }
    function Kb(b, a) {
        return a = a || "_", b.replace(Hd, function(b, d) {
            return (d ? a : "") + b.toLowerCase();
        });
    }
    function Mb(b, a, c) {
        if (!b) throw Xa("areq", a || "?", c || "required");
        return b;
    }
    function nb(b, a, c) {
        return c && B(b) && (b = b[b.length - 1]), Mb(F(b), a, "not a function, got " + (b && "object" == typeof b ? b.constructor.name || "Object" : typeof b)), 
        b;
    }
    function Ka(b, a) {
        if ("hasOwnProperty" === b) throw Xa("badname", a);
    }
    function tc(b, a, c) {
        if (!a) return b;
        for (var d, e = b, f = (a = a.split(".")).length, g = 0; g < f; g++) d = a[g], b && (b = (e = b)[d]);
        return !c && F(b) ? nc(e, b) : b;
    }
    function ob(b) {
        var a = b[0];
        b = b[b.length - 1];
        var c = [ a ];
        do {
            if (!(a = a.nextSibling)) break;
            c.push(a);
        } while (a !== b);
        return D(c);
    }
    function wa() {
        return Object.create(null);
    }
    function Jd(b) {
        function a(a, b, c) {
            return a[b] || (a[b] = c());
        }
        var c = y("$injector"), d = y("ng");
        return b = a(b, "angular", Object), b.$$minErr = b.$$minErr || y, a(b, "module", function() {
            var b = {};
            return function(f, g, k) {
                if ("hasOwnProperty" === f) throw d("badname", "module");
                return g && b.hasOwnProperty(f) && (b[f] = null), a(b, f, function() {
                    function a(c, d, e, f) {
                        return f || (f = b), function() {
                            return f[e || "push"]([ c, d, arguments ]), n;
                        };
                    }
                    if (!g) throw c("nomod", f);
                    var b = [], d = [], e = [], p = a("$injector", "invoke", "push", d), n = {
                        _invokeQueue: b,
                        _configBlocks: d,
                        _runBlocks: e,
                        requires: g,
                        name: f,
                        provider: a("$provide", "provider"),
                        factory: a("$provide", "factory"),
                        service: a("$provide", "service"),
                        value: a("$provide", "value"),
                        constant: a("$provide", "constant", "unshift"),
                        animation: a("$animateProvider", "register"),
                        filter: a("$filterProvider", "register"),
                        controller: a("$controllerProvider", "register"),
                        directive: a("$compileProvider", "directive"),
                        config: p,
                        run: function(a) {
                            return e.push(a), this;
                        }
                    };
                    return k && p(k), n;
                });
            };
        });
    }
    function ab(b) {
        return b.replace(Xe, function(a, b, d, e) {
            return e ? d.toUpperCase() : d;
        }).replace(Ye, "Moz$1");
    }
    function Cc(b) {
        return (b = b.nodeType) === ka || !b || 9 === b;
    }
    function Dc(b, a) {
        var c, d, e = a.createDocumentFragment(), f = [];
        if (Nb.test(b)) {
            for (c = c || e.appendChild(a.createElement("div")), d = (Ze.exec(b) || [ "", "" ])[1].toLowerCase(), 
            d = ha[d] || ha._default, c.innerHTML = d[1] + b.replace($e, "<$1></$2>") + d[2], 
            d = d[0]; d--; ) c = c.lastChild;
            f = jb(f, c.childNodes), (c = e.firstChild).textContent = "";
        } else f.push(a.createTextNode(b));
        return e.textContent = "", e.innerHTML = "", r(f, function(a) {
            e.appendChild(a);
        }), e;
    }
    function R(b) {
        if (b instanceof R) return b;
        var a;
        if (I(b) && (b = U(b), a = !0), !(this instanceof R)) {
            if (a && "<" != b.charAt(0)) throw Ob("nosel");
            return new R(b);
        }
        if (a) {
            a = X;
            var c;
            b = (c = af.exec(b)) ? [ a.createElement(c[1]) ] : (c = Dc(b, a)) ? c.childNodes : [];
        }
        Ec(this, b);
    }
    function Pb(b) {
        return b.cloneNode(!0);
    }
    function rb(b, a) {
        if (a || sb(b), b.querySelectorAll) for (var c = b.querySelectorAll("*"), d = 0, e = c.length; d < e; d++) sb(c[d]);
    }
    function Fc(b, a, c, d) {
        if (z(d)) throw Ob("offargs");
        var e = (d = tb(b)) && d.events, f = d && d.handle;
        if (f) if (a) r(a.split(" "), function(a) {
            if (z(c)) {
                var d = e[a];
                if (Wa(d || [], c), d && 0 < d.length) return;
            }
            b.removeEventListener(a, f, !1), delete e[a];
        }); else for (a in e) "$destroy" !== a && b.removeEventListener(a, f, !1), delete e[a];
    }
    function sb(b, a) {
        var c = b.ng339, d = c && ub[c];
        d && (a ? delete d.data[a] : (d.handle && (d.events.$destroy && d.handle({}, "$destroy"), 
        Fc(b)), delete ub[c], b.ng339 = u));
    }
    function tb(b, a) {
        var c = (c = b.ng339) && ub[c];
        return a && !c && (b.ng339 = c = ++bf, c = ub[c] = {
            events: {},
            data: {},
            handle: u
        }), c;
    }
    function Qb(b, a, c) {
        if (Cc(b)) {
            var d = z(c), e = !d && a && !G(a), f = !a;
            if (b = (b = tb(b, !e)) && b.data, d) b[a] = c; else {
                if (f) return b;
                if (e) return b && b[a];
                E(b, a);
            }
        }
    }
    function Rb(b, a) {
        return !!b.getAttribute && -1 < (" " + (b.getAttribute("class") || "") + " ").replace(/[\n\t]/g, " ").indexOf(" " + a + " ");
    }
    function Sb(b, a) {
        a && b.setAttribute && r(a.split(" "), function(a) {
            b.setAttribute("class", U((" " + (b.getAttribute("class") || "") + " ").replace(/[\n\t]/g, " ").replace(" " + U(a) + " ", " ")));
        });
    }
    function Tb(b, a) {
        if (a && b.setAttribute) {
            var c = (" " + (b.getAttribute("class") || "") + " ").replace(/[\n\t]/g, " ");
            r(a.split(" "), function(a) {
                a = U(a), -1 === c.indexOf(" " + a + " ") && (c += a + " ");
            }), b.setAttribute("class", U(c));
        }
    }
    function Ec(b, a) {
        if (a) if (a.nodeType) b[b.length++] = a; else {
            var c = a.length;
            if ("number" == typeof c && a.window !== a) {
                if (c) for (var d = 0; d < c; d++) b[b.length++] = a[d];
            } else b[b.length++] = a;
        }
    }
    function Gc(b, a) {
        return vb(b, "$" + (a || "ngController") + "Controller");
    }
    function vb(b, a, c) {
        for (9 == b.nodeType && (b = b.documentElement), a = B(a) ? a : [ a ]; b; ) {
            for (var d = 0, e = a.length; d < e; d++) if ((c = D.data(b, a[d])) !== u) return c;
            b = b.parentNode || 11 === b.nodeType && b.host;
        }
    }
    function Hc(b) {
        for (rb(b, !0); b.firstChild; ) b.removeChild(b.firstChild);
    }
    function Ic(b, a) {
        a || rb(b);
        var c = b.parentNode;
        c && c.removeChild(b);
    }
    function cf(b, a) {
        "complete" === (a = a || S).document.readyState ? a.setTimeout(b) : D(a).on("load", b);
    }
    function Jc(b, a) {
        var c = wb[a.toLowerCase()];
        return c && Kc[pa(b)] && c;
    }
    function df(b, a) {
        var c = b.nodeName;
        return ("INPUT" === c || "TEXTAREA" === c) && Lc[a];
    }
    function ef(b, a) {
        var c = function(c, e) {
            c.isDefaultPrevented = function() {
                return c.defaultPrevented;
            };
            var f = a[e || c.type], g = f ? f.length : 0;
            if (g) {
                if (w(c.immediatePropagationStopped)) {
                    var k = c.stopImmediatePropagation;
                    c.stopImmediatePropagation = function() {
                        c.immediatePropagationStopped = !0, c.stopPropagation && c.stopPropagation(), k && k.call(c);
                    };
                }
                c.isImmediatePropagationStopped = function() {
                    return !0 === c.immediatePropagationStopped;
                }, 1 < g && (f = qa(f));
                for (var h = 0; h < g; h++) c.isImmediatePropagationStopped() || f[h].call(b, c);
            }
        };
        return c.elem = b, c;
    }
    function La(b, a) {
        var c = b && b.$$hashKey;
        return c ? ("function" == typeof c && (c = b.$$hashKey()), c) : (c = typeof b, c = "function" == c || "object" == c && null !== b ? b.$$hashKey = c + ":" + (a || Ad)() : c + ":" + b);
    }
    function bb(b, a) {
        if (a) {
            var c = 0;
            this.nextUid = function() {
                return ++c;
            };
        }
        r(b, this.put, this);
    }
    function ff(b) {
        return (b = b.toString().replace(Mc, "").match(Nc)) ? "function(" + (b[1] || "").replace(/[\s\r\n]+/, " ") + ")" : "fn";
    }
    function Ub(b, a, c) {
        var d;
        if ("function" == typeof b) {
            if (!(d = b.$inject)) {
                if (d = [], b.length) {
                    if (a) throw I(c) && c || (c = b.name || ff(b)), Ea("strictdi", c);
                    r((a = (a = b.toString().replace(Mc, "")).match(Nc))[1].split(gf), function(a) {
                        a.replace(hf, function(a, b, c) {
                            d.push(c);
                        });
                    });
                }
                b.$inject = d;
            }
        } else B(b) ? (a = b.length - 1, nb(b[a], "fn"), d = b.slice(0, a)) : nb(b, "fn", !0);
        return d;
    }
    function Jb(b, a) {
        function c(a) {
            return function(b, c) {
                if (!G(b)) return a(b, c);
                r(b, jc(a));
            };
        }
        function d(a, b) {
            if (Ka(a, "service"), (F(b) || B(b)) && (b = p.instantiate(b)), !b.$get) throw Ea("pget", a);
            return q[a + "Provider"] = b;
        }
        function e(a, b) {
            return function() {
                var c = s.invoke(b, this, u, a);
                if (w(c)) throw Ea("undef", a);
                return c;
            };
        }
        function f(a, b, c) {
            return d(a, {
                $get: !1 !== c ? e(a, b) : b
            });
        }
        function g(a) {
            var c, b = [];
            return r(a, function(a) {
                function d(a) {
                    var b, c;
                    for (b = 0, c = a.length; b < c; b++) {
                        var e = a[b], f = p.get(e[0]);
                        f[e[1]].apply(f, e[2]);
                    }
                }
                if (!m.get(a)) {
                    m.put(a, !0);
                    try {
                        I(a) ? (c = $a(a), b = b.concat(g(c.requires)).concat(c._runBlocks), d(c._invokeQueue), 
                        d(c._configBlocks)) : F(a) ? b.push(p.invoke(a)) : B(a) ? b.push(p.invoke(a)) : nb(a, "module");
                    } catch (e) {
                        throw B(a) && (a = a[a.length - 1]), e.message && e.stack && -1 == e.stack.indexOf(e.message) && (e = e.message + "\n" + e.stack), 
                        Ea("modulerr", a, e.stack || e.message || e);
                    }
                }
            }), b;
        }
        function k(b, c) {
            function d(a) {
                if (b.hasOwnProperty(a)) {
                    if (b[a] === h) throw Ea("cdep", a + " <- " + l.join(" <- "));
                    return b[a];
                }
                try {
                    return l.unshift(a), b[a] = h, b[a] = c(a);
                } catch (e) {
                    throw b[a] === h && delete b[a], e;
                } finally {
                    l.shift();
                }
            }
            function e(b, c, f, g) {
                "string" == typeof f && (g = f, f = null);
                var k, l, n, h = [];
                for (l = 0, k = (g = Ub(b, a, g)).length; l < k; l++) {
                    if ("string" != typeof (n = g[l])) throw Ea("itkn", n);
                    h.push(f && f.hasOwnProperty(n) ? f[n] : d(n));
                }
                return B(b) && (b = b[k]), b.apply(c, h);
            }
            return {
                invoke: e,
                instantiate: function(a, b, c) {
                    var d = function() {};
                    return d.prototype = (B(a) ? a[a.length - 1] : a).prototype, d = new d(), a = e(a, d, b, c), 
                    G(a) || F(a) ? a : d;
                },
                get: d,
                annotate: Ub,
                has: function(a) {
                    return q.hasOwnProperty(a + "Provider") || b.hasOwnProperty(a);
                }
            };
        }
        a = !0 === a;
        var h = {}, l = [], m = new bb([], !0), q = {
            $provide: {
                provider: c(d),
                factory: c(f),
                service: c(function(a, b) {
                    return f(a, [ "$injector", function(a) {
                        return a.instantiate(b);
                    } ]);
                }),
                value: c(function(a, b) {
                    return f(a, da(b), !1);
                }),
                constant: c(function(a, b) {
                    Ka(a, "constant"), q[a] = b, n[a] = b;
                }),
                decorator: function(a, b) {
                    var c = p.get(a + "Provider"), d = c.$get;
                    c.$get = function() {
                        var a = s.invoke(d, c);
                        return s.invoke(b, null, {
                            $delegate: a
                        });
                    };
                }
            }
        }, p = q.$injector = k(q, function() {
            throw Ea("unpr", l.join(" <- "));
        }), n = {}, s = n.$injector = k(n, function(a) {
            var b = p.get(a + "Provider");
            return s.invoke(b.$get, b, u, a);
        });
        return r(g(b), function(a) {
            s.invoke(a || A);
        }), s;
    }
    function we() {
        var b = !0;
        this.disableAutoScrolling = function() {
            b = !1;
        }, this.$get = [ "$window", "$location", "$rootScope", function(a, c, d) {
            function e(a) {
                var b = null;
                return Array.prototype.some.call(a, function(a) {
                    if ("a" === pa(a)) return b = a, !0;
                }), b;
            }
            function f(b) {
                if (b) {
                    b.scrollIntoView();
                    var c;
                    F(c = g.yOffset) ? c = c() : mc(c) ? (c = c[0], c = "fixed" !== a.getComputedStyle(c).position ? 0 : c.getBoundingClientRect().bottom) : W(c) || (c = 0), 
                    c && (b = b.getBoundingClientRect().top, a.scrollBy(0, b - c));
                } else a.scrollTo(0, 0);
            }
            function g() {
                var b, a = c.hash();
                a ? (b = k.getElementById(a)) ? f(b) : (b = e(k.getElementsByName(a))) ? f(b) : "top" === a && f(null) : f(null);
            }
            var k = a.document;
            return b && d.$watch(function() {
                return c.hash();
            }, function(a, b) {
                a === b && "" === a || cf(function() {
                    d.$evalAsync(g);
                });
            }), g;
        } ];
    }
    function We() {
        this.$get = [ "$$rAF", "$timeout", function(b, a) {
            return b.supported ? function(a) {
                return b(a);
            } : function(b) {
                return a(b, 0, !1);
            };
        } ];
    }
    function jf(b, a, c, d) {
        function e(a) {
            try {
                a.apply(null, Ya.call(arguments, 1));
            } finally {
                if (0 == --x) for (;t.length; ) try {
                    t.pop()();
                } catch (b) {
                    c.error(b);
                }
            }
        }
        function f(a, b) {
            !function xa() {
                r(T, function(a) {
                    a();
                }), C = b(xa, a);
            }();
        }
        function g() {
            k(), h();
        }
        function k() {
            M = b.history.state, la(M = w(M) ? null : M, V) && (M = V), V = M;
        }
        function h() {
            H === m.url() && P === M || (H = m.url(), P = M, r(O, function(a) {
                a(m.url(), M);
            }));
        }
        function l(a) {
            try {
                return decodeURIComponent(a);
            } catch (b) {
                return a;
            }
        }
        var m = this, q = a[0], p = b.location, n = b.history, s = b.setTimeout, J = b.clearTimeout, v = {};
        m.isMock = !1;
        var x = 0, t = [];
        m.$$completeOutstandingRequest = e, m.$$incOutstandingRequestCount = function() {
            x++;
        }, m.notifyWhenNoOutstandingRequests = function(a) {
            r(T, function(a) {
                a();
            }), 0 === x ? a() : t.push(a);
        };
        var C, T = [];
        m.addPollFn = function(a) {
            return w(C) && f(100, s), T.push(a), a;
        };
        var M, P, H = p.href, Q = a.find("base"), aa = null;
        k(), P = M, m.url = function(a, c, e) {
            if (w(e) && (e = null), p !== b.location && (p = b.location), n !== b.history && (n = b.history), 
            !a) return aa || p.href.replace(/%27/g, "'");
            var f = P === e;
            if (H !== a || d.history && !f) {
                var g = H && Fa(H) === Fa(a);
                return H = a, P = e, !d.history || g && f ? (g || (aa = a), c ? p.replace(a) : p.href = a) : (n[c ? "replaceState" : "pushState"](e, "", a), 
                k(), P = M), m;
            }
        }, m.state = function() {
            return M;
        };
        var O = [], K = !1, V = null;
        m.onUrlChange = function(a) {
            return K || (d.history && D(b).on("popstate", g), D(b).on("hashchange", g), K = !0), 
            O.push(a), a;
        }, m.$$checkUrlChange = h, m.baseHref = function() {
            var a = Q.attr("href");
            return a ? a.replace(/^(https?\:)?\/\/[^\/]*/, "") : "";
        };
        var ca = {}, Ma = "", fa = m.baseHref();
        m.cookies = function(a, b) {
            var d, e, f, g;
            if (!a) {
                if (q.cookie !== Ma) for (Ma = q.cookie, d = Ma.split("; "), ca = {}, f = 0; f < d.length; f++) e = d[f], 
                0 < (g = e.indexOf("=")) && (a = l(e.substring(0, g)), ca[a] === u && (ca[a] = l(e.substring(g + 1))));
                return ca;
            }
            b === u ? q.cookie = encodeURIComponent(a) + "=;path=" + fa + ";expires=Thu, 01 Jan 1970 00:00:00 GMT" : I(b) && 4096 < (d = (q.cookie = encodeURIComponent(a) + "=" + encodeURIComponent(b) + ";path=" + fa).length + 1) && c.warn("Cookie '" + a + "' possibly not set or overflowed because it was too large (" + d + " > 4096 bytes)!");
        }, m.defer = function(a, b) {
            var c;
            return x++, c = s(function() {
                delete v[c], e(a);
            }, b || 0), v[c] = !0, c;
        }, m.defer.cancel = function(a) {
            return !!v[a] && (delete v[a], J(a), e(A), !0);
        };
    }
    function ye() {
        this.$get = [ "$window", "$log", "$sniffer", "$document", function(b, a, c, d) {
            return new jf(b, d, a, c);
        } ];
    }
    function ze() {
        this.$get = function() {
            function b(b, d) {
                function e(a) {
                    a != q && (p ? p == a && (p = a.n) : p = a, f(a.n, a.p), f(a, q), q = a, q.n = null);
                }
                function f(a, b) {
                    a != b && (a && (a.p = b), b && (b.n = a));
                }
                if (b in a) throw y("$cacheFactory")("iid", b);
                var g = 0, k = E({}, d, {
                    id: b
                }), h = {}, l = d && d.capacity || Number.MAX_VALUE, m = {}, q = null, p = null;
                return a[b] = {
                    put: function(a, b) {
                        if (l < Number.MAX_VALUE && e(m[a] || (m[a] = {
                            key: a
                        })), !w(b)) return a in h || g++, h[a] = b, g > l && this.remove(p.key), b;
                    },
                    get: function(a) {
                        if (l < Number.MAX_VALUE) {
                            var b = m[a];
                            if (!b) return;
                            e(b);
                        }
                        return h[a];
                    },
                    remove: function(a) {
                        if (l < Number.MAX_VALUE) {
                            var b = m[a];
                            if (!b) return;
                            b == q && (q = b.p), b == p && (p = b.n), f(b.n, b.p), delete m[a];
                        }
                        delete h[a], g--;
                    },
                    removeAll: function() {
                        h = {}, g = 0, m = {}, q = p = null;
                    },
                    destroy: function() {
                        m = k = h = null, delete a[b];
                    },
                    info: function() {
                        return E({}, k, {
                            size: g
                        });
                    }
                };
            }
            var a = {};
            return b.info = function() {
                var b = {};
                return r(a, function(a, e) {
                    b[e] = a.info();
                }), b;
            }, b.get = function(b) {
                return a[b];
            }, b;
        };
    }
    function Qe() {
        this.$get = [ "$cacheFactory", function(b) {
            return b("templates");
        } ];
    }
    function uc(b, a) {
        function c(a, b) {
            var c = /^\s*([@=&])(\??)\s*(\w*)\s*$/, d = {};
            return r(a, function(a, e) {
                var f = a.match(c);
                if (!f) throw ia("iscp", b, e, a);
                d[e] = {
                    attrName: f[3] || e,
                    mode: f[1],
                    optional: "?" === f[2]
                };
            }), d;
        }
        var d = {}, e = /^\s*directive\:\s*([\d\w_\-]+)\s+(.*)$/, f = /(([\d\w_\-]+)(?:\:([^;]+))?;?)/, g = Bd("ngSrc,ngSrcset,src,srcset"), k = /^(?:(\^\^?)?(\?)?(\^\^?)?)?/, h = /^(on[a-z]+|formaction)$/;
        this.directive = function q(a, e) {
            return Ka(a, "directive"), I(a) ? (Mb(e, "directiveFactory"), d.hasOwnProperty(a) || (d[a] = [], 
            b.factory(a + "Directive", [ "$injector", "$exceptionHandler", function(b, e) {
                var f = [];
                return r(d[a], function(d, g) {
                    try {
                        var h = b.invoke(d);
                        F(h) ? h = {
                            compile: da(h)
                        } : !h.compile && h.link && (h.compile = da(h.link)), h.priority = h.priority || 0, 
                        h.index = g, h.name = h.name || a, h.require = h.require || h.controller && h.name, 
                        h.restrict = h.restrict || "EA", G(h.scope) && (h.$$isolateBindings = c(h.scope, h.name)), 
                        f.push(h);
                    } catch (k) {
                        e(k);
                    }
                }), f;
            } ])), d[a].push(e)) : r(a, jc(q)), this;
        }, this.aHrefSanitizationWhitelist = function(b) {
            return z(b) ? (a.aHrefSanitizationWhitelist(b), this) : a.aHrefSanitizationWhitelist();
        }, this.imgSrcSanitizationWhitelist = function(b) {
            return z(b) ? (a.imgSrcSanitizationWhitelist(b), this) : a.imgSrcSanitizationWhitelist();
        };
        var l = !0;
        this.debugInfoEnabled = function(a) {
            return z(a) ? (l = a, this) : l;
        }, this.$get = [ "$injector", "$interpolate", "$exceptionHandler", "$templateRequest", "$parse", "$controller", "$rootScope", "$document", "$sce", "$animate", "$$sanitizeUri", function(a, b, c, s, J, v, x, t, T, C, M) {
            function P(a, b) {
                try {
                    a.addClass(b);
                } catch (c) {}
            }
            function H(a, b, c, d, e) {
                a instanceof D || (a = D(a)), r(a, function(b, c) {
                    b.nodeType == kb && b.nodeValue.match(/\S+/) && (a[c] = D(b).wrap("<span></span>").parent()[0]);
                });
                var f = Q(a, b, a, c, d, e);
                H.$$addScopeClass(a);
                var g = null;
                return function(b, c, d, e, h) {
                    if (Mb(b, "scope"), g || (g = (h = h && h[0]) && "foreignobject" !== pa(h) && h.toString().match(/SVG/) ? "svg" : "html"), 
                    h = "html" !== g ? D(S(g, D("<div>").append(a).html())) : c ? Ja.clone.call(a) : a, 
                    d) for (var k in d) h.data("$" + k + "Controller", d[k].instance);
                    return H.$$addScopeInfo(h, b), c && c(h, b), f && f(b, h, h, e), h;
                };
            }
            function Q(a, b, c, d, e, f) {
                for (var k, l, p, n, q, h = [], t = 0; t < a.length; t++) k = new Xb(), (f = (l = O(a[t], [], k, 0 === t ? d : u, e)).length ? ca(l, a[t], k, b, c, null, [], [], f) : null) && f.scope && H.$$addScopeClass(k.$$element), 
                k = f && f.terminal || !(p = a[t].childNodes) || !p.length ? null : Q(p, f ? (f.transcludeOnThisElement || !f.templateOnThisElement) && f.transclude : b), 
                (f || k) && (h.push(t, f, k), n = !0, q = q || f), f = null;
                return n ? function(a, c, d, e) {
                    var f, k, l, p, n, t, s;
                    if (q) for (s = Array(c.length), p = 0; p < h.length; p += 3) f = h[p], s[f] = c[f]; else s = c;
                    for (p = 0, n = h.length; p < n; ) k = s[h[p++]], c = h[p++], f = h[p++], c ? (c.scope ? (l = a.$new(), 
                    H.$$addScopeInfo(D(k), l)) : l = a, t = c.transcludeOnThisElement ? aa(a, c.transclude, e, c.elementTranscludeOnThisElement) : !c.templateOnThisElement && e ? e : !e && b ? aa(a, b) : null, 
                    c(f, l, k, d, t)) : f && f(a, k.childNodes, u, e);
                } : null;
            }
            function aa(a, b, c, d) {
                return function(d, e, f, g, h) {
                    return d || (d = a.$new(!1, h), d.$$transcluded = !0), b(d, e, f, c, g);
                };
            }
            function O(b, c, g, h, k) {
                var p, l = g.$attr;
                switch (b.nodeType) {
                  case ka:
                    fa(c, ua(pa(b)), "E", h, k);
                    for (var n, t, s, v = b.attributes, J = 0, T = v && v.length; J < T; J++) {
                        var M = !1, C = !1;
                        p = (n = v[J]).name, n = U(n.value), t = ua(p), (s = ya.test(t)) && (p = Kb(t.substr(6), "-"));
                        var P, H = t.replace(/(Start|End)$/, "");
                        a: {
                            var O = H;
                            if (d.hasOwnProperty(O)) {
                                P = void 0;
                                for (var r = 0, aa = (O = a.get(O + "Directive")).length; r < aa; r++) if ((P = O[r]).multiElement) {
                                    P = !0;
                                    break a;
                                }
                            }
                            P = !1;
                        }
                        P && t === H + "Start" && (M = p, C = p.substr(0, p.length - 5) + "end", p = p.substr(0, p.length - 6)), 
                        l[t = ua(p.toLowerCase())] = p, !s && g.hasOwnProperty(t) || (g[t] = n, Jc(b, t) && (g[t] = !0)), 
                        R(b, c, n, t, s), fa(c, t, "A", h, k, M, C);
                    }
                    if (b = b.className, I(b) && "" !== b) for (;p = f.exec(b); ) t = ua(p[2]), fa(c, t, "C", h, k) && (g[t] = U(p[3])), 
                    b = b.substr(p.index + p[0].length);
                    break;

                  case kb:
                    Y(c, b.nodeValue);
                    break;

                  case 8:
                    try {
                        (p = e.exec(b.nodeValue)) && (t = ua(p[1]), fa(c, t, "M", h, k) && (g[t] = U(p[2])));
                    } catch (x) {}
                }
                return c.sort(y), c;
            }
            function K(a, b, c) {
                var d = [], e = 0;
                if (b && a.hasAttribute && a.hasAttribute(b)) do {
                    if (!a) throw ia("uterdir", b, c);
                    a.nodeType == ka && (a.hasAttribute(b) && e++, a.hasAttribute(c) && e--), d.push(a), 
                    a = a.nextSibling;
                } while (0 < e); else d.push(a);
                return D(d);
            }
            function V(a, b, c) {
                return function(d, e, f, g, h) {
                    return e = K(e[0], b, c), a(d, e, f, g, h);
                };
            }
            function ca(a, d, e, f, g, h, l, q, t) {
                function s(a, b, c, d) {
                    a && (c && (a = V(a, c, d)), a.require = L.require, a.directiveName = ga, (Q === L || L.$$isolateScope) && (a = Z(a, {
                        isolateScope: !0
                    })), l.push(a)), b && (c && (b = V(b, c, d)), b.require = L.require, b.directiveName = ga, 
                    (Q === L || L.$$isolateScope) && (b = Z(b, {
                        isolateScope: !0
                    })), q.push(b));
                }
                function T(a, b, c, d) {
                    var e, l, f = "data", g = !1, h = c;
                    if (I(b)) {
                        if (l = b.match(k), b = b.substring(l[0].length), l[3] && (l[1] ? l[3] = null : l[1] = l[3]), 
                        "^" === l[1] ? f = "inheritedData" : "^^" === l[1] && (f = "inheritedData", h = c.parent()), 
                        "?" === l[2] && (g = !0), e = null, d && "data" === f && (e = d[b]) && (e = e.instance), 
                        !(e = e || h[f]("$" + b + "Controller")) && !g) throw ia("ctreq", b, a);
                    } else B(b) && (e = [], r(b, function(b) {
                        e.push(T(a, b, c, d));
                    }));
                    return e;
                }
                function M(a, c, f, g, h) {
                    var n, t, s, C, P, xb, O, K;
                    if (d === f ? (K = e, O = e.$$element) : (O = D(f), K = new Xb(O, e)), Q && (C = c.$new(!0)), 
                    xb = h && function(a, b, c) {
                        var d;
                        return Ua(a) || (c = b, b = a, a = u), E && (d = P), c || (c = E ? O.parent() : O), 
                        h(a, b, d, c, Wb);
                    }, aa && (x = {}, P = {}, r(aa, function(a) {
                        var b = {
                            $scope: a === Q || a.$$isolateScope ? C : c,
                            $element: O,
                            $attrs: K,
                            $transclude: xb
                        };
                        "@" == (s = a.controller) && (s = K[a.name]), b = v(s, b, !0, a.controllerAs), P[a.name] = b, 
                        E || O.data("$" + a.name + "Controller", b.instance), x[a.name] = b;
                    })), Q) {
                        H.$$addScopeInfo(O, C, !0, !(ca && (ca === Q || ca === Q.$$originalDirective))), 
                        H.$$addScopeClass(O, !0), g = x && x[Q.name];
                        var V = C;
                        g && g.identifier && !0 === Q.bindToController && (V = g.instance), r(C.$$isolateBindings = Q.$$isolateBindings, function(a, d) {
                            var g, h, k, l, e = a.attrName, f = a.optional;
                            switch (a.mode) {
                              case "@":
                                K.$observe(e, function(a) {
                                    V[d] = a;
                                }), K.$$observers[e].$$scope = c, K[e] && (V[d] = b(K[e])(c));
                                break;

                              case "=":
                                if (f && !K[e]) break;
                                h = J(K[e]), l = h.literal ? la : function(a, b) {
                                    return a === b || a !== a && b !== b;
                                }, k = h.assign || function() {
                                    throw g = V[d] = h(c), ia("nonassign", K[e], Q.name);
                                }, g = V[d] = h(c), (f = function(a) {
                                    return l(a, V[d]) || (l(a, g) ? k(c, a = V[d]) : V[d] = a), g = a;
                                }).$stateful = !0, f = c.$watch(J(K[e], f), null, h.literal), C.$on("$destroy", f);
                                break;

                              case "&":
                                h = J(K[e]), V[d] = function(a) {
                                    return h(c, a);
                                };
                            }
                        });
                    }
                    for (x && (r(x, function(a) {
                        a();
                    }), x = null), g = 0, n = l.length; g < n; g++) t = l[g], $(t, t.isolateScope ? C : c, O, K, t.require && T(t.directiveName, t.require, O, P), xb);
                    var Wb = c;
                    for (Q && (Q.template || null === Q.templateUrl) && (Wb = C), a && a(Wb, f.childNodes, u, h), 
                    g = q.length - 1; 0 <= g; g--) t = q[g], $(t, t.isolateScope ? C : c, O, K, t.require && T(t.directiveName, t.require, O, P), xb);
                }
                t = t || {};
                for (var P, x, L, ga, y, N, C = -Number.MAX_VALUE, aa = t.controllerDirectives, Q = t.newIsolateScopeDirective, ca = t.templateDirective, fa = t.nonTlbTranscludeDirective, Na = !1, A = !1, E = t.hasElementTranscludeDirective, Y = e.$$element = D(d), Ga = f, R = 0, ya = a.length; R < ya; R++) {
                    var W = (L = a[R]).$$start, Vb = L.$$end;
                    if (W && (Y = K(d, W, Vb)), y = u, C > L.priority) break;
                    if ((y = L.scope) && (L.templateUrl || (G(y) ? (xa("new/isolated scope", Q || P, L, Y), 
                    Q = L) : xa("new/isolated scope", Q, L, Y)), P = P || L), ga = L.name, !L.templateUrl && L.controller && (y = L.controller, 
                    aa = aa || {}, xa("'" + ga + "' controller", aa[ga], L, Y), aa[ga] = L), (y = L.transclude) && (Na = !0, 
                    L.$$tlb || (xa("transclusion", fa, L, Y), fa = L), "element" == y ? (E = !0, C = L.priority, 
                    y = Y, Y = e.$$element = D(X.createComment(" " + ga + ": " + e[ga] + " ")), d = Y[0], 
                    yb(g, Ya.call(y, 0), d), Ga = H(y, f, C, h && h.name, {
                        nonTlbTranscludeDirective: fa
                    })) : (y = D(Pb(d)).contents(), Y.empty(), Ga = H(y, f))), L.template) if (A = !0, 
                    xa("template", ca, L, Y), ca = L, y = F(L.template) ? L.template(Y, e) : L.template, 
                    y = Oc(y), L.replace) {
                        if (h = L, y = Nb.test(y) ? Pc(S(L.templateNamespace, U(y))) : [], d = y[0], 1 != y.length || d.nodeType !== ka) throw ia("tplrt", ga, "");
                        yb(g, Y, d), y = O(d, [], ya = {
                            $attr: {}
                        });
                        var ba = a.splice(R + 1, a.length - (R + 1));
                        Q && Ma(y), a = a.concat(y).concat(ba), z(e, ya), ya = a.length;
                    } else Y.html(y);
                    if (L.templateUrl) A = !0, xa("template", ca, L, Y), ca = L, L.replace && (h = L), 
                    M = w(a.splice(R, a.length - R), Y, e, g, Na && Ga, l, q, {
                        controllerDirectives: aa,
                        newIsolateScopeDirective: Q,
                        templateDirective: ca,
                        nonTlbTranscludeDirective: fa
                    }), ya = a.length; else if (L.compile) try {
                        F(N = L.compile(Y, e, Ga)) ? s(null, N, W, Vb) : N && s(N.pre, N.post, W, Vb);
                    } catch (kf) {
                        c(kf, sa(Y));
                    }
                    L.terminal && (M.terminal = !0, C = Math.max(C, L.priority));
                }
                return M.scope = P && !0 === P.scope, M.transcludeOnThisElement = Na, M.elementTranscludeOnThisElement = E, 
                M.templateOnThisElement = A, M.transclude = Ga, t.hasElementTranscludeDirective = E, 
                M;
            }
            function Ma(a) {
                for (var b = 0, c = a.length; b < c; b++) a[b] = lc(a[b], {
                    $$isolateScope: !0
                });
            }
            function fa(b, e, f, g, h, k, l) {
                if (e === h) return null;
                if (h = null, d.hasOwnProperty(e)) for (var p, t = 0, s = (e = a.get(e + "Directive")).length; t < s; t++) try {
                    p = e[t], (g === u || g > p.priority) && -1 != p.restrict.indexOf(f) && (k && (p = lc(p, {
                        $$start: k,
                        $$end: l
                    })), b.push(p), h = p);
                } catch (v) {
                    c(v);
                }
                return h;
            }
            function z(a, b) {
                var c = b.$attr, d = a.$attr, e = a.$$element;
                r(a, function(d, e) {
                    "$" != e.charAt(0) && (b[e] && b[e] !== d && (d += ("style" === e ? ";" : " ") + b[e]), 
                    a.$set(e, d, !0, c[e]));
                }), r(b, function(b, f) {
                    "class" == f ? (P(e, b), a.class = (a.class ? a.class + " " : "") + b) : "style" == f ? (e.attr("style", e.attr("style") + ";" + b), 
                    a.style = (a.style ? a.style + ";" : "") + b) : "$" == f.charAt(0) || a.hasOwnProperty(f) || (a[f] = b, 
                    d[f] = c[f]);
                });
            }
            function w(a, b, c, d, e, f, g, h) {
                var l, p, k = [], n = b[0], t = a.shift(), q = E({}, t, {
                    templateUrl: null,
                    transclude: null,
                    replace: null,
                    $$originalDirective: t
                }), v = F(t.templateUrl) ? t.templateUrl(b, c) : t.templateUrl, J = t.templateNamespace;
                return b.empty(), s(T.getTrustedResourceUrl(v)).then(function(s) {
                    var C, T;
                    if (s = Oc(s), t.replace) {
                        if (s = Nb.test(s) ? Pc(S(J, U(s))) : [], C = s[0], 1 != s.length || C.nodeType !== ka) throw ia("tplrt", t.name, v);
                        s = {
                            $attr: {}
                        }, yb(d, b, C);
                        M = O(C, [], s);
                        G(t.scope) && Ma(M), a = M.concat(a), z(c, s);
                    } else C = n, b.html(s);
                    for (a.unshift(q), l = ca(a, C, c, e, b, t, f, g, h), r(d, function(a, c) {
                        a == C && (d[c] = b[0]);
                    }), p = Q(b[0].childNodes, e); k.length; ) {
                        s = k.shift(), T = k.shift();
                        var H = k.shift(), K = k.shift(), M = b[0];
                        if (!s.$$destroyed) {
                            if (T !== n) {
                                var x = T.className;
                                h.hasElementTranscludeDirective && t.replace || (M = Pb(C)), yb(H, D(T), M), P(D(M), x);
                            }
                            T = l.transcludeOnThisElement ? aa(s, l.transclude, K) : K, l(p, s, M, d, T);
                        }
                    }
                    k = null;
                }), function(a, b, c, d, e) {
                    a = e, b.$$destroyed || (k ? (k.push(b), k.push(c), k.push(d), k.push(a)) : (l.transcludeOnThisElement && (a = aa(b, l.transclude, e)), 
                    l(p, b, c, d, a)));
                };
            }
            function y(a, b) {
                var c = b.priority - a.priority;
                return 0 !== c ? c : a.name !== b.name ? a.name < b.name ? -1 : 1 : a.index - b.index;
            }
            function xa(a, b, c, d) {
                if (b) throw ia("multidir", b.name, c.name, a, sa(d));
            }
            function Y(a, c) {
                var d = b(c, !0);
                d && a.push({
                    priority: 0,
                    compile: function(a) {
                        var b = !!(a = a.parent()).length;
                        return b && H.$$addBindingClass(a), function(a, c) {
                            var e = c.parent();
                            b || H.$$addBindingClass(e), H.$$addBindingInfo(e, d.expressions), a.$watch(d, function(a) {
                                c[0].nodeValue = a;
                            });
                        };
                    }
                });
            }
            function S(a, b) {
                switch (a = N(a || "html")) {
                  case "svg":
                  case "math":
                    var c = X.createElement("div");
                    return c.innerHTML = "<" + a + ">" + b + "</" + a + ">", c.childNodes[0].childNodes;

                  default:
                    return b;
                }
            }
            function Ga(a, b) {
                if ("srcdoc" == b) return T.HTML;
                var c = pa(a);
                return "xlinkHref" == b || "form" == c && "action" == b || "img" != c && ("src" == b || "ngSrc" == b) ? T.RESOURCE_URL : void 0;
            }
            function R(a, c, d, e, f) {
                var k = b(d, !0);
                if (k) {
                    if ("multiple" === e && "select" === pa(a)) throw ia("selmulti", sa(a));
                    c.push({
                        priority: 100,
                        compile: function() {
                            return {
                                pre: function(c, d, l) {
                                    if (d = l.$$observers || (l.$$observers = {}), h.test(e)) throw ia("nodomevents");
                                    l[e] && (k = b(l[e], !0, Ga(a, e), g[e] || f)) && (l[e] = k(c), (d[e] || (d[e] = [])).$$inter = !0, 
                                    (l.$$observers && l.$$observers[e].$$scope || c).$watch(k, function(a, b) {
                                        "class" === e && a != b ? l.$updateClass(a, b) : l.$set(e, a);
                                    }));
                                }
                            };
                        }
                    });
                }
            }
            function yb(a, b, c) {
                var g, h, d = b[0], e = b.length, f = d.parentNode;
                if (a) for (g = 0, h = a.length; g < h; g++) if (a[g] == d) {
                    a[g++] = c, h = g + e - 1;
                    for (var k = a.length; g < k; g++, h++) h < k ? a[g] = a[h] : delete a[g];
                    a.length -= e - 1, a.context === d && (a.context = c);
                    break;
                }
                for (f && f.replaceChild(c, d), (a = X.createDocumentFragment()).appendChild(d), 
                D(c).data(D(d).data()), ma ? (Lb = !0, ma.cleanData([ d ])) : delete D.cache[d[D.expando]], 
                d = 1, e = b.length; d < e; d++) f = b[d], D(f).remove(), a.appendChild(f), delete b[d];
                b[0] = c, b.length = 1;
            }
            function Z(a, b) {
                return E(function() {
                    return a.apply(null, arguments);
                }, a, b);
            }
            function $(a, b, d, e, f, g) {
                try {
                    a(b, d, e, f, g);
                } catch (h) {
                    c(h, sa(d));
                }
            }
            var Xb = function(a, b) {
                if (b) {
                    var d, e, f, c = Object.keys(b);
                    for (d = 0, e = c.length; d < e; d++) f = c[d], this[f] = b[f];
                } else this.$attr = {};
                this.$$element = a;
            };
            Xb.prototype = {
                $normalize: ua,
                $addClass: function(a) {
                    a && 0 < a.length && C.addClass(this.$$element, a);
                },
                $removeClass: function(a) {
                    a && 0 < a.length && C.removeClass(this.$$element, a);
                },
                $updateClass: function(a, b) {
                    var c = Qc(a, b);
                    c && c.length && C.addClass(this.$$element, c), (c = Qc(b, a)) && c.length && C.removeClass(this.$$element, c);
                },
                $set: function(a, b, d, e) {
                    var g = Jc(f = this.$$element[0], a), h = df(f, a), f = a;
                    if (g ? (this.$$element.prop(a, b), e = g) : h && (this[h] = b, f = h), this[a] = b, 
                    e ? this.$attr[a] = e : (e = this.$attr[a]) || (this.$attr[a] = e = Kb(a, "-")), 
                    "a" === (g = pa(this.$$element)) && "href" === a || "img" === g && "src" === a) this[a] = b = M(b, "src" === a); else if ("img" === g && "srcset" === a) {
                        for (var g = "", h = U(b), k = /(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/, k = /\s/.test(h) ? k : /(,)/, h = h.split(k), k = Math.floor(h.length / 2), l = 0; l < k; l++) var p = 2 * l, g = g + M(U(h[p]), !0), g = g + " " + U(h[p + 1]);
                        h = U(h[2 * l]).split(/\s/), g += M(U(h[0]), !0), 2 === h.length && (g += " " + U(h[1])), 
                        this[a] = b = g;
                    }
                    !1 !== d && (null === b || b === u ? this.$$element.removeAttr(e) : this.$$element.attr(e, b)), 
                    (a = this.$$observers) && r(a[f], function(a) {
                        try {
                            a(b);
                        } catch (d) {
                            c(d);
                        }
                    });
                },
                $observe: function(a, b) {
                    var c = this, d = c.$$observers || (c.$$observers = wa()), e = d[a] || (d[a] = []);
                    return e.push(b), x.$evalAsync(function() {
                        e.$$inter || b(c[a]);
                    }), function() {
                        Wa(e, b);
                    };
                }
            };
            var ga = b.startSymbol(), Na = b.endSymbol(), Oc = "{{" == ga || "}}" == Na ? Ta : function(a) {
                return a.replace(/\{\{/g, ga).replace(/}}/g, Na);
            }, ya = /^ngAttr[A-Z]/;
            return H.$$addBindingInfo = l ? function(a, b) {
                var c = a.data("$binding") || [];
                B(b) ? c = c.concat(b) : c.push(b), a.data("$binding", c);
            } : A, H.$$addBindingClass = l ? function(a) {
                P(a, "ng-binding");
            } : A, H.$$addScopeInfo = l ? function(a, b, c, d) {
                a.data(c ? d ? "$isolateScopeNoTemplate" : "$isolateScope" : "$scope", b);
            } : A, H.$$addScopeClass = l ? function(a, b) {
                P(a, b ? "ng-isolate-scope" : "ng-scope");
            } : A, H;
        } ];
    }
    function ua(b) {
        return ab(b.replace(lf, ""));
    }
    function Qc(b, a) {
        var c = "", d = b.split(/\s+/), e = a.split(/\s+/), f = 0;
        a: for (;f < d.length; f++) {
            for (var g = d[f], k = 0; k < e.length; k++) if (g == e[k]) continue a;
            c += (0 < c.length ? " " : "") + g;
        }
        return c;
    }
    function Pc(b) {
        var a = (b = D(b)).length;
        if (1 >= a) return b;
        for (;a--; ) 8 === b[a].nodeType && mf.call(b, a, 1);
        return b;
    }
    function Ae() {
        var b = {}, a = !1, c = /^(\S+)(\s+as\s+(\w+))?$/;
        this.register = function(a, c) {
            Ka(a, "controller"), G(a) ? E(b, a) : b[a] = c;
        }, this.allowGlobals = function() {
            a = !0;
        }, this.$get = [ "$injector", "$window", function(d, e) {
            function f(a, b, c, d) {
                if (!a || !G(a.$scope)) throw y("$controller")("noscp", d, b);
                a.$scope[b] = c;
            }
            return function(g, k, h, l) {
                var m, q, p;
                return h = !0 === h, l && I(l) && (p = l), I(g) && (l = g.match(c), q = l[1], p = p || l[3], 
                g = b.hasOwnProperty(q) ? b[q] : tc(k.$scope, q, !0) || (a ? tc(e, q, !0) : u), 
                nb(g, q, !0)), h ? (h = function() {}, h.prototype = (B(g) ? g[g.length - 1] : g).prototype, 
                m = new h(), p && f(k, p, m, q || g.name), E(function() {
                    return d.invoke(g, m, k, q), m;
                }, {
                    instance: m,
                    identifier: p
                })) : (m = d.instantiate(g, k, q), p && f(k, p, m, q || g.name), m);
            };
        } ];
    }
    function Be() {
        this.$get = [ "$window", function(b) {
            return D(b.document);
        } ];
    }
    function Ce() {
        this.$get = [ "$log", function(b) {
            return function(a, c) {
                b.error.apply(b, arguments);
            };
        } ];
    }
    function Rc(b) {
        var c, d, e, a = {};
        return b ? (r(b.split("\n"), function(b) {
            e = b.indexOf(":"), c = N(U(b.substr(0, e))), d = U(b.substr(e + 1)), c && (a[c] = a[c] ? a[c] + ", " + d : d);
        }), a) : a;
    }
    function Sc(b) {
        var a = G(b) ? b : u;
        return function(c) {
            return a || (a = Rc(b)), c ? a[N(c)] || null : a;
        };
    }
    function Tc(b, a, c) {
        return F(c) ? c(b, a) : (r(c, function(c) {
            b = c(b, a);
        }), b);
    }
    function Fe() {
        var b = /^\s*(\[|\{[^\{])/, a = /[\}\]]\s*$/, c = /^\)\]\}',?\n/, d = {
            "Content-Type": "application/json;charset=utf-8"
        }, e = this.defaults = {
            transformResponse: [ function(d, e) {
                if (I(d)) {
                    d = d.replace(c, "");
                    var f = e("Content-Type");
                    (f && 0 === f.indexOf("application/json") || b.test(d) && a.test(d)) && (d = oc(d));
                }
                return d;
            } ],
            transformRequest: [ function(a) {
                return G(a) && "[object File]" !== Ia.call(a) && "[object Blob]" !== Ia.call(a) ? ra(a) : a;
            } ],
            headers: {
                common: {
                    Accept: "application/json, text/plain, */*"
                },
                post: qa(d),
                put: qa(d),
                patch: qa(d)
            },
            xsrfCookieName: "XSRF-TOKEN",
            xsrfHeaderName: "X-XSRF-TOKEN"
        }, f = !1;
        this.useApplyAsync = function(a) {
            return z(a) ? (f = !!a, this) : f;
        };
        var g = this.interceptors = [];
        this.$get = [ "$httpBackend", "$browser", "$cacheFactory", "$rootScope", "$q", "$injector", function(a, b, c, d, q, p) {
            function n(a) {
                function b(a) {
                    var d = E({}, a);
                    return d.data = a.data ? Tc(a.data, a.headers, c.transformResponse) : a.data, 200 <= (a = a.status) && 300 > a ? d : q.reject(d);
                }
                var c = {
                    method: "get",
                    transformRequest: e.transformRequest,
                    transformResponse: e.transformResponse
                }, d = function(a) {
                    var d, f, b = e.headers, c = E({}, a.headers), b = E({}, b.common, b[N(a.method)]);
                    a: for (d in b) {
                        a = N(d);
                        for (f in c) if (N(f) === a) continue a;
                        c[d] = b[d];
                    }
                    return function(a) {
                        var b;
                        r(a, function(c, d) {
                            F(c) && (null != (b = c()) ? a[d] = b : delete a[d]);
                        });
                    }(c), c;
                }(a);
                E(c, a), c.headers = d, c.method = pb(c.method);
                var f = [ function(a) {
                    d = a.headers;
                    var c = Tc(a.data, Sc(d), a.transformRequest);
                    return w(c) && r(d, function(a, b) {
                        "content-type" === N(b) && delete d[b];
                    }), w(a.withCredentials) && !w(e.withCredentials) && (a.withCredentials = e.withCredentials), 
                    s(a, c, d).then(b, b);
                }, u ], g = q.when(c);
                for (r(x, function(a) {
                    (a.request || a.requestError) && f.unshift(a.request, a.requestError), (a.response || a.responseError) && f.push(a.response, a.responseError);
                }); f.length; ) {
                    a = f.shift();
                    var h = f.shift(), g = g.then(a, h);
                }
                return g.success = function(a) {
                    return g.then(function(b) {
                        a(b.data, b.status, b.headers, c);
                    }), g;
                }, g.error = function(a) {
                    return g.then(null, function(b) {
                        a(b.data, b.status, b.headers, c);
                    }), g;
                }, g;
            }
            function s(c, g, l) {
                function s(a, b, d, e) {
                    (200 <= (b = Math.max(b, 0)) && 300 > b ? x.resolve : x.reject)({
                        data: a,
                        status: b,
                        headers: Sc(d),
                        config: c,
                        statusText: e
                    });
                }
                function H() {
                    var a = n.pendingRequests.indexOf(c);
                    -1 !== a && n.pendingRequests.splice(a, 1);
                }
                var O, K, x = q.defer(), r = x.promise, V = J(c.url, c.params);
                if (n.pendingRequests.push(c), r.then(H, H), !c.cache && !e.cache || !1 === c.cache || "GET" !== c.method && "JSONP" !== c.method || (O = G(c.cache) ? c.cache : G(e.cache) ? e.cache : v), 
                O) if (K = O.get(V), z(K)) {
                    if (K && F(K.then)) return K.then(H, H), K;
                    B(K) ? s(K[1], K[0], qa(K[2]), K[3]) : s(K, 200, {}, "OK");
                } else O.put(V, r);
                return w(K) && ((K = Uc(c.url) ? b.cookies()[c.xsrfCookieName || e.xsrfCookieName] : u) && (l[c.xsrfHeaderName || e.xsrfHeaderName] = K), 
                a(c.method, V, g, function(a, b, c, e) {
                    function g() {
                        s(b, a, c, e);
                    }
                    O && (200 <= a && 300 > a ? O.put(V, [ a, b, Rc(c), e ]) : O.remove(V)), f ? d.$applyAsync(g) : (g(), 
                    d.$$phase || d.$apply());
                }, l, c.timeout, c.withCredentials, c.responseType)), r;
            }
            function J(a, b) {
                if (!b) return a;
                var c = [];
                return zd(b, function(a, b) {
                    null === a || w(a) || (B(a) || (a = [ a ]), r(a, function(a) {
                        G(a) && (a = ea(a) ? a.toISOString() : ra(a)), c.push(Da(b) + "=" + Da(a));
                    }));
                }), 0 < c.length && (a += (-1 == a.indexOf("?") ? "?" : "&") + c.join("&")), a;
            }
            var v = c("$http"), x = [];
            return r(g, function(a) {
                x.unshift(I(a) ? p.get(a) : p.invoke(a));
            }), n.pendingRequests = [], function(a) {
                r(arguments, function(a) {
                    n[a] = function(b, c) {
                        return n(E(c || {}, {
                            method: a,
                            url: b
                        }));
                    };
                });
            }("get", "delete", "head", "jsonp"), function(a) {
                r(arguments, function(a) {
                    n[a] = function(b, c, d) {
                        return n(E(d || {}, {
                            method: a,
                            url: b,
                            data: c
                        }));
                    };
                });
            }("post", "put", "patch"), n.defaults = e, n;
        } ];
    }
    function nf() {
        return new S.XMLHttpRequest();
    }
    function Ge() {
        this.$get = [ "$browser", "$window", "$document", function(b, a, c) {
            return of(b, nf, b.defer, a.angular.callbacks, c[0]);
        } ];
    }
    function of(b, a, c, d, e) {
        function f(a, b, c) {
            var f = e.createElement("script"), m = null;
            return f.type = "text/javascript", f.src = a, f.async = !0, m = function(a) {
                f.removeEventListener("load", m, !1), f.removeEventListener("error", m, !1), e.body.removeChild(f), 
                f = null;
                var g = -1, n = "unknown";
                a && ("load" !== a.type || d[b].called || (a = {
                    type: "error"
                }), n = a.type, g = "error" === a.type ? 404 : 200), c && c(g, n);
            }, f.addEventListener("load", m, !1), f.addEventListener("error", m, !1), e.body.appendChild(f), 
            m;
        }
        return function(e, k, h, l, m, q, p, n) {
            function s() {
                x && x(), t && t.abort();
            }
            function J(a, d, e, f, g) {
                C && c.cancel(C), x = t = null, a(d, e, f, g), b.$$completeOutstandingRequest(A);
            }
            if (b.$$incOutstandingRequestCount(), k = k || b.url(), "jsonp" == N(e)) {
                var v = "_" + (d.counter++).toString(36);
                d[v] = function(a) {
                    d[v].data = a, d[v].called = !0;
                };
                var x = f(k.replace("JSON_CALLBACK", "angular.callbacks." + v), v, function(a, b) {
                    J(l, a, d[v].data, "", b), d[v] = A;
                });
            } else {
                var t = a();
                if (t.open(e, k, !0), r(m, function(a, b) {
                    z(a) && t.setRequestHeader(b, a);
                }), t.onload = function() {
                    var a = t.statusText || "", b = "response" in t ? t.response : t.responseText, c = 1223 === t.status ? 204 : t.status;
                    0 === c && (c = b ? 200 : "file" == za(k).protocol ? 404 : 0), J(l, c, b, t.getAllResponseHeaders(), a);
                }, e = function() {
                    J(l, -1, null, null, "");
                }, t.onerror = e, t.onabort = e, p && (t.withCredentials = !0), n) try {
                    t.responseType = n;
                } catch (T) {
                    if ("json" !== n) throw T;
                }
                t.send(h || null);
            }
            if (0 < q) var C = c(s, q); else q && F(q.then) && q.then(s);
        };
    }
    function De() {
        var b = "{{", a = "}}";
        this.startSymbol = function(a) {
            return a ? (b = a, this) : b;
        }, this.endSymbol = function(b) {
            return b ? (a = b, this) : a;
        }, this.$get = [ "$parse", "$exceptionHandler", "$sce", function(c, d, e) {
            function f(a) {
                return "\\\\\\" + a;
            }
            function g(f, g, n, s) {
                function J(c) {
                    return c.replace(l, b).replace(m, a);
                }
                s = !!s;
                for (var x, t, T = 0, C = [], M = [], P = f.length, H = [], r = []; T < P; ) {
                    if (-1 == (x = f.indexOf(b, T)) || -1 == (t = f.indexOf(a, x + k))) {
                        T !== P && H.push(J(f.substring(T)));
                        break;
                    }
                    T !== x && H.push(J(f.substring(T, x))), T = f.substring(x + k, t), C.push(T), M.push(c(T, function(a) {
                        try {
                            var b, c = n ? e.getTrusted(n, a) : e.valueOf(a);
                            if (null == c) b = ""; else {
                                switch (typeof c) {
                                  case "string":
                                    break;

                                  case "number":
                                    c = "" + c;
                                    break;

                                  default:
                                    c = ra(c);
                                }
                                b = c;
                            }
                            return b;
                        } catch (g) {
                            a = Yb("interr", f, g.toString()), d(a);
                        }
                    })), T = t + h, r.push(H.length), H.push("");
                }
                if (n && 1 < H.length) throw Yb("noconcat", f);
                if (!g || C.length) {
                    var u = function(a) {
                        for (var b = 0, c = C.length; b < c; b++) {
                            if (s && w(a[b])) return;
                            H[r[b]] = a[b];
                        }
                        return H.join("");
                    };
                    return E(function(a) {
                        var b = 0, c = C.length, e = Array(c);
                        try {
                            for (;b < c; b++) e[b] = M[b](a);
                            return u(e);
                        } catch (g) {
                            a = Yb("interr", f, g.toString()), d(a);
                        }
                    }, {
                        exp: f,
                        expressions: C,
                        $$watchDelegate: function(a, b, c) {
                            var d;
                            return a.$watchGroup(M, function(c, e) {
                                var f = u(c);
                                F(b) && b.call(this, f, c !== e ? d : f, a), d = f;
                            }, c);
                        }
                    });
                }
            }
            var k = b.length, h = a.length, l = new RegExp(b.replace(/./g, f), "g"), m = new RegExp(a.replace(/./g, f), "g");
            return g.startSymbol = function() {
                return b;
            }, g.endSymbol = function() {
                return a;
            }, g;
        } ];
    }
    function Ee() {
        this.$get = [ "$rootScope", "$window", "$q", "$$q", function(b, a, c, d) {
            function e(e, k, h, l) {
                var m = a.setInterval, q = a.clearInterval, p = 0, n = z(l) && !l, s = (n ? d : c).defer(), J = s.promise;
                return h = z(h) ? h : 0, J.then(null, null, e), J.$$intervalId = m(function() {
                    s.notify(p++), 0 < h && p >= h && (s.resolve(p), q(J.$$intervalId), delete f[J.$$intervalId]), 
                    n || b.$apply();
                }, k), f[J.$$intervalId] = s, J;
            }
            var f = {};
            return e.cancel = function(b) {
                return !!(b && b.$$intervalId in f) && (f[b.$$intervalId].reject("canceled"), a.clearInterval(b.$$intervalId), 
                delete f[b.$$intervalId], !0);
            }, e;
        } ];
    }
    function Md() {
        this.$get = function() {
            return {
                id: "en-us",
                NUMBER_FORMATS: {
                    DECIMAL_SEP: ".",
                    GROUP_SEP: ",",
                    PATTERNS: [ {
                        minInt: 1,
                        minFrac: 0,
                        maxFrac: 3,
                        posPre: "",
                        posSuf: "",
                        negPre: "-",
                        negSuf: "",
                        gSize: 3,
                        lgSize: 3
                    }, {
                        minInt: 1,
                        minFrac: 2,
                        maxFrac: 2,
                        posPre: "\xa4",
                        posSuf: "",
                        negPre: "(\xa4",
                        negSuf: ")",
                        gSize: 3,
                        lgSize: 3
                    } ],
                    CURRENCY_SYM: "$"
                },
                DATETIME_FORMATS: {
                    MONTH: "January February March April May June July August September October November December".split(" "),
                    SHORTMONTH: "Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
                    DAY: "Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
                    SHORTDAY: "Sun Mon Tue Wed Thu Fri Sat".split(" "),
                    AMPMS: [ "AM", "PM" ],
                    medium: "MMM d, y h:mm:ss a",
                    short: "M/d/yy h:mm a",
                    fullDate: "EEEE, MMMM d, y",
                    longDate: "MMMM d, y",
                    mediumDate: "MMM d, y",
                    shortDate: "M/d/yy",
                    mediumTime: "h:mm:ss a",
                    shortTime: "h:mm a"
                },
                pluralCat: function(b) {
                    return 1 === b ? "one" : "other";
                }
            };
        };
    }
    function Zb(b) {
        for (var a = (b = b.split("/")).length; a--; ) b[a] = lb(b[a]);
        return b.join("/");
    }
    function Vc(b, a, c) {
        b = za(b, c), a.$$protocol = b.protocol, a.$$host = b.hostname, a.$$port = ba(b.port) || pf[b.protocol] || null;
    }
    function Wc(b, a, c) {
        var d = "/" !== b.charAt(0);
        d && (b = "/" + b), b = za(b, c), a.$$path = decodeURIComponent(d && "/" === b.pathname.charAt(0) ? b.pathname.substring(1) : b.pathname), 
        a.$$search = qc(b.search), a.$$hash = decodeURIComponent(b.hash), a.$$path && "/" != a.$$path.charAt(0) && (a.$$path = "/" + a.$$path);
    }
    function va(b, a) {
        if (0 === a.indexOf(b)) return a.substr(b.length);
    }
    function Fa(b) {
        var a = b.indexOf("#");
        return -1 == a ? b : b.substr(0, a);
    }
    function $b(b) {
        return b.substr(0, Fa(b).lastIndexOf("/") + 1);
    }
    function ac(b, a) {
        this.$$html5 = !0, a = a || "";
        var c = $b(b);
        Vc(b, this, b), this.$$parse = function(a) {
            var e = va(c, a);
            if (!I(e)) throw cb("ipthprfx", a, c);
            Wc(e, this, b), this.$$path || (this.$$path = "/"), this.$$compose();
        }, this.$$compose = function() {
            var a = Ib(this.$$search), b = this.$$hash ? "#" + lb(this.$$hash) : "";
            this.$$url = Zb(this.$$path) + (a ? "?" + a : "") + b, this.$$absUrl = c + this.$$url.substr(1);
        }, this.$$parseLinkUrl = function(d, e) {
            if (e && "#" === e[0]) return this.hash(e.slice(1)), !0;
            var f, g;
            return (f = va(b, d)) !== u ? (g = f, g = (f = va(a, f)) !== u ? c + (va("/", f) || f) : b + g) : (f = va(c, d)) !== u ? g = c + f : c == d + "/" && (g = c), 
            g && this.$$parse(g), !!g;
        };
    }
    function bc(b, a) {
        var c = $b(b);
        Vc(b, this, b), this.$$parse = function(d) {
            var e = va(b, d) || va(c, d);
            if (!I(e = "#" == e.charAt(0) ? va(a, e) : this.$$html5 ? e : "")) throw cb("ihshprfx", d, a);
            Wc(e, this, b), d = this.$$path;
            var f = /^\/[A-Z]:(\/.*)/;
            0 === e.indexOf(b) && (e = e.replace(b, "")), f.exec(e) || (d = (e = f.exec(d)) ? e[1] : d), 
            this.$$path = d, this.$$compose();
        }, this.$$compose = function() {
            var c = Ib(this.$$search), e = this.$$hash ? "#" + lb(this.$$hash) : "";
            this.$$url = Zb(this.$$path) + (c ? "?" + c : "") + e, this.$$absUrl = b + (this.$$url ? a + this.$$url : "");
        }, this.$$parseLinkUrl = function(a, c) {
            return Fa(b) == Fa(a) && (this.$$parse(a), !0);
        };
    }
    function Xc(b, a) {
        this.$$html5 = !0, bc.apply(this, arguments);
        var c = $b(b);
        this.$$parseLinkUrl = function(d, e) {
            if (e && "#" === e[0]) return this.hash(e.slice(1)), !0;
            var f, g;
            return b == Fa(d) ? f = d : (g = va(c, d)) ? f = b + a + g : c === d + "/" && (f = c), 
            f && this.$$parse(f), !!f;
        }, this.$$compose = function() {
            var c = Ib(this.$$search), e = this.$$hash ? "#" + lb(this.$$hash) : "";
            this.$$url = Zb(this.$$path) + (c ? "?" + c : "") + e, this.$$absUrl = b + a + this.$$url;
        };
    }
    function zb(b) {
        return function() {
            return this[b];
        };
    }
    function Yc(b, a) {
        return function(c) {
            return w(c) ? this[b] : (this[b] = a(c), this.$$compose(), this);
        };
    }
    function He() {
        var b = "", a = {
            enabled: !1,
            requireBase: !0,
            rewriteLinks: !0
        };
        this.hashPrefix = function(a) {
            return z(a) ? (b = a, this) : b;
        }, this.html5Mode = function(b) {
            return Va(b) ? (a.enabled = b, this) : G(b) ? (Va(b.enabled) && (a.enabled = b.enabled), 
            Va(b.requireBase) && (a.requireBase = b.requireBase), Va(b.rewriteLinks) && (a.rewriteLinks = b.rewriteLinks), 
            this) : a;
        }, this.$get = [ "$rootScope", "$browser", "$sniffer", "$rootElement", function(c, d, e, f) {
            function g(a, b, c) {
                var e = h.url(), f = h.$$state;
                try {
                    d.url(a, b, c), h.$$state = d.state();
                } catch (g) {
                    throw h.url(e), h.$$state = f, g;
                }
            }
            function k(a, b) {
                c.$broadcast("$locationChangeSuccess", h.absUrl(), a, h.$$state, b);
            }
            var h, l;
            l = d.baseHref();
            var q, m = d.url();
            if (a.enabled) {
                if (!l && a.requireBase) throw cb("nobase");
                q = m.substring(0, m.indexOf("/", m.indexOf("//") + 2)) + (l || "/"), l = e.history ? ac : Xc;
            } else q = Fa(m), l = bc;
            (h = new l(q, "#" + b)).$$parseLinkUrl(m, m), h.$$state = d.state();
            var p = /^\s*(javascript|mailto):/i;
            f.on("click", function(b) {
                if (a.rewriteLinks && !b.ctrlKey && !b.metaKey && 2 != b.which) {
                    for (var e = D(b.target); "a" !== pa(e[0]); ) if (e[0] === f[0] || !(e = e.parent())[0]) return;
                    var g = e.prop("href"), k = e.attr("href") || e.attr("xlink:href");
                    G(g) && "[object SVGAnimatedString]" === g.toString() && (g = za(g.animVal).href), 
                    p.test(g) || !g || e.attr("target") || b.isDefaultPrevented() || !h.$$parseLinkUrl(g, k) || (b.preventDefault(), 
                    h.absUrl() != d.url() && (c.$apply(), S.angular["ff-684208-preventDefault"] = !0));
                }
            }), h.absUrl() != m && d.url(h.absUrl(), !0);
            var n = !0;
            return d.onUrlChange(function(a, b) {
                c.$evalAsync(function() {
                    var d = h.absUrl(), e = h.$$state;
                    h.$$parse(a), h.$$state = b, c.$broadcast("$locationChangeStart", a, d, b, e).defaultPrevented ? (h.$$parse(d), 
                    h.$$state = e, g(d, !1, e)) : (n = !1, k(d, e));
                }), c.$$phase || c.$digest();
            }), c.$watch(function() {
                var a = d.url(), b = d.state(), f = h.$$replace, l = a !== h.absUrl() || h.$$html5 && e.history && b !== h.$$state;
                (n || l) && (n = !1, c.$evalAsync(function() {
                    c.$broadcast("$locationChangeStart", h.absUrl(), a, h.$$state, b).defaultPrevented ? (h.$$parse(a), 
                    h.$$state = b) : (l && g(h.absUrl(), f, b === h.$$state ? null : h.$$state), k(a, b));
                })), h.$$replace = !1;
            }), h;
        } ];
    }
    function Ie() {
        var b = !0, a = this;
        this.debugEnabled = function(a) {
            return z(a) ? (b = a, this) : b;
        }, this.$get = [ "$window", function(c) {
            function d(a) {
                return a instanceof Error && (a.stack ? a = a.message && -1 === a.stack.indexOf(a.message) ? "Error: " + a.message + "\n" + a.stack : a.stack : a.sourceURL && (a = a.message + "\n" + a.sourceURL + ":" + a.line)), 
                a;
            }
            function e(a) {
                var b = c.console || {}, e = b[a] || b.log || A;
                a = !1;
                try {
                    a = !!e.apply;
                } catch (h) {}
                return a ? function() {
                    var a = [];
                    return r(arguments, function(b) {
                        a.push(d(b));
                    }), e.apply(b, a);
                } : function(a, b) {
                    e(a, null == b ? "" : b);
                };
            }
            return {
                log: e("log"),
                info: e("info"),
                warn: e("warn"),
                error: e("error"),
                debug: function() {
                    var c = e("debug");
                    return function() {
                        b && c.apply(a, arguments);
                    };
                }()
            };
        } ];
    }
    function na(b, a) {
        if ("__defineGetter__" === b || "__defineSetter__" === b || "__lookupGetter__" === b || "__lookupSetter__" === b || "__proto__" === b) throw oa("isecfld", a);
        return b;
    }
    function Aa(b, a) {
        if (b) {
            if (b.constructor === b) throw oa("isecfn", a);
            if (b.window === b) throw oa("isecwindow", a);
            if (b.children && (b.nodeName || b.prop && b.attr && b.find)) throw oa("isecdom", a);
            if (b === Object) throw oa("isecobj", a);
        }
        return b;
    }
    function cc(b) {
        return b.constant;
    }
    function Oa(b, a, c, d) {
        Aa(b, d), a = a.split(".");
        for (var e, f = 0; 1 < a.length; f++) {
            var g = Aa(b[e = na(a.shift(), d)], d);
            g || (g = {}, b[e] = g), b = g;
        }
        return e = na(a.shift(), d), Aa(b[e], d), b[e] = c;
    }
    function Zc(b, a, c, d, e, f) {
        return na(b, f), na(a, f), na(c, f), na(d, f), na(e, f), function(f, k) {
            var h = k && k.hasOwnProperty(b) ? k : f;
            return null == h ? h : (h = h[b], a ? null == h ? u : (h = h[a], c ? null == h ? u : (h = h[c], 
            d ? null == h ? u : (h = h[d], e ? null == h ? u : h = h[e] : h) : h) : h) : h);
        };
    }
    function $c(b, a, c) {
        var d = ad[b];
        if (d) return d;
        var e = b.split("."), f = e.length;
        if (a.csp) d = 6 > f ? Zc(e[0], e[1], e[2], e[3], e[4], c) : function(a, b) {
            var g, d = 0;
            do {
                g = Zc(e[d++], e[d++], e[d++], e[d++], e[d++], c)(a, b), b = u, a = g;
            } while (d < f);
            return g;
        }; else {
            var g = "";
            r(e, function(a, b) {
                na(a, c), g += "if(s == null) return undefined;\ns=" + (b ? "s" : '((l&&l.hasOwnProperty("' + a + '"))?l:s)') + "." + a + ";\n";
            }), g += "return s;", (a = new Function("s", "l", g)).toString = da(g), d = a;
        }
        return d.sharedGetter = !0, d.assign = function(a, c) {
            return Oa(a, b, c, b);
        }, ad[b] = d;
    }
    function Je() {
        var b = wa(), a = {
            csp: !1
        };
        this.$get = [ "$filter", "$sniffer", function(c, d) {
            function e(a) {
                var b = a;
                return a.sharedGetter && (b = function(b, c) {
                    return a(b, c);
                }, b.literal = a.literal, b.constant = a.constant, b.assign = a.assign), b;
            }
            function f(a, b) {
                for (var c = 0, d = a.length; c < d; c++) {
                    var e = a[c];
                    e.constant || (e.inputs ? f(e.inputs, b) : -1 === b.indexOf(e) && b.push(e));
                }
                return b;
            }
            function g(a, b) {
                return null == a || null == b ? a === b : ("object" != typeof a || "object" != typeof (a = a.valueOf())) && (a === b || a !== a && b !== b);
            }
            function k(a, b, c, d) {
                var h;
                if (1 === (e = d.$$inputs || (d.$$inputs = f(d.inputs, []))).length) {
                    var k = g, e = e[0];
                    return a.$watch(function(a) {
                        var b = e(a);
                        return g(b, k) || (h = d(a), k = b && b.valueOf()), h;
                    }, b, c);
                }
                for (var l = [], m = 0, q = e.length; m < q; m++) l[m] = g;
                return a.$watch(function(a) {
                    for (var b = !1, c = 0, f = e.length; c < f; c++) {
                        var k = e[c](a);
                        (b || (b = !g(k, l[c]))) && (l[c] = k && k.valueOf());
                    }
                    return b && (h = d(a)), h;
                }, b, c);
            }
            function h(a, b, c, d) {
                var e, f;
                return e = a.$watch(function(a) {
                    return d(a);
                }, function(a, c, d) {
                    f = a, F(b) && b.apply(this, arguments), z(a) && d.$$postDigest(function() {
                        z(f) && e();
                    });
                }, c);
            }
            function l(a, b, c, d) {
                function e(a) {
                    var b = !0;
                    return r(a, function(a) {
                        z(a) || (b = !1);
                    }), b;
                }
                var f, g;
                return f = a.$watch(function(a) {
                    return d(a);
                }, function(a, c, d) {
                    g = a, F(b) && b.call(this, a, c, d), e(a) && d.$$postDigest(function() {
                        e(g) && f();
                    });
                }, c);
            }
            function m(a, b, c, d) {
                var e;
                return e = a.$watch(function(a) {
                    return d(a);
                }, function(a, c, d) {
                    F(b) && b.apply(this, arguments), e();
                }, c);
            }
            function q(a, b) {
                if (!b) return a;
                var c = function(c, d) {
                    var e = a(c, d), f = b(e, c, d);
                    return z(e) ? f : e;
                };
                return a.$$watchDelegate && a.$$watchDelegate !== k ? c.$$watchDelegate = a.$$watchDelegate : b.$stateful || (c.$$watchDelegate = k, 
                c.inputs = [ a ]), c;
            }
            return a.csp = d.csp, function(d, f) {
                var g, J, v;
                switch (typeof d) {
                  case "string":
                    return v = d = d.trim(), (g = b[v]) || (":" === d.charAt(0) && ":" === d.charAt(1) && (J = !0, 
                    d = d.substring(2)), g = new dc(a), (g = new db(g, c, a).parse(d)).constant ? g.$$watchDelegate = m : J ? (g = e(g), 
                    g.$$watchDelegate = g.literal ? l : h) : g.inputs && (g.$$watchDelegate = k), b[v] = g), 
                    q(g, f);

                  case "function":
                    return q(d, f);

                  default:
                    return q(A, f);
                }
            };
        } ];
    }
    function Le() {
        this.$get = [ "$rootScope", "$exceptionHandler", function(b, a) {
            return bd(function(a) {
                b.$evalAsync(a);
            }, a);
        } ];
    }
    function Me() {
        this.$get = [ "$browser", "$exceptionHandler", function(b, a) {
            return bd(function(a) {
                b.defer(a);
            }, a);
        } ];
    }
    function bd(b, a) {
        function c(a, b, c) {
            function d(b) {
                return function(c) {
                    e || (e = !0, b.call(a, c));
                };
            }
            var e = !1;
            return [ d(b), d(c) ];
        }
        function d() {
            this.$$state = {
                status: 0
            };
        }
        function e(a, b) {
            return function(c) {
                b.call(a, c);
            };
        }
        function f(c) {
            !c.processScheduled && c.pending && (c.processScheduled = !0, b(function() {
                var b, d, e;
                e = c.pending, c.processScheduled = !1, c.pending = u;
                for (var f = 0, g = e.length; f < g; ++f) {
                    d = e[f][0], b = e[f][c.status];
                    try {
                        F(b) ? d.resolve(b(c.value)) : 1 === c.status ? d.resolve(c.value) : d.reject(c.value);
                    } catch (h) {
                        d.reject(h), a(h);
                    }
                }
            }));
        }
        function g() {
            this.promise = new d(), this.resolve = e(this, this.resolve), this.reject = e(this, this.reject), 
            this.notify = e(this, this.notify);
        }
        var k = y("$q", TypeError);
        d.prototype = {
            then: function(a, b, c) {
                var d = new g();
                return this.$$state.pending = this.$$state.pending || [], this.$$state.pending.push([ d, a, b, c ]), 
                0 < this.$$state.status && f(this.$$state), d.promise;
            },
            catch: function(a) {
                return this.then(null, a);
            },
            finally: function(a, b) {
                return this.then(function(b) {
                    return l(b, !0, a);
                }, function(b) {
                    return l(b, !1, a);
                }, b);
            }
        }, g.prototype = {
            resolve: function(a) {
                this.promise.$$state.status || (a === this.promise ? this.$$reject(k("qcycle", a)) : this.$$resolve(a));
            },
            $$resolve: function(b) {
                var d, e;
                e = c(this, this.$$resolve, this.$$reject);
                try {
                    (G(b) || F(b)) && (d = b && b.then), F(d) ? (this.promise.$$state.status = -1, d.call(b, e[0], e[1], this.notify)) : (this.promise.$$state.value = b, 
                    this.promise.$$state.status = 1, f(this.promise.$$state));
                } catch (g) {
                    e[1](g), a(g);
                }
            },
            reject: function(a) {
                this.promise.$$state.status || this.$$reject(a);
            },
            $$reject: function(a) {
                this.promise.$$state.value = a, this.promise.$$state.status = 2, f(this.promise.$$state);
            },
            notify: function(c) {
                var d = this.promise.$$state.pending;
                0 >= this.promise.$$state.status && d && d.length && b(function() {
                    for (var b, e, f = 0, g = d.length; f < g; f++) {
                        e = d[f][0], b = d[f][3];
                        try {
                            e.notify(F(b) ? b(c) : c);
                        } catch (h) {
                            a(h);
                        }
                    }
                });
            }
        };
        var h = function(a, b) {
            var c = new g();
            return b ? c.resolve(a) : c.reject(a), c.promise;
        }, l = function(a, b, c) {
            var d = null;
            try {
                F(c) && (d = c());
            } catch (e) {
                return h(e, !1);
            }
            return d && F(d.then) ? d.then(function() {
                return h(a, b);
            }, function(a) {
                return h(a, !1);
            }) : h(a, b);
        }, m = function(a, b, c, d) {
            var e = new g();
            return e.resolve(a), e.promise.then(b, c, d);
        }, q = function n(a) {
            if (!F(a)) throw k("norslvr", a);
            if (!(this instanceof n)) return new n(a);
            var b = new g();
            return a(function(a) {
                b.resolve(a);
            }, function(a) {
                b.reject(a);
            }), b.promise;
        };
        return q.defer = function() {
            return new g();
        }, q.reject = function(a) {
            var b = new g();
            return b.reject(a), b.promise;
        }, q.when = m, q.all = function(a) {
            var b = new g(), c = 0, d = B(a) ? [] : {};
            return r(a, function(a, e) {
                c++, m(a).then(function(a) {
                    d.hasOwnProperty(e) || (d[e] = a, --c || b.resolve(d));
                }, function(a) {
                    d.hasOwnProperty(e) || b.reject(a);
                });
            }), 0 === c && b.resolve(d), b.promise;
        }, q;
    }
    function Ve() {
        this.$get = [ "$window", "$timeout", function(b, a) {
            var c = b.requestAnimationFrame || b.webkitRequestAnimationFrame || b.mozRequestAnimationFrame, d = b.cancelAnimationFrame || b.webkitCancelAnimationFrame || b.mozCancelAnimationFrame || b.webkitCancelRequestAnimationFrame, e = !!c, f = e ? function(a) {
                var b = c(a);
                return function() {
                    d(b);
                };
            } : function(b) {
                var c = a(b, 16.66, !1);
                return function() {
                    a.cancel(c);
                };
            };
            return f.supported = e, f;
        } ];
    }
    function Ke() {
        var b = 10, a = y("$rootScope"), c = null, d = null;
        this.digestTtl = function(a) {
            return arguments.length && (b = a), b;
        }, this.$get = [ "$injector", "$exceptionHandler", "$parse", "$browser", function(e, f, g, k) {
            function h() {
                this.$id = ++hb, this.$$phase = this.$parent = this.$$watchers = this.$$nextSibling = this.$$prevSibling = this.$$childHead = this.$$childTail = null, 
                this.$root = this, this.$$destroyed = !1, this.$$listeners = {}, this.$$listenerCount = {}, 
                this.$$isolateBindings = null;
            }
            function l(b) {
                if (s.$$phase) throw a("inprog", s.$$phase);
                s.$$phase = b;
            }
            function m(a, b, c) {
                do {
                    a.$$listenerCount[c] -= b, 0 === a.$$listenerCount[c] && delete a.$$listenerCount[c];
                } while (a = a.$parent);
            }
            function q() {}
            function p() {
                for (;x.length; ) try {
                    x.shift()();
                } catch (a) {
                    f(a);
                }
                d = null;
            }
            function n() {
                null === d && (d = k.defer(function() {
                    s.$apply(p);
                }));
            }
            h.prototype = {
                constructor: h,
                $new: function(a, b) {
                    var d;
                    return b = b || this, a ? (d = new h(), d.$root = this.$root) : (this.$$ChildScope || (this.$$ChildScope = function() {
                        this.$$watchers = this.$$nextSibling = this.$$childHead = this.$$childTail = null, 
                        this.$$listeners = {}, this.$$listenerCount = {}, this.$id = ++hb, this.$$ChildScope = null;
                    }, this.$$ChildScope.prototype = this), d = new this.$$ChildScope()), d.$parent = b, 
                    d.$$prevSibling = b.$$childTail, b.$$childHead ? (b.$$childTail.$$nextSibling = d, 
                    b.$$childTail = d) : b.$$childHead = b.$$childTail = d, (a || b != this) && d.$on("$destroy", function() {
                        d.$$destroyed = !0;
                    }), d;
                },
                $watch: function(a, b, d) {
                    var e = g(a);
                    if (e.$$watchDelegate) return e.$$watchDelegate(this, b, d, e);
                    var f = this.$$watchers, h = {
                        fn: b,
                        last: q,
                        get: e,
                        exp: a,
                        eq: !!d
                    };
                    return c = null, F(b) || (h.fn = A), f || (f = this.$$watchers = []), f.unshift(h), 
                    function() {
                        Wa(f, h), c = null;
                    };
                },
                $watchGroup: function(a, b) {
                    function c() {
                        h = !1, k ? (k = !1, b(e, e, g)) : b(e, d, g);
                    }
                    var d = Array(a.length), e = Array(a.length), f = [], g = this, h = !1, k = !0;
                    if (!a.length) {
                        var l = !0;
                        return g.$evalAsync(function() {
                            l && b(e, e, g);
                        }), function() {
                            l = !1;
                        };
                    }
                    return 1 === a.length ? this.$watch(a[0], function(a, c, f) {
                        e[0] = a, d[0] = c, b(e, a === c ? e : d, f);
                    }) : (r(a, function(a, b) {
                        var k = g.$watch(a, function(a, f) {
                            e[b] = a, d[b] = f, h || (h = !0, g.$evalAsync(c));
                        });
                        f.push(k);
                    }), function() {
                        for (;f.length; ) f.shift()();
                    });
                },
                $watchCollection: function(a, b) {
                    function c(a) {
                        var b, g, h;
                        if (G(e = a)) if (Ra(e)) for (f !== p && (f = p, s = f.length = 0, l++), a = e.length, 
                        s !== a && (l++, f.length = s = a), b = 0; b < a; b++) h = f[b], g = e[b], h !== h && g !== g || h === g || (l++, 
                        f[b] = g); else {
                            f !== n && (f = n = {}, s = 0, l++), a = 0;
                            for (b in e) e.hasOwnProperty(b) && (a++, g = e[b], h = f[b], b in f ? h !== h && g !== g || h === g || (l++, 
                            f[b] = g) : (s++, f[b] = g, l++));
                            if (s > a) for (b in l++, f) e.hasOwnProperty(b) || (s--, delete f[b]);
                        } else f !== e && (f = e, l++);
                        return l;
                    }
                    c.$stateful = !0;
                    var e, f, h, d = this, k = 1 < b.length, l = 0, m = g(a, c), p = [], n = {}, q = !0, s = 0;
                    return this.$watch(m, function() {
                        if (q ? (q = !1, b(e, e, d)) : b(e, h, d), k) if (G(e)) if (Ra(e)) {
                            h = Array(e.length);
                            for (var a = 0; a < e.length; a++) h[a] = e[a];
                        } else for (a in h = {}, e) Hb.call(e, a) && (h[a] = e[a]); else h = e;
                    });
                },
                $digest: function() {
                    var e, g, h, m, n, r, x, K, u, z, Q = b, O = [];
                    l("$digest"), k.$$checkUrlChange(), this === s && null !== d && (k.defer.cancel(d), 
                    p()), c = null;
                    do {
                        for (r = !1, x = this; J.length; ) {
                            try {
                                (z = J.shift()).scope.$eval(z.expression);
                            } catch (y) {
                                f(y);
                            }
                            c = null;
                        }
                        a: do {
                            if (m = x.$$watchers) for (n = m.length; n--; ) try {
                                if (e = m[n]) if ((g = e.get(x)) === (h = e.last) || (e.eq ? la(g, h) : "number" == typeof g && "number" == typeof h && isNaN(g) && isNaN(h))) {
                                    if (e === c) {
                                        r = !1;
                                        break a;
                                    }
                                } else r = !0, c = e, e.last = e.eq ? Ca(g, null) : g, e.fn(g, h === q ? g : h, x), 
                                5 > Q && (K = 4 - Q, O[K] || (O[K] = []), u = F(e.exp) ? "fn: " + (e.exp.name || e.exp.toString()) : e.exp, 
                                u += "; newVal: " + ra(g) + "; oldVal: " + ra(h), O[K].push(u));
                            } catch (D) {
                                f(D);
                            }
                            if (!(m = x.$$childHead || x !== this && x.$$nextSibling)) for (;x !== this && !(m = x.$$nextSibling); ) x = x.$parent;
                        } while (x = m);
                        if ((r || J.length) && !Q--) throw s.$$phase = null, a("infdig", b, ra(O));
                    } while (r || J.length);
                    for (s.$$phase = null; v.length; ) try {
                        v.shift()();
                    } catch (A) {
                        f(A);
                    }
                },
                $destroy: function() {
                    if (!this.$$destroyed) {
                        var a = this.$parent;
                        if (this.$broadcast("$destroy"), this.$$destroyed = !0, this !== s) {
                            for (var b in this.$$listenerCount) m(this, this.$$listenerCount[b], b);
                            a.$$childHead == this && (a.$$childHead = this.$$nextSibling), a.$$childTail == this && (a.$$childTail = this.$$prevSibling), 
                            this.$$prevSibling && (this.$$prevSibling.$$nextSibling = this.$$nextSibling), this.$$nextSibling && (this.$$nextSibling.$$prevSibling = this.$$prevSibling), 
                            this.$destroy = this.$digest = this.$apply = this.$evalAsync = this.$applyAsync = A, 
                            this.$on = this.$watch = this.$watchGroup = function() {
                                return A;
                            }, this.$$listeners = {}, this.$parent = this.$$nextSibling = this.$$prevSibling = this.$$childHead = this.$$childTail = this.$root = this.$$watchers = null;
                        }
                    }
                },
                $eval: function(a, b) {
                    return g(a)(this, b);
                },
                $evalAsync: function(a) {
                    s.$$phase || J.length || k.defer(function() {
                        J.length && s.$digest();
                    }), J.push({
                        scope: this,
                        expression: a
                    });
                },
                $$postDigest: function(a) {
                    v.push(a);
                },
                $apply: function(a) {
                    try {
                        return l("$apply"), this.$eval(a);
                    } catch (b) {
                        f(b);
                    } finally {
                        s.$$phase = null;
                        try {
                            s.$digest();
                        } catch (c) {
                            throw f(c), c;
                        }
                    }
                },
                $applyAsync: function(a) {
                    var c = this;
                    a && x.push(function() {
                        c.$eval(a);
                    }), n();
                },
                $on: function(a, b) {
                    var c = this.$$listeners[a];
                    c || (this.$$listeners[a] = c = []), c.push(b);
                    var d = this;
                    do {
                        d.$$listenerCount[a] || (d.$$listenerCount[a] = 0), d.$$listenerCount[a]++;
                    } while (d = d.$parent);
                    var e = this;
                    return function() {
                        c[c.indexOf(b)] = null, m(e, 1, a);
                    };
                },
                $emit: function(a, b) {
                    var d, l, m, c = [], e = this, g = !1, h = {
                        name: a,
                        targetScope: e,
                        stopPropagation: function() {
                            g = !0;
                        },
                        preventDefault: function() {
                            h.defaultPrevented = !0;
                        },
                        defaultPrevented: !1
                    }, k = jb([ h ], arguments, 1);
                    do {
                        for (d = e.$$listeners[a] || c, h.currentScope = e, l = 0, m = d.length; l < m; l++) if (d[l]) try {
                            d[l].apply(null, k);
                        } catch (p) {
                            f(p);
                        } else d.splice(l, 1), l--, m--;
                        if (g) return h.currentScope = null, h;
                        e = e.$parent;
                    } while (e);
                    return h.currentScope = null, h;
                },
                $broadcast: function(a, b) {
                    var c = this, d = this, e = {
                        name: a,
                        targetScope: this,
                        preventDefault: function() {
                            e.defaultPrevented = !0;
                        },
                        defaultPrevented: !1
                    };
                    if (!this.$$listenerCount[a]) return e;
                    for (var h, k, g = jb([ e ], arguments, 1); c = d; ) {
                        for (e.currentScope = c, h = 0, k = (d = c.$$listeners[a] || []).length; h < k; h++) if (d[h]) try {
                            d[h].apply(null, g);
                        } catch (l) {
                            f(l);
                        } else d.splice(h, 1), h--, k--;
                        if (!(d = c.$$listenerCount[a] && c.$$childHead || c !== this && c.$$nextSibling)) for (;c !== this && !(d = c.$$nextSibling); ) c = c.$parent;
                    }
                    return e.currentScope = null, e;
                }
            };
            var s = new h(), J = s.$$asyncQueue = [], v = s.$$postDigestQueue = [], x = s.$$applyAsyncQueue = [];
            return s;
        } ];
    }
    function Nd() {
        var b = /^\s*(https?|ftp|mailto|tel|file):/, a = /^\s*((https?|ftp|file|blob):|data:image\/)/;
        this.aHrefSanitizationWhitelist = function(a) {
            return z(a) ? (b = a, this) : b;
        }, this.imgSrcSanitizationWhitelist = function(b) {
            return z(b) ? (a = b, this) : a;
        }, this.$get = function() {
            return function(c, d) {
                var f, e = d ? a : b;
                return "" === (f = za(c).href) || f.match(e) ? c : "unsafe:" + f;
            };
        };
    }
    function qf(b) {
        if ("self" === b) return b;
        if (I(b)) {
            if (-1 < b.indexOf("***")) throw Ba("iwcard", b);
            return b = b.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g, "\\$1").replace(/\x08/g, "\\x08").replace("\\*\\*", ".*").replace("\\*", "[^:/.?&;]*"), 
            new RegExp("^" + b + "$");
        }
        if (ib(b)) return new RegExp("^" + b.source + "$");
        throw Ba("imatcher");
    }
    function cd(b) {
        var a = [];
        return z(b) && r(b, function(b) {
            a.push(qf(b));
        }), a;
    }
    function Oe() {
        this.SCE_CONTEXTS = ja;
        var b = [ "self" ], a = [];
        this.resourceUrlWhitelist = function(a) {
            return arguments.length && (b = cd(a)), b;
        }, this.resourceUrlBlacklist = function(b) {
            return arguments.length && (a = cd(b)), a;
        }, this.$get = [ "$injector", function(c) {
            function d(a, b) {
                return "self" === a ? Uc(b) : !!a.exec(b.href);
            }
            function e(a) {
                var b = function(a) {
                    this.$$unwrapTrustedValue = function() {
                        return a;
                    };
                };
                return a && (b.prototype = new a()), b.prototype.valueOf = function() {
                    return this.$$unwrapTrustedValue();
                }, b.prototype.toString = function() {
                    return this.$$unwrapTrustedValue().toString();
                }, b;
            }
            var f = function(a) {
                throw Ba("unsafe");
            };
            c.has("$sanitize") && (f = c.get("$sanitize"));
            var g = e(), k = {};
            return k[ja.HTML] = e(g), k[ja.CSS] = e(g), k[ja.URL] = e(g), k[ja.JS] = e(g), k[ja.RESOURCE_URL] = e(k[ja.URL]), 
            {
                trustAs: function(a, b) {
                    var c = k.hasOwnProperty(a) ? k[a] : null;
                    if (!c) throw Ba("icontext", a, b);
                    if (null === b || b === u || "" === b) return b;
                    if ("string" != typeof b) throw Ba("itype", a);
                    return new c(b);
                },
                getTrusted: function(c, e) {
                    if (null === e || e === u || "" === e) return e;
                    if ((g = k.hasOwnProperty(c) ? k[c] : null) && e instanceof g) return e.$$unwrapTrustedValue();
                    if (c === ja.RESOURCE_URL) {
                        var q, p, g = za(e.toString()), n = !1;
                        for (q = 0, p = b.length; q < p; q++) if (d(b[q], g)) {
                            n = !0;
                            break;
                        }
                        if (n) for (q = 0, p = a.length; q < p; q++) if (d(a[q], g)) {
                            n = !1;
                            break;
                        }
                        if (n) return e;
                        throw Ba("insecurl", e.toString());
                    }
                    if (c === ja.HTML) return f(e);
                    throw Ba("unsafe");
                },
                valueOf: function(a) {
                    return a instanceof g ? a.$$unwrapTrustedValue() : a;
                }
            };
        } ];
    }
    function Ne() {
        var b = !0;
        this.enabled = function(a) {
            return arguments.length && (b = !!a), b;
        }, this.$get = [ "$document", "$parse", "$sceDelegate", function(a, c, d) {
            if (b && 8 > a[0].documentMode) throw Ba("iequirks");
            var e = qa(ja);
            e.isEnabled = function() {
                return b;
            }, e.trustAs = d.trustAs, e.getTrusted = d.getTrusted, e.valueOf = d.valueOf, b || (e.trustAs = e.getTrusted = function(a, b) {
                return b;
            }, e.valueOf = Ta), e.parseAs = function(a, b) {
                var d = c(b);
                return d.literal && d.constant ? d : c(b, function(b) {
                    return e.getTrusted(a, b);
                });
            };
            var f = e.parseAs, g = e.getTrusted, k = e.trustAs;
            return r(ja, function(a, b) {
                var c = N(b);
                e[ab("parse_as_" + c)] = function(b) {
                    return f(a, b);
                }, e[ab("get_trusted_" + c)] = function(b) {
                    return g(a, b);
                }, e[ab("trust_as_" + c)] = function(b) {
                    return k(a, b);
                };
            }), e;
        } ];
    }
    function Pe() {
        this.$get = [ "$window", "$document", function(b, a) {
            var g, c = {}, d = ba((/android (\d+)/.exec(N((b.navigator || {}).userAgent)) || [])[1]), e = /Boxee/i.test((b.navigator || {}).userAgent), f = a[0] || {}, k = /^(Moz|webkit|O|ms)(?=[A-Z])/, h = f.body && f.body.style, l = !1, m = !1;
            if (h) {
                for (var q in h) if (l = k.exec(q)) {
                    g = (g = l[0]).substr(0, 1).toUpperCase() + g.substr(1);
                    break;
                }
                g || (g = "WebkitOpacity" in h && "webkit"), l = !!("transition" in h || g + "Transition" in h), 
                m = !!("animation" in h || g + "Animation" in h), !d || l && m || (l = I(f.body.style.webkitTransition), 
                m = I(f.body.style.webkitAnimation));
            }
            return {
                history: !(!b.history || !b.history.pushState || 4 > d || e),
                hasEvent: function(a) {
                    if ("input" == a && 9 == Pa) return !1;
                    if (w(c[a])) {
                        var b = f.createElement("div");
                        c[a] = "on" + a in b;
                    }
                    return c[a];
                },
                csp: Za(),
                vendorPrefix: g,
                transitions: l,
                animations: m,
                android: d
            };
        } ];
    }
    function Re() {
        this.$get = [ "$templateCache", "$http", "$q", function(b, a, c) {
            function d(e, f) {
                function g() {
                    if (k.totalPendingRequests--, !f) throw ia("tpload", e);
                    return c.reject();
                }
                var k = d;
                return k.totalPendingRequests++, a.get(e, {
                    cache: b
                }).then(function(a) {
                    return (a = a.data) && 0 !== a.length ? (k.totalPendingRequests--, b.put(e, a), 
                    a) : g();
                }, g);
            }
            return d.totalPendingRequests = 0, d;
        } ];
    }
    function Se() {
        this.$get = [ "$rootScope", "$browser", "$location", function(b, a, c) {
            return {
                findBindings: function(a, b, c) {
                    var g = [];
                    return r(a = a.getElementsByClassName("ng-binding"), function(a) {
                        var d = ta.element(a).data("$binding");
                        d && r(d, function(d) {
                            c ? new RegExp("(^|\\s)" + b + "(\\s|\\||$)").test(d) && g.push(a) : -1 != d.indexOf(b) && g.push(a);
                        });
                    }), g;
                },
                findModels: function(a, b, c) {
                    for (var g = [ "ng-", "data-ng-", "ng\\:" ], k = 0; k < g.length; ++k) {
                        var h = a.querySelectorAll("[" + g[k] + "model" + (c ? "=" : "*=") + '"' + b + '"]');
                        if (h.length) return h;
                    }
                },
                getLocation: function() {
                    return c.url();
                },
                setLocation: function(a) {
                    a !== c.url() && (c.url(a), b.$digest());
                },
                whenStable: function(b) {
                    a.notifyWhenNoOutstandingRequests(b);
                }
            };
        } ];
    }
    function Te() {
        this.$get = [ "$rootScope", "$browser", "$q", "$$q", "$exceptionHandler", function(b, a, c, d, e) {
            function f(f, h, l) {
                var m = z(l) && !l, q = (m ? d : c).defer(), p = q.promise;
                return h = a.defer(function() {
                    try {
                        q.resolve(f());
                    } catch (a) {
                        q.reject(a), e(a);
                    } finally {
                        delete g[p.$$timeoutId];
                    }
                    m || b.$apply();
                }, h), p.$$timeoutId = h, g[h] = q, p;
            }
            var g = {};
            return f.cancel = function(b) {
                return !!(b && b.$$timeoutId in g) && (g[b.$$timeoutId].reject("canceled"), delete g[b.$$timeoutId], 
                a.defer.cancel(b.$$timeoutId));
            }, f;
        } ];
    }
    function za(b, a) {
        var c = b;
        return Pa && (Z.setAttribute("href", c), c = Z.href), Z.setAttribute("href", c), 
        {
            href: Z.href,
            protocol: Z.protocol ? Z.protocol.replace(/:$/, "") : "",
            host: Z.host,
            search: Z.search ? Z.search.replace(/^\?/, "") : "",
            hash: Z.hash ? Z.hash.replace(/^#/, "") : "",
            hostname: Z.hostname,
            port: Z.port,
            pathname: "/" === Z.pathname.charAt(0) ? Z.pathname : "/" + Z.pathname
        };
    }
    function Uc(b) {
        return (b = I(b) ? za(b) : b).protocol === dd.protocol && b.host === dd.host;
    }
    function Ue() {
        this.$get = da(S);
    }
    function Bc(b) {
        function a(c, d) {
            if (G(c)) {
                var e = {};
                return r(c, function(b, c) {
                    e[c] = a(c, b);
                }), e;
            }
            return b.factory(c + "Filter", d);
        }
        this.register = a, this.$get = [ "$injector", function(a) {
            return function(b) {
                return a.get(b + "Filter");
            };
        } ], a("currency", ed), a("date", fd), a("filter", rf), a("json", sf), a("limitTo", tf), 
        a("lowercase", uf), a("number", gd), a("orderBy", hd), a("uppercase", vf);
    }
    function rf() {
        return function(b, a, c) {
            if (!B(b)) return b;
            var d = typeof c, e = [];
            e.check = function(a, b) {
                for (var c = 0; c < e.length; c++) if (!e[c](a, b)) return !1;
                return !0;
            }, "function" !== d && (c = "boolean" === d && c ? function(a, b) {
                return ta.equals(a, b);
            } : function(a, b) {
                if (a && b && "object" == typeof a && "object" == typeof b) {
                    for (var d in a) if ("$" !== d.charAt(0) && Hb.call(a, d) && c(a[d], b[d])) return !0;
                    return !1;
                }
                return b = ("" + b).toLowerCase(), -1 < ("" + a).toLowerCase().indexOf(b);
            });
            var f = function(a, b) {
                if ("string" == typeof b && "!" === b.charAt(0)) return !f(a, b.substr(1));
                switch (typeof a) {
                  case "boolean":
                  case "number":
                  case "string":
                    return c(a, b);

                  case "object":
                    switch (typeof b) {
                      case "object":
                        return c(a, b);

                      default:
                        for (var d in a) if ("$" !== d.charAt(0) && f(a[d], b)) return !0;
                    }
                    return !1;

                  case "array":
                    for (d = 0; d < a.length; d++) if (f(a[d], b)) return !0;
                    return !1;

                  default:
                    return !1;
                }
            };
            switch (typeof a) {
              case "boolean":
              case "number":
              case "string":
                a = {
                    $: a
                };

              case "object":
                for (var g in a) !function(b) {
                    void 0 !== a[b] && e.push(function(c) {
                        return f("$" == b ? c : c && c[b], a[b]);
                    });
                }(g);
                break;

              case "function":
                e.push(a);
                break;

              default:
                return b;
            }
            for (d = [], g = 0; g < b.length; g++) {
                var k = b[g];
                e.check(k, g) && d.push(k);
            }
            return d;
        };
    }
    function ed(b) {
        var a = b.NUMBER_FORMATS;
        return function(b, d, e) {
            return w(d) && (d = a.CURRENCY_SYM), w(e) && (e = 2), null == b ? b : id(b, a.PATTERNS[1], a.GROUP_SEP, a.DECIMAL_SEP, e).replace(/\u00A4/g, d);
        };
    }
    function gd(b) {
        var a = b.NUMBER_FORMATS;
        return function(b, d) {
            return null == b ? b : id(b, a.PATTERNS[0], a.GROUP_SEP, a.DECIMAL_SEP, d);
        };
    }
    function id(b, a, c, d, e) {
        if (!isFinite(b) || G(b)) return "";
        var f = 0 > b, g = (b = Math.abs(b)) + "", k = "", h = [], l = !1;
        if (-1 !== g.indexOf("e") && ((m = g.match(/([\d\.]+)e(-?)(\d+)/)) && "-" == m[2] && m[3] > e + 1 ? (g = "0", 
        b = 0) : (k = g, l = !0)), l) 0 < e && -1 < b && 1 > b && (k = b.toFixed(e)); else {
            g = (g.split(jd)[1] || "").length, w(e) && (e = Math.min(Math.max(a.minFrac, g), a.maxFrac)), 
            0 === (b = +(Math.round(+(b.toString() + "e" + e)).toString() + "e" + -e)) && (f = !1), 
            g = (b = ("" + b).split(jd))[0], b = b[1] || "";
            var m = 0, q = a.lgSize, p = a.gSize;
            if (g.length >= q + p) for (m = g.length - q, l = 0; l < m; l++) 0 == (m - l) % p && 0 !== l && (k += c), 
            k += g.charAt(l);
            for (l = m; l < g.length; l++) 0 == (g.length - l) % q && 0 !== l && (k += c), k += g.charAt(l);
            for (;b.length < e; ) b += "0";
            e && "0" !== e && (k += d + b.substr(0, e));
        }
        return h.push(f ? a.negPre : a.posPre), h.push(k), h.push(f ? a.negSuf : a.posSuf), 
        h.join("");
    }
    function Ab(b, a, c) {
        var d = "";
        for (0 > b && (d = "-", b = -b), b = "" + b; b.length < a; ) b = "0" + b;
        return c && (b = b.substr(b.length - a)), d + b;
    }
    function $(b, a, c, d) {
        return c = c || 0, function(e) {
            return e = e["get" + b](), (0 < c || e > -c) && (e += c), 0 === e && -12 == c && (e = 12), 
            Ab(e, a, d);
        };
    }
    function Bb(b, a) {
        return function(c, d) {
            var e = c["get" + b]();
            return d[pb(a ? "SHORT" + b : b)][e];
        };
    }
    function kd(b) {
        var a = new Date(b, 0, 1).getDay();
        return new Date(b, 0, (4 >= a ? 5 : 12) - a);
    }
    function ld(b) {
        return function(a) {
            var c = kd(a.getFullYear());
            return a = +new Date(a.getFullYear(), a.getMonth(), a.getDate() + (4 - a.getDay())) - +c, 
            a = 1 + Math.round(a / 6048e5), Ab(a, b);
        };
    }
    function fd(b) {
        function a(a) {
            var b;
            if (b = a.match(c)) {
                a = new Date(0);
                var f = 0, g = 0, k = b[8] ? a.setUTCFullYear : a.setFullYear, h = b[8] ? a.setUTCHours : a.setHours;
                b[9] && (f = ba(b[9] + b[10]), g = ba(b[9] + b[11])), k.call(a, ba(b[1]), ba(b[2]) - 1, ba(b[3])), 
                f = ba(b[4] || 0) - f, g = ba(b[5] || 0) - g, k = ba(b[6] || 0), b = Math.round(1e3 * parseFloat("0." + (b[7] || 0))), 
                h.call(a, f, g, k, b);
            }
            return a;
        }
        var c = /^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;
        return function(c, e, f) {
            var h, l, g = "", k = [];
            if (e = e || "mediumDate", e = b.DATETIME_FORMATS[e] || e, I(c) && (c = wf.test(c) ? ba(c) : a(c)), 
            W(c) && (c = new Date(c)), !ea(c)) return c;
            for (;e; ) (l = xf.exec(e)) ? (k = jb(k, l, 1), e = k.pop()) : (k.push(e), e = null);
            return f && "UTC" === f && (c = new Date(c.getTime())).setMinutes(c.getMinutes() + c.getTimezoneOffset()), 
            r(k, function(a) {
                h = yf[a], g += h ? h(c, b.DATETIME_FORMATS) : a.replace(/(^'|'$)/g, "").replace(/''/g, "'");
            }), g;
        };
    }
    function sf() {
        return function(b) {
            return ra(b, !0);
        };
    }
    function tf() {
        return function(b, a) {
            if (W(b) && (b = b.toString()), !B(b) && !I(b)) return b;
            if (a = 1 / 0 === Math.abs(Number(a)) ? Number(a) : ba(a), I(b)) return a ? 0 <= a ? b.slice(0, a) : b.slice(a, b.length) : "";
            var d, e, c = [];
            for (a > b.length ? a = b.length : a < -b.length && (a = -b.length), 0 < a ? (d = 0, 
            e = a) : (d = b.length + a, e = b.length); d < e; d++) c.push(b[d]);
            return c;
        };
    }
    function hd(b) {
        return function(a, c, d) {
            function e(a, b) {
                return b ? function(b, c) {
                    return a(c, b);
                } : a;
            }
            function f(a, b) {
                var c = typeof a, d = typeof b;
                return c == d ? (ea(a) && ea(b) && (a = a.valueOf(), b = b.valueOf()), "string" == c && (a = a.toLowerCase(), 
                b = b.toLowerCase()), a === b ? 0 : a < b ? -1 : 1) : c < d ? -1 : 1;
            }
            if (!Ra(a)) return a;
            0 === (c = B(c) ? c : [ c ]).length && (c = [ "+" ]), c = c.map(function(a) {
                var c = !1, d = a || Ta;
                if (I(a)) {
                    if ("+" != a.charAt(0) && "-" != a.charAt(0) || (c = "-" == a.charAt(0), a = a.substring(1)), 
                    "" === a) return e(function(a, b) {
                        return f(a, b);
                    }, c);
                    if ((d = b(a)).constant) {
                        var g = d();
                        return e(function(a, b) {
                            return f(a[g], b[g]);
                        }, c);
                    }
                }
                return e(function(a, b) {
                    return f(d(a), d(b));
                }, c);
            });
            for (var g = [], k = 0; k < a.length; k++) g.push(a[k]);
            return g.sort(e(function(a, b) {
                for (var d = 0; d < c.length; d++) {
                    var e = c[d](a, b);
                    if (0 !== e) return e;
                }
                return 0;
            }, d));
        };
    }
    function Ha(b) {
        return F(b) && (b = {
            link: b
        }), b.restrict = b.restrict || "AC", da(b);
    }
    function md(b, a, c, d, e) {
        var f = this, g = [], k = f.$$parentForm = b.parent().controller("form") || Cb;
        f.$error = {}, f.$$success = {}, f.$pending = u, f.$name = e(a.name || a.ngForm || "")(c), 
        f.$dirty = !1, f.$pristine = !0, f.$valid = !0, f.$invalid = !1, f.$submitted = !1, 
        k.$addControl(f), f.$rollbackViewValue = function() {
            r(g, function(a) {
                a.$rollbackViewValue();
            });
        }, f.$commitViewValue = function() {
            r(g, function(a) {
                a.$commitViewValue();
            });
        }, f.$addControl = function(a) {
            Ka(a.$name, "input"), g.push(a), a.$name && (f[a.$name] = a);
        }, f.$$renameControl = function(a, b) {
            var c = a.$name;
            f[c] === a && delete f[c], f[b] = a, a.$name = b;
        }, f.$removeControl = function(a) {
            a.$name && f[a.$name] === a && delete f[a.$name], r(f.$pending, function(b, c) {
                f.$setValidity(c, null, a);
            }), r(f.$error, function(b, c) {
                f.$setValidity(c, null, a);
            }), Wa(g, a);
        }, nd({
            ctrl: this,
            $element: b,
            set: function(a, b, c) {
                var d = a[b];
                d ? -1 === d.indexOf(c) && d.push(c) : a[b] = [ c ];
            },
            unset: function(a, b, c) {
                var d = a[b];
                d && (Wa(d, c), 0 === d.length && delete a[b]);
            },
            parentForm: k,
            $animate: d
        }), f.$setDirty = function() {
            d.removeClass(b, Qa), d.addClass(b, Db), f.$dirty = !0, f.$pristine = !1, k.$setDirty();
        }, f.$setPristine = function() {
            d.setClass(b, Qa, Db + " ng-submitted"), f.$dirty = !1, f.$pristine = !0, f.$submitted = !1, 
            r(g, function(a) {
                a.$setPristine();
            });
        }, f.$setUntouched = function() {
            r(g, function(a) {
                a.$setUntouched();
            });
        }, f.$setSubmitted = function() {
            d.addClass(b, "ng-submitted"), f.$submitted = !0, k.$setSubmitted();
        };
    }
    function ec(b) {
        b.$formatters.push(function(a) {
            return b.$isEmpty(a) ? a : a.toString();
        });
    }
    function eb(b, a, c, d, e, f) {
        a.prop("validity");
        var g = a[0].placeholder, k = {}, h = N(a[0].type);
        if (!e.android) {
            var l = !1;
            a.on("compositionstart", function(a) {
                l = !0;
            }), a.on("compositionend", function() {
                l = !1, m();
            });
        }
        var m = function(b) {
            if (!l) {
                var e = a.val(), f = b && b.type;
                Pa && "input" === (b || k).type && a[0].placeholder !== g ? g = a[0].placeholder : ("password" === h || c.ngTrim && "false" === c.ngTrim || (e = U(e)), 
                (d.$viewValue !== e || "" === e && d.$$hasNativeValidators) && d.$setViewValue(e, f));
            }
        };
        if (e.hasEvent("input")) a.on("input", m); else {
            var q, p = function(a) {
                q || (q = f.defer(function() {
                    m(a), q = null;
                }));
            };
            a.on("keydown", function(a) {
                var b = a.keyCode;
                91 === b || 15 < b && 19 > b || 37 <= b && 40 >= b || p(a);
            }), e.hasEvent("paste") && a.on("paste cut", p);
        }
        a.on("change", m), d.$render = function() {
            a.val(d.$isEmpty(d.$modelValue) ? "" : d.$viewValue);
        };
    }
    function Eb(b, a) {
        return function(c, d) {
            var e, f;
            if (ea(c)) return c;
            if (I(c)) {
                if ('"' == c.charAt(0) && '"' == c.charAt(c.length - 1) && (c = c.substring(1, c.length - 1)), 
                zf.test(c)) return new Date(c);
                if (b.lastIndex = 0, e = b.exec(c)) return e.shift(), f = d ? {
                    yyyy: d.getFullYear(),
                    MM: d.getMonth() + 1,
                    dd: d.getDate(),
                    HH: d.getHours(),
                    mm: d.getMinutes(),
                    ss: d.getSeconds(),
                    sss: d.getMilliseconds() / 1e3
                } : {
                    yyyy: 1970,
                    MM: 1,
                    dd: 1,
                    HH: 0,
                    mm: 0,
                    ss: 0,
                    sss: 0
                }, r(e, function(b, c) {
                    c < a.length && (f[a[c]] = +b);
                }), new Date(f.yyyy, f.MM - 1, f.dd, f.HH, f.mm, f.ss || 0, 1e3 * f.sss || 0);
            }
            return NaN;
        };
    }
    function fb(b, a, c, d) {
        return function(e, f, g, k, h, l, m) {
            function q(a) {
                return z(a) ? ea(a) ? a : c(a) : u;
            }
            od(e, f, g, k), eb(e, f, g, k, h, l);
            var n, p = k && k.$options && k.$options.timezone;
            if (k.$$parserName = b, k.$parsers.push(function(b) {
                return k.$isEmpty(b) ? null : a.test(b) ? (b = c(b, n), "UTC" === p && b.setMinutes(b.getMinutes() - b.getTimezoneOffset()), 
                b) : u;
            }), k.$formatters.push(function(a) {
                if (!k.$isEmpty(a)) {
                    if (!ea(a)) throw Fb("datefmt", a);
                    if ((n = a) && "UTC" === p) {
                        var b = 6e4 * n.getTimezoneOffset();
                        n = new Date(n.getTime() + b);
                    }
                    return m("date")(a, d, p);
                }
                return n = null, "";
            }), z(g.min) || g.ngMin) {
                var s;
                k.$validators.min = function(a) {
                    return k.$isEmpty(a) || w(s) || c(a) >= s;
                }, g.$observe("min", function(a) {
                    s = q(a), k.$validate();
                });
            }
            if (z(g.max) || g.ngMax) {
                var r;
                k.$validators.max = function(a) {
                    return k.$isEmpty(a) || w(r) || c(a) <= r;
                }, g.$observe("max", function(a) {
                    r = q(a), k.$validate();
                });
            }
            k.$isEmpty = function(a) {
                return !a || a.getTime && a.getTime() !== a.getTime();
            };
        };
    }
    function od(b, a, c, d) {
        (d.$$hasNativeValidators = G(a[0].validity)) && d.$parsers.push(function(b) {
            var c = a.prop("validity") || {};
            return c.badInput && !c.typeMismatch ? u : b;
        });
    }
    function pd(b, a, c, d, e) {
        if (z(d)) {
            if (!(b = b(d)).constant) throw y("ngModel")("constexpr", c, d);
            return b(a);
        }
        return e;
    }
    function nd(b) {
        function a(a, b) {
            b && !f[a] ? (l.addClass(e, a), f[a] = !0) : !b && f[a] && (l.removeClass(e, a), 
            f[a] = !1);
        }
        function c(b, c) {
            b = b ? "-" + Kb(b, "-") : "", a(gb + b, !0 === c), a(qd + b, !1 === c);
        }
        var d = b.ctrl, e = b.$element, f = {}, g = b.set, k = b.unset, h = b.parentForm, l = b.$animate;
        f[qd] = !(f[gb] = e.hasClass(gb)), d.$setValidity = function(b, e, f) {
            e === u ? (d.$pending || (d.$pending = {}), g(d.$pending, b, f)) : (d.$pending && k(d.$pending, b, f), 
            rd(d.$pending) && (d.$pending = u)), Va(e) ? e ? (k(d.$error, b, f), g(d.$$success, b, f)) : (g(d.$error, b, f), 
            k(d.$$success, b, f)) : (k(d.$error, b, f), k(d.$$success, b, f)), d.$pending ? (a(sd, !0), 
            d.$valid = d.$invalid = u, c("", null)) : (a(sd, !1), d.$valid = rd(d.$error), d.$invalid = !d.$valid, 
            c("", d.$valid)), c(b, e = d.$pending && d.$pending[b] ? u : !d.$error[b] && (!!d.$$success[b] || null)), 
            h.$setValidity(b, e, d);
        };
    }
    function rd(b) {
        if (b) for (var a in b) return !1;
        return !0;
    }
    function fc(b, a) {
        return b = "ngClass" + b, [ "$animate", function(c) {
            function d(a, b) {
                var c = [], d = 0;
                a: for (;d < a.length; d++) {
                    for (var e = a[d], m = 0; m < b.length; m++) if (e == b[m]) continue a;
                    c.push(e);
                }
                return c;
            }
            function e(a) {
                if (!B(a)) {
                    if (I(a)) return a.split(" ");
                    if (G(a)) {
                        var b = [];
                        return r(a, function(a, c) {
                            a && (b = b.concat(c.split(" ")));
                        }), b;
                    }
                }
                return a;
            }
            return {
                restrict: "AC",
                link: function(f, g, k) {
                    function h(a, b) {
                        var c = g.data("$classCounts") || {}, d = [];
                        return r(a, function(a) {
                            (0 < b || c[a]) && (c[a] = (c[a] || 0) + b, c[a] === +(0 < b) && d.push(a));
                        }), g.data("$classCounts", c), d.join(" ");
                    }
                    function l(b) {
                        if (!0 === a || f.$index % 2 === a) {
                            l = e(b || []);
                            if (m) {
                                if (!la(b, m)) {
                                    var s = e(m), n = d(l, s), l = d(s, l), n = h(n, 1), l = h(l, -1);
                                    n && n.length && c.addClass(g, n), l && l.length && c.removeClass(g, l);
                                }
                            } else {
                                n = h(l, 1);
                                k.$addClass(n);
                            }
                        }
                        m = qa(b);
                    }
                    var m;
                    f.$watch(k[b], l, !0), k.$observe("class", function(a) {
                        l(f.$eval(k[b]));
                    }), "ngClass" !== b && f.$watch("$index", function(c, d) {
                        var g = 1 & c;
                        if (g !== (1 & d)) {
                            var l = e(f.$eval(k[b]));
                            g === a ? (g = h(l, 1), k.$addClass(g)) : (g = h(l, -1), k.$removeClass(g));
                        }
                    });
                }
            };
        } ];
    }
    var Pa, D, ma, $a, Af = /^\/(.+)\/([a-z]*)$/, N = function(b) {
        return I(b) ? b.toLowerCase() : b;
    }, Hb = Object.prototype.hasOwnProperty, pb = function(b) {
        return I(b) ? b.toUpperCase() : b;
    }, Ya = [].slice, mf = [].splice, Bf = [].push, Ia = Object.prototype.toString, Xa = y("ng"), ta = S.angular || (S.angular = {}), hb = 0;
    Pa = X.documentMode, A.$inject = [], Ta.$inject = [];
    var Lb, B = Array.isArray, U = function(b) {
        return I(b) ? b.trim() : b;
    }, Za = function() {
        if (z(Za.isActive_)) return Za.isActive_;
        var b = !(!X.querySelector("[ng-csp]") && !X.querySelector("[data-ng-csp]"));
        if (!b) try {
            new Function("");
        } catch (a) {
            b = !0;
        }
        return Za.isActive_ = b;
    }, mb = [ "ng-", "data-ng-", "ng:", "x-ng-" ], Hd = /[A-Z]/g, sc = !1, ka = 1, kb = 3, Ld = {
        full: "1.3.0",
        major: 1,
        minor: 3,
        dot: 0,
        codeName: "superluminal-nudge"
    };
    R.expando = "ng339";
    var ub = R.cache = {}, bf = 1;
    R._data = function(b) {
        return this.cache[b[this.expando]] || {};
    };
    var Xe = /([\:\-\_]+(.))/g, Ye = /^moz([A-Z])/, Cf = {
        mouseleave: "mouseout",
        mouseenter: "mouseover"
    }, Ob = y("jqLite"), af = /^<(\w+)\s*\/?>(?:<\/\1>|)$/, Nb = /<|&#?\w+;/, Ze = /<([\w:]+)/, $e = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi, ha = {
        option: [ 1, '<select multiple="multiple">', "</select>" ],
        thead: [ 1, "<table>", "</table>" ],
        col: [ 2, "<table><colgroup>", "</colgroup></table>" ],
        tr: [ 2, "<table><tbody>", "</tbody></table>" ],
        td: [ 3, "<table><tbody><tr>", "</tr></tbody></table>" ],
        _default: [ 0, "", "" ]
    };
    ha.optgroup = ha.option, ha.tbody = ha.tfoot = ha.colgroup = ha.caption = ha.thead, 
    ha.th = ha.td;
    var Ja = R.prototype = {
        ready: function(b) {
            function a() {
                c || (c = !0, b());
            }
            var c = !1;
            "complete" === X.readyState ? setTimeout(a) : (this.on("DOMContentLoaded", a), R(S).on("load", a), 
            this.on("DOMContentLoaded", a));
        },
        toString: function() {
            var b = [];
            return r(this, function(a) {
                b.push("" + a);
            }), "[" + b.join(", ") + "]";
        },
        eq: function(b) {
            return D(0 <= b ? this[b] : this[this.length + b]);
        },
        length: 0,
        push: Bf,
        sort: [].sort,
        splice: [].splice
    }, wb = {};
    r("multiple selected checked disabled readOnly required open".split(" "), function(b) {
        wb[N(b)] = b;
    });
    var Kc = {};
    r("input select option textarea button form details".split(" "), function(b) {
        Kc[b] = !0;
    });
    var Lc = {
        ngMinlength: "minlength",
        ngMaxlength: "maxlength",
        ngMin: "min",
        ngMax: "max",
        ngPattern: "pattern"
    };
    r({
        data: Qb,
        removeData: sb
    }, function(b, a) {
        R[a] = b;
    }), r({
        data: Qb,
        inheritedData: vb,
        scope: function(b) {
            return D.data(b, "$scope") || vb(b.parentNode || b, [ "$isolateScope", "$scope" ]);
        },
        isolateScope: function(b) {
            return D.data(b, "$isolateScope") || D.data(b, "$isolateScopeNoTemplate");
        },
        controller: Gc,
        injector: function(b) {
            return vb(b, "$injector");
        },
        removeAttr: function(b, a) {
            b.removeAttribute(a);
        },
        hasClass: Rb,
        css: function(b, a, c) {
            if (a = ab(a), !z(c)) return b.style[a];
            b.style[a] = c;
        },
        attr: function(b, a, c) {
            var d = N(a);
            if (wb[d]) {
                if (!z(c)) return b[a] || (b.attributes.getNamedItem(a) || A).specified ? d : u;
                c ? (b[a] = !0, b.setAttribute(a, d)) : (b[a] = !1, b.removeAttribute(d));
            } else if (z(c)) b.setAttribute(a, c); else if (b.getAttribute) return null === (b = b.getAttribute(a, 2)) ? u : b;
        },
        prop: function(b, a, c) {
            if (!z(c)) return b[a];
            b[a] = c;
        },
        text: function() {
            function b(a, b) {
                if (w(b)) {
                    var d = a.nodeType;
                    return d === ka || d === kb ? a.textContent : "";
                }
                a.textContent = b;
            }
            return b.$dv = "", b;
        }(),
        val: function(b, a) {
            if (w(a)) {
                if (b.multiple && "select" === pa(b)) {
                    var c = [];
                    return r(b.options, function(a) {
                        a.selected && c.push(a.value || a.text);
                    }), 0 === c.length ? null : c;
                }
                return b.value;
            }
            b.value = a;
        },
        html: function(b, a) {
            if (w(a)) return b.innerHTML;
            rb(b, !0), b.innerHTML = a;
        },
        empty: Hc
    }, function(b, a) {
        R.prototype[a] = function(a, d) {
            var e, f, g = this.length;
            if (b !== Hc && (2 == b.length && b !== Rb && b !== Gc ? a : d) === u) {
                if (G(a)) {
                    for (e = 0; e < g; e++) if (b === Qb) b(this[e], a); else for (f in a) b(this[e], f, a[f]);
                    return this;
                }
                for (g = (e = b.$dv) === u ? Math.min(g, 1) : g, f = 0; f < g; f++) {
                    var k = b(this[f], a, d);
                    e = e ? e + k : k;
                }
                return e;
            }
            for (e = 0; e < g; e++) b(this[e], a, d);
            return this;
        };
    }), r({
        removeData: sb,
        on: function a(c, d, e, f) {
            if (z(f)) throw Ob("onargs");
            if (Cc(c)) {
                var g = tb(c, !0);
                f = g.events;
                var k = g.handle;
                k || (k = g.handle = ef(c, f));
                for (var h = (g = 0 <= d.indexOf(" ") ? d.split(" ") : [ d ]).length; h--; ) {
                    var l = f[d = g[h]];
                    l || (f[d] = [], "mouseenter" === d || "mouseleave" === d ? a(c, Cf[d], function(a) {
                        var c = a.relatedTarget;
                        c && (c === this || this.contains(c)) || k(a, d);
                    }) : "$destroy" !== d && c.addEventListener(d, k, !1), l = f[d]), l.push(e);
                }
            }
        },
        off: Fc,
        one: function(a, c, d) {
            (a = D(a)).on(c, function f() {
                a.off(c, d), a.off(c, f);
            }), a.on(c, d);
        },
        replaceWith: function(a, c) {
            var d, e = a.parentNode;
            rb(a), r(new R(c), function(c) {
                d ? e.insertBefore(c, d.nextSibling) : e.replaceChild(c, a), d = c;
            });
        },
        children: function(a) {
            var c = [];
            return r(a.childNodes, function(a) {
                a.nodeType === ka && c.push(a);
            }), c;
        },
        contents: function(a) {
            return a.contentDocument || a.childNodes || [];
        },
        append: function(a, c) {
            if ((d = a.nodeType) === ka || 11 === d) for (var d = 0, e = (c = new R(c)).length; d < e; d++) a.appendChild(c[d]);
        },
        prepend: function(a, c) {
            if (a.nodeType === ka) {
                var d = a.firstChild;
                r(new R(c), function(c) {
                    a.insertBefore(c, d);
                });
            }
        },
        wrap: function(a, c) {
            c = D(c).eq(0).clone()[0];
            var d = a.parentNode;
            d && d.replaceChild(c, a), c.appendChild(a);
        },
        remove: Ic,
        detach: function(a) {
            Ic(a, !0);
        },
        after: function(a, c) {
            for (var d = a, e = a.parentNode, f = 0, g = (c = new R(c)).length; f < g; f++) {
                var k = c[f];
                e.insertBefore(k, d.nextSibling), d = k;
            }
        },
        addClass: Tb,
        removeClass: Sb,
        toggleClass: function(a, c, d) {
            c && r(c.split(" "), function(c) {
                var f = d;
                w(f) && (f = !Rb(a, c)), (f ? Tb : Sb)(a, c);
            });
        },
        parent: function(a) {
            return (a = a.parentNode) && 11 !== a.nodeType ? a : null;
        },
        next: function(a) {
            return a.nextElementSibling;
        },
        find: function(a, c) {
            return a.getElementsByTagName ? a.getElementsByTagName(c) : [];
        },
        clone: Pb,
        triggerHandler: function(a, c, d) {
            var e, f, g = c.type || c, k = tb(a);
            (k = (k = k && k.events) && k[g]) && (e = {
                preventDefault: function() {
                    this.defaultPrevented = !0;
                },
                isDefaultPrevented: function() {
                    return !0 === this.defaultPrevented;
                },
                stopImmediatePropagation: function() {
                    this.immediatePropagationStopped = !0;
                },
                isImmediatePropagationStopped: function() {
                    return !0 === this.immediatePropagationStopped;
                },
                stopPropagation: A,
                type: g,
                target: a
            }, c.type && (e = E(e, c)), c = qa(k), f = d ? [ e ].concat(d) : [ e ], r(c, function(c) {
                e.isImmediatePropagationStopped() || c.apply(a, f);
            }));
        }
    }, function(a, c) {
        R.prototype[c] = function(c, e, f) {
            for (var g, k = 0, h = this.length; k < h; k++) w(g) ? (g = a(this[k], c, e, f), 
            z(g) && (g = D(g))) : Ec(g, a(this[k], c, e, f));
            return z(g) ? g : this;
        }, R.prototype.bind = R.prototype.on, R.prototype.unbind = R.prototype.off;
    }), bb.prototype = {
        put: function(a, c) {
            this[La(a, this.nextUid)] = c;
        },
        get: function(a) {
            return this[La(a, this.nextUid)];
        },
        remove: function(a) {
            var c = this[a = La(a, this.nextUid)];
            return delete this[a], c;
        }
    };
    var Nc = /^function\s*[^\(]*\(\s*([^\)]*)\)/m, gf = /,/, hf = /^\s*(_?)(\S+?)\1\s*$/, Mc = /((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm, Ea = y("$injector");
    Jb.$$annotate = Ub;
    var Df = y("$animate"), xe = [ "$provide", function(a) {
        this.$$selectors = {}, this.register = function(c, d) {
            var e = c + "-animation";
            if (c && "." != c.charAt(0)) throw Df("notcsel", c);
            this.$$selectors[c.substr(1)] = e, a.factory(e, d);
        }, this.classNameFilter = function(a) {
            return 1 === arguments.length && (this.$$classNameFilter = a instanceof RegExp ? a : null), 
            this.$$classNameFilter;
        }, this.$get = [ "$$q", "$$asyncCallback", "$rootScope", function(a, d, e) {
            function f(d) {
                var f, g = a.defer();
                return g.promise.$$cancelFn = function() {
                    f && f();
                }, e.$$postDigest(function() {
                    f = d(function() {
                        g.resolve();
                    });
                }), g.promise;
            }
            function g(a, c) {
                var d = [], e = [], f = wa();
                return r((a.attr("class") || "").split(/\s+/), function(a) {
                    f[a] = !0;
                }), r(c, function(a, c) {
                    var g = f[c];
                    !1 === a && g ? e.push(c) : !0 !== a || g || d.push(c);
                }), 0 < d.length + e.length && [ d.length ? d : null, e.length ? e : null ];
            }
            function k(a, c, d) {
                for (var e = 0, f = c.length; e < f; ++e) a[c[e]] = d;
            }
            function h() {
                return m || (m = a.defer(), d(function() {
                    m.resolve(), m = null;
                })), m.promise;
            }
            function l(a, c) {
                if (ta.isObject(c)) {
                    var d = E(c.from || {}, c.to || {});
                    a.css(d);
                }
            }
            var m;
            return {
                animate: function(a, c, d) {
                    return l(a, {
                        from: c,
                        to: d
                    }), h();
                },
                enter: function(a, c, d, e) {
                    return l(a, e), d ? d.after(a) : c.prepend(a), h();
                },
                leave: function(a, c) {
                    return a.remove(), h();
                },
                move: function(a, c, d, e) {
                    return this.enter(a, c, d, e);
                },
                addClass: function(a, c, d) {
                    return this.setClass(a, c, [], d);
                },
                $$addClassImmediately: function(a, c, d) {
                    return a = D(a), c = I(c) ? c : B(c) ? c.join(" ") : "", r(a, function(a) {
                        Tb(a, c);
                    }), l(a, d), h();
                },
                removeClass: function(a, c, d) {
                    return this.setClass(a, [], c, d);
                },
                $$removeClassImmediately: function(a, c, d) {
                    return a = D(a), c = I(c) ? c : B(c) ? c.join(" ") : "", r(a, function(a) {
                        Sb(a, c);
                    }), l(a, d), h();
                },
                setClass: function(a, c, d, e) {
                    var h = this, l = !1, m = (a = D(a)).data("$$animateClasses");
                    return m ? e && m.options && (m.options = ta.extend(m.options || {}, e)) : (m = {
                        classes: {},
                        options: e
                    }, l = !0), e = m.classes, c = B(c) ? c : c.split(" "), d = B(d) ? d : d.split(" "), 
                    k(e, c, !0), k(e, d, !1), l && (m.promise = f(function(c) {
                        var d = a.data("$$animateClasses");
                        if (a.removeData("$$animateClasses"), d) {
                            var e = g(a, d.classes);
                            e && h.$$setClassImmediately(a, e[0], e[1], d.options);
                        }
                        c();
                    }), a.data("$$animateClasses", m)), m.promise;
                },
                $$setClassImmediately: function(a, c, d, e) {
                    return c && this.$$addClassImmediately(a, c), d && this.$$removeClassImmediately(a, d), 
                    l(a, e), h();
                },
                enabled: A,
                cancel: A
            };
        } ];
    } ], ia = y("$compile");
    uc.$inject = [ "$provide", "$$sanitizeUriProvider" ];
    var lf = /^(x[\:\-_]|data[\:\-_])/i, Yb = y("$interpolate"), Ef = /^([^\?#]*)(\?([^#]*))?(#(.*))?$/, pf = {
        http: 80,
        https: 443,
        ftp: 21
    }, cb = y("$location"), Ff = {
        $$html5: !1,
        $$replace: !1,
        absUrl: zb("$$absUrl"),
        url: function(a) {
            return w(a) ? this.$$url : ((a = Ef.exec(a))[1] && this.path(decodeURIComponent(a[1])), 
            (a[2] || a[1]) && this.search(a[3] || ""), this.hash(a[5] || ""), this);
        },
        protocol: zb("$$protocol"),
        host: zb("$$host"),
        port: zb("$$port"),
        path: Yc("$$path", function(a) {
            return "/" == (a = null !== a ? a.toString() : "").charAt(0) ? a : "/" + a;
        }),
        search: function(a, c) {
            switch (arguments.length) {
              case 0:
                return this.$$search;

              case 1:
                if (I(a) || W(a)) a = a.toString(), this.$$search = qc(a); else {
                    if (!G(a)) throw cb("isrcharg");
                    r(a = Ca(a, {}), function(c, e) {
                        null == c && delete a[e];
                    }), this.$$search = a;
                }
                break;

              default:
                w(c) || null === c ? delete this.$$search[a] : this.$$search[a] = c;
            }
            return this.$$compose(), this;
        },
        hash: Yc("$$hash", function(a) {
            return null !== a ? a.toString() : "";
        }),
        replace: function() {
            return this.$$replace = !0, this;
        }
    };
    r([ Xc, bc, ac ], function(a) {
        a.prototype = Object.create(Ff), a.prototype.state = function(c) {
            if (!arguments.length) return this.$$state;
            if (a !== ac || !this.$$html5) throw cb("nostate");
            return this.$$state = w(c) ? null : c, this;
        };
    });
    var oa = y("$parse"), Gf = Function.prototype.call, Hf = Function.prototype.apply, If = Function.prototype.bind, Gb = wa();
    r({
        null: function() {
            return null;
        },
        true: function() {
            return !0;
        },
        false: function() {
            return !1;
        },
        undefined: function() {}
    }, function(a, c) {
        a.constant = a.literal = a.sharedGetter = !0, Gb[c] = a;
    }), Gb.this = function(a) {
        return a;
    }, Gb.this.sharedGetter = !0;
    var gc = E(wa(), {
        "+": function(a, c, d, e) {
            return d = d(a, c), e = e(a, c), z(d) ? z(e) ? d + e : d : z(e) ? e : u;
        },
        "-": function(a, c, d, e) {
            return d = d(a, c), e = e(a, c), (z(d) ? d : 0) - (z(e) ? e : 0);
        },
        "*": function(a, c, d, e) {
            return d(a, c) * e(a, c);
        },
        "/": function(a, c, d, e) {
            return d(a, c) / e(a, c);
        },
        "%": function(a, c, d, e) {
            return d(a, c) % e(a, c);
        },
        "===": function(a, c, d, e) {
            return d(a, c) === e(a, c);
        },
        "!==": function(a, c, d, e) {
            return d(a, c) !== e(a, c);
        },
        "==": function(a, c, d, e) {
            return d(a, c) == e(a, c);
        },
        "!=": function(a, c, d, e) {
            return d(a, c) != e(a, c);
        },
        "<": function(a, c, d, e) {
            return d(a, c) < e(a, c);
        },
        ">": function(a, c, d, e) {
            return d(a, c) > e(a, c);
        },
        "<=": function(a, c, d, e) {
            return d(a, c) <= e(a, c);
        },
        ">=": function(a, c, d, e) {
            return d(a, c) >= e(a, c);
        },
        "&&": function(a, c, d, e) {
            return d(a, c) && e(a, c);
        },
        "||": function(a, c, d, e) {
            return d(a, c) || e(a, c);
        },
        "!": function(a, c, d) {
            return !d(a, c);
        },
        "=": !0,
        "|": !0
    }), Jf = {
        n: "\n",
        f: "\f",
        r: "\r",
        t: "\t",
        v: "\v",
        "'": "'",
        '"': '"'
    }, dc = function(a) {
        this.options = a;
    };
    dc.prototype = {
        constructor: dc,
        lex: function(a) {
            for (this.text = a, this.index = 0, this.ch = u, this.tokens = []; this.index < this.text.length; ) if (this.ch = this.text.charAt(this.index), 
            this.is("\"'")) this.readString(this.ch); else if (this.isNumber(this.ch) || this.is(".") && this.isNumber(this.peek())) this.readNumber(); else if (this.isIdent(this.ch)) this.readIdent(); else if (this.is("(){}[].,;:?")) this.tokens.push({
                index: this.index,
                text: this.ch
            }), this.index++; else if (this.isWhitespace(this.ch)) this.index++; else {
                var c = (a = this.ch + this.peek()) + this.peek(2), d = gc[this.ch], e = gc[a], f = gc[c];
                f ? (this.tokens.push({
                    index: this.index,
                    text: c,
                    fn: f
                }), this.index += 3) : e ? (this.tokens.push({
                    index: this.index,
                    text: a,
                    fn: e
                }), this.index += 2) : d ? (this.tokens.push({
                    index: this.index,
                    text: this.ch,
                    fn: d
                }), this.index += 1) : this.throwError("Unexpected next character ", this.index, this.index + 1);
            }
            return this.tokens;
        },
        is: function(a) {
            return -1 !== a.indexOf(this.ch);
        },
        peek: function(a) {
            return a = a || 1, this.index + a < this.text.length && this.text.charAt(this.index + a);
        },
        isNumber: function(a) {
            return "0" <= a && "9" >= a;
        },
        isWhitespace: function(a) {
            return " " === a || "\r" === a || "\t" === a || "\n" === a || "\v" === a || "\xa0" === a;
        },
        isIdent: function(a) {
            return "a" <= a && "z" >= a || "A" <= a && "Z" >= a || "_" === a || "$" === a;
        },
        isExpOperator: function(a) {
            return "-" === a || "+" === a || this.isNumber(a);
        },
        throwError: function(a, c, d) {
            throw d = d || this.index, c = z(c) ? "s " + c + "-" + this.index + " [" + this.text.substring(c, d) + "]" : " " + d, 
            oa("lexerr", a, c, this.text);
        },
        readNumber: function() {
            for (var a = "", c = this.index; this.index < this.text.length; ) {
                var d = N(this.text.charAt(this.index));
                if ("." == d || this.isNumber(d)) a += d; else {
                    var e = this.peek();
                    if ("e" == d && this.isExpOperator(e)) a += d; else if (this.isExpOperator(d) && e && this.isNumber(e) && "e" == a.charAt(a.length - 1)) a += d; else {
                        if (!this.isExpOperator(d) || e && this.isNumber(e) || "e" != a.charAt(a.length - 1)) break;
                        this.throwError("Invalid exponent");
                    }
                }
                this.index++;
            }
            a *= 1, this.tokens.push({
                index: c,
                text: a,
                constant: !0,
                fn: function() {
                    return a;
                }
            });
        },
        readIdent: function() {
            for (var e, f, g, k, a = this.text, c = "", d = this.index; this.index < this.text.length && ("." === (k = this.text.charAt(this.index)) || this.isIdent(k) || this.isNumber(k)); ) "." === k && (e = this.index), 
            c += k, this.index++;
            if (e && "." === c[c.length - 1] && (this.index--, c = c.slice(0, -1), -1 === (e = c.lastIndexOf(".")) && (e = u)), 
            e) for (f = this.index; f < this.text.length; ) {
                if ("(" === (k = this.text.charAt(f))) {
                    g = c.substr(e - d + 1), c = c.substr(0, e - d), this.index = f;
                    break;
                }
                if (!this.isWhitespace(k)) break;
                f++;
            }
            this.tokens.push({
                index: d,
                text: c,
                fn: Gb[c] || $c(c, this.options, a)
            }), g && (this.tokens.push({
                index: e,
                text: "."
            }), this.tokens.push({
                index: e + 1,
                text: g
            }));
        },
        readString: function(a) {
            var c = this.index;
            this.index++;
            for (var d = "", e = a, f = !1; this.index < this.text.length; ) {
                var g = this.text.charAt(this.index), e = e + g;
                if (f) "u" === g ? ((f = this.text.substring(this.index + 1, this.index + 5)).match(/[\da-f]{4}/i) || this.throwError("Invalid unicode escape [\\u" + f + "]"), 
                this.index += 4, d += String.fromCharCode(parseInt(f, 16))) : d += Jf[g] || g, f = !1; else if ("\\" === g) f = !0; else {
                    if (g === a) return this.index++, void this.tokens.push({
                        index: c,
                        text: e,
                        string: d,
                        constant: !0,
                        fn: function() {
                            return d;
                        }
                    });
                    d += g;
                }
                this.index++;
            }
            this.throwError("Unterminated quote", c);
        }
    };
    var db = function(a, c, d) {
        this.lexer = a, this.$filter = c, this.options = d;
    };
    db.ZERO = E(function() {
        return 0;
    }, {
        sharedGetter: !0,
        constant: !0
    }), db.prototype = {
        constructor: db,
        parse: function(a) {
            return this.text = a, this.tokens = this.lexer.lex(a), a = this.statements(), 0 !== this.tokens.length && this.throwError("is an unexpected token", this.tokens[0]), 
            a.literal = !!a.literal, a.constant = !!a.constant, a;
        },
        primary: function() {
            var a;
            if (this.expect("(")) a = this.filterChain(), this.consume(")"); else if (this.expect("[")) a = this.arrayDeclaration(); else if (this.expect("{")) a = this.object(); else {
                var c = this.expect();
                (a = c.fn) || this.throwError("not a primary expression", c), c.constant && (a.constant = !0, 
                a.literal = !0);
            }
            for (var d; c = this.expect("(", "[", "."); ) "(" === c.text ? (a = this.functionCall(a, d), 
            d = null) : "[" === c.text ? (d = a, a = this.objectIndex(a)) : "." === c.text ? (d = a, 
            a = this.fieldAccess(a)) : this.throwError("IMPOSSIBLE");
            return a;
        },
        throwError: function(a, c) {
            throw oa("syntax", c.text, a, c.index + 1, this.text, this.text.substring(c.index));
        },
        peekToken: function() {
            if (0 === this.tokens.length) throw oa("ueoe", this.text);
            return this.tokens[0];
        },
        peek: function(a, c, d, e) {
            if (0 < this.tokens.length) {
                var f = this.tokens[0], g = f.text;
                if (g === a || g === c || g === d || g === e || !(a || c || d || e)) return f;
            }
            return !1;
        },
        expect: function(a, c, d, e) {
            return !!(a = this.peek(a, c, d, e)) && (this.tokens.shift(), a);
        },
        consume: function(a) {
            this.expect(a) || this.throwError("is unexpected, expecting [" + a + "]", this.peek());
        },
        unaryFn: function(a, c) {
            return E(function(d, e) {
                return a(d, e, c);
            }, {
                constant: c.constant,
                inputs: [ c ]
            });
        },
        binaryFn: function(a, c, d, e) {
            return E(function(e, g) {
                return c(e, g, a, d);
            }, {
                constant: a.constant && d.constant,
                inputs: !e && [ a, d ]
            });
        },
        statements: function() {
            for (var a = []; ;) if (0 < this.tokens.length && !this.peek("}", ")", ";", "]") && a.push(this.filterChain()), 
            !this.expect(";")) return 1 === a.length ? a[0] : function(c, d) {
                for (var e, f = 0, g = a.length; f < g; f++) e = a[f](c, d);
                return e;
            };
        },
        filterChain: function() {
            for (var a = this.expression(); this.expect("|"); ) a = this.filter(a);
            return a;
        },
        filter: function(a) {
            var e, f, c = this.expect(), d = this.$filter(c.text);
            if (this.peek(":")) for (e = [], f = []; this.expect(":"); ) e.push(this.expression());
            return c = [ a ].concat(e || []), E(function(c, k) {
                var h = a(c, k);
                if (f) {
                    for (f[0] = h, h = e.length; h--; ) f[h + 1] = e[h](c, k);
                    return d.apply(u, f);
                }
                return d(h);
            }, {
                constant: !d.$stateful && c.every(cc),
                inputs: !d.$stateful && c
            });
        },
        expression: function() {
            return this.assignment();
        },
        assignment: function() {
            var c, d, a = this.ternary();
            return (d = this.expect("=")) ? (a.assign || this.throwError("implies assignment but [" + this.text.substring(0, d.index) + "] can not be assigned to", d), 
            c = this.ternary(), E(function(d, f) {
                return a.assign(d, c(d, f), f);
            }, {
                inputs: [ a, c ]
            })) : a;
        },
        ternary: function() {
            var c, d, a = this.logicalOR();
            if (d = this.expect("?")) {
                if (c = this.assignment(), d = this.expect(":")) {
                    var e = this.assignment();
                    return E(function(d, g) {
                        return a(d, g) ? c(d, g) : e(d, g);
                    }, {
                        constant: a.constant && c.constant && e.constant
                    });
                }
                this.throwError("expected :", d);
            }
            return a;
        },
        logicalOR: function() {
            for (var c, a = this.logicalAND(); c = this.expect("||"); ) a = this.binaryFn(a, c.fn, this.logicalAND(), !0);
            return a;
        },
        logicalAND: function() {
            var c, a = this.equality();
            return (c = this.expect("&&")) && (a = this.binaryFn(a, c.fn, this.logicalAND(), !0)), 
            a;
        },
        equality: function() {
            var c, a = this.relational();
            return (c = this.expect("==", "!=", "===", "!==")) && (a = this.binaryFn(a, c.fn, this.equality())), 
            a;
        },
        relational: function() {
            var c, a = this.additive();
            return (c = this.expect("<", ">", "<=", ">=")) && (a = this.binaryFn(a, c.fn, this.relational())), 
            a;
        },
        additive: function() {
            for (var c, a = this.multiplicative(); c = this.expect("+", "-"); ) a = this.binaryFn(a, c.fn, this.multiplicative());
            return a;
        },
        multiplicative: function() {
            for (var c, a = this.unary(); c = this.expect("*", "/", "%"); ) a = this.binaryFn(a, c.fn, this.unary());
            return a;
        },
        unary: function() {
            var a;
            return this.expect("+") ? this.primary() : (a = this.expect("-")) ? this.binaryFn(db.ZERO, a.fn, this.unary()) : (a = this.expect("!")) ? this.unaryFn(a.fn, this.unary()) : this.primary();
        },
        fieldAccess: function(a) {
            var c = this.text, d = this.expect().text, e = $c(d, this.options, c);
            return E(function(c, d, k) {
                return e(k || a(c, d));
            }, {
                assign: function(e, g, k) {
                    return (k = a(e, k)) || a.assign(e, k = {}), Oa(k, d, g, c);
                }
            });
        },
        objectIndex: function(a) {
            var c = this.text, d = this.expression();
            return this.consume("]"), E(function(e, f) {
                var g = a(e, f), k = d(e, f);
                return na(k, c), g ? Aa(g[k], c) : u;
            }, {
                assign: function(e, f, g) {
                    var k = na(d(e, g), c);
                    return (g = Aa(a(e, g), c)) || a.assign(e, g = {}), g[k] = f;
                }
            });
        },
        functionCall: function(a, c) {
            var d = [];
            if (")" !== this.peekToken().text) do {
                d.push(this.expression());
            } while (this.expect(","));
            this.consume(")");
            var e = this.text, f = d.length ? [] : null;
            return function(g, k) {
                var h = c ? c(g, k) : g, l = a(g, k, h) || A;
                if (f) for (var m = d.length; m--; ) f[m] = Aa(d[m](g, k), e);
                if (Aa(h, e), l) {
                    if (l.constructor === l) throw oa("isecfn", e);
                    if (l === Gf || l === Hf || l === If) throw oa("isecff", e);
                }
                return h = l.apply ? l.apply(h, f) : l(f[0], f[1], f[2], f[3], f[4]), Aa(h, e);
            };
        },
        arrayDeclaration: function() {
            var a = [];
            if ("]" !== this.peekToken().text) do {
                if (this.peek("]")) break;
                var c = this.expression();
                a.push(c);
            } while (this.expect(","));
            return this.consume("]"), E(function(c, e) {
                for (var f = [], g = 0, k = a.length; g < k; g++) f.push(a[g](c, e));
                return f;
            }, {
                literal: !0,
                constant: a.every(cc),
                inputs: a
            });
        },
        object: function() {
            var a = [], c = [];
            if ("}" !== this.peekToken().text) do {
                if (this.peek("}")) break;
                var d = this.expect();
                a.push(d.string || d.text), this.consume(":"), d = this.expression(), c.push(d);
            } while (this.expect(","));
            return this.consume("}"), E(function(d, f) {
                for (var g = {}, k = 0, h = c.length; k < h; k++) g[a[k]] = c[k](d, f);
                return g;
            }, {
                literal: !0,
                constant: c.every(cc),
                inputs: c
            });
        }
    };
    var ad = wa(), Ba = y("$sce"), ja = {
        HTML: "html",
        CSS: "css",
        URL: "url",
        RESOURCE_URL: "resourceUrl",
        JS: "js"
    }, ia = y("$compile"), Z = X.createElement("a"), dd = za(S.location.href, !0);
    Bc.$inject = [ "$provide" ], ed.$inject = [ "$locale" ], gd.$inject = [ "$locale" ];
    var jd = ".", yf = {
        yyyy: $("FullYear", 4),
        yy: $("FullYear", 2, 0, !0),
        y: $("FullYear", 1),
        MMMM: Bb("Month"),
        MMM: Bb("Month", !0),
        MM: $("Month", 2, 1),
        M: $("Month", 1, 1),
        dd: $("Date", 2),
        d: $("Date", 1),
        HH: $("Hours", 2),
        H: $("Hours", 1),
        hh: $("Hours", 2, -12),
        h: $("Hours", 1, -12),
        mm: $("Minutes", 2),
        m: $("Minutes", 1),
        ss: $("Seconds", 2),
        s: $("Seconds", 1),
        sss: $("Milliseconds", 3),
        EEEE: Bb("Day"),
        EEE: Bb("Day", !0),
        a: function(a, c) {
            return 12 > a.getHours() ? c.AMPMS[0] : c.AMPMS[1];
        },
        Z: function(a) {
            return a = -1 * a.getTimezoneOffset(), a = (0 <= a ? "+" : "") + (Ab(Math[0 < a ? "floor" : "ceil"](a / 60), 2) + Ab(Math.abs(a % 60), 2));
        },
        ww: ld(2),
        w: ld(1)
    }, xf = /((?:[^yMdHhmsaZEw']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|w+))(.*)/, wf = /^\-?\d+$/;
    fd.$inject = [ "$locale" ];
    var uf = da(N), vf = da(pb);
    hd.$inject = [ "$parse" ];
    var Od = da({
        restrict: "E",
        compile: function(a, c) {
            if (!c.href && !c.xlinkHref && !c.name) return function(a, c) {
                var f = "[object SVGAnimatedString]" === Ia.call(c.prop("href")) ? "xlink:href" : "href";
                c.on("click", function(a) {
                    c.attr(f) || a.preventDefault();
                });
            };
        }
    }), qb = {};
    r(wb, function(a, c) {
        if ("multiple" != a) {
            var d = ua("ng-" + c);
            qb[d] = function() {
                return {
                    restrict: "A",
                    priority: 100,
                    link: function(a, f, g) {
                        a.$watch(g[d], function(a) {
                            g.$set(c, !!a);
                        });
                    }
                };
            };
        }
    }), r(Lc, function(a, c) {
        qb[c] = function() {
            return {
                priority: 100,
                link: function(a, e, f) {
                    "ngPattern" === c && "/" == f.ngPattern.charAt(0) && (e = f.ngPattern.match(Af)) ? f.$set("ngPattern", new RegExp(e[1], e[2])) : a.$watch(f[c], function(a) {
                        f.$set(c, a);
                    });
                }
            };
        };
    }), r([ "src", "srcset", "href" ], function(a) {
        var c = ua("ng-" + a);
        qb[c] = function() {
            return {
                priority: 99,
                link: function(d, e, f) {
                    var g = a, k = a;
                    "href" === a && "[object SVGAnimatedString]" === Ia.call(e.prop("href")) && (k = "xlinkHref", 
                    f.$attr[k] = "xlink:href", g = null), f.$observe(c, function(c) {
                        c ? (f.$set(k, c), Pa && g && e.prop(g, f[k])) : "href" === a && f.$set(k, null);
                    });
                }
            };
        };
    });
    var Cb = {
        $addControl: A,
        $$renameControl: function(a, c) {
            a.$name = c;
        },
        $removeControl: A,
        $setValidity: A,
        $setDirty: A,
        $setPristine: A,
        $setSubmitted: A
    };
    md.$inject = [ "$element", "$attrs", "$scope", "$animate", "$interpolate" ];
    var td = function(a) {
        return [ "$timeout", function(c) {
            return {
                name: "form",
                restrict: a ? "EAC" : "E",
                controller: md,
                compile: function(a) {
                    return a.addClass(Qa).addClass(gb), {
                        pre: function(a, d, g, k) {
                            if (!("action" in g)) {
                                var h = function(c) {
                                    a.$apply(function() {
                                        k.$commitViewValue(), k.$setSubmitted();
                                    }), c.preventDefault ? c.preventDefault() : c.returnValue = !1;
                                };
                                d[0].addEventListener("submit", h, !1), d.on("$destroy", function() {
                                    c(function() {
                                        d[0].removeEventListener("submit", h, !1);
                                    }, 0, !1);
                                });
                            }
                            var l = k.$$parentForm, m = k.$name;
                            m && (Oa(a, m, k, m), g.$observe(g.name ? "name" : "ngForm", function(c) {
                                m !== c && (Oa(a, m, u, m), m = c, Oa(a, m, k, m), l.$$renameControl(k, m));
                            })), d.on("$destroy", function() {
                                l.$removeControl(k), m && Oa(a, m, u, m), E(k, Cb);
                            });
                        }
                    };
                }
            };
        } ];
    }, Pd = td(), be = td(!0), zf = /\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/, Kf = /^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/, Lf = /^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i, Mf = /^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/, ud = /^(\d{4})-(\d{2})-(\d{2})$/, vd = /^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/, hc = /^(\d{4})-W(\d\d)$/, wd = /^(\d{4})-(\d\d)$/, xd = /^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/, Nf = /(\s+|^)default(\s+|$)/, Fb = new y("ngModel"), yd = {
        text: function(a, c, d, e, f, g) {
            eb(a, c, d, e, f, g), ec(e);
        },
        date: fb("date", ud, Eb(ud, [ "yyyy", "MM", "dd" ]), "yyyy-MM-dd"),
        "datetime-local": fb("datetimelocal", vd, Eb(vd, "yyyy MM dd HH mm ss sss".split(" ")), "yyyy-MM-ddTHH:mm:ss.sss"),
        time: fb("time", xd, Eb(xd, [ "HH", "mm", "ss", "sss" ]), "HH:mm:ss.sss"),
        week: fb("week", hc, function(a, c) {
            if (ea(a)) return a;
            if (I(a)) {
                hc.lastIndex = 0;
                var d = hc.exec(a);
                if (d) {
                    var e = +d[1], f = +d[2], g = d = 0, k = 0, h = 0, l = kd(e), f = 7 * (f - 1);
                    return c && (d = c.getHours(), g = c.getMinutes(), k = c.getSeconds(), h = c.getMilliseconds()), 
                    new Date(e, 0, l.getDate() + f, d, g, k, h);
                }
            }
            return NaN;
        }, "yyyy-Www"),
        month: fb("month", wd, Eb(wd, [ "yyyy", "MM" ]), "yyyy-MM"),
        number: function(a, c, d, e, f, g) {
            if (od(0, c, 0, e), eb(a, c, d, e, f, g), e.$$parserName = "number", e.$parsers.push(function(a) {
                return e.$isEmpty(a) ? null : Mf.test(a) ? parseFloat(a) : u;
            }), e.$formatters.push(function(a) {
                if (!e.$isEmpty(a)) {
                    if (!W(a)) throw Fb("numfmt", a);
                    a = a.toString();
                }
                return a;
            }), d.min || d.ngMin) {
                var k;
                e.$validators.min = function(a) {
                    return e.$isEmpty(a) || w(k) || a >= k;
                }, d.$observe("min", function(a) {
                    z(a) && !W(a) && (a = parseFloat(a, 10)), k = W(a) && !isNaN(a) ? a : u, e.$validate();
                });
            }
            if (d.max || d.ngMax) {
                var h;
                e.$validators.max = function(a) {
                    return e.$isEmpty(a) || w(h) || a <= h;
                }, d.$observe("max", function(a) {
                    z(a) && !W(a) && (a = parseFloat(a, 10)), h = W(a) && !isNaN(a) ? a : u, e.$validate();
                });
            }
        },
        url: function(a, c, d, e, f, g) {
            eb(a, c, d, e, f, g), ec(e), e.$$parserName = "url", e.$validators.url = function(a) {
                return e.$isEmpty(a) || Kf.test(a);
            };
        },
        email: function(a, c, d, e, f, g) {
            eb(a, c, d, e, f, g), ec(e), e.$$parserName = "email", e.$validators.email = function(a) {
                return e.$isEmpty(a) || Lf.test(a);
            };
        },
        radio: function(a, c, d, e) {
            w(d.name) && c.attr("name", ++hb), c.on("click", function(a) {
                c[0].checked && e.$setViewValue(d.value, a && a.type);
            }), e.$render = function() {
                c[0].checked = d.value == e.$viewValue;
            }, d.$observe("value", e.$render);
        },
        checkbox: function(a, c, d, e, f, g, k, h) {
            var l = pd(h, a, "ngTrueValue", d.ngTrueValue, !0), m = pd(h, a, "ngFalseValue", d.ngFalseValue, !1);
            c.on("click", function(a) {
                e.$setViewValue(c[0].checked, a && a.type);
            }), e.$render = function() {
                c[0].checked = e.$viewValue;
            }, e.$isEmpty = function(a) {
                return a !== l;
            }, e.$formatters.push(function(a) {
                return la(a, l);
            }), e.$parsers.push(function(a) {
                return a ? l : m;
            });
        },
        hidden: A,
        button: A,
        submit: A,
        reset: A,
        file: A
    }, vc = [ "$browser", "$sniffer", "$filter", "$parse", function(a, c, d, e) {
        return {
            restrict: "E",
            require: [ "?ngModel" ],
            link: {
                pre: function(f, g, k, h) {
                    h[0] && (yd[N(k.type)] || yd.text)(f, g, k, h[0], c, a, d, e);
                }
            }
        };
    } ], gb = "ng-valid", qd = "ng-invalid", Qa = "ng-pristine", Db = "ng-dirty", sd = "ng-pending", Of = [ "$scope", "$exceptionHandler", "$attrs", "$element", "$parse", "$animate", "$timeout", "$rootScope", "$q", "$interpolate", function(a, c, d, e, f, g, k, h, l, m) {
        this.$modelValue = this.$viewValue = Number.NaN, this.$validators = {}, this.$asyncValidators = {}, 
        this.$parsers = [], this.$formatters = [], this.$viewChangeListeners = [], this.$untouched = !0, 
        this.$touched = !1, this.$pristine = !0, this.$dirty = !1, this.$valid = !0, this.$invalid = !1, 
        this.$error = {}, this.$$success = {}, this.$pending = u, this.$name = m(d.name || "", !1)(a);
        var q = f(d.ngModel), p = null, n = this, s = function() {
            var c = q(a);
            return n.$options && n.$options.getterSetter && F(c) && (c = c()), c;
        }, J = function(c) {
            var d;
            n.$options && n.$options.getterSetter && F(d = q(a)) ? d(n.$modelValue) : q.assign(a, n.$modelValue);
        };
        this.$$setOptions = function(a) {
            if (n.$options = a, !(q.assign || a && a.getterSetter)) throw Fb("nonassign", d.ngModel, sa(e));
        }, this.$render = A, this.$isEmpty = function(a) {
            return w(a) || "" === a || null === a || a !== a;
        };
        var v = e.inheritedData("$formController") || Cb, x = 0;
        nd({
            ctrl: this,
            $element: e,
            set: function(a, c) {
                a[c] = !0;
            },
            unset: function(a, c) {
                delete a[c];
            },
            parentForm: v,
            $animate: g
        }), this.$setPristine = function() {
            n.$dirty = !1, n.$pristine = !0, g.removeClass(e, Db), g.addClass(e, Qa);
        }, this.$setUntouched = function() {
            n.$touched = !1, n.$untouched = !0, g.setClass(e, "ng-untouched", "ng-touched");
        }, this.$setTouched = function() {
            n.$touched = !0, n.$untouched = !1, g.setClass(e, "ng-touched", "ng-untouched");
        }, this.$rollbackViewValue = function() {
            k.cancel(p), n.$viewValue = n.$$lastCommittedViewValue, n.$render();
        }, this.$validate = function() {
            W(n.$modelValue) && isNaN(n.$modelValue) || this.$$parseAndValidate();
        }, this.$$runValidators = function(a, c, d, e) {
            function h(a, c) {
                m === x && n.$setValidity(a, c);
            }
            function k(a) {
                m === x && e(a);
            }
            var m = ++x;
            !function(a) {
                var c = n.$$parserName || "parse";
                if (a === u) h(c, null); else if (h(c, a), !a) return r(n.$validators, function(a, c) {
                    h(c, null);
                }), r(n.$asyncValidators, function(a, c) {
                    h(c, null);
                }), !1;
                return !0;
            }(a) ? k(!1) : function() {
                var a = !0;
                return r(n.$validators, function(e, f) {
                    var g = e(c, d);
                    a = a && g, h(f, g);
                }), !!a || (r(n.$asyncValidators, function(a, c) {
                    h(c, null);
                }), !1);
            }() ? function() {
                var a = [], e = !0;
                r(n.$asyncValidators, function(f, g) {
                    var k = f(c, d);
                    if (!k || !F(k.then)) throw Fb("$asyncValidators", k);
                    h(g, u), a.push(k.then(function() {
                        h(g, !0);
                    }, function(a) {
                        e = !1, h(g, !1);
                    }));
                }), a.length ? l.all(a).then(function() {
                    k(e);
                }, A) : k(!0);
            }() : k(!1);
        }, this.$commitViewValue = function() {
            var a = n.$viewValue;
            k.cancel(p), (n.$$lastCommittedViewValue !== a || "" === a && n.$$hasNativeValidators) && (n.$$lastCommittedViewValue = a, 
            n.$pristine && (n.$dirty = !0, n.$pristine = !1, g.removeClass(e, Qa), g.addClass(e, Db), 
            v.$setDirty()), this.$$parseAndValidate());
        }, this.$$parseAndValidate = function() {
            var a = n.$$lastCommittedViewValue, c = a, d = !w(c) || u;
            if (d) for (var e = 0; e < n.$parsers.length; e++) if (c = n.$parsers[e](c), w(c)) {
                d = !1;
                break;
            }
            W(n.$modelValue) && isNaN(n.$modelValue) && (n.$modelValue = s());
            var f = n.$modelValue, g = n.$options && n.$options.allowInvalid;
            g && (n.$modelValue = c, n.$modelValue !== f && n.$$writeModelToScope()), n.$$runValidators(d, c, a, function(a) {
                g || (n.$modelValue = a ? c : u, n.$modelValue !== f && n.$$writeModelToScope());
            });
        }, this.$$writeModelToScope = function() {
            J(n.$modelValue), r(n.$viewChangeListeners, function(a) {
                try {
                    a();
                } catch (d) {
                    c(d);
                }
            });
        }, this.$setViewValue = function(a, c) {
            n.$viewValue = a, n.$options && !n.$options.updateOnDefault || n.$$debounceViewValueCommit(c);
        }, this.$$debounceViewValueCommit = function(c) {
            var d = 0, e = n.$options;
            e && z(e.debounce) && (e = e.debounce, W(e) ? d = e : W(e[c]) ? d = e[c] : W(e.default) && (d = e.default)), 
            k.cancel(p), d ? p = k(function() {
                n.$commitViewValue();
            }, d) : h.$$phase ? n.$commitViewValue() : a.$apply(function() {
                n.$commitViewValue();
            });
        }, a.$watch(function() {
            var a = s();
            if (a !== n.$modelValue) {
                n.$modelValue = a;
                for (var c = n.$formatters, d = c.length, e = a; d--; ) e = c[d](e);
                n.$viewValue !== e && (n.$viewValue = n.$$lastCommittedViewValue = e, n.$render(), 
                n.$$runValidators(u, a, e, A));
            }
            return a;
        });
    } ], qe = function() {
        return {
            restrict: "A",
            require: [ "ngModel", "^?form", "^?ngModelOptions" ],
            controller: Of,
            priority: 1,
            compile: function(a) {
                return a.addClass(Qa).addClass("ng-untouched").addClass(gb), {
                    pre: function(a, d, e, f) {
                        var g = f[0], k = f[1] || Cb;
                        g.$$setOptions(f[2] && f[2].$options), k.$addControl(g), e.$observe("name", function(a) {
                            g.$name !== a && k.$$renameControl(g, a);
                        }), a.$on("$destroy", function() {
                            k.$removeControl(g);
                        });
                    },
                    post: function(a, d, e, f) {
                        var g = f[0];
                        g.$options && g.$options.updateOn && d.on(g.$options.updateOn, function(a) {
                            g.$$debounceViewValueCommit(a && a.type);
                        }), d.on("blur", function(d) {
                            g.$touched || a.$apply(function() {
                                g.$setTouched();
                            });
                        });
                    }
                };
            }
        };
    }, se = da({
        restrict: "A",
        require: "ngModel",
        link: function(a, c, d, e) {
            e.$viewChangeListeners.push(function() {
                a.$eval(d.ngChange);
            });
        }
    }), xc = function() {
        return {
            restrict: "A",
            require: "?ngModel",
            link: function(a, c, d, e) {
                e && (d.required = !0, e.$validators.required = function(a) {
                    return !d.required || !e.$isEmpty(a);
                }, d.$observe("required", function() {
                    e.$validate();
                }));
            }
        };
    }, wc = function() {
        return {
            restrict: "A",
            require: "?ngModel",
            link: function(a, c, d, e) {
                if (e) {
                    var f, g = d.ngPattern || d.pattern;
                    d.$observe("pattern", function(a) {
                        if (I(a) && 0 < a.length && (a = new RegExp(a)), a && !a.test) throw y("ngPattern")("noregexp", g, a, sa(c));
                        f = a || u, e.$validate();
                    }), e.$validators.pattern = function(a) {
                        return e.$isEmpty(a) || w(f) || f.test(a);
                    };
                }
            }
        };
    }, zc = function() {
        return {
            restrict: "A",
            require: "?ngModel",
            link: function(a, c, d, e) {
                if (e) {
                    var f = 0;
                    d.$observe("maxlength", function(a) {
                        f = ba(a) || 0, e.$validate();
                    }), e.$validators.maxlength = function(a, c) {
                        return e.$isEmpty(a) || c.length <= f;
                    };
                }
            }
        };
    }, yc = function() {
        return {
            restrict: "A",
            require: "?ngModel",
            link: function(a, c, d, e) {
                if (e) {
                    var f = 0;
                    d.$observe("minlength", function(a) {
                        f = ba(a) || 0, e.$validate();
                    }), e.$validators.minlength = function(a, c) {
                        return e.$isEmpty(a) || c.length >= f;
                    };
                }
            }
        };
    }, re = function() {
        return {
            restrict: "A",
            priority: 100,
            require: "ngModel",
            link: function(a, c, d, e) {
                var f = c.attr(d.$attr.ngList) || ", ", g = "false" !== d.ngTrim, k = g ? U(f) : f;
                e.$parsers.push(function(a) {
                    if (!w(a)) {
                        var c = [];
                        return a && r(a.split(k), function(a) {
                            a && c.push(g ? U(a) : a);
                        }), c;
                    }
                }), e.$formatters.push(function(a) {
                    return B(a) ? a.join(f) : u;
                }), e.$isEmpty = function(a) {
                    return !a || !a.length;
                };
            }
        };
    }, Pf = /^(true|false|\d+)$/, te = function() {
        return {
            restrict: "A",
            priority: 100,
            compile: function(a, c) {
                return Pf.test(c.ngValue) ? function(a, c, f) {
                    f.$set("value", a.$eval(f.ngValue));
                } : function(a, c, f) {
                    a.$watch(f.ngValue, function(a) {
                        f.$set("value", a);
                    });
                };
            }
        };
    }, ue = function() {
        return {
            restrict: "A",
            controller: [ "$scope", "$attrs", function(a, c) {
                var d = this;
                this.$options = a.$eval(c.ngModelOptions), this.$options.updateOn !== u ? (this.$options.updateOnDefault = !1, 
                this.$options.updateOn = U(this.$options.updateOn.replace(Nf, function() {
                    return d.$options.updateOnDefault = !0, " ";
                }))) : this.$options.updateOnDefault = !0;
            } ]
        };
    }, Ud = [ "$compile", function(a) {
        return {
            restrict: "AC",
            compile: function(c) {
                return a.$$addBindingClass(c), function(c, e, f) {
                    a.$$addBindingInfo(e, f.ngBind), e = e[0], c.$watch(f.ngBind, function(a) {
                        e.textContent = a === u ? "" : a;
                    });
                };
            }
        };
    } ], Wd = [ "$interpolate", "$compile", function(a, c) {
        return {
            compile: function(d) {
                return c.$$addBindingClass(d), function(d, f, g) {
                    d = a(f.attr(g.$attr.ngBindTemplate)), c.$$addBindingInfo(f, d.expressions), f = f[0], 
                    g.$observe("ngBindTemplate", function(a) {
                        f.textContent = a === u ? "" : a;
                    });
                };
            }
        };
    } ], Vd = [ "$sce", "$parse", "$compile", function(a, c, d) {
        return {
            restrict: "A",
            compile: function(e, f) {
                var g = c(f.ngBindHtml), k = c(f.ngBindHtml, function(a) {
                    return (a || "").toString();
                });
                return d.$$addBindingClass(e), function(c, e, f) {
                    d.$$addBindingInfo(e, f.ngBindHtml), c.$watch(k, function() {
                        e.html(a.getTrustedHtml(g(c)) || "");
                    });
                };
            }
        };
    } ], Xd = fc("", !0), Zd = fc("Odd", 0), Yd = fc("Even", 1), $d = Ha({
        compile: function(a, c) {
            c.$set("ngCloak", u), a.removeClass("ng-cloak");
        }
    }), ae = [ function() {
        return {
            restrict: "A",
            scope: !0,
            controller: "@",
            priority: 500
        };
    } ], Ac = {}, Qf = {
        blur: !0,
        focus: !0
    };
    r("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "), function(a) {
        var c = ua("ng-" + a);
        Ac[c] = [ "$parse", "$rootScope", function(d, e) {
            return {
                restrict: "A",
                compile: function(f, g) {
                    var k = d(g[c]);
                    return function(c, d) {
                        d.on(a, function(d) {
                            var f = function() {
                                k(c, {
                                    $event: d
                                });
                            };
                            Qf[a] && e.$$phase ? c.$evalAsync(f) : c.$apply(f);
                        });
                    };
                }
            };
        } ];
    });
    var de = [ "$animate", function(a) {
        return {
            multiElement: !0,
            transclude: "element",
            priority: 600,
            terminal: !0,
            restrict: "A",
            $$tlb: !0,
            link: function(c, d, e, f, g) {
                var k, h, l;
                c.$watch(e.ngIf, function(c) {
                    c ? h || g(function(c, f) {
                        h = f, c[c.length++] = X.createComment(" end ngIf: " + e.ngIf + " "), k = {
                            clone: c
                        }, a.enter(c, d.parent(), d);
                    }) : (l && (l.remove(), l = null), h && (h.$destroy(), h = null), k && (l = ob(k.clone), 
                    a.leave(l).then(function() {
                        l = null;
                    }), k = null));
                });
            }
        };
    } ], ee = [ "$templateRequest", "$anchorScroll", "$animate", "$sce", function(a, c, d, e) {
        return {
            restrict: "ECA",
            priority: 400,
            terminal: !0,
            transclude: "element",
            controller: ta.noop,
            compile: function(f, g) {
                var k = g.ngInclude || g.src, h = g.onload || "", l = g.autoscroll;
                return function(f, g, p, n, r) {
                    var v, x, t, u = 0, y = function() {
                        x && (x.remove(), x = null), v && (v.$destroy(), v = null), t && (d.leave(t).then(function() {
                            x = null;
                        }), x = t, t = null);
                    };
                    f.$watch(e.parseAsResourceUrl(k), function(e) {
                        var k = function() {
                            !z(l) || l && !f.$eval(l) || c();
                        }, p = ++u;
                        e ? (a(e, !0).then(function(a) {
                            if (p === u) {
                                var c = f.$new();
                                n.template = a, a = r(c, function(a) {
                                    y(), d.enter(a, null, g).then(k);
                                }), t = a, (v = c).$emit("$includeContentLoaded", e), f.$eval(h);
                            }
                        }, function() {
                            p === u && (y(), f.$emit("$includeContentError", e));
                        }), f.$emit("$includeContentRequested", e)) : (y(), n.template = null);
                    });
                };
            }
        };
    } ], ve = [ "$compile", function(a) {
        return {
            restrict: "ECA",
            priority: -400,
            require: "ngInclude",
            link: function(c, d, e, f) {
                /SVG/.test(d[0].toString()) ? (d.empty(), a(Dc(f.template, X).childNodes)(c, function(a) {
                    d.append(a);
                }, u, u, d)) : (d.html(f.template), a(d.contents())(c));
            }
        };
    } ], fe = Ha({
        priority: 450,
        compile: function() {
            return {
                pre: function(a, c, d) {
                    a.$eval(d.ngInit);
                }
            };
        }
    }), ge = Ha({
        terminal: !0,
        priority: 1e3
    }), he = [ "$locale", "$interpolate", function(a, c) {
        var d = /{}/g;
        return {
            restrict: "EA",
            link: function(e, f, g) {
                var k = g.count, h = g.$attr.when && f.attr(g.$attr.when), l = g.offset || 0, m = e.$eval(h) || {}, q = {}, p = c.startSymbol(), n = c.endSymbol(), s = /^when(Minus)?(.+)$/;
                r(g, function(a, c) {
                    s.test(c) && (m[N(c.replace("when", "").replace("Minus", "-"))] = f.attr(g.$attr[c]));
                }), r(m, function(a, e) {
                    q[e] = c(a.replace(d, p + k + "-" + l + n));
                }), e.$watch(function() {
                    var c = parseFloat(e.$eval(k));
                    return isNaN(c) ? "" : (c in m || (c = a.pluralCat(c - l)), q[c](e));
                }, function(a) {
                    f.text(a);
                });
            }
        };
    } ], ie = [ "$parse", "$animate", function(a, c) {
        var d = y("ngRepeat"), e = function(a, c, d, e, l, m, q) {
            a[d] = e, l && (a[l] = m), a.$index = c, a.$first = 0 === c, a.$last = c === q - 1, 
            a.$middle = !(a.$first || a.$last), a.$odd = !(a.$even = 0 == (1 & c));
        };
        return {
            restrict: "A",
            multiElement: !0,
            transclude: "element",
            priority: 1e3,
            terminal: !0,
            $$tlb: !0,
            compile: function(f, g) {
                var k = g.ngRepeat, h = X.createComment(" end ngRepeat: " + k + " "), l = k.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);
                if (!l) throw d("iexp", k);
                var m = l[1], q = l[2], p = l[3], n = l[4];
                if (!(l = m.match(/^(?:([\$\w]+)|\(([\$\w]+)\s*,\s*([\$\w]+)\))$/))) throw d("iidexp", m);
                var s = l[3] || l[1], J = l[2];
                if (p && (!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(p) || /^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent)$/.test(p))) throw d("badident", p);
                var v, x, t, y, z = {
                    $id: La
                };
                return n ? v = a(n) : (t = function(a, c) {
                    return La(c);
                }, y = function(a) {
                    return a;
                }), function(a, f, g, l, n) {
                    v && (x = function(c, d, e) {
                        return J && (z[J] = c), z[s] = d, z.$index = e, v(a, z);
                    });
                    var m = wa();
                    a.$watchCollection(q, function(g) {
                        var l, q, H, C, Q, A, E, w, B, F, z = f[0], v = wa();
                        if (p && (a[p] = g), Ra(g)) w = g, q = x || t; else {
                            q = x || y, w = [];
                            for (F in g) g.hasOwnProperty(F) && "$" != F.charAt(0) && w.push(F);
                            w.sort();
                        }
                        for (C = w.length, F = Array(C), l = 0; l < C; l++) if (Q = g === w ? l : w[l], 
                        A = g[Q], E = q(Q, A, l), m[E]) B = m[E], delete m[E], v[E] = B, F[l] = B; else {
                            if (v[E]) throw r(F, function(a) {
                                a && a.scope && (m[a.id] = a);
                            }), d("dupes", k, E, ra(A));
                            F[l] = {
                                id: E,
                                scope: u,
                                clone: u
                            }, v[E] = !0;
                        }
                        for (H in m) {
                            if (B = m[H], E = ob(B.clone), c.leave(E), E[0].parentNode) for (l = 0, q = E.length; l < q; l++) E[l].$$NG_REMOVED = !0;
                            B.scope.$destroy();
                        }
                        for (l = 0; l < C; l++) if (Q = g === w ? l : w[l], A = g[Q], (B = F[l]).scope) {
                            H = z;
                            do {
                                H = H.nextSibling;
                            } while (H && H.$$NG_REMOVED);
                            B.clone[0] != H && c.move(ob(B.clone), null, D(z)), z = B.clone[B.clone.length - 1], 
                            e(B.scope, l, s, A, J, Q, C);
                        } else n(function(a, d) {
                            B.scope = d;
                            var f = h.cloneNode(!1);
                            a[a.length++] = f, c.enter(a, null, D(z)), z = f, B.clone = a, v[B.id] = B, e(B.scope, l, s, A, J, Q, C);
                        });
                        m = v;
                    });
                };
            }
        };
    } ], je = [ "$animate", function(a) {
        return {
            restrict: "A",
            multiElement: !0,
            link: function(c, d, e) {
                c.$watch(e.ngShow, function(c) {
                    a[c ? "removeClass" : "addClass"](d, "ng-hide", {
                        tempClasses: "ng-hide-animate"
                    });
                });
            }
        };
    } ], ce = [ "$animate", function(a) {
        return {
            restrict: "A",
            multiElement: !0,
            link: function(c, d, e) {
                c.$watch(e.ngHide, function(c) {
                    a[c ? "addClass" : "removeClass"](d, "ng-hide", {
                        tempClasses: "ng-hide-animate"
                    });
                });
            }
        };
    } ], ke = Ha(function(a, c, d) {
        a.$watch(d.ngStyle, function(a, d) {
            d && a !== d && r(d, function(a, d) {
                c.css(d, "");
            }), a && c.css(a);
        }, !0);
    }), le = [ "$animate", function(a) {
        return {
            restrict: "EA",
            require: "ngSwitch",
            controller: [ "$scope", function() {
                this.cases = {};
            } ],
            link: function(c, d, e, f) {
                var g = [], k = [], h = [], l = [], m = function(a, c) {
                    return function() {
                        a.splice(c, 1);
                    };
                };
                c.$watch(e.ngSwitch || e.on, function(c) {
                    var d, e;
                    for (d = 0, e = h.length; d < e; ++d) a.cancel(h[d]);
                    for (d = h.length = 0, e = l.length; d < e; ++d) {
                        var s = ob(k[d].clone);
                        l[d].$destroy(), (h[d] = a.leave(s)).then(m(h, d));
                    }
                    k.length = 0, l.length = 0, (g = f.cases["!" + c] || f.cases["?"]) && r(g, function(c) {
                        c.transclude(function(d, e) {
                            l.push(e);
                            var f = c.element;
                            d[d.length++] = X.createComment(" end ngSwitchWhen: "), k.push({
                                clone: d
                            }), a.enter(d, f.parent(), f);
                        });
                    });
                });
            }
        };
    } ], me = Ha({
        transclude: "element",
        priority: 1200,
        require: "^ngSwitch",
        multiElement: !0,
        link: function(a, c, d, e, f) {
            e.cases["!" + d.ngSwitchWhen] = e.cases["!" + d.ngSwitchWhen] || [], e.cases["!" + d.ngSwitchWhen].push({
                transclude: f,
                element: c
            });
        }
    }), ne = Ha({
        transclude: "element",
        priority: 1200,
        require: "^ngSwitch",
        multiElement: !0,
        link: function(a, c, d, e, f) {
            e.cases["?"] = e.cases["?"] || [], e.cases["?"].push({
                transclude: f,
                element: c
            });
        }
    }), pe = Ha({
        restrict: "EAC",
        link: function(a, c, d, e, f) {
            if (!f) throw y("ngTransclude")("orphan", sa(c));
            f(function(a) {
                c.empty(), c.append(a);
            });
        }
    }), Qd = [ "$templateCache", function(a) {
        return {
            restrict: "E",
            terminal: !0,
            compile: function(c, d) {
                "text/ng-template" == d.type && a.put(d.id, c[0].text);
            }
        };
    } ], Rf = y("ngOptions"), oe = da({
        restrict: "A",
        terminal: !0
    }), Rd = [ "$compile", "$parse", function(a, c) {
        var d = /^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/, e = {
            $setViewValue: A
        };
        return {
            restrict: "E",
            require: [ "select", "?ngModel" ],
            controller: [ "$element", "$scope", "$attrs", function(a, c, d) {
                var q, h = this, l = {}, m = e;
                h.databound = d.ngModel, h.init = function(a, c, d) {
                    m = a, q = d;
                }, h.addOption = function(c, d) {
                    Ka(c, '"option value"'), l[c] = !0, m.$viewValue == c && (a.val(c), q.parent() && q.remove()), 
                    d && d[0].hasAttribute("selected") && (d[0].selected = !0);
                }, h.removeOption = function(a) {
                    this.hasOption(a) && (delete l[a], m.$viewValue == a && this.renderUnknownOption(a));
                }, h.renderUnknownOption = function(c) {
                    c = "? " + La(c) + " ?", q.val(c), a.prepend(q), a.val(c), q.prop("selected", !0);
                }, h.hasOption = function(a) {
                    return l.hasOwnProperty(a);
                }, c.$on("$destroy", function() {
                    h.renderUnknownOption = A;
                });
            } ],
            link: function(e, g, k, h) {
                if (h[1]) {
                    var p = h[0];
                    h = h[1];
                    var v, n = k.multiple, s = k.ngOptions, y = !1, x = !1, t = D(X.createElement("option")), E = D(X.createElement("optgroup")), C = t.clone();
                    k = 0;
                    for (var A = g.children(), F = A.length; k < F; k++) if ("" === A[k].value) {
                        v = y = A.eq(k);
                        break;
                    }
                    p.init(h, y, C), n && (h.$isEmpty = function(a) {
                        return !a || 0 === a.length;
                    }), s ? function(e, f, g) {
                        function h(a, c, d) {
                            return N[A] = d, F && (N[F] = c), a(e, N);
                        }
                        function k(a) {
                            var c;
                            if (n) if (G && B(a)) {
                                c = new bb([]);
                                for (var d = 0; d < a.length; d++) c.put(h(G, null, a[d]), !0);
                            } else c = new bb(a); else G && (a = h(G, null, a));
                            return function(d, e) {
                                var f;
                                return f = G || w || I, n ? z(c.remove(h(f, d, e))) : a == h(f, d, e);
                            };
                        }
                        function l() {
                            x || (e.$$postDigest(q), x = !0);
                        }
                        function m(a, c, d) {
                            a[c] = a[c] || 0, a[c] += d ? 1 : -1;
                        }
                        function q() {
                            x = !1;
                            var d, l, s, u, v, a = {
                                "": []
                            }, c = [ "" ];
                            s = g.$viewValue, u = P(e) || [];
                            var w, B, D, I, G, A = F ? ic(u) : u, N = {};
                            I = k(s), v = !1;
                            var S;
                            for (G = 0; D = A.length, G < D; G++) w = G, F && "$" === (w = A[G]).charAt(0) || (B = u[w], 
                            (l = a[d = h(M, w, B) || ""]) || (l = a[d] = [], c.push(d)), d = I(w, B), v = v || d, 
                            w = z(w = h(C, w, B)) ? w : "", l.push({
                                id: F ? A[G] : G,
                                label: w,
                                selected: d
                            }));
                            for (n || (y || null === s ? a[""].unshift({
                                id: "",
                                label: "",
                                selected: !v
                            }) : v || a[""].unshift({
                                id: "?",
                                label: "",
                                selected: !0
                            })), I = 0, A = c.length; I < A; I++) {
                                for (l = a[d = c[I]], R.length <= I ? (s = {
                                    element: E.clone().attr("label", d),
                                    label: l.label
                                }, u = [ s ], R.push(u), f.append(s.element)) : (u = R[I], (s = u[0]).label != d && s.element.attr("label", s.label = d)), 
                                w = null, G = 0, D = l.length; G < D; G++) d = l[G], (v = u[G + 1]) ? (w = v.element, 
                                v.label !== d.label && (m(N, v.label, !1), m(N, d.label, !0), w.text(v.label = d.label)), 
                                v.id !== d.id && w.val(v.id = d.id), w[0].selected !== d.selected && (w.prop("selected", v.selected = d.selected), 
                                Pa && w.prop("selected", v.selected))) : ("" === d.id && y ? S = y : (S = t.clone()).val(d.id).prop("selected", d.selected).attr("selected", d.selected).text(d.label), 
                                u.push(v = {
                                    element: S,
                                    label: d.label,
                                    id: d.id,
                                    selected: d.selected
                                }), m(N, d.label, !0), w ? w.after(S) : s.element.append(S), w = S);
                                for (G++; u.length > G; ) d = u.pop(), m(N, d.label, !1), d.element.remove();
                                r(N, function(a, c) {
                                    0 < a ? p.addOption(c) : 0 > a && p.removeOption(c);
                                });
                            }
                            for (;R.length > I; ) R.pop()[0].element.remove();
                        }
                        var v;
                        if (!(v = s.match(d))) throw Rf("iexp", s, sa(f));
                        var C = c(v[2] || v[1]), A = v[4] || v[6], D = / as /.test(v[0]) && v[1], w = D ? c(D) : null, F = v[5], M = c(v[3] || ""), I = c(v[2] ? v[1] : A), P = c(v[7]), G = v[8] ? c(v[8]) : null, R = [ [ {
                            element: f,
                            label: ""
                        } ] ], N = {};
                        y && (a(y)(e), y.removeClass("ng-scope"), y.remove()), f.empty(), f.on("change", function() {
                            e.$apply(function() {
                                var c, a = P(e) || [];
                                if (n) c = [], r(f.val(), function(d) {
                                    c.push("?" === d ? u : "" === d ? null : h(w || I, d, a[d]));
                                }); else {
                                    var d = f.val();
                                    c = "?" === d ? u : "" === d ? null : h(w || I, d, a[d]);
                                }
                                g.$setViewValue(c), q();
                            });
                        }), g.$render = q, e.$watchCollection(P, l), e.$watchCollection(function() {
                            var c, a = P(e);
                            if (a && B(a)) {
                                c = Array(a.length);
                                for (var d = 0, f = a.length; d < f; d++) c[d] = h(C, d, a[d]);
                            } else if (a) for (d in c = {}, a) a.hasOwnProperty(d) && (c[d] = h(C, d, a[d]));
                            return c;
                        }, l), n && e.$watchCollection(function() {
                            return g.$modelValue;
                        }, l);
                    }(e, g, h) : n ? function(a, c, d) {
                        var e;
                        d.$render = function() {
                            var a = new bb(d.$viewValue);
                            r(c.find("option"), function(c) {
                                c.selected = z(a.get(c.value));
                            });
                        }, a.$watch(function() {
                            la(e, d.$viewValue) || (e = qa(d.$viewValue), d.$render());
                        }), c.on("change", function() {
                            a.$apply(function() {
                                var a = [];
                                r(c.find("option"), function(c) {
                                    c.selected && a.push(c.value);
                                }), d.$setViewValue(a);
                            });
                        });
                    }(e, g, h) : function(a, c, d, e) {
                        d.$render = function() {
                            var a = d.$viewValue;
                            e.hasOption(a) ? (C.parent() && C.remove(), c.val(a), "" === a && v.prop("selected", !0)) : w(a) && v ? c.val("") : e.renderUnknownOption(a);
                        }, c.on("change", function() {
                            a.$apply(function() {
                                C.parent() && C.remove(), d.$setViewValue(c.val());
                            });
                        });
                    }(e, g, h, p);
                }
            }
        };
    } ], Td = [ "$interpolate", function(a) {
        var c = {
            addOption: A,
            removeOption: A
        };
        return {
            restrict: "E",
            priority: 100,
            compile: function(d, e) {
                if (w(e.value)) {
                    var f = a(d.text(), !0);
                    f || e.$set("value", d.text());
                }
                return function(a, d, e) {
                    var l = d.parent(), m = l.data("$selectController") || l.parent().data("$selectController");
                    m && m.databound || (m = c), f ? a.$watch(f, function(a, c) {
                        e.$set("value", a), c !== a && m.removeOption(c), m.addOption(a, d);
                    }) : m.addOption(e.value, d), d.on("$destroy", function() {
                        m.removeOption(e.value);
                    });
                };
            }
        };
    } ], Sd = da({
        restrict: "E",
        terminal: !1
    });
    S.angular.bootstrap ? console.log("WARNING: Tried to load angular more than once.") : (function() {
        var b;
        sc || ((ma = S.jQuery) && ma.fn.on ? (D = ma, E(ma.fn, {
            scope: Ja.scope,
            isolateScope: Ja.isolateScope,
            controller: Ja.controller,
            injector: Ja.injector,
            inheritedData: Ja.inheritedData
        }), b = ma.cleanData, ma.cleanData = function(a) {
            var c;
            if (Lb) Lb = !1; else for (var e, d = 0; null != (e = a[d]); d++) (c = ma._data(e, "events")) && c.$destroy && ma(e).triggerHandler("$destroy");
            b(a);
        }) : D = R, ta.element = D, sc = !0);
    }(), function(b) {
        E(b, {
            bootstrap: rc,
            copy: Ca,
            extend: E,
            equals: la,
            element: D,
            forEach: r,
            injector: Jb,
            noop: A,
            bind: nc,
            toJson: ra,
            fromJson: oc,
            identity: Ta,
            isUndefined: w,
            isDefined: z,
            isString: I,
            isFunction: F,
            isObject: G,
            isNumber: W,
            isElement: mc,
            isArray: B,
            version: Ld,
            isDate: ea,
            lowercase: N,
            uppercase: pb,
            callbacks: {
                counter: 0
            },
            getTestability: Gd,
            $$minErr: y,
            $$csp: Za,
            reloadWithDebugInfo: Fd
        }), $a = Jd(S);
        try {
            $a("ngLocale");
        } catch (a) {
            $a("ngLocale", []).provider("$locale", Md);
        }
        $a("ng", [ "ngLocale" ], [ "$provide", function(a) {
            a.provider({
                $$sanitizeUri: Nd
            }), a.provider("$compile", uc).directive({
                a: Od,
                input: vc,
                textarea: vc,
                form: Pd,
                script: Qd,
                select: Rd,
                style: Sd,
                option: Td,
                ngBind: Ud,
                ngBindHtml: Vd,
                ngBindTemplate: Wd,
                ngClass: Xd,
                ngClassEven: Yd,
                ngClassOdd: Zd,
                ngCloak: $d,
                ngController: ae,
                ngForm: be,
                ngHide: ce,
                ngIf: de,
                ngInclude: ee,
                ngInit: fe,
                ngNonBindable: ge,
                ngPluralize: he,
                ngRepeat: ie,
                ngShow: je,
                ngStyle: ke,
                ngSwitch: le,
                ngSwitchWhen: me,
                ngSwitchDefault: ne,
                ngOptions: oe,
                ngTransclude: pe,
                ngModel: qe,
                ngList: re,
                ngChange: se,
                pattern: wc,
                ngPattern: wc,
                required: xc,
                ngRequired: xc,
                minlength: yc,
                ngMinlength: yc,
                maxlength: zc,
                ngMaxlength: zc,
                ngValue: te,
                ngModelOptions: ue
            }).directive({
                ngInclude: ve
            }).directive(qb).directive(Ac), a.provider({
                $anchorScroll: we,
                $animate: xe,
                $browser: ye,
                $cacheFactory: ze,
                $controller: Ae,
                $document: Be,
                $exceptionHandler: Ce,
                $filter: Bc,
                $interpolate: De,
                $interval: Ee,
                $http: Fe,
                $httpBackend: Ge,
                $location: He,
                $log: Ie,
                $parse: Je,
                $rootScope: Ke,
                $q: Le,
                $$q: Me,
                $sce: Ne,
                $sceDelegate: Oe,
                $sniffer: Pe,
                $templateCache: Qe,
                $templateRequest: Re,
                $$testability: Se,
                $timeout: Te,
                $window: Ue,
                $$rAF: Ve,
                $$asyncCallback: We
            });
        } ]);
    }(ta), D(X).ready(function() {
        Ed(X, rc);
    }));
}(window, document), !window.angular.$$csp() && window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}</style>'), 
function(window, undefined) {
    "use strict";
    window._arrayBufferToBase64 = function(buffer) {
        for (var binary = "", bytes = new Uint8Array(buffer), len = bytes.byteLength, i = 0; i < len; i++) binary += String.fromCharCode(bytes[i]);
        return window.btoa(binary);
    }, window.angular.module("naif.base64", []).directive("baseSixtyFourInput", [ "$window", "$q", function($window, $q) {
        for (var isolateScope = {
            onChange: "&",
            onAfterValidate: "&",
            parser: "&"
        }, FILE_READER_EVENTS = [ "onabort", "onerror", "onloadstart", "onloadend", "onprogress", "onload" ], i = FILE_READER_EVENTS.length - 1; i >= 0; i--) isolateScope[FILE_READER_EVENTS[i]] = "&";
        return {
            restrict: "A",
            require: "ngModel",
            scope: isolateScope,
            link: function(scope, elem, attrs, ngModel) {
                function _readFiles() {
                    for (var i = rawFiles.length - 1; i >= 0; i--) {
                        var reader = new $window.FileReader(), file = rawFiles[i], fileObject = {};
                        fileObject.filetype = file.type, fileObject.filename = file.name, fileObject.filesize = file.size, 
                        rawFiles[i].deferredObj = $q.defer(), _attachEventHandlers(reader, file, fileObject), 
                        reader.readAsArrayBuffer(file);
                    }
                }
                function _onChange(e) {
                    attrs.onChange && scope.onChange()(e, rawFiles);
                }
                function _onAfterValidate(e) {
                    if (attrs.onAfterValidate) {
                        for (var promises = [], i = rawFiles.length - 1; i >= 0; i--) promises.push(rawFiles[i].deferredObj.promise);
                        $q.all(promises).then(function() {
                            scope.onAfterValidate()(e, fileObjects, rawFiles);
                        });
                    }
                }
                function _attachEventHandlers(fReader, file, fileObject) {
                    for (var i = FILE_READER_EVENTS.length - 1; i >= 0; i--) {
                        var e = FILE_READER_EVENTS[i];
                        attrs[e] && "onload" !== e && _attachHandlerForEvent(e, scope[e], fReader, file, fileObject);
                    }
                    fReader.onload = _readerOnLoad(fReader, file, fileObject);
                }
                function _attachHandlerForEvent(eventName, handler, fReader, file, fileObject) {
                    fReader[eventName] = function(e) {
                        handler()(e, fReader, file, rawFiles, fileObjects, fileObject);
                    };
                }
                function _readerOnLoad(fReader, file, fileObject) {
                    return function(e) {
                        var buffer = e.target.result;
                        fileObject.base64 = $window._arrayBufferToBase64(buffer), (attrs.parser ? $q.when(scope.parser()(file, fileObject)) : $q.when(fileObject)).then(function(fileObj) {
                            fileObjects.push(fileObj), _setViewValue(), file.deferredObj.resolve();
                        }), attrs.onload && scope.onload()(e, fReader, file, rawFiles, fileObjects, fileObject);
                    };
                }
                function _setViewValue() {
                    var newVal = attrs.multiple ? fileObjects : fileObjects[0];
                    ngModel.$setViewValue(newVal), _maxsize(newVal), _minsize(newVal), _maxnum(newVal), 
                    _minnum(newVal), _accept(newVal);
                }
                function _maxnum(val) {
                    if (attrs.maxnum && attrs.multiple && val) {
                        var valid = val.length <= parseInt(attrs.maxnum);
                        ngModel.$setValidity("maxnum", valid);
                    }
                    return val;
                }
                function _minnum(val) {
                    if (attrs.minnum && attrs.multiple && val) {
                        var valid = val.length >= parseInt(attrs.minnum);
                        ngModel.$setValidity("minnum", valid);
                    }
                    return val;
                }
                function _maxsize(val) {
                    var valid = !0;
                    if (attrs.maxsize && val) {
                        var max = 1e3 * parseFloat(attrs.maxsize);
                        if (attrs.multiple) {
                            for (var i = 0; i < val.length; i++) if (val[i].filesize > max) {
                                valid = !1;
                                break;
                            }
                        } else valid = val.filesize <= max;
                        ngModel.$setValidity("maxsize", valid);
                    }
                    return val;
                }
                function _minsize(val) {
                    var valid = !0, min = 1e3 * parseFloat(attrs.minsize);
                    if (attrs.minsize && val) {
                        if (attrs.multiple) {
                            for (var i = 0; i < val.length; i++) if (val[i].filesize < min) {
                                valid = !1;
                                break;
                            }
                        } else valid = val.filesize >= min;
                        ngModel.$setValidity("minsize", valid);
                    }
                    return val;
                }
                function _accept(val) {
                    var regExp, exp, fileExt, valid = !0;
                    if (attrs.accept && (exp = attrs.accept.trim().replace(/[,\s]+/gi, "|").replace(/\./g, "\\.").replace(/\/\*/g, "/.*"), 
                    regExp = new RegExp(exp)), attrs.accept && val) {
                        if (attrs.multiple) for (var i = 0; i < val.length; i++) {
                            var file = val[i];
                            if (fileExt = "." + file.filename.split(".").pop(), !(valid = regExp.test(file.filetype) || regExp.test(fileExt))) break;
                        } else fileExt = "." + val.filename.split(".").pop(), valid = regExp.test(val.filetype) || regExp.test(fileExt);
                        ngModel.$setValidity("accept", valid);
                    }
                    return val;
                }
                if (ngModel) {
                    var rawFiles = [], fileObjects = [];
                    elem.on("change", function(e) {
                        e.target.files.length && (fileObjects = [], fileObjects = angular.copy(fileObjects), 
                        rawFiles = e.target.files, _readFiles(), _onChange(e), _onAfterValidate(e));
                    }), ngModel.$isEmpty = function(val) {
                        return !val || (angular.isArray(val) ? 0 === val.length : !val.base64);
                    }, scope._clearInput = function() {
                        elem[0].value = "";
                    }, scope.$watch(function() {
                        return ngModel.$viewValue;
                    }, function(val, oldVal) {
                        ngModel.$isEmpty(oldVal) || ngModel.$isEmpty(val) && scope._clearInput();
                    });
                }
            }
        };
    } ]);
}(window), function(e) {
    function n(r) {
        if (t[r]) return t[r].exports;
        var o = t[r] = {
            exports: {},
            id: r,
            loaded: !1
        };
        return e[r].call(o.exports, o, o.exports, n), o.loaded = !0, o.exports;
    }
    var t = {};
    n.m = e, n.c = t, n.p = "", n(0);
}([ function(e, n) {
    "use strict";
    angular.module("angularModalService", []).factory("ModalService", [ "$animate", "$document", "$compile", "$controller", "$http", "$rootScope", "$q", "$templateRequest", "$timeout", function(e, n, t, r, o, l, c, u, a) {
        return new function() {
            var i = function(e, n) {
                var t = c.defer();
                return e ? t.resolve(e) : n ? u(n, !0).then(function(e) {
                    t.resolve(e);
                }, function(e) {
                    t.reject(e);
                }) : t.reject("No template or templateUrl has been specified."), t.promise;
            }, s = function(n, t) {
                var r = n.children();
                return r.length > 0 ? e.enter(t, n, r[r.length - 1]) : e.enter(t, n);
            };
            this.showModal = function(o) {
                var u = angular.element(n[0].body), p = c.defer();
                return o.controller ? (i(o.template, o.templateUrl).then(function(n) {
                    function i(n) {
                        m.resolve(n), e.leave(g).then(function() {
                            v.resolve(n), d.$destroy(), $.close = null, p = null, m = null, S = null, $ = null, 
                            g = null, d = null;
                        }), f && f();
                    }
                    var d = (o.scope || l).$new(), f = l.$on("$locationChangeSuccess", i), m = c.defer(), v = c.defer(), $ = {
                        $scope: d,
                        close: function(e, n) {
                            void 0 !== n && null !== n || (n = 0), a(function() {
                                i(e);
                            }, n);
                        }
                    };
                    o.inputs && angular.extend($, o.inputs);
                    var g = t(n)(d);
                    $.$element = g;
                    var x = d[o.controllerAs], j = r(o.controller, $, !1, o.controllerAs);
                    o.controllerAs && x && angular.extend(j, x), o.appendElement ? s(o.appendElement, g) : s(u, g);
                    var S = {
                        controller: j,
                        scope: d,
                        element: g,
                        close: m.promise,
                        closed: v.promise
                    };
                    p.resolve(S);
                }).then(null, function(e) {
                    p.reject(e);
                }), p.promise) : (p.reject("No controller has been specified."), p.promise);
            };
        }();
    } ]);
} ]), function(M, f, S) {
    "use strict";
    f.module("ngAnimate", [ "ng" ]).directive("ngAnimateChildren", function() {
        return function(T, B, k) {
            k = k.ngAnimateChildren, f.isString(k) && 0 === k.length ? B.data("$$ngAnimateChildren", !0) : T.$watch(k, function(f) {
                B.data("$$ngAnimateChildren", !!f);
            });
        };
    }).factory("$$animateReflow", [ "$$rAF", "$document", function(f, B) {
        return function(k) {
            return f(function() {
                k();
            });
        };
    } ]).config([ "$provide", "$animateProvider", function(T, B) {
        function k(f) {
            for (var g = 0; g < f.length; g++) {
                var k = f[g];
                if (1 == k.nodeType) return k;
            }
        }
        function N(f, g) {
            return k(f) == k(g);
        }
        var s = f.noop, g = f.forEach, ba = B.$$selectors, $ = f.isArray, ca = f.isString, da = f.isObject, t = {
            running: !0
        };
        T.decorator("$animate", [ "$delegate", "$$q", "$injector", "$sniffer", "$rootElement", "$$asyncCallback", "$rootScope", "$document", "$templateRequest", function(O, M, I, U, x, C, P, S, V) {
            function A(a, c) {
                var b = a.data("$$ngAnimateState") || {};
                return c && (b.running = !0, b.structural = !0, a.data("$$ngAnimateState", b)), 
                b.disabled || b.running && b.structural;
            }
            function z(a) {
                var c, b = M.defer();
                return b.promise.$$cancelFn = function() {
                    c && c();
                }, P.$$postDigest(function() {
                    c = a(function() {
                        b.resolve();
                    });
                }), b.promise;
            }
            function J(a) {
                if (da(a)) return a.tempClasses && ca(a.tempClasses) && (a.tempClasses = a.tempClasses.split(/\s+/)), 
                a;
            }
            function W(a, c, b) {
                var e = {};
                g(b = b || {}, function(a, d) {
                    g(d.split(" "), function(d) {
                        e[d] = a;
                    });
                });
                var m = Object.create(null);
                g((a.attr("class") || "").split(/\s+/), function(a) {
                    m[a] = !0;
                });
                var f = [], k = [];
                return g(c.classes, function(a, d) {
                    var b = m[d], c = e[d] || {};
                    !1 === a ? (b || "addClass" == c.event) && k.push(d) : !0 === a && (b && "removeClass" != c.event || f.push(d));
                }), 0 < f.length + k.length && [ f.join(" "), k.join(" ") ];
            }
            function Q(a) {
                if (a) {
                    var c = [], b = {};
                    a = a.substr(1).split("."), (U.transitions || U.animations) && c.push(I.get(ba[""]));
                    for (var e = 0; e < a.length; e++) {
                        var f = a[e], k = ba[f];
                        k && !b[f] && (c.push(I.get(k)), b[f] = !0);
                    }
                    return c;
                }
            }
            function R(a, c, b, e) {
                function m(a, d) {
                    var b = a[d], c = a["before" + d.charAt(0).toUpperCase() + d.substr(1)];
                    if (b || c) return "leave" == d && (c = b, b = null), l.push({
                        event: d,
                        fn: b
                    }), H.push({
                        event: d,
                        fn: c
                    }), !0;
                }
                function k(c, h, G) {
                    var w = [];
                    g(c, function(a) {
                        a.fn && w.push(a);
                    });
                    var f = 0;
                    g(w, function(c, n) {
                        var u = function() {
                            a: {
                                if (h) {
                                    if ((h[n] || s)(), ++f < w.length) break a;
                                    h = null;
                                }
                                G();
                            }
                        };
                        switch (c.event) {
                          case "setClass":
                            h.push(c.fn(a, F, d, u, e));
                            break;

                          case "animate":
                            h.push(c.fn(a, b, e.from, e.to, u));
                            break;

                          case "addClass":
                            h.push(c.fn(a, F || b, u, e));
                            break;

                          case "removeClass":
                            h.push(c.fn(a, d || b, u, e));
                            break;

                          default:
                            h.push(c.fn(a, u, e));
                        }
                    }), h && 0 === h.length && G();
                }
                var p = a[0];
                if (p) {
                    e && (e.to = e.to || {}, e.from = e.from || {});
                    var F, d;
                    $(b) && (F = b[0], d = b[1], F ? d ? b = F + " " + d : (b = F, c = "addClass") : (b = d, 
                    c = "removeClass"));
                    var h = "setClass" == c, G = h || "addClass" == c || "removeClass" == c || "animate" == c, w = a.attr("class") + " " + b;
                    if (X(w)) {
                        var u = s, n = [], H = [], q = s, r = [], l = [], w = (" " + w).replace(/\s+/g, ".");
                        return g(Q(w), function(a) {
                            !m(a, c) && h && (m(a, "addClass"), m(a, "removeClass"));
                        }), {
                            node: p,
                            event: c,
                            className: b,
                            isClassBased: G,
                            isSetClassOperation: h,
                            applyStyles: function() {
                                e && a.css(f.extend(e.from || {}, e.to || {}));
                            },
                            before: function(a) {
                                u = a, k(H, n, function() {
                                    u = s, a();
                                });
                            },
                            after: function(a) {
                                q = a, k(l, r, function() {
                                    q = s, a();
                                });
                            },
                            cancel: function() {
                                n && (g(n, function(a) {
                                    (a || s)(!0);
                                }), u(!0)), r && (g(r, function(a) {
                                    (a || s)(!0);
                                }), q(!0));
                            }
                        };
                    }
                }
            }
            function y(a, c, b, e, m, k, p, F) {
                function d(d) {
                    var h = "$animate:" + d;
                    H && H[h] && 0 < H[h].length && C(function() {
                        b.triggerHandler(h, {
                            event: a,
                            className: c
                        });
                    });
                }
                function h() {
                    d("before");
                }
                function G() {
                    d("after");
                }
                function w() {
                    w.hasBeenRun || (w.hasBeenRun = !0, k());
                }
                function u() {
                    if (!u.hasBeenRun) {
                        n && n.applyStyles(), u.hasBeenRun = !0, p && p.tempClasses && g(p.tempClasses, function(a) {
                            b.removeClass(a);
                        });
                        var h = b.data("$$ngAnimateState");
                        h && (n && n.isClassBased ? l(b, c) : (C(function() {
                            var d = b.data("$$ngAnimateState") || {};
                            v == d.index && l(b, c);
                        }), b.data("$$ngAnimateState", h))), d("close"), F();
                    }
                }
                var n = R(b, a, c, p);
                if (!n) return w(), h(), G(), u(), s;
                a = n.event, c = n.className;
                var H = (H = f.element._data(n.node)) && H.events;
                if (e || (e = m ? m.parent() : b.parent()), Y(b, e)) return w(), h(), G(), u(), 
                s;
                var q = (e = b.data("$$ngAnimateState") || {}).active || {}, r = e.totalActive || 0, t = e.last;
                if (m = !1, 0 < r) {
                    if (r = [], n.isClassBased) "setClass" == t.event ? (r.push(t), l(b, c)) : q[c] && ((aa = q[c]).event == a ? m = !0 : (r.push(aa), 
                    l(b, c))); else if ("leave" == a && q["ng-leave"]) m = !0; else {
                        for (var aa in q) r.push(q[aa]);
                        e = {}, l(b, !0);
                    }
                    0 < r.length && g(r, function(a) {
                        a.cancel();
                    });
                }
                if (!n.isClassBased || n.isSetClassOperation || "animate" == a || m || (m = "addClass" == a == b.hasClass(c)), 
                m) return w(), h(), G(), d("close"), F(), s;
                q = e.active || {}, r = e.totalActive || 0, "leave" == a && b.one("$destroy", function(a) {
                    var d = (a = f.element(this)).data("$$ngAnimateState");
                    d && (d = d.active["ng-leave"]) && (d.cancel(), l(a, "ng-leave"));
                }), b.addClass("ng-animate"), p && p.tempClasses && g(p.tempClasses, function(a) {
                    b.addClass(a);
                });
                var v = Z++;
                return r++, q[c] = n, b.data("$$ngAnimateState", {
                    last: n,
                    active: q,
                    index: v,
                    totalActive: r
                }), h(), n.before(function(d) {
                    var h = b.data("$$ngAnimateState");
                    d = d || !h || !h.active[c] || n.isClassBased && h.active[c].event != a, w(), !0 === d ? u() : (G(), 
                    n.after(u));
                }), n.cancel;
            }
            function K(a) {
                (a = k(a)) && (a = f.isFunction(a.getElementsByClassName) ? a.getElementsByClassName("ng-animate") : a.querySelectorAll(".ng-animate"), 
                g(a, function(a) {
                    (a = (a = f.element(a)).data("$$ngAnimateState")) && a.active && g(a.active, function(a) {
                        a.cancel();
                    });
                }));
            }
            function l(a, c) {
                if (N(a, x)) t.disabled || (t.running = !1, t.structural = !1); else if (c) {
                    var b = a.data("$$ngAnimateState") || {}, e = !0 === c;
                    !e && b.active && b.active[c] && (b.totalActive--, delete b.active[c]), !e && b.totalActive || (a.removeClass("ng-animate"), 
                    a.removeData("$$ngAnimateState"));
                }
            }
            function Y(a, c) {
                if (t.disabled) return !0;
                if (N(a, x)) return t.running;
                var b, e, k;
                do {
                    if (0 === c.length) break;
                    var g = N(c, x), p = g ? t : c.data("$$ngAnimateState") || {};
                    if (p.disabled) return !0;
                    g && (k = !0), !1 !== b && (g = c.data("$$ngAnimateChildren"), f.isDefined(g) && (b = g)), 
                    e = e || p.running || p.last && !p.last.isClassBased;
                } while (c = c.parent());
                return !k || !b && e;
            }
            x.data("$$ngAnimateState", t);
            var L = P.$watch(function() {
                return V.totalPendingRequests;
            }, function(a, c) {
                0 === a && (L(), P.$$postDigest(function() {
                    P.$$postDigest(function() {
                        t.running = !1;
                    });
                }));
            }), Z = 0, E = B.classNameFilter(), X = E ? function(a) {
                return E.test(a);
            } : function() {
                return !0;
            };
            return {
                animate: function(a, c, b, e, g) {
                    return e = e || "ng-inline-animate", g = J(g) || {}, g.from = b ? c : null, g.to = b || c, 
                    z(function(b) {
                        return y("animate", e, f.element(k(a)), null, null, s, g, b);
                    });
                },
                enter: function(a, c, b, e) {
                    return e = J(e), a = f.element(a), c = c && f.element(c), b = b && f.element(b), 
                    A(a, !0), O.enter(a, c, b), z(function(g) {
                        return y("enter", "ng-enter", f.element(k(a)), c, b, s, e, g);
                    });
                },
                leave: function(a, c) {
                    return c = J(c), a = f.element(a), K(a), A(a, !0), z(function(b) {
                        return y("leave", "ng-leave", f.element(k(a)), null, null, function() {
                            O.leave(a);
                        }, c, b);
                    });
                },
                move: function(a, c, b, e) {
                    return e = J(e), a = f.element(a), c = c && f.element(c), b = b && f.element(b), 
                    K(a), A(a, !0), O.move(a, c, b), z(function(g) {
                        return y("move", "ng-move", f.element(k(a)), c, b, s, e, g);
                    });
                },
                addClass: function(a, c, b) {
                    return this.setClass(a, c, [], b);
                },
                removeClass: function(a, c, b) {
                    return this.setClass(a, [], c, b);
                },
                setClass: function(a, c, b, e) {
                    if (e = J(e), a = f.element(a), a = f.element(k(a)), A(a)) return O.$$setClassImmediately(a, c, b, e);
                    var m, l = a.data("$$animateClasses"), p = !!l;
                    return l || (l = {
                        classes: {}
                    }), m = l.classes, c = $(c) ? c : c.split(" "), g(c, function(a) {
                        a && a.length && (m[a] = !0);
                    }), b = $(b) ? b : b.split(" "), g(b, function(a) {
                        a && a.length && (m[a] = !1);
                    }), p ? (e && l.options && (l.options = f.extend(l.options || {}, e)), l.promise) : (a.data("$$animateClasses", l = {
                        classes: m,
                        options: e
                    }), l.promise = z(function(b) {
                        var d = a.parent(), h = k(a);
                        if ((c = h.parentNode) && !c.$$NG_REMOVED && !h.$$NG_REMOVED) {
                            h = a.data("$$animateClasses"), a.removeData("$$animateClasses");
                            var c = a.data("$$ngAnimateState") || {}, e = W(a, h, c.active);
                            return e ? y("setClass", e, a, d, null, function() {
                                e[0] && O.$$addClassImmediately(a, e[0]), e[1] && O.$$removeClassImmediately(a, e[1]);
                            }, h.options, b) : b();
                        }
                        b();
                    }));
                },
                cancel: function(a) {
                    a.$$cancelFn();
                },
                enabled: function(a, c) {
                    switch (arguments.length) {
                      case 2:
                        if (a) l(c); else {
                            var b = c.data("$$ngAnimateState") || {};
                            b.disabled = !0, c.data("$$ngAnimateState", b);
                        }
                        break;

                      case 1:
                        t.disabled = !a;
                        break;

                      default:
                        a = !t.disabled;
                    }
                    return !!a;
                }
            };
        } ]), B.register("", [ "$window", "$sniffer", "$timeout", "$$animateReflow", function(t, B, I, U) {
            function x() {
                e || (e = U(function() {
                    b = [], e = null, a = {};
                }));
            }
            function C(c, d) {
                e && e(), b.push(d), e = U(function() {
                    g(b, function(a) {
                        a();
                    }), b = [], e = null, a = {};
                });
            }
            function P(a, d) {
                var h = k(a);
                a = f.element(h), p.push(a), (h = Date.now() + d) <= N || (I.cancel(m), N = h, m = I(function() {
                    T(p), p = [];
                }, d, !1));
            }
            function T(a) {
                g(a, function(a) {
                    (a = a.data("$$ngAnimateCSS3Data")) && g(a.closeAnimationFns, function(a) {
                        a();
                    });
                });
            }
            function V(b, d) {
                var h = d ? a[d] : null;
                if (!h) {
                    var c = 0, e = 0, f = 0, k = 0;
                    g(b, function(a) {
                        if (1 == a.nodeType) {
                            a = t.getComputedStyle(a) || {}, c = Math.max(A(a[L + "Duration"]), c), e = Math.max(A(a[L + "Delay"]), e), 
                            k = Math.max(A(a[E + "Delay"]), k);
                            var d = A(a[E + "Duration"]);
                            0 < d && (d *= parseInt(a[E + "IterationCount"], 10) || 1), f = Math.max(d, f);
                        }
                    }), h = {
                        total: 0,
                        transitionDelay: e,
                        transitionDuration: c,
                        animationDelay: k,
                        animationDuration: f
                    }, d && (a[d] = h);
                }
                return h;
            }
            function A(a) {
                var d = 0;
                return a = ca(a) ? a.split(/\s*,\s*/) : [], g(a, function(a) {
                    d = Math.max(parseFloat(a) || 0, d);
                }), d;
            }
            function z(b, d, h, e) {
                b = 0 <= [ "ng-enter", "ng-leave", "ng-move" ].indexOf(h);
                var f, g = d.parent(), n = g.data("$$ngAnimateKey");
                n || (g.data("$$ngAnimateKey", ++c), n = c), f = n + "-" + k(d).getAttribute("class");
                var l = {};
                0 < (n = a[g = f + " " + h] ? ++a[g].total : 0) && ((f = !a[l = f + " " + (q = h + "-stagger")]) && d.addClass(q), 
                l = V(d, l), f && d.removeClass(q)), d.addClass(h);
                var q = d.data("$$ngAnimateCSS3Data") || {}, r = V(d, g);
                return f = r.transitionDuration, r = r.animationDuration, b && 0 === f && 0 === r ? (d.removeClass(h), 
                !1) : (h = e || b && 0 < f, b = 0 < r && 0 < l.animationDelay && 0 === l.animationDuration, 
                d.data("$$ngAnimateCSS3Data", {
                    stagger: l,
                    cacheKey: g,
                    running: q.running || 0,
                    itemIndex: n,
                    blockTransition: h,
                    closeAnimationFns: q.closeAnimationFns || []
                }), g = k(d), h && (W(g, !0), e && d.css(e)), b && (g.style[E + "PlayState"] = "paused"), 
                !0);
            }
            function J(a, d, b, c, e) {
                function f() {
                    d.off(C, l), d.removeClass(q), d.removeClass(r), z && I.cancel(z), K(d, b);
                    var c, a = k(d);
                    for (c in p) a.style.removeProperty(p[c]);
                }
                function l(a) {
                    a.stopPropagation();
                    var d = a.originalEvent || a;
                    a = d.$manualTimeStamp || d.timeStamp || Date.now(), d = parseFloat(d.elapsedTime.toFixed(3)), 
                    Math.max(a - B, 0) >= A && d >= x && c();
                }
                var m = k(d);
                if (a = d.data("$$ngAnimateCSS3Data"), -1 != m.getAttribute("class").indexOf(b) && a) {
                    var q = "", r = "";
                    g(b.split(" "), function(a, d) {
                        var b = (0 < d ? " " : "") + a;
                        q += b + "-active", r += b + "-pending";
                    });
                    var p = [], t = a.itemIndex, v = a.stagger, s = 0;
                    if (0 < t) {
                        s = 0, 0 < v.transitionDelay && 0 === v.transitionDuration && (s = v.transitionDelay * t);
                        var y = 0;
                        0 < v.animationDelay && 0 === v.animationDuration && (y = v.animationDelay * t, 
                        p.push(Y + "animation-play-state")), s = Math.round(100 * Math.max(s, y)) / 100;
                    }
                    s || (d.addClass(q), a.blockTransition && W(m, !1));
                    var D = V(d, a.cacheKey + " " + q), x = Math.max(D.transitionDuration, D.animationDuration);
                    if (0 !== x) {
                        !s && e && (D.transitionDuration || (d.css("transition", D.animationDuration + "s linear all"), 
                        p.push("transition")), d.css(e));
                        var A = 1e3 * (t = Math.max(D.transitionDelay, D.animationDelay));
                        0 < p.length && (";" !== (v = m.getAttribute("style") || "").charAt(v.length - 1) && (v += ";"), 
                        m.setAttribute("style", v + " "));
                        var z, B = Date.now(), C = X + " " + Z, t = 1e3 * (s + 1.5 * (t + x));
                        return 0 < s && (d.addClass(r), z = I(function() {
                            z = null, 0 < D.transitionDuration && W(m, !1), 0 < D.animationDuration && (m.style[E + "PlayState"] = ""), 
                            d.addClass(q), d.removeClass(r), e && (0 === D.transitionDuration && d.css("transition", D.animationDuration + "s linear all"), 
                            d.css(e), p.push("transition"));
                        }, 1e3 * s, !1)), d.on(C, l), a.closeAnimationFns.push(function() {
                            f(), c();
                        }), a.running++, P(d, t), f;
                    }
                    d.removeClass(q), K(d, b), c();
                } else c();
            }
            function W(a, d) {
                a.style[L + "Property"] = d ? "none" : "";
            }
            function Q(a, d, b, c) {
                if (z(a, d, b, c)) return function(a) {
                    a && K(d, b);
                };
            }
            function R(a, d, b, c, e) {
                if (d.data("$$ngAnimateCSS3Data")) return J(a, d, b, c, e);
                K(d, b), c();
            }
            function y(a, d, b, c, e) {
                var f = Q(a, d, b, e.from);
                if (f) {
                    var g = f;
                    return C(d, function() {
                        g = R(a, d, b, c, e.to);
                    }), function(a) {
                        (g || s)(a);
                    };
                }
                x(), c();
            }
            function K(a, d) {
                a.removeClass(d);
                var b = a.data("$$ngAnimateCSS3Data");
                b && (b.running && b.running--, b.running && 0 !== b.running || a.removeData("$$ngAnimateCSS3Data"));
            }
            function l(a, d) {
                var b = "";
                return a = $(a) ? a : a.split(/\s+/), g(a, function(a, c) {
                    a && 0 < a.length && (b += (0 < c ? " " : "") + a + d);
                }), b;
            }
            var L, Z, E, X, Y = "";
            M.ontransitionend === S && M.onwebkittransitionend !== S ? (Y = "-webkit-", L = "WebkitTransition", 
            Z = "webkitTransitionEnd transitionend") : (L = "transition", Z = "transitionend"), 
            M.onanimationend === S && M.onwebkitanimationend !== S ? (Y = "-webkit-", E = "WebkitAnimation", 
            X = "webkitAnimationEnd animationend") : (E = "animation", X = "animationend");
            var e, a = {}, c = 0, b = [], m = null, N = 0, p = [];
            return {
                animate: function(a, d, b, c, e, f) {
                    return f = f || {}, f.from = b, f.to = c, y("animate", a, d, e, f);
                },
                enter: function(a, b, c) {
                    return c = c || {}, y("enter", a, "ng-enter", b, c);
                },
                leave: function(a, b, c) {
                    return c = c || {}, y("leave", a, "ng-leave", b, c);
                },
                move: function(a, b, c) {
                    return c = c || {}, y("move", a, "ng-move", b, c);
                },
                beforeSetClass: function(a, b, c, e, f) {
                    if (f = f || {}, b = l(c, "-remove") + " " + l(b, "-add"), f = Q("setClass", a, b, f.from)) return C(a, e), 
                    f;
                    x(), e();
                },
                beforeAddClass: function(a, b, c, e) {
                    if (e = e || {}, b = Q("addClass", a, l(b, "-add"), e.from)) return C(a, c), b;
                    x(), c();
                },
                beforeRemoveClass: function(a, b, c, e) {
                    if (e = e || {}, b = Q("removeClass", a, l(b, "-remove"), e.from)) return C(a, c), 
                    b;
                    x(), c();
                },
                setClass: function(a, b, c, e, f) {
                    return f = f || {}, c = l(c, "-remove"), b = l(b, "-add"), R("setClass", a, c + " " + b, e, f.to);
                },
                addClass: function(a, b, c, e) {
                    return e = e || {}, R("addClass", a, l(b, "-add"), c, e.to);
                },
                removeClass: function(a, b, c, e) {
                    return e = e || {}, R("removeClass", a, l(b, "-remove"), c, e.to);
                }
            };
        } ]);
    } ]);
}(window, window.angular), "undefined" == typeof jQuery) throw new Error("Bootstrap requires jQuery");

+function(a) {
    "use strict";
    function b() {
        var a = document.createElement("bootstrap"), b = {
            WebkitTransition: "webkitTransitionEnd",
            MozTransition: "transitionend",
            OTransition: "oTransitionEnd otransitionend",
            transition: "transitionend"
        };
        for (var c in b) if (void 0 !== a.style[c]) return {
            end: b[c]
        };
        return !1;
    }
    a.fn.emulateTransitionEnd = function(b) {
        var c = !1, d = this;
        a(this).one(a.support.transition.end, function() {
            c = !0;
        });
        return setTimeout(function() {
            c || a(d).trigger(a.support.transition.end);
        }, b), this;
    }, a(function() {
        a.support.transition = b();
    });
}(jQuery), function(a) {
    "use strict";
    var b = '[data-dismiss="alert"]', c = function(c) {
        a(c).on("click", b, this.close);
    };
    c.prototype.close = function(b) {
        function c() {
            f.trigger("closed.bs.alert").remove();
        }
        var d = a(this), e = d.attr("data-target");
        e || (e = d.attr("href"), e = e && e.replace(/.*(?=#[^\s]*$)/, ""));
        var f = a(e);
        b && b.preventDefault(), f.length || (f = d.hasClass("alert") ? d : d.parent()), 
        f.trigger(b = a.Event("close.bs.alert")), b.isDefaultPrevented() || (f.removeClass("in"), 
        a.support.transition && f.hasClass("fade") ? f.one(a.support.transition.end, c).emulateTransitionEnd(150) : c());
    };
    var d = a.fn.alert;
    a.fn.alert = function(b) {
        return this.each(function() {
            var d = a(this), e = d.data("bs.alert");
            e || d.data("bs.alert", e = new c(this)), "string" == typeof b && e[b].call(d);
        });
    }, a.fn.alert.Constructor = c, a.fn.alert.noConflict = function() {
        return a.fn.alert = d, this;
    }, a(document).on("click.bs.alert.data-api", b, c.prototype.close);
}(jQuery), function(a) {
    "use strict";
    var b = function(c, d) {
        this.$element = a(c), this.options = a.extend({}, b.DEFAULTS, d), this.isLoading = !1;
    };
    b.DEFAULTS = {
        loadingText: "loading..."
    }, b.prototype.setState = function(b) {
        var c = "disabled", d = this.$element, e = d.is("input") ? "val" : "html", f = d.data();
        b += "Text", f.resetText || d.data("resetText", d[e]()), d[e](f[b] || this.options[b]), 
        setTimeout(a.proxy(function() {
            "loadingText" == b ? (this.isLoading = !0, d.addClass(c).attr(c, c)) : this.isLoading && (this.isLoading = !1, 
            d.removeClass(c).removeAttr(c));
        }, this), 0);
    }, b.prototype.toggle = function() {
        var a = !0, b = this.$element.closest('[data-toggle="buttons"]');
        if (b.length) {
            var c = this.$element.find("input");
            "radio" == c.prop("type") && (c.prop("checked") && this.$element.hasClass("active") ? a = !1 : b.find(".active").removeClass("active")), 
            a && c.prop("checked", !this.$element.hasClass("active")).trigger("change");
        }
        a && this.$element.toggleClass("active");
    };
    var c = a.fn.button;
    a.fn.button = function(c) {
        return this.each(function() {
            var d = a(this), e = d.data("bs.button"), f = "object" == typeof c && c;
            e || d.data("bs.button", e = new b(this, f)), "toggle" == c ? e.toggle() : c && e.setState(c);
        });
    }, a.fn.button.Constructor = b, a.fn.button.noConflict = function() {
        return a.fn.button = c, this;
    }, a(document).on("click.bs.button.data-api", "[data-toggle^=button]", function(b) {
        var c = a(b.target);
        c.hasClass("btn") || (c = c.closest(".btn")), c.button("toggle"), b.preventDefault();
    });
}(jQuery), function(a) {
    "use strict";
    var b = function(b, c) {
        this.$element = a(b), this.$indicators = this.$element.find(".carousel-indicators"), 
        this.options = c, this.paused = this.sliding = this.interval = this.$active = this.$items = null, 
        "hover" == this.options.pause && this.$element.on("mouseenter", a.proxy(this.pause, this)).on("mouseleave", a.proxy(this.cycle, this));
    };
    b.DEFAULTS = {
        interval: 5e3,
        pause: "hover",
        wrap: !0
    }, b.prototype.cycle = function(b) {
        return b || (this.paused = !1), this.interval && clearInterval(this.interval), this.options.interval && !this.paused && (this.interval = setInterval(a.proxy(this.next, this), this.options.interval)), 
        this;
    }, b.prototype.getActiveIndex = function() {
        return this.$active = this.$element.find(".item.active"), this.$items = this.$active.parent().children(), 
        this.$items.index(this.$active);
    }, b.prototype.to = function(b) {
        var c = this, d = this.getActiveIndex();
        return b > this.$items.length - 1 || 0 > b ? void 0 : this.sliding ? this.$element.one("slid.bs.carousel", function() {
            c.to(b);
        }) : d == b ? this.pause().cycle() : this.slide(b > d ? "next" : "prev", a(this.$items[b]));
    }, b.prototype.pause = function(b) {
        return b || (this.paused = !0), this.$element.find(".next, .prev").length && a.support.transition && (this.$element.trigger(a.support.transition.end), 
        this.cycle(!0)), this.interval = clearInterval(this.interval), this;
    }, b.prototype.next = function() {
        return this.sliding ? void 0 : this.slide("next");
    }, b.prototype.prev = function() {
        return this.sliding ? void 0 : this.slide("prev");
    }, b.prototype.slide = function(b, c) {
        var d = this.$element.find(".item.active"), e = c || d[b](), f = this.interval, g = "next" == b ? "left" : "right", h = "next" == b ? "first" : "last", i = this;
        if (!e.length) {
            if (!this.options.wrap) return;
            e = this.$element.find(".item")[h]();
        }
        if (e.hasClass("active")) return this.sliding = !1;
        var j = a.Event("slide.bs.carousel", {
            relatedTarget: e[0],
            direction: g
        });
        return this.$element.trigger(j), j.isDefaultPrevented() ? void 0 : (this.sliding = !0, 
        f && this.pause(), this.$indicators.length && (this.$indicators.find(".active").removeClass("active"), 
        this.$element.one("slid.bs.carousel", function() {
            var b = a(i.$indicators.children()[i.getActiveIndex()]);
            b && b.addClass("active");
        })), a.support.transition && this.$element.hasClass("slide") ? (e.addClass(b), e[0].offsetWidth, 
        d.addClass(g), e.addClass(g), d.one(a.support.transition.end, function() {
            e.removeClass([ b, g ].join(" ")).addClass("active"), d.removeClass([ "active", g ].join(" ")), 
            i.sliding = !1, setTimeout(function() {
                i.$element.trigger("slid.bs.carousel");
            }, 0);
        }).emulateTransitionEnd(1e3 * d.css("transition-duration").slice(0, -1))) : (d.removeClass("active"), 
        e.addClass("active"), this.sliding = !1, this.$element.trigger("slid.bs.carousel")), 
        f && this.cycle(), this);
    };
    var c = a.fn.carousel;
    a.fn.carousel = function(c) {
        return this.each(function() {
            var d = a(this), e = d.data("bs.carousel"), f = a.extend({}, b.DEFAULTS, d.data(), "object" == typeof c && c), g = "string" == typeof c ? c : f.slide;
            e || d.data("bs.carousel", e = new b(this, f)), "number" == typeof c ? e.to(c) : g ? e[g]() : f.interval && e.pause().cycle();
        });
    }, a.fn.carousel.Constructor = b, a.fn.carousel.noConflict = function() {
        return a.fn.carousel = c, this;
    }, a(document).on("click.bs.carousel.data-api", "[data-slide], [data-slide-to]", function(b) {
        var c, d = a(this), e = a(d.attr("data-target") || (c = d.attr("href")) && c.replace(/.*(?=#[^\s]+$)/, "")), f = a.extend({}, e.data(), d.data()), g = d.attr("data-slide-to");
        g && (f.interval = !1), e.carousel(f), (g = d.attr("data-slide-to")) && e.data("bs.carousel").to(g), 
        b.preventDefault();
    }), a(window).on("load", function() {
        a('[data-ride="carousel"]').each(function() {
            var b = a(this);
            b.carousel(b.data());
        });
    });
}(jQuery), function(a) {
    "use strict";
    var b = function(c, d) {
        this.$element = a(c), this.options = a.extend({}, b.DEFAULTS, d), this.transitioning = null, 
        this.options.parent && (this.$parent = a(this.options.parent)), this.options.toggle && this.toggle();
    };
    b.DEFAULTS = {
        toggle: !0
    }, b.prototype.dimension = function() {
        return this.$element.hasClass("width") ? "width" : "height";
    }, b.prototype.show = function() {
        if (!this.transitioning && !this.$element.hasClass("in")) {
            var b = a.Event("show.bs.collapse");
            if (this.$element.trigger(b), !b.isDefaultPrevented()) {
                var c = this.$parent && this.$parent.find("> .panel > .in");
                if (c && c.length) {
                    var d = c.data("bs.collapse");
                    if (d && d.transitioning) return;
                    c.collapse("hide"), d || c.data("bs.collapse", null);
                }
                var e = this.dimension();
                this.$element.removeClass("collapse").addClass("collapsing")[e](0), this.transitioning = 1;
                var f = function() {
                    this.$element.removeClass("collapsing").addClass("collapse in")[e]("auto"), this.transitioning = 0, 
                    this.$element.trigger("shown.bs.collapse");
                };
                if (!a.support.transition) return f.call(this);
                var g = a.camelCase([ "scroll", e ].join("-"));
                this.$element.one(a.support.transition.end, a.proxy(f, this)).emulateTransitionEnd(350)[e](this.$element[0][g]);
            }
        }
    }, b.prototype.hide = function() {
        if (!this.transitioning && this.$element.hasClass("in")) {
            var b = a.Event("hide.bs.collapse");
            if (this.$element.trigger(b), !b.isDefaultPrevented()) {
                var c = this.dimension();
                this.$element[c](this.$element[c]())[0].offsetHeight, this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"), 
                this.transitioning = 1;
                var d = function() {
                    this.transitioning = 0, this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse");
                };
                return a.support.transition ? void this.$element[c](0).one(a.support.transition.end, a.proxy(d, this)).emulateTransitionEnd(350) : d.call(this);
            }
        }
    }, b.prototype.toggle = function() {
        this[this.$element.hasClass("in") ? "hide" : "show"]();
    };
    var c = a.fn.collapse;
    a.fn.collapse = function(c) {
        return this.each(function() {
            var d = a(this), e = d.data("bs.collapse"), f = a.extend({}, b.DEFAULTS, d.data(), "object" == typeof c && c);
            !e && f.toggle && "show" == c && (c = !c), e || d.data("bs.collapse", e = new b(this, f)), 
            "string" == typeof c && e[c]();
        });
    }, a.fn.collapse.Constructor = b, a.fn.collapse.noConflict = function() {
        return a.fn.collapse = c, this;
    }, a(document).on("click.bs.collapse.data-api", "[data-toggle=collapse]", function(b) {
        var c, d = a(this), e = d.attr("data-target") || b.preventDefault() || (c = d.attr("href")) && c.replace(/.*(?=#[^\s]+$)/, ""), f = a(e), g = f.data("bs.collapse"), h = g ? "toggle" : d.data(), i = d.attr("data-parent"), j = i && a(i);
        g && g.transitioning || (j && j.find('[data-toggle=collapse][data-parent="' + i + '"]').not(d).addClass("collapsed"), 
        d[f.hasClass("in") ? "addClass" : "removeClass"]("collapsed")), f.collapse(h);
    });
}(jQuery), function(a) {
    "use strict";
    function b(b) {
        a(d).remove(), a(e).each(function() {
            var d = c(a(this)), e = {
                relatedTarget: this
            };
            d.hasClass("open") && (d.trigger(b = a.Event("hide.bs.dropdown", e)), b.isDefaultPrevented() || d.removeClass("open").trigger("hidden.bs.dropdown", e));
        });
    }
    function c(b) {
        var c = b.attr("data-target");
        c || (c = b.attr("href"), c = c && /#[A-Za-z]/.test(c) && c.replace(/.*(?=#[^\s]*$)/, ""));
        var d = c && a(c);
        return d && d.length ? d : b.parent();
    }
    var d = ".dropdown-backdrop", e = "[data-toggle=dropdown]", f = function(b) {
        a(b).on("click.bs.dropdown", this.toggle);
    };
    f.prototype.toggle = function(d) {
        var e = a(this);
        if (!e.is(".disabled, :disabled")) {
            var f = c(e), g = f.hasClass("open");
            if (b(), !g) {
                "ontouchstart" in document.documentElement && !f.closest(".navbar-nav").length && a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click", b);
                var h = {
                    relatedTarget: this
                };
                if (f.trigger(d = a.Event("show.bs.dropdown", h)), d.isDefaultPrevented()) return;
                f.toggleClass("open").trigger("shown.bs.dropdown", h), e.focus();
            }
            return !1;
        }
    }, f.prototype.keydown = function(b) {
        if (/(38|40|27)/.test(b.keyCode)) {
            var d = a(this);
            if (b.preventDefault(), b.stopPropagation(), !d.is(".disabled, :disabled")) {
                var f = c(d), g = f.hasClass("open");
                if (!g || g && 27 == b.keyCode) return 27 == b.which && f.find(e).focus(), d.click();
                var h = " li:not(.divider):visible a", i = f.find("[role=menu]" + h + ", [role=listbox]" + h);
                if (i.length) {
                    var j = i.index(i.filter(":focus"));
                    38 == b.keyCode && j > 0 && j--, 40 == b.keyCode && j < i.length - 1 && j++, ~j || (j = 0), 
                    i.eq(j).focus();
                }
            }
        }
    };
    var g = a.fn.dropdown;
    a.fn.dropdown = function(b) {
        return this.each(function() {
            var c = a(this), d = c.data("bs.dropdown");
            d || c.data("bs.dropdown", d = new f(this)), "string" == typeof b && d[b].call(c);
        });
    }, a.fn.dropdown.Constructor = f, a.fn.dropdown.noConflict = function() {
        return a.fn.dropdown = g, this;
    }, a(document).on("click.bs.dropdown.data-api", b).on("click.bs.dropdown.data-api", ".dropdown form", function(a) {
        a.stopPropagation();
    }).on("click.bs.dropdown.data-api", e, f.prototype.toggle).on("keydown.bs.dropdown.data-api", e + ", [role=menu], [role=listbox]", f.prototype.keydown);
}(jQuery), function(a) {
    "use strict";
    var b = function(b, c) {
        this.options = c, this.$element = a(b), this.$backdrop = this.isShown = null, this.options.remote && this.$element.find(".modal-content").load(this.options.remote, a.proxy(function() {
            this.$element.trigger("loaded.bs.modal");
        }, this));
    };
    b.DEFAULTS = {
        backdrop: !0,
        keyboard: !0,
        show: !0
    }, b.prototype.toggle = function(a) {
        return this[this.isShown ? "hide" : "show"](a);
    }, b.prototype.show = function(b) {
        var c = this, d = a.Event("show.bs.modal", {
            relatedTarget: b
        });
        this.$element.trigger(d), this.isShown || d.isDefaultPrevented() || (this.isShown = !0, 
        this.escape(), this.$element.on("click.dismiss.bs.modal", '[data-dismiss="modal"]', a.proxy(this.hide, this)), 
        this.backdrop(function() {
            var d = a.support.transition && c.$element.hasClass("fade");
            c.$element.parent().length || c.$element.appendTo(document.body), c.$element.show().scrollTop(0), 
            d && c.$element[0].offsetWidth, c.$element.addClass("in").attr("aria-hidden", !1), 
            c.enforceFocus();
            var e = a.Event("shown.bs.modal", {
                relatedTarget: b
            });
            d ? c.$element.find(".modal-dialog").one(a.support.transition.end, function() {
                c.$element.focus().trigger(e);
            }).emulateTransitionEnd(300) : c.$element.focus().trigger(e);
        }));
    }, b.prototype.hide = function(b) {
        b && b.preventDefault(), b = a.Event("hide.bs.modal"), this.$element.trigger(b), 
        this.isShown && !b.isDefaultPrevented() && (this.isShown = !1, this.escape(), a(document).off("focusin.bs.modal"), 
        this.$element.removeClass("in").attr("aria-hidden", !0).off("click.dismiss.bs.modal"), 
        a.support.transition && this.$element.hasClass("fade") ? this.$element.one(a.support.transition.end, a.proxy(this.hideModal, this)).emulateTransitionEnd(300) : this.hideModal());
    }, b.prototype.enforceFocus = function() {
        a(document).off("focusin.bs.modal").on("focusin.bs.modal", a.proxy(function(a) {
            this.$element[0] === a.target || this.$element.has(a.target).length || this.$element.focus();
        }, this));
    }, b.prototype.escape = function() {
        this.isShown && this.options.keyboard ? this.$element.on("keyup.dismiss.bs.modal", a.proxy(function(a) {
            27 == a.which && this.hide();
        }, this)) : this.isShown || this.$element.off("keyup.dismiss.bs.modal");
    }, b.prototype.hideModal = function() {
        var a = this;
        this.$element.hide(), this.backdrop(function() {
            a.removeBackdrop(), a.$element.trigger("hidden.bs.modal");
        });
    }, b.prototype.removeBackdrop = function() {
        this.$backdrop && this.$backdrop.remove(), this.$backdrop = null;
    }, b.prototype.backdrop = function(b) {
        var c = this.$element.hasClass("fade") ? "fade" : "";
        if (this.isShown && this.options.backdrop) {
            var d = a.support.transition && c;
            if (this.$backdrop = a('<div class="modal-backdrop ' + c + '" />').appendTo(document.body), 
            this.$element.on("click.dismiss.bs.modal", a.proxy(function(a) {
                a.target === a.currentTarget && ("static" == this.options.backdrop ? this.$element[0].focus.call(this.$element[0]) : this.hide.call(this));
            }, this)), d && this.$backdrop[0].offsetWidth, this.$backdrop.addClass("in"), !b) return;
            d ? this.$backdrop.one(a.support.transition.end, b).emulateTransitionEnd(150) : b();
        } else !this.isShown && this.$backdrop ? (this.$backdrop.removeClass("in"), a.support.transition && this.$element.hasClass("fade") ? this.$backdrop.one(a.support.transition.end, b).emulateTransitionEnd(150) : b()) : b && b();
    };
    var c = a.fn.modal;
    a.fn.modal = function(c, d) {
        return this.each(function() {
            var e = a(this), f = e.data("bs.modal"), g = a.extend({}, b.DEFAULTS, e.data(), "object" == typeof c && c);
            f || e.data("bs.modal", f = new b(this, g)), "string" == typeof c ? f[c](d) : g.show && f.show(d);
        });
    }, a.fn.modal.Constructor = b, a.fn.modal.noConflict = function() {
        return a.fn.modal = c, this;
    }, a(document).on("click.bs.modal.data-api", '[data-toggle="modal"]', function(b) {
        var c = a(this), d = c.attr("href"), e = a(c.attr("data-target") || d && d.replace(/.*(?=#[^\s]+$)/, "")), f = e.data("bs.modal") ? "toggle" : a.extend({
            remote: !/#/.test(d) && d
        }, e.data(), c.data());
        c.is("a") && b.preventDefault(), e.modal(f, this).one("hide", function() {
            c.is(":visible") && c.focus();
        });
    }), a(document).on("show.bs.modal", ".modal", function() {
        a(document.body).addClass("modal-open");
    }).on("hidden.bs.modal", ".modal", function() {
        a(document.body).removeClass("modal-open");
    });
}(jQuery), function(a) {
    "use strict";
    var b = function(a, b) {
        this.type = this.options = this.enabled = this.timeout = this.hoverState = this.$element = null, 
        this.init("tooltip", a, b);
    };
    b.DEFAULTS = {
        animation: !0,
        placement: "top",
        selector: !1,
        template: '<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',
        trigger: "hover focus",
        title: "",
        delay: 0,
        html: !1,
        container: !1
    }, b.prototype.init = function(b, c, d) {
        this.enabled = !0, this.type = b, this.$element = a(c), this.options = this.getOptions(d);
        for (var e = this.options.trigger.split(" "), f = e.length; f--; ) {
            var g = e[f];
            if ("click" == g) this.$element.on("click." + this.type, this.options.selector, a.proxy(this.toggle, this)); else if ("manual" != g) {
                var h = "hover" == g ? "mouseenter" : "focusin", i = "hover" == g ? "mouseleave" : "focusout";
                this.$element.on(h + "." + this.type, this.options.selector, a.proxy(this.enter, this)), 
                this.$element.on(i + "." + this.type, this.options.selector, a.proxy(this.leave, this));
            }
        }
        this.options.selector ? this._options = a.extend({}, this.options, {
            trigger: "manual",
            selector: ""
        }) : this.fixTitle();
    }, b.prototype.getDefaults = function() {
        return b.DEFAULTS;
    }, b.prototype.getOptions = function(b) {
        return (b = a.extend({}, this.getDefaults(), this.$element.data(), b)).delay && "number" == typeof b.delay && (b.delay = {
            show: b.delay,
            hide: b.delay
        }), b;
    }, b.prototype.getDelegateOptions = function() {
        var b = {}, c = this.getDefaults();
        return this._options && a.each(this._options, function(a, d) {
            c[a] != d && (b[a] = d);
        }), b;
    }, b.prototype.enter = function(b) {
        var c = b instanceof this.constructor ? b : a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs." + this.type);
        return clearTimeout(c.timeout), c.hoverState = "in", c.options.delay && c.options.delay.show ? void (c.timeout = setTimeout(function() {
            "in" == c.hoverState && c.show();
        }, c.options.delay.show)) : c.show();
    }, b.prototype.leave = function(b) {
        var c = b instanceof this.constructor ? b : a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs." + this.type);
        return clearTimeout(c.timeout), c.hoverState = "out", c.options.delay && c.options.delay.hide ? void (c.timeout = setTimeout(function() {
            "out" == c.hoverState && c.hide();
        }, c.options.delay.hide)) : c.hide();
    }, b.prototype.show = function() {
        var b = a.Event("show.bs." + this.type);
        if (this.hasContent() && this.enabled) {
            if (this.$element.trigger(b), b.isDefaultPrevented()) return;
            var c = this, d = this.tip();
            this.setContent(), this.options.animation && d.addClass("fade");
            var e = "function" == typeof this.options.placement ? this.options.placement.call(this, d[0], this.$element[0]) : this.options.placement, f = /\s?auto?\s?/i, g = f.test(e);
            g && (e = e.replace(f, "") || "top"), d.detach().css({
                top: 0,
                left: 0,
                display: "block"
            }).addClass(e), this.options.container ? d.appendTo(this.options.container) : d.insertAfter(this.$element);
            var h = this.getPosition(), i = d[0].offsetWidth, j = d[0].offsetHeight;
            if (g) {
                var k = this.$element.parent(), l = e, m = document.documentElement.scrollTop || document.body.scrollTop, n = "body" == this.options.container ? window.innerWidth : k.outerWidth(), o = "body" == this.options.container ? window.innerHeight : k.outerHeight(), p = "body" == this.options.container ? 0 : k.offset().left;
                e = "bottom" == e && h.top + h.height + j - m > o ? "top" : "top" == e && h.top - m - j < 0 ? "bottom" : "right" == e && h.right + i > n ? "left" : "left" == e && h.left - i < p ? "right" : e, 
                d.removeClass(l).addClass(e);
            }
            var q = this.getCalculatedOffset(e, h, i, j);
            this.applyPlacement(q, e), this.hoverState = null;
            var r = function() {
                c.$element.trigger("shown.bs." + c.type);
            };
            a.support.transition && this.$tip.hasClass("fade") ? d.one(a.support.transition.end, r).emulateTransitionEnd(150) : r();
        }
    }, b.prototype.applyPlacement = function(b, c) {
        var d, e = this.tip(), f = e[0].offsetWidth, g = e[0].offsetHeight, h = parseInt(e.css("margin-top"), 10), i = parseInt(e.css("margin-left"), 10);
        isNaN(h) && (h = 0), isNaN(i) && (i = 0), b.top = b.top + h, b.left = b.left + i, 
        a.offset.setOffset(e[0], a.extend({
            using: function(a) {
                e.css({
                    top: Math.round(a.top),
                    left: Math.round(a.left)
                });
            }
        }, b), 0), e.addClass("in");
        var j = e[0].offsetWidth, k = e[0].offsetHeight;
        if ("top" == c && k != g && (d = !0, b.top = b.top + g - k), /bottom|top/.test(c)) {
            var l = 0;
            b.left < 0 && (l = -2 * b.left, b.left = 0, e.offset(b), j = e[0].offsetWidth, k = e[0].offsetHeight), 
            this.replaceArrow(l - f + j, j, "left");
        } else this.replaceArrow(k - g, k, "top");
        d && e.offset(b);
    }, b.prototype.replaceArrow = function(a, b, c) {
        this.arrow().css(c, a ? 50 * (1 - a / b) + "%" : "");
    }, b.prototype.setContent = function() {
        var a = this.tip(), b = this.getTitle();
        a.find(".tooltip-inner")[this.options.html ? "html" : "text"](b), a.removeClass("fade in top bottom left right");
    }, b.prototype.hide = function() {
        function b() {
            "in" != c.hoverState && d.detach(), c.$element.trigger("hidden.bs." + c.type);
        }
        var c = this, d = this.tip(), e = a.Event("hide.bs." + this.type);
        return this.$element.trigger(e), e.isDefaultPrevented() ? void 0 : (d.removeClass("in"), 
        a.support.transition && this.$tip.hasClass("fade") ? d.one(a.support.transition.end, b).emulateTransitionEnd(150) : b(), 
        this.hoverState = null, this);
    }, b.prototype.fixTitle = function() {
        var a = this.$element;
        (a.attr("title") || "string" != typeof a.attr("data-original-title")) && a.attr("data-original-title", a.attr("title") || "").attr("title", "");
    }, b.prototype.hasContent = function() {
        return this.getTitle();
    }, b.prototype.getPosition = function() {
        var b = this.$element[0];
        return a.extend({}, "function" == typeof b.getBoundingClientRect ? b.getBoundingClientRect() : {
            width: b.offsetWidth,
            height: b.offsetHeight
        }, this.$element.offset());
    }, b.prototype.getCalculatedOffset = function(a, b, c, d) {
        return "bottom" == a ? {
            top: b.top + b.height,
            left: b.left + b.width / 2 - c / 2
        } : "top" == a ? {
            top: b.top - d,
            left: b.left + b.width / 2 - c / 2
        } : "left" == a ? {
            top: b.top + b.height / 2 - d / 2,
            left: b.left - c
        } : {
            top: b.top + b.height / 2 - d / 2,
            left: b.left + b.width
        };
    }, b.prototype.getTitle = function() {
        var b = this.$element, c = this.options;
        return b.attr("data-original-title") || ("function" == typeof c.title ? c.title.call(b[0]) : c.title);
    }, b.prototype.tip = function() {
        return this.$tip = this.$tip || a(this.options.template);
    }, b.prototype.arrow = function() {
        return this.$arrow = this.$arrow || this.tip().find(".tooltip-arrow");
    }, b.prototype.validate = function() {
        this.$element[0].parentNode || (this.hide(), this.$element = null, this.options = null);
    }, b.prototype.enable = function() {
        this.enabled = !0;
    }, b.prototype.disable = function() {
        this.enabled = !1;
    }, b.prototype.toggleEnabled = function() {
        this.enabled = !this.enabled;
    }, b.prototype.toggle = function(b) {
        var c = b ? a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs." + this.type) : this;
        c.tip().hasClass("in") ? c.leave(c) : c.enter(c);
    }, b.prototype.destroy = function() {
        clearTimeout(this.timeout), this.hide().$element.off("." + this.type).removeData("bs." + this.type);
    };
    var c = a.fn.tooltip;
    a.fn.tooltip = function(c) {
        return this.each(function() {
            var d = a(this), e = d.data("bs.tooltip"), f = "object" == typeof c && c;
            (e || "destroy" != c) && (e || d.data("bs.tooltip", e = new b(this, f)), "string" == typeof c && e[c]());
        });
    }, a.fn.tooltip.Constructor = b, a.fn.tooltip.noConflict = function() {
        return a.fn.tooltip = c, this;
    };
}(jQuery), function(a) {
    "use strict";
    var b = function(a, b) {
        this.init("popover", a, b);
    };
    if (!a.fn.tooltip) throw new Error("Popover requires tooltip.js");
    b.DEFAULTS = a.extend({}, a.fn.tooltip.Constructor.DEFAULTS, {
        placement: "right",
        trigger: "click",
        content: "",
        template: '<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'
    }), (b.prototype = a.extend({}, a.fn.tooltip.Constructor.prototype)).constructor = b, 
    b.prototype.getDefaults = function() {
        return b.DEFAULTS;
    }, b.prototype.setContent = function() {
        var a = this.tip(), b = this.getTitle(), c = this.getContent();
        a.find(".popover-title")[this.options.html ? "html" : "text"](b), a.find(".popover-content")[this.options.html ? "string" == typeof c ? "html" : "append" : "text"](c), 
        a.removeClass("fade top bottom left right in"), a.find(".popover-title").html() || a.find(".popover-title").hide();
    }, b.prototype.hasContent = function() {
        return this.getTitle() || this.getContent();
    }, b.prototype.getContent = function() {
        var a = this.$element, b = this.options;
        return a.attr("data-content") || ("function" == typeof b.content ? b.content.call(a[0]) : b.content);
    }, b.prototype.arrow = function() {
        return this.$arrow = this.$arrow || this.tip().find(".arrow");
    }, b.prototype.tip = function() {
        return this.$tip || (this.$tip = a(this.options.template)), this.$tip;
    };
    var c = a.fn.popover;
    a.fn.popover = function(c) {
        return this.each(function() {
            var d = a(this), e = d.data("bs.popover"), f = "object" == typeof c && c;
            (e || "destroy" != c) && (e || d.data("bs.popover", e = new b(this, f)), "string" == typeof c && e[c]());
        });
    }, a.fn.popover.Constructor = b, a.fn.popover.noConflict = function() {
        return a.fn.popover = c, this;
    };
}(jQuery), function(a) {
    "use strict";
    function b(c, d) {
        var e, f = a.proxy(this.process, this);
        this.$element = a(a(c).is("body") ? window : c), this.$body = a("body"), this.$scrollElement = this.$element.on("scroll.bs.scroll-spy.data-api", f), 
        this.options = a.extend({}, b.DEFAULTS, d), this.selector = (this.options.target || (e = a(c).attr("href")) && e.replace(/.*(?=#[^\s]+$)/, "") || "") + " .nav li > a", 
        this.offsets = a([]), this.targets = a([]), this.activeTarget = null, this.refresh(), 
        this.process();
    }
    b.DEFAULTS = {
        offset: 10
    }, b.prototype.refresh = function() {
        var b = this.$element[0] == window ? "offset" : "position";
        this.offsets = a([]), this.targets = a([]);
        var c = this;
        this.$body.find(this.selector).map(function() {
            var d = a(this), e = d.data("target") || d.attr("href"), f = /^#./.test(e) && a(e);
            return f && f.length && f.is(":visible") && [ [ f[b]().top + (!a.isWindow(c.$scrollElement.get(0)) && c.$scrollElement.scrollTop()), e ] ] || null;
        }).sort(function(a, b) {
            return a[0] - b[0];
        }).each(function() {
            c.offsets.push(this[0]), c.targets.push(this[1]);
        });
    }, b.prototype.process = function() {
        var a, b = this.$scrollElement.scrollTop() + this.options.offset, d = (this.$scrollElement[0].scrollHeight || this.$body[0].scrollHeight) - this.$scrollElement.height(), e = this.offsets, f = this.targets, g = this.activeTarget;
        if (b >= d) return g != (a = f.last()[0]) && this.activate(a);
        if (g && b <= e[0]) return g != (a = f[0]) && this.activate(a);
        for (a = e.length; a--; ) g != f[a] && b >= e[a] && (!e[a + 1] || b <= e[a + 1]) && this.activate(f[a]);
    }, b.prototype.activate = function(b) {
        this.activeTarget = b, a(this.selector).parentsUntil(this.options.target, ".active").removeClass("active");
        var c = this.selector + '[data-target="' + b + '"],' + this.selector + '[href="' + b + '"]', d = a(c).parents("li").addClass("active");
        d.parent(".dropdown-menu").length && (d = d.closest("li.dropdown").addClass("active")), 
        d.trigger("activate.bs.scrollspy");
    };
    var c = a.fn.scrollspy;
    a.fn.scrollspy = function(c) {
        return this.each(function() {
            var d = a(this), e = d.data("bs.scrollspy"), f = "object" == typeof c && c;
            e || d.data("bs.scrollspy", e = new b(this, f)), "string" == typeof c && e[c]();
        });
    }, a.fn.scrollspy.Constructor = b, a.fn.scrollspy.noConflict = function() {
        return a.fn.scrollspy = c, this;
    }, a(window).on("load", function() {
        a('[data-spy="scroll"]').each(function() {
            var b = a(this);
            b.scrollspy(b.data());
        });
    });
}(jQuery), function(a) {
    "use strict";
    var b = function(b) {
        this.element = a(b);
    };
    b.prototype.show = function() {
        var b = this.element, c = b.closest("ul:not(.dropdown-menu)"), d = b.data("target");
        if (d || (d = b.attr("href"), d = d && d.replace(/.*(?=#[^\s]*$)/, "")), !b.parent("li").hasClass("active")) {
            var e = c.find(".active:last a")[0], f = a.Event("show.bs.tab", {
                relatedTarget: e
            });
            if (b.trigger(f), !f.isDefaultPrevented()) {
                var g = a(d);
                this.activate(b.parent("li"), c), this.activate(g, g.parent(), function() {
                    b.trigger({
                        type: "shown.bs.tab",
                        relatedTarget: e
                    });
                });
            }
        }
    }, b.prototype.activate = function(b, c, d) {
        function e() {
            f.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"), 
            b.addClass("active"), g ? (b[0].offsetWidth, b.addClass("in")) : b.removeClass("fade"), 
            b.parent(".dropdown-menu") && b.closest("li.dropdown").addClass("active"), d && d();
        }
        var f = c.find("> .active"), g = d && a.support.transition && f.hasClass("fade");
        g ? f.one(a.support.transition.end, e).emulateTransitionEnd(150) : e(), f.removeClass("in");
    };
    var c = a.fn.tab;
    a.fn.tab = function(c) {
        return this.each(function() {
            var d = a(this), e = d.data("bs.tab");
            e || d.data("bs.tab", e = new b(this)), "string" == typeof c && e[c]();
        });
    }, a.fn.tab.Constructor = b, a.fn.tab.noConflict = function() {
        return a.fn.tab = c, this;
    }, a(document).on("click.bs.tab.data-api", '[data-toggle="tab"], [data-toggle="pill"]', function(b) {
        b.preventDefault(), a(this).tab("show");
    });
}(jQuery), function(a) {
    "use strict";
    var b = function(c, d) {
        this.options = a.extend({}, b.DEFAULTS, d), this.$window = a(window).on("scroll.bs.affix.data-api", a.proxy(this.checkPosition, this)).on("click.bs.affix.data-api", a.proxy(this.checkPositionWithEventLoop, this)), 
        this.$element = a(c), this.affixed = this.unpin = this.pinnedOffset = null, this.checkPosition();
    };
    b.RESET = "affix affix-top affix-bottom", b.DEFAULTS = {
        offset: 0
    }, b.prototype.getPinnedOffset = function() {
        if (this.pinnedOffset) return this.pinnedOffset;
        this.$element.removeClass(b.RESET).addClass("affix");
        var a = this.$window.scrollTop(), c = this.$element.offset();
        return this.pinnedOffset = c.top - a;
    }, b.prototype.checkPositionWithEventLoop = function() {
        setTimeout(a.proxy(this.checkPosition, this), 1);
    }, b.prototype.checkPosition = function() {
        if (this.$element.is(":visible")) {
            var c = a(document).height(), d = this.$window.scrollTop(), e = this.$element.offset(), f = this.options.offset, g = f.top, h = f.bottom;
            "top" == this.affixed && (e.top += d), "object" != typeof f && (h = g = f), "function" == typeof g && (g = f.top(this.$element)), 
            "function" == typeof h && (h = f.bottom(this.$element));
            var i = !(null != this.unpin && d + this.unpin <= e.top) && (null != h && e.top + this.$element.height() >= c - h ? "bottom" : null != g && g >= d && "top");
            if (this.affixed !== i) {
                this.unpin && this.$element.css("top", "");
                var j = "affix" + (i ? "-" + i : ""), k = a.Event(j + ".bs.affix");
                this.$element.trigger(k), k.isDefaultPrevented() || (this.affixed = i, this.unpin = "bottom" == i ? this.getPinnedOffset() : null, 
                this.$element.removeClass(b.RESET).addClass(j).trigger(a.Event(j.replace("affix", "affixed"))), 
                "bottom" == i && this.$element.offset({
                    top: c - h - this.$element.height()
                }));
            }
        }
    };
    var c = a.fn.affix;
    a.fn.affix = function(c) {
        return this.each(function() {
            var d = a(this), e = d.data("bs.affix"), f = "object" == typeof c && c;
            e || d.data("bs.affix", e = new b(this, f)), "string" == typeof c && e[c]();
        });
    }, a.fn.affix.Constructor = b, a.fn.affix.noConflict = function() {
        return a.fn.affix = c, this;
    }, a(window).on("load", function() {
        a('[data-spy="affix"]').each(function() {
            var b = a(this), c = b.data();
            c.offset = c.offset || {}, c.offsetBottom && (c.offset.bottom = c.offsetBottom), 
            c.offsetTop && (c.offset.top = c.offsetTop), b.affix(c);
        });
    });
}(jQuery), angular.module("ngProgress.provider", [ "ngProgress.directive" ]).service("ngProgress", function() {
    "use strict";
    return [ "$document", "$window", "$compile", "$rootScope", "$timeout", function($document, $window, $compile, $rootScope, $timeout) {
        this.autoStyle = !0, this.count = 0, this.height = "3px", this.$scope = $rootScope.$new(), 
        this.color = "#00698d", this.parent = $document.find("body")[0], this.count = 0, 
        this.progressbarEl = $compile("<ng-progress></ng-progress>")(this.$scope), this.parent.appendChild(this.progressbarEl[0]), 
        this.$scope.count = this.count, void 0 !== this.height && this.progressbarEl.eq(0).children().css("height", this.height), 
        void 0 !== this.color && (this.progressbarEl.eq(0).children().css("background-color", this.color), 
        this.progressbarEl.eq(0).children().css("color", this.color)), this.intervalCounterId = 0, 
        this.start = function() {
            this.show();
            var self = this;
            clearInterval(this.intervalCounterId), this.intervalCounterId = setInterval(function() {
                isNaN(self.count) ? (clearInterval(self.intervalCounterId), self.count = 0, self.hide()) : (self.remaining = 100 - self.count, 
                self.count = self.count + .15 * Math.pow(1 - Math.sqrt(self.remaining), 2), self.updateCount(self.count));
            }, 200);
        }, this.updateCount = function(new_count) {
            this.$scope.count = new_count, this.$scope.$$phase || this.$scope.$apply();
        }, this.setHeight = function(new_height) {
            return void 0 !== new_height && (this.height = new_height, this.$scope.height = this.height, 
            this.$scope.$$phase || this.$scope.$apply()), this.height;
        }, this.setColor = function(new_color) {
            return void 0 !== new_color && (this.color = new_color, this.$scope.color = this.color, 
            this.$scope.$$phase || this.$scope.$apply()), this.color;
        }, this.hide = function() {
            this.progressbarEl.children().css("opacity", "0");
            var self = this;
            self.animate(function() {
                self.progressbarEl.children().css("width", "0%"), self.animate(function() {
                    self.show();
                }, 500);
            }, 500);
        }, this.show = function() {
            var self = this;
            self.animate(function() {
                self.progressbarEl.children().css("opacity", "1");
            }, 100);
        }, this.animate = function(fn, time) {
            void 0 !== this.animation && $timeout.cancel(this.animation), this.animation = $timeout(fn, time);
        }, this.status = function() {
            return this.count;
        }, this.stop = function() {
            clearInterval(this.intervalCounterId);
        }, this.set = function(new_count) {
            return this.show(), this.updateCount(new_count), this.count = new_count, clearInterval(this.intervalCounterId), 
            this.count;
        }, this.css = function(args) {
            return this.progressbarEl.children().css(args);
        }, this.reset = function() {
            return clearInterval(this.intervalCounterId), this.count = 0, this.updateCount(this.count), 
            0;
        }, this.complete = function() {
            this.count = 100, this.updateCount(this.count);
            var self = this;
            return clearInterval(this.intervalCounterId), $timeout(function() {
                self.hide(), $timeout(function() {
                    self.count = 0, self.updateCount(self.count);
                }, 500);
            }, 1e3), this.count;
        }, this.setParent = function(newParent) {
            if (null === newParent || void 0 === newParent) throw new Error("Provide a valid parent of type HTMLElement");
            null !== this.parent && void 0 !== this.parent && this.parent.removeChild(this.progressbarEl[0]), 
            this.parent = newParent, this.parent.appendChild(this.progressbarEl[0]);
        }, this.getDomElement = function() {
            return this.progressbarEl;
        }, this.setAbsolute = function() {
            this.progressbarEl.css("position", "absolute");
        };
    } ];
}).factory("ngProgressFactory", [ "$injector", "ngProgress", function($injector, ngProgress) {
    return {
        createInstance: function() {
            return $injector.instantiate(ngProgress);
        }
    };
} ]), angular.module("ngProgress.directive", []).directive("ngProgress", [ "$window", "$rootScope", function($window, $rootScope) {
    return {
        replace: !0,
        restrict: "E",
        link: function($scope, $element, $attrs, $controller) {
            $scope.$watch("count", function(newVal) {
                void 0 === newVal && null === newVal || ($scope.counter = newVal, $element.eq(0).children().css("width", newVal + "%"));
            }), $scope.$watch("color", function(newVal) {
                void 0 === newVal && null === newVal || ($scope.color = newVal, $element.eq(0).children().css("background-color", newVal), 
                $element.eq(0).children().css("color", newVal));
            }), $scope.$watch("height", function(newVal) {
                void 0 === newVal && null === newVal || ($scope.height = newVal, $element.eq(0).children().css("height", newVal));
            });
        },
        template: '<div id="ngProgress-container"><div id="ngProgress"></div></div>'
    };
} ]), angular.module("ngProgress", [ "ngProgress.directive", "ngProgress.provider" ]), 
function(mod) {
    window.CodeMirror = mod();
}(function() {
    "use strict";
    function CodeMirror(place, options) {
        if (!(this instanceof CodeMirror)) return new CodeMirror(place, options);
        this.options = options = options ? copyObj(options) : {}, copyObj(defaults, options, !1), 
        setGuttersForLineNumbers(options);
        var doc = options.value;
        "string" == typeof doc && (doc = new Doc(doc, options.mode, null, options.lineSeparator)), 
        this.doc = doc;
        var input = new CodeMirror.inputStyles[options.inputStyle](this), display = this.display = new Display(place, doc, input);
        display.wrapper.CodeMirror = this, updateGutters(this), themeChanged(this), options.lineWrapping && (this.display.wrapper.className += " CodeMirror-wrap"), 
        options.autofocus && !mobile && display.input.focus(), initScrollbars(this), this.state = {
            keyMaps: [],
            overlays: [],
            modeGen: 0,
            overwrite: !1,
            delayingBlurEvent: !1,
            focused: !1,
            suppressEdits: !1,
            pasteIncoming: !1,
            cutIncoming: !1,
            selectingText: !1,
            draggingText: !1,
            highlight: new Delayed(),
            keySeq: null,
            specialChars: null
        };
        var cm = this;
        ie && ie_version < 11 && setTimeout(function() {
            cm.display.input.reset(!0);
        }, 20), registerEventHandlers(this), ensureGlobalHandlers(), startOperation(this), 
        this.curOp.forceUpdate = !0, attachDoc(this, doc), options.autofocus && !mobile || cm.hasFocus() ? setTimeout(bind(onFocus, this), 20) : onBlur(this);
        for (var opt in optionHandlers) optionHandlers.hasOwnProperty(opt) && optionHandlers[opt](this, options[opt], Init);
        maybeUpdateLineNumberWidth(this), options.finishInit && options.finishInit(this);
        for (var i = 0; i < initHooks.length; ++i) initHooks[i](this);
        endOperation(this), webkit && options.lineWrapping && "optimizelegibility" == getComputedStyle(display.lineDiv).textRendering && (display.lineDiv.style.textRendering = "auto");
    }
    function Display(place, doc, input) {
        var d = this;
        this.input = input, d.scrollbarFiller = elt("div", null, "CodeMirror-scrollbar-filler"), 
        d.scrollbarFiller.setAttribute("cm-not-content", "true"), d.gutterFiller = elt("div", null, "CodeMirror-gutter-filler"), 
        d.gutterFiller.setAttribute("cm-not-content", "true"), d.lineDiv = elt("div", null, "CodeMirror-code"), 
        d.selectionDiv = elt("div", null, null, "position: relative; z-index: 1"), d.cursorDiv = elt("div", null, "CodeMirror-cursors"), 
        d.measure = elt("div", null, "CodeMirror-measure"), d.lineMeasure = elt("div", null, "CodeMirror-measure"), 
        d.lineSpace = elt("div", [ d.measure, d.lineMeasure, d.selectionDiv, d.cursorDiv, d.lineDiv ], null, "position: relative; outline: none"), 
        d.mover = elt("div", [ elt("div", [ d.lineSpace ], "CodeMirror-lines") ], null, "position: relative"), 
        d.sizer = elt("div", [ d.mover ], "CodeMirror-sizer"), d.sizerWidth = null, d.heightForcer = elt("div", null, null, "position: absolute; height: " + scrollerGap + "px; width: 1px;"), 
        d.gutters = elt("div", null, "CodeMirror-gutters"), d.lineGutter = null, d.scroller = elt("div", [ d.sizer, d.heightForcer, d.gutters ], "CodeMirror-scroll"), 
        d.scroller.setAttribute("tabIndex", "-1"), d.wrapper = elt("div", [ d.scrollbarFiller, d.gutterFiller, d.scroller ], "CodeMirror"), 
        ie && ie_version < 8 && (d.gutters.style.zIndex = -1, d.scroller.style.paddingRight = 0), 
        webkit || gecko && mobile || (d.scroller.draggable = !0), place && (place.appendChild ? place.appendChild(d.wrapper) : place(d.wrapper)), 
        d.viewFrom = d.viewTo = doc.first, d.reportedViewFrom = d.reportedViewTo = doc.first, 
        d.view = [], d.renderedView = null, d.externalMeasured = null, d.viewOffset = 0, 
        d.lastWrapHeight = d.lastWrapWidth = 0, d.updateLineNumbers = null, d.nativeBarWidth = d.barHeight = d.barWidth = 0, 
        d.scrollbarsClipped = !1, d.lineNumWidth = d.lineNumInnerWidth = d.lineNumChars = null, 
        d.alignWidgets = !1, d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null, 
        d.maxLine = null, d.maxLineLength = 0, d.maxLineChanged = !1, d.wheelDX = d.wheelDY = d.wheelStartX = d.wheelStartY = null, 
        d.shift = !1, d.selForContextMenu = null, d.activeTouch = null, input.init(d);
    }
    function loadMode(cm) {
        cm.doc.mode = CodeMirror.getMode(cm.options, cm.doc.modeOption), resetModeState(cm);
    }
    function resetModeState(cm) {
        cm.doc.iter(function(line) {
            line.stateAfter && (line.stateAfter = null), line.styles && (line.styles = null);
        }), cm.doc.frontier = cm.doc.first, startWorker(cm, 100), cm.state.modeGen++, cm.curOp && regChange(cm);
    }
    function estimateHeight(cm) {
        var th = textHeight(cm.display), wrapping = cm.options.lineWrapping, perLine = wrapping && Math.max(5, cm.display.scroller.clientWidth / charWidth(cm.display) - 3);
        return function(line) {
            if (lineIsHidden(cm.doc, line)) return 0;
            var widgetsHeight = 0;
            if (line.widgets) for (var i = 0; i < line.widgets.length; i++) line.widgets[i].height && (widgetsHeight += line.widgets[i].height);
            return wrapping ? widgetsHeight + (Math.ceil(line.text.length / perLine) || 1) * th : widgetsHeight + th;
        };
    }
    function estimateLineHeights(cm) {
        var doc = cm.doc, est = estimateHeight(cm);
        doc.iter(function(line) {
            var estHeight = est(line);
            estHeight != line.height && updateLineHeight(line, estHeight);
        });
    }
    function themeChanged(cm) {
        cm.display.wrapper.className = cm.display.wrapper.className.replace(/\s*cm-s-\S+/g, "") + cm.options.theme.replace(/(^|\s)\s*/g, " cm-s-"), 
        clearCaches(cm);
    }
    function guttersChanged(cm) {
        updateGutters(cm), regChange(cm), setTimeout(function() {
            alignHorizontally(cm);
        }, 20);
    }
    function updateGutters(cm) {
        var gutters = cm.display.gutters, specs = cm.options.gutters;
        removeChildren(gutters);
        for (var i = 0; i < specs.length; ++i) {
            var gutterClass = specs[i], gElt = gutters.appendChild(elt("div", null, "CodeMirror-gutter " + gutterClass));
            "CodeMirror-linenumbers" == gutterClass && (cm.display.lineGutter = gElt, gElt.style.width = (cm.display.lineNumWidth || 1) + "px");
        }
        gutters.style.display = i ? "" : "none", updateGutterSpace(cm);
    }
    function updateGutterSpace(cm) {
        var width = cm.display.gutters.offsetWidth;
        cm.display.sizer.style.marginLeft = width + "px";
    }
    function lineLength(line) {
        if (0 == line.height) return 0;
        for (var merged, len = line.text.length, cur = line; merged = collapsedSpanAtStart(cur); ) cur = (found = merged.find(0, !0)).from.line, 
        len += found.from.ch - found.to.ch;
        for (cur = line; merged = collapsedSpanAtEnd(cur); ) {
            var found = merged.find(0, !0);
            len -= cur.text.length - found.from.ch, len += (cur = found.to.line).text.length - found.to.ch;
        }
        return len;
    }
    function findMaxLine(cm) {
        var d = cm.display, doc = cm.doc;
        d.maxLine = getLine(doc, doc.first), d.maxLineLength = lineLength(d.maxLine), d.maxLineChanged = !0, 
        doc.iter(function(line) {
            var len = lineLength(line);
            len > d.maxLineLength && (d.maxLineLength = len, d.maxLine = line);
        });
    }
    function setGuttersForLineNumbers(options) {
        var found = indexOf(options.gutters, "CodeMirror-linenumbers");
        -1 == found && options.lineNumbers ? options.gutters = options.gutters.concat([ "CodeMirror-linenumbers" ]) : found > -1 && !options.lineNumbers && (options.gutters = options.gutters.slice(0), 
        options.gutters.splice(found, 1));
    }
    function measureForScrollbars(cm) {
        var d = cm.display, gutterW = d.gutters.offsetWidth, docH = Math.round(cm.doc.height + paddingVert(cm.display));
        return {
            clientHeight: d.scroller.clientHeight,
            viewHeight: d.wrapper.clientHeight,
            scrollWidth: d.scroller.scrollWidth,
            clientWidth: d.scroller.clientWidth,
            viewWidth: d.wrapper.clientWidth,
            barLeft: cm.options.fixedGutter ? gutterW : 0,
            docHeight: docH,
            scrollHeight: docH + scrollGap(cm) + d.barHeight,
            nativeBarWidth: d.nativeBarWidth,
            gutterWidth: gutterW
        };
    }
    function NativeScrollbars(place, scroll, cm) {
        this.cm = cm;
        var vert = this.vert = elt("div", [ elt("div", null, null, "min-width: 1px") ], "CodeMirror-vscrollbar"), horiz = this.horiz = elt("div", [ elt("div", null, null, "height: 100%; min-height: 1px") ], "CodeMirror-hscrollbar");
        place(vert), place(horiz), on(vert, "scroll", function() {
            vert.clientHeight && scroll(vert.scrollTop, "vertical");
        }), on(horiz, "scroll", function() {
            horiz.clientWidth && scroll(horiz.scrollLeft, "horizontal");
        }), this.checkedZeroWidth = !1, ie && ie_version < 8 && (this.horiz.style.minHeight = this.vert.style.minWidth = "18px");
    }
    function NullScrollbars() {}
    function initScrollbars(cm) {
        cm.display.scrollbars && (cm.display.scrollbars.clear(), cm.display.scrollbars.addClass && rmClass(cm.display.wrapper, cm.display.scrollbars.addClass)), 
        cm.display.scrollbars = new CodeMirror.scrollbarModel[cm.options.scrollbarStyle](function(node) {
            cm.display.wrapper.insertBefore(node, cm.display.scrollbarFiller), on(node, "mousedown", function() {
                cm.state.focused && setTimeout(function() {
                    cm.display.input.focus();
                }, 0);
            }), node.setAttribute("cm-not-content", "true");
        }, function(pos, axis) {
            "horizontal" == axis ? setScrollLeft(cm, pos) : setScrollTop(cm, pos);
        }, cm), cm.display.scrollbars.addClass && addClass(cm.display.wrapper, cm.display.scrollbars.addClass);
    }
    function updateScrollbars(cm, measure) {
        measure || (measure = measureForScrollbars(cm));
        var startWidth = cm.display.barWidth, startHeight = cm.display.barHeight;
        updateScrollbarsInner(cm, measure);
        for (var i = 0; i < 4 && startWidth != cm.display.barWidth || startHeight != cm.display.barHeight; i++) startWidth != cm.display.barWidth && cm.options.lineWrapping && updateHeightsInViewport(cm), 
        updateScrollbarsInner(cm, measureForScrollbars(cm)), startWidth = cm.display.barWidth, 
        startHeight = cm.display.barHeight;
    }
    function updateScrollbarsInner(cm, measure) {
        var d = cm.display, sizes = d.scrollbars.update(measure);
        d.sizer.style.paddingRight = (d.barWidth = sizes.right) + "px", d.sizer.style.paddingBottom = (d.barHeight = sizes.bottom) + "px", 
        d.heightForcer.style.borderBottom = sizes.bottom + "px solid transparent", sizes.right && sizes.bottom ? (d.scrollbarFiller.style.display = "block", 
        d.scrollbarFiller.style.height = sizes.bottom + "px", d.scrollbarFiller.style.width = sizes.right + "px") : d.scrollbarFiller.style.display = "", 
        sizes.bottom && cm.options.coverGutterNextToScrollbar && cm.options.fixedGutter ? (d.gutterFiller.style.display = "block", 
        d.gutterFiller.style.height = sizes.bottom + "px", d.gutterFiller.style.width = measure.gutterWidth + "px") : d.gutterFiller.style.display = "";
    }
    function visibleLines(display, doc, viewport) {
        var top = viewport && null != viewport.top ? Math.max(0, viewport.top) : display.scroller.scrollTop;
        top = Math.floor(top - paddingTop(display));
        var bottom = viewport && null != viewport.bottom ? viewport.bottom : top + display.wrapper.clientHeight, from = lineAtHeight(doc, top), to = lineAtHeight(doc, bottom);
        if (viewport && viewport.ensure) {
            var ensureFrom = viewport.ensure.from.line, ensureTo = viewport.ensure.to.line;
            ensureFrom < from ? (from = ensureFrom, to = lineAtHeight(doc, heightAtLine(getLine(doc, ensureFrom)) + display.wrapper.clientHeight)) : Math.min(ensureTo, doc.lastLine()) >= to && (from = lineAtHeight(doc, heightAtLine(getLine(doc, ensureTo)) - display.wrapper.clientHeight), 
            to = ensureTo);
        }
        return {
            from: from,
            to: Math.max(to, from + 1)
        };
    }
    function alignHorizontally(cm) {
        var display = cm.display, view = display.view;
        if (display.alignWidgets || display.gutters.firstChild && cm.options.fixedGutter) {
            for (var comp = compensateForHScroll(display) - display.scroller.scrollLeft + cm.doc.scrollLeft, gutterW = display.gutters.offsetWidth, left = comp + "px", i = 0; i < view.length; i++) if (!view[i].hidden) {
                cm.options.fixedGutter && view[i].gutter && (view[i].gutter.style.left = left);
                var align = view[i].alignable;
                if (align) for (var j = 0; j < align.length; j++) align[j].style.left = left;
            }
            cm.options.fixedGutter && (display.gutters.style.left = comp + gutterW + "px");
        }
    }
    function maybeUpdateLineNumberWidth(cm) {
        if (!cm.options.lineNumbers) return !1;
        var doc = cm.doc, last = lineNumberFor(cm.options, doc.first + doc.size - 1), display = cm.display;
        if (last.length != display.lineNumChars) {
            var test = display.measure.appendChild(elt("div", [ elt("div", last) ], "CodeMirror-linenumber CodeMirror-gutter-elt")), innerW = test.firstChild.offsetWidth, padding = test.offsetWidth - innerW;
            return display.lineGutter.style.width = "", display.lineNumInnerWidth = Math.max(innerW, display.lineGutter.offsetWidth - padding) + 1, 
            display.lineNumWidth = display.lineNumInnerWidth + padding, display.lineNumChars = display.lineNumInnerWidth ? last.length : -1, 
            display.lineGutter.style.width = display.lineNumWidth + "px", updateGutterSpace(cm), 
            !0;
        }
        return !1;
    }
    function lineNumberFor(options, i) {
        return String(options.lineNumberFormatter(i + options.firstLineNumber));
    }
    function compensateForHScroll(display) {
        return display.scroller.getBoundingClientRect().left - display.sizer.getBoundingClientRect().left;
    }
    function DisplayUpdate(cm, viewport, force) {
        var display = cm.display;
        this.viewport = viewport, this.visible = visibleLines(display, cm.doc, viewport), 
        this.editorIsHidden = !display.wrapper.offsetWidth, this.wrapperHeight = display.wrapper.clientHeight, 
        this.wrapperWidth = display.wrapper.clientWidth, this.oldDisplayWidth = displayWidth(cm), 
        this.force = force, this.dims = getDimensions(cm), this.events = [];
    }
    function maybeClipScrollbars(cm) {
        var display = cm.display;
        !display.scrollbarsClipped && display.scroller.offsetWidth && (display.nativeBarWidth = display.scroller.offsetWidth - display.scroller.clientWidth, 
        display.heightForcer.style.height = scrollGap(cm) + "px", display.sizer.style.marginBottom = -display.nativeBarWidth + "px", 
        display.sizer.style.borderRightWidth = scrollGap(cm) + "px", display.scrollbarsClipped = !0);
    }
    function updateDisplayIfNeeded(cm, update) {
        var display = cm.display, doc = cm.doc;
        if (update.editorIsHidden) return resetView(cm), !1;
        if (!update.force && update.visible.from >= display.viewFrom && update.visible.to <= display.viewTo && (null == display.updateLineNumbers || display.updateLineNumbers >= display.viewTo) && display.renderedView == display.view && 0 == countDirtyView(cm)) return !1;
        maybeUpdateLineNumberWidth(cm) && (resetView(cm), update.dims = getDimensions(cm));
        var end = doc.first + doc.size, from = Math.max(update.visible.from - cm.options.viewportMargin, doc.first), to = Math.min(end, update.visible.to + cm.options.viewportMargin);
        display.viewFrom < from && from - display.viewFrom < 20 && (from = Math.max(doc.first, display.viewFrom)), 
        display.viewTo > to && display.viewTo - to < 20 && (to = Math.min(end, display.viewTo)), 
        sawCollapsedSpans && (from = visualLineNo(cm.doc, from), to = visualLineEndNo(cm.doc, to));
        var different = from != display.viewFrom || to != display.viewTo || display.lastWrapHeight != update.wrapperHeight || display.lastWrapWidth != update.wrapperWidth;
        adjustView(cm, from, to), display.viewOffset = heightAtLine(getLine(cm.doc, display.viewFrom)), 
        cm.display.mover.style.top = display.viewOffset + "px";
        var toUpdate = countDirtyView(cm);
        if (!different && 0 == toUpdate && !update.force && display.renderedView == display.view && (null == display.updateLineNumbers || display.updateLineNumbers >= display.viewTo)) return !1;
        var focused = activeElt();
        return toUpdate > 4 && (display.lineDiv.style.display = "none"), patchDisplay(cm, display.updateLineNumbers, update.dims), 
        toUpdate > 4 && (display.lineDiv.style.display = ""), display.renderedView = display.view, 
        focused && activeElt() != focused && focused.offsetHeight && focused.focus(), removeChildren(display.cursorDiv), 
        removeChildren(display.selectionDiv), display.gutters.style.height = display.sizer.style.minHeight = 0, 
        different && (display.lastWrapHeight = update.wrapperHeight, display.lastWrapWidth = update.wrapperWidth, 
        startWorker(cm, 400)), display.updateLineNumbers = null, !0;
    }
    function postUpdateDisplay(cm, update) {
        for (var viewport = update.viewport, first = !0; (first && cm.options.lineWrapping && update.oldDisplayWidth != displayWidth(cm) || (viewport && null != viewport.top && (viewport = {
            top: Math.min(cm.doc.height + paddingVert(cm.display) - displayHeight(cm), viewport.top)
        }), update.visible = visibleLines(cm.display, cm.doc, viewport), !(update.visible.from >= cm.display.viewFrom && update.visible.to <= cm.display.viewTo))) && updateDisplayIfNeeded(cm, update); first = !1) {
            updateHeightsInViewport(cm);
            var barMeasure = measureForScrollbars(cm);
            updateSelection(cm), updateScrollbars(cm, barMeasure), setDocumentHeight(cm, barMeasure);
        }
        update.signal(cm, "update", cm), cm.display.viewFrom == cm.display.reportedViewFrom && cm.display.viewTo == cm.display.reportedViewTo || (update.signal(cm, "viewportChange", cm, cm.display.viewFrom, cm.display.viewTo), 
        cm.display.reportedViewFrom = cm.display.viewFrom, cm.display.reportedViewTo = cm.display.viewTo);
    }
    function updateDisplaySimple(cm, viewport) {
        var update = new DisplayUpdate(cm, viewport);
        if (updateDisplayIfNeeded(cm, update)) {
            updateHeightsInViewport(cm), postUpdateDisplay(cm, update);
            var barMeasure = measureForScrollbars(cm);
            updateSelection(cm), updateScrollbars(cm, barMeasure), setDocumentHeight(cm, barMeasure), 
            update.finish();
        }
    }
    function setDocumentHeight(cm, measure) {
        cm.display.sizer.style.minHeight = measure.docHeight + "px", cm.display.heightForcer.style.top = measure.docHeight + "px", 
        cm.display.gutters.style.height = measure.docHeight + cm.display.barHeight + scrollGap(cm) + "px";
    }
    function updateHeightsInViewport(cm) {
        for (var display = cm.display, prevBottom = display.lineDiv.offsetTop, i = 0; i < display.view.length; i++) {
            var height, cur = display.view[i];
            if (!cur.hidden) {
                if (ie && ie_version < 8) {
                    var bot = cur.node.offsetTop + cur.node.offsetHeight;
                    height = bot - prevBottom, prevBottom = bot;
                } else {
                    var box = cur.node.getBoundingClientRect();
                    height = box.bottom - box.top;
                }
                var diff = cur.line.height - height;
                if (height < 2 && (height = textHeight(display)), (diff > .001 || diff < -.001) && (updateLineHeight(cur.line, height), 
                updateWidgetHeight(cur.line), cur.rest)) for (var j = 0; j < cur.rest.length; j++) updateWidgetHeight(cur.rest[j]);
            }
        }
    }
    function updateWidgetHeight(line) {
        if (line.widgets) for (var i = 0; i < line.widgets.length; ++i) line.widgets[i].height = line.widgets[i].node.parentNode.offsetHeight;
    }
    function getDimensions(cm) {
        for (var d = cm.display, left = {}, width = {}, gutterLeft = d.gutters.clientLeft, n = d.gutters.firstChild, i = 0; n; n = n.nextSibling, 
        ++i) left[cm.options.gutters[i]] = n.offsetLeft + n.clientLeft + gutterLeft, width[cm.options.gutters[i]] = n.clientWidth;
        return {
            fixedPos: compensateForHScroll(d),
            gutterTotalWidth: d.gutters.offsetWidth,
            gutterLeft: left,
            gutterWidth: width,
            wrapperWidth: d.wrapper.clientWidth
        };
    }
    function patchDisplay(cm, updateNumbersFrom, dims) {
        function rm(node) {
            var next = node.nextSibling;
            return webkit && mac && cm.display.currentWheelTarget == node ? node.style.display = "none" : node.parentNode.removeChild(node), 
            next;
        }
        for (var display = cm.display, lineNumbers = cm.options.lineNumbers, container = display.lineDiv, cur = container.firstChild, view = display.view, lineN = display.viewFrom, i = 0; i < view.length; i++) {
            var lineView = view[i];
            if (lineView.hidden) ; else if (lineView.node && lineView.node.parentNode == container) {
                for (;cur != lineView.node; ) cur = rm(cur);
                var updateNumber = lineNumbers && null != updateNumbersFrom && updateNumbersFrom <= lineN && lineView.lineNumber;
                lineView.changes && (indexOf(lineView.changes, "gutter") > -1 && (updateNumber = !1), 
                updateLineForChanges(cm, lineView, lineN, dims)), updateNumber && (removeChildren(lineView.lineNumber), 
                lineView.lineNumber.appendChild(document.createTextNode(lineNumberFor(cm.options, lineN)))), 
                cur = lineView.node.nextSibling;
            } else {
                var node = buildLineElement(cm, lineView, lineN, dims);
                container.insertBefore(node, cur);
            }
            lineN += lineView.size;
        }
        for (;cur; ) cur = rm(cur);
    }
    function updateLineForChanges(cm, lineView, lineN, dims) {
        for (var j = 0; j < lineView.changes.length; j++) {
            var type = lineView.changes[j];
            "text" == type ? updateLineText(cm, lineView) : "gutter" == type ? updateLineGutter(cm, lineView, lineN, dims) : "class" == type ? updateLineClasses(lineView) : "widget" == type && updateLineWidgets(cm, lineView, dims);
        }
        lineView.changes = null;
    }
    function ensureLineWrapped(lineView) {
        return lineView.node == lineView.text && (lineView.node = elt("div", null, null, "position: relative"), 
        lineView.text.parentNode && lineView.text.parentNode.replaceChild(lineView.node, lineView.text), 
        lineView.node.appendChild(lineView.text), ie && ie_version < 8 && (lineView.node.style.zIndex = 2)), 
        lineView.node;
    }
    function updateLineBackground(lineView) {
        var cls = lineView.bgClass ? lineView.bgClass + " " + (lineView.line.bgClass || "") : lineView.line.bgClass;
        if (cls && (cls += " CodeMirror-linebackground"), lineView.background) cls ? lineView.background.className = cls : (lineView.background.parentNode.removeChild(lineView.background), 
        lineView.background = null); else if (cls) {
            var wrap = ensureLineWrapped(lineView);
            lineView.background = wrap.insertBefore(elt("div", null, cls), wrap.firstChild);
        }
    }
    function getLineContent(cm, lineView) {
        var ext = cm.display.externalMeasured;
        return ext && ext.line == lineView.line ? (cm.display.externalMeasured = null, lineView.measure = ext.measure, 
        ext.built) : buildLineContent(cm, lineView);
    }
    function updateLineText(cm, lineView) {
        var cls = lineView.text.className, built = getLineContent(cm, lineView);
        lineView.text == lineView.node && (lineView.node = built.pre), lineView.text.parentNode.replaceChild(built.pre, lineView.text), 
        lineView.text = built.pre, built.bgClass != lineView.bgClass || built.textClass != lineView.textClass ? (lineView.bgClass = built.bgClass, 
        lineView.textClass = built.textClass, updateLineClasses(lineView)) : cls && (lineView.text.className = cls);
    }
    function updateLineClasses(lineView) {
        updateLineBackground(lineView), lineView.line.wrapClass ? ensureLineWrapped(lineView).className = lineView.line.wrapClass : lineView.node != lineView.text && (lineView.node.className = "");
        var textClass = lineView.textClass ? lineView.textClass + " " + (lineView.line.textClass || "") : lineView.line.textClass;
        lineView.text.className = textClass || "";
    }
    function updateLineGutter(cm, lineView, lineN, dims) {
        if (lineView.gutter && (lineView.node.removeChild(lineView.gutter), lineView.gutter = null), 
        lineView.gutterBackground && (lineView.node.removeChild(lineView.gutterBackground), 
        lineView.gutterBackground = null), lineView.line.gutterClass) {
            wrap = ensureLineWrapped(lineView);
            lineView.gutterBackground = elt("div", null, "CodeMirror-gutter-background " + lineView.line.gutterClass, "left: " + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + "px; width: " + dims.gutterTotalWidth + "px"), 
            wrap.insertBefore(lineView.gutterBackground, lineView.text);
        }
        var markers = lineView.line.gutterMarkers;
        if (cm.options.lineNumbers || markers) {
            var wrap = ensureLineWrapped(lineView), gutterWrap = lineView.gutter = elt("div", null, "CodeMirror-gutter-wrapper", "left: " + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + "px");
            if (cm.display.input.setUneditable(gutterWrap), wrap.insertBefore(gutterWrap, lineView.text), 
            lineView.line.gutterClass && (gutterWrap.className += " " + lineView.line.gutterClass), 
            !cm.options.lineNumbers || markers && markers["CodeMirror-linenumbers"] || (lineView.lineNumber = gutterWrap.appendChild(elt("div", lineNumberFor(cm.options, lineN), "CodeMirror-linenumber CodeMirror-gutter-elt", "left: " + dims.gutterLeft["CodeMirror-linenumbers"] + "px; width: " + cm.display.lineNumInnerWidth + "px"))), 
            markers) for (var k = 0; k < cm.options.gutters.length; ++k) {
                var id = cm.options.gutters[k], found = markers.hasOwnProperty(id) && markers[id];
                found && gutterWrap.appendChild(elt("div", [ found ], "CodeMirror-gutter-elt", "left: " + dims.gutterLeft[id] + "px; width: " + dims.gutterWidth[id] + "px"));
            }
        }
    }
    function updateLineWidgets(cm, lineView, dims) {
        lineView.alignable && (lineView.alignable = null);
        for (var node = lineView.node.firstChild; node; node = next) {
            var next = node.nextSibling;
            "CodeMirror-linewidget" == node.className && lineView.node.removeChild(node);
        }
        insertLineWidgets(cm, lineView, dims);
    }
    function buildLineElement(cm, lineView, lineN, dims) {
        var built = getLineContent(cm, lineView);
        return lineView.text = lineView.node = built.pre, built.bgClass && (lineView.bgClass = built.bgClass), 
        built.textClass && (lineView.textClass = built.textClass), updateLineClasses(lineView), 
        updateLineGutter(cm, lineView, lineN, dims), insertLineWidgets(cm, lineView, dims), 
        lineView.node;
    }
    function insertLineWidgets(cm, lineView, dims) {
        if (insertLineWidgetsFor(cm, lineView.line, lineView, dims, !0), lineView.rest) for (var i = 0; i < lineView.rest.length; i++) insertLineWidgetsFor(cm, lineView.rest[i], lineView, dims, !1);
    }
    function insertLineWidgetsFor(cm, line, lineView, dims, allowAbove) {
        if (line.widgets) for (var wrap = ensureLineWrapped(lineView), i = 0, ws = line.widgets; i < ws.length; ++i) {
            var widget = ws[i], node = elt("div", [ widget.node ], "CodeMirror-linewidget");
            widget.handleMouseEvents || node.setAttribute("cm-ignore-events", "true"), positionLineWidget(widget, node, lineView, dims), 
            cm.display.input.setUneditable(node), allowAbove && widget.above ? wrap.insertBefore(node, lineView.gutter || lineView.text) : wrap.appendChild(node), 
            signalLater(widget, "redraw");
        }
    }
    function positionLineWidget(widget, node, lineView, dims) {
        if (widget.noHScroll) {
            (lineView.alignable || (lineView.alignable = [])).push(node);
            var width = dims.wrapperWidth;
            node.style.left = dims.fixedPos + "px", widget.coverGutter || (width -= dims.gutterTotalWidth, 
            node.style.paddingLeft = dims.gutterTotalWidth + "px"), node.style.width = width + "px";
        }
        widget.coverGutter && (node.style.zIndex = 5, node.style.position = "relative", 
        widget.noHScroll || (node.style.marginLeft = -dims.gutterTotalWidth + "px"));
    }
    function copyPos(x) {
        return Pos(x.line, x.ch);
    }
    function maxPos(a, b) {
        return cmp(a, b) < 0 ? b : a;
    }
    function minPos(a, b) {
        return cmp(a, b) < 0 ? a : b;
    }
    function ensureFocus(cm) {
        cm.state.focused || (cm.display.input.focus(), onFocus(cm));
    }
    function applyTextInput(cm, inserted, deleted, sel, origin) {
        var doc = cm.doc;
        cm.display.shift = !1, sel || (sel = doc.sel);
        var paste = cm.state.pasteIncoming || "paste" == origin, textLines = doc.splitLines(inserted), multiPaste = null;
        if (paste && sel.ranges.length > 1) if (lastCopied && lastCopied.text.join("\n") == inserted) {
            if (sel.ranges.length % lastCopied.text.length == 0) {
                multiPaste = [];
                for (i = 0; i < lastCopied.text.length; i++) multiPaste.push(doc.splitLines(lastCopied.text[i]));
            }
        } else textLines.length == sel.ranges.length && (multiPaste = map(textLines, function(l) {
            return [ l ];
        }));
        for (var i = sel.ranges.length - 1; i >= 0; i--) {
            var range = sel.ranges[i], from = range.from(), to = range.to();
            range.empty() && (deleted && deleted > 0 ? from = Pos(from.line, from.ch - deleted) : cm.state.overwrite && !paste ? to = Pos(to.line, Math.min(getLine(doc, to.line).text.length, to.ch + lst(textLines).length)) : lastCopied && lastCopied.lineWise && lastCopied.text.join("\n") == inserted && (from = to = Pos(from.line, 0)));
            var updateInput = cm.curOp.updateInput, changeEvent = {
                from: from,
                to: to,
                text: multiPaste ? multiPaste[i % multiPaste.length] : textLines,
                origin: origin || (paste ? "paste" : cm.state.cutIncoming ? "cut" : "+input")
            };
            makeChange(cm.doc, changeEvent), signalLater(cm, "inputRead", cm, changeEvent);
        }
        inserted && !paste && triggerElectric(cm, inserted), ensureCursorVisible(cm), cm.curOp.updateInput = updateInput, 
        cm.curOp.typing = !0, cm.state.pasteIncoming = cm.state.cutIncoming = !1;
    }
    function handlePaste(e, cm) {
        var pasted = e.clipboardData && e.clipboardData.getData("text/plain");
        if (pasted) return e.preventDefault(), cm.isReadOnly() || cm.options.disableInput || runInOp(cm, function() {
            applyTextInput(cm, pasted, 0, null, "paste");
        }), !0;
    }
    function triggerElectric(cm, inserted) {
        if (cm.options.electricChars && cm.options.smartIndent) for (var sel = cm.doc.sel, i = sel.ranges.length - 1; i >= 0; i--) {
            var range = sel.ranges[i];
            if (!(range.head.ch > 100 || i && sel.ranges[i - 1].head.line == range.head.line)) {
                var mode = cm.getModeAt(range.head), indented = !1;
                if (mode.electricChars) {
                    for (var j = 0; j < mode.electricChars.length; j++) if (inserted.indexOf(mode.electricChars.charAt(j)) > -1) {
                        indented = indentLine(cm, range.head.line, "smart");
                        break;
                    }
                } else mode.electricInput && mode.electricInput.test(getLine(cm.doc, range.head.line).text.slice(0, range.head.ch)) && (indented = indentLine(cm, range.head.line, "smart"));
                indented && signalLater(cm, "electricInput", cm, range.head.line);
            }
        }
    }
    function copyableRanges(cm) {
        for (var text = [], ranges = [], i = 0; i < cm.doc.sel.ranges.length; i++) {
            var line = cm.doc.sel.ranges[i].head.line, lineRange = {
                anchor: Pos(line, 0),
                head: Pos(line + 1, 0)
            };
            ranges.push(lineRange), text.push(cm.getRange(lineRange.anchor, lineRange.head));
        }
        return {
            text: text,
            ranges: ranges
        };
    }
    function disableBrowserMagic(field) {
        field.setAttribute("autocorrect", "off"), field.setAttribute("autocapitalize", "off"), 
        field.setAttribute("spellcheck", "false");
    }
    function TextareaInput(cm) {
        this.cm = cm, this.prevInput = "", this.pollingFast = !1, this.polling = new Delayed(), 
        this.inaccurateSelection = !1, this.hasSelection = !1, this.composing = null;
    }
    function hiddenTextarea() {
        var te = elt("textarea", null, null, "position: absolute; padding: 0; width: 1px; height: 1em; outline: none"), div = elt("div", [ te ], null, "overflow: hidden; position: relative; width: 3px; height: 0px;");
        return webkit ? te.style.width = "1000px" : te.setAttribute("wrap", "off"), ios && (te.style.border = "1px solid black"), 
        disableBrowserMagic(te), div;
    }
    function ContentEditableInput(cm) {
        this.cm = cm, this.lastAnchorNode = this.lastAnchorOffset = this.lastFocusNode = this.lastFocusOffset = null, 
        this.polling = new Delayed(), this.gracePeriod = !1;
    }
    function posToDOM(cm, pos) {
        var view = findViewForLine(cm, pos.line);
        if (!view || view.hidden) return null;
        var line = getLine(cm.doc, pos.line), info = mapFromLineView(view, line, pos.line), order = getOrder(line), side = "left";
        order && (side = getBidiPartAt(order, pos.ch) % 2 ? "right" : "left");
        var result = nodeAndOffsetInLineMap(info.map, pos.ch, side);
        return result.offset = "right" == result.collapse ? result.end : result.start, result;
    }
    function badPos(pos, bad) {
        return bad && (pos.bad = !0), pos;
    }
    function domToPos(cm, node, offset) {
        var lineNode;
        if (node == cm.display.lineDiv) {
            if (!(lineNode = cm.display.lineDiv.childNodes[offset])) return badPos(cm.clipPos(Pos(cm.display.viewTo - 1)), !0);
            node = null, offset = 0;
        } else for (lineNode = node; ;lineNode = lineNode.parentNode) {
            if (!lineNode || lineNode == cm.display.lineDiv) return null;
            if (lineNode.parentNode && lineNode.parentNode == cm.display.lineDiv) break;
        }
        for (var i = 0; i < cm.display.view.length; i++) {
            var lineView = cm.display.view[i];
            if (lineView.node == lineNode) return locateNodeInLineView(lineView, node, offset);
        }
    }
    function locateNodeInLineView(lineView, node, offset) {
        function find(textNode, topNode, offset) {
            for (var i = -1; i < (maps ? maps.length : 0); i++) for (var map = i < 0 ? measure.map : maps[i], j = 0; j < map.length; j += 3) {
                var curNode = map[j + 2];
                if (curNode == textNode || curNode == topNode) {
                    var line = lineNo(i < 0 ? lineView.line : lineView.rest[i]), ch = map[j] + offset;
                    return (offset < 0 || curNode != textNode) && (ch = map[j + (offset ? 1 : 0)]), 
                    Pos(line, ch);
                }
            }
        }
        var wrapper = lineView.text.firstChild, bad = !1;
        if (!node || !contains(wrapper, node)) return badPos(Pos(lineNo(lineView.line), 0), !0);
        if (node == wrapper && (bad = !0, node = wrapper.childNodes[offset], offset = 0, 
        !node)) {
            var line = lineView.rest ? lst(lineView.rest) : lineView.line;
            return badPos(Pos(lineNo(line), line.text.length), bad);
        }
        var textNode = 3 == node.nodeType ? node : null, topNode = node;
        for (textNode || 1 != node.childNodes.length || 3 != node.firstChild.nodeType || (textNode = node.firstChild, 
        offset && (offset = textNode.nodeValue.length)); topNode.parentNode != wrapper; ) topNode = topNode.parentNode;
        var measure = lineView.measure, maps = measure.maps, found = find(textNode, topNode, offset);
        if (found) return badPos(found, bad);
        for (var after = topNode.nextSibling, dist = textNode ? textNode.nodeValue.length - offset : 0; after; after = after.nextSibling) {
            if (found = find(after, after.firstChild, 0)) return badPos(Pos(found.line, found.ch - dist), bad);
            dist += after.textContent.length;
        }
        for (var before = topNode.previousSibling, dist = offset; before; before = before.previousSibling) {
            if (found = find(before, before.firstChild, -1)) return badPos(Pos(found.line, found.ch + dist), bad);
            dist += after.textContent.length;
        }
    }
    function domTextBetween(cm, from, to, fromLine, toLine) {
        function recognizeMarker(id) {
            return function(marker) {
                return marker.id == id;
            };
        }
        function walk(node) {
            if (1 == node.nodeType) {
                var cmText = node.getAttribute("cm-text");
                if (null != cmText) return "" == cmText && (cmText = node.textContent.replace(/\u200b/g, "")), 
                void (text += cmText);
                var range, markerID = node.getAttribute("cm-marker");
                if (markerID) {
                    var found = cm.findMarks(Pos(fromLine, 0), Pos(toLine + 1, 0), recognizeMarker(+markerID));
                    return void (found.length && (range = found[0].find()) && (text += getBetween(cm.doc, range.from, range.to).join(lineSep)));
                }
                if ("false" == node.getAttribute("contenteditable")) return;
                for (var i = 0; i < node.childNodes.length; i++) walk(node.childNodes[i]);
                /^(pre|div|p)$/i.test(node.nodeName) && (closing = !0);
            } else if (3 == node.nodeType) {
                var val = node.nodeValue;
                if (!val) return;
                closing && (text += lineSep, closing = !1), text += val;
            }
        }
        for (var text = "", closing = !1, lineSep = cm.doc.lineSeparator(); walk(from), 
        from != to; ) from = from.nextSibling;
        return text;
    }
    function Selection(ranges, primIndex) {
        this.ranges = ranges, this.primIndex = primIndex;
    }
    function Range(anchor, head) {
        this.anchor = anchor, this.head = head;
    }
    function normalizeSelection(ranges, primIndex) {
        var prim = ranges[primIndex];
        ranges.sort(function(a, b) {
            return cmp(a.from(), b.from());
        }), primIndex = indexOf(ranges, prim);
        for (var i = 1; i < ranges.length; i++) {
            var cur = ranges[i], prev = ranges[i - 1];
            if (cmp(prev.to(), cur.from()) >= 0) {
                var from = minPos(prev.from(), cur.from()), to = maxPos(prev.to(), cur.to()), inv = prev.empty() ? cur.from() == cur.head : prev.from() == prev.head;
                i <= primIndex && --primIndex, ranges.splice(--i, 2, new Range(inv ? to : from, inv ? from : to));
            }
        }
        return new Selection(ranges, primIndex);
    }
    function simpleSelection(anchor, head) {
        return new Selection([ new Range(anchor, head || anchor) ], 0);
    }
    function clipLine(doc, n) {
        return Math.max(doc.first, Math.min(n, doc.first + doc.size - 1));
    }
    function clipPos(doc, pos) {
        if (pos.line < doc.first) return Pos(doc.first, 0);
        var last = doc.first + doc.size - 1;
        return pos.line > last ? Pos(last, getLine(doc, last).text.length) : clipToLen(pos, getLine(doc, pos.line).text.length);
    }
    function clipToLen(pos, linelen) {
        var ch = pos.ch;
        return null == ch || ch > linelen ? Pos(pos.line, linelen) : ch < 0 ? Pos(pos.line, 0) : pos;
    }
    function isLine(doc, l) {
        return l >= doc.first && l < doc.first + doc.size;
    }
    function clipPosArray(doc, array) {
        for (var out = [], i = 0; i < array.length; i++) out[i] = clipPos(doc, array[i]);
        return out;
    }
    function extendRange(doc, range, head, other) {
        if (doc.cm && doc.cm.display.shift || doc.extend) {
            var anchor = range.anchor;
            if (other) {
                var posBefore = cmp(head, anchor) < 0;
                posBefore != cmp(other, anchor) < 0 ? (anchor = head, head = other) : posBefore != cmp(head, other) < 0 && (head = other);
            }
            return new Range(anchor, head);
        }
        return new Range(other || head, head);
    }
    function extendSelection(doc, head, other, options) {
        setSelection(doc, new Selection([ extendRange(doc, doc.sel.primary(), head, other) ], 0), options);
    }
    function extendSelections(doc, heads, options) {
        for (var out = [], i = 0; i < doc.sel.ranges.length; i++) out[i] = extendRange(doc, doc.sel.ranges[i], heads[i], null);
        setSelection(doc, normalizeSelection(out, doc.sel.primIndex), options);
    }
    function replaceOneSelection(doc, i, range, options) {
        var ranges = doc.sel.ranges.slice(0);
        ranges[i] = range, setSelection(doc, normalizeSelection(ranges, doc.sel.primIndex), options);
    }
    function setSimpleSelection(doc, anchor, head, options) {
        setSelection(doc, simpleSelection(anchor, head), options);
    }
    function filterSelectionChange(doc, sel, options) {
        var obj = {
            ranges: sel.ranges,
            update: function(ranges) {
                this.ranges = [];
                for (var i = 0; i < ranges.length; i++) this.ranges[i] = new Range(clipPos(doc, ranges[i].anchor), clipPos(doc, ranges[i].head));
            },
            origin: options && options.origin
        };
        return signal(doc, "beforeSelectionChange", doc, obj), doc.cm && signal(doc.cm, "beforeSelectionChange", doc.cm, obj), 
        obj.ranges != sel.ranges ? normalizeSelection(obj.ranges, obj.ranges.length - 1) : sel;
    }
    function setSelectionReplaceHistory(doc, sel, options) {
        var done = doc.history.done, last = lst(done);
        last && last.ranges ? (done[done.length - 1] = sel, setSelectionNoUndo(doc, sel, options)) : setSelection(doc, sel, options);
    }
    function setSelection(doc, sel, options) {
        setSelectionNoUndo(doc, sel, options), addSelectionToHistory(doc, doc.sel, doc.cm ? doc.cm.curOp.id : NaN, options);
    }
    function setSelectionNoUndo(doc, sel, options) {
        (hasHandler(doc, "beforeSelectionChange") || doc.cm && hasHandler(doc.cm, "beforeSelectionChange")) && (sel = filterSelectionChange(doc, sel, options)), 
        setSelectionInner(doc, skipAtomicInSelection(doc, sel, options && options.bias || (cmp(sel.primary().head, doc.sel.primary().head) < 0 ? -1 : 1), !0)), 
        options && !1 === options.scroll || !doc.cm || ensureCursorVisible(doc.cm);
    }
    function setSelectionInner(doc, sel) {
        sel.equals(doc.sel) || (doc.sel = sel, doc.cm && (doc.cm.curOp.updateInput = doc.cm.curOp.selectionChanged = !0, 
        signalCursorActivity(doc.cm)), signalLater(doc, "cursorActivity", doc));
    }
    function reCheckSelection(doc) {
        setSelectionInner(doc, skipAtomicInSelection(doc, doc.sel, null, !1), sel_dontScroll);
    }
    function skipAtomicInSelection(doc, sel, bias, mayClear) {
        for (var out, i = 0; i < sel.ranges.length; i++) {
            var range = sel.ranges[i], old = sel.ranges.length == doc.sel.ranges.length && doc.sel.ranges[i], newAnchor = skipAtomic(doc, range.anchor, old && old.anchor, bias, mayClear), newHead = skipAtomic(doc, range.head, old && old.head, bias, mayClear);
            (out || newAnchor != range.anchor || newHead != range.head) && (out || (out = sel.ranges.slice(0, i)), 
            out[i] = new Range(newAnchor, newHead));
        }
        return out ? normalizeSelection(out, sel.primIndex) : sel;
    }
    function skipAtomicInner(doc, pos, oldPos, dir, mayClear) {
        var line = getLine(doc, pos.line);
        if (line.markedSpans) for (var i = 0; i < line.markedSpans.length; ++i) {
            var sp = line.markedSpans[i], m = sp.marker;
            if ((null == sp.from || (m.inclusiveLeft ? sp.from <= pos.ch : sp.from < pos.ch)) && (null == sp.to || (m.inclusiveRight ? sp.to >= pos.ch : sp.to > pos.ch))) {
                if (mayClear && (signal(m, "beforeCursorEnter"), m.explicitlyCleared)) {
                    if (line.markedSpans) {
                        --i;
                        continue;
                    }
                    break;
                }
                if (!m.atomic) continue;
                if (oldPos) {
                    var diff, near = m.find(dir < 0 ? 1 : -1);
                    if ((dir < 0 ? m.inclusiveRight : m.inclusiveLeft) && (near = movePos(doc, near, -dir, near && near.line == pos.line ? line : null)), 
                    near && near.line == pos.line && (diff = cmp(near, oldPos)) && (dir < 0 ? diff < 0 : diff > 0)) return skipAtomicInner(doc, near, pos, dir, mayClear);
                }
                var far = m.find(dir < 0 ? -1 : 1);
                return (dir < 0 ? m.inclusiveLeft : m.inclusiveRight) && (far = movePos(doc, far, dir, far.line == pos.line ? line : null)), 
                far ? skipAtomicInner(doc, far, pos, dir, mayClear) : null;
            }
        }
        return pos;
    }
    function skipAtomic(doc, pos, oldPos, bias, mayClear) {
        var dir = bias || 1, found = skipAtomicInner(doc, pos, oldPos, dir, mayClear) || !mayClear && skipAtomicInner(doc, pos, oldPos, dir, !0) || skipAtomicInner(doc, pos, oldPos, -dir, mayClear) || !mayClear && skipAtomicInner(doc, pos, oldPos, -dir, !0);
        return found || (doc.cantEdit = !0, Pos(doc.first, 0));
    }
    function movePos(doc, pos, dir, line) {
        return dir < 0 && 0 == pos.ch ? pos.line > doc.first ? clipPos(doc, Pos(pos.line - 1)) : null : dir > 0 && pos.ch == (line || getLine(doc, pos.line)).text.length ? pos.line < doc.first + doc.size - 1 ? Pos(pos.line + 1, 0) : null : new Pos(pos.line, pos.ch + dir);
    }
    function updateSelection(cm) {
        cm.display.input.showSelection(cm.display.input.prepareSelection());
    }
    function prepareSelection(cm, primary) {
        for (var doc = cm.doc, result = {}, curFragment = result.cursors = document.createDocumentFragment(), selFragment = result.selection = document.createDocumentFragment(), i = 0; i < doc.sel.ranges.length; i++) if (!1 !== primary || i != doc.sel.primIndex) {
            var range = doc.sel.ranges[i];
            if (!(range.from().line >= cm.display.viewTo || range.to().line < cm.display.viewFrom)) {
                var collapsed = range.empty();
                (collapsed || cm.options.showCursorWhenSelecting) && drawSelectionCursor(cm, range.head, curFragment), 
                collapsed || drawSelectionRange(cm, range, selFragment);
            }
        }
        return result;
    }
    function drawSelectionCursor(cm, head, output) {
        var pos = cursorCoords(cm, head, "div", null, null, !cm.options.singleCursorHeightPerLine), cursor = output.appendChild(elt("div", "\xa0", "CodeMirror-cursor"));
        if (cursor.style.left = pos.left + "px", cursor.style.top = pos.top + "px", cursor.style.height = Math.max(0, pos.bottom - pos.top) * cm.options.cursorHeight + "px", 
        pos.other) {
            var otherCursor = output.appendChild(elt("div", "\xa0", "CodeMirror-cursor CodeMirror-secondarycursor"));
            otherCursor.style.display = "", otherCursor.style.left = pos.other.left + "px", 
            otherCursor.style.top = pos.other.top + "px", otherCursor.style.height = .85 * (pos.other.bottom - pos.other.top) + "px";
        }
    }
    function drawSelectionRange(cm, range, output) {
        function add(left, top, width, bottom) {
            top < 0 && (top = 0), top = Math.round(top), bottom = Math.round(bottom), fragment.appendChild(elt("div", null, "CodeMirror-selected", "position: absolute; left: " + left + "px; top: " + top + "px; width: " + (null == width ? rightSide - left : width) + "px; height: " + (bottom - top) + "px"));
        }
        function drawForLine(line, fromArg, toArg) {
            function coords(ch, bias) {
                return charCoords(cm, Pos(line, ch), "div", lineObj, bias);
            }
            var start, end, lineObj = getLine(doc, line), lineLen = lineObj.text.length;
            return iterateBidiSections(getOrder(lineObj), fromArg || 0, null == toArg ? lineLen : toArg, function(from, to, dir) {
                var rightPos, left, right, leftPos = coords(from, "left");
                if (from == to) rightPos = leftPos, left = right = leftPos.left; else {
                    if (rightPos = coords(to - 1, "right"), "rtl" == dir) {
                        var tmp = leftPos;
                        leftPos = rightPos, rightPos = tmp;
                    }
                    left = leftPos.left, right = rightPos.right;
                }
                null == fromArg && 0 == from && (left = leftSide), rightPos.top - leftPos.top > 3 && (add(left, leftPos.top, null, leftPos.bottom), 
                left = leftSide, leftPos.bottom < rightPos.top && add(left, leftPos.bottom, null, rightPos.top)), 
                null == toArg && to == lineLen && (right = rightSide), (!start || leftPos.top < start.top || leftPos.top == start.top && leftPos.left < start.left) && (start = leftPos), 
                (!end || rightPos.bottom > end.bottom || rightPos.bottom == end.bottom && rightPos.right > end.right) && (end = rightPos), 
                left < leftSide + 1 && (left = leftSide), add(left, rightPos.top, right - left, rightPos.bottom);
            }), {
                start: start,
                end: end
            };
        }
        var display = cm.display, doc = cm.doc, fragment = document.createDocumentFragment(), padding = paddingH(cm.display), leftSide = padding.left, rightSide = Math.max(display.sizerWidth, displayWidth(cm) - display.sizer.offsetLeft) - padding.right, sFrom = range.from(), sTo = range.to();
        if (sFrom.line == sTo.line) drawForLine(sFrom.line, sFrom.ch, sTo.ch); else {
            var fromLine = getLine(doc, sFrom.line), toLine = getLine(doc, sTo.line), singleVLine = visualLine(fromLine) == visualLine(toLine), leftEnd = drawForLine(sFrom.line, sFrom.ch, singleVLine ? fromLine.text.length + 1 : null).end, rightStart = drawForLine(sTo.line, singleVLine ? 0 : null, sTo.ch).start;
            singleVLine && (leftEnd.top < rightStart.top - 2 ? (add(leftEnd.right, leftEnd.top, null, leftEnd.bottom), 
            add(leftSide, rightStart.top, rightStart.left, rightStart.bottom)) : add(leftEnd.right, leftEnd.top, rightStart.left - leftEnd.right, leftEnd.bottom)), 
            leftEnd.bottom < rightStart.top && add(leftSide, leftEnd.bottom, null, rightStart.top);
        }
        output.appendChild(fragment);
    }
    function restartBlink(cm) {
        if (cm.state.focused) {
            var display = cm.display;
            clearInterval(display.blinker);
            var on = !0;
            display.cursorDiv.style.visibility = "", cm.options.cursorBlinkRate > 0 ? display.blinker = setInterval(function() {
                display.cursorDiv.style.visibility = (on = !on) ? "" : "hidden";
            }, cm.options.cursorBlinkRate) : cm.options.cursorBlinkRate < 0 && (display.cursorDiv.style.visibility = "hidden");
        }
    }
    function startWorker(cm, time) {
        cm.doc.mode.startState && cm.doc.frontier < cm.display.viewTo && cm.state.highlight.set(time, bind(highlightWorker, cm));
    }
    function highlightWorker(cm) {
        var doc = cm.doc;
        if (doc.frontier < doc.first && (doc.frontier = doc.first), !(doc.frontier >= cm.display.viewTo)) {
            var end = +new Date() + cm.options.workTime, state = copyState(doc.mode, getStateBefore(cm, doc.frontier)), changedLines = [];
            doc.iter(doc.frontier, Math.min(doc.first + doc.size, cm.display.viewTo + 500), function(line) {
                if (doc.frontier >= cm.display.viewFrom) {
                    var oldStyles = line.styles, tooLong = line.text.length > cm.options.maxHighlightLength, highlighted = highlightLine(cm, line, tooLong ? copyState(doc.mode, state) : state, !0);
                    line.styles = highlighted.styles;
                    var oldCls = line.styleClasses, newCls = highlighted.classes;
                    newCls ? line.styleClasses = newCls : oldCls && (line.styleClasses = null);
                    for (var ischange = !oldStyles || oldStyles.length != line.styles.length || oldCls != newCls && (!oldCls || !newCls || oldCls.bgClass != newCls.bgClass || oldCls.textClass != newCls.textClass), i = 0; !ischange && i < oldStyles.length; ++i) ischange = oldStyles[i] != line.styles[i];
                    ischange && changedLines.push(doc.frontier), line.stateAfter = tooLong ? state : copyState(doc.mode, state);
                } else line.text.length <= cm.options.maxHighlightLength && processLine(cm, line.text, state), 
                line.stateAfter = doc.frontier % 5 == 0 ? copyState(doc.mode, state) : null;
                if (++doc.frontier, +new Date() > end) return startWorker(cm, cm.options.workDelay), 
                !0;
            }), changedLines.length && runInOp(cm, function() {
                for (var i = 0; i < changedLines.length; i++) regLineChange(cm, changedLines[i], "text");
            });
        }
    }
    function findStartLine(cm, n, precise) {
        for (var minindent, minline, doc = cm.doc, lim = precise ? -1 : n - (cm.doc.mode.innerMode ? 1e3 : 100), search = n; search > lim; --search) {
            if (search <= doc.first) return doc.first;
            var line = getLine(doc, search - 1);
            if (line.stateAfter && (!precise || search <= doc.frontier)) return search;
            var indented = countColumn(line.text, null, cm.options.tabSize);
            (null == minline || minindent > indented) && (minline = search - 1, minindent = indented);
        }
        return minline;
    }
    function getStateBefore(cm, n, precise) {
        var doc = cm.doc, display = cm.display;
        if (!doc.mode.startState) return !0;
        var pos = findStartLine(cm, n, precise), state = pos > doc.first && getLine(doc, pos - 1).stateAfter;
        return state = state ? copyState(doc.mode, state) : startState(doc.mode), doc.iter(pos, n, function(line) {
            processLine(cm, line.text, state);
            var save = pos == n - 1 || pos % 5 == 0 || pos >= display.viewFrom && pos < display.viewTo;
            line.stateAfter = save ? copyState(doc.mode, state) : null, ++pos;
        }), precise && (doc.frontier = pos), state;
    }
    function paddingTop(display) {
        return display.lineSpace.offsetTop;
    }
    function paddingVert(display) {
        return display.mover.offsetHeight - display.lineSpace.offsetHeight;
    }
    function paddingH(display) {
        if (display.cachedPaddingH) return display.cachedPaddingH;
        var e = removeChildrenAndAdd(display.measure, elt("pre", "x")), style = window.getComputedStyle ? window.getComputedStyle(e) : e.currentStyle, data = {
            left: parseInt(style.paddingLeft),
            right: parseInt(style.paddingRight)
        };
        return isNaN(data.left) || isNaN(data.right) || (display.cachedPaddingH = data), 
        data;
    }
    function scrollGap(cm) {
        return scrollerGap - cm.display.nativeBarWidth;
    }
    function displayWidth(cm) {
        return cm.display.scroller.clientWidth - scrollGap(cm) - cm.display.barWidth;
    }
    function displayHeight(cm) {
        return cm.display.scroller.clientHeight - scrollGap(cm) - cm.display.barHeight;
    }
    function ensureLineHeights(cm, lineView, rect) {
        var wrapping = cm.options.lineWrapping, curWidth = wrapping && displayWidth(cm);
        if (!lineView.measure.heights || wrapping && lineView.measure.width != curWidth) {
            var heights = lineView.measure.heights = [];
            if (wrapping) {
                lineView.measure.width = curWidth;
                for (var rects = lineView.text.firstChild.getClientRects(), i = 0; i < rects.length - 1; i++) {
                    var cur = rects[i], next = rects[i + 1];
                    Math.abs(cur.bottom - next.bottom) > 2 && heights.push((cur.bottom + next.top) / 2 - rect.top);
                }
            }
            heights.push(rect.bottom - rect.top);
        }
    }
    function mapFromLineView(lineView, line, lineN) {
        if (lineView.line == line) return {
            map: lineView.measure.map,
            cache: lineView.measure.cache
        };
        for (i = 0; i < lineView.rest.length; i++) if (lineView.rest[i] == line) return {
            map: lineView.measure.maps[i],
            cache: lineView.measure.caches[i]
        };
        for (var i = 0; i < lineView.rest.length; i++) if (lineNo(lineView.rest[i]) > lineN) return {
            map: lineView.measure.maps[i],
            cache: lineView.measure.caches[i],
            before: !0
        };
    }
    function updateExternalMeasurement(cm, line) {
        var lineN = lineNo(line = visualLine(line)), view = cm.display.externalMeasured = new LineView(cm.doc, line, lineN);
        view.lineN = lineN;
        var built = view.built = buildLineContent(cm, view);
        return view.text = built.pre, removeChildrenAndAdd(cm.display.lineMeasure, built.pre), 
        view;
    }
    function measureChar(cm, line, ch, bias) {
        return measureCharPrepared(cm, prepareMeasureForLine(cm, line), ch, bias);
    }
    function findViewForLine(cm, lineN) {
        if (lineN >= cm.display.viewFrom && lineN < cm.display.viewTo) return cm.display.view[findViewIndex(cm, lineN)];
        var ext = cm.display.externalMeasured;
        return ext && lineN >= ext.lineN && lineN < ext.lineN + ext.size ? ext : void 0;
    }
    function prepareMeasureForLine(cm, line) {
        var lineN = lineNo(line), view = findViewForLine(cm, lineN);
        view && !view.text ? view = null : view && view.changes && (updateLineForChanges(cm, view, lineN, getDimensions(cm)), 
        cm.curOp.forceUpdate = !0), view || (view = updateExternalMeasurement(cm, line));
        var info = mapFromLineView(view, line, lineN);
        return {
            line: line,
            view: view,
            rect: null,
            map: info.map,
            cache: info.cache,
            before: info.before,
            hasHeights: !1
        };
    }
    function measureCharPrepared(cm, prepared, ch, bias, varHeight) {
        prepared.before && (ch = -1);
        var found, key = ch + (bias || "");
        return prepared.cache.hasOwnProperty(key) ? found = prepared.cache[key] : (prepared.rect || (prepared.rect = prepared.view.text.getBoundingClientRect()), 
        prepared.hasHeights || (ensureLineHeights(cm, prepared.view, prepared.rect), prepared.hasHeights = !0), 
        (found = measureCharInner(cm, prepared, ch, bias)).bogus || (prepared.cache[key] = found)), 
        {
            left: found.left,
            right: found.right,
            top: varHeight ? found.rtop : found.top,
            bottom: varHeight ? found.rbottom : found.bottom
        };
    }
    function nodeAndOffsetInLineMap(map, ch, bias) {
        for (var node, start, end, collapse, i = 0; i < map.length; i += 3) {
            var mStart = map[i], mEnd = map[i + 1];
            if (ch < mStart ? (start = 0, end = 1, collapse = "left") : ch < mEnd ? end = (start = ch - mStart) + 1 : (i == map.length - 3 || ch == mEnd && map[i + 3] > ch) && (start = (end = mEnd - mStart) - 1, 
            ch >= mEnd && (collapse = "right")), null != start) {
                if (node = map[i + 2], mStart == mEnd && bias == (node.insertLeft ? "left" : "right") && (collapse = bias), 
                "left" == bias && 0 == start) for (;i && map[i - 2] == map[i - 3] && map[i - 1].insertLeft; ) node = map[2 + (i -= 3)], 
                collapse = "left";
                if ("right" == bias && start == mEnd - mStart) for (;i < map.length - 3 && map[i + 3] == map[i + 4] && !map[i + 5].insertLeft; ) node = map[(i += 3) + 2], 
                collapse = "right";
                break;
            }
        }
        return {
            node: node,
            start: start,
            end: end,
            collapse: collapse,
            coverStart: mStart,
            coverEnd: mEnd
        };
    }
    function measureCharInner(cm, prepared, ch, bias) {
        var rect, place = nodeAndOffsetInLineMap(prepared.map, ch, bias), node = place.node, start = place.start, end = place.end, collapse = place.collapse;
        if (3 == node.nodeType) {
            for (i = 0; i < 4; i++) {
                for (;start && isExtendingChar(prepared.line.text.charAt(place.coverStart + start)); ) --start;
                for (;place.coverStart + end < place.coverEnd && isExtendingChar(prepared.line.text.charAt(place.coverStart + end)); ) ++end;
                if ((rect = ie && ie_version < 9 && 0 == start && end == place.coverEnd - place.coverStart ? node.parentNode.getBoundingClientRect() : ie && cm.options.lineWrapping ? (rects = range(node, start, end).getClientRects()).length ? rects["right" == bias ? rects.length - 1 : 0] : nullRect : range(node, start, end).getBoundingClientRect() || nullRect).left || rect.right || 0 == start) break;
                end = start, start -= 1, collapse = "right";
            }
            ie && ie_version < 11 && (rect = maybeUpdateRectForZooming(cm.display.measure, rect));
        } else {
            start > 0 && (collapse = bias = "right");
            var rects;
            rect = cm.options.lineWrapping && (rects = node.getClientRects()).length > 1 ? rects["right" == bias ? rects.length - 1 : 0] : node.getBoundingClientRect();
        }
        if (ie && ie_version < 9 && !start && (!rect || !rect.left && !rect.right)) {
            var rSpan = node.parentNode.getClientRects()[0];
            rect = rSpan ? {
                left: rSpan.left,
                right: rSpan.left + charWidth(cm.display),
                top: rSpan.top,
                bottom: rSpan.bottom
            } : nullRect;
        }
        for (var rtop = rect.top - prepared.rect.top, rbot = rect.bottom - prepared.rect.top, mid = (rtop + rbot) / 2, heights = prepared.view.measure.heights, i = 0; i < heights.length - 1 && !(mid < heights[i]); i++) ;
        var top = i ? heights[i - 1] : 0, bot = heights[i], result = {
            left: ("right" == collapse ? rect.right : rect.left) - prepared.rect.left,
            right: ("left" == collapse ? rect.left : rect.right) - prepared.rect.left,
            top: top,
            bottom: bot
        };
        return rect.left || rect.right || (result.bogus = !0), cm.options.singleCursorHeightPerLine || (result.rtop = rtop, 
        result.rbottom = rbot), result;
    }
    function maybeUpdateRectForZooming(measure, rect) {
        if (!window.screen || null == screen.logicalXDPI || screen.logicalXDPI == screen.deviceXDPI || !hasBadZoomedRects(measure)) return rect;
        var scaleX = screen.logicalXDPI / screen.deviceXDPI, scaleY = screen.logicalYDPI / screen.deviceYDPI;
        return {
            left: rect.left * scaleX,
            right: rect.right * scaleX,
            top: rect.top * scaleY,
            bottom: rect.bottom * scaleY
        };
    }
    function clearLineMeasurementCacheFor(lineView) {
        if (lineView.measure && (lineView.measure.cache = {}, lineView.measure.heights = null, 
        lineView.rest)) for (var i = 0; i < lineView.rest.length; i++) lineView.measure.caches[i] = {};
    }
    function clearLineMeasurementCache(cm) {
        cm.display.externalMeasure = null, removeChildren(cm.display.lineMeasure);
        for (var i = 0; i < cm.display.view.length; i++) clearLineMeasurementCacheFor(cm.display.view[i]);
    }
    function clearCaches(cm) {
        clearLineMeasurementCache(cm), cm.display.cachedCharWidth = cm.display.cachedTextHeight = cm.display.cachedPaddingH = null, 
        cm.options.lineWrapping || (cm.display.maxLineChanged = !0), cm.display.lineNumChars = null;
    }
    function pageScrollX() {
        return window.pageXOffset || (document.documentElement || document.body).scrollLeft;
    }
    function pageScrollY() {
        return window.pageYOffset || (document.documentElement || document.body).scrollTop;
    }
    function intoCoordSystem(cm, lineObj, rect, context) {
        if (lineObj.widgets) for (var i = 0; i < lineObj.widgets.length; ++i) if (lineObj.widgets[i].above) {
            var size = widgetHeight(lineObj.widgets[i]);
            rect.top += size, rect.bottom += size;
        }
        if ("line" == context) return rect;
        context || (context = "local");
        var yOff = heightAtLine(lineObj);
        if ("local" == context ? yOff += paddingTop(cm.display) : yOff -= cm.display.viewOffset, 
        "page" == context || "window" == context) {
            var lOff = cm.display.lineSpace.getBoundingClientRect();
            yOff += lOff.top + ("window" == context ? 0 : pageScrollY());
            var xOff = lOff.left + ("window" == context ? 0 : pageScrollX());
            rect.left += xOff, rect.right += xOff;
        }
        return rect.top += yOff, rect.bottom += yOff, rect;
    }
    function fromCoordSystem(cm, coords, context) {
        if ("div" == context) return coords;
        var left = coords.left, top = coords.top;
        if ("page" == context) left -= pageScrollX(), top -= pageScrollY(); else if ("local" == context || !context) {
            var localBox = cm.display.sizer.getBoundingClientRect();
            left += localBox.left, top += localBox.top;
        }
        var lineSpaceBox = cm.display.lineSpace.getBoundingClientRect();
        return {
            left: left - lineSpaceBox.left,
            top: top - lineSpaceBox.top
        };
    }
    function charCoords(cm, pos, context, lineObj, bias) {
        return lineObj || (lineObj = getLine(cm.doc, pos.line)), intoCoordSystem(cm, lineObj, measureChar(cm, lineObj, pos.ch, bias), context);
    }
    function cursorCoords(cm, pos, context, lineObj, preparedMeasure, varHeight) {
        function get(ch, right) {
            var m = measureCharPrepared(cm, preparedMeasure, ch, right ? "right" : "left", varHeight);
            return right ? m.left = m.right : m.right = m.left, intoCoordSystem(cm, lineObj, m, context);
        }
        function getBidi(ch, partPos) {
            var part = order[partPos], right = part.level % 2;
            return ch == bidiLeft(part) && partPos && part.level < order[partPos - 1].level ? (ch = bidiRight(part = order[--partPos]) - (part.level % 2 ? 0 : 1), 
            right = !0) : ch == bidiRight(part) && partPos < order.length - 1 && part.level < order[partPos + 1].level && (ch = bidiLeft(part = order[++partPos]) - part.level % 2, 
            right = !1), right && ch == part.to && ch > part.from ? get(ch - 1) : get(ch, right);
        }
        lineObj = lineObj || getLine(cm.doc, pos.line), preparedMeasure || (preparedMeasure = prepareMeasureForLine(cm, lineObj));
        var order = getOrder(lineObj), ch = pos.ch;
        if (!order) return get(ch);
        var val = getBidi(ch, getBidiPartAt(order, ch));
        return null != bidiOther && (val.other = getBidi(ch, bidiOther)), val;
    }
    function estimateCoords(cm, pos) {
        var left = 0, pos = clipPos(cm.doc, pos);
        cm.options.lineWrapping || (left = charWidth(cm.display) * pos.ch);
        var lineObj = getLine(cm.doc, pos.line), top = heightAtLine(lineObj) + paddingTop(cm.display);
        return {
            left: left,
            right: left,
            top: top,
            bottom: top + lineObj.height
        };
    }
    function PosWithInfo(line, ch, outside, xRel) {
        var pos = Pos(line, ch);
        return pos.xRel = xRel, outside && (pos.outside = !0), pos;
    }
    function coordsChar(cm, x, y) {
        var doc = cm.doc;
        if ((y += cm.display.viewOffset) < 0) return PosWithInfo(doc.first, 0, !0, -1);
        var lineN = lineAtHeight(doc, y), last = doc.first + doc.size - 1;
        if (lineN > last) return PosWithInfo(doc.first + doc.size - 1, getLine(doc, last).text.length, !0, 1);
        x < 0 && (x = 0);
        for (var lineObj = getLine(doc, lineN); ;) {
            var found = coordsCharInner(cm, lineObj, lineN, x, y), merged = collapsedSpanAtEnd(lineObj), mergedPos = merged && merged.find(0, !0);
            if (!merged || !(found.ch > mergedPos.from.ch || found.ch == mergedPos.from.ch && found.xRel > 0)) return found;
            lineN = lineNo(lineObj = mergedPos.to.line);
        }
    }
    function coordsCharInner(cm, lineObj, lineNo, x, y) {
        function getX(ch) {
            var sp = cursorCoords(cm, Pos(lineNo, ch), "line", lineObj, preparedMeasure);
            return wrongLine = !0, innerOff > sp.bottom ? sp.left - adjust : innerOff < sp.top ? sp.left + adjust : (wrongLine = !1, 
            sp.left);
        }
        var innerOff = y - heightAtLine(lineObj), wrongLine = !1, adjust = 2 * cm.display.wrapper.clientWidth, preparedMeasure = prepareMeasureForLine(cm, lineObj), bidi = getOrder(lineObj), dist = lineObj.text.length, from = lineLeft(lineObj), to = lineRight(lineObj), fromX = getX(from), fromOutside = wrongLine, toX = getX(to), toOutside = wrongLine;
        if (x > toX) return PosWithInfo(lineNo, to, toOutside, 1);
        for (;;) {
            if (bidi ? to == from || to == moveVisually(lineObj, from, 1) : to - from <= 1) {
                var ch = x < fromX || x - fromX <= toX - x ? from : to, outside = ch == from ? fromOutside : toOutside, xDiff = x - (ch == from ? fromX : toX);
                if (toOutside && !bidi && !/\s/.test(lineObj.text.charAt(ch)) && xDiff > 0 && ch < lineObj.text.length && preparedMeasure.view.measure.heights.length > 1) {
                    var charSize = measureCharPrepared(cm, preparedMeasure, ch, "right");
                    innerOff <= charSize.bottom && innerOff >= charSize.top && Math.abs(x - charSize.right) < xDiff && (outside = !1, 
                    ch++, xDiff = x - charSize.right);
                }
                for (;isExtendingChar(lineObj.text.charAt(ch)); ) ++ch;
                return PosWithInfo(lineNo, ch, outside, xDiff < -1 ? -1 : xDiff > 1 ? 1 : 0);
            }
            var step = Math.ceil(dist / 2), middle = from + step;
            if (bidi) {
                middle = from;
                for (var i = 0; i < step; ++i) middle = moveVisually(lineObj, middle, 1);
            }
            var middleX = getX(middle);
            middleX > x ? (to = middle, toX = middleX, (toOutside = wrongLine) && (toX += 1e3), 
            dist = step) : (from = middle, fromX = middleX, fromOutside = wrongLine, dist -= step);
        }
    }
    function textHeight(display) {
        if (null != display.cachedTextHeight) return display.cachedTextHeight;
        if (null == measureText) {
            measureText = elt("pre");
            for (var i = 0; i < 49; ++i) measureText.appendChild(document.createTextNode("x")), 
            measureText.appendChild(elt("br"));
            measureText.appendChild(document.createTextNode("x"));
        }
        removeChildrenAndAdd(display.measure, measureText);
        var height = measureText.offsetHeight / 50;
        return height > 3 && (display.cachedTextHeight = height), removeChildren(display.measure), 
        height || 1;
    }
    function charWidth(display) {
        if (null != display.cachedCharWidth) return display.cachedCharWidth;
        var anchor = elt("span", "xxxxxxxxxx"), pre = elt("pre", [ anchor ]);
        removeChildrenAndAdd(display.measure, pre);
        var rect = anchor.getBoundingClientRect(), width = (rect.right - rect.left) / 10;
        return width > 2 && (display.cachedCharWidth = width), width || 10;
    }
    function startOperation(cm) {
        cm.curOp = {
            cm: cm,
            viewChanged: !1,
            startHeight: cm.doc.height,
            forceUpdate: !1,
            updateInput: null,
            typing: !1,
            changeObjs: null,
            cursorActivityHandlers: null,
            cursorActivityCalled: 0,
            selectionChanged: !1,
            updateMaxLine: !1,
            scrollLeft: null,
            scrollTop: null,
            scrollToPos: null,
            focus: !1,
            id: ++nextOpId
        }, operationGroup ? operationGroup.ops.push(cm.curOp) : cm.curOp.ownsGroup = operationGroup = {
            ops: [ cm.curOp ],
            delayedCallbacks: []
        };
    }
    function fireCallbacksForOps(group) {
        var callbacks = group.delayedCallbacks, i = 0;
        do {
            for (;i < callbacks.length; i++) callbacks[i].call(null);
            for (var j = 0; j < group.ops.length; j++) {
                var op = group.ops[j];
                if (op.cursorActivityHandlers) for (;op.cursorActivityCalled < op.cursorActivityHandlers.length; ) op.cursorActivityHandlers[op.cursorActivityCalled++].call(null, op.cm);
            }
        } while (i < callbacks.length);
    }
    function endOperation(cm) {
        var group = cm.curOp.ownsGroup;
        if (group) try {
            fireCallbacksForOps(group);
        } finally {
            operationGroup = null;
            for (var i = 0; i < group.ops.length; i++) group.ops[i].cm.curOp = null;
            endOperations(group);
        }
    }
    function endOperations(group) {
        for (var ops = group.ops, i = 0; i < ops.length; i++) endOperation_R1(ops[i]);
        for (i = 0; i < ops.length; i++) endOperation_W1(ops[i]);
        for (i = 0; i < ops.length; i++) endOperation_R2(ops[i]);
        for (i = 0; i < ops.length; i++) endOperation_W2(ops[i]);
        for (i = 0; i < ops.length; i++) endOperation_finish(ops[i]);
    }
    function endOperation_R1(op) {
        var cm = op.cm, display = cm.display;
        maybeClipScrollbars(cm), op.updateMaxLine && findMaxLine(cm), op.mustUpdate = op.viewChanged || op.forceUpdate || null != op.scrollTop || op.scrollToPos && (op.scrollToPos.from.line < display.viewFrom || op.scrollToPos.to.line >= display.viewTo) || display.maxLineChanged && cm.options.lineWrapping, 
        op.update = op.mustUpdate && new DisplayUpdate(cm, op.mustUpdate && {
            top: op.scrollTop,
            ensure: op.scrollToPos
        }, op.forceUpdate);
    }
    function endOperation_W1(op) {
        op.updatedDisplay = op.mustUpdate && updateDisplayIfNeeded(op.cm, op.update);
    }
    function endOperation_R2(op) {
        var cm = op.cm, display = cm.display;
        op.updatedDisplay && updateHeightsInViewport(cm), op.barMeasure = measureForScrollbars(cm), 
        display.maxLineChanged && !cm.options.lineWrapping && (op.adjustWidthTo = measureChar(cm, display.maxLine, display.maxLine.text.length).left + 3, 
        cm.display.sizerWidth = op.adjustWidthTo, op.barMeasure.scrollWidth = Math.max(display.scroller.clientWidth, display.sizer.offsetLeft + op.adjustWidthTo + scrollGap(cm) + cm.display.barWidth), 
        op.maxScrollLeft = Math.max(0, display.sizer.offsetLeft + op.adjustWidthTo - displayWidth(cm))), 
        (op.updatedDisplay || op.selectionChanged) && (op.preparedSelection = display.input.prepareSelection(op.focus));
    }
    function endOperation_W2(op) {
        var cm = op.cm;
        null != op.adjustWidthTo && (cm.display.sizer.style.minWidth = op.adjustWidthTo + "px", 
        op.maxScrollLeft < cm.doc.scrollLeft && setScrollLeft(cm, Math.min(cm.display.scroller.scrollLeft, op.maxScrollLeft), !0), 
        cm.display.maxLineChanged = !1);
        var takeFocus = op.focus && op.focus == activeElt() && (!document.hasFocus || document.hasFocus());
        op.preparedSelection && cm.display.input.showSelection(op.preparedSelection, takeFocus), 
        (op.updatedDisplay || op.startHeight != cm.doc.height) && updateScrollbars(cm, op.barMeasure), 
        op.updatedDisplay && setDocumentHeight(cm, op.barMeasure), op.selectionChanged && restartBlink(cm), 
        cm.state.focused && op.updateInput && cm.display.input.reset(op.typing), takeFocus && ensureFocus(op.cm);
    }
    function endOperation_finish(op) {
        var cm = op.cm, display = cm.display, doc = cm.doc;
        if (op.updatedDisplay && postUpdateDisplay(cm, op.update), null == display.wheelStartX || null == op.scrollTop && null == op.scrollLeft && !op.scrollToPos || (display.wheelStartX = display.wheelStartY = null), 
        null == op.scrollTop || display.scroller.scrollTop == op.scrollTop && !op.forceScroll || (doc.scrollTop = Math.max(0, Math.min(display.scroller.scrollHeight - display.scroller.clientHeight, op.scrollTop)), 
        display.scrollbars.setScrollTop(doc.scrollTop), display.scroller.scrollTop = doc.scrollTop), 
        null == op.scrollLeft || display.scroller.scrollLeft == op.scrollLeft && !op.forceScroll || (doc.scrollLeft = Math.max(0, Math.min(display.scroller.scrollWidth - display.scroller.clientWidth, op.scrollLeft)), 
        display.scrollbars.setScrollLeft(doc.scrollLeft), display.scroller.scrollLeft = doc.scrollLeft, 
        alignHorizontally(cm)), op.scrollToPos) {
            var coords = scrollPosIntoView(cm, clipPos(doc, op.scrollToPos.from), clipPos(doc, op.scrollToPos.to), op.scrollToPos.margin);
            op.scrollToPos.isCursor && cm.state.focused && maybeScrollWindow(cm, coords);
        }
        var hidden = op.maybeHiddenMarkers, unhidden = op.maybeUnhiddenMarkers;
        if (hidden) for (i = 0; i < hidden.length; ++i) hidden[i].lines.length || signal(hidden[i], "hide");
        if (unhidden) for (var i = 0; i < unhidden.length; ++i) unhidden[i].lines.length && signal(unhidden[i], "unhide");
        display.wrapper.offsetHeight && (doc.scrollTop = cm.display.scroller.scrollTop), 
        op.changeObjs && signal(cm, "changes", cm, op.changeObjs), op.update && op.update.finish();
    }
    function runInOp(cm, f) {
        if (cm.curOp) return f();
        startOperation(cm);
        try {
            return f();
        } finally {
            endOperation(cm);
        }
    }
    function operation(cm, f) {
        return function() {
            if (cm.curOp) return f.apply(cm, arguments);
            startOperation(cm);
            try {
                return f.apply(cm, arguments);
            } finally {
                endOperation(cm);
            }
        };
    }
    function methodOp(f) {
        return function() {
            if (this.curOp) return f.apply(this, arguments);
            startOperation(this);
            try {
                return f.apply(this, arguments);
            } finally {
                endOperation(this);
            }
        };
    }
    function docMethodOp(f) {
        return function() {
            var cm = this.cm;
            if (!cm || cm.curOp) return f.apply(this, arguments);
            startOperation(cm);
            try {
                return f.apply(this, arguments);
            } finally {
                endOperation(cm);
            }
        };
    }
    function LineView(doc, line, lineN) {
        this.line = line, this.rest = visualLineContinued(line), this.size = this.rest ? lineNo(lst(this.rest)) - lineN + 1 : 1, 
        this.node = this.text = null, this.hidden = lineIsHidden(doc, line);
    }
    function buildViewArray(cm, from, to) {
        for (var nextPos, array = [], pos = from; pos < to; pos = nextPos) {
            var view = new LineView(cm.doc, getLine(cm.doc, pos), pos);
            nextPos = pos + view.size, array.push(view);
        }
        return array;
    }
    function regChange(cm, from, to, lendiff) {
        null == from && (from = cm.doc.first), null == to && (to = cm.doc.first + cm.doc.size), 
        lendiff || (lendiff = 0);
        var display = cm.display;
        if (lendiff && to < display.viewTo && (null == display.updateLineNumbers || display.updateLineNumbers > from) && (display.updateLineNumbers = from), 
        cm.curOp.viewChanged = !0, from >= display.viewTo) sawCollapsedSpans && visualLineNo(cm.doc, from) < display.viewTo && resetView(cm); else if (to <= display.viewFrom) sawCollapsedSpans && visualLineEndNo(cm.doc, to + lendiff) > display.viewFrom ? resetView(cm) : (display.viewFrom += lendiff, 
        display.viewTo += lendiff); else if (from <= display.viewFrom && to >= display.viewTo) resetView(cm); else if (from <= display.viewFrom) (cut = viewCuttingPoint(cm, to, to + lendiff, 1)) ? (display.view = display.view.slice(cut.index), 
        display.viewFrom = cut.lineN, display.viewTo += lendiff) : resetView(cm); else if (to >= display.viewTo) {
            var cut = viewCuttingPoint(cm, from, from, -1);
            cut ? (display.view = display.view.slice(0, cut.index), display.viewTo = cut.lineN) : resetView(cm);
        } else {
            var cutTop = viewCuttingPoint(cm, from, from, -1), cutBot = viewCuttingPoint(cm, to, to + lendiff, 1);
            cutTop && cutBot ? (display.view = display.view.slice(0, cutTop.index).concat(buildViewArray(cm, cutTop.lineN, cutBot.lineN)).concat(display.view.slice(cutBot.index)), 
            display.viewTo += lendiff) : resetView(cm);
        }
        var ext = display.externalMeasured;
        ext && (to < ext.lineN ? ext.lineN += lendiff : from < ext.lineN + ext.size && (display.externalMeasured = null));
    }
    function regLineChange(cm, line, type) {
        cm.curOp.viewChanged = !0;
        var display = cm.display, ext = cm.display.externalMeasured;
        if (ext && line >= ext.lineN && line < ext.lineN + ext.size && (display.externalMeasured = null), 
        !(line < display.viewFrom || line >= display.viewTo)) {
            var lineView = display.view[findViewIndex(cm, line)];
            if (null != lineView.node) {
                var arr = lineView.changes || (lineView.changes = []);
                -1 == indexOf(arr, type) && arr.push(type);
            }
        }
    }
    function resetView(cm) {
        cm.display.viewFrom = cm.display.viewTo = cm.doc.first, cm.display.view = [], cm.display.viewOffset = 0;
    }
    function findViewIndex(cm, n) {
        if (n >= cm.display.viewTo) return null;
        if ((n -= cm.display.viewFrom) < 0) return null;
        for (var view = cm.display.view, i = 0; i < view.length; i++) if ((n -= view[i].size) < 0) return i;
    }
    function viewCuttingPoint(cm, oldN, newN, dir) {
        var diff, index = findViewIndex(cm, oldN), view = cm.display.view;
        if (!sawCollapsedSpans || newN == cm.doc.first + cm.doc.size) return {
            index: index,
            lineN: newN
        };
        for (var i = 0, n = cm.display.viewFrom; i < index; i++) n += view[i].size;
        if (n != oldN) {
            if (dir > 0) {
                if (index == view.length - 1) return null;
                diff = n + view[index].size - oldN, index++;
            } else diff = n - oldN;
            oldN += diff, newN += diff;
        }
        for (;visualLineNo(cm.doc, newN) != newN; ) {
            if (index == (dir < 0 ? 0 : view.length - 1)) return null;
            newN += dir * view[index - (dir < 0 ? 1 : 0)].size, index += dir;
        }
        return {
            index: index,
            lineN: newN
        };
    }
    function adjustView(cm, from, to) {
        var display = cm.display;
        0 == display.view.length || from >= display.viewTo || to <= display.viewFrom ? (display.view = buildViewArray(cm, from, to), 
        display.viewFrom = from) : (display.viewFrom > from ? display.view = buildViewArray(cm, from, display.viewFrom).concat(display.view) : display.viewFrom < from && (display.view = display.view.slice(findViewIndex(cm, from))), 
        display.viewFrom = from, display.viewTo < to ? display.view = display.view.concat(buildViewArray(cm, display.viewTo, to)) : display.viewTo > to && (display.view = display.view.slice(0, findViewIndex(cm, to)))), 
        display.viewTo = to;
    }
    function countDirtyView(cm) {
        for (var view = cm.display.view, dirty = 0, i = 0; i < view.length; i++) {
            var lineView = view[i];
            lineView.hidden || lineView.node && !lineView.changes || ++dirty;
        }
        return dirty;
    }
    function registerEventHandlers(cm) {
        function finishTouch() {
            d.activeTouch && (touchFinished = setTimeout(function() {
                d.activeTouch = null;
            }, 1e3), (prevTouch = d.activeTouch).end = +new Date());
        }
        function isMouseLikeTouchEvent(e) {
            if (1 != e.touches.length) return !1;
            var touch = e.touches[0];
            return touch.radiusX <= 1 && touch.radiusY <= 1;
        }
        function farAway(touch, other) {
            if (null == other.left) return !0;
            var dx = other.left - touch.left, dy = other.top - touch.top;
            return dx * dx + dy * dy > 400;
        }
        var d = cm.display;
        on(d.scroller, "mousedown", operation(cm, onMouseDown)), ie && ie_version < 11 ? on(d.scroller, "dblclick", operation(cm, function(e) {
            if (!signalDOMEvent(cm, e)) {
                var pos = posFromMouse(cm, e);
                if (pos && !clickInGutter(cm, e) && !eventInWidget(cm.display, e)) {
                    e_preventDefault(e);
                    var word = cm.findWordAt(pos);
                    extendSelection(cm.doc, word.anchor, word.head);
                }
            }
        })) : on(d.scroller, "dblclick", function(e) {
            signalDOMEvent(cm, e) || e_preventDefault(e);
        }), captureRightClick || on(d.scroller, "contextmenu", function(e) {
            onContextMenu(cm, e);
        });
        var touchFinished, prevTouch = {
            end: 0
        };
        on(d.scroller, "touchstart", function(e) {
            if (!signalDOMEvent(cm, e) && !isMouseLikeTouchEvent(e)) {
                clearTimeout(touchFinished);
                var now = +new Date();
                d.activeTouch = {
                    start: now,
                    moved: !1,
                    prev: now - prevTouch.end <= 300 ? prevTouch : null
                }, 1 == e.touches.length && (d.activeTouch.left = e.touches[0].pageX, d.activeTouch.top = e.touches[0].pageY);
            }
        }), on(d.scroller, "touchmove", function() {
            d.activeTouch && (d.activeTouch.moved = !0);
        }), on(d.scroller, "touchend", function(e) {
            var touch = d.activeTouch;
            if (touch && !eventInWidget(d, e) && null != touch.left && !touch.moved && new Date() - touch.start < 300) {
                var range, pos = cm.coordsChar(d.activeTouch, "page");
                range = !touch.prev || farAway(touch, touch.prev) ? new Range(pos, pos) : !touch.prev.prev || farAway(touch, touch.prev.prev) ? cm.findWordAt(pos) : new Range(Pos(pos.line, 0), clipPos(cm.doc, Pos(pos.line + 1, 0))), 
                cm.setSelection(range.anchor, range.head), cm.focus(), e_preventDefault(e);
            }
            finishTouch();
        }), on(d.scroller, "touchcancel", finishTouch), on(d.scroller, "scroll", function() {
            d.scroller.clientHeight && (setScrollTop(cm, d.scroller.scrollTop), setScrollLeft(cm, d.scroller.scrollLeft, !0), 
            signal(cm, "scroll", cm));
        }), on(d.scroller, "mousewheel", function(e) {
            onScrollWheel(cm, e);
        }), on(d.scroller, "DOMMouseScroll", function(e) {
            onScrollWheel(cm, e);
        }), on(d.wrapper, "scroll", function() {
            d.wrapper.scrollTop = d.wrapper.scrollLeft = 0;
        }), d.dragFunctions = {
            enter: function(e) {
                signalDOMEvent(cm, e) || e_stop(e);
            },
            over: function(e) {
                signalDOMEvent(cm, e) || (onDragOver(cm, e), e_stop(e));
            },
            start: function(e) {
                onDragStart(cm, e);
            },
            drop: operation(cm, onDrop),
            leave: function(e) {
                signalDOMEvent(cm, e) || clearDragCursor(cm);
            }
        };
        var inp = d.input.getField();
        on(inp, "keyup", function(e) {
            onKeyUp.call(cm, e);
        }), on(inp, "keydown", operation(cm, onKeyDown)), on(inp, "keypress", operation(cm, onKeyPress)), 
        on(inp, "focus", bind(onFocus, cm)), on(inp, "blur", bind(onBlur, cm));
    }
    function onResize(cm) {
        var d = cm.display;
        d.lastWrapHeight == d.wrapper.clientHeight && d.lastWrapWidth == d.wrapper.clientWidth || (d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null, 
        d.scrollbarsClipped = !1, cm.setSize());
    }
    function eventInWidget(display, e) {
        for (var n = e_target(e); n != display.wrapper; n = n.parentNode) if (!n || 1 == n.nodeType && "true" == n.getAttribute("cm-ignore-events") || n.parentNode == display.sizer && n != display.mover) return !0;
    }
    function posFromMouse(cm, e, liberal, forRect) {
        var display = cm.display;
        if (!liberal && "true" == e_target(e).getAttribute("cm-not-content")) return null;
        var x, y, space = display.lineSpace.getBoundingClientRect();
        try {
            x = e.clientX - space.left, y = e.clientY - space.top;
        } catch (e) {
            return null;
        }
        var line, coords = coordsChar(cm, x, y);
        if (forRect && 1 == coords.xRel && (line = getLine(cm.doc, coords.line).text).length == coords.ch) {
            var colDiff = countColumn(line, line.length, cm.options.tabSize) - line.length;
            coords = Pos(coords.line, Math.max(0, Math.round((x - paddingH(cm.display).left) / charWidth(cm.display)) - colDiff));
        }
        return coords;
    }
    function onMouseDown(e) {
        var cm = this, display = cm.display;
        if (!(signalDOMEvent(cm, e) || display.activeTouch && display.input.supportsTouch())) if (display.shift = e.shiftKey, 
        eventInWidget(display, e)) webkit || (display.scroller.draggable = !1, setTimeout(function() {
            display.scroller.draggable = !0;
        }, 100)); else if (!clickInGutter(cm, e)) {
            var start = posFromMouse(cm, e);
            switch (window.focus(), e_button(e)) {
              case 1:
                cm.state.selectingText ? cm.state.selectingText(e) : start ? leftButtonDown(cm, e, start) : e_target(e) == display.scroller && e_preventDefault(e);
                break;

              case 2:
                webkit && (cm.state.lastMiddleDown = +new Date()), start && extendSelection(cm.doc, start), 
                setTimeout(function() {
                    display.input.focus();
                }, 20), e_preventDefault(e);
                break;

              case 3:
                captureRightClick ? onContextMenu(cm, e) : delayBlurEvent(cm);
            }
        }
    }
    function leftButtonDown(cm, e, start) {
        ie ? setTimeout(bind(ensureFocus, cm), 0) : cm.curOp.focus = activeElt();
        var type, now = +new Date();
        lastDoubleClick && lastDoubleClick.time > now - 400 && 0 == cmp(lastDoubleClick.pos, start) ? type = "triple" : lastClick && lastClick.time > now - 400 && 0 == cmp(lastClick.pos, start) ? (type = "double", 
        lastDoubleClick = {
            time: now,
            pos: start
        }) : (type = "single", lastClick = {
            time: now,
            pos: start
        });
        var contained, sel = cm.doc.sel, modifier = mac ? e.metaKey : e.ctrlKey;
        cm.options.dragDrop && dragAndDrop && !cm.isReadOnly() && "single" == type && (contained = sel.contains(start)) > -1 && (cmp((contained = sel.ranges[contained]).from(), start) < 0 || start.xRel > 0) && (cmp(contained.to(), start) > 0 || start.xRel < 0) ? leftButtonStartDrag(cm, e, start, modifier) : leftButtonSelect(cm, e, start, type, modifier);
    }
    function leftButtonStartDrag(cm, e, start, modifier) {
        var display = cm.display, startTime = +new Date(), dragEnd = operation(cm, function(e2) {
            webkit && (display.scroller.draggable = !1), cm.state.draggingText = !1, off(document, "mouseup", dragEnd), 
            off(display.scroller, "drop", dragEnd), Math.abs(e.clientX - e2.clientX) + Math.abs(e.clientY - e2.clientY) < 10 && (e_preventDefault(e2), 
            !modifier && +new Date() - 200 < startTime && extendSelection(cm.doc, start), webkit || ie && 9 == ie_version ? setTimeout(function() {
                document.body.focus(), display.input.focus();
            }, 20) : display.input.focus());
        });
        webkit && (display.scroller.draggable = !0), cm.state.draggingText = dragEnd, dragEnd.copy = mac ? e.altKey : e.ctrlKey, 
        display.scroller.dragDrop && display.scroller.dragDrop(), on(document, "mouseup", dragEnd), 
        on(display.scroller, "drop", dragEnd);
    }
    function leftButtonSelect(cm, e, start, type, addNew) {
        function extendTo(pos) {
            if (0 != cmp(lastPos, pos)) if (lastPos = pos, "rect" == type) {
                for (var ranges = [], tabSize = cm.options.tabSize, startCol = countColumn(getLine(doc, start.line).text, start.ch, tabSize), posCol = countColumn(getLine(doc, pos.line).text, pos.ch, tabSize), left = Math.min(startCol, posCol), right = Math.max(startCol, posCol), line = Math.min(start.line, pos.line), end = Math.min(cm.lastLine(), Math.max(start.line, pos.line)); line <= end; line++) {
                    var text = getLine(doc, line).text, leftPos = findColumn(text, left, tabSize);
                    left == right ? ranges.push(new Range(Pos(line, leftPos), Pos(line, leftPos))) : text.length > leftPos && ranges.push(new Range(Pos(line, leftPos), Pos(line, findColumn(text, right, tabSize))));
                }
                ranges.length || ranges.push(new Range(start, start)), setSelection(doc, normalizeSelection(startSel.ranges.slice(0, ourIndex).concat(ranges), ourIndex), {
                    origin: "*mouse",
                    scroll: !1
                }), cm.scrollIntoView(pos);
            } else {
                var oldRange = ourRange, anchor = oldRange.anchor, head = pos;
                if ("single" != type) {
                    if ("double" == type) range = cm.findWordAt(pos); else var range = new Range(Pos(pos.line, 0), clipPos(doc, Pos(pos.line + 1, 0)));
                    cmp(range.anchor, anchor) > 0 ? (head = range.head, anchor = minPos(oldRange.from(), range.anchor)) : (head = range.anchor, 
                    anchor = maxPos(oldRange.to(), range.head));
                }
                (ranges = startSel.ranges.slice(0))[ourIndex] = new Range(clipPos(doc, anchor), head), 
                setSelection(doc, normalizeSelection(ranges, ourIndex), sel_mouse);
            }
        }
        function extend(e) {
            var curCount = ++counter, cur = posFromMouse(cm, e, !0, "rect" == type);
            if (cur) if (0 != cmp(cur, lastPos)) {
                cm.curOp.focus = activeElt(), extendTo(cur);
                var visible = visibleLines(display, doc);
                (cur.line >= visible.to || cur.line < visible.from) && setTimeout(operation(cm, function() {
                    counter == curCount && extend(e);
                }), 150);
            } else {
                var outside = e.clientY < editorSize.top ? -20 : e.clientY > editorSize.bottom ? 20 : 0;
                outside && setTimeout(operation(cm, function() {
                    counter == curCount && (display.scroller.scrollTop += outside, extend(e));
                }), 50);
            }
        }
        function done(e) {
            cm.state.selectingText = !1, counter = 1 / 0, e_preventDefault(e), display.input.focus(), 
            off(document, "mousemove", move), off(document, "mouseup", up), doc.history.lastSelOrigin = null;
        }
        var display = cm.display, doc = cm.doc;
        e_preventDefault(e);
        var ourRange, ourIndex, startSel = doc.sel, ranges = startSel.ranges;
        if (addNew && !e.shiftKey ? (ourIndex = doc.sel.contains(start), ourRange = ourIndex > -1 ? ranges[ourIndex] : new Range(start, start)) : (ourRange = doc.sel.primary(), 
        ourIndex = doc.sel.primIndex), chromeOS ? e.shiftKey && e.metaKey : e.altKey) type = "rect", 
        addNew || (ourRange = new Range(start, start)), start = posFromMouse(cm, e, !0, !0), 
        ourIndex = -1; else if ("double" == type) {
            var word = cm.findWordAt(start);
            ourRange = cm.display.shift || doc.extend ? extendRange(doc, ourRange, word.anchor, word.head) : word;
        } else if ("triple" == type) {
            var line = new Range(Pos(start.line, 0), clipPos(doc, Pos(start.line + 1, 0)));
            ourRange = cm.display.shift || doc.extend ? extendRange(doc, ourRange, line.anchor, line.head) : line;
        } else ourRange = extendRange(doc, ourRange, start);
        addNew ? -1 == ourIndex ? (ourIndex = ranges.length, setSelection(doc, normalizeSelection(ranges.concat([ ourRange ]), ourIndex), {
            scroll: !1,
            origin: "*mouse"
        })) : ranges.length > 1 && ranges[ourIndex].empty() && "single" == type && !e.shiftKey ? (setSelection(doc, normalizeSelection(ranges.slice(0, ourIndex).concat(ranges.slice(ourIndex + 1)), 0), {
            scroll: !1,
            origin: "*mouse"
        }), startSel = doc.sel) : replaceOneSelection(doc, ourIndex, ourRange, sel_mouse) : (ourIndex = 0, 
        setSelection(doc, new Selection([ ourRange ], 0), sel_mouse), startSel = doc.sel);
        var lastPos = start, editorSize = display.wrapper.getBoundingClientRect(), counter = 0, move = operation(cm, function(e) {
            e_button(e) ? extend(e) : done(e);
        }), up = operation(cm, done);
        cm.state.selectingText = up, on(document, "mousemove", move), on(document, "mouseup", up);
    }
    function gutterEvent(cm, e, type, prevent) {
        try {
            var mX = e.clientX, mY = e.clientY;
        } catch (e) {
            return !1;
        }
        if (mX >= Math.floor(cm.display.gutters.getBoundingClientRect().right)) return !1;
        prevent && e_preventDefault(e);
        var display = cm.display, lineBox = display.lineDiv.getBoundingClientRect();
        if (mY > lineBox.bottom || !hasHandler(cm, type)) return e_defaultPrevented(e);
        mY -= lineBox.top - display.viewOffset;
        for (var i = 0; i < cm.options.gutters.length; ++i) {
            var g = display.gutters.childNodes[i];
            if (g && g.getBoundingClientRect().right >= mX) {
                var line = lineAtHeight(cm.doc, mY), gutter = cm.options.gutters[i];
                return signal(cm, type, cm, line, gutter, e), e_defaultPrevented(e);
            }
        }
    }
    function clickInGutter(cm, e) {
        return gutterEvent(cm, e, "gutterClick", !0);
    }
    function onDrop(e) {
        var cm = this;
        if (clearDragCursor(cm), !signalDOMEvent(cm, e) && !eventInWidget(cm.display, e)) {
            e_preventDefault(e), ie && (lastDrop = +new Date());
            var pos = posFromMouse(cm, e, !0), files = e.dataTransfer.files;
            if (pos && !cm.isReadOnly()) if (files && files.length && window.FileReader && window.File) for (var n = files.length, text = Array(n), read = 0, i = 0; i < n; ++i) !function(file, i) {
                if (!cm.options.allowDropFileTypes || -1 != indexOf(cm.options.allowDropFileTypes, file.type)) {
                    var reader = new FileReader();
                    reader.onload = operation(cm, function() {
                        var content = reader.result;
                        if (/[\x00-\x08\x0e-\x1f]{2}/.test(content) && (content = ""), text[i] = content, 
                        ++read == n) {
                            var change = {
                                from: pos = clipPos(cm.doc, pos),
                                to: pos,
                                text: cm.doc.splitLines(text.join(cm.doc.lineSeparator())),
                                origin: "paste"
                            };
                            makeChange(cm.doc, change), setSelectionReplaceHistory(cm.doc, simpleSelection(pos, changeEnd(change)));
                        }
                    }), reader.readAsText(file);
                }
            }(files[i], i); else {
                if (cm.state.draggingText && cm.doc.sel.contains(pos) > -1) return cm.state.draggingText(e), 
                void setTimeout(function() {
                    cm.display.input.focus();
                }, 20);
                try {
                    if (text = e.dataTransfer.getData("Text")) {
                        if (cm.state.draggingText && !cm.state.draggingText.copy) var selected = cm.listSelections();
                        if (setSelectionNoUndo(cm.doc, simpleSelection(pos, pos)), selected) for (i = 0; i < selected.length; ++i) replaceRange(cm.doc, "", selected[i].anchor, selected[i].head, "drag");
                        cm.replaceSelection(text, "around", "paste"), cm.display.input.focus();
                    }
                } catch (e) {}
            }
        }
    }
    function onDragStart(cm, e) {
        if (ie && (!cm.state.draggingText || +new Date() - lastDrop < 100)) e_stop(e); else if (!signalDOMEvent(cm, e) && !eventInWidget(cm.display, e) && (e.dataTransfer.setData("Text", cm.getSelection()), 
        e.dataTransfer.effectAllowed = "copyMove", e.dataTransfer.setDragImage && !safari)) {
            var img = elt("img", null, null, "position: fixed; left: 0; top: 0;");
            img.src = "data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==", 
            presto && (img.width = img.height = 1, cm.display.wrapper.appendChild(img), img._top = img.offsetTop), 
            e.dataTransfer.setDragImage(img, 0, 0), presto && img.parentNode.removeChild(img);
        }
    }
    function onDragOver(cm, e) {
        var pos = posFromMouse(cm, e);
        if (pos) {
            var frag = document.createDocumentFragment();
            drawSelectionCursor(cm, pos, frag), cm.display.dragCursor || (cm.display.dragCursor = elt("div", null, "CodeMirror-cursors CodeMirror-dragcursors"), 
            cm.display.lineSpace.insertBefore(cm.display.dragCursor, cm.display.cursorDiv)), 
            removeChildrenAndAdd(cm.display.dragCursor, frag);
        }
    }
    function clearDragCursor(cm) {
        cm.display.dragCursor && (cm.display.lineSpace.removeChild(cm.display.dragCursor), 
        cm.display.dragCursor = null);
    }
    function setScrollTop(cm, val) {
        Math.abs(cm.doc.scrollTop - val) < 2 || (cm.doc.scrollTop = val, gecko || updateDisplaySimple(cm, {
            top: val
        }), cm.display.scroller.scrollTop != val && (cm.display.scroller.scrollTop = val), 
        cm.display.scrollbars.setScrollTop(val), gecko && updateDisplaySimple(cm), startWorker(cm, 100));
    }
    function setScrollLeft(cm, val, isScroller) {
        (isScroller ? val == cm.doc.scrollLeft : Math.abs(cm.doc.scrollLeft - val) < 2) || (val = Math.min(val, cm.display.scroller.scrollWidth - cm.display.scroller.clientWidth), 
        cm.doc.scrollLeft = val, alignHorizontally(cm), cm.display.scroller.scrollLeft != val && (cm.display.scroller.scrollLeft = val), 
        cm.display.scrollbars.setScrollLeft(val));
    }
    function onScrollWheel(cm, e) {
        var delta = wheelEventDelta(e), dx = delta.x, dy = delta.y, display = cm.display, scroll = display.scroller, canScrollX = scroll.scrollWidth > scroll.clientWidth, canScrollY = scroll.scrollHeight > scroll.clientHeight;
        if (dx && canScrollX || dy && canScrollY) {
            if (dy && mac && webkit) outer: for (var cur = e.target, view = display.view; cur != scroll; cur = cur.parentNode) for (var i = 0; i < view.length; i++) if (view[i].node == cur) {
                cm.display.currentWheelTarget = cur;
                break outer;
            }
            if (dx && !gecko && !presto && null != wheelPixelsPerUnit) return dy && canScrollY && setScrollTop(cm, Math.max(0, Math.min(scroll.scrollTop + dy * wheelPixelsPerUnit, scroll.scrollHeight - scroll.clientHeight))), 
            setScrollLeft(cm, Math.max(0, Math.min(scroll.scrollLeft + dx * wheelPixelsPerUnit, scroll.scrollWidth - scroll.clientWidth))), 
            (!dy || dy && canScrollY) && e_preventDefault(e), void (display.wheelStartX = null);
            if (dy && null != wheelPixelsPerUnit) {
                var pixels = dy * wheelPixelsPerUnit, top = cm.doc.scrollTop, bot = top + display.wrapper.clientHeight;
                pixels < 0 ? top = Math.max(0, top + pixels - 50) : bot = Math.min(cm.doc.height, bot + pixels + 50), 
                updateDisplaySimple(cm, {
                    top: top,
                    bottom: bot
                });
            }
            wheelSamples < 20 && (null == display.wheelStartX ? (display.wheelStartX = scroll.scrollLeft, 
            display.wheelStartY = scroll.scrollTop, display.wheelDX = dx, display.wheelDY = dy, 
            setTimeout(function() {
                if (null != display.wheelStartX) {
                    var movedX = scroll.scrollLeft - display.wheelStartX, movedY = scroll.scrollTop - display.wheelStartY, sample = movedY && display.wheelDY && movedY / display.wheelDY || movedX && display.wheelDX && movedX / display.wheelDX;
                    display.wheelStartX = display.wheelStartY = null, sample && (wheelPixelsPerUnit = (wheelPixelsPerUnit * wheelSamples + sample) / (wheelSamples + 1), 
                    ++wheelSamples);
                }
            }, 200)) : (display.wheelDX += dx, display.wheelDY += dy));
        }
    }
    function doHandleBinding(cm, bound, dropShift) {
        if ("string" == typeof bound && !(bound = commands[bound])) return !1;
        cm.display.input.ensurePolled();
        var prevShift = cm.display.shift, done = !1;
        try {
            cm.isReadOnly() && (cm.state.suppressEdits = !0), dropShift && (cm.display.shift = !1), 
            done = bound(cm) != Pass;
        } finally {
            cm.display.shift = prevShift, cm.state.suppressEdits = !1;
        }
        return done;
    }
    function lookupKeyForEditor(cm, name, handle) {
        for (var i = 0; i < cm.state.keyMaps.length; i++) {
            var result = lookupKey(name, cm.state.keyMaps[i], handle, cm);
            if (result) return result;
        }
        return cm.options.extraKeys && lookupKey(name, cm.options.extraKeys, handle, cm) || lookupKey(name, cm.options.keyMap, handle, cm);
    }
    function dispatchKey(cm, name, e, handle) {
        var seq = cm.state.keySeq;
        if (seq) {
            if (isModifierKey(name)) return "handled";
            stopSeq.set(50, function() {
                cm.state.keySeq == seq && (cm.state.keySeq = null, cm.display.input.reset());
            }), name = seq + " " + name;
        }
        var result = lookupKeyForEditor(cm, name, handle);
        return "multi" == result && (cm.state.keySeq = name), "handled" == result && signalLater(cm, "keyHandled", cm, name, e), 
        "handled" != result && "multi" != result || (e_preventDefault(e), restartBlink(cm)), 
        seq && !result && /\'$/.test(name) ? (e_preventDefault(e), !0) : !!result;
    }
    function handleKeyBinding(cm, e) {
        var name = keyName(e, !0);
        return !!name && (e.shiftKey && !cm.state.keySeq ? dispatchKey(cm, "Shift-" + name, e, function(b) {
            return doHandleBinding(cm, b, !0);
        }) || dispatchKey(cm, name, e, function(b) {
            if ("string" == typeof b ? /^go[A-Z]/.test(b) : b.motion) return doHandleBinding(cm, b);
        }) : dispatchKey(cm, name, e, function(b) {
            return doHandleBinding(cm, b);
        }));
    }
    function handleCharBinding(cm, e, ch) {
        return dispatchKey(cm, "'" + ch + "'", e, function(b) {
            return doHandleBinding(cm, b, !0);
        });
    }
    function onKeyDown(e) {
        var cm = this;
        if (cm.curOp.focus = activeElt(), !signalDOMEvent(cm, e)) {
            ie && ie_version < 11 && 27 == e.keyCode && (e.returnValue = !1);
            var code = e.keyCode;
            cm.display.shift = 16 == code || e.shiftKey;
            var handled = handleKeyBinding(cm, e);
            presto && (lastStoppedKey = handled ? code : null, !handled && 88 == code && !hasCopyEvent && (mac ? e.metaKey : e.ctrlKey) && cm.replaceSelection("", null, "cut")), 
            18 != code || /\bCodeMirror-crosshair\b/.test(cm.display.lineDiv.className) || showCrossHair(cm);
        }
    }
    function showCrossHair(cm) {
        function up(e) {
            18 != e.keyCode && e.altKey || (rmClass(lineDiv, "CodeMirror-crosshair"), off(document, "keyup", up), 
            off(document, "mouseover", up));
        }
        var lineDiv = cm.display.lineDiv;
        addClass(lineDiv, "CodeMirror-crosshair"), on(document, "keyup", up), on(document, "mouseover", up);
    }
    function onKeyUp(e) {
        16 == e.keyCode && (this.doc.sel.shift = !1), signalDOMEvent(this, e);
    }
    function onKeyPress(e) {
        var cm = this;
        if (!(eventInWidget(cm.display, e) || signalDOMEvent(cm, e) || e.ctrlKey && !e.altKey || mac && e.metaKey)) {
            var keyCode = e.keyCode, charCode = e.charCode;
            if (presto && keyCode == lastStoppedKey) return lastStoppedKey = null, void e_preventDefault(e);
            presto && (!e.which || e.which < 10) && handleKeyBinding(cm, e) || handleCharBinding(cm, e, String.fromCharCode(null == charCode ? keyCode : charCode)) || cm.display.input.onKeyPress(e);
        }
    }
    function delayBlurEvent(cm) {
        cm.state.delayingBlurEvent = !0, setTimeout(function() {
            cm.state.delayingBlurEvent && (cm.state.delayingBlurEvent = !1, onBlur(cm));
        }, 100);
    }
    function onFocus(cm) {
        cm.state.delayingBlurEvent && (cm.state.delayingBlurEvent = !1), "nocursor" != cm.options.readOnly && (cm.state.focused || (signal(cm, "focus", cm), 
        cm.state.focused = !0, addClass(cm.display.wrapper, "CodeMirror-focused"), cm.curOp || cm.display.selForContextMenu == cm.doc.sel || (cm.display.input.reset(), 
        webkit && setTimeout(function() {
            cm.display.input.reset(!0);
        }, 20)), cm.display.input.receivedFocus()), restartBlink(cm));
    }
    function onBlur(cm) {
        cm.state.delayingBlurEvent || (cm.state.focused && (signal(cm, "blur", cm), cm.state.focused = !1, 
        rmClass(cm.display.wrapper, "CodeMirror-focused")), clearInterval(cm.display.blinker), 
        setTimeout(function() {
            cm.state.focused || (cm.display.shift = !1);
        }, 150));
    }
    function onContextMenu(cm, e) {
        eventInWidget(cm.display, e) || contextMenuInGutter(cm, e) || signalDOMEvent(cm, e, "contextmenu") || cm.display.input.onContextMenu(e);
    }
    function contextMenuInGutter(cm, e) {
        return !!hasHandler(cm, "gutterContextMenu") && gutterEvent(cm, e, "gutterContextMenu", !1);
    }
    function adjustForChange(pos, change) {
        if (cmp(pos, change.from) < 0) return pos;
        if (cmp(pos, change.to) <= 0) return changeEnd(change);
        var line = pos.line + change.text.length - (change.to.line - change.from.line) - 1, ch = pos.ch;
        return pos.line == change.to.line && (ch += changeEnd(change).ch - change.to.ch), 
        Pos(line, ch);
    }
    function computeSelAfterChange(doc, change) {
        for (var out = [], i = 0; i < doc.sel.ranges.length; i++) {
            var range = doc.sel.ranges[i];
            out.push(new Range(adjustForChange(range.anchor, change), adjustForChange(range.head, change)));
        }
        return normalizeSelection(out, doc.sel.primIndex);
    }
    function offsetPos(pos, old, nw) {
        return pos.line == old.line ? Pos(nw.line, pos.ch - old.ch + nw.ch) : Pos(nw.line + (pos.line - old.line), pos.ch);
    }
    function computeReplacedSel(doc, changes, hint) {
        for (var out = [], oldPrev = Pos(doc.first, 0), newPrev = oldPrev, i = 0; i < changes.length; i++) {
            var change = changes[i], from = offsetPos(change.from, oldPrev, newPrev), to = offsetPos(changeEnd(change), oldPrev, newPrev);
            if (oldPrev = change.to, newPrev = to, "around" == hint) {
                var range = doc.sel.ranges[i], inv = cmp(range.head, range.anchor) < 0;
                out[i] = new Range(inv ? to : from, inv ? from : to);
            } else out[i] = new Range(from, from);
        }
        return new Selection(out, doc.sel.primIndex);
    }
    function filterChange(doc, change, update) {
        var obj = {
            canceled: !1,
            from: change.from,
            to: change.to,
            text: change.text,
            origin: change.origin,
            cancel: function() {
                this.canceled = !0;
            }
        };
        return update && (obj.update = function(from, to, text, origin) {
            from && (this.from = clipPos(doc, from)), to && (this.to = clipPos(doc, to)), text && (this.text = text), 
            void 0 !== origin && (this.origin = origin);
        }), signal(doc, "beforeChange", doc, obj), doc.cm && signal(doc.cm, "beforeChange", doc.cm, obj), 
        obj.canceled ? null : {
            from: obj.from,
            to: obj.to,
            text: obj.text,
            origin: obj.origin
        };
    }
    function makeChange(doc, change, ignoreReadOnly) {
        if (doc.cm) {
            if (!doc.cm.curOp) return operation(doc.cm, makeChange)(doc, change, ignoreReadOnly);
            if (doc.cm.state.suppressEdits) return;
        }
        if (!(hasHandler(doc, "beforeChange") || doc.cm && hasHandler(doc.cm, "beforeChange")) || (change = filterChange(doc, change, !0))) {
            var split = sawReadOnlySpans && !ignoreReadOnly && removeReadOnlyRanges(doc, change.from, change.to);
            if (split) for (var i = split.length - 1; i >= 0; --i) makeChangeInner(doc, {
                from: split[i].from,
                to: split[i].to,
                text: i ? [ "" ] : change.text
            }); else makeChangeInner(doc, change);
        }
    }
    function makeChangeInner(doc, change) {
        if (1 != change.text.length || "" != change.text[0] || 0 != cmp(change.from, change.to)) {
            var selAfter = computeSelAfterChange(doc, change);
            addChangeToHistory(doc, change, selAfter, doc.cm ? doc.cm.curOp.id : NaN), makeChangeSingleDoc(doc, change, selAfter, stretchSpansOverChange(doc, change));
            var rebased = [];
            linkedDocs(doc, function(doc, sharedHist) {
                sharedHist || -1 != indexOf(rebased, doc.history) || (rebaseHist(doc.history, change), 
                rebased.push(doc.history)), makeChangeSingleDoc(doc, change, null, stretchSpansOverChange(doc, change));
            });
        }
    }
    function makeChangeFromHistory(doc, type, allowSelectionOnly) {
        if (!doc.cm || !doc.cm.state.suppressEdits) {
            for (var event, hist = doc.history, selAfter = doc.sel, source = "undo" == type ? hist.done : hist.undone, dest = "undo" == type ? hist.undone : hist.done, i = 0; i < source.length && (event = source[i], 
            allowSelectionOnly ? !event.ranges || event.equals(doc.sel) : event.ranges); i++) ;
            if (i != source.length) {
                for (hist.lastOrigin = hist.lastSelOrigin = null; (event = source.pop()).ranges; ) {
                    if (pushSelectionToHistory(event, dest), allowSelectionOnly && !event.equals(doc.sel)) return void setSelection(doc, event, {
                        clearRedo: !1
                    });
                    selAfter = event;
                }
                var antiChanges = [];
                pushSelectionToHistory(selAfter, dest), dest.push({
                    changes: antiChanges,
                    generation: hist.generation
                }), hist.generation = event.generation || ++hist.maxGeneration;
                for (var filter = hasHandler(doc, "beforeChange") || doc.cm && hasHandler(doc.cm, "beforeChange"), i = event.changes.length - 1; i >= 0; --i) {
                    var change = event.changes[i];
                    if (change.origin = type, filter && !filterChange(doc, change, !1)) return void (source.length = 0);
                    antiChanges.push(historyChangeFromChange(doc, change));
                    var after = i ? computeSelAfterChange(doc, change) : lst(source);
                    makeChangeSingleDoc(doc, change, after, mergeOldSpans(doc, change)), !i && doc.cm && doc.cm.scrollIntoView({
                        from: change.from,
                        to: changeEnd(change)
                    });
                    var rebased = [];
                    linkedDocs(doc, function(doc, sharedHist) {
                        sharedHist || -1 != indexOf(rebased, doc.history) || (rebaseHist(doc.history, change), 
                        rebased.push(doc.history)), makeChangeSingleDoc(doc, change, null, mergeOldSpans(doc, change));
                    });
                }
            }
        }
    }
    function shiftDoc(doc, distance) {
        if (0 != distance && (doc.first += distance, doc.sel = new Selection(map(doc.sel.ranges, function(range) {
            return new Range(Pos(range.anchor.line + distance, range.anchor.ch), Pos(range.head.line + distance, range.head.ch));
        }), doc.sel.primIndex), doc.cm)) {
            regChange(doc.cm, doc.first, doc.first - distance, distance);
            for (var d = doc.cm.display, l = d.viewFrom; l < d.viewTo; l++) regLineChange(doc.cm, l, "gutter");
        }
    }
    function makeChangeSingleDoc(doc, change, selAfter, spans) {
        if (doc.cm && !doc.cm.curOp) return operation(doc.cm, makeChangeSingleDoc)(doc, change, selAfter, spans);
        if (change.to.line < doc.first) shiftDoc(doc, change.text.length - 1 - (change.to.line - change.from.line)); else if (!(change.from.line > doc.lastLine())) {
            if (change.from.line < doc.first) {
                var shift = change.text.length - 1 - (doc.first - change.from.line);
                shiftDoc(doc, shift), change = {
                    from: Pos(doc.first, 0),
                    to: Pos(change.to.line + shift, change.to.ch),
                    text: [ lst(change.text) ],
                    origin: change.origin
                };
            }
            var last = doc.lastLine();
            change.to.line > last && (change = {
                from: change.from,
                to: Pos(last, getLine(doc, last).text.length),
                text: [ change.text[0] ],
                origin: change.origin
            }), change.removed = getBetween(doc, change.from, change.to), selAfter || (selAfter = computeSelAfterChange(doc, change)), 
            doc.cm ? makeChangeSingleDocInEditor(doc.cm, change, spans) : updateDoc(doc, change, spans), 
            setSelectionNoUndo(doc, selAfter, sel_dontScroll);
        }
    }
    function makeChangeSingleDocInEditor(cm, change, spans) {
        var doc = cm.doc, display = cm.display, from = change.from, to = change.to, recomputeMaxLength = !1, checkWidthStart = from.line;
        cm.options.lineWrapping || (checkWidthStart = lineNo(visualLine(getLine(doc, from.line))), 
        doc.iter(checkWidthStart, to.line + 1, function(line) {
            if (line == display.maxLine) return recomputeMaxLength = !0, !0;
        })), doc.sel.contains(change.from, change.to) > -1 && signalCursorActivity(cm), 
        updateDoc(doc, change, spans, estimateHeight(cm)), cm.options.lineWrapping || (doc.iter(checkWidthStart, from.line + change.text.length, function(line) {
            var len = lineLength(line);
            len > display.maxLineLength && (display.maxLine = line, display.maxLineLength = len, 
            display.maxLineChanged = !0, recomputeMaxLength = !1);
        }), recomputeMaxLength && (cm.curOp.updateMaxLine = !0)), doc.frontier = Math.min(doc.frontier, from.line), 
        startWorker(cm, 400);
        var lendiff = change.text.length - (to.line - from.line) - 1;
        change.full ? regChange(cm) : from.line != to.line || 1 != change.text.length || isWholeLineUpdate(cm.doc, change) ? regChange(cm, from.line, to.line + 1, lendiff) : regLineChange(cm, from.line, "text");
        var changesHandler = hasHandler(cm, "changes"), changeHandler = hasHandler(cm, "change");
        if (changeHandler || changesHandler) {
            var obj = {
                from: from,
                to: to,
                text: change.text,
                removed: change.removed,
                origin: change.origin
            };
            changeHandler && signalLater(cm, "change", cm, obj), changesHandler && (cm.curOp.changeObjs || (cm.curOp.changeObjs = [])).push(obj);
        }
        cm.display.selForContextMenu = null;
    }
    function replaceRange(doc, code, from, to, origin) {
        if (to || (to = from), cmp(to, from) < 0) {
            var tmp = to;
            to = from, from = tmp;
        }
        "string" == typeof code && (code = doc.splitLines(code)), makeChange(doc, {
            from: from,
            to: to,
            text: code,
            origin: origin
        });
    }
    function maybeScrollWindow(cm, coords) {
        if (!signalDOMEvent(cm, "scrollCursorIntoView")) {
            var display = cm.display, box = display.sizer.getBoundingClientRect(), doScroll = null;
            if (coords.top + box.top < 0 ? doScroll = !0 : coords.bottom + box.top > (window.innerHeight || document.documentElement.clientHeight) && (doScroll = !1), 
            null != doScroll && !phantom) {
                var scrollNode = elt("div", "\u200b", null, "position: absolute; top: " + (coords.top - display.viewOffset - paddingTop(cm.display)) + "px; height: " + (coords.bottom - coords.top + scrollGap(cm) + display.barHeight) + "px; left: " + coords.left + "px; width: 2px;");
                cm.display.lineSpace.appendChild(scrollNode), scrollNode.scrollIntoView(doScroll), 
                cm.display.lineSpace.removeChild(scrollNode);
            }
        }
    }
    function scrollPosIntoView(cm, pos, end, margin) {
        null == margin && (margin = 0);
        for (var limit = 0; limit < 5; limit++) {
            var changed = !1, coords = cursorCoords(cm, pos), endCoords = end && end != pos ? cursorCoords(cm, end) : coords, scrollPos = calculateScrollPos(cm, Math.min(coords.left, endCoords.left), Math.min(coords.top, endCoords.top) - margin, Math.max(coords.left, endCoords.left), Math.max(coords.bottom, endCoords.bottom) + margin), startTop = cm.doc.scrollTop, startLeft = cm.doc.scrollLeft;
            if (null != scrollPos.scrollTop && (setScrollTop(cm, scrollPos.scrollTop), Math.abs(cm.doc.scrollTop - startTop) > 1 && (changed = !0)), 
            null != scrollPos.scrollLeft && (setScrollLeft(cm, scrollPos.scrollLeft), Math.abs(cm.doc.scrollLeft - startLeft) > 1 && (changed = !0)), 
            !changed) break;
        }
        return coords;
    }
    function scrollIntoView(cm, x1, y1, x2, y2) {
        var scrollPos = calculateScrollPos(cm, x1, y1, x2, y2);
        null != scrollPos.scrollTop && setScrollTop(cm, scrollPos.scrollTop), null != scrollPos.scrollLeft && setScrollLeft(cm, scrollPos.scrollLeft);
    }
    function calculateScrollPos(cm, x1, y1, x2, y2) {
        var display = cm.display, snapMargin = textHeight(cm.display);
        y1 < 0 && (y1 = 0);
        var screentop = cm.curOp && null != cm.curOp.scrollTop ? cm.curOp.scrollTop : display.scroller.scrollTop, screen = displayHeight(cm), result = {};
        y2 - y1 > screen && (y2 = y1 + screen);
        var docBottom = cm.doc.height + paddingVert(display), atTop = y1 < snapMargin, atBottom = y2 > docBottom - snapMargin;
        if (y1 < screentop) result.scrollTop = atTop ? 0 : y1; else if (y2 > screentop + screen) {
            var newTop = Math.min(y1, (atBottom ? docBottom : y2) - screen);
            newTop != screentop && (result.scrollTop = newTop);
        }
        var screenleft = cm.curOp && null != cm.curOp.scrollLeft ? cm.curOp.scrollLeft : display.scroller.scrollLeft, screenw = displayWidth(cm) - (cm.options.fixedGutter ? display.gutters.offsetWidth : 0), tooWide = x2 - x1 > screenw;
        return tooWide && (x2 = x1 + screenw), x1 < 10 ? result.scrollLeft = 0 : x1 < screenleft ? result.scrollLeft = Math.max(0, x1 - (tooWide ? 0 : 10)) : x2 > screenw + screenleft - 3 && (result.scrollLeft = x2 + (tooWide ? 0 : 10) - screenw), 
        result;
    }
    function addToScrollPos(cm, left, top) {
        null == left && null == top || resolveScrollToPos(cm), null != left && (cm.curOp.scrollLeft = (null == cm.curOp.scrollLeft ? cm.doc.scrollLeft : cm.curOp.scrollLeft) + left), 
        null != top && (cm.curOp.scrollTop = (null == cm.curOp.scrollTop ? cm.doc.scrollTop : cm.curOp.scrollTop) + top);
    }
    function ensureCursorVisible(cm) {
        resolveScrollToPos(cm);
        var cur = cm.getCursor(), from = cur, to = cur;
        cm.options.lineWrapping || (from = cur.ch ? Pos(cur.line, cur.ch - 1) : cur, to = Pos(cur.line, cur.ch + 1)), 
        cm.curOp.scrollToPos = {
            from: from,
            to: to,
            margin: cm.options.cursorScrollMargin,
            isCursor: !0
        };
    }
    function resolveScrollToPos(cm) {
        var range = cm.curOp.scrollToPos;
        if (range) {
            cm.curOp.scrollToPos = null;
            var from = estimateCoords(cm, range.from), to = estimateCoords(cm, range.to), sPos = calculateScrollPos(cm, Math.min(from.left, to.left), Math.min(from.top, to.top) - range.margin, Math.max(from.right, to.right), Math.max(from.bottom, to.bottom) + range.margin);
            cm.scrollTo(sPos.scrollLeft, sPos.scrollTop);
        }
    }
    function indentLine(cm, n, how, aggressive) {
        var state, doc = cm.doc;
        null == how && (how = "add"), "smart" == how && (doc.mode.indent ? state = getStateBefore(cm, n) : how = "prev");
        var tabSize = cm.options.tabSize, line = getLine(doc, n), curSpace = countColumn(line.text, null, tabSize);
        line.stateAfter && (line.stateAfter = null);
        var indentation, curSpaceString = line.text.match(/^\s*/)[0];
        if (aggressive || /\S/.test(line.text)) {
            if ("smart" == how && ((indentation = doc.mode.indent(state, line.text.slice(curSpaceString.length), line.text)) == Pass || indentation > 150)) {
                if (!aggressive) return;
                how = "prev";
            }
        } else indentation = 0, how = "not";
        "prev" == how ? indentation = n > doc.first ? countColumn(getLine(doc, n - 1).text, null, tabSize) : 0 : "add" == how ? indentation = curSpace + cm.options.indentUnit : "subtract" == how ? indentation = curSpace - cm.options.indentUnit : "number" == typeof how && (indentation = curSpace + how), 
        indentation = Math.max(0, indentation);
        var indentString = "", pos = 0;
        if (cm.options.indentWithTabs) for (i = Math.floor(indentation / tabSize); i; --i) pos += tabSize, 
        indentString += "\t";
        if (pos < indentation && (indentString += spaceStr(indentation - pos)), indentString != curSpaceString) return replaceRange(doc, indentString, Pos(n, 0), Pos(n, curSpaceString.length), "+input"), 
        line.stateAfter = null, !0;
        for (var i = 0; i < doc.sel.ranges.length; i++) {
            var range = doc.sel.ranges[i];
            if (range.head.line == n && range.head.ch < curSpaceString.length) {
                replaceOneSelection(doc, i, new Range(pos = Pos(n, curSpaceString.length), pos));
                break;
            }
        }
    }
    function changeLine(doc, handle, changeType, op) {
        var no = handle, line = handle;
        return "number" == typeof handle ? line = getLine(doc, clipLine(doc, handle)) : no = lineNo(handle), 
        null == no ? null : (op(line, no) && doc.cm && regLineChange(doc.cm, no, changeType), 
        line);
    }
    function deleteNearSelection(cm, compute) {
        for (var ranges = cm.doc.sel.ranges, kill = [], i = 0; i < ranges.length; i++) {
            for (var toKill = compute(ranges[i]); kill.length && cmp(toKill.from, lst(kill).to) <= 0; ) {
                var replaced = kill.pop();
                if (cmp(replaced.from, toKill.from) < 0) {
                    toKill.from = replaced.from;
                    break;
                }
            }
            kill.push(toKill);
        }
        runInOp(cm, function() {
            for (var i = kill.length - 1; i >= 0; i--) replaceRange(cm.doc, "", kill[i].from, kill[i].to, "+delete");
            ensureCursorVisible(cm);
        });
    }
    function findPosH(doc, pos, dir, unit, visually) {
        function findNextLine() {
            var l = line + dir;
            return !(l < doc.first || l >= doc.first + doc.size) && (line = l, lineObj = getLine(doc, l));
        }
        function moveOnce(boundToLine) {
            var next = (visually ? moveVisually : moveLogically)(lineObj, ch, dir, !0);
            if (null == next) {
                if (boundToLine || !findNextLine()) return !1;
                ch = visually ? (dir < 0 ? lineRight : lineLeft)(lineObj) : dir < 0 ? lineObj.text.length : 0;
            } else ch = next;
            return !0;
        }
        var line = pos.line, ch = pos.ch, origDir = dir, lineObj = getLine(doc, line);
        if ("char" == unit) moveOnce(); else if ("column" == unit) moveOnce(!0); else if ("word" == unit || "group" == unit) for (var sawType = null, group = "group" == unit, helper = doc.cm && doc.cm.getHelper(pos, "wordChars"), first = !0; !(dir < 0) || moveOnce(!first); first = !1) {
            var cur = lineObj.text.charAt(ch) || "\n", type = isWordChar(cur, helper) ? "w" : group && "\n" == cur ? "n" : !group || /\s/.test(cur) ? null : "p";
            if (!group || first || type || (type = "s"), sawType && sawType != type) {
                dir < 0 && (dir = 1, moveOnce());
                break;
            }
            if (type && (sawType = type), dir > 0 && !moveOnce(!first)) break;
        }
        var result = skipAtomic(doc, Pos(line, ch), pos, origDir, !0);
        return cmp(pos, result) || (result.hitSide = !0), result;
    }
    function findPosV(cm, pos, dir, unit) {
        var y, doc = cm.doc, x = pos.left;
        if ("page" == unit) {
            var pageSize = Math.min(cm.display.wrapper.clientHeight, window.innerHeight || document.documentElement.clientHeight);
            y = pos.top + dir * (pageSize - (dir < 0 ? 1.5 : .5) * textHeight(cm.display));
        } else "line" == unit && (y = dir > 0 ? pos.bottom + 3 : pos.top - 3);
        for (;;) {
            var target = coordsChar(cm, x, y);
            if (!target.outside) break;
            if (dir < 0 ? y <= 0 : y >= doc.height) {
                target.hitSide = !0;
                break;
            }
            y += 5 * dir;
        }
        return target;
    }
    function option(name, deflt, handle, notOnInit) {
        CodeMirror.defaults[name] = deflt, handle && (optionHandlers[name] = notOnInit ? function(cm, val, old) {
            old != Init && handle(cm, val, old);
        } : handle);
    }
    function normalizeKeyName(name) {
        for (var alt, ctrl, shift, cmd, parts = name.split(/-(?!$)/), name = parts[parts.length - 1], i = 0; i < parts.length - 1; i++) {
            var mod = parts[i];
            if (/^(cmd|meta|m)$/i.test(mod)) cmd = !0; else if (/^a(lt)?$/i.test(mod)) alt = !0; else if (/^(c|ctrl|control)$/i.test(mod)) ctrl = !0; else {
                if (!/^s(hift)$/i.test(mod)) throw new Error("Unrecognized modifier name: " + mod);
                shift = !0;
            }
        }
        return alt && (name = "Alt-" + name), ctrl && (name = "Ctrl-" + name), cmd && (name = "Cmd-" + name), 
        shift && (name = "Shift-" + name), name;
    }
    function getKeyMap(val) {
        return "string" == typeof val ? keyMap[val] : val;
    }
    function markText(doc, from, to, options, type) {
        if (options && options.shared) return markTextShared(doc, from, to, options, type);
        if (doc.cm && !doc.cm.curOp) return operation(doc.cm, markText)(doc, from, to, options, type);
        var marker = new TextMarker(doc, type), diff = cmp(from, to);
        if (options && copyObj(options, marker, !1), diff > 0 || 0 == diff && !1 !== marker.clearWhenEmpty) return marker;
        if (marker.replacedWith && (marker.collapsed = !0, marker.widgetNode = elt("span", [ marker.replacedWith ], "CodeMirror-widget"), 
        options.handleMouseEvents || marker.widgetNode.setAttribute("cm-ignore-events", "true"), 
        options.insertLeft && (marker.widgetNode.insertLeft = !0)), marker.collapsed) {
            if (conflictingCollapsedRange(doc, from.line, from, to, marker) || from.line != to.line && conflictingCollapsedRange(doc, to.line, from, to, marker)) throw new Error("Inserting collapsed marker partially overlapping an existing one");
            sawCollapsedSpans = !0;
        }
        marker.addToHistory && addChangeToHistory(doc, {
            from: from,
            to: to,
            origin: "markText"
        }, doc.sel, NaN);
        var updateMaxLine, curLine = from.line, cm = doc.cm;
        if (doc.iter(curLine, to.line + 1, function(line) {
            cm && marker.collapsed && !cm.options.lineWrapping && visualLine(line) == cm.display.maxLine && (updateMaxLine = !0), 
            marker.collapsed && curLine != from.line && updateLineHeight(line, 0), addMarkedSpan(line, new MarkedSpan(marker, curLine == from.line ? from.ch : null, curLine == to.line ? to.ch : null)), 
            ++curLine;
        }), marker.collapsed && doc.iter(from.line, to.line + 1, function(line) {
            lineIsHidden(doc, line) && updateLineHeight(line, 0);
        }), marker.clearOnEnter && on(marker, "beforeCursorEnter", function() {
            marker.clear();
        }), marker.readOnly && (sawReadOnlySpans = !0, (doc.history.done.length || doc.history.undone.length) && doc.clearHistory()), 
        marker.collapsed && (marker.id = ++nextMarkerId, marker.atomic = !0), cm) {
            if (updateMaxLine && (cm.curOp.updateMaxLine = !0), marker.collapsed) regChange(cm, from.line, to.line + 1); else if (marker.className || marker.title || marker.startStyle || marker.endStyle || marker.css) for (var i = from.line; i <= to.line; i++) regLineChange(cm, i, "text");
            marker.atomic && reCheckSelection(cm.doc), signalLater(cm, "markerAdded", cm, marker);
        }
        return marker;
    }
    function markTextShared(doc, from, to, options, type) {
        (options = copyObj(options)).shared = !1;
        var markers = [ markText(doc, from, to, options, type) ], primary = markers[0], widget = options.widgetNode;
        return linkedDocs(doc, function(doc) {
            widget && (options.widgetNode = widget.cloneNode(!0)), markers.push(markText(doc, clipPos(doc, from), clipPos(doc, to), options, type));
            for (var i = 0; i < doc.linked.length; ++i) if (doc.linked[i].isParent) return;
            primary = lst(markers);
        }), new SharedTextMarker(markers, primary);
    }
    function findSharedMarkers(doc) {
        return doc.findMarks(Pos(doc.first, 0), doc.clipPos(Pos(doc.lastLine())), function(m) {
            return m.parent;
        });
    }
    function copySharedMarkers(doc, markers) {
        for (var i = 0; i < markers.length; i++) {
            var marker = markers[i], pos = marker.find(), mFrom = doc.clipPos(pos.from), mTo = doc.clipPos(pos.to);
            if (cmp(mFrom, mTo)) {
                var subMark = markText(doc, mFrom, mTo, marker.primary, marker.primary.type);
                marker.markers.push(subMark), subMark.parent = marker;
            }
        }
    }
    function detachSharedMarkers(markers) {
        for (var i = 0; i < markers.length; i++) {
            var marker = markers[i], linked = [ marker.primary.doc ];
            linkedDocs(marker.primary.doc, function(d) {
                linked.push(d);
            });
            for (var j = 0; j < marker.markers.length; j++) {
                var subMarker = marker.markers[j];
                -1 == indexOf(linked, subMarker.doc) && (subMarker.parent = null, marker.markers.splice(j--, 1));
            }
        }
    }
    function MarkedSpan(marker, from, to) {
        this.marker = marker, this.from = from, this.to = to;
    }
    function getMarkedSpanFor(spans, marker) {
        if (spans) for (var i = 0; i < spans.length; ++i) {
            var span = spans[i];
            if (span.marker == marker) return span;
        }
    }
    function removeMarkedSpan(spans, span) {
        for (var r, i = 0; i < spans.length; ++i) spans[i] != span && (r || (r = [])).push(spans[i]);
        return r;
    }
    function addMarkedSpan(line, span) {
        line.markedSpans = line.markedSpans ? line.markedSpans.concat([ span ]) : [ span ], 
        span.marker.attachLine(line);
    }
    function markedSpansBefore(old, startCh, isInsert) {
        if (old) for (var nw, i = 0; i < old.length; ++i) {
            var span = old[i], marker = span.marker;
            if (null == span.from || (marker.inclusiveLeft ? span.from <= startCh : span.from < startCh) || span.from == startCh && "bookmark" == marker.type && (!isInsert || !span.marker.insertLeft)) {
                var endsAfter = null == span.to || (marker.inclusiveRight ? span.to >= startCh : span.to > startCh);
                (nw || (nw = [])).push(new MarkedSpan(marker, span.from, endsAfter ? null : span.to));
            }
        }
        return nw;
    }
    function markedSpansAfter(old, endCh, isInsert) {
        if (old) for (var nw, i = 0; i < old.length; ++i) {
            var span = old[i], marker = span.marker;
            if (null == span.to || (marker.inclusiveRight ? span.to >= endCh : span.to > endCh) || span.from == endCh && "bookmark" == marker.type && (!isInsert || span.marker.insertLeft)) {
                var startsBefore = null == span.from || (marker.inclusiveLeft ? span.from <= endCh : span.from < endCh);
                (nw || (nw = [])).push(new MarkedSpan(marker, startsBefore ? null : span.from - endCh, null == span.to ? null : span.to - endCh));
            }
        }
        return nw;
    }
    function stretchSpansOverChange(doc, change) {
        if (change.full) return null;
        var oldFirst = isLine(doc, change.from.line) && getLine(doc, change.from.line).markedSpans, oldLast = isLine(doc, change.to.line) && getLine(doc, change.to.line).markedSpans;
        if (!oldFirst && !oldLast) return null;
        var startCh = change.from.ch, endCh = change.to.ch, isInsert = 0 == cmp(change.from, change.to), first = markedSpansBefore(oldFirst, startCh, isInsert), last = markedSpansAfter(oldLast, endCh, isInsert), sameLine = 1 == change.text.length, offset = lst(change.text).length + (sameLine ? startCh : 0);
        if (first) for (i = 0; i < first.length; ++i) null == (span = first[i]).to && ((found = getMarkedSpanFor(last, span.marker)) ? sameLine && (span.to = null == found.to ? null : found.to + offset) : span.to = startCh);
        if (last) for (i = 0; i < last.length; ++i) {
            var span = last[i];
            if (null != span.to && (span.to += offset), null == span.from) {
                var found = getMarkedSpanFor(first, span.marker);
                found || (span.from = offset, sameLine && (first || (first = [])).push(span));
            } else span.from += offset, sameLine && (first || (first = [])).push(span);
        }
        first && (first = clearEmptySpans(first)), last && last != first && (last = clearEmptySpans(last));
        var newMarkers = [ first ];
        if (!sameLine) {
            var gapMarkers, gap = change.text.length - 2;
            if (gap > 0 && first) for (i = 0; i < first.length; ++i) null == first[i].to && (gapMarkers || (gapMarkers = [])).push(new MarkedSpan(first[i].marker, null, null));
            for (var i = 0; i < gap; ++i) newMarkers.push(gapMarkers);
            newMarkers.push(last);
        }
        return newMarkers;
    }
    function clearEmptySpans(spans) {
        for (var i = 0; i < spans.length; ++i) {
            var span = spans[i];
            null != span.from && span.from == span.to && !1 !== span.marker.clearWhenEmpty && spans.splice(i--, 1);
        }
        return spans.length ? spans : null;
    }
    function mergeOldSpans(doc, change) {
        var old = getOldSpans(doc, change), stretched = stretchSpansOverChange(doc, change);
        if (!old) return stretched;
        if (!stretched) return old;
        for (var i = 0; i < old.length; ++i) {
            var oldCur = old[i], stretchCur = stretched[i];
            if (oldCur && stretchCur) spans: for (var j = 0; j < stretchCur.length; ++j) {
                for (var span = stretchCur[j], k = 0; k < oldCur.length; ++k) if (oldCur[k].marker == span.marker) continue spans;
                oldCur.push(span);
            } else stretchCur && (old[i] = stretchCur);
        }
        return old;
    }
    function removeReadOnlyRanges(doc, from, to) {
        var markers = null;
        if (doc.iter(from.line, to.line + 1, function(line) {
            if (line.markedSpans) for (var i = 0; i < line.markedSpans.length; ++i) {
                var mark = line.markedSpans[i].marker;
                !mark.readOnly || markers && -1 != indexOf(markers, mark) || (markers || (markers = [])).push(mark);
            }
        }), !markers) return null;
        for (var parts = [ {
            from: from,
            to: to
        } ], i = 0; i < markers.length; ++i) for (var mk = markers[i], m = mk.find(0), j = 0; j < parts.length; ++j) {
            var p = parts[j];
            if (!(cmp(p.to, m.from) < 0 || cmp(p.from, m.to) > 0)) {
                var newParts = [ j, 1 ], dfrom = cmp(p.from, m.from), dto = cmp(p.to, m.to);
                (dfrom < 0 || !mk.inclusiveLeft && !dfrom) && newParts.push({
                    from: p.from,
                    to: m.from
                }), (dto > 0 || !mk.inclusiveRight && !dto) && newParts.push({
                    from: m.to,
                    to: p.to
                }), parts.splice.apply(parts, newParts), j += newParts.length - 1;
            }
        }
        return parts;
    }
    function detachMarkedSpans(line) {
        var spans = line.markedSpans;
        if (spans) {
            for (var i = 0; i < spans.length; ++i) spans[i].marker.detachLine(line);
            line.markedSpans = null;
        }
    }
    function attachMarkedSpans(line, spans) {
        if (spans) {
            for (var i = 0; i < spans.length; ++i) spans[i].marker.attachLine(line);
            line.markedSpans = spans;
        }
    }
    function extraLeft(marker) {
        return marker.inclusiveLeft ? -1 : 0;
    }
    function extraRight(marker) {
        return marker.inclusiveRight ? 1 : 0;
    }
    function compareCollapsedMarkers(a, b) {
        var lenDiff = a.lines.length - b.lines.length;
        if (0 != lenDiff) return lenDiff;
        var aPos = a.find(), bPos = b.find(), fromCmp = cmp(aPos.from, bPos.from) || extraLeft(a) - extraLeft(b);
        if (fromCmp) return -fromCmp;
        var toCmp = cmp(aPos.to, bPos.to) || extraRight(a) - extraRight(b);
        return toCmp || b.id - a.id;
    }
    function collapsedSpanAtSide(line, start) {
        var found, sps = sawCollapsedSpans && line.markedSpans;
        if (sps) for (var sp, i = 0; i < sps.length; ++i) (sp = sps[i]).marker.collapsed && null == (start ? sp.from : sp.to) && (!found || compareCollapsedMarkers(found, sp.marker) < 0) && (found = sp.marker);
        return found;
    }
    function collapsedSpanAtStart(line) {
        return collapsedSpanAtSide(line, !0);
    }
    function collapsedSpanAtEnd(line) {
        return collapsedSpanAtSide(line, !1);
    }
    function conflictingCollapsedRange(doc, lineNo, from, to, marker) {
        var line = getLine(doc, lineNo), sps = sawCollapsedSpans && line.markedSpans;
        if (sps) for (var i = 0; i < sps.length; ++i) {
            var sp = sps[i];
            if (sp.marker.collapsed) {
                var found = sp.marker.find(0), fromCmp = cmp(found.from, from) || extraLeft(sp.marker) - extraLeft(marker), toCmp = cmp(found.to, to) || extraRight(sp.marker) - extraRight(marker);
                if (!(fromCmp >= 0 && toCmp <= 0 || fromCmp <= 0 && toCmp >= 0) && (fromCmp <= 0 && (sp.marker.inclusiveRight && marker.inclusiveLeft ? cmp(found.to, from) >= 0 : cmp(found.to, from) > 0) || fromCmp >= 0 && (sp.marker.inclusiveRight && marker.inclusiveLeft ? cmp(found.from, to) <= 0 : cmp(found.from, to) < 0))) return !0;
            }
        }
    }
    function visualLine(line) {
        for (var merged; merged = collapsedSpanAtStart(line); ) line = merged.find(-1, !0).line;
        return line;
    }
    function visualLineContinued(line) {
        for (var merged, lines; merged = collapsedSpanAtEnd(line); ) line = merged.find(1, !0).line, 
        (lines || (lines = [])).push(line);
        return lines;
    }
    function visualLineNo(doc, lineN) {
        var line = getLine(doc, lineN), vis = visualLine(line);
        return line == vis ? lineN : lineNo(vis);
    }
    function visualLineEndNo(doc, lineN) {
        if (lineN > doc.lastLine()) return lineN;
        var merged, line = getLine(doc, lineN);
        if (!lineIsHidden(doc, line)) return lineN;
        for (;merged = collapsedSpanAtEnd(line); ) line = merged.find(1, !0).line;
        return lineNo(line) + 1;
    }
    function lineIsHidden(doc, line) {
        var sps = sawCollapsedSpans && line.markedSpans;
        if (sps) for (var sp, i = 0; i < sps.length; ++i) if ((sp = sps[i]).marker.collapsed) {
            if (null == sp.from) return !0;
            if (!sp.marker.widgetNode && 0 == sp.from && sp.marker.inclusiveLeft && lineIsHiddenInner(doc, line, sp)) return !0;
        }
    }
    function lineIsHiddenInner(doc, line, span) {
        if (null == span.to) {
            var end = span.marker.find(1, !0);
            return lineIsHiddenInner(doc, end.line, getMarkedSpanFor(end.line.markedSpans, span.marker));
        }
        if (span.marker.inclusiveRight && span.to == line.text.length) return !0;
        for (var sp, i = 0; i < line.markedSpans.length; ++i) if ((sp = line.markedSpans[i]).marker.collapsed && !sp.marker.widgetNode && sp.from == span.to && (null == sp.to || sp.to != span.from) && (sp.marker.inclusiveLeft || span.marker.inclusiveRight) && lineIsHiddenInner(doc, line, sp)) return !0;
    }
    function adjustScrollWhenAboveVisible(cm, line, diff) {
        heightAtLine(line) < (cm.curOp && cm.curOp.scrollTop || cm.doc.scrollTop) && addToScrollPos(cm, null, diff);
    }
    function widgetHeight(widget) {
        if (null != widget.height) return widget.height;
        var cm = widget.doc.cm;
        if (!cm) return 0;
        if (!contains(document.body, widget.node)) {
            var parentStyle = "position: relative;";
            widget.coverGutter && (parentStyle += "margin-left: -" + cm.display.gutters.offsetWidth + "px;"), 
            widget.noHScroll && (parentStyle += "width: " + cm.display.wrapper.clientWidth + "px;"), 
            removeChildrenAndAdd(cm.display.measure, elt("div", [ widget.node ], null, parentStyle));
        }
        return widget.height = widget.node.parentNode.offsetHeight;
    }
    function addLineWidget(doc, handle, node, options) {
        var widget = new LineWidget(doc, node, options), cm = doc.cm;
        return cm && widget.noHScroll && (cm.display.alignWidgets = !0), changeLine(doc, handle, "widget", function(line) {
            var widgets = line.widgets || (line.widgets = []);
            if (null == widget.insertAt ? widgets.push(widget) : widgets.splice(Math.min(widgets.length - 1, Math.max(0, widget.insertAt)), 0, widget), 
            widget.line = line, cm && !lineIsHidden(doc, line)) {
                var aboveVisible = heightAtLine(line) < doc.scrollTop;
                updateLineHeight(line, line.height + widgetHeight(widget)), aboveVisible && addToScrollPos(cm, null, widget.height), 
                cm.curOp.forceUpdate = !0;
            }
            return !0;
        }), widget;
    }
    function updateLine(line, text, markedSpans, estimateHeight) {
        line.text = text, line.stateAfter && (line.stateAfter = null), line.styles && (line.styles = null), 
        null != line.order && (line.order = null), detachMarkedSpans(line), attachMarkedSpans(line, markedSpans);
        var estHeight = estimateHeight ? estimateHeight(line) : 1;
        estHeight != line.height && updateLineHeight(line, estHeight);
    }
    function cleanUpLine(line) {
        line.parent = null, detachMarkedSpans(line);
    }
    function extractLineClasses(type, output) {
        if (type) for (;;) {
            var lineClass = type.match(/(?:^|\s+)line-(background-)?(\S+)/);
            if (!lineClass) break;
            type = type.slice(0, lineClass.index) + type.slice(lineClass.index + lineClass[0].length);
            var prop = lineClass[1] ? "bgClass" : "textClass";
            null == output[prop] ? output[prop] = lineClass[2] : new RegExp("(?:^|s)" + lineClass[2] + "(?:$|s)").test(output[prop]) || (output[prop] += " " + lineClass[2]);
        }
        return type;
    }
    function callBlankLine(mode, state) {
        if (mode.blankLine) return mode.blankLine(state);
        if (mode.innerMode) {
            var inner = CodeMirror.innerMode(mode, state);
            return inner.mode.blankLine ? inner.mode.blankLine(inner.state) : void 0;
        }
    }
    function readToken(mode, stream, state, inner) {
        for (var i = 0; i < 10; i++) {
            inner && (inner[0] = CodeMirror.innerMode(mode, state).mode);
            var style = mode.token(stream, state);
            if (stream.pos > stream.start) return style;
        }
        throw new Error("Mode " + mode.name + " failed to advance stream.");
    }
    function takeToken(cm, pos, precise, asArray) {
        function getObj(copy) {
            return {
                start: stream.start,
                end: stream.pos,
                string: stream.current(),
                type: style || null,
                state: copy ? copyState(doc.mode, state) : state
            };
        }
        var style, doc = cm.doc, mode = doc.mode;
        pos = clipPos(doc, pos);
        var tokens, line = getLine(doc, pos.line), state = getStateBefore(cm, pos.line, precise), stream = new StringStream(line.text, cm.options.tabSize);
        for (asArray && (tokens = []); (asArray || stream.pos < pos.ch) && !stream.eol(); ) stream.start = stream.pos, 
        style = readToken(mode, stream, state), asArray && tokens.push(getObj(!0));
        return asArray ? tokens : getObj();
    }
    function runMode(cm, text, mode, state, f, lineClasses, forceToEnd) {
        var flattenSpans = mode.flattenSpans;
        null == flattenSpans && (flattenSpans = cm.options.flattenSpans);
        var style, curStart = 0, curStyle = null, stream = new StringStream(text, cm.options.tabSize), inner = cm.options.addModeClass && [ null ];
        for ("" == text && extractLineClasses(callBlankLine(mode, state), lineClasses); !stream.eol(); ) {
            if (stream.pos > cm.options.maxHighlightLength ? (flattenSpans = !1, forceToEnd && processLine(cm, text, state, stream.pos), 
            stream.pos = text.length, style = null) : style = extractLineClasses(readToken(mode, stream, state, inner), lineClasses), 
            inner) {
                var mName = inner[0].name;
                mName && (style = "m-" + (style ? mName + " " + style : mName));
            }
            if (!flattenSpans || curStyle != style) {
                for (;curStart < stream.start; ) f(curStart = Math.min(stream.start, curStart + 5e4), curStyle);
                curStyle = style;
            }
            stream.start = stream.pos;
        }
        for (;curStart < stream.pos; ) {
            var pos = Math.min(stream.pos, curStart + 5e4);
            f(pos, curStyle), curStart = pos;
        }
    }
    function highlightLine(cm, line, state, forceToEnd) {
        var st = [ cm.state.modeGen ], lineClasses = {};
        runMode(cm, line.text, cm.doc.mode, state, function(end, style) {
            st.push(end, style);
        }, lineClasses, forceToEnd);
        for (var o = 0; o < cm.state.overlays.length; ++o) {
            var overlay = cm.state.overlays[o], i = 1, at = 0;
            runMode(cm, line.text, overlay.mode, !0, function(end, style) {
                for (var start = i; at < end; ) {
                    var i_end = st[i];
                    i_end > end && st.splice(i, 1, end, st[i + 1], i_end), i += 2, at = Math.min(end, i_end);
                }
                if (style) if (overlay.opaque) st.splice(start, i - start, end, "cm-overlay " + style), 
                i = start + 2; else for (;start < i; start += 2) {
                    var cur = st[start + 1];
                    st[start + 1] = (cur ? cur + " " : "") + "cm-overlay " + style;
                }
            }, lineClasses);
        }
        return {
            styles: st,
            classes: lineClasses.bgClass || lineClasses.textClass ? lineClasses : null
        };
    }
    function getLineStyles(cm, line, updateFrontier) {
        if (!line.styles || line.styles[0] != cm.state.modeGen) {
            var state = getStateBefore(cm, lineNo(line)), result = highlightLine(cm, line, line.text.length > cm.options.maxHighlightLength ? copyState(cm.doc.mode, state) : state);
            line.stateAfter = state, line.styles = result.styles, result.classes ? line.styleClasses = result.classes : line.styleClasses && (line.styleClasses = null), 
            updateFrontier === cm.doc.frontier && cm.doc.frontier++;
        }
        return line.styles;
    }
    function processLine(cm, text, state, startAt) {
        var mode = cm.doc.mode, stream = new StringStream(text, cm.options.tabSize);
        for (stream.start = stream.pos = startAt || 0, "" == text && callBlankLine(mode, state); !stream.eol(); ) readToken(mode, stream, state), 
        stream.start = stream.pos;
    }
    function interpretTokenStyle(style, options) {
        if (!style || /^\s*$/.test(style)) return null;
        var cache = options.addModeClass ? styleToClassCacheWithMode : styleToClassCache;
        return cache[style] || (cache[style] = style.replace(/\S+/g, "cm-$&"));
    }
    function buildLineContent(cm, lineView) {
        var content = elt("span", null, null, webkit ? "padding-right: .1px" : null), builder = {
            pre: elt("pre", [ content ], "CodeMirror-line"),
            content: content,
            col: 0,
            pos: 0,
            cm: cm,
            splitSpaces: (ie || webkit) && cm.getOption("lineWrapping")
        };
        lineView.measure = {};
        for (var i = 0; i <= (lineView.rest ? lineView.rest.length : 0); i++) {
            var order, line = i ? lineView.rest[i - 1] : lineView.line;
            builder.pos = 0, builder.addToken = buildToken, hasBadBidiRects(cm.display.measure) && (order = getOrder(line)) && (builder.addToken = buildTokenBadBidi(builder.addToken, order)), 
            builder.map = [], insertLineContent(line, builder, getLineStyles(cm, line, lineView != cm.display.externalMeasured && lineNo(line))), 
            line.styleClasses && (line.styleClasses.bgClass && (builder.bgClass = joinClasses(line.styleClasses.bgClass, builder.bgClass || "")), 
            line.styleClasses.textClass && (builder.textClass = joinClasses(line.styleClasses.textClass, builder.textClass || ""))), 
            0 == builder.map.length && builder.map.push(0, 0, builder.content.appendChild(zeroWidthElement(cm.display.measure))), 
            0 == i ? (lineView.measure.map = builder.map, lineView.measure.cache = {}) : ((lineView.measure.maps || (lineView.measure.maps = [])).push(builder.map), 
            (lineView.measure.caches || (lineView.measure.caches = [])).push({}));
        }
        if (webkit) {
            var last = builder.content.lastChild;
            (/\bcm-tab\b/.test(last.className) || last.querySelector && last.querySelector(".cm-tab")) && (builder.content.className = "cm-tab-wrap-hack");
        }
        return signal(cm, "renderLine", cm, lineView.line, builder.pre), builder.pre.className && (builder.textClass = joinClasses(builder.pre.className, builder.textClass || "")), 
        builder;
    }
    function buildToken(builder, text, style, startStyle, endStyle, title, css) {
        if (text) {
            var displayText = builder.splitSpaces ? text.replace(/ {3,}/g, splitSpaces) : text, special = builder.cm.state.specialChars, mustWrap = !1;
            if (special.test(text)) for (var content = document.createDocumentFragment(), pos = 0; ;) {
                special.lastIndex = pos;
                var m = special.exec(text), skipped = m ? m.index - pos : text.length - pos;
                if (skipped) {
                    var txt = document.createTextNode(displayText.slice(pos, pos + skipped));
                    ie && ie_version < 9 ? content.appendChild(elt("span", [ txt ])) : content.appendChild(txt), 
                    builder.map.push(builder.pos, builder.pos + skipped, txt), builder.col += skipped, 
                    builder.pos += skipped;
                }
                if (!m) break;
                if (pos += skipped + 1, "\t" == m[0]) {
                    var tabSize = builder.cm.options.tabSize, tabWidth = tabSize - builder.col % tabSize;
                    (txt = content.appendChild(elt("span", spaceStr(tabWidth), "cm-tab"))).setAttribute("role", "presentation"), 
                    txt.setAttribute("cm-text", "\t"), builder.col += tabWidth;
                } else "\r" == m[0] || "\n" == m[0] ? ((txt = content.appendChild(elt("span", "\r" == m[0] ? "\u240d" : "\u2424", "cm-invalidchar"))).setAttribute("cm-text", m[0]), 
                builder.col += 1) : ((txt = builder.cm.options.specialCharPlaceholder(m[0])).setAttribute("cm-text", m[0]), 
                ie && ie_version < 9 ? content.appendChild(elt("span", [ txt ])) : content.appendChild(txt), 
                builder.col += 1);
                builder.map.push(builder.pos, builder.pos + 1, txt), builder.pos++;
            } else {
                builder.col += text.length;
                content = document.createTextNode(displayText);
                builder.map.push(builder.pos, builder.pos + text.length, content), ie && ie_version < 9 && (mustWrap = !0), 
                builder.pos += text.length;
            }
            if (style || startStyle || endStyle || mustWrap || css) {
                var fullStyle = style || "";
                startStyle && (fullStyle += startStyle), endStyle && (fullStyle += endStyle);
                var token = elt("span", [ content ], fullStyle, css);
                return title && (token.title = title), builder.content.appendChild(token);
            }
            builder.content.appendChild(content);
        }
    }
    function splitSpaces(old) {
        for (var out = " ", i = 0; i < old.length - 2; ++i) out += i % 2 ? " " : "\xa0";
        return out += " ";
    }
    function buildTokenBadBidi(inner, order) {
        return function(builder, text, style, startStyle, endStyle, title, css) {
            style = style ? style + " cm-force-border" : "cm-force-border";
            for (var start = builder.pos, end = start + text.length; ;) {
                for (var i = 0; i < order.length; i++) {
                    var part = order[i];
                    if (part.to > start && part.from <= start) break;
                }
                if (part.to >= end) return inner(builder, text, style, startStyle, endStyle, title, css);
                inner(builder, text.slice(0, part.to - start), style, startStyle, null, title, css), 
                startStyle = null, text = text.slice(part.to - start), start = part.to;
            }
        };
    }
    function buildCollapsedSpan(builder, size, marker, ignoreWidget) {
        var widget = !ignoreWidget && marker.widgetNode;
        widget && builder.map.push(builder.pos, builder.pos + size, widget), !ignoreWidget && builder.cm.display.input.needsContentAttribute && (widget || (widget = builder.content.appendChild(document.createElement("span"))), 
        widget.setAttribute("cm-marker", marker.id)), widget && (builder.cm.display.input.setUneditable(widget), 
        builder.content.appendChild(widget)), builder.pos += size;
    }
    function insertLineContent(line, builder, styles) {
        var spans = line.markedSpans, allText = line.text, at = 0;
        if (spans) for (var style, css, spanStyle, spanEndStyle, spanStartStyle, title, collapsed, len = allText.length, pos = 0, i = 1, text = "", nextChange = 0; ;) {
            if (nextChange == pos) {
                spanStyle = spanEndStyle = spanStartStyle = title = css = "", collapsed = null, 
                nextChange = 1 / 0;
                for (var endStyles, foundBookmarks = [], j = 0; j < spans.length; ++j) {
                    var sp = spans[j], m = sp.marker;
                    "bookmark" == m.type && sp.from == pos && m.widgetNode ? foundBookmarks.push(m) : sp.from <= pos && (null == sp.to || sp.to > pos || m.collapsed && sp.to == pos && sp.from == pos) ? (null != sp.to && sp.to != pos && nextChange > sp.to && (nextChange = sp.to, 
                    spanEndStyle = ""), m.className && (spanStyle += " " + m.className), m.css && (css = (css ? css + ";" : "") + m.css), 
                    m.startStyle && sp.from == pos && (spanStartStyle += " " + m.startStyle), m.endStyle && sp.to == nextChange && (endStyles || (endStyles = [])).push(m.endStyle, sp.to), 
                    m.title && !title && (title = m.title), m.collapsed && (!collapsed || compareCollapsedMarkers(collapsed.marker, m) < 0) && (collapsed = sp)) : sp.from > pos && nextChange > sp.from && (nextChange = sp.from);
                }
                if (endStyles) for (j = 0; j < endStyles.length; j += 2) endStyles[j + 1] == nextChange && (spanEndStyle += " " + endStyles[j]);
                if (!collapsed || collapsed.from == pos) for (j = 0; j < foundBookmarks.length; ++j) buildCollapsedSpan(builder, 0, foundBookmarks[j]);
                if (collapsed && (collapsed.from || 0) == pos) {
                    if (buildCollapsedSpan(builder, (null == collapsed.to ? len + 1 : collapsed.to) - pos, collapsed.marker, null == collapsed.from), 
                    null == collapsed.to) return;
                    collapsed.to == pos && (collapsed = !1);
                }
            }
            if (pos >= len) break;
            for (var upto = Math.min(len, nextChange); ;) {
                if (text) {
                    var end = pos + text.length;
                    if (!collapsed) {
                        var tokenText = end > upto ? text.slice(0, upto - pos) : text;
                        builder.addToken(builder, tokenText, style ? style + spanStyle : spanStyle, spanStartStyle, pos + tokenText.length == nextChange ? spanEndStyle : "", title, css);
                    }
                    if (end >= upto) {
                        text = text.slice(upto - pos), pos = upto;
                        break;
                    }
                    pos = end, spanStartStyle = "";
                }
                text = allText.slice(at, at = styles[i++]), style = interpretTokenStyle(styles[i++], builder.cm.options);
            }
        } else for (i = 1; i < styles.length; i += 2) builder.addToken(builder, allText.slice(at, at = styles[i]), interpretTokenStyle(styles[i + 1], builder.cm.options));
    }
    function isWholeLineUpdate(doc, change) {
        return 0 == change.from.ch && 0 == change.to.ch && "" == lst(change.text) && (!doc.cm || doc.cm.options.wholeLineUpdateBefore);
    }
    function updateDoc(doc, change, markedSpans, estimateHeight) {
        function spansFor(n) {
            return markedSpans ? markedSpans[n] : null;
        }
        function update(line, text, spans) {
            updateLine(line, text, spans, estimateHeight), signalLater(line, "change", line, change);
        }
        function linesFor(start, end) {
            for (var i = start, result = []; i < end; ++i) result.push(new Line(text[i], spansFor(i), estimateHeight));
            return result;
        }
        var from = change.from, to = change.to, text = change.text, firstLine = getLine(doc, from.line), lastLine = getLine(doc, to.line), lastText = lst(text), lastSpans = spansFor(text.length - 1), nlines = to.line - from.line;
        if (change.full) doc.insert(0, linesFor(0, text.length)), doc.remove(text.length, doc.size - text.length); else if (isWholeLineUpdate(doc, change)) {
            added = linesFor(0, text.length - 1);
            update(lastLine, lastLine.text, lastSpans), nlines && doc.remove(from.line, nlines), 
            added.length && doc.insert(from.line, added);
        } else if (firstLine == lastLine) 1 == text.length ? update(firstLine, firstLine.text.slice(0, from.ch) + lastText + firstLine.text.slice(to.ch), lastSpans) : ((added = linesFor(1, text.length - 1)).push(new Line(lastText + firstLine.text.slice(to.ch), lastSpans, estimateHeight)), 
        update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0)), doc.insert(from.line + 1, added)); else if (1 == text.length) update(firstLine, firstLine.text.slice(0, from.ch) + text[0] + lastLine.text.slice(to.ch), spansFor(0)), 
        doc.remove(from.line + 1, nlines); else {
            update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0)), update(lastLine, lastText + lastLine.text.slice(to.ch), lastSpans);
            var added = linesFor(1, text.length - 1);
            nlines > 1 && doc.remove(from.line + 1, nlines - 1), doc.insert(from.line + 1, added);
        }
        signalLater(doc, "change", doc, change);
    }
    function LeafChunk(lines) {
        this.lines = lines, this.parent = null;
        for (var i = 0, height = 0; i < lines.length; ++i) lines[i].parent = this, height += lines[i].height;
        this.height = height;
    }
    function BranchChunk(children) {
        this.children = children;
        for (var size = 0, height = 0, i = 0; i < children.length; ++i) {
            var ch = children[i];
            size += ch.chunkSize(), height += ch.height, ch.parent = this;
        }
        this.size = size, this.height = height, this.parent = null;
    }
    function linkedDocs(doc, f, sharedHistOnly) {
        function propagate(doc, skip, sharedHist) {
            if (doc.linked) for (var i = 0; i < doc.linked.length; ++i) {
                var rel = doc.linked[i];
                if (rel.doc != skip) {
                    var shared = sharedHist && rel.sharedHist;
                    sharedHistOnly && !shared || (f(rel.doc, shared), propagate(rel.doc, doc, shared));
                }
            }
        }
        propagate(doc, null, !0);
    }
    function attachDoc(cm, doc) {
        if (doc.cm) throw new Error("This document is already in use.");
        cm.doc = doc, doc.cm = cm, estimateLineHeights(cm), loadMode(cm), cm.options.lineWrapping || findMaxLine(cm), 
        cm.options.mode = doc.modeOption, regChange(cm);
    }
    function getLine(doc, n) {
        if ((n -= doc.first) < 0 || n >= doc.size) throw new Error("There is no line " + (n + doc.first) + " in the document.");
        for (var chunk = doc; !chunk.lines; ) for (var i = 0; ;++i) {
            var child = chunk.children[i], sz = child.chunkSize();
            if (n < sz) {
                chunk = child;
                break;
            }
            n -= sz;
        }
        return chunk.lines[n];
    }
    function getBetween(doc, start, end) {
        var out = [], n = start.line;
        return doc.iter(start.line, end.line + 1, function(line) {
            var text = line.text;
            n == end.line && (text = text.slice(0, end.ch)), n == start.line && (text = text.slice(start.ch)), 
            out.push(text), ++n;
        }), out;
    }
    function getLines(doc, from, to) {
        var out = [];
        return doc.iter(from, to, function(line) {
            out.push(line.text);
        }), out;
    }
    function updateLineHeight(line, height) {
        var diff = height - line.height;
        if (diff) for (var n = line; n; n = n.parent) n.height += diff;
    }
    function lineNo(line) {
        if (null == line.parent) return null;
        for (var cur = line.parent, no = indexOf(cur.lines, line), chunk = cur.parent; chunk; cur = chunk, 
        chunk = chunk.parent) for (var i = 0; chunk.children[i] != cur; ++i) no += chunk.children[i].chunkSize();
        return no + cur.first;
    }
    function lineAtHeight(chunk, h) {
        var n = chunk.first;
        outer: do {
            for (i = 0; i < chunk.children.length; ++i) {
                var child = chunk.children[i], ch = child.height;
                if (h < ch) {
                    chunk = child;
                    continue outer;
                }
                h -= ch, n += child.chunkSize();
            }
            return n;
        } while (!chunk.lines);
        for (var i = 0; i < chunk.lines.length; ++i) {
            var lh = chunk.lines[i].height;
            if (h < lh) break;
            h -= lh;
        }
        return n + i;
    }
    function heightAtLine(lineObj) {
        for (var h = 0, chunk = (lineObj = visualLine(lineObj)).parent, i = 0; i < chunk.lines.length; ++i) {
            var line = chunk.lines[i];
            if (line == lineObj) break;
            h += line.height;
        }
        for (var p = chunk.parent; p; chunk = p, p = chunk.parent) for (i = 0; i < p.children.length; ++i) {
            var cur = p.children[i];
            if (cur == chunk) break;
            h += cur.height;
        }
        return h;
    }
    function getOrder(line) {
        var order = line.order;
        return null == order && (order = line.order = bidiOrdering(line.text)), order;
    }
    function History(startGen) {
        this.done = [], this.undone = [], this.undoDepth = 1 / 0, this.lastModTime = this.lastSelTime = 0, 
        this.lastOp = this.lastSelOp = null, this.lastOrigin = this.lastSelOrigin = null, 
        this.generation = this.maxGeneration = startGen || 1;
    }
    function historyChangeFromChange(doc, change) {
        var histChange = {
            from: copyPos(change.from),
            to: changeEnd(change),
            text: getBetween(doc, change.from, change.to)
        };
        return attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1), 
        linkedDocs(doc, function(doc) {
            attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1);
        }, !0), histChange;
    }
    function clearSelectionEvents(array) {
        for (;array.length && lst(array).ranges; ) array.pop();
    }
    function lastChangeEvent(hist, force) {
        return force ? (clearSelectionEvents(hist.done), lst(hist.done)) : hist.done.length && !lst(hist.done).ranges ? lst(hist.done) : hist.done.length > 1 && !hist.done[hist.done.length - 2].ranges ? (hist.done.pop(), 
        lst(hist.done)) : void 0;
    }
    function addChangeToHistory(doc, change, selAfter, opId) {
        var hist = doc.history;
        hist.undone.length = 0;
        var cur, time = +new Date();
        if ((hist.lastOp == opId || hist.lastOrigin == change.origin && change.origin && ("+" == change.origin.charAt(0) && doc.cm && hist.lastModTime > time - doc.cm.options.historyEventDelay || "*" == change.origin.charAt(0))) && (cur = lastChangeEvent(hist, hist.lastOp == opId))) {
            var last = lst(cur.changes);
            0 == cmp(change.from, change.to) && 0 == cmp(change.from, last.to) ? last.to = changeEnd(change) : cur.changes.push(historyChangeFromChange(doc, change));
        } else {
            var before = lst(hist.done);
            for (before && before.ranges || pushSelectionToHistory(doc.sel, hist.done), cur = {
                changes: [ historyChangeFromChange(doc, change) ],
                generation: hist.generation
            }, hist.done.push(cur); hist.done.length > hist.undoDepth; ) hist.done.shift(), 
            hist.done[0].ranges || hist.done.shift();
        }
        hist.done.push(selAfter), hist.generation = ++hist.maxGeneration, hist.lastModTime = hist.lastSelTime = time, 
        hist.lastOp = hist.lastSelOp = opId, hist.lastOrigin = hist.lastSelOrigin = change.origin, 
        last || signal(doc, "historyAdded");
    }
    function selectionEventCanBeMerged(doc, origin, prev, sel) {
        var ch = origin.charAt(0);
        return "*" == ch || "+" == ch && prev.ranges.length == sel.ranges.length && prev.somethingSelected() == sel.somethingSelected() && new Date() - doc.history.lastSelTime <= (doc.cm ? doc.cm.options.historyEventDelay : 500);
    }
    function addSelectionToHistory(doc, sel, opId, options) {
        var hist = doc.history, origin = options && options.origin;
        opId == hist.lastSelOp || origin && hist.lastSelOrigin == origin && (hist.lastModTime == hist.lastSelTime && hist.lastOrigin == origin || selectionEventCanBeMerged(doc, origin, lst(hist.done), sel)) ? hist.done[hist.done.length - 1] = sel : pushSelectionToHistory(sel, hist.done), 
        hist.lastSelTime = +new Date(), hist.lastSelOrigin = origin, hist.lastSelOp = opId, 
        options && !1 !== options.clearRedo && clearSelectionEvents(hist.undone);
    }
    function pushSelectionToHistory(sel, dest) {
        var top = lst(dest);
        top && top.ranges && top.equals(sel) || dest.push(sel);
    }
    function attachLocalSpans(doc, change, from, to) {
        var existing = change["spans_" + doc.id], n = 0;
        doc.iter(Math.max(doc.first, from), Math.min(doc.first + doc.size, to), function(line) {
            line.markedSpans && ((existing || (existing = change["spans_" + doc.id] = {}))[n] = line.markedSpans), 
            ++n;
        });
    }
    function removeClearedSpans(spans) {
        if (!spans) return null;
        for (var out, i = 0; i < spans.length; ++i) spans[i].marker.explicitlyCleared ? out || (out = spans.slice(0, i)) : out && out.push(spans[i]);
        return out ? out.length ? out : null : spans;
    }
    function getOldSpans(doc, change) {
        var found = change["spans_" + doc.id];
        if (!found) return null;
        for (var i = 0, nw = []; i < change.text.length; ++i) nw.push(removeClearedSpans(found[i]));
        return nw;
    }
    function copyHistoryArray(events, newGroup, instantiateSel) {
        for (var i = 0, copy = []; i < events.length; ++i) {
            var event = events[i];
            if (event.ranges) copy.push(instantiateSel ? Selection.prototype.deepCopy.call(event) : event); else {
                var changes = event.changes, newChanges = [];
                copy.push({
                    changes: newChanges
                });
                for (var j = 0; j < changes.length; ++j) {
                    var m, change = changes[j];
                    if (newChanges.push({
                        from: change.from,
                        to: change.to,
                        text: change.text
                    }), newGroup) for (var prop in change) (m = prop.match(/^spans_(\d+)$/)) && indexOf(newGroup, Number(m[1])) > -1 && (lst(newChanges)[prop] = change[prop], 
                    delete change[prop]);
                }
            }
        }
        return copy;
    }
    function rebaseHistSelSingle(pos, from, to, diff) {
        to < pos.line ? pos.line += diff : from < pos.line && (pos.line = from, pos.ch = 0);
    }
    function rebaseHistArray(array, from, to, diff) {
        for (var i = 0; i < array.length; ++i) {
            var sub = array[i], ok = !0;
            if (sub.ranges) {
                sub.copied || ((sub = array[i] = sub.deepCopy()).copied = !0);
                for (j = 0; j < sub.ranges.length; j++) rebaseHistSelSingle(sub.ranges[j].anchor, from, to, diff), 
                rebaseHistSelSingle(sub.ranges[j].head, from, to, diff);
            } else {
                for (var j = 0; j < sub.changes.length; ++j) {
                    var cur = sub.changes[j];
                    if (to < cur.from.line) cur.from = Pos(cur.from.line + diff, cur.from.ch), cur.to = Pos(cur.to.line + diff, cur.to.ch); else if (from <= cur.to.line) {
                        ok = !1;
                        break;
                    }
                }
                ok || (array.splice(0, i + 1), i = 0);
            }
        }
    }
    function rebaseHist(hist, change) {
        var from = change.from.line, to = change.to.line, diff = change.text.length - (to - from) - 1;
        rebaseHistArray(hist.done, from, to, diff), rebaseHistArray(hist.undone, from, to, diff);
    }
    function e_defaultPrevented(e) {
        return null != e.defaultPrevented ? e.defaultPrevented : 0 == e.returnValue;
    }
    function e_target(e) {
        return e.target || e.srcElement;
    }
    function e_button(e) {
        var b = e.which;
        return null == b && (1 & e.button ? b = 1 : 2 & e.button ? b = 3 : 4 & e.button && (b = 2)), 
        mac && e.ctrlKey && 1 == b && (b = 3), b;
    }
    function getHandlers(emitter, type, copy) {
        var arr = emitter._handlers && emitter._handlers[type];
        return copy ? arr && arr.length > 0 ? arr.slice() : noHandlers : arr || noHandlers;
    }
    function signalLater(emitter, type) {
        var arr = getHandlers(emitter, type, !1);
        if (arr.length) {
            var list, args = Array.prototype.slice.call(arguments, 2);
            operationGroup ? list = operationGroup.delayedCallbacks : orphanDelayedCallbacks ? list = orphanDelayedCallbacks : (list = orphanDelayedCallbacks = [], 
            setTimeout(fireOrphanDelayed, 0));
            for (var i = 0; i < arr.length; ++i) list.push(function(f) {
                return function() {
                    f.apply(null, args);
                };
            }(arr[i]));
        }
    }
    function fireOrphanDelayed() {
        var delayed = orphanDelayedCallbacks;
        orphanDelayedCallbacks = null;
        for (var i = 0; i < delayed.length; ++i) delayed[i]();
    }
    function signalDOMEvent(cm, e, override) {
        return "string" == typeof e && (e = {
            type: e,
            preventDefault: function() {
                this.defaultPrevented = !0;
            }
        }), signal(cm, override || e.type, cm, e), e_defaultPrevented(e) || e.codemirrorIgnore;
    }
    function signalCursorActivity(cm) {
        var arr = cm._handlers && cm._handlers.cursorActivity;
        if (arr) for (var set = cm.curOp.cursorActivityHandlers || (cm.curOp.cursorActivityHandlers = []), i = 0; i < arr.length; ++i) -1 == indexOf(set, arr[i]) && set.push(arr[i]);
    }
    function hasHandler(emitter, type) {
        return getHandlers(emitter, type).length > 0;
    }
    function eventMixin(ctor) {
        ctor.prototype.on = function(type, f) {
            on(this, type, f);
        }, ctor.prototype.off = function(type, f) {
            off(this, type, f);
        };
    }
    function Delayed() {
        this.id = null;
    }
    function spaceStr(n) {
        for (;spaceStrs.length <= n; ) spaceStrs.push(lst(spaceStrs) + " ");
        return spaceStrs[n];
    }
    function lst(arr) {
        return arr[arr.length - 1];
    }
    function indexOf(array, elt) {
        for (var i = 0; i < array.length; ++i) if (array[i] == elt) return i;
        return -1;
    }
    function map(array, f) {
        for (var out = [], i = 0; i < array.length; i++) out[i] = f(array[i], i);
        return out;
    }
    function nothing() {}
    function createObj(base, props) {
        var inst;
        return Object.create ? inst = Object.create(base) : (nothing.prototype = base, inst = new nothing()), 
        props && copyObj(props, inst), inst;
    }
    function copyObj(obj, target, overwrite) {
        target || (target = {});
        for (var prop in obj) !obj.hasOwnProperty(prop) || !1 === overwrite && target.hasOwnProperty(prop) || (target[prop] = obj[prop]);
        return target;
    }
    function bind(f) {
        var args = Array.prototype.slice.call(arguments, 1);
        return function() {
            return f.apply(null, args);
        };
    }
    function isWordChar(ch, helper) {
        return helper ? !!(helper.source.indexOf("\\w") > -1 && isWordCharBasic(ch)) || helper.test(ch) : isWordCharBasic(ch);
    }
    function isEmpty(obj) {
        for (var n in obj) if (obj.hasOwnProperty(n) && obj[n]) return !1;
        return !0;
    }
    function isExtendingChar(ch) {
        return ch.charCodeAt(0) >= 768 && extendingChars.test(ch);
    }
    function elt(tag, content, className, style) {
        var e = document.createElement(tag);
        if (className && (e.className = className), style && (e.style.cssText = style), 
        "string" == typeof content) e.appendChild(document.createTextNode(content)); else if (content) for (var i = 0; i < content.length; ++i) e.appendChild(content[i]);
        return e;
    }
    function removeChildren(e) {
        for (var count = e.childNodes.length; count > 0; --count) e.removeChild(e.firstChild);
        return e;
    }
    function removeChildrenAndAdd(parent, e) {
        return removeChildren(parent).appendChild(e);
    }
    function activeElt() {
        for (var activeElement = document.activeElement; activeElement && activeElement.root && activeElement.root.activeElement; ) activeElement = activeElement.root.activeElement;
        return activeElement;
    }
    function classTest(cls) {
        return new RegExp("(^|\\s)" + cls + "(?:$|\\s)\\s*");
    }
    function joinClasses(a, b) {
        for (var as = a.split(" "), i = 0; i < as.length; i++) as[i] && !classTest(as[i]).test(b) && (b += " " + as[i]);
        return b;
    }
    function forEachCodeMirror(f) {
        if (document.body.getElementsByClassName) for (var byClass = document.body.getElementsByClassName("CodeMirror"), i = 0; i < byClass.length; i++) {
            var cm = byClass[i].CodeMirror;
            cm && f(cm);
        }
    }
    function ensureGlobalHandlers() {
        globalsRegistered || (registerGlobalHandlers(), globalsRegistered = !0);
    }
    function registerGlobalHandlers() {
        var resizeTimer;
        on(window, "resize", function() {
            null == resizeTimer && (resizeTimer = setTimeout(function() {
                resizeTimer = null, forEachCodeMirror(onResize);
            }, 100));
        }), on(window, "blur", function() {
            forEachCodeMirror(onBlur);
        });
    }
    function zeroWidthElement(measure) {
        if (null == zwspSupported) {
            var test = elt("span", "\u200b");
            removeChildrenAndAdd(measure, elt("span", [ test, document.createTextNode("x") ])), 
            0 != measure.firstChild.offsetHeight && (zwspSupported = test.offsetWidth <= 1 && test.offsetHeight > 2 && !(ie && ie_version < 8));
        }
        var node = zwspSupported ? elt("span", "\u200b") : elt("span", "\xa0", null, "display: inline-block; width: 1px; margin-right: -1px");
        return node.setAttribute("cm-text", ""), node;
    }
    function hasBadBidiRects(measure) {
        if (null != badBidiRects) return badBidiRects;
        var txt = removeChildrenAndAdd(measure, document.createTextNode("A\u062eA")), r0 = range(txt, 0, 1).getBoundingClientRect();
        if (!r0 || r0.left == r0.right) return !1;
        var r1 = range(txt, 1, 2).getBoundingClientRect();
        return badBidiRects = r1.right - r0.right < 3;
    }
    function hasBadZoomedRects(measure) {
        if (null != badZoomedRects) return badZoomedRects;
        var node = removeChildrenAndAdd(measure, elt("span", "x")), normal = node.getBoundingClientRect(), fromRange = range(node, 0, 1).getBoundingClientRect();
        return badZoomedRects = Math.abs(normal.left - fromRange.left) > 1;
    }
    function iterateBidiSections(order, from, to, f) {
        if (!order) return f(from, to, "ltr");
        for (var found = !1, i = 0; i < order.length; ++i) {
            var part = order[i];
            (part.from < to && part.to > from || from == to && part.to == from) && (f(Math.max(part.from, from), Math.min(part.to, to), 1 == part.level ? "rtl" : "ltr"), 
            found = !0);
        }
        found || f(from, to, "ltr");
    }
    function bidiLeft(part) {
        return part.level % 2 ? part.to : part.from;
    }
    function bidiRight(part) {
        return part.level % 2 ? part.from : part.to;
    }
    function lineLeft(line) {
        var order = getOrder(line);
        return order ? bidiLeft(order[0]) : 0;
    }
    function lineRight(line) {
        var order = getOrder(line);
        return order ? bidiRight(lst(order)) : line.text.length;
    }
    function lineStart(cm, lineN) {
        var line = getLine(cm.doc, lineN), visual = visualLine(line);
        visual != line && (lineN = lineNo(visual));
        var order = getOrder(visual), ch = order ? order[0].level % 2 ? lineRight(visual) : lineLeft(visual) : 0;
        return Pos(lineN, ch);
    }
    function lineEnd(cm, lineN) {
        for (var merged, line = getLine(cm.doc, lineN); merged = collapsedSpanAtEnd(line); ) line = merged.find(1, !0).line, 
        lineN = null;
        var order = getOrder(line), ch = order ? order[0].level % 2 ? lineLeft(line) : lineRight(line) : line.text.length;
        return Pos(null == lineN ? lineNo(line) : lineN, ch);
    }
    function lineStartSmart(cm, pos) {
        var start = lineStart(cm, pos.line), line = getLine(cm.doc, start.line), order = getOrder(line);
        if (!order || 0 == order[0].level) {
            var firstNonWS = Math.max(0, line.text.search(/\S/)), inWS = pos.line == start.line && pos.ch <= firstNonWS && pos.ch;
            return Pos(start.line, inWS ? 0 : firstNonWS);
        }
        return start;
    }
    function compareBidiLevel(order, a, b) {
        var linedir = order[0].level;
        return a == linedir || b != linedir && a < b;
    }
    function getBidiPartAt(order, pos) {
        bidiOther = null;
        for (var found, i = 0; i < order.length; ++i) {
            var cur = order[i];
            if (cur.from < pos && cur.to > pos) return i;
            if (cur.from == pos || cur.to == pos) {
                if (null != found) return compareBidiLevel(order, cur.level, order[found].level) ? (cur.from != cur.to && (bidiOther = found), 
                i) : (cur.from != cur.to && (bidiOther = i), found);
                found = i;
            }
        }
        return found;
    }
    function moveInLine(line, pos, dir, byUnit) {
        if (!byUnit) return pos + dir;
        do {
            pos += dir;
        } while (pos > 0 && isExtendingChar(line.text.charAt(pos)));
        return pos;
    }
    function moveVisually(line, start, dir, byUnit) {
        var bidi = getOrder(line);
        if (!bidi) return moveLogically(line, start, dir, byUnit);
        for (var pos = getBidiPartAt(bidi, start), part = bidi[pos], target = moveInLine(line, start, part.level % 2 ? -dir : dir, byUnit); ;) {
            if (target > part.from && target < part.to) return target;
            if (target == part.from || target == part.to) return getBidiPartAt(bidi, target) == pos ? target : (part = bidi[pos += dir], 
            dir > 0 == part.level % 2 ? part.to : part.from);
            if (!(part = bidi[pos += dir])) return null;
            target = dir > 0 == part.level % 2 ? moveInLine(line, part.to, -1, byUnit) : moveInLine(line, part.from, 1, byUnit);
        }
    }
    function moveLogically(line, start, dir, byUnit) {
        var target = start + dir;
        if (byUnit) for (;target > 0 && isExtendingChar(line.text.charAt(target)); ) target += dir;
        return target < 0 || target > line.text.length ? null : target;
    }
    var userAgent = navigator.userAgent, platform = navigator.platform, gecko = /gecko\/\d/i.test(userAgent), ie_upto10 = /MSIE \d/.test(userAgent), ie_11up = /Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(userAgent), ie = ie_upto10 || ie_11up, ie_version = ie && (ie_upto10 ? document.documentMode || 6 : ie_11up[1]), webkit = /WebKit\//.test(userAgent), qtwebkit = webkit && /Qt\/\d+\.\d+/.test(userAgent), chrome = /Chrome\//.test(userAgent), presto = /Opera\//.test(userAgent), safari = /Apple Computer/.test(navigator.vendor), mac_geMountainLion = /Mac OS X 1\d\D([8-9]|\d\d)\D/.test(userAgent), phantom = /PhantomJS/.test(userAgent), ios = /AppleWebKit/.test(userAgent) && /Mobile\/\w+/.test(userAgent), mobile = ios || /Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(userAgent), mac = ios || /Mac/.test(platform), chromeOS = /\bCrOS\b/.test(userAgent), windows = /win/i.test(platform), presto_version = presto && userAgent.match(/Version\/(\d*\.\d*)/);
    presto_version && (presto_version = Number(presto_version[1])), presto_version && presto_version >= 15 && (presto = !1, 
    webkit = !0);
    var flipCtrlCmd = mac && (qtwebkit || presto && (null == presto_version || presto_version < 12.11)), captureRightClick = gecko || ie && ie_version >= 9, sawReadOnlySpans = !1, sawCollapsedSpans = !1;
    NativeScrollbars.prototype = copyObj({
        update: function(measure) {
            var needsH = measure.scrollWidth > measure.clientWidth + 1, needsV = measure.scrollHeight > measure.clientHeight + 1, sWidth = measure.nativeBarWidth;
            if (needsV) {
                this.vert.style.display = "block", this.vert.style.bottom = needsH ? sWidth + "px" : "0";
                var totalHeight = measure.viewHeight - (needsH ? sWidth : 0);
                this.vert.firstChild.style.height = Math.max(0, measure.scrollHeight - measure.clientHeight + totalHeight) + "px";
            } else this.vert.style.display = "", this.vert.firstChild.style.height = "0";
            if (needsH) {
                this.horiz.style.display = "block", this.horiz.style.right = needsV ? sWidth + "px" : "0", 
                this.horiz.style.left = measure.barLeft + "px";
                var totalWidth = measure.viewWidth - measure.barLeft - (needsV ? sWidth : 0);
                this.horiz.firstChild.style.width = measure.scrollWidth - measure.clientWidth + totalWidth + "px";
            } else this.horiz.style.display = "", this.horiz.firstChild.style.width = "0";
            return !this.checkedZeroWidth && measure.clientHeight > 0 && (0 == sWidth && this.zeroWidthHack(), 
            this.checkedZeroWidth = !0), {
                right: needsV ? sWidth : 0,
                bottom: needsH ? sWidth : 0
            };
        },
        setScrollLeft: function(pos) {
            this.horiz.scrollLeft != pos && (this.horiz.scrollLeft = pos), this.disableHoriz && this.enableZeroWidthBar(this.horiz, this.disableHoriz);
        },
        setScrollTop: function(pos) {
            this.vert.scrollTop != pos && (this.vert.scrollTop = pos), this.disableVert && this.enableZeroWidthBar(this.vert, this.disableVert);
        },
        zeroWidthHack: function() {
            var w = mac && !mac_geMountainLion ? "12px" : "18px";
            this.horiz.style.height = this.vert.style.width = w, this.horiz.style.pointerEvents = this.vert.style.pointerEvents = "none", 
            this.disableHoriz = new Delayed(), this.disableVert = new Delayed();
        },
        enableZeroWidthBar: function(bar, delay) {
            function maybeDisable() {
                var box = bar.getBoundingClientRect();
                document.elementFromPoint(box.left + 1, box.bottom - 1) != bar ? bar.style.pointerEvents = "none" : delay.set(1e3, maybeDisable);
            }
            bar.style.pointerEvents = "auto", delay.set(1e3, maybeDisable);
        },
        clear: function() {
            var parent = this.horiz.parentNode;
            parent.removeChild(this.horiz), parent.removeChild(this.vert);
        }
    }, NativeScrollbars.prototype), NullScrollbars.prototype = copyObj({
        update: function() {
            return {
                bottom: 0,
                right: 0
            };
        },
        setScrollLeft: function() {},
        setScrollTop: function() {},
        clear: function() {}
    }, NullScrollbars.prototype), CodeMirror.scrollbarModel = {
        native: NativeScrollbars,
        null: NullScrollbars
    }, DisplayUpdate.prototype.signal = function(emitter, type) {
        hasHandler(emitter, type) && this.events.push(arguments);
    }, DisplayUpdate.prototype.finish = function() {
        for (var i = 0; i < this.events.length; i++) signal.apply(null, this.events[i]);
    };
    var Pos = CodeMirror.Pos = function(line, ch) {
        if (!(this instanceof Pos)) return new Pos(line, ch);
        this.line = line, this.ch = ch;
    }, cmp = CodeMirror.cmpPos = function(a, b) {
        return a.line - b.line || a.ch - b.ch;
    }, lastCopied = null;
    TextareaInput.prototype = copyObj({
        init: function(display) {
            function prepareCopyCut(e) {
                if (!signalDOMEvent(cm, e)) {
                    if (cm.somethingSelected()) lastCopied = {
                        lineWise: !1,
                        text: cm.getSelections()
                    }, input.inaccurateSelection && (input.prevInput = "", input.inaccurateSelection = !1, 
                    te.value = lastCopied.text.join("\n"), selectInput(te)); else {
                        if (!cm.options.lineWiseCopyCut) return;
                        var ranges = copyableRanges(cm);
                        lastCopied = {
                            lineWise: !0,
                            text: ranges.text
                        }, "cut" == e.type ? cm.setSelections(ranges.ranges, null, sel_dontScroll) : (input.prevInput = "", 
                        te.value = ranges.text.join("\n"), selectInput(te));
                    }
                    "cut" == e.type && (cm.state.cutIncoming = !0);
                }
            }
            var input = this, cm = this.cm, div = this.wrapper = hiddenTextarea(), te = this.textarea = div.firstChild;
            display.wrapper.insertBefore(div, display.wrapper.firstChild), ios && (te.style.width = "0px"), 
            on(te, "input", function() {
                ie && ie_version >= 9 && input.hasSelection && (input.hasSelection = null), input.poll();
            }), on(te, "paste", function(e) {
                signalDOMEvent(cm, e) || handlePaste(e, cm) || (cm.state.pasteIncoming = !0, input.fastPoll());
            }), on(te, "cut", prepareCopyCut), on(te, "copy", prepareCopyCut), on(display.scroller, "paste", function(e) {
                eventInWidget(display, e) || signalDOMEvent(cm, e) || (cm.state.pasteIncoming = !0, 
                input.focus());
            }), on(display.lineSpace, "selectstart", function(e) {
                eventInWidget(display, e) || e_preventDefault(e);
            }), on(te, "compositionstart", function() {
                var start = cm.getCursor("from");
                input.composing && input.composing.range.clear(), input.composing = {
                    start: start,
                    range: cm.markText(start, cm.getCursor("to"), {
                        className: "CodeMirror-composing"
                    })
                };
            }), on(te, "compositionend", function() {
                input.composing && (input.poll(), input.composing.range.clear(), input.composing = null);
            });
        },
        prepareSelection: function() {
            var cm = this.cm, display = cm.display, doc = cm.doc, result = prepareSelection(cm);
            if (cm.options.moveInputWithCursor) {
                var headPos = cursorCoords(cm, doc.sel.primary().head, "div"), wrapOff = display.wrapper.getBoundingClientRect(), lineOff = display.lineDiv.getBoundingClientRect();
                result.teTop = Math.max(0, Math.min(display.wrapper.clientHeight - 10, headPos.top + lineOff.top - wrapOff.top)), 
                result.teLeft = Math.max(0, Math.min(display.wrapper.clientWidth - 10, headPos.left + lineOff.left - wrapOff.left));
            }
            return result;
        },
        showSelection: function(drawn) {
            var display = this.cm.display;
            removeChildrenAndAdd(display.cursorDiv, drawn.cursors), removeChildrenAndAdd(display.selectionDiv, drawn.selection), 
            null != drawn.teTop && (this.wrapper.style.top = drawn.teTop + "px", this.wrapper.style.left = drawn.teLeft + "px");
        },
        reset: function(typing) {
            if (!this.contextMenuPending) {
                var minimal, selected, cm = this.cm, doc = cm.doc;
                if (cm.somethingSelected()) {
                    this.prevInput = "";
                    var range = doc.sel.primary(), content = (minimal = hasCopyEvent && (range.to().line - range.from().line > 100 || (selected = cm.getSelection()).length > 1e3)) ? "-" : selected || cm.getSelection();
                    this.textarea.value = content, cm.state.focused && selectInput(this.textarea), ie && ie_version >= 9 && (this.hasSelection = content);
                } else typing || (this.prevInput = this.textarea.value = "", ie && ie_version >= 9 && (this.hasSelection = null));
                this.inaccurateSelection = minimal;
            }
        },
        getField: function() {
            return this.textarea;
        },
        supportsTouch: function() {
            return !1;
        },
        focus: function() {
            if ("nocursor" != this.cm.options.readOnly && (!mobile || activeElt() != this.textarea)) try {
                this.textarea.focus();
            } catch (e) {}
        },
        blur: function() {
            this.textarea.blur();
        },
        resetPosition: function() {
            this.wrapper.style.top = this.wrapper.style.left = 0;
        },
        receivedFocus: function() {
            this.slowPoll();
        },
        slowPoll: function() {
            var input = this;
            input.pollingFast || input.polling.set(this.cm.options.pollInterval, function() {
                input.poll(), input.cm.state.focused && input.slowPoll();
            });
        },
        fastPoll: function() {
            function p() {
                input.poll() || missed ? (input.pollingFast = !1, input.slowPoll()) : (missed = !0, 
                input.polling.set(60, p));
            }
            var missed = !1, input = this;
            input.pollingFast = !0, input.polling.set(20, p);
        },
        poll: function() {
            var cm = this.cm, input = this.textarea, prevInput = this.prevInput;
            if (this.contextMenuPending || !cm.state.focused || hasSelection(input) && !prevInput && !this.composing || cm.isReadOnly() || cm.options.disableInput || cm.state.keySeq) return !1;
            var text = input.value;
            if (text == prevInput && !cm.somethingSelected()) return !1;
            if (ie && ie_version >= 9 && this.hasSelection === text || mac && /[\uf700-\uf7ff]/.test(text)) return cm.display.input.reset(), 
            !1;
            if (cm.doc.sel == cm.display.selForContextMenu) {
                var first = text.charCodeAt(0);
                if (8203 != first || prevInput || (prevInput = "\u200b"), 8666 == first) return this.reset(), 
                this.cm.execCommand("undo");
            }
            for (var same = 0, l = Math.min(prevInput.length, text.length); same < l && prevInput.charCodeAt(same) == text.charCodeAt(same); ) ++same;
            var self = this;
            return runInOp(cm, function() {
                applyTextInput(cm, text.slice(same), prevInput.length - same, null, self.composing ? "*compose" : null), 
                text.length > 1e3 || text.indexOf("\n") > -1 ? input.value = self.prevInput = "" : self.prevInput = text, 
                self.composing && (self.composing.range.clear(), self.composing.range = cm.markText(self.composing.start, cm.getCursor("to"), {
                    className: "CodeMirror-composing"
                }));
            }), !0;
        },
        ensurePolled: function() {
            this.pollingFast && this.poll() && (this.pollingFast = !1);
        },
        onKeyPress: function() {
            ie && ie_version >= 9 && (this.hasSelection = null), this.fastPoll();
        },
        onContextMenu: function(e) {
            function prepareSelectAllHack() {
                if (null != te.selectionStart) {
                    var selected = cm.somethingSelected(), extval = "\u200b" + (selected ? te.value : "");
                    te.value = "\u21da", te.value = extval, input.prevInput = selected ? "" : "\u200b", 
                    te.selectionStart = 1, te.selectionEnd = extval.length, display.selForContextMenu = cm.doc.sel;
                }
            }
            function rehide() {
                if (input.contextMenuPending = !1, input.wrapper.style.cssText = oldWrapperCSS, 
                te.style.cssText = oldCSS, ie && ie_version < 9 && display.scrollbars.setScrollTop(display.scroller.scrollTop = scrollPos), 
                null != te.selectionStart) {
                    (!ie || ie && ie_version < 9) && prepareSelectAllHack();
                    var i = 0, poll = function() {
                        display.selForContextMenu == cm.doc.sel && 0 == te.selectionStart && te.selectionEnd > 0 && "\u200b" == input.prevInput ? operation(cm, commands.selectAll)(cm) : i++ < 10 ? display.detectingSelectAll = setTimeout(poll, 500) : display.input.reset();
                    };
                    display.detectingSelectAll = setTimeout(poll, 200);
                }
            }
            var input = this, cm = input.cm, display = cm.display, te = input.textarea, pos = posFromMouse(cm, e), scrollPos = display.scroller.scrollTop;
            if (pos && !presto) {
                cm.options.resetSelectionOnContextMenu && -1 == cm.doc.sel.contains(pos) && operation(cm, setSelection)(cm.doc, simpleSelection(pos), sel_dontScroll);
                var oldCSS = te.style.cssText, oldWrapperCSS = input.wrapper.style.cssText;
                input.wrapper.style.cssText = "position: absolute";
                var wrapperBox = input.wrapper.getBoundingClientRect();
                if (te.style.cssText = "position: absolute; width: 30px; height: 30px; top: " + (e.clientY - wrapperBox.top - 5) + "px; left: " + (e.clientX - wrapperBox.left - 5) + "px; z-index: 1000; background: " + (ie ? "rgba(255, 255, 255, .05)" : "transparent") + "; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);", 
                webkit) var oldScrollY = window.scrollY;
                if (display.input.focus(), webkit && window.scrollTo(null, oldScrollY), display.input.reset(), 
                cm.somethingSelected() || (te.value = input.prevInput = " "), input.contextMenuPending = !0, 
                display.selForContextMenu = cm.doc.sel, clearTimeout(display.detectingSelectAll), 
                ie && ie_version >= 9 && prepareSelectAllHack(), captureRightClick) {
                    e_stop(e);
                    var mouseup = function() {
                        off(window, "mouseup", mouseup), setTimeout(rehide, 20);
                    };
                    on(window, "mouseup", mouseup);
                } else setTimeout(rehide, 50);
            }
        },
        readOnlyChanged: function(val) {
            val || this.reset();
        },
        setUneditable: nothing,
        needsContentAttribute: !1
    }, TextareaInput.prototype), ContentEditableInput.prototype = copyObj({
        init: function(display) {
            function onCopyCut(e) {
                if (!signalDOMEvent(cm, e)) {
                    if (cm.somethingSelected()) lastCopied = {
                        lineWise: !1,
                        text: cm.getSelections()
                    }, "cut" == e.type && cm.replaceSelection("", null, "cut"); else {
                        if (!cm.options.lineWiseCopyCut) return;
                        var ranges = copyableRanges(cm);
                        lastCopied = {
                            lineWise: !0,
                            text: ranges.text
                        }, "cut" == e.type && cm.operation(function() {
                            cm.setSelections(ranges.ranges, 0, sel_dontScroll), cm.replaceSelection("", null, "cut");
                        });
                    }
                    if (e.clipboardData && !ios) e.preventDefault(), e.clipboardData.clearData(), e.clipboardData.setData("text/plain", lastCopied.text.join("\n")); else {
                        var kludge = hiddenTextarea(), te = kludge.firstChild;
                        cm.display.lineSpace.insertBefore(kludge, cm.display.lineSpace.firstChild), te.value = lastCopied.text.join("\n");
                        var hadFocus = document.activeElement;
                        selectInput(te), setTimeout(function() {
                            cm.display.lineSpace.removeChild(kludge), hadFocus.focus();
                        }, 50);
                    }
                }
            }
            var input = this, cm = input.cm, div = input.div = display.lineDiv;
            disableBrowserMagic(div), on(div, "paste", function(e) {
                signalDOMEvent(cm, e) || handlePaste(e, cm);
            }), on(div, "compositionstart", function(e) {
                var data = e.data;
                if (input.composing = {
                    sel: cm.doc.sel,
                    data: data,
                    startData: data
                }, data) {
                    var prim = cm.doc.sel.primary(), found = cm.getLine(prim.head.line).indexOf(data, Math.max(0, prim.head.ch - data.length));
                    found > -1 && found <= prim.head.ch && (input.composing.sel = simpleSelection(Pos(prim.head.line, found), Pos(prim.head.line, found + data.length)));
                }
            }), on(div, "compositionupdate", function(e) {
                input.composing.data = e.data;
            }), on(div, "compositionend", function(e) {
                var ours = input.composing;
                ours && (e.data == ours.startData || /\u200b/.test(e.data) || (ours.data = e.data), 
                setTimeout(function() {
                    ours.handled || input.applyComposition(ours), input.composing == ours && (input.composing = null);
                }, 50));
            }), on(div, "touchstart", function() {
                input.forceCompositionEnd();
            }), on(div, "input", function() {
                input.composing || !cm.isReadOnly() && input.pollContent() || runInOp(input.cm, function() {
                    regChange(cm);
                });
            }), on(div, "copy", onCopyCut), on(div, "cut", onCopyCut);
        },
        prepareSelection: function() {
            var result = prepareSelection(this.cm, !1);
            return result.focus = this.cm.state.focused, result;
        },
        showSelection: function(info, takeFocus) {
            info && this.cm.display.view.length && ((info.focus || takeFocus) && this.showPrimarySelection(), 
            this.showMultipleSelections(info));
        },
        showPrimarySelection: function() {
            var sel = window.getSelection(), prim = this.cm.doc.sel.primary(), curAnchor = domToPos(this.cm, sel.anchorNode, sel.anchorOffset), curFocus = domToPos(this.cm, sel.focusNode, sel.focusOffset);
            if (!curAnchor || curAnchor.bad || !curFocus || curFocus.bad || 0 != cmp(minPos(curAnchor, curFocus), prim.from()) || 0 != cmp(maxPos(curAnchor, curFocus), prim.to())) {
                var start = posToDOM(this.cm, prim.from()), end = posToDOM(this.cm, prim.to());
                if (start || end) {
                    var view = this.cm.display.view, old = sel.rangeCount && sel.getRangeAt(0);
                    if (start) {
                        if (!end) {
                            var measure = view[view.length - 1].measure, map = measure.maps ? measure.maps[measure.maps.length - 1] : measure.map;
                            end = {
                                node: map[map.length - 1],
                                offset: map[map.length - 2] - map[map.length - 3]
                            };
                        }
                    } else start = {
                        node: view[0].measure.map[2],
                        offset: 0
                    };
                    try {
                        var rng = range(start.node, start.offset, end.offset, end.node);
                    } catch (e) {}
                    rng && (!gecko && this.cm.state.focused ? (sel.collapse(start.node, start.offset), 
                    rng.collapsed || sel.addRange(rng)) : (sel.removeAllRanges(), sel.addRange(rng)), 
                    old && null == sel.anchorNode ? sel.addRange(old) : gecko && this.startGracePeriod()), 
                    this.rememberSelection();
                }
            }
        },
        startGracePeriod: function() {
            var input = this;
            clearTimeout(this.gracePeriod), this.gracePeriod = setTimeout(function() {
                input.gracePeriod = !1, input.selectionChanged() && input.cm.operation(function() {
                    input.cm.curOp.selectionChanged = !0;
                });
            }, 20);
        },
        showMultipleSelections: function(info) {
            removeChildrenAndAdd(this.cm.display.cursorDiv, info.cursors), removeChildrenAndAdd(this.cm.display.selectionDiv, info.selection);
        },
        rememberSelection: function() {
            var sel = window.getSelection();
            this.lastAnchorNode = sel.anchorNode, this.lastAnchorOffset = sel.anchorOffset, 
            this.lastFocusNode = sel.focusNode, this.lastFocusOffset = sel.focusOffset;
        },
        selectionInEditor: function() {
            var sel = window.getSelection();
            if (!sel.rangeCount) return !1;
            var node = sel.getRangeAt(0).commonAncestorContainer;
            return contains(this.div, node);
        },
        focus: function() {
            "nocursor" != this.cm.options.readOnly && this.div.focus();
        },
        blur: function() {
            this.div.blur();
        },
        getField: function() {
            return this.div;
        },
        supportsTouch: function() {
            return !0;
        },
        receivedFocus: function() {
            function poll() {
                input.cm.state.focused && (input.pollSelection(), input.polling.set(input.cm.options.pollInterval, poll));
            }
            var input = this;
            this.selectionInEditor() ? this.pollSelection() : runInOp(this.cm, function() {
                input.cm.curOp.selectionChanged = !0;
            }), this.polling.set(this.cm.options.pollInterval, poll);
        },
        selectionChanged: function() {
            var sel = window.getSelection();
            return sel.anchorNode != this.lastAnchorNode || sel.anchorOffset != this.lastAnchorOffset || sel.focusNode != this.lastFocusNode || sel.focusOffset != this.lastFocusOffset;
        },
        pollSelection: function() {
            if (!this.composing && !this.gracePeriod && this.selectionChanged()) {
                var sel = window.getSelection(), cm = this.cm;
                this.rememberSelection();
                var anchor = domToPos(cm, sel.anchorNode, sel.anchorOffset), head = domToPos(cm, sel.focusNode, sel.focusOffset);
                anchor && head && runInOp(cm, function() {
                    setSelection(cm.doc, simpleSelection(anchor, head), sel_dontScroll), (anchor.bad || head.bad) && (cm.curOp.selectionChanged = !0);
                });
            }
        },
        pollContent: function() {
            var cm = this.cm, display = cm.display, sel = cm.doc.sel.primary(), from = sel.from(), to = sel.to();
            if (from.line < display.viewFrom || to.line > display.viewTo - 1) return !1;
            var fromIndex;
            if (from.line == display.viewFrom || 0 == (fromIndex = findViewIndex(cm, from.line))) var fromLine = lineNo(display.view[0].line), fromNode = display.view[0].node; else var fromLine = lineNo(display.view[fromIndex].line), fromNode = display.view[fromIndex - 1].node.nextSibling;
            var toIndex = findViewIndex(cm, to.line);
            if (toIndex == display.view.length - 1) var toLine = display.viewTo - 1, toNode = display.lineDiv.lastChild; else var toLine = lineNo(display.view[toIndex + 1].line) - 1, toNode = display.view[toIndex + 1].node.previousSibling;
            for (var newText = cm.doc.splitLines(domTextBetween(cm, fromNode, toNode, fromLine, toLine)), oldText = getBetween(cm.doc, Pos(fromLine, 0), Pos(toLine, getLine(cm.doc, toLine).text.length)); newText.length > 1 && oldText.length > 1; ) if (lst(newText) == lst(oldText)) newText.pop(), 
            oldText.pop(), toLine--; else {
                if (newText[0] != oldText[0]) break;
                newText.shift(), oldText.shift(), fromLine++;
            }
            for (var cutFront = 0, cutEnd = 0, newTop = newText[0], oldTop = oldText[0], maxCutFront = Math.min(newTop.length, oldTop.length); cutFront < maxCutFront && newTop.charCodeAt(cutFront) == oldTop.charCodeAt(cutFront); ) ++cutFront;
            for (var newBot = lst(newText), oldBot = lst(oldText), maxCutEnd = Math.min(newBot.length - (1 == newText.length ? cutFront : 0), oldBot.length - (1 == oldText.length ? cutFront : 0)); cutEnd < maxCutEnd && newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1); ) ++cutEnd;
            newText[newText.length - 1] = newBot.slice(0, newBot.length - cutEnd), newText[0] = newText[0].slice(cutFront);
            var chFrom = Pos(fromLine, cutFront), chTo = Pos(toLine, oldText.length ? lst(oldText).length - cutEnd : 0);
            return newText.length > 1 || newText[0] || cmp(chFrom, chTo) ? (replaceRange(cm.doc, newText, chFrom, chTo, "+input"), 
            !0) : void 0;
        },
        ensurePolled: function() {
            this.forceCompositionEnd();
        },
        reset: function() {
            this.forceCompositionEnd();
        },
        forceCompositionEnd: function() {
            this.composing && !this.composing.handled && (this.applyComposition(this.composing), 
            this.composing.handled = !0, this.div.blur(), this.div.focus());
        },
        applyComposition: function(composing) {
            this.cm.isReadOnly() ? operation(this.cm, regChange)(this.cm) : composing.data && composing.data != composing.startData && operation(this.cm, applyTextInput)(this.cm, composing.data, 0, composing.sel);
        },
        setUneditable: function(node) {
            node.contentEditable = "false";
        },
        onKeyPress: function(e) {
            e.preventDefault(), this.cm.isReadOnly() || operation(this.cm, applyTextInput)(this.cm, String.fromCharCode(null == e.charCode ? e.keyCode : e.charCode), 0);
        },
        readOnlyChanged: function(val) {
            this.div.contentEditable = String("nocursor" != val);
        },
        onContextMenu: nothing,
        resetPosition: nothing,
        needsContentAttribute: !0
    }, ContentEditableInput.prototype), CodeMirror.inputStyles = {
        textarea: TextareaInput,
        contenteditable: ContentEditableInput
    }, Selection.prototype = {
        primary: function() {
            return this.ranges[this.primIndex];
        },
        equals: function(other) {
            if (other == this) return !0;
            if (other.primIndex != this.primIndex || other.ranges.length != this.ranges.length) return !1;
            for (var i = 0; i < this.ranges.length; i++) {
                var here = this.ranges[i], there = other.ranges[i];
                if (0 != cmp(here.anchor, there.anchor) || 0 != cmp(here.head, there.head)) return !1;
            }
            return !0;
        },
        deepCopy: function() {
            for (var out = [], i = 0; i < this.ranges.length; i++) out[i] = new Range(copyPos(this.ranges[i].anchor), copyPos(this.ranges[i].head));
            return new Selection(out, this.primIndex);
        },
        somethingSelected: function() {
            for (var i = 0; i < this.ranges.length; i++) if (!this.ranges[i].empty()) return !0;
            return !1;
        },
        contains: function(pos, end) {
            end || (end = pos);
            for (var i = 0; i < this.ranges.length; i++) {
                var range = this.ranges[i];
                if (cmp(end, range.from()) >= 0 && cmp(pos, range.to()) <= 0) return i;
            }
            return -1;
        }
    }, Range.prototype = {
        from: function() {
            return minPos(this.anchor, this.head);
        },
        to: function() {
            return maxPos(this.anchor, this.head);
        },
        empty: function() {
            return this.head.line == this.anchor.line && this.head.ch == this.anchor.ch;
        }
    };
    var measureText, lastClick, lastDoubleClick, nullRect = {
        left: 0,
        right: 0,
        top: 0,
        bottom: 0
    }, operationGroup = null, nextOpId = 0, lastDrop = 0, wheelSamples = 0, wheelPixelsPerUnit = null;
    ie ? wheelPixelsPerUnit = -.53 : gecko ? wheelPixelsPerUnit = 15 : chrome ? wheelPixelsPerUnit = -.7 : safari && (wheelPixelsPerUnit = -1 / 3);
    var wheelEventDelta = function(e) {
        var dx = e.wheelDeltaX, dy = e.wheelDeltaY;
        return null == dx && e.detail && e.axis == e.HORIZONTAL_AXIS && (dx = e.detail), 
        null == dy && e.detail && e.axis == e.VERTICAL_AXIS ? dy = e.detail : null == dy && (dy = e.wheelDelta), 
        {
            x: dx,
            y: dy
        };
    };
    CodeMirror.wheelEventPixels = function(e) {
        var delta = wheelEventDelta(e);
        return delta.x *= wheelPixelsPerUnit, delta.y *= wheelPixelsPerUnit, delta;
    };
    var stopSeq = new Delayed(), lastStoppedKey = null, changeEnd = CodeMirror.changeEnd = function(change) {
        return change.text ? Pos(change.from.line + change.text.length - 1, lst(change.text).length + (1 == change.text.length ? change.from.ch : 0)) : change.to;
    };
    CodeMirror.prototype = {
        constructor: CodeMirror,
        focus: function() {
            window.focus(), this.display.input.focus();
        },
        setOption: function(option, value) {
            var options = this.options, old = options[option];
            options[option] == value && "mode" != option || (options[option] = value, optionHandlers.hasOwnProperty(option) && operation(this, optionHandlers[option])(this, value, old));
        },
        getOption: function(option) {
            return this.options[option];
        },
        getDoc: function() {
            return this.doc;
        },
        addKeyMap: function(map, bottom) {
            this.state.keyMaps[bottom ? "push" : "unshift"](getKeyMap(map));
        },
        removeKeyMap: function(map) {
            for (var maps = this.state.keyMaps, i = 0; i < maps.length; ++i) if (maps[i] == map || maps[i].name == map) return maps.splice(i, 1), 
            !0;
        },
        addOverlay: methodOp(function(spec, options) {
            var mode = spec.token ? spec : CodeMirror.getMode(this.options, spec);
            if (mode.startState) throw new Error("Overlays may not be stateful.");
            this.state.overlays.push({
                mode: mode,
                modeSpec: spec,
                opaque: options && options.opaque
            }), this.state.modeGen++, regChange(this);
        }),
        removeOverlay: methodOp(function(spec) {
            for (var overlays = this.state.overlays, i = 0; i < overlays.length; ++i) {
                var cur = overlays[i].modeSpec;
                if (cur == spec || "string" == typeof spec && cur.name == spec) return overlays.splice(i, 1), 
                this.state.modeGen++, void regChange(this);
            }
        }),
        indentLine: methodOp(function(n, dir, aggressive) {
            "string" != typeof dir && "number" != typeof dir && (dir = null == dir ? this.options.smartIndent ? "smart" : "prev" : dir ? "add" : "subtract"), 
            isLine(this.doc, n) && indentLine(this, n, dir, aggressive);
        }),
        indentSelection: methodOp(function(how) {
            for (var ranges = this.doc.sel.ranges, end = -1, i = 0; i < ranges.length; i++) {
                var range = ranges[i];
                if (range.empty()) range.head.line > end && (indentLine(this, range.head.line, how, !0), 
                end = range.head.line, i == this.doc.sel.primIndex && ensureCursorVisible(this)); else {
                    var from = range.from(), to = range.to(), start = Math.max(end, from.line);
                    end = Math.min(this.lastLine(), to.line - (to.ch ? 0 : 1)) + 1;
                    for (var j = start; j < end; ++j) indentLine(this, j, how);
                    var newRanges = this.doc.sel.ranges;
                    0 == from.ch && ranges.length == newRanges.length && newRanges[i].from().ch > 0 && replaceOneSelection(this.doc, i, new Range(from, newRanges[i].to()), sel_dontScroll);
                }
            }
        }),
        getTokenAt: function(pos, precise) {
            return takeToken(this, pos, precise);
        },
        getLineTokens: function(line, precise) {
            return takeToken(this, Pos(line), precise, !0);
        },
        getTokenTypeAt: function(pos) {
            pos = clipPos(this.doc, pos);
            var type, styles = getLineStyles(this, getLine(this.doc, pos.line)), before = 0, after = (styles.length - 1) / 2, ch = pos.ch;
            if (0 == ch) type = styles[2]; else for (;;) {
                var mid = before + after >> 1;
                if ((mid ? styles[2 * mid - 1] : 0) >= ch) after = mid; else {
                    if (!(styles[2 * mid + 1] < ch)) {
                        type = styles[2 * mid + 2];
                        break;
                    }
                    before = mid + 1;
                }
            }
            var cut = type ? type.indexOf("cm-overlay ") : -1;
            return cut < 0 ? type : 0 == cut ? null : type.slice(0, cut - 1);
        },
        getModeAt: function(pos) {
            var mode = this.doc.mode;
            return mode.innerMode ? CodeMirror.innerMode(mode, this.getTokenAt(pos).state).mode : mode;
        },
        getHelper: function(pos, type) {
            return this.getHelpers(pos, type)[0];
        },
        getHelpers: function(pos, type) {
            var found = [];
            if (!helpers.hasOwnProperty(type)) return found;
            var help = helpers[type], mode = this.getModeAt(pos);
            if ("string" == typeof mode[type]) help[mode[type]] && found.push(help[mode[type]]); else if (mode[type]) for (i = 0; i < mode[type].length; i++) {
                var val = help[mode[type][i]];
                val && found.push(val);
            } else mode.helperType && help[mode.helperType] ? found.push(help[mode.helperType]) : help[mode.name] && found.push(help[mode.name]);
            for (var i = 0; i < help._global.length; i++) {
                var cur = help._global[i];
                cur.pred(mode, this) && -1 == indexOf(found, cur.val) && found.push(cur.val);
            }
            return found;
        },
        getStateAfter: function(line, precise) {
            var doc = this.doc;
            return line = clipLine(doc, null == line ? doc.first + doc.size - 1 : line), getStateBefore(this, line + 1, precise);
        },
        cursorCoords: function(start, mode) {
            var pos, range = this.doc.sel.primary();
            return pos = null == start ? range.head : "object" == typeof start ? clipPos(this.doc, start) : start ? range.from() : range.to(), 
            cursorCoords(this, pos, mode || "page");
        },
        charCoords: function(pos, mode) {
            return charCoords(this, clipPos(this.doc, pos), mode || "page");
        },
        coordsChar: function(coords, mode) {
            return coords = fromCoordSystem(this, coords, mode || "page"), coordsChar(this, coords.left, coords.top);
        },
        lineAtHeight: function(height, mode) {
            return height = fromCoordSystem(this, {
                top: height,
                left: 0
            }, mode || "page").top, lineAtHeight(this.doc, height + this.display.viewOffset);
        },
        heightAtLine: function(line, mode) {
            var lineObj, end = !1;
            if ("number" == typeof line) {
                var last = this.doc.first + this.doc.size - 1;
                line < this.doc.first ? line = this.doc.first : line > last && (line = last, end = !0), 
                lineObj = getLine(this.doc, line);
            } else lineObj = line;
            return intoCoordSystem(this, lineObj, {
                top: 0,
                left: 0
            }, mode || "page").top + (end ? this.doc.height - heightAtLine(lineObj) : 0);
        },
        defaultTextHeight: function() {
            return textHeight(this.display);
        },
        defaultCharWidth: function() {
            return charWidth(this.display);
        },
        setGutterMarker: methodOp(function(line, gutterID, value) {
            return changeLine(this.doc, line, "gutter", function(line) {
                var markers = line.gutterMarkers || (line.gutterMarkers = {});
                return markers[gutterID] = value, !value && isEmpty(markers) && (line.gutterMarkers = null), 
                !0;
            });
        }),
        clearGutter: methodOp(function(gutterID) {
            var cm = this, doc = cm.doc, i = doc.first;
            doc.iter(function(line) {
                line.gutterMarkers && line.gutterMarkers[gutterID] && (line.gutterMarkers[gutterID] = null, 
                regLineChange(cm, i, "gutter"), isEmpty(line.gutterMarkers) && (line.gutterMarkers = null)), 
                ++i;
            });
        }),
        lineInfo: function(line) {
            if ("number" == typeof line) {
                if (!isLine(this.doc, line)) return null;
                var n = line;
                if (!(line = getLine(this.doc, line))) return null;
            } else if (null == (n = lineNo(line))) return null;
            return {
                line: n,
                handle: line,
                text: line.text,
                gutterMarkers: line.gutterMarkers,
                textClass: line.textClass,
                bgClass: line.bgClass,
                wrapClass: line.wrapClass,
                widgets: line.widgets
            };
        },
        getViewport: function() {
            return {
                from: this.display.viewFrom,
                to: this.display.viewTo
            };
        },
        addWidget: function(pos, node, scroll, vert, horiz) {
            var display = this.display, top = (pos = cursorCoords(this, clipPos(this.doc, pos))).bottom, left = pos.left;
            if (node.style.position = "absolute", node.setAttribute("cm-ignore-events", "true"), 
            this.display.input.setUneditable(node), display.sizer.appendChild(node), "over" == vert) top = pos.top; else if ("above" == vert || "near" == vert) {
                var vspace = Math.max(display.wrapper.clientHeight, this.doc.height), hspace = Math.max(display.sizer.clientWidth, display.lineSpace.clientWidth);
                ("above" == vert || pos.bottom + node.offsetHeight > vspace) && pos.top > node.offsetHeight ? top = pos.top - node.offsetHeight : pos.bottom + node.offsetHeight <= vspace && (top = pos.bottom), 
                left + node.offsetWidth > hspace && (left = hspace - node.offsetWidth);
            }
            node.style.top = top + "px", node.style.left = node.style.right = "", "right" == horiz ? (left = display.sizer.clientWidth - node.offsetWidth, 
            node.style.right = "0px") : ("left" == horiz ? left = 0 : "middle" == horiz && (left = (display.sizer.clientWidth - node.offsetWidth) / 2), 
            node.style.left = left + "px"), scroll && scrollIntoView(this, left, top, left + node.offsetWidth, top + node.offsetHeight);
        },
        triggerOnKeyDown: methodOp(onKeyDown),
        triggerOnKeyPress: methodOp(onKeyPress),
        triggerOnKeyUp: onKeyUp,
        execCommand: function(cmd) {
            if (commands.hasOwnProperty(cmd)) return commands[cmd].call(null, this);
        },
        triggerElectric: methodOp(function(text) {
            triggerElectric(this, text);
        }),
        findPosH: function(from, amount, unit, visually) {
            var dir = 1;
            amount < 0 && (dir = -1, amount = -amount);
            for (var i = 0, cur = clipPos(this.doc, from); i < amount && !(cur = findPosH(this.doc, cur, dir, unit, visually)).hitSide; ++i) ;
            return cur;
        },
        moveH: methodOp(function(dir, unit) {
            var cm = this;
            cm.extendSelectionsBy(function(range) {
                return cm.display.shift || cm.doc.extend || range.empty() ? findPosH(cm.doc, range.head, dir, unit, cm.options.rtlMoveVisually) : dir < 0 ? range.from() : range.to();
            }, sel_move);
        }),
        deleteH: methodOp(function(dir, unit) {
            var sel = this.doc.sel, doc = this.doc;
            sel.somethingSelected() ? doc.replaceSelection("", null, "+delete") : deleteNearSelection(this, function(range) {
                var other = findPosH(doc, range.head, dir, unit, !1);
                return dir < 0 ? {
                    from: other,
                    to: range.head
                } : {
                    from: range.head,
                    to: other
                };
            });
        }),
        findPosV: function(from, amount, unit, goalColumn) {
            var dir = 1, x = goalColumn;
            amount < 0 && (dir = -1, amount = -amount);
            for (var i = 0, cur = clipPos(this.doc, from); i < amount; ++i) {
                var coords = cursorCoords(this, cur, "div");
                if (null == x ? x = coords.left : coords.left = x, (cur = findPosV(this, coords, dir, unit)).hitSide) break;
            }
            return cur;
        },
        moveV: methodOp(function(dir, unit) {
            var cm = this, doc = this.doc, goals = [], collapse = !cm.display.shift && !doc.extend && doc.sel.somethingSelected();
            if (doc.extendSelectionsBy(function(range) {
                if (collapse) return dir < 0 ? range.from() : range.to();
                var headPos = cursorCoords(cm, range.head, "div");
                null != range.goalColumn && (headPos.left = range.goalColumn), goals.push(headPos.left);
                var pos = findPosV(cm, headPos, dir, unit);
                return "page" == unit && range == doc.sel.primary() && addToScrollPos(cm, null, charCoords(cm, pos, "div").top - headPos.top), 
                pos;
            }, sel_move), goals.length) for (var i = 0; i < doc.sel.ranges.length; i++) doc.sel.ranges[i].goalColumn = goals[i];
        }),
        findWordAt: function(pos) {
            var line = getLine(this.doc, pos.line).text, start = pos.ch, end = pos.ch;
            if (line) {
                var helper = this.getHelper(pos, "wordChars");
                (pos.xRel < 0 || end == line.length) && start ? --start : ++end;
                for (var startChar = line.charAt(start), check = isWordChar(startChar, helper) ? function(ch) {
                    return isWordChar(ch, helper);
                } : /\s/.test(startChar) ? function(ch) {
                    return /\s/.test(ch);
                } : function(ch) {
                    return !/\s/.test(ch) && !isWordChar(ch);
                }; start > 0 && check(line.charAt(start - 1)); ) --start;
                for (;end < line.length && check(line.charAt(end)); ) ++end;
            }
            return new Range(Pos(pos.line, start), Pos(pos.line, end));
        },
        toggleOverwrite: function(value) {
            null != value && value == this.state.overwrite || ((this.state.overwrite = !this.state.overwrite) ? addClass(this.display.cursorDiv, "CodeMirror-overwrite") : rmClass(this.display.cursorDiv, "CodeMirror-overwrite"), 
            signal(this, "overwriteToggle", this, this.state.overwrite));
        },
        hasFocus: function() {
            return this.display.input.getField() == activeElt();
        },
        isReadOnly: function() {
            return !(!this.options.readOnly && !this.doc.cantEdit);
        },
        scrollTo: methodOp(function(x, y) {
            null == x && null == y || resolveScrollToPos(this), null != x && (this.curOp.scrollLeft = x), 
            null != y && (this.curOp.scrollTop = y);
        }),
        getScrollInfo: function() {
            var scroller = this.display.scroller;
            return {
                left: scroller.scrollLeft,
                top: scroller.scrollTop,
                height: scroller.scrollHeight - scrollGap(this) - this.display.barHeight,
                width: scroller.scrollWidth - scrollGap(this) - this.display.barWidth,
                clientHeight: displayHeight(this),
                clientWidth: displayWidth(this)
            };
        },
        scrollIntoView: methodOp(function(range, margin) {
            if (null == range ? (range = {
                from: this.doc.sel.primary().head,
                to: null
            }, null == margin && (margin = this.options.cursorScrollMargin)) : "number" == typeof range ? range = {
                from: Pos(range, 0),
                to: null
            } : null == range.from && (range = {
                from: range,
                to: null
            }), range.to || (range.to = range.from), range.margin = margin || 0, null != range.from.line) resolveScrollToPos(this), 
            this.curOp.scrollToPos = range; else {
                var sPos = calculateScrollPos(this, Math.min(range.from.left, range.to.left), Math.min(range.from.top, range.to.top) - range.margin, Math.max(range.from.right, range.to.right), Math.max(range.from.bottom, range.to.bottom) + range.margin);
                this.scrollTo(sPos.scrollLeft, sPos.scrollTop);
            }
        }),
        setSize: methodOp(function(width, height) {
            function interpret(val) {
                return "number" == typeof val || /^\d+$/.test(String(val)) ? val + "px" : val;
            }
            var cm = this;
            null != width && (cm.display.wrapper.style.width = interpret(width)), null != height && (cm.display.wrapper.style.height = interpret(height)), 
            cm.options.lineWrapping && clearLineMeasurementCache(this);
            var lineNo = cm.display.viewFrom;
            cm.doc.iter(lineNo, cm.display.viewTo, function(line) {
                if (line.widgets) for (var i = 0; i < line.widgets.length; i++) if (line.widgets[i].noHScroll) {
                    regLineChange(cm, lineNo, "widget");
                    break;
                }
                ++lineNo;
            }), cm.curOp.forceUpdate = !0, signal(cm, "refresh", this);
        }),
        operation: function(f) {
            return runInOp(this, f);
        },
        refresh: methodOp(function() {
            var oldHeight = this.display.cachedTextHeight;
            regChange(this), this.curOp.forceUpdate = !0, clearCaches(this), this.scrollTo(this.doc.scrollLeft, this.doc.scrollTop), 
            updateGutterSpace(this), (null == oldHeight || Math.abs(oldHeight - textHeight(this.display)) > .5) && estimateLineHeights(this), 
            signal(this, "refresh", this);
        }),
        swapDoc: methodOp(function(doc) {
            var old = this.doc;
            return old.cm = null, attachDoc(this, doc), clearCaches(this), this.display.input.reset(), 
            this.scrollTo(doc.scrollLeft, doc.scrollTop), this.curOp.forceScroll = !0, signalLater(this, "swapDoc", this, old), 
            old;
        }),
        getInputField: function() {
            return this.display.input.getField();
        },
        getWrapperElement: function() {
            return this.display.wrapper;
        },
        getScrollerElement: function() {
            return this.display.scroller;
        },
        getGutterElement: function() {
            return this.display.gutters;
        }
    }, eventMixin(CodeMirror);
    var defaults = CodeMirror.defaults = {}, optionHandlers = CodeMirror.optionHandlers = {}, Init = CodeMirror.Init = {
        toString: function() {
            return "CodeMirror.Init";
        }
    };
    option("value", "", function(cm, val) {
        cm.setValue(val);
    }, !0), option("mode", null, function(cm, val) {
        cm.doc.modeOption = val, loadMode(cm);
    }, !0), option("indentUnit", 2, loadMode, !0), option("indentWithTabs", !1), option("smartIndent", !0), 
    option("tabSize", 4, function(cm) {
        resetModeState(cm), clearCaches(cm), regChange(cm);
    }, !0), option("lineSeparator", null, function(cm, val) {
        if (cm.doc.lineSep = val, val) {
            var newBreaks = [], lineNo = cm.doc.first;
            cm.doc.iter(function(line) {
                for (var pos = 0; ;) {
                    var found = line.text.indexOf(val, pos);
                    if (-1 == found) break;
                    pos = found + val.length, newBreaks.push(Pos(lineNo, found));
                }
                lineNo++;
            });
            for (var i = newBreaks.length - 1; i >= 0; i--) replaceRange(cm.doc, val, newBreaks[i], Pos(newBreaks[i].line, newBreaks[i].ch + val.length));
        }
    }), option("specialChars", /[\u0000-\u001f\u007f\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g, function(cm, val, old) {
        cm.state.specialChars = new RegExp(val.source + (val.test("\t") ? "" : "|\t"), "g"), 
        old != CodeMirror.Init && cm.refresh();
    }), option("specialCharPlaceholder", function(ch) {
        var token = elt("span", "\u2022", "cm-invalidchar");
        return token.title = "\\u" + ch.charCodeAt(0).toString(16), token.setAttribute("aria-label", token.title), 
        token;
    }, function(cm) {
        cm.refresh();
    }, !0), option("electricChars", !0), option("inputStyle", mobile ? "contenteditable" : "textarea", function() {
        throw new Error("inputStyle can not (yet) be changed in a running editor");
    }, !0), option("rtlMoveVisually", !windows), option("wholeLineUpdateBefore", !0), 
    option("theme", "default", function(cm) {
        themeChanged(cm), guttersChanged(cm);
    }, !0), option("keyMap", "default", function(cm, val, old) {
        var next = getKeyMap(val), prev = old != CodeMirror.Init && getKeyMap(old);
        prev && prev.detach && prev.detach(cm, next), next.attach && next.attach(cm, prev || null);
    }), option("extraKeys", null), option("lineWrapping", !1, function(cm) {
        cm.options.lineWrapping ? (addClass(cm.display.wrapper, "CodeMirror-wrap"), cm.display.sizer.style.minWidth = "", 
        cm.display.sizerWidth = null) : (rmClass(cm.display.wrapper, "CodeMirror-wrap"), 
        findMaxLine(cm)), estimateLineHeights(cm), regChange(cm), clearCaches(cm), setTimeout(function() {
            updateScrollbars(cm);
        }, 100);
    }, !0), option("gutters", [], function(cm) {
        setGuttersForLineNumbers(cm.options), guttersChanged(cm);
    }, !0), option("fixedGutter", !0, function(cm, val) {
        cm.display.gutters.style.left = val ? compensateForHScroll(cm.display) + "px" : "0", 
        cm.refresh();
    }, !0), option("coverGutterNextToScrollbar", !1, function(cm) {
        updateScrollbars(cm);
    }, !0), option("scrollbarStyle", "native", function(cm) {
        initScrollbars(cm), updateScrollbars(cm), cm.display.scrollbars.setScrollTop(cm.doc.scrollTop), 
        cm.display.scrollbars.setScrollLeft(cm.doc.scrollLeft);
    }, !0), option("lineNumbers", !1, function(cm) {
        setGuttersForLineNumbers(cm.options), guttersChanged(cm);
    }, !0), option("firstLineNumber", 1, guttersChanged, !0), option("lineNumberFormatter", function(integer) {
        return integer;
    }, guttersChanged, !0), option("showCursorWhenSelecting", !1, updateSelection, !0), 
    option("resetSelectionOnContextMenu", !0), option("lineWiseCopyCut", !0), option("readOnly", !1, function(cm, val) {
        "nocursor" == val ? (onBlur(cm), cm.display.input.blur(), cm.display.disabled = !0) : cm.display.disabled = !1, 
        cm.display.input.readOnlyChanged(val);
    }), option("disableInput", !1, function(cm, val) {
        val || cm.display.input.reset();
    }, !0), option("dragDrop", !0, function(cm, value, old) {
        if (!value != !(old && old != CodeMirror.Init)) {
            var funcs = cm.display.dragFunctions, toggle = value ? on : off;
            toggle(cm.display.scroller, "dragstart", funcs.start), toggle(cm.display.scroller, "dragenter", funcs.enter), 
            toggle(cm.display.scroller, "dragover", funcs.over), toggle(cm.display.scroller, "dragleave", funcs.leave), 
            toggle(cm.display.scroller, "drop", funcs.drop);
        }
    }), option("allowDropFileTypes", null), option("cursorBlinkRate", 530), option("cursorScrollMargin", 0), 
    option("cursorHeight", 1, updateSelection, !0), option("singleCursorHeightPerLine", !0, updateSelection, !0), 
    option("workTime", 100), option("workDelay", 100), option("flattenSpans", !0, resetModeState, !0), 
    option("addModeClass", !1, resetModeState, !0), option("pollInterval", 100), option("undoDepth", 200, function(cm, val) {
        cm.doc.history.undoDepth = val;
    }), option("historyEventDelay", 1250), option("viewportMargin", 10, function(cm) {
        cm.refresh();
    }, !0), option("maxHighlightLength", 1e4, resetModeState, !0), option("moveInputWithCursor", !0, function(cm, val) {
        val || cm.display.input.resetPosition();
    }), option("tabindex", null, function(cm, val) {
        cm.display.input.getField().tabIndex = val || "";
    }), option("autofocus", null);
    var modes = CodeMirror.modes = {}, mimeModes = CodeMirror.mimeModes = {};
    CodeMirror.defineMode = function(name, mode) {
        CodeMirror.defaults.mode || "null" == name || (CodeMirror.defaults.mode = name), 
        arguments.length > 2 && (mode.dependencies = Array.prototype.slice.call(arguments, 2)), 
        modes[name] = mode;
    }, CodeMirror.defineMIME = function(mime, spec) {
        mimeModes[mime] = spec;
    }, CodeMirror.resolveMode = function(spec) {
        if ("string" == typeof spec && mimeModes.hasOwnProperty(spec)) spec = mimeModes[spec]; else if (spec && "string" == typeof spec.name && mimeModes.hasOwnProperty(spec.name)) {
            var found = mimeModes[spec.name];
            "string" == typeof found && (found = {
                name: found
            }), (spec = createObj(found, spec)).name = found.name;
        } else if ("string" == typeof spec && /^[\w\-]+\/[\w\-]+\+xml$/.test(spec)) return CodeMirror.resolveMode("application/xml");
        return "string" == typeof spec ? {
            name: spec
        } : spec || {
            name: "null"
        };
    }, CodeMirror.getMode = function(options, spec) {
        var spec = CodeMirror.resolveMode(spec), mfactory = modes[spec.name];
        if (!mfactory) return CodeMirror.getMode(options, "text/plain");
        var modeObj = mfactory(options, spec);
        if (modeExtensions.hasOwnProperty(spec.name)) {
            var exts = modeExtensions[spec.name];
            for (var prop in exts) exts.hasOwnProperty(prop) && (modeObj.hasOwnProperty(prop) && (modeObj["_" + prop] = modeObj[prop]), 
            modeObj[prop] = exts[prop]);
        }
        if (modeObj.name = spec.name, spec.helperType && (modeObj.helperType = spec.helperType), 
        spec.modeProps) for (var prop in spec.modeProps) modeObj[prop] = spec.modeProps[prop];
        return modeObj;
    }, CodeMirror.defineMode("null", function() {
        return {
            token: function(stream) {
                stream.skipToEnd();
            }
        };
    }), CodeMirror.defineMIME("text/plain", "null");
    var modeExtensions = CodeMirror.modeExtensions = {};
    CodeMirror.extendMode = function(mode, properties) {
        copyObj(properties, modeExtensions.hasOwnProperty(mode) ? modeExtensions[mode] : modeExtensions[mode] = {});
    }, CodeMirror.defineExtension = function(name, func) {
        CodeMirror.prototype[name] = func;
    }, CodeMirror.defineDocExtension = function(name, func) {
        Doc.prototype[name] = func;
    }, CodeMirror.defineOption = option;
    var initHooks = [];
    CodeMirror.defineInitHook = function(f) {
        initHooks.push(f);
    };
    var helpers = CodeMirror.helpers = {};
    CodeMirror.registerHelper = function(type, name, value) {
        helpers.hasOwnProperty(type) || (helpers[type] = CodeMirror[type] = {
            _global: []
        }), helpers[type][name] = value;
    }, CodeMirror.registerGlobalHelper = function(type, name, predicate, value) {
        CodeMirror.registerHelper(type, name, value), helpers[type]._global.push({
            pred: predicate,
            val: value
        });
    };
    var copyState = CodeMirror.copyState = function(mode, state) {
        if (!0 === state) return state;
        if (mode.copyState) return mode.copyState(state);
        var nstate = {};
        for (var n in state) {
            var val = state[n];
            val instanceof Array && (val = val.concat([])), nstate[n] = val;
        }
        return nstate;
    }, startState = CodeMirror.startState = function(mode, a1, a2) {
        return !mode.startState || mode.startState(a1, a2);
    };
    CodeMirror.innerMode = function(mode, state) {
        for (;mode.innerMode; ) {
            var info = mode.innerMode(state);
            if (!info || info.mode == mode) break;
            state = info.state, mode = info.mode;
        }
        return info || {
            mode: mode,
            state: state
        };
    };
    var commands = CodeMirror.commands = {
        selectAll: function(cm) {
            cm.setSelection(Pos(cm.firstLine(), 0), Pos(cm.lastLine()), sel_dontScroll);
        },
        singleSelection: function(cm) {
            cm.setSelection(cm.getCursor("anchor"), cm.getCursor("head"), sel_dontScroll);
        },
        killLine: function(cm) {
            deleteNearSelection(cm, function(range) {
                if (range.empty()) {
                    var len = getLine(cm.doc, range.head.line).text.length;
                    return range.head.ch == len && range.head.line < cm.lastLine() ? {
                        from: range.head,
                        to: Pos(range.head.line + 1, 0)
                    } : {
                        from: range.head,
                        to: Pos(range.head.line, len)
                    };
                }
                return {
                    from: range.from(),
                    to: range.to()
                };
            });
        },
        deleteLine: function(cm) {
            deleteNearSelection(cm, function(range) {
                return {
                    from: Pos(range.from().line, 0),
                    to: clipPos(cm.doc, Pos(range.to().line + 1, 0))
                };
            });
        },
        delLineLeft: function(cm) {
            deleteNearSelection(cm, function(range) {
                return {
                    from: Pos(range.from().line, 0),
                    to: range.from()
                };
            });
        },
        delWrappedLineLeft: function(cm) {
            deleteNearSelection(cm, function(range) {
                var top = cm.charCoords(range.head, "div").top + 5;
                return {
                    from: cm.coordsChar({
                        left: 0,
                        top: top
                    }, "div"),
                    to: range.from()
                };
            });
        },
        delWrappedLineRight: function(cm) {
            deleteNearSelection(cm, function(range) {
                var top = cm.charCoords(range.head, "div").top + 5, rightPos = cm.coordsChar({
                    left: cm.display.lineDiv.offsetWidth + 100,
                    top: top
                }, "div");
                return {
                    from: range.from(),
                    to: rightPos
                };
            });
        },
        undo: function(cm) {
            cm.undo();
        },
        redo: function(cm) {
            cm.redo();
        },
        undoSelection: function(cm) {
            cm.undoSelection();
        },
        redoSelection: function(cm) {
            cm.redoSelection();
        },
        goDocStart: function(cm) {
            cm.extendSelection(Pos(cm.firstLine(), 0));
        },
        goDocEnd: function(cm) {
            cm.extendSelection(Pos(cm.lastLine()));
        },
        goLineStart: function(cm) {
            cm.extendSelectionsBy(function(range) {
                return lineStart(cm, range.head.line);
            }, {
                origin: "+move",
                bias: 1
            });
        },
        goLineStartSmart: function(cm) {
            cm.extendSelectionsBy(function(range) {
                return lineStartSmart(cm, range.head);
            }, {
                origin: "+move",
                bias: 1
            });
        },
        goLineEnd: function(cm) {
            cm.extendSelectionsBy(function(range) {
                return lineEnd(cm, range.head.line);
            }, {
                origin: "+move",
                bias: -1
            });
        },
        goLineRight: function(cm) {
            cm.extendSelectionsBy(function(range) {
                var top = cm.charCoords(range.head, "div").top + 5;
                return cm.coordsChar({
                    left: cm.display.lineDiv.offsetWidth + 100,
                    top: top
                }, "div");
            }, sel_move);
        },
        goLineLeft: function(cm) {
            cm.extendSelectionsBy(function(range) {
                var top = cm.charCoords(range.head, "div").top + 5;
                return cm.coordsChar({
                    left: 0,
                    top: top
                }, "div");
            }, sel_move);
        },
        goLineLeftSmart: function(cm) {
            cm.extendSelectionsBy(function(range) {
                var top = cm.charCoords(range.head, "div").top + 5, pos = cm.coordsChar({
                    left: 0,
                    top: top
                }, "div");
                return pos.ch < cm.getLine(pos.line).search(/\S/) ? lineStartSmart(cm, range.head) : pos;
            }, sel_move);
        },
        goLineUp: function(cm) {
            cm.moveV(-1, "line");
        },
        goLineDown: function(cm) {
            cm.moveV(1, "line");
        },
        goPageUp: function(cm) {
            cm.moveV(-1, "page");
        },
        goPageDown: function(cm) {
            cm.moveV(1, "page");
        },
        goCharLeft: function(cm) {
            cm.moveH(-1, "char");
        },
        goCharRight: function(cm) {
            cm.moveH(1, "char");
        },
        goColumnLeft: function(cm) {
            cm.moveH(-1, "column");
        },
        goColumnRight: function(cm) {
            cm.moveH(1, "column");
        },
        goWordLeft: function(cm) {
            cm.moveH(-1, "word");
        },
        goGroupRight: function(cm) {
            cm.moveH(1, "group");
        },
        goGroupLeft: function(cm) {
            cm.moveH(-1, "group");
        },
        goWordRight: function(cm) {
            cm.moveH(1, "word");
        },
        delCharBefore: function(cm) {
            cm.deleteH(-1, "char");
        },
        delCharAfter: function(cm) {
            cm.deleteH(1, "char");
        },
        delWordBefore: function(cm) {
            cm.deleteH(-1, "word");
        },
        delWordAfter: function(cm) {
            cm.deleteH(1, "word");
        },
        delGroupBefore: function(cm) {
            cm.deleteH(-1, "group");
        },
        delGroupAfter: function(cm) {
            cm.deleteH(1, "group");
        },
        indentAuto: function(cm) {
            cm.indentSelection("smart");
        },
        indentMore: function(cm) {
            cm.indentSelection("add");
        },
        indentLess: function(cm) {
            cm.indentSelection("subtract");
        },
        insertTab: function(cm) {
            cm.replaceSelection("\t");
        },
        insertSoftTab: function(cm) {
            for (var spaces = [], ranges = cm.listSelections(), tabSize = cm.options.tabSize, i = 0; i < ranges.length; i++) {
                var pos = ranges[i].from(), col = countColumn(cm.getLine(pos.line), pos.ch, tabSize);
                spaces.push(spaceStr(tabSize - col % tabSize));
            }
            cm.replaceSelections(spaces);
        },
        defaultTab: function(cm) {
            cm.somethingSelected() ? cm.indentSelection("add") : cm.execCommand("insertTab");
        },
        transposeChars: function(cm) {
            runInOp(cm, function() {
                for (var ranges = cm.listSelections(), newSel = [], i = 0; i < ranges.length; i++) {
                    var cur = ranges[i].head, line = getLine(cm.doc, cur.line).text;
                    if (line) if (cur.ch == line.length && (cur = new Pos(cur.line, cur.ch - 1)), cur.ch > 0) cur = new Pos(cur.line, cur.ch + 1), 
                    cm.replaceRange(line.charAt(cur.ch - 1) + line.charAt(cur.ch - 2), Pos(cur.line, cur.ch - 2), cur, "+transpose"); else if (cur.line > cm.doc.first) {
                        var prev = getLine(cm.doc, cur.line - 1).text;
                        prev && cm.replaceRange(line.charAt(0) + cm.doc.lineSeparator() + prev.charAt(prev.length - 1), Pos(cur.line - 1, prev.length - 1), Pos(cur.line, 1), "+transpose");
                    }
                    newSel.push(new Range(cur, cur));
                }
                cm.setSelections(newSel);
            });
        },
        newlineAndIndent: function(cm) {
            runInOp(cm, function() {
                for (var len = cm.listSelections().length, i = 0; i < len; i++) {
                    var range = cm.listSelections()[i];
                    cm.replaceRange(cm.doc.lineSeparator(), range.anchor, range.head, "+input"), cm.indentLine(range.from().line + 1, null, !0);
                }
                ensureCursorVisible(cm);
            });
        },
        openLine: function(cm) {
            cm.replaceSelection("\n", "start");
        },
        toggleOverwrite: function(cm) {
            cm.toggleOverwrite();
        }
    }, keyMap = CodeMirror.keyMap = {};
    keyMap.basic = {
        Left: "goCharLeft",
        Right: "goCharRight",
        Up: "goLineUp",
        Down: "goLineDown",
        End: "goLineEnd",
        Home: "goLineStartSmart",
        PageUp: "goPageUp",
        PageDown: "goPageDown",
        Delete: "delCharAfter",
        Backspace: "delCharBefore",
        "Shift-Backspace": "delCharBefore",
        Tab: "defaultTab",
        "Shift-Tab": "indentAuto",
        Enter: "newlineAndIndent",
        Insert: "toggleOverwrite",
        Esc: "singleSelection"
    }, keyMap.pcDefault = {
        "Ctrl-A": "selectAll",
        "Ctrl-D": "deleteLine",
        "Ctrl-Z": "undo",
        "Shift-Ctrl-Z": "redo",
        "Ctrl-Y": "redo",
        "Ctrl-Home": "goDocStart",
        "Ctrl-End": "goDocEnd",
        "Ctrl-Up": "goLineUp",
        "Ctrl-Down": "goLineDown",
        "Ctrl-Left": "goGroupLeft",
        "Ctrl-Right": "goGroupRight",
        "Alt-Left": "goLineStart",
        "Alt-Right": "goLineEnd",
        "Ctrl-Backspace": "delGroupBefore",
        "Ctrl-Delete": "delGroupAfter",
        "Ctrl-S": "save",
        "Ctrl-F": "find",
        "Ctrl-G": "findNext",
        "Shift-Ctrl-G": "findPrev",
        "Shift-Ctrl-F": "replace",
        "Shift-Ctrl-R": "replaceAll",
        "Ctrl-[": "indentLess",
        "Ctrl-]": "indentMore",
        "Ctrl-U": "undoSelection",
        "Shift-Ctrl-U": "redoSelection",
        "Alt-U": "redoSelection",
        fallthrough: "basic"
    }, keyMap.emacsy = {
        "Ctrl-F": "goCharRight",
        "Ctrl-B": "goCharLeft",
        "Ctrl-P": "goLineUp",
        "Ctrl-N": "goLineDown",
        "Alt-F": "goWordRight",
        "Alt-B": "goWordLeft",
        "Ctrl-A": "goLineStart",
        "Ctrl-E": "goLineEnd",
        "Ctrl-V": "goPageDown",
        "Shift-Ctrl-V": "goPageUp",
        "Ctrl-D": "delCharAfter",
        "Ctrl-H": "delCharBefore",
        "Alt-D": "delWordAfter",
        "Alt-Backspace": "delWordBefore",
        "Ctrl-K": "killLine",
        "Ctrl-T": "transposeChars",
        "Ctrl-O": "openLine"
    }, keyMap.macDefault = {
        "Cmd-A": "selectAll",
        "Cmd-D": "deleteLine",
        "Cmd-Z": "undo",
        "Shift-Cmd-Z": "redo",
        "Cmd-Y": "redo",
        "Cmd-Home": "goDocStart",
        "Cmd-Up": "goDocStart",
        "Cmd-End": "goDocEnd",
        "Cmd-Down": "goDocEnd",
        "Alt-Left": "goGroupLeft",
        "Alt-Right": "goGroupRight",
        "Cmd-Left": "goLineLeft",
        "Cmd-Right": "goLineRight",
        "Alt-Backspace": "delGroupBefore",
        "Ctrl-Alt-Backspace": "delGroupAfter",
        "Alt-Delete": "delGroupAfter",
        "Cmd-S": "save",
        "Cmd-F": "find",
        "Cmd-G": "findNext",
        "Shift-Cmd-G": "findPrev",
        "Cmd-Alt-F": "replace",
        "Shift-Cmd-Alt-F": "replaceAll",
        "Cmd-[": "indentLess",
        "Cmd-]": "indentMore",
        "Cmd-Backspace": "delWrappedLineLeft",
        "Cmd-Delete": "delWrappedLineRight",
        "Cmd-U": "undoSelection",
        "Shift-Cmd-U": "redoSelection",
        "Ctrl-Up": "goDocStart",
        "Ctrl-Down": "goDocEnd",
        fallthrough: [ "basic", "emacsy" ]
    }, keyMap.default = mac ? keyMap.macDefault : keyMap.pcDefault, CodeMirror.normalizeKeyMap = function(keymap) {
        var copy = {};
        for (var keyname in keymap) if (keymap.hasOwnProperty(keyname)) {
            var value = keymap[keyname];
            if (/^(name|fallthrough|(de|at)tach)$/.test(keyname)) continue;
            if ("..." == value) {
                delete keymap[keyname];
                continue;
            }
            for (var keys = map(keyname.split(" "), normalizeKeyName), i = 0; i < keys.length; i++) {
                var val, name;
                i == keys.length - 1 ? (name = keys.join(" "), val = value) : (name = keys.slice(0, i + 1).join(" "), 
                val = "...");
                var prev = copy[name];
                if (prev) {
                    if (prev != val) throw new Error("Inconsistent bindings for " + name);
                } else copy[name] = val;
            }
            delete keymap[keyname];
        }
        for (var prop in copy) keymap[prop] = copy[prop];
        return keymap;
    };
    var lookupKey = CodeMirror.lookupKey = function(key, map, handle, context) {
        var found = (map = getKeyMap(map)).call ? map.call(key, context) : map[key];
        if (!1 === found) return "nothing";
        if ("..." === found) return "multi";
        if (null != found && handle(found)) return "handled";
        if (map.fallthrough) {
            if ("[object Array]" != Object.prototype.toString.call(map.fallthrough)) return lookupKey(key, map.fallthrough, handle, context);
            for (var i = 0; i < map.fallthrough.length; i++) {
                var result = lookupKey(key, map.fallthrough[i], handle, context);
                if (result) return result;
            }
        }
    }, isModifierKey = CodeMirror.isModifierKey = function(value) {
        var name = "string" == typeof value ? value : keyNames[value.keyCode];
        return "Ctrl" == name || "Alt" == name || "Shift" == name || "Mod" == name;
    }, keyName = CodeMirror.keyName = function(event, noShift) {
        if (presto && 34 == event.keyCode && event.char) return !1;
        var base = keyNames[event.keyCode], name = base;
        return null != name && !event.altGraphKey && (event.altKey && "Alt" != base && (name = "Alt-" + name), 
        (flipCtrlCmd ? event.metaKey : event.ctrlKey) && "Ctrl" != base && (name = "Ctrl-" + name), 
        (flipCtrlCmd ? event.ctrlKey : event.metaKey) && "Cmd" != base && (name = "Cmd-" + name), 
        !noShift && event.shiftKey && "Shift" != base && (name = "Shift-" + name), name);
    };
    CodeMirror.fromTextArea = function(textarea, options) {
        function save() {
            textarea.value = cm.getValue();
        }
        if (options = options ? copyObj(options) : {}, options.value = textarea.value, !options.tabindex && textarea.tabIndex && (options.tabindex = textarea.tabIndex), 
        !options.placeholder && textarea.placeholder && (options.placeholder = textarea.placeholder), 
        null == options.autofocus) {
            var hasFocus = activeElt();
            options.autofocus = hasFocus == textarea || null != textarea.getAttribute("autofocus") && hasFocus == document.body;
        }
        if (textarea.form && (on(textarea.form, "submit", save), !options.leaveSubmitMethodAlone)) {
            var form = textarea.form, realSubmit = form.submit;
            try {
                var wrappedSubmit = form.submit = function() {
                    save(), form.submit = realSubmit, form.submit(), form.submit = wrappedSubmit;
                };
            } catch (e) {}
        }
        options.finishInit = function(cm) {
            cm.save = save, cm.getTextArea = function() {
                return textarea;
            }, cm.toTextArea = function() {
                cm.toTextArea = isNaN, save(), textarea.parentNode.removeChild(cm.getWrapperElement()), 
                textarea.style.display = "", textarea.form && (off(textarea.form, "submit", save), 
                "function" == typeof textarea.form.submit && (textarea.form.submit = realSubmit));
            };
        }, textarea.style.display = "none";
        var cm = CodeMirror(function(node) {
            textarea.parentNode.insertBefore(node, textarea.nextSibling);
        }, options);
        return cm;
    };
    var StringStream = CodeMirror.StringStream = function(string, tabSize) {
        this.pos = this.start = 0, this.string = string, this.tabSize = tabSize || 8, this.lastColumnPos = this.lastColumnValue = 0, 
        this.lineStart = 0;
    };
    StringStream.prototype = {
        eol: function() {
            return this.pos >= this.string.length;
        },
        sol: function() {
            return this.pos == this.lineStart;
        },
        peek: function() {
            return this.string.charAt(this.pos) || void 0;
        },
        next: function() {
            if (this.pos < this.string.length) return this.string.charAt(this.pos++);
        },
        eat: function(match) {
            var ch = this.string.charAt(this.pos);
            if ("string" == typeof match) ok = ch == match; else var ok = ch && (match.test ? match.test(ch) : match(ch));
            if (ok) return ++this.pos, ch;
        },
        eatWhile: function(match) {
            for (var start = this.pos; this.eat(match); ) ;
            return this.pos > start;
        },
        eatSpace: function() {
            for (var start = this.pos; /[\s\u00a0]/.test(this.string.charAt(this.pos)); ) ++this.pos;
            return this.pos > start;
        },
        skipToEnd: function() {
            this.pos = this.string.length;
        },
        skipTo: function(ch) {
            var found = this.string.indexOf(ch, this.pos);
            if (found > -1) return this.pos = found, !0;
        },
        backUp: function(n) {
            this.pos -= n;
        },
        column: function() {
            return this.lastColumnPos < this.start && (this.lastColumnValue = countColumn(this.string, this.start, this.tabSize, this.lastColumnPos, this.lastColumnValue), 
            this.lastColumnPos = this.start), this.lastColumnValue - (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0);
        },
        indentation: function() {
            return countColumn(this.string, null, this.tabSize) - (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0);
        },
        match: function(pattern, consume, caseInsensitive) {
            if ("string" != typeof pattern) {
                var match = this.string.slice(this.pos).match(pattern);
                return match && match.index > 0 ? null : (match && !1 !== consume && (this.pos += match[0].length), 
                match);
            }
            var cased = function(str) {
                return caseInsensitive ? str.toLowerCase() : str;
            };
            if (cased(this.string.substr(this.pos, pattern.length)) == cased(pattern)) return !1 !== consume && (this.pos += pattern.length), 
            !0;
        },
        current: function() {
            return this.string.slice(this.start, this.pos);
        },
        hideFirstChars: function(n, inner) {
            this.lineStart += n;
            try {
                return inner();
            } finally {
                this.lineStart -= n;
            }
        }
    };
    var nextMarkerId = 0, TextMarker = CodeMirror.TextMarker = function(doc, type) {
        this.lines = [], this.type = type, this.doc = doc, this.id = ++nextMarkerId;
    };
    eventMixin(TextMarker), TextMarker.prototype.clear = function() {
        if (!this.explicitlyCleared) {
            var cm = this.doc.cm, withOp = cm && !cm.curOp;
            if (withOp && startOperation(cm), hasHandler(this, "clear")) {
                var found = this.find();
                found && signalLater(this, "clear", found.from, found.to);
            }
            for (var min = null, max = null, i = 0; i < this.lines.length; ++i) {
                var line = this.lines[i], span = getMarkedSpanFor(line.markedSpans, this);
                cm && !this.collapsed ? regLineChange(cm, lineNo(line), "text") : cm && (null != span.to && (max = lineNo(line)), 
                null != span.from && (min = lineNo(line))), line.markedSpans = removeMarkedSpan(line.markedSpans, span), 
                null == span.from && this.collapsed && !lineIsHidden(this.doc, line) && cm && updateLineHeight(line, textHeight(cm.display));
            }
            if (cm && this.collapsed && !cm.options.lineWrapping) for (i = 0; i < this.lines.length; ++i) {
                var visual = visualLine(this.lines[i]), len = lineLength(visual);
                len > cm.display.maxLineLength && (cm.display.maxLine = visual, cm.display.maxLineLength = len, 
                cm.display.maxLineChanged = !0);
            }
            null != min && cm && this.collapsed && regChange(cm, min, max + 1), this.lines.length = 0, 
            this.explicitlyCleared = !0, this.atomic && this.doc.cantEdit && (this.doc.cantEdit = !1, 
            cm && reCheckSelection(cm.doc)), cm && signalLater(cm, "markerCleared", cm, this), 
            withOp && endOperation(cm), this.parent && this.parent.clear();
        }
    }, TextMarker.prototype.find = function(side, lineObj) {
        null == side && "bookmark" == this.type && (side = 1);
        for (var from, to, i = 0; i < this.lines.length; ++i) {
            var line = this.lines[i], span = getMarkedSpanFor(line.markedSpans, this);
            if (null != span.from && (from = Pos(lineObj ? line : lineNo(line), span.from), 
            -1 == side)) return from;
            if (null != span.to && (to = Pos(lineObj ? line : lineNo(line), span.to), 1 == side)) return to;
        }
        return from && {
            from: from,
            to: to
        };
    }, TextMarker.prototype.changed = function() {
        var pos = this.find(-1, !0), widget = this, cm = this.doc.cm;
        pos && cm && runInOp(cm, function() {
            var line = pos.line, lineN = lineNo(pos.line), view = findViewForLine(cm, lineN);
            if (view && (clearLineMeasurementCacheFor(view), cm.curOp.selectionChanged = cm.curOp.forceUpdate = !0), 
            cm.curOp.updateMaxLine = !0, !lineIsHidden(widget.doc, line) && null != widget.height) {
                var oldHeight = widget.height;
                widget.height = null;
                var dHeight = widgetHeight(widget) - oldHeight;
                dHeight && updateLineHeight(line, line.height + dHeight);
            }
        });
    }, TextMarker.prototype.attachLine = function(line) {
        if (!this.lines.length && this.doc.cm) {
            var op = this.doc.cm.curOp;
            op.maybeHiddenMarkers && -1 != indexOf(op.maybeHiddenMarkers, this) || (op.maybeUnhiddenMarkers || (op.maybeUnhiddenMarkers = [])).push(this);
        }
        this.lines.push(line);
    }, TextMarker.prototype.detachLine = function(line) {
        if (this.lines.splice(indexOf(this.lines, line), 1), !this.lines.length && this.doc.cm) {
            var op = this.doc.cm.curOp;
            (op.maybeHiddenMarkers || (op.maybeHiddenMarkers = [])).push(this);
        }
    };
    var nextMarkerId = 0, SharedTextMarker = CodeMirror.SharedTextMarker = function(markers, primary) {
        this.markers = markers, this.primary = primary;
        for (var i = 0; i < markers.length; ++i) markers[i].parent = this;
    };
    eventMixin(SharedTextMarker), SharedTextMarker.prototype.clear = function() {
        if (!this.explicitlyCleared) {
            this.explicitlyCleared = !0;
            for (var i = 0; i < this.markers.length; ++i) this.markers[i].clear();
            signalLater(this, "clear");
        }
    }, SharedTextMarker.prototype.find = function(side, lineObj) {
        return this.primary.find(side, lineObj);
    };
    var LineWidget = CodeMirror.LineWidget = function(doc, node, options) {
        if (options) for (var opt in options) options.hasOwnProperty(opt) && (this[opt] = options[opt]);
        this.doc = doc, this.node = node;
    };
    eventMixin(LineWidget), LineWidget.prototype.clear = function() {
        var cm = this.doc.cm, ws = this.line.widgets, line = this.line, no = lineNo(line);
        if (null != no && ws) {
            for (var i = 0; i < ws.length; ++i) ws[i] == this && ws.splice(i--, 1);
            ws.length || (line.widgets = null);
            var height = widgetHeight(this);
            updateLineHeight(line, Math.max(0, line.height - height)), cm && runInOp(cm, function() {
                adjustScrollWhenAboveVisible(cm, line, -height), regLineChange(cm, no, "widget");
            });
        }
    }, LineWidget.prototype.changed = function() {
        var oldH = this.height, cm = this.doc.cm, line = this.line;
        this.height = null;
        var diff = widgetHeight(this) - oldH;
        diff && (updateLineHeight(line, line.height + diff), cm && runInOp(cm, function() {
            cm.curOp.forceUpdate = !0, adjustScrollWhenAboveVisible(cm, line, diff);
        }));
    };
    var Line = CodeMirror.Line = function(text, markedSpans, estimateHeight) {
        this.text = text, attachMarkedSpans(this, markedSpans), this.height = estimateHeight ? estimateHeight(this) : 1;
    };
    eventMixin(Line), Line.prototype.lineNo = function() {
        return lineNo(this);
    };
    var styleToClassCache = {}, styleToClassCacheWithMode = {};
    LeafChunk.prototype = {
        chunkSize: function() {
            return this.lines.length;
        },
        removeInner: function(at, n) {
            for (var i = at, e = at + n; i < e; ++i) {
                var line = this.lines[i];
                this.height -= line.height, cleanUpLine(line), signalLater(line, "delete");
            }
            this.lines.splice(at, n);
        },
        collapse: function(lines) {
            lines.push.apply(lines, this.lines);
        },
        insertInner: function(at, lines, height) {
            this.height += height, this.lines = this.lines.slice(0, at).concat(lines).concat(this.lines.slice(at));
            for (var i = 0; i < lines.length; ++i) lines[i].parent = this;
        },
        iterN: function(at, n, op) {
            for (var e = at + n; at < e; ++at) if (op(this.lines[at])) return !0;
        }
    }, BranchChunk.prototype = {
        chunkSize: function() {
            return this.size;
        },
        removeInner: function(at, n) {
            this.size -= n;
            for (var i = 0; i < this.children.length; ++i) {
                var child = this.children[i], sz = child.chunkSize();
                if (at < sz) {
                    var rm = Math.min(n, sz - at), oldHeight = child.height;
                    if (child.removeInner(at, rm), this.height -= oldHeight - child.height, sz == rm && (this.children.splice(i--, 1), 
                    child.parent = null), 0 == (n -= rm)) break;
                    at = 0;
                } else at -= sz;
            }
            if (this.size - n < 25 && (this.children.length > 1 || !(this.children[0] instanceof LeafChunk))) {
                var lines = [];
                this.collapse(lines), this.children = [ new LeafChunk(lines) ], this.children[0].parent = this;
            }
        },
        collapse: function(lines) {
            for (var i = 0; i < this.children.length; ++i) this.children[i].collapse(lines);
        },
        insertInner: function(at, lines, height) {
            this.size += lines.length, this.height += height;
            for (var i = 0; i < this.children.length; ++i) {
                var child = this.children[i], sz = child.chunkSize();
                if (at <= sz) {
                    if (child.insertInner(at, lines, height), child.lines && child.lines.length > 50) {
                        for (var remaining = child.lines.length % 25 + 25, pos = remaining; pos < child.lines.length; ) {
                            var leaf = new LeafChunk(child.lines.slice(pos, pos += 25));
                            child.height -= leaf.height, this.children.splice(++i, 0, leaf), leaf.parent = this;
                        }
                        child.lines = child.lines.slice(0, remaining), this.maybeSpill();
                    }
                    break;
                }
                at -= sz;
            }
        },
        maybeSpill: function() {
            if (!(this.children.length <= 10)) {
                var me = this;
                do {
                    var sibling = new BranchChunk(me.children.splice(me.children.length - 5, 5));
                    if (me.parent) {
                        me.size -= sibling.size, me.height -= sibling.height;
                        var myIndex = indexOf(me.parent.children, me);
                        me.parent.children.splice(myIndex + 1, 0, sibling);
                    } else {
                        var copy = new BranchChunk(me.children);
                        copy.parent = me, me.children = [ copy, sibling ], me = copy;
                    }
                    sibling.parent = me.parent;
                } while (me.children.length > 10);
                me.parent.maybeSpill();
            }
        },
        iterN: function(at, n, op) {
            for (var i = 0; i < this.children.length; ++i) {
                var child = this.children[i], sz = child.chunkSize();
                if (at < sz) {
                    var used = Math.min(n, sz - at);
                    if (child.iterN(at, used, op)) return !0;
                    if (0 == (n -= used)) break;
                    at = 0;
                } else at -= sz;
            }
        }
    };
    var nextDocId = 0, Doc = CodeMirror.Doc = function(text, mode, firstLine, lineSep) {
        if (!(this instanceof Doc)) return new Doc(text, mode, firstLine, lineSep);
        null == firstLine && (firstLine = 0), BranchChunk.call(this, [ new LeafChunk([ new Line("", null) ]) ]), 
        this.first = firstLine, this.scrollTop = this.scrollLeft = 0, this.cantEdit = !1, 
        this.cleanGeneration = 1, this.frontier = firstLine;
        var start = Pos(firstLine, 0);
        this.sel = simpleSelection(start), this.history = new History(null), this.id = ++nextDocId, 
        this.modeOption = mode, this.lineSep = lineSep, this.extend = !1, "string" == typeof text && (text = this.splitLines(text)), 
        updateDoc(this, {
            from: start,
            to: start,
            text: text
        }), setSelection(this, simpleSelection(start), sel_dontScroll);
    };
    Doc.prototype = createObj(BranchChunk.prototype, {
        constructor: Doc,
        iter: function(from, to, op) {
            op ? this.iterN(from - this.first, to - from, op) : this.iterN(this.first, this.first + this.size, from);
        },
        insert: function(at, lines) {
            for (var height = 0, i = 0; i < lines.length; ++i) height += lines[i].height;
            this.insertInner(at - this.first, lines, height);
        },
        remove: function(at, n) {
            this.removeInner(at - this.first, n);
        },
        getValue: function(lineSep) {
            var lines = getLines(this, this.first, this.first + this.size);
            return !1 === lineSep ? lines : lines.join(lineSep || this.lineSeparator());
        },
        setValue: docMethodOp(function(code) {
            var top = Pos(this.first, 0), last = this.first + this.size - 1;
            makeChange(this, {
                from: top,
                to: Pos(last, getLine(this, last).text.length),
                text: this.splitLines(code),
                origin: "setValue",
                full: !0
            }, !0), setSelection(this, simpleSelection(top));
        }),
        replaceRange: function(code, from, to, origin) {
            replaceRange(this, code, from = clipPos(this, from), to = to ? clipPos(this, to) : from, origin);
        },
        getRange: function(from, to, lineSep) {
            var lines = getBetween(this, clipPos(this, from), clipPos(this, to));
            return !1 === lineSep ? lines : lines.join(lineSep || this.lineSeparator());
        },
        getLine: function(line) {
            var l = this.getLineHandle(line);
            return l && l.text;
        },
        getLineHandle: function(line) {
            if (isLine(this, line)) return getLine(this, line);
        },
        getLineNumber: function(line) {
            return lineNo(line);
        },
        getLineHandleVisualStart: function(line) {
            return "number" == typeof line && (line = getLine(this, line)), visualLine(line);
        },
        lineCount: function() {
            return this.size;
        },
        firstLine: function() {
            return this.first;
        },
        lastLine: function() {
            return this.first + this.size - 1;
        },
        clipPos: function(pos) {
            return clipPos(this, pos);
        },
        getCursor: function(start) {
            var range = this.sel.primary();
            return null == start || "head" == start ? range.head : "anchor" == start ? range.anchor : "end" == start || "to" == start || !1 === start ? range.to() : range.from();
        },
        listSelections: function() {
            return this.sel.ranges;
        },
        somethingSelected: function() {
            return this.sel.somethingSelected();
        },
        setCursor: docMethodOp(function(line, ch, options) {
            setSimpleSelection(this, clipPos(this, "number" == typeof line ? Pos(line, ch || 0) : line), null, options);
        }),
        setSelection: docMethodOp(function(anchor, head, options) {
            setSimpleSelection(this, clipPos(this, anchor), clipPos(this, head || anchor), options);
        }),
        extendSelection: docMethodOp(function(head, other, options) {
            extendSelection(this, clipPos(this, head), other && clipPos(this, other), options);
        }),
        extendSelections: docMethodOp(function(heads, options) {
            extendSelections(this, clipPosArray(this, heads), options);
        }),
        extendSelectionsBy: docMethodOp(function(f, options) {
            extendSelections(this, clipPosArray(this, map(this.sel.ranges, f)), options);
        }),
        setSelections: docMethodOp(function(ranges, primary, options) {
            if (ranges.length) {
                for (var i = 0, out = []; i < ranges.length; i++) out[i] = new Range(clipPos(this, ranges[i].anchor), clipPos(this, ranges[i].head));
                null == primary && (primary = Math.min(ranges.length - 1, this.sel.primIndex)), 
                setSelection(this, normalizeSelection(out, primary), options);
            }
        }),
        addSelection: docMethodOp(function(anchor, head, options) {
            var ranges = this.sel.ranges.slice(0);
            ranges.push(new Range(clipPos(this, anchor), clipPos(this, head || anchor))), setSelection(this, normalizeSelection(ranges, ranges.length - 1), options);
        }),
        getSelection: function(lineSep) {
            for (var lines, ranges = this.sel.ranges, i = 0; i < ranges.length; i++) {
                var sel = getBetween(this, ranges[i].from(), ranges[i].to());
                lines = lines ? lines.concat(sel) : sel;
            }
            return !1 === lineSep ? lines : lines.join(lineSep || this.lineSeparator());
        },
        getSelections: function(lineSep) {
            for (var parts = [], ranges = this.sel.ranges, i = 0; i < ranges.length; i++) {
                var sel = getBetween(this, ranges[i].from(), ranges[i].to());
                !1 !== lineSep && (sel = sel.join(lineSep || this.lineSeparator())), parts[i] = sel;
            }
            return parts;
        },
        replaceSelection: function(code, collapse, origin) {
            for (var dup = [], i = 0; i < this.sel.ranges.length; i++) dup[i] = code;
            this.replaceSelections(dup, collapse, origin || "+input");
        },
        replaceSelections: docMethodOp(function(code, collapse, origin) {
            for (var changes = [], sel = this.sel, i = 0; i < sel.ranges.length; i++) {
                var range = sel.ranges[i];
                changes[i] = {
                    from: range.from(),
                    to: range.to(),
                    text: this.splitLines(code[i]),
                    origin: origin
                };
            }
            for (var newSel = collapse && "end" != collapse && computeReplacedSel(this, changes, collapse), i = changes.length - 1; i >= 0; i--) makeChange(this, changes[i]);
            newSel ? setSelectionReplaceHistory(this, newSel) : this.cm && ensureCursorVisible(this.cm);
        }),
        undo: docMethodOp(function() {
            makeChangeFromHistory(this, "undo");
        }),
        redo: docMethodOp(function() {
            makeChangeFromHistory(this, "redo");
        }),
        undoSelection: docMethodOp(function() {
            makeChangeFromHistory(this, "undo", !0);
        }),
        redoSelection: docMethodOp(function() {
            makeChangeFromHistory(this, "redo", !0);
        }),
        setExtending: function(val) {
            this.extend = val;
        },
        getExtending: function() {
            return this.extend;
        },
        historySize: function() {
            for (var hist = this.history, done = 0, undone = 0, i = 0; i < hist.done.length; i++) hist.done[i].ranges || ++done;
            for (i = 0; i < hist.undone.length; i++) hist.undone[i].ranges || ++undone;
            return {
                undo: done,
                redo: undone
            };
        },
        clearHistory: function() {
            this.history = new History(this.history.maxGeneration);
        },
        markClean: function() {
            this.cleanGeneration = this.changeGeneration(!0);
        },
        changeGeneration: function(forceSplit) {
            return forceSplit && (this.history.lastOp = this.history.lastSelOp = this.history.lastOrigin = null), 
            this.history.generation;
        },
        isClean: function(gen) {
            return this.history.generation == (gen || this.cleanGeneration);
        },
        getHistory: function() {
            return {
                done: copyHistoryArray(this.history.done),
                undone: copyHistoryArray(this.history.undone)
            };
        },
        setHistory: function(histData) {
            var hist = this.history = new History(this.history.maxGeneration);
            hist.done = copyHistoryArray(histData.done.slice(0), null, !0), hist.undone = copyHistoryArray(histData.undone.slice(0), null, !0);
        },
        addLineClass: docMethodOp(function(handle, where, cls) {
            return changeLine(this, handle, "gutter" == where ? "gutter" : "class", function(line) {
                var prop = "text" == where ? "textClass" : "background" == where ? "bgClass" : "gutter" == where ? "gutterClass" : "wrapClass";
                if (line[prop]) {
                    if (classTest(cls).test(line[prop])) return !1;
                    line[prop] += " " + cls;
                } else line[prop] = cls;
                return !0;
            });
        }),
        removeLineClass: docMethodOp(function(handle, where, cls) {
            return changeLine(this, handle, "gutter" == where ? "gutter" : "class", function(line) {
                var prop = "text" == where ? "textClass" : "background" == where ? "bgClass" : "gutter" == where ? "gutterClass" : "wrapClass", cur = line[prop];
                if (!cur) return !1;
                if (null == cls) line[prop] = null; else {
                    var found = cur.match(classTest(cls));
                    if (!found) return !1;
                    var end = found.index + found[0].length;
                    line[prop] = cur.slice(0, found.index) + (found.index && end != cur.length ? " " : "") + cur.slice(end) || null;
                }
                return !0;
            });
        }),
        addLineWidget: docMethodOp(function(handle, node, options) {
            return addLineWidget(this, handle, node, options);
        }),
        removeLineWidget: function(widget) {
            widget.clear();
        },
        markText: function(from, to, options) {
            return markText(this, clipPos(this, from), clipPos(this, to), options, options && options.type || "range");
        },
        setBookmark: function(pos, options) {
            var realOpts = {
                replacedWith: options && (null == options.nodeType ? options.widget : options),
                insertLeft: options && options.insertLeft,
                clearWhenEmpty: !1,
                shared: options && options.shared,
                handleMouseEvents: options && options.handleMouseEvents
            };
            return pos = clipPos(this, pos), markText(this, pos, pos, realOpts, "bookmark");
        },
        findMarksAt: function(pos) {
            var markers = [], spans = getLine(this, (pos = clipPos(this, pos)).line).markedSpans;
            if (spans) for (var i = 0; i < spans.length; ++i) {
                var span = spans[i];
                (null == span.from || span.from <= pos.ch) && (null == span.to || span.to >= pos.ch) && markers.push(span.marker.parent || span.marker);
            }
            return markers;
        },
        findMarks: function(from, to, filter) {
            from = clipPos(this, from), to = clipPos(this, to);
            var found = [], lineNo = from.line;
            return this.iter(from.line, to.line + 1, function(line) {
                var spans = line.markedSpans;
                if (spans) for (var i = 0; i < spans.length; i++) {
                    var span = spans[i];
                    null != span.to && lineNo == from.line && from.ch >= span.to || null == span.from && lineNo != from.line || null != span.from && lineNo == to.line && span.from >= to.ch || filter && !filter(span.marker) || found.push(span.marker.parent || span.marker);
                }
                ++lineNo;
            }), found;
        },
        getAllMarks: function() {
            var markers = [];
            return this.iter(function(line) {
                var sps = line.markedSpans;
                if (sps) for (var i = 0; i < sps.length; ++i) null != sps[i].from && markers.push(sps[i].marker);
            }), markers;
        },
        posFromIndex: function(off) {
            var ch, lineNo = this.first, sepSize = this.lineSeparator().length;
            return this.iter(function(line) {
                var sz = line.text.length + sepSize;
                if (sz > off) return ch = off, !0;
                off -= sz, ++lineNo;
            }), clipPos(this, Pos(lineNo, ch));
        },
        indexFromPos: function(coords) {
            var index = (coords = clipPos(this, coords)).ch;
            if (coords.line < this.first || coords.ch < 0) return 0;
            var sepSize = this.lineSeparator().length;
            return this.iter(this.first, coords.line, function(line) {
                index += line.text.length + sepSize;
            }), index;
        },
        copy: function(copyHistory) {
            var doc = new Doc(getLines(this, this.first, this.first + this.size), this.modeOption, this.first, this.lineSep);
            return doc.scrollTop = this.scrollTop, doc.scrollLeft = this.scrollLeft, doc.sel = this.sel, 
            doc.extend = !1, copyHistory && (doc.history.undoDepth = this.history.undoDepth, 
            doc.setHistory(this.getHistory())), doc;
        },
        linkedDoc: function(options) {
            options || (options = {});
            var from = this.first, to = this.first + this.size;
            null != options.from && options.from > from && (from = options.from), null != options.to && options.to < to && (to = options.to);
            var copy = new Doc(getLines(this, from, to), options.mode || this.modeOption, from, this.lineSep);
            return options.sharedHist && (copy.history = this.history), (this.linked || (this.linked = [])).push({
                doc: copy,
                sharedHist: options.sharedHist
            }), copy.linked = [ {
                doc: this,
                isParent: !0,
                sharedHist: options.sharedHist
            } ], copySharedMarkers(copy, findSharedMarkers(this)), copy;
        },
        unlinkDoc: function(other) {
            if (other instanceof CodeMirror && (other = other.doc), this.linked) for (var i = 0; i < this.linked.length; ++i) if (this.linked[i].doc == other) {
                this.linked.splice(i, 1), other.unlinkDoc(this), detachSharedMarkers(findSharedMarkers(this));
                break;
            }
            if (other.history == this.history) {
                var splitIds = [ other.id ];
                linkedDocs(other, function(doc) {
                    splitIds.push(doc.id);
                }, !0), other.history = new History(null), other.history.done = copyHistoryArray(this.history.done, splitIds), 
                other.history.undone = copyHistoryArray(this.history.undone, splitIds);
            }
        },
        iterLinkedDocs: function(f) {
            linkedDocs(this, f);
        },
        getMode: function() {
            return this.mode;
        },
        getEditor: function() {
            return this.cm;
        },
        splitLines: function(str) {
            return this.lineSep ? str.split(this.lineSep) : splitLinesAuto(str);
        },
        lineSeparator: function() {
            return this.lineSep || "\n";
        }
    }), Doc.prototype.eachLine = Doc.prototype.iter;
    var dontDelegate = "iter insert remove copy getEditor constructor".split(" ");
    for (var prop in Doc.prototype) Doc.prototype.hasOwnProperty(prop) && indexOf(dontDelegate, prop) < 0 && (CodeMirror.prototype[prop] = function(method) {
        return function() {
            return method.apply(this.doc, arguments);
        };
    }(Doc.prototype[prop]));
    eventMixin(Doc);
    var e_preventDefault = CodeMirror.e_preventDefault = function(e) {
        e.preventDefault ? e.preventDefault() : e.returnValue = !1;
    }, e_stopPropagation = CodeMirror.e_stopPropagation = function(e) {
        e.stopPropagation ? e.stopPropagation() : e.cancelBubble = !0;
    }, e_stop = CodeMirror.e_stop = function(e) {
        e_preventDefault(e), e_stopPropagation(e);
    }, on = CodeMirror.on = function(emitter, type, f) {
        if (emitter.addEventListener) emitter.addEventListener(type, f, !1); else if (emitter.attachEvent) emitter.attachEvent("on" + type, f); else {
            var map = emitter._handlers || (emitter._handlers = {});
            (map[type] || (map[type] = [])).push(f);
        }
    }, noHandlers = [], off = CodeMirror.off = function(emitter, type, f) {
        if (emitter.removeEventListener) emitter.removeEventListener(type, f, !1); else if (emitter.detachEvent) emitter.detachEvent("on" + type, f); else for (var handlers = getHandlers(emitter, type, !1), i = 0; i < handlers.length; ++i) if (handlers[i] == f) {
            handlers.splice(i, 1);
            break;
        }
    }, signal = CodeMirror.signal = function(emitter, type) {
        var handlers = getHandlers(emitter, type, !0);
        if (handlers.length) for (var args = Array.prototype.slice.call(arguments, 2), i = 0; i < handlers.length; ++i) handlers[i].apply(null, args);
    }, orphanDelayedCallbacks = null, scrollerGap = 30, Pass = CodeMirror.Pass = {
        toString: function() {
            return "CodeMirror.Pass";
        }
    }, sel_dontScroll = {
        scroll: !1
    }, sel_mouse = {
        origin: "*mouse"
    }, sel_move = {
        origin: "+move"
    };
    Delayed.prototype.set = function(ms, f) {
        clearTimeout(this.id), this.id = setTimeout(f, ms);
    };
    var countColumn = CodeMirror.countColumn = function(string, end, tabSize, startIndex, startValue) {
        null == end && -1 == (end = string.search(/[^\s\u00a0]/)) && (end = string.length);
        for (var i = startIndex || 0, n = startValue || 0; ;) {
            var nextTab = string.indexOf("\t", i);
            if (nextTab < 0 || nextTab >= end) return n + (end - i);
            n += nextTab - i, n += tabSize - n % tabSize, i = nextTab + 1;
        }
    }, findColumn = CodeMirror.findColumn = function(string, goal, tabSize) {
        for (var pos = 0, col = 0; ;) {
            var nextTab = string.indexOf("\t", pos);
            -1 == nextTab && (nextTab = string.length);
            var skipped = nextTab - pos;
            if (nextTab == string.length || col + skipped >= goal) return pos + Math.min(skipped, goal - col);
            if (col += nextTab - pos, col += tabSize - col % tabSize, pos = nextTab + 1, col >= goal) return pos;
        }
    }, spaceStrs = [ "" ], selectInput = function(node) {
        node.select();
    };
    ios ? selectInput = function(node) {
        node.selectionStart = 0, node.selectionEnd = node.value.length;
    } : ie && (selectInput = function(node) {
        try {
            node.select();
        } catch (_e) {}
    });
    var range, nonASCIISingleCaseWordChar = /[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/, isWordCharBasic = CodeMirror.isWordChar = function(ch) {
        return /\w/.test(ch) || ch > "\x80" && (ch.toUpperCase() != ch.toLowerCase() || nonASCIISingleCaseWordChar.test(ch));
    }, extendingChars = /[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;
    range = document.createRange ? function(node, start, end, endNode) {
        var r = document.createRange();
        return r.setEnd(endNode || node, end), r.setStart(node, start), r;
    } : function(node, start, end) {
        var r = document.body.createTextRange();
        try {
            r.moveToElementText(node.parentNode);
        } catch (e) {
            return r;
        }
        return r.collapse(!0), r.moveEnd("character", end), r.moveStart("character", start), 
        r;
    };
    var contains = CodeMirror.contains = function(parent, child) {
        if (3 == child.nodeType && (child = child.parentNode), parent.contains) return parent.contains(child);
        do {
            if (11 == child.nodeType && (child = child.host), child == parent) return !0;
        } while (child = child.parentNode);
    };
    ie && ie_version < 11 && (activeElt = function() {
        try {
            return document.activeElement;
        } catch (e) {
            return document.body;
        }
    });
    var zwspSupported, badBidiRects, rmClass = CodeMirror.rmClass = function(node, cls) {
        var current = node.className, match = classTest(cls).exec(current);
        if (match) {
            var after = current.slice(match.index + match[0].length);
            node.className = current.slice(0, match.index) + (after ? match[1] + after : "");
        }
    }, addClass = CodeMirror.addClass = function(node, cls) {
        var current = node.className;
        classTest(cls).test(current) || (node.className += (current ? " " : "") + cls);
    }, globalsRegistered = !1, dragAndDrop = function() {
        if (ie && ie_version < 9) return !1;
        var div = elt("div");
        return "draggable" in div || "dragDrop" in div;
    }(), splitLinesAuto = CodeMirror.splitLines = 3 != "\n\nb".split(/\n/).length ? function(string) {
        for (var pos = 0, result = [], l = string.length; pos <= l; ) {
            var nl = string.indexOf("\n", pos);
            -1 == nl && (nl = string.length);
            var line = string.slice(pos, "\r" == string.charAt(nl - 1) ? nl - 1 : nl), rt = line.indexOf("\r");
            -1 != rt ? (result.push(line.slice(0, rt)), pos += rt + 1) : (result.push(line), 
            pos = nl + 1);
        }
        return result;
    } : function(string) {
        return string.split(/\r\n?|\n/);
    }, hasSelection = window.getSelection ? function(te) {
        try {
            return te.selectionStart != te.selectionEnd;
        } catch (e) {
            return !1;
        }
    } : function(te) {
        try {
            var range = te.ownerDocument.selection.createRange();
        } catch (e) {}
        return !(!range || range.parentElement() != te) && 0 != range.compareEndPoints("StartToEnd", range);
    }, hasCopyEvent = function() {
        var e = elt("div");
        return "oncopy" in e || (e.setAttribute("oncopy", "return;"), "function" == typeof e.oncopy);
    }(), badZoomedRects = null, keyNames = CodeMirror.keyNames = {
        3: "Enter",
        8: "Backspace",
        9: "Tab",
        13: "Enter",
        16: "Shift",
        17: "Ctrl",
        18: "Alt",
        19: "Pause",
        20: "CapsLock",
        27: "Esc",
        32: "Space",
        33: "PageUp",
        34: "PageDown",
        35: "End",
        36: "Home",
        37: "Left",
        38: "Up",
        39: "Right",
        40: "Down",
        44: "PrintScrn",
        45: "Insert",
        46: "Delete",
        59: ";",
        61: "=",
        91: "Mod",
        92: "Mod",
        93: "Mod",
        106: "*",
        107: "=",
        109: "-",
        110: ".",
        111: "/",
        127: "Delete",
        173: "-",
        186: ";",
        187: "=",
        188: ",",
        189: "-",
        190: ".",
        191: "/",
        192: "`",
        219: "[",
        220: "\\",
        221: "]",
        222: "'",
        63232: "Up",
        63233: "Down",
        63234: "Left",
        63235: "Right",
        63272: "Delete",
        63273: "Home",
        63275: "End",
        63276: "PageUp",
        63277: "PageDown",
        63302: "Insert"
    };
    !function() {
        for (i = 0; i < 10; i++) keyNames[i + 48] = keyNames[i + 96] = String(i);
        for (i = 65; i <= 90; i++) keyNames[i] = String.fromCharCode(i);
        for (var i = 1; i <= 12; i++) keyNames[i + 111] = keyNames[i + 63235] = "F" + i;
    }();
    var bidiOther, bidiOrdering = function() {
        function charType(code) {
            return code <= 247 ? lowTypes.charAt(code) : 1424 <= code && code <= 1524 ? "R" : 1536 <= code && code <= 1773 ? arabicTypes.charAt(code - 1536) : 1774 <= code && code <= 2220 ? "r" : 8192 <= code && code <= 8203 ? "w" : 8204 == code ? "b" : "L";
        }
        function BidiSpan(level, from, to) {
            this.level = level, this.from = from, this.to = to;
        }
        var lowTypes = "bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN", arabicTypes = "rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm", bidiRE = /[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/, isNeutral = /[stwN]/, isStrong = /[LRr]/, countsAsLeft = /[Lb1n]/, countsAsNum = /[1n]/;
        return function(str) {
            if (!bidiRE.test(str)) return !1;
            for (var len = str.length, types = [], i = 0; i < len; ++i) types.push(type = charType(str.charCodeAt(i)));
            for (var i = 0, prev = "L"; i < len; ++i) "m" == (type = types[i]) ? types[i] = prev : prev = type;
            for (var i = 0, cur = "L"; i < len; ++i) "1" == (type = types[i]) && "r" == cur ? types[i] = "n" : isStrong.test(type) && (cur = type, 
            "r" == type && (types[i] = "R"));
            for (var i = 1, prev = types[0]; i < len - 1; ++i) "+" == (type = types[i]) && "1" == prev && "1" == types[i + 1] ? types[i] = "1" : "," != type || prev != types[i + 1] || "1" != prev && "n" != prev || (types[i] = prev), 
            prev = type;
            for (i = 0; i < len; ++i) if ("," == (type = types[i])) types[i] = "N"; else if ("%" == type) {
                for (end = i + 1; end < len && "%" == types[end]; ++end) ;
                for (var replace = i && "!" == types[i - 1] || end < len && "1" == types[end] ? "1" : "N", j = i; j < end; ++j) types[j] = replace;
                i = end - 1;
            }
            for (var i = 0, cur = "L"; i < len; ++i) {
                var type = types[i];
                "L" == cur && "1" == type ? types[i] = "L" : isStrong.test(type) && (cur = type);
            }
            for (i = 0; i < len; ++i) if (isNeutral.test(types[i])) {
                for (var end = i + 1; end < len && isNeutral.test(types[end]); ++end) ;
                for (var before = "L" == (i ? types[i - 1] : "L"), after = "L" == (end < len ? types[end] : "L"), replace = before || after ? "L" : "R", j = i; j < end; ++j) types[j] = replace;
                i = end - 1;
            }
            for (var m, order = [], i = 0; i < len; ) if (countsAsLeft.test(types[i])) {
                var start = i;
                for (++i; i < len && countsAsLeft.test(types[i]); ++i) ;
                order.push(new BidiSpan(0, start, i));
            } else {
                var pos = i, at = order.length;
                for (++i; i < len && "L" != types[i]; ++i) ;
                for (j = pos; j < i; ) if (countsAsNum.test(types[j])) {
                    pos < j && order.splice(at, 0, new BidiSpan(1, pos, j));
                    var nstart = j;
                    for (++j; j < i && countsAsNum.test(types[j]); ++j) ;
                    order.splice(at, 0, new BidiSpan(2, nstart, j)), pos = j;
                } else ++j;
                pos < i && order.splice(at, 0, new BidiSpan(1, pos, i));
            }
            return 1 == order[0].level && (m = str.match(/^\s+/)) && (order[0].from = m[0].length, 
            order.unshift(new BidiSpan(0, 0, m[0].length))), 1 == lst(order).level && (m = str.match(/\s+$/)) && (lst(order).to -= m[0].length, 
            order.push(new BidiSpan(0, len - m[0].length, len))), 2 == order[0].level && order.unshift(new BidiSpan(1, order[0].to, order[0].to)), 
            order[0].level != lst(order).level && order.push(new BidiSpan(order[0].level, len, len)), 
            order;
        };
    }();
    return CodeMirror.version = "5.16.0", CodeMirror;
}), function(mod) {
    "object" == typeof exports && "object" == typeof module ? mod(require("../../lib/codemirror")) : "function" == typeof define && define.amd ? define([ "../../lib/codemirror" ], mod) : mod(CodeMirror);
}(function(CodeMirror) {
    "use strict";
    CodeMirror.runMode = function(string, modespec, callback, options) {
        var mode = CodeMirror.getMode(CodeMirror.defaults, modespec), ie_lt9 = /MSIE \d/.test(navigator.userAgent) && (null == document.documentMode || document.documentMode < 9);
        if (callback.appendChild) {
            var tabSize = options && options.tabSize || CodeMirror.defaults.tabSize, node = callback, col = 0;
            node.innerHTML = "", callback = function(text, style) {
                if ("\n" == text) return node.appendChild(document.createTextNode(ie_lt9 ? "\r" : text)), 
                void (col = 0);
                for (var content = "", pos = 0; ;) {
                    var idx = text.indexOf("\t", pos);
                    if (-1 == idx) {
                        content += text.slice(pos), col += text.length - pos;
                        break;
                    }
                    col += idx - pos, content += text.slice(pos, idx);
                    var size = tabSize - col % tabSize;
                    col += size;
                    for (var i = 0; i < size; ++i) content += " ";
                    pos = idx + 1;
                }
                if (style) {
                    var sp = node.appendChild(document.createElement("span"));
                    sp.className = "cm-" + style.replace(/ +/g, " cm-"), sp.appendChild(document.createTextNode(content));
                } else node.appendChild(document.createTextNode(content));
            };
        }
        for (var lines = CodeMirror.splitLines(string), state = options && options.state || CodeMirror.startState(mode), i = 0, e = lines.length; i < e; ++i) {
            i && callback("\n");
            var stream = new CodeMirror.StringStream(lines[i]);
            for (!stream.string && mode.blankLine && mode.blankLine(state); !stream.eol(); ) {
                var style = mode.token(stream, state);
                callback(stream.current(), style, i, stream.start, state), stream.start = stream.pos;
            }
        }
    };
}), function(mod) {
    "object" == typeof exports && "object" == typeof module ? mod(require("../../lib/codemirror"), require("../fold/xml-fold")) : "function" == typeof define && define.amd ? define([ "../../lib/codemirror", "../fold/xml-fold" ], mod) : mod(CodeMirror);
}(function(CodeMirror) {
    function autoCloseGT(cm) {
        if (cm.getOption("disableInput")) return CodeMirror.Pass;
        for (var ranges = cm.listSelections(), replacements = [], i = 0; i < ranges.length; i++) {
            if (!ranges[i].empty()) return CodeMirror.Pass;
            var pos = ranges[i].head, tok = cm.getTokenAt(pos), inner = CodeMirror.innerMode(cm.getMode(), tok.state), state = inner.state;
            if ("xml" != inner.mode.name || !state.tagName) return CodeMirror.Pass;
            var opt = cm.getOption("autoCloseTags"), html = "html" == inner.mode.configuration, dontCloseTags = "object" == typeof opt && opt.dontCloseTags || html && htmlDontClose, indentTags = "object" == typeof opt && opt.indentTags || html && htmlIndent, tagName = state.tagName;
            tok.end > pos.ch && (tagName = tagName.slice(0, tagName.length - tok.end + pos.ch));
            var lowerTagName = tagName.toLowerCase();
            if (!tagName || "string" == tok.type && (tok.end != pos.ch || !/[\"\']/.test(tok.string.charAt(tok.string.length - 1)) || 1 == tok.string.length) || "tag" == tok.type && "closeTag" == state.type || tok.string.indexOf("/") == tok.string.length - 1 || dontCloseTags && indexOf(dontCloseTags, lowerTagName) > -1 || closingTagExists(cm, tagName, pos, state, !0)) return CodeMirror.Pass;
            var indent = indentTags && indexOf(indentTags, lowerTagName) > -1;
            replacements[i] = {
                indent: indent,
                text: ">" + (indent ? "\n\n" : "") + "</" + tagName + ">",
                newPos: indent ? CodeMirror.Pos(pos.line + 1, 0) : CodeMirror.Pos(pos.line, pos.ch + 1)
            };
        }
        for (i = ranges.length - 1; i >= 0; i--) {
            var info = replacements[i];
            cm.replaceRange(info.text, ranges[i].head, ranges[i].anchor, "+insert");
            var sel = cm.listSelections().slice(0);
            sel[i] = {
                head: info.newPos,
                anchor: info.newPos
            }, cm.setSelections(sel), info.indent && (cm.indentLine(info.newPos.line, null, !0), 
            cm.indentLine(info.newPos.line + 1, null, !0));
        }
    }
    function autoCloseCurrent(cm, typingSlash) {
        for (var ranges = cm.listSelections(), replacements = [], head = typingSlash ? "/" : "</", i = 0; i < ranges.length; i++) {
            if (!ranges[i].empty()) return CodeMirror.Pass;
            var pos = ranges[i].head, tok = cm.getTokenAt(pos), inner = CodeMirror.innerMode(cm.getMode(), tok.state), state = inner.state;
            if (typingSlash && ("string" == tok.type || "<" != tok.string.charAt(0) || tok.start != pos.ch - 1)) return CodeMirror.Pass;
            var replacement;
            if ("xml" != inner.mode.name) if ("htmlmixed" == cm.getMode().name && "javascript" == inner.mode.name) replacement = head + "script"; else {
                if ("htmlmixed" != cm.getMode().name || "css" != inner.mode.name) return CodeMirror.Pass;
                replacement = head + "style";
            } else {
                if (!state.context || !state.context.tagName || closingTagExists(cm, state.context.tagName, pos, state)) return CodeMirror.Pass;
                replacement = head + state.context.tagName;
            }
            ">" != cm.getLine(pos.line).charAt(tok.end) && (replacement += ">"), replacements[i] = replacement;
        }
        cm.replaceSelections(replacements), ranges = cm.listSelections();
        for (i = 0; i < ranges.length; i++) (i == ranges.length - 1 || ranges[i].head.line < ranges[i + 1].head.line) && cm.indentLine(ranges[i].head.line);
    }
    function autoCloseSlash(cm) {
        return cm.getOption("disableInput") ? CodeMirror.Pass : autoCloseCurrent(cm, !0);
    }
    function indexOf(collection, elt) {
        if (collection.indexOf) return collection.indexOf(elt);
        for (var i = 0, e = collection.length; i < e; ++i) if (collection[i] == elt) return i;
        return -1;
    }
    function closingTagExists(cm, tagName, pos, state, newTag) {
        if (!CodeMirror.scanForClosingTag) return !1;
        var end = Math.min(cm.lastLine() + 1, pos.line + 500), nextClose = CodeMirror.scanForClosingTag(cm, pos, null, end);
        if (!nextClose || nextClose.tag != tagName) return !1;
        for (var cx = state.context, onCx = newTag ? 1 : 0; cx && cx.tagName == tagName; cx = cx.prev) ++onCx;
        pos = nextClose.to;
        for (var i = 1; i < onCx; i++) {
            var next = CodeMirror.scanForClosingTag(cm, pos, null, end);
            if (!next || next.tag != tagName) return !1;
            pos = next.to;
        }
        return !0;
    }
    CodeMirror.defineOption("autoCloseTags", !1, function(cm, val, old) {
        if (old != CodeMirror.Init && old && cm.removeKeyMap("autoCloseTags"), val) {
            var map = {
                name: "autoCloseTags"
            };
            ("object" != typeof val || val.whenClosing) && (map["'/'"] = function(cm) {
                return autoCloseSlash(cm);
            }), ("object" != typeof val || val.whenOpening) && (map["'>'"] = function(cm) {
                return autoCloseGT(cm);
            }), cm.addKeyMap(map);
        }
    });
    var htmlDontClose = [ "area", "base", "br", "col", "command", "embed", "hr", "img", "input", "keygen", "link", "meta", "param", "source", "track", "wbr" ], htmlIndent = [ "applet", "blockquote", "body", "button", "div", "dl", "fieldset", "form", "frameset", "h1", "h2", "h3", "h4", "h5", "h6", "head", "html", "iframe", "layer", "legend", "object", "ol", "p", "select", "table", "ul" ];
    CodeMirror.commands.closeTag = function(cm) {
        return autoCloseCurrent(cm);
    };
}), function(mod) {
    "object" == typeof exports && "object" == typeof module ? mod(require("../../lib/codemirror")) : "function" == typeof define && define.amd ? define([ "../../lib/codemirror" ], mod) : mod(CodeMirror);
}(function(CodeMirror) {
    function dialogDiv(cm, template, bottom) {
        var dialog;
        return dialog = cm.getWrapperElement().appendChild(document.createElement("div")), 
        dialog.className = bottom ? "CodeMirror-dialog CodeMirror-dialog-bottom" : "CodeMirror-dialog CodeMirror-dialog-top", 
        "string" == typeof template ? dialog.innerHTML = template : dialog.appendChild(template), 
        dialog;
    }
    function closeNotification(cm, newVal) {
        cm.state.currentNotificationClose && cm.state.currentNotificationClose(), cm.state.currentNotificationClose = newVal;
    }
    CodeMirror.defineExtension("openDialog", function(template, callback, options) {
        function close(newVal) {
            if ("string" == typeof newVal) inp.value = newVal; else {
                if (closed) return;
                closed = !0, dialog.parentNode.removeChild(dialog), me.focus(), options.onClose && options.onClose(dialog);
            }
        }
        options || (options = {}), closeNotification(this, null);
        var button, dialog = dialogDiv(this, template, options.bottom), closed = !1, me = this, inp = dialog.getElementsByTagName("input")[0];
        return inp ? (inp.focus(), options.value && (inp.value = options.value, !1 !== options.selectValueOnOpen && inp.select()), 
        options.onInput && CodeMirror.on(inp, "input", function(e) {
            options.onInput(e, inp.value, close);
        }), options.onKeyUp && CodeMirror.on(inp, "keyup", function(e) {
            options.onKeyUp(e, inp.value, close);
        }), CodeMirror.on(inp, "keydown", function(e) {
            options && options.onKeyDown && options.onKeyDown(e, inp.value, close) || ((27 == e.keyCode || !1 !== options.closeOnEnter && 13 == e.keyCode) && (inp.blur(), 
            CodeMirror.e_stop(e), close()), 13 == e.keyCode && callback(inp.value, e));
        }), !1 !== options.closeOnBlur && CodeMirror.on(inp, "blur", close)) : (button = dialog.getElementsByTagName("button")[0]) && (CodeMirror.on(button, "click", function() {
            close(), me.focus();
        }), !1 !== options.closeOnBlur && CodeMirror.on(button, "blur", close), button.focus()), 
        close;
    }), CodeMirror.defineExtension("openConfirm", function(template, callbacks, options) {
        function close() {
            closed || (closed = !0, dialog.parentNode.removeChild(dialog), me.focus());
        }
        closeNotification(this, null);
        var dialog = dialogDiv(this, template, options && options.bottom), buttons = dialog.getElementsByTagName("button"), closed = !1, me = this, blurring = 1;
        buttons[0].focus();
        for (var i = 0; i < buttons.length; ++i) {
            var b = buttons[i];
            !function(callback) {
                CodeMirror.on(b, "click", function(e) {
                    CodeMirror.e_preventDefault(e), close(), callback && callback(me);
                });
            }(callbacks[i]), CodeMirror.on(b, "blur", function() {
                --blurring, setTimeout(function() {
                    blurring <= 0 && close();
                }, 200);
            }), CodeMirror.on(b, "focus", function() {
                ++blurring;
            });
        }
    }), CodeMirror.defineExtension("openNotification", function(template, options) {
        function close() {
            closed || (closed = !0, clearTimeout(doneTimer), dialog.parentNode.removeChild(dialog));
        }
        closeNotification(this, close);
        var doneTimer, dialog = dialogDiv(this, template, options && options.bottom), closed = !1, duration = options && void 0 !== options.duration ? options.duration : 5e3;
        return CodeMirror.on(dialog, "click", function(e) {
            CodeMirror.e_preventDefault(e), close();
        }), duration && (doneTimer = setTimeout(close, duration)), close;
    });
}), function(mod) {
    "object" == typeof exports && "object" == typeof module ? mod(require("../../lib/codemirror")) : "function" == typeof define && define.amd ? define([ "../../lib/codemirror" ], mod) : mod(CodeMirror);
}(function(CodeMirror) {
    "use strict";
    function SearchCursor(doc, query, pos, caseFold) {
        if (this.atOccurrence = !1, this.doc = doc, null == caseFold && "string" == typeof query && (caseFold = !1), 
        pos = pos ? doc.clipPos(pos) : Pos(0, 0), this.pos = {
            from: pos,
            to: pos
        }, "string" != typeof query) query.global || (query = new RegExp(query.source, query.ignoreCase ? "ig" : "g")), 
        this.matches = function(reverse, pos) {
            if (reverse) {
                query.lastIndex = 0;
                for (var match, start, line = doc.getLine(pos.line).slice(0, pos.ch), cutOff = 0; ;) {
                    query.lastIndex = cutOff;
                    var newMatch = query.exec(line);
                    if (!newMatch) break;
                    if (match = newMatch, start = match.index, (cutOff = match.index + (match[0].length || 1)) == line.length) break;
                }
                (matchLen = match && match[0].length || 0) || (0 == start && 0 == line.length ? match = void 0 : start != doc.getLine(pos.line).length && matchLen++);
            } else {
                query.lastIndex = pos.ch;
                var line = doc.getLine(pos.line), matchLen = (match = query.exec(line)) && match[0].length || 0;
                (start = match && match.index) + matchLen == line.length || matchLen || (matchLen = 1);
            }
            if (match && matchLen) return {
                from: Pos(pos.line, start),
                to: Pos(pos.line, start + matchLen),
                match: match
            };
        }; else {
            var origQuery = query;
            caseFold && (query = query.toLowerCase());
            var fold = caseFold ? function(str) {
                return str.toLowerCase();
            } : function(str) {
                return str;
            }, target = query.split("\n");
            if (1 == target.length) query.length ? this.matches = function(reverse, pos) {
                if (reverse) {
                    orig = doc.getLine(pos.line).slice(0, pos.ch);
                    if ((match = (line = fold(orig)).lastIndexOf(query)) > -1) return match = adjustPos(orig, line, match), 
                    {
                        from: Pos(pos.line, match),
                        to: Pos(pos.line, match + origQuery.length)
                    };
                } else {
                    var orig = doc.getLine(pos.line).slice(pos.ch), line = fold(orig), match = line.indexOf(query);
                    if (match > -1) return match = adjustPos(orig, line, match) + pos.ch, {
                        from: Pos(pos.line, match),
                        to: Pos(pos.line, match + origQuery.length)
                    };
                }
            } : this.matches = function() {}; else {
                var origTarget = origQuery.split("\n");
                this.matches = function(reverse, pos) {
                    var last = target.length - 1;
                    if (reverse) {
                        if (pos.line - (target.length - 1) < doc.firstLine()) return;
                        if (fold(doc.getLine(pos.line).slice(0, origTarget[last].length)) != target[target.length - 1]) return;
                        for (var to = Pos(pos.line, origTarget[last].length), ln = pos.line - 1, i = last - 1; i >= 1; --i, 
                        --ln) if (target[i] != fold(doc.getLine(ln))) return;
                        cut = (line = doc.getLine(ln)).length - origTarget[0].length;
                        if (fold(line.slice(cut)) != target[0]) return;
                        return {
                            from: Pos(ln, cut),
                            to: to
                        };
                    }
                    if (!(pos.line + (target.length - 1) > doc.lastLine())) {
                        var line = doc.getLine(pos.line), cut = line.length - origTarget[0].length;
                        if (fold(line.slice(cut)) == target[0]) {
                            for (var from = Pos(pos.line, cut), ln = pos.line + 1, i = 1; i < last; ++i, ++ln) if (target[i] != fold(doc.getLine(ln))) return;
                            if (fold(doc.getLine(ln).slice(0, origTarget[last].length)) == target[last]) return {
                                from: from,
                                to: Pos(ln, origTarget[last].length)
                            };
                        }
                    }
                };
            }
        }
    }
    function adjustPos(orig, folded, pos) {
        if (orig.length == folded.length) return pos;
        for (var pos1 = Math.min(pos, orig.length); ;) {
            var len1 = orig.slice(0, pos1).toLowerCase().length;
            if (len1 < pos) ++pos1; else {
                if (!(len1 > pos)) return pos1;
                --pos1;
            }
        }
    }
    var Pos = CodeMirror.Pos;
    SearchCursor.prototype = {
        findNext: function() {
            return this.find(!1);
        },
        findPrevious: function() {
            return this.find(!0);
        },
        find: function(reverse) {
            function savePosAndFail(line) {
                var pos = Pos(line, 0);
                return self.pos = {
                    from: pos,
                    to: pos
                }, self.atOccurrence = !1, !1;
            }
            for (var self = this, pos = this.doc.clipPos(reverse ? this.pos.from : this.pos.to); ;) {
                if (this.pos = this.matches(reverse, pos)) return this.atOccurrence = !0, this.pos.match || !0;
                if (reverse) {
                    if (!pos.line) return savePosAndFail(0);
                    pos = Pos(pos.line - 1, this.doc.getLine(pos.line - 1).length);
                } else {
                    var maxLine = this.doc.lineCount();
                    if (pos.line == maxLine - 1) return savePosAndFail(maxLine);
                    pos = Pos(pos.line + 1, 0);
                }
            }
        },
        from: function() {
            if (this.atOccurrence) return this.pos.from;
        },
        to: function() {
            if (this.atOccurrence) return this.pos.to;
        },
        replace: function(newText, origin) {
            if (this.atOccurrence) {
                var lines = CodeMirror.splitLines(newText);
                this.doc.replaceRange(lines, this.pos.from, this.pos.to, origin), this.pos.to = Pos(this.pos.from.line + lines.length - 1, lines[lines.length - 1].length + (1 == lines.length ? this.pos.from.ch : 0));
            }
        }
    }, CodeMirror.defineExtension("getSearchCursor", function(query, pos, caseFold) {
        return new SearchCursor(this.doc, query, pos, caseFold);
    }), CodeMirror.defineDocExtension("getSearchCursor", function(query, pos, caseFold) {
        return new SearchCursor(this, query, pos, caseFold);
    }), CodeMirror.defineExtension("selectMatches", function(query, caseFold) {
        for (var ranges = [], cur = this.getSearchCursor(query, this.getCursor("from"), caseFold); cur.findNext() && !(CodeMirror.cmpPos(cur.to(), this.getCursor("to")) > 0); ) ranges.push({
            anchor: cur.from(),
            head: cur.to()
        });
        ranges.length && this.setSelections(ranges, 0);
    });
}), function(mod) {
    "object" == typeof exports && "object" == typeof module ? mod(require("../../lib/codemirror"), require("./searchcursor"), require("../dialog/dialog")) : "function" == typeof define && define.amd ? define([ "../../lib/codemirror", "./searchcursor", "../dialog/dialog" ], mod) : mod(CodeMirror);
}(function(CodeMirror) {
    "use strict";
    function searchOverlay(query, caseInsensitive) {
        return "string" == typeof query ? query = new RegExp(query.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&"), caseInsensitive ? "gi" : "g") : query.global || (query = new RegExp(query.source, query.ignoreCase ? "gi" : "g")), 
        {
            token: function(stream) {
                query.lastIndex = stream.pos;
                var match = query.exec(stream.string);
                if (match && match.index == stream.pos) return stream.pos += match[0].length || 1, 
                "searching";
                match ? stream.pos = match.index : stream.skipToEnd();
            }
        };
    }
    function SearchState() {
        this.posFrom = this.posTo = this.lastQuery = this.query = null, this.overlay = null;
    }
    function getSearchState(cm) {
        return cm.state.search || (cm.state.search = new SearchState());
    }
    function queryCaseInsensitive(query) {
        return "string" == typeof query && query == query.toLowerCase();
    }
    function getSearchCursor(cm, query, pos) {
        return cm.getSearchCursor(query, pos, queryCaseInsensitive(query));
    }
    function persistentDialog(cm, text, deflt, onEnter, onKeyDown) {
        cm.openDialog(text, onEnter, {
            value: deflt,
            selectValueOnOpen: !0,
            closeOnEnter: !1,
            onClose: function() {
                clearSearch(cm);
            },
            onKeyDown: onKeyDown
        });
    }
    function dialog(cm, text, shortText, deflt, f) {
        cm.openDialog ? cm.openDialog(text, f, {
            value: deflt,
            selectValueOnOpen: !0
        }) : f(prompt(shortText, deflt));
    }
    function confirmDialog(cm, text, shortText, fs) {
        cm.openConfirm ? cm.openConfirm(text, fs) : confirm(shortText) && fs[0]();
    }
    function parseString(string) {
        return string.replace(/\\(.)/g, function(_, ch) {
            return "n" == ch ? "\n" : "r" == ch ? "\r" : ch;
        });
    }
    function parseQuery(query) {
        var isRE = query.match(/^\/(.*)\/([a-z]*)$/);
        if (isRE) try {
            query = new RegExp(isRE[1], -1 == isRE[2].indexOf("i") ? "" : "i");
        } catch (e) {} else query = parseString(query);
        return ("string" == typeof query ? "" == query : query.test("")) && (query = /x^/), 
        query;
    }
    function startSearch(cm, state, query) {
        state.queryText = query, state.query = parseQuery(query), cm.removeOverlay(state.overlay, queryCaseInsensitive(state.query)), 
        state.overlay = searchOverlay(state.query, queryCaseInsensitive(state.query)), cm.addOverlay(state.overlay), 
        cm.showMatchesOnScrollbar && (state.annotate && (state.annotate.clear(), state.annotate = null), 
        state.annotate = cm.showMatchesOnScrollbar(state.query, queryCaseInsensitive(state.query)));
    }
    function doSearch(cm, rev, persistent, immediate) {
        var state = getSearchState(cm);
        if (state.query) return findNext(cm, rev);
        var q = cm.getSelection() || state.lastQuery;
        if (persistent && cm.openDialog) {
            var hiding = null, searchNext = function(query, event) {
                CodeMirror.e_stop(event), query && (query != state.queryText && (startSearch(cm, state, query), 
                state.posFrom = state.posTo = cm.getCursor()), hiding && (hiding.style.opacity = 1), 
                findNext(cm, event.shiftKey, function(_, to) {
                    var dialog;
                    to.line < 3 && document.querySelector && (dialog = cm.display.wrapper.querySelector(".CodeMirror-dialog")) && dialog.getBoundingClientRect().bottom - 4 > cm.cursorCoords(to, "window").top && ((hiding = dialog).style.opacity = .4);
                }));
            };
            persistentDialog(cm, queryDialog, q, searchNext, function(event, query) {
                var cmd = CodeMirror.keyMap[cm.getOption("keyMap")][CodeMirror.keyName(event)];
                "findNext" == cmd || "findPrev" == cmd ? (CodeMirror.e_stop(event), startSearch(cm, getSearchState(cm), query), 
                cm.execCommand(cmd)) : "find" != cmd && "findPersistent" != cmd || (CodeMirror.e_stop(event), 
                searchNext(query, event));
            }), immediate && (startSearch(cm, state, q), findNext(cm, rev));
        } else dialog(cm, queryDialog, "Search for:", q, function(query) {
            query && !state.query && cm.operation(function() {
                startSearch(cm, state, query), state.posFrom = state.posTo = cm.getCursor(), findNext(cm, rev);
            });
        });
    }
    function findNext(cm, rev, callback) {
        cm.operation(function() {
            var state = getSearchState(cm), cursor = getSearchCursor(cm, state.query, rev ? state.posFrom : state.posTo);
            (cursor.find(rev) || (cursor = getSearchCursor(cm, state.query, rev ? CodeMirror.Pos(cm.lastLine()) : CodeMirror.Pos(cm.firstLine(), 0))).find(rev)) && (cm.setSelection(cursor.from(), cursor.to()), 
            cm.scrollIntoView({
                from: cursor.from(),
                to: cursor.to()
            }, 20), state.posFrom = cursor.from(), state.posTo = cursor.to(), callback && callback(cursor.from(), cursor.to()));
        });
    }
    function clearSearch(cm) {
        cm.operation(function() {
            var state = getSearchState(cm);
            state.lastQuery = state.query, state.query && (state.query = state.queryText = null, 
            cm.removeOverlay(state.overlay), state.annotate && (state.annotate.clear(), state.annotate = null));
        });
    }
    function replaceAll(cm, query, text) {
        cm.operation(function() {
            for (var cursor = getSearchCursor(cm, query); cursor.findNext(); ) if ("string" != typeof query) {
                var match = cm.getRange(cursor.from(), cursor.to()).match(query);
                cursor.replace(text.replace(/\$(\d)/g, function(_, i) {
                    return match[i];
                }));
            } else cursor.replace(text);
        });
    }
    function replace(cm, all) {
        if (!cm.getOption("readOnly")) {
            var query = cm.getSelection() || getSearchState(cm).lastQuery, dialogText = all ? "Replace all:" : "Replace:";
            dialog(cm, dialogText + replaceQueryDialog, dialogText, query, function(query) {
                query && (query = parseQuery(query), dialog(cm, replacementQueryDialog, "Replace with:", "", function(text) {
                    if (text = parseString(text), all) replaceAll(cm, query, text); else {
                        clearSearch(cm);
                        var cursor = getSearchCursor(cm, query, cm.getCursor("from")), advance = function() {
                            var match, start = cursor.from();
                            !(match = cursor.findNext()) && (cursor = getSearchCursor(cm, query), !(match = cursor.findNext()) || start && cursor.from().line == start.line && cursor.from().ch == start.ch) || (cm.setSelection(cursor.from(), cursor.to()), 
                            cm.scrollIntoView({
                                from: cursor.from(),
                                to: cursor.to()
                            }), confirmDialog(cm, doReplaceConfirm, "Replace?", [ function() {
                                doReplace(match);
                            }, advance, function() {
                                replaceAll(cm, query, text);
                            } ]));
                        }, doReplace = function(match) {
                            cursor.replace("string" == typeof query ? text : text.replace(/\$(\d)/g, function(_, i) {
                                return match[i];
                            })), advance();
                        };
                        advance();
                    }
                }));
            });
        }
    }
    var queryDialog = 'Search: <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">(Use /re/ syntax for regexp search)</span>', replaceQueryDialog = ' <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">(Use /re/ syntax for regexp search)</span>', replacementQueryDialog = 'With: <input type="text" style="width: 10em" class="CodeMirror-search-field"/>', doReplaceConfirm = "Replace? <button>Yes</button> <button>No</button> <button>All</button> <button>Stop</button>";
    CodeMirror.commands.find = function(cm) {
        clearSearch(cm), doSearch(cm);
    }, CodeMirror.commands.findPersistent = function(cm) {
        clearSearch(cm), doSearch(cm, !1, !0);
    }, CodeMirror.commands.findPersistentNext = function(cm) {
        doSearch(cm, !1, !0, !0);
    }, CodeMirror.commands.findPersistentPrev = function(cm) {
        doSearch(cm, !0, !0, !0);
    }, CodeMirror.commands.findNext = doSearch, CodeMirror.commands.findPrev = function(cm) {
        doSearch(cm, !0);
    }, CodeMirror.commands.clearSearch = clearSearch, CodeMirror.commands.replace = replace, 
    CodeMirror.commands.replaceAll = function(cm) {
        replace(cm, !0);
    };
}), function(mod) {
    "object" == typeof exports && "object" == typeof module ? mod(require("../../lib/codemirror")) : "function" == typeof define && define.amd ? define([ "../../lib/codemirror" ], mod) : mod(CodeMirror);
}(function(CodeMirror) {
    "use strict";
    function Completion(cm, options) {
        this.cm = cm, this.options = options, this.widget = null, this.debounce = 0, this.tick = 0, 
        this.startPos = this.cm.getCursor("start"), this.startLen = this.cm.getLine(this.startPos.line).length - this.cm.getSelection().length;
        var self = this;
        cm.on("cursorActivity", this.activityFunc = function() {
            self.cursorActivity();
        });
    }
    function isNewCompletion(old, nw) {
        return CodeMirror.cmpPos(nw.from, old.from) > 0 && old.to.ch - old.from.ch != nw.to.ch - nw.from.ch;
    }
    function parseOptions(cm, pos, options) {
        var editor = cm.options.hintOptions, out = {};
        for (var prop in defaultOptions) out[prop] = defaultOptions[prop];
        if (editor) for (var prop in editor) void 0 !== editor[prop] && (out[prop] = editor[prop]);
        if (options) for (var prop in options) void 0 !== options[prop] && (out[prop] = options[prop]);
        return out.hint.resolve && (out.hint = out.hint.resolve(cm, pos)), out;
    }
    function getText(completion) {
        return "string" == typeof completion ? completion : completion.text;
    }
    function buildKeyMap(completion, handle) {
        function addBinding(key, val) {
            var bound;
            bound = "string" != typeof val ? function(cm) {
                return val(cm, handle);
            } : baseMap.hasOwnProperty(val) ? baseMap[val] : val, ourMap[key] = bound;
        }
        var baseMap = {
            Up: function() {
                handle.moveFocus(-1);
            },
            Down: function() {
                handle.moveFocus(1);
            },
            PageUp: function() {
                handle.moveFocus(1 - handle.menuSize(), !0);
            },
            PageDown: function() {
                handle.moveFocus(handle.menuSize() - 1, !0);
            },
            Home: function() {
                handle.setFocus(0);
            },
            End: function() {
                handle.setFocus(handle.length - 1);
            },
            Enter: handle.pick,
            Tab: handle.pick,
            Esc: handle.close
        }, custom = completion.options.customKeys, ourMap = custom ? {} : baseMap;
        if (custom) for (var key in custom) custom.hasOwnProperty(key) && addBinding(key, custom[key]);
        var extra = completion.options.extraKeys;
        if (extra) for (var key in extra) extra.hasOwnProperty(key) && addBinding(key, extra[key]);
        return ourMap;
    }
    function getHintElement(hintsElement, el) {
        for (;el && el != hintsElement; ) {
            if ("LI" === el.nodeName.toUpperCase() && el.parentNode == hintsElement) return el;
            el = el.parentNode;
        }
    }
    function Widget(completion, data) {
        this.completion = completion, this.data = data, this.picked = !1;
        var widget = this, cm = completion.cm, hints = this.hints = document.createElement("ul");
        hints.className = "CodeMirror-hints", this.selectedHint = data.selectedHint || 0;
        for (var completions = data.list, i = 0; i < completions.length; ++i) {
            var elt = hints.appendChild(document.createElement("li")), cur = completions[i], className = HINT_ELEMENT_CLASS + (i != this.selectedHint ? "" : " " + ACTIVE_HINT_ELEMENT_CLASS);
            null != cur.className && (className = cur.className + " " + className), elt.className = className, 
            cur.render ? cur.render(elt, data, cur) : elt.appendChild(document.createTextNode(cur.displayText || getText(cur))), 
            elt.hintId = i;
        }
        var pos = cm.cursorCoords(completion.options.alignWithWord ? data.from : null), left = pos.left, top = pos.bottom, below = !0;
        hints.style.left = left + "px", hints.style.top = top + "px";
        var winW = window.innerWidth || Math.max(document.body.offsetWidth, document.documentElement.offsetWidth), winH = window.innerHeight || Math.max(document.body.offsetHeight, document.documentElement.offsetHeight);
        (completion.options.container || document.body).appendChild(hints);
        var box = hints.getBoundingClientRect(), overlapY = box.bottom - winH, scrolls = hints.scrollHeight > hints.clientHeight + 1;
        if (overlapY > 0) {
            var height = box.bottom - box.top;
            if (pos.top - (pos.bottom - box.top) - height > 0) hints.style.top = (top = pos.top - height) + "px", 
            below = !1; else if (height > winH) {
                hints.style.height = winH - 5 + "px", hints.style.top = (top = pos.bottom - box.top) + "px";
                var cursor = cm.getCursor();
                data.from.ch != cursor.ch && (pos = cm.cursorCoords(cursor), hints.style.left = (left = pos.left) + "px", 
                box = hints.getBoundingClientRect());
            }
        }
        var overlapX = box.right - winW;
        if (overlapX > 0 && (box.right - box.left > winW && (hints.style.width = winW - 5 + "px", 
        overlapX -= box.right - box.left - winW), hints.style.left = (left = pos.left - overlapX) + "px"), 
        scrolls) for (var node = hints.firstChild; node; node = node.nextSibling) node.style.paddingRight = cm.display.nativeBarWidth + "px";
        if (cm.addKeyMap(this.keyMap = buildKeyMap(completion, {
            moveFocus: function(n, avoidWrap) {
                widget.changeActive(widget.selectedHint + n, avoidWrap);
            },
            setFocus: function(n) {
                widget.changeActive(n);
            },
            menuSize: function() {
                return widget.screenAmount();
            },
            length: completions.length,
            close: function() {
                completion.close();
            },
            pick: function() {
                widget.pick();
            },
            data: data
        })), completion.options.closeOnUnfocus) {
            var closingOnBlur;
            cm.on("blur", this.onBlur = function() {
                closingOnBlur = setTimeout(function() {
                    completion.close();
                }, 100);
            }), cm.on("focus", this.onFocus = function() {
                clearTimeout(closingOnBlur);
            });
        }
        var startScroll = cm.getScrollInfo();
        return cm.on("scroll", this.onScroll = function() {
            var curScroll = cm.getScrollInfo(), editor = cm.getWrapperElement().getBoundingClientRect(), newTop = top + startScroll.top - curScroll.top, point = newTop - (window.pageYOffset || (document.documentElement || document.body).scrollTop);
            if (below || (point += hints.offsetHeight), point <= editor.top || point >= editor.bottom) return completion.close();
            hints.style.top = newTop + "px", hints.style.left = left + startScroll.left - curScroll.left + "px";
        }), CodeMirror.on(hints, "dblclick", function(e) {
            var t = getHintElement(hints, e.target || e.srcElement);
            t && null != t.hintId && (widget.changeActive(t.hintId), widget.pick());
        }), CodeMirror.on(hints, "click", function(e) {
            var t = getHintElement(hints, e.target || e.srcElement);
            t && null != t.hintId && (widget.changeActive(t.hintId), completion.options.completeOnSingleClick && widget.pick());
        }), CodeMirror.on(hints, "mousedown", function() {
            setTimeout(function() {
                cm.focus();
            }, 20);
        }), CodeMirror.signal(data, "select", completions[0], hints.firstChild), !0;
    }
    function applicableHelpers(cm, helpers) {
        if (!cm.somethingSelected()) return helpers;
        for (var result = [], i = 0; i < helpers.length; i++) helpers[i].supportsSelection && result.push(helpers[i]);
        return result;
    }
    function fetchHints(hint, cm, options, callback) {
        if (hint.async) hint(cm, callback, options); else {
            var result = hint(cm, options);
            result && result.then ? result.then(callback) : callback(result);
        }
    }
    var HINT_ELEMENT_CLASS = "CodeMirror-hint", ACTIVE_HINT_ELEMENT_CLASS = "CodeMirror-hint-active";
    CodeMirror.showHint = function(cm, getHints, options) {
        if (!getHints) return cm.showHint(options);
        options && options.async && (getHints.async = !0);
        var newOpts = {
            hint: getHints
        };
        if (options) for (var prop in options) newOpts[prop] = options[prop];
        return cm.showHint(newOpts);
    }, CodeMirror.defineExtension("showHint", function(options) {
        options = parseOptions(this, this.getCursor("start"), options);
        var selections = this.listSelections();
        if (!(selections.length > 1)) {
            if (this.somethingSelected()) {
                if (!options.hint.supportsSelection) return;
                for (var i = 0; i < selections.length; i++) if (selections[i].head.line != selections[i].anchor.line) return;
            }
            this.state.completionActive && this.state.completionActive.close();
            var completion = this.state.completionActive = new Completion(this, options);
            completion.options.hint && (CodeMirror.signal(this, "startCompletion", this), completion.update(!0));
        }
    });
    var requestAnimationFrame = window.requestAnimationFrame || function(fn) {
        return setTimeout(fn, 1e3 / 60);
    }, cancelAnimationFrame = window.cancelAnimationFrame || clearTimeout;
    Completion.prototype = {
        close: function() {
            this.active() && (this.cm.state.completionActive = null, this.tick = null, this.cm.off("cursorActivity", this.activityFunc), 
            this.widget && this.data && CodeMirror.signal(this.data, "close"), this.widget && this.widget.close(), 
            CodeMirror.signal(this.cm, "endCompletion", this.cm));
        },
        active: function() {
            return this.cm.state.completionActive == this;
        },
        pick: function(data, i) {
            var completion = data.list[i];
            completion.hint ? completion.hint(this.cm, data, completion) : this.cm.replaceRange(getText(completion), completion.from || data.from, completion.to || data.to, "complete"), 
            CodeMirror.signal(data, "pick", completion), this.close();
        },
        cursorActivity: function() {
            this.debounce && (cancelAnimationFrame(this.debounce), this.debounce = 0);
            var pos = this.cm.getCursor(), line = this.cm.getLine(pos.line);
            if (pos.line != this.startPos.line || line.length - pos.ch != this.startLen - this.startPos.ch || pos.ch < this.startPos.ch || this.cm.somethingSelected() || pos.ch && this.options.closeCharacters.test(line.charAt(pos.ch - 1))) this.close(); else {
                var self = this;
                this.debounce = requestAnimationFrame(function() {
                    self.update();
                }), this.widget && this.widget.disable();
            }
        },
        update: function(first) {
            if (null != this.tick) {
                var self = this, myTick = ++this.tick;
                fetchHints(this.options.hint, this.cm, this.options, function(data) {
                    self.tick == myTick && self.finishUpdate(data, first);
                });
            }
        },
        finishUpdate: function(data, first) {
            this.data && CodeMirror.signal(this.data, "update");
            var picked = this.widget && this.widget.picked || first && this.options.completeSingle;
            this.widget && this.widget.close(), data && this.data && isNewCompletion(this.data, data) || (this.data = data, 
            data && data.list.length && (picked && 1 == data.list.length ? this.pick(data, 0) : (this.widget = new Widget(this, data), 
            CodeMirror.signal(data, "shown"))));
        }
    }, Widget.prototype = {
        close: function() {
            if (this.completion.widget == this) {
                this.completion.widget = null, this.hints.parentNode.removeChild(this.hints), this.completion.cm.removeKeyMap(this.keyMap);
                var cm = this.completion.cm;
                this.completion.options.closeOnUnfocus && (cm.off("blur", this.onBlur), cm.off("focus", this.onFocus)), 
                cm.off("scroll", this.onScroll);
            }
        },
        disable: function() {
            this.completion.cm.removeKeyMap(this.keyMap);
            var widget = this;
            this.keyMap = {
                Enter: function() {
                    widget.picked = !0;
                }
            }, this.completion.cm.addKeyMap(this.keyMap);
        },
        pick: function() {
            this.completion.pick(this.data, this.selectedHint);
        },
        changeActive: function(i, avoidWrap) {
            if (i >= this.data.list.length ? i = avoidWrap ? this.data.list.length - 1 : 0 : i < 0 && (i = avoidWrap ? 0 : this.data.list.length - 1), 
            this.selectedHint != i) {
                var node = this.hints.childNodes[this.selectedHint];
                node.className = node.className.replace(" " + ACTIVE_HINT_ELEMENT_CLASS, ""), (node = this.hints.childNodes[this.selectedHint = i]).className += " " + ACTIVE_HINT_ELEMENT_CLASS, 
                node.offsetTop < this.hints.scrollTop ? this.hints.scrollTop = node.offsetTop - 3 : node.offsetTop + node.offsetHeight > this.hints.scrollTop + this.hints.clientHeight && (this.hints.scrollTop = node.offsetTop + node.offsetHeight - this.hints.clientHeight + 3), 
                CodeMirror.signal(this.data, "select", this.data.list[this.selectedHint], node);
            }
        },
        screenAmount: function() {
            return Math.floor(this.hints.clientHeight / this.hints.firstChild.offsetHeight) || 1;
        }
    }, CodeMirror.registerHelper("hint", "auto", {
        resolve: function(cm, pos) {
            var words, helpers = cm.getHelpers(pos, "hint");
            if (helpers.length) {
                var resolved = function(cm, callback, options) {
                    function run(i) {
                        if (i == app.length) return callback(null);
                        fetchHints(app[i], cm, options, function(result) {
                            result && result.list.length > 0 ? callback(result) : run(i + 1);
                        });
                    }
                    var app = applicableHelpers(cm, helpers);
                    run(0);
                };
                return resolved.async = !0, resolved.supportsSelection = !0, resolved;
            }
            return (words = cm.getHelper(cm.getCursor(), "hintWords")) ? function(cm) {
                return CodeMirror.hint.fromList(cm, {
                    words: words
                });
            } : CodeMirror.hint.anyword ? function(cm, options) {
                return CodeMirror.hint.anyword(cm, options);
            } : function() {};
        }
    }), CodeMirror.registerHelper("hint", "fromList", function(cm, options) {
        var cur = cm.getCursor(), token = cm.getTokenAt(cur), to = CodeMirror.Pos(cur.line, token.end);
        if (token.string && /\w/.test(token.string[token.string.length - 1])) var term = token.string, from = CodeMirror.Pos(cur.line, token.start); else var term = "", from = to;
        for (var found = [], i = 0; i < options.words.length; i++) {
            var word = options.words[i];
            word.slice(0, term.length) == term && found.push(word);
        }
        if (found.length) return {
            list: found,
            from: from,
            to: to
        };
    }), CodeMirror.commands.autocomplete = CodeMirror.showHint;
    var defaultOptions = {
        hint: CodeMirror.hint.auto,
        completeSingle: !0,
        alignWithWord: !0,
        closeCharacters: /[\s()\[\]{};:>,]/,
        closeOnUnfocus: !0,
        completeOnSingleClick: !0,
        container: null,
        customKeys: null,
        extraKeys: null
    };
    CodeMirror.defineOption("hintOptions", null);
}), function(mod) {
    "object" == typeof exports && "object" == typeof module ? mod(require("../../lib/codemirror"), require("./xml-hint")) : "function" == typeof define && define.amd ? define([ "../../lib/codemirror", "./xml-hint" ], mod) : mod(CodeMirror);
}(function(CodeMirror) {
    "use strict";
    function populate(obj) {
        for (var attr in globalAttrs) globalAttrs.hasOwnProperty(attr) && (obj.attrs[attr] = globalAttrs[attr]);
    }
    var langs = "ab aa af ak sq am ar an hy as av ae ay az bm ba eu be bn bh bi bs br bg my ca ch ce ny zh cv kw co cr hr cs da dv nl dz en eo et ee fo fj fi fr ff gl ka de el gn gu ht ha he hz hi ho hu ia id ie ga ig ik io is it iu ja jv kl kn kr ks kk km ki rw ky kv kg ko ku kj la lb lg li ln lo lt lu lv gv mk mg ms ml mt mi mr mh mn na nv nb nd ne ng nn no ii nr oc oj cu om or os pa pi fa pl ps pt qu rm rn ro ru sa sc sd se sm sg sr gd sn si sk sl so st es su sw ss sv ta te tg th ti bo tk tl tn to tr ts tt tw ty ug uk ur uz ve vi vo wa cy wo fy xh yi yo za zu".split(" "), targets = [ "_blank", "_self", "_top", "_parent" ], charsets = [ "ascii", "utf-8", "utf-16", "latin1", "latin1" ], methods = [ "get", "post", "put", "delete" ], encs = [ "application/x-www-form-urlencoded", "multipart/form-data", "text/plain" ], media = [ "all", "screen", "print", "embossed", "braille", "handheld", "print", "projection", "screen", "tty", "tv", "speech", "3d-glasses", "resolution [>][<][=] [X]", "device-aspect-ratio: X/Y", "orientation:portrait", "orientation:landscape", "device-height: [X]", "device-width: [X]" ], s = {
        attrs: {}
    }, data = {
        a: {
            attrs: {
                href: null,
                ping: null,
                type: null,
                media: media,
                target: targets,
                hreflang: langs
            }
        },
        abbr: s,
        acronym: s,
        address: s,
        applet: s,
        area: {
            attrs: {
                alt: null,
                coords: null,
                href: null,
                target: null,
                ping: null,
                media: media,
                hreflang: langs,
                type: null,
                shape: [ "default", "rect", "circle", "poly" ]
            }
        },
        article: s,
        aside: s,
        audio: {
            attrs: {
                src: null,
                mediagroup: null,
                crossorigin: [ "anonymous", "use-credentials" ],
                preload: [ "none", "metadata", "auto" ],
                autoplay: [ "", "autoplay" ],
                loop: [ "", "loop" ],
                controls: [ "", "controls" ]
            }
        },
        b: s,
        base: {
            attrs: {
                href: null,
                target: targets
            }
        },
        basefont: s,
        bdi: s,
        bdo: s,
        big: s,
        blockquote: {
            attrs: {
                cite: null
            }
        },
        body: s,
        br: s,
        button: {
            attrs: {
                form: null,
                formaction: null,
                name: null,
                value: null,
                autofocus: [ "", "autofocus" ],
                disabled: [ "", "autofocus" ],
                formenctype: encs,
                formmethod: methods,
                formnovalidate: [ "", "novalidate" ],
                formtarget: targets,
                type: [ "submit", "reset", "button" ]
            }
        },
        canvas: {
            attrs: {
                width: null,
                height: null
            }
        },
        caption: s,
        center: s,
        cite: s,
        code: s,
        col: {
            attrs: {
                span: null
            }
        },
        colgroup: {
            attrs: {
                span: null
            }
        },
        command: {
            attrs: {
                type: [ "command", "checkbox", "radio" ],
                label: null,
                icon: null,
                radiogroup: null,
                command: null,
                title: null,
                disabled: [ "", "disabled" ],
                checked: [ "", "checked" ]
            }
        },
        data: {
            attrs: {
                value: null
            }
        },
        datagrid: {
            attrs: {
                disabled: [ "", "disabled" ],
                multiple: [ "", "multiple" ]
            }
        },
        datalist: {
            attrs: {
                data: null
            }
        },
        dd: s,
        del: {
            attrs: {
                cite: null,
                datetime: null
            }
        },
        details: {
            attrs: {
                open: [ "", "open" ]
            }
        },
        dfn: s,
        dir: s,
        div: s,
        dl: s,
        dt: s,
        em: s,
        embed: {
            attrs: {
                src: null,
                type: null,
                width: null,
                height: null
            }
        },
        eventsource: {
            attrs: {
                src: null
            }
        },
        fieldset: {
            attrs: {
                disabled: [ "", "disabled" ],
                form: null,
                name: null
            }
        },
        figcaption: s,
        figure: s,
        font: s,
        footer: s,
        form: {
            attrs: {
                action: null,
                name: null,
                "accept-charset": charsets,
                autocomplete: [ "on", "off" ],
                enctype: encs,
                method: methods,
                novalidate: [ "", "novalidate" ],
                target: targets
            }
        },
        frame: s,
        frameset: s,
        h1: s,
        h2: s,
        h3: s,
        h4: s,
        h5: s,
        h6: s,
        head: {
            attrs: {},
            children: [ "title", "base", "link", "style", "meta", "script", "noscript", "command" ]
        },
        header: s,
        hgroup: s,
        hr: s,
        html: {
            attrs: {
                manifest: null
            },
            children: [ "head", "body" ]
        },
        i: s,
        iframe: {
            attrs: {
                src: null,
                srcdoc: null,
                name: null,
                width: null,
                height: null,
                sandbox: [ "allow-top-navigation", "allow-same-origin", "allow-forms", "allow-scripts" ],
                seamless: [ "", "seamless" ]
            }
        },
        img: {
            attrs: {
                alt: null,
                src: null,
                ismap: null,
                usemap: null,
                width: null,
                height: null,
                crossorigin: [ "anonymous", "use-credentials" ]
            }
        },
        input: {
            attrs: {
                alt: null,
                dirname: null,
                form: null,
                formaction: null,
                height: null,
                list: null,
                max: null,
                maxlength: null,
                min: null,
                name: null,
                pattern: null,
                placeholder: null,
                size: null,
                src: null,
                step: null,
                value: null,
                width: null,
                accept: [ "audio/*", "video/*", "image/*" ],
                autocomplete: [ "on", "off" ],
                autofocus: [ "", "autofocus" ],
                checked: [ "", "checked" ],
                disabled: [ "", "disabled" ],
                formenctype: encs,
                formmethod: methods,
                formnovalidate: [ "", "novalidate" ],
                formtarget: targets,
                multiple: [ "", "multiple" ],
                readonly: [ "", "readonly" ],
                required: [ "", "required" ],
                type: [ "hidden", "text", "search", "tel", "url", "email", "password", "datetime", "date", "month", "week", "time", "datetime-local", "number", "range", "color", "checkbox", "radio", "file", "submit", "image", "reset", "button" ]
            }
        },
        ins: {
            attrs: {
                cite: null,
                datetime: null
            }
        },
        kbd: s,
        keygen: {
            attrs: {
                challenge: null,
                form: null,
                name: null,
                autofocus: [ "", "autofocus" ],
                disabled: [ "", "disabled" ],
                keytype: [ "RSA" ]
            }
        },
        label: {
            attrs: {
                for: null,
                form: null
            }
        },
        legend: s,
        li: {
            attrs: {
                value: null
            }
        },
        link: {
            attrs: {
                href: null,
                type: null,
                hreflang: langs,
                media: media,
                sizes: [ "all", "16x16", "16x16 32x32", "16x16 32x32 64x64" ]
            }
        },
        map: {
            attrs: {
                name: null
            }
        },
        mark: s,
        menu: {
            attrs: {
                label: null,
                type: [ "list", "context", "toolbar" ]
            }
        },
        meta: {
            attrs: {
                content: null,
                charset: charsets,
                name: [ "viewport", "application-name", "author", "description", "generator", "keywords" ],
                "http-equiv": [ "content-language", "content-type", "default-style", "refresh" ]
            }
        },
        meter: {
            attrs: {
                value: null,
                min: null,
                low: null,
                high: null,
                max: null,
                optimum: null
            }
        },
        nav: s,
        noframes: s,
        noscript: s,
        object: {
            attrs: {
                data: null,
                type: null,
                name: null,
                usemap: null,
                form: null,
                width: null,
                height: null,
                typemustmatch: [ "", "typemustmatch" ]
            }
        },
        ol: {
            attrs: {
                reversed: [ "", "reversed" ],
                start: null,
                type: [ "1", "a", "A", "i", "I" ]
            }
        },
        optgroup: {
            attrs: {
                disabled: [ "", "disabled" ],
                label: null
            }
        },
        option: {
            attrs: {
                disabled: [ "", "disabled" ],
                label: null,
                selected: [ "", "selected" ],
                value: null
            }
        },
        output: {
            attrs: {
                for: null,
                form: null,
                name: null
            }
        },
        p: s,
        param: {
            attrs: {
                name: null,
                value: null
            }
        },
        pre: s,
        progress: {
            attrs: {
                value: null,
                max: null
            }
        },
        q: {
            attrs: {
                cite: null
            }
        },
        rp: s,
        rt: s,
        ruby: s,
        s: s,
        samp: s,
        script: {
            attrs: {
                type: [ "text/javascript" ],
                src: null,
                async: [ "", "async" ],
                defer: [ "", "defer" ],
                charset: charsets
            }
        },
        section: s,
        select: {
            attrs: {
                form: null,
                name: null,
                size: null,
                autofocus: [ "", "autofocus" ],
                disabled: [ "", "disabled" ],
                multiple: [ "", "multiple" ]
            }
        },
        small: s,
        source: {
            attrs: {
                src: null,
                type: null,
                media: null
            }
        },
        span: s,
        strike: s,
        strong: s,
        style: {
            attrs: {
                type: [ "text/css" ],
                media: media,
                scoped: null
            }
        },
        sub: s,
        summary: s,
        sup: s,
        table: s,
        tbody: s,
        td: {
            attrs: {
                colspan: null,
                rowspan: null,
                headers: null
            }
        },
        textarea: {
            attrs: {
                dirname: null,
                form: null,
                maxlength: null,
                name: null,
                placeholder: null,
                rows: null,
                cols: null,
                autofocus: [ "", "autofocus" ],
                disabled: [ "", "disabled" ],
                readonly: [ "", "readonly" ],
                required: [ "", "required" ],
                wrap: [ "soft", "hard" ]
            }
        },
        tfoot: s,
        th: {
            attrs: {
                colspan: null,
                rowspan: null,
                headers: null,
                scope: [ "row", "col", "rowgroup", "colgroup" ]
            }
        },
        thead: s,
        time: {
            attrs: {
                datetime: null
            }
        },
        title: s,
        tr: s,
        track: {
            attrs: {
                src: null,
                label: null,
                default: null,
                kind: [ "subtitles", "captions", "descriptions", "chapters", "metadata" ],
                srclang: langs
            }
        },
        tt: s,
        u: s,
        ul: s,
        var: s,
        video: {
            attrs: {
                src: null,
                poster: null,
                width: null,
                height: null,
                crossorigin: [ "anonymous", "use-credentials" ],
                preload: [ "auto", "metadata", "none" ],
                autoplay: [ "", "autoplay" ],
                mediagroup: [ "movie" ],
                muted: [ "", "muted" ],
                controls: [ "", "controls" ]
            }
        },
        wbr: s
    }, globalAttrs = {
        accesskey: [ "a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z", "0", "1", "2", "3", "4", "5", "6", "7", "8", "9" ],
        class: null,
        contenteditable: [ "true", "false" ],
        contextmenu: null,
        dir: [ "ltr", "rtl", "auto" ],
        draggable: [ "true", "false", "auto" ],
        dropzone: [ "copy", "move", "link", "string:", "file:" ],
        hidden: [ "hidden" ],
        id: null,
        inert: [ "inert" ],
        itemid: null,
        itemprop: null,
        itemref: null,
        itemscope: [ "itemscope" ],
        itemtype: null,
        lang: [ "en", "es" ],
        spellcheck: [ "true", "false" ],
        style: null,
        tabindex: [ "1", "2", "3", "4", "5", "6", "7", "8", "9" ],
        title: null,
        translate: [ "yes", "no" ],
        onclick: null,
        rel: [ "stylesheet", "alternate", "author", "bookmark", "help", "license", "next", "nofollow", "noreferrer", "prefetch", "prev", "search", "tag" ]
    };
    populate(s);
    for (var tag in data) data.hasOwnProperty(tag) && data[tag] != s && populate(data[tag]);
    CodeMirror.htmlSchema = data, CodeMirror.registerHelper("hint", "html", function(cm, options) {
        var local = {
            schemaInfo: data
        };
        if (options) for (var opt in options) local[opt] = options[opt];
        return CodeMirror.hint.xml(cm, local);
    });
}), function(mod) {
    "object" == typeof exports && "object" == typeof module ? mod(require("../../lib/codemirror")) : "function" == typeof define && define.amd ? define([ "../../lib/codemirror" ], mod) : mod(CodeMirror);
}(function(CodeMirror) {
    "use strict";
    var WORD = /[\w$]+/;
    CodeMirror.registerHelper("hint", "anyword", function(editor, options) {
        for (var word = options && options.word || WORD, range = options && options.range || 500, cur = editor.getCursor(), curLine = editor.getLine(cur.line), end = cur.ch, start = end; start && word.test(curLine.charAt(start - 1)); ) --start;
        for (var curWord = start != end && curLine.slice(start, end), list = options && options.list || [], seen = {}, re = new RegExp(word.source, "g"), dir = -1; dir <= 1; dir += 2) for (var line = cur.line, endLine = Math.min(Math.max(line + dir * range, editor.firstLine()), editor.lastLine()) + dir; line != endLine; line += dir) for (var m, text = editor.getLine(line); m = re.exec(text); ) line == cur.line && m[0] === curWord || curWord && 0 != m[0].lastIndexOf(curWord, 0) || Object.prototype.hasOwnProperty.call(seen, m[0]) || (seen[m[0]] = !0, 
        list.push(m[0]));
        return {
            list: list,
            from: CodeMirror.Pos(cur.line, start),
            to: CodeMirror.Pos(cur.line, end)
        };
    });
}), function(mod) {
    "object" == typeof exports && "object" == typeof module ? mod(require("../../lib/codemirror")) : "function" == typeof define && define.amd ? define([ "../../lib/codemirror" ], mod) : mod(CodeMirror);
}(function(CodeMirror) {
    "use strict";
    var Pos = CodeMirror.Pos;
    CodeMirror.registerHelper("hint", "xml", function(cm, options) {
        var tags = options && options.schemaInfo, quote = options && options.quoteChar || '"';
        if (tags) {
            var cur = cm.getCursor(), token = cm.getTokenAt(cur);
            token.end > cur.ch && (token.end = cur.ch, token.string = token.string.slice(0, cur.ch - token.start));
            var inner = CodeMirror.innerMode(cm.getMode(), token.state);
            if ("xml" == inner.mode.name) {
                var prefix, tagStart, result = [], replaceToken = !1, tag = /\btag\b/.test(token.type) && !/>$/.test(token.string), tagName = tag && /^\w/.test(token.string);
                if (tagName) {
                    var before = cm.getLine(cur.line).slice(Math.max(0, token.start - 2), token.start), tagType = /<\/$/.test(before) ? "close" : /<$/.test(before) ? "open" : null;
                    tagType && (tagStart = token.start - ("close" == tagType ? 2 : 1));
                } else tag && "<" == token.string ? tagType = "open" : tag && "</" == token.string && (tagType = "close");
                if (!tag && !inner.state.tagName || tagType) {
                    tagName && (prefix = token.string), replaceToken = tagType;
                    var cx = inner.state.context, curTag = cx && tags[cx.tagName], childList = cx ? curTag && curTag.children : tags["!top"];
                    if (childList && "close" != tagType) for (i = 0; i < childList.length; ++i) prefix && 0 != childList[i].lastIndexOf(prefix, 0) || result.push("<" + childList[i]); else if ("close" != tagType) for (var name in tags) !tags.hasOwnProperty(name) || "!top" == name || "!attrs" == name || prefix && 0 != name.lastIndexOf(prefix, 0) || result.push("<" + name);
                    cx && (!prefix || "close" == tagType && 0 == cx.tagName.lastIndexOf(prefix, 0)) && result.push("</" + cx.tagName + ">");
                } else {
                    var attrs = (curTag = tags[inner.state.tagName]) && curTag.attrs, globalAttrs = tags["!attrs"];
                    if (!attrs && !globalAttrs) return;
                    if (attrs) {
                        if (globalAttrs) {
                            var set = {};
                            for (var nm in globalAttrs) globalAttrs.hasOwnProperty(nm) && (set[nm] = globalAttrs[nm]);
                            for (var nm in attrs) attrs.hasOwnProperty(nm) && (set[nm] = attrs[nm]);
                            attrs = set;
                        }
                    } else attrs = globalAttrs;
                    if ("string" == token.type || "=" == token.string) {
                        var atValues, atName = (before = cm.getRange(Pos(cur.line, Math.max(0, cur.ch - 60)), Pos(cur.line, "string" == token.type ? token.start : token.end))).match(/([^\s\u00a0=<>\"\']+)=$/);
                        if (!atName || !attrs.hasOwnProperty(atName[1]) || !(atValues = attrs[atName[1]])) return;
                        if ("function" == typeof atValues && (atValues = atValues.call(this, cm)), "string" == token.type) {
                            prefix = token.string;
                            var n = 0;
                            /['"]/.test(token.string.charAt(0)) && (quote = token.string.charAt(0), prefix = token.string.slice(1), 
                            n++);
                            var len = token.string.length;
                            /['"]/.test(token.string.charAt(len - 1)) && (quote = token.string.charAt(len - 1), 
                            prefix = token.string.substr(n, len - 2)), replaceToken = !0;
                        }
                        for (var i = 0; i < atValues.length; ++i) prefix && 0 != atValues[i].lastIndexOf(prefix, 0) || result.push(quote + atValues[i] + quote);
                    } else {
                        "attribute" == token.type && (prefix = token.string, replaceToken = !0);
                        for (var attr in attrs) !attrs.hasOwnProperty(attr) || prefix && 0 != attr.lastIndexOf(prefix, 0) || result.push(attr);
                    }
                }
                return {
                    list: result,
                    from: replaceToken ? Pos(cur.line, null == tagStart ? token.start : tagStart) : cur,
                    to: replaceToken ? Pos(cur.line, token.end) : cur
                };
            }
        }
    });
}), function(mod) {
    "object" == typeof exports && "object" == typeof module ? mod(require("../../lib/codemirror"), require("../../mode/css/css")) : "function" == typeof define && define.amd ? define([ "../../lib/codemirror", "../../mode/css/css" ], mod) : mod(CodeMirror);
}(function(CodeMirror) {
    "use strict";
    var pseudoClasses = {
        link: 1,
        visited: 1,
        active: 1,
        hover: 1,
        focus: 1,
        "first-letter": 1,
        "first-line": 1,
        "first-child": 1,
        before: 1,
        after: 1,
        lang: 1
    };
    CodeMirror.registerHelper("hint", "css", function(cm) {
        function add(keywords) {
            for (var name in keywords) word && 0 != name.lastIndexOf(word, 0) || result.push(name);
        }
        var cur = cm.getCursor(), token = cm.getTokenAt(cur), inner = CodeMirror.innerMode(cm.getMode(), token.state);
        if ("css" == inner.mode.name) {
            if ("keyword" == token.type && 0 == "!important".indexOf(token.string)) return {
                list: [ "!important" ],
                from: CodeMirror.Pos(cur.line, token.start),
                to: CodeMirror.Pos(cur.line, token.end)
            };
            var start = token.start, end = cur.ch, word = token.string.slice(0, end - start);
            /[^\w$_-]/.test(word) && (word = "", start = end = cur.ch);
            var spec = CodeMirror.resolveMode("text/css"), result = [], st = inner.state.state;
            return "pseudo" == st || "variable-3" == token.type ? add(pseudoClasses) : "block" == st || "maybeprop" == st ? add(spec.propertyKeywords) : "prop" == st || "parens" == st || "at" == st || "params" == st ? (add(spec.valueKeywords), 
            add(spec.colorKeywords)) : "media" != st && "media_parens" != st || (add(spec.mediaTypes), 
            add(spec.mediaFeatures)), result.length ? {
                list: result,
                from: CodeMirror.Pos(cur.line, start),
                to: CodeMirror.Pos(cur.line, end)
            } : void 0;
        }
    });
}), function(mod) {
    "object" == typeof exports && "object" == typeof module ? mod(require("../../lib/codemirror")) : "function" == typeof define && define.amd ? define([ "../../lib/codemirror" ], mod) : mod(CodeMirror);
}(function(CodeMirror) {
    "use strict";
    var htmlConfig = {
        autoSelfClosers: {
            area: !0,
            base: !0,
            br: !0,
            col: !0,
            command: !0,
            embed: !0,
            frame: !0,
            hr: !0,
            img: !0,
            input: !0,
            keygen: !0,
            link: !0,
            meta: !0,
            param: !0,
            source: !0,
            track: !0,
            wbr: !0,
            menuitem: !0
        },
        implicitlyClosed: {
            dd: !0,
            li: !0,
            optgroup: !0,
            option: !0,
            p: !0,
            rp: !0,
            rt: !0,
            tbody: !0,
            td: !0,
            tfoot: !0,
            th: !0,
            tr: !0
        },
        contextGrabbers: {
            dd: {
                dd: !0,
                dt: !0
            },
            dt: {
                dd: !0,
                dt: !0
            },
            li: {
                li: !0
            },
            option: {
                option: !0,
                optgroup: !0
            },
            optgroup: {
                optgroup: !0
            },
            p: {
                address: !0,
                article: !0,
                aside: !0,
                blockquote: !0,
                dir: !0,
                div: !0,
                dl: !0,
                fieldset: !0,
                footer: !0,
                form: !0,
                h1: !0,
                h2: !0,
                h3: !0,
                h4: !0,
                h5: !0,
                h6: !0,
                header: !0,
                hgroup: !0,
                hr: !0,
                menu: !0,
                nav: !0,
                ol: !0,
                p: !0,
                pre: !0,
                section: !0,
                table: !0,
                ul: !0
            },
            rp: {
                rp: !0,
                rt: !0
            },
            rt: {
                rp: !0,
                rt: !0
            },
            tbody: {
                tbody: !0,
                tfoot: !0
            },
            td: {
                td: !0,
                th: !0
            },
            tfoot: {
                tbody: !0
            },
            th: {
                td: !0,
                th: !0
            },
            thead: {
                tbody: !0,
                tfoot: !0
            },
            tr: {
                tr: !0
            }
        },
        doNotIndent: {
            pre: !0
        },
        allowUnquoted: !0,
        allowMissing: !0,
        caseFold: !0
    }, xmlConfig = {
        autoSelfClosers: {},
        implicitlyClosed: {},
        contextGrabbers: {},
        doNotIndent: {},
        allowUnquoted: !1,
        allowMissing: !1,
        caseFold: !1
    };
    CodeMirror.defineMode("xml", function(editorConf, config_) {
        function inText(stream, state) {
            function chain(parser) {
                return state.tokenize = parser, parser(stream, state);
            }
            var ch = stream.next();
            if ("<" == ch) return stream.eat("!") ? stream.eat("[") ? stream.match("CDATA[") ? chain(inBlock("atom", "]]>")) : null : stream.match("--") ? chain(inBlock("comment", "--\x3e")) : stream.match("DOCTYPE", !0, !0) ? (stream.eatWhile(/[\w\._\-]/), 
            chain(doctype(1))) : null : stream.eat("?") ? (stream.eatWhile(/[\w\._\-]/), state.tokenize = inBlock("meta", "?>"), 
            "meta") : (type = stream.eat("/") ? "closeTag" : "openTag", state.tokenize = inTag, 
            "tag bracket");
            if ("&" == ch) {
                return (stream.eat("#") ? stream.eat("x") ? stream.eatWhile(/[a-fA-F\d]/) && stream.eat(";") : stream.eatWhile(/[\d]/) && stream.eat(";") : stream.eatWhile(/[\w\.\-:]/) && stream.eat(";")) ? "atom" : "error";
            }
            return stream.eatWhile(/[^&<]/), null;
        }
        function inTag(stream, state) {
            var ch = stream.next();
            if (">" == ch || "/" == ch && stream.eat(">")) return state.tokenize = inText, type = ">" == ch ? "endTag" : "selfcloseTag", 
            "tag bracket";
            if ("=" == ch) return type = "equals", null;
            if ("<" == ch) {
                state.tokenize = inText, state.state = baseState, state.tagName = state.tagStart = null;
                var next = state.tokenize(stream, state);
                return next ? next + " tag error" : "tag error";
            }
            return /[\'\"]/.test(ch) ? (state.tokenize = inAttribute(ch), state.stringStartCol = stream.column(), 
            state.tokenize(stream, state)) : (stream.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/), 
            "word");
        }
        function inAttribute(quote) {
            var closure = function(stream, state) {
                for (;!stream.eol(); ) if (stream.next() == quote) {
                    state.tokenize = inTag;
                    break;
                }
                return "string";
            };
            return closure.isInAttribute = !0, closure;
        }
        function inBlock(style, terminator) {
            return function(stream, state) {
                for (;!stream.eol(); ) {
                    if (stream.match(terminator)) {
                        state.tokenize = inText;
                        break;
                    }
                    stream.next();
                }
                return style;
            };
        }
        function doctype(depth) {
            return function(stream, state) {
                for (var ch; null != (ch = stream.next()); ) {
                    if ("<" == ch) return state.tokenize = doctype(depth + 1), state.tokenize(stream, state);
                    if (">" == ch) {
                        if (1 == depth) {
                            state.tokenize = inText;
                            break;
                        }
                        return state.tokenize = doctype(depth - 1), state.tokenize(stream, state);
                    }
                }
                return "meta";
            };
        }
        function Context(state, tagName, startOfLine) {
            this.prev = state.context, this.tagName = tagName, this.indent = state.indented, 
            this.startOfLine = startOfLine, (config.doNotIndent.hasOwnProperty(tagName) || state.context && state.context.noIndent) && (this.noIndent = !0);
        }
        function popContext(state) {
            state.context && (state.context = state.context.prev);
        }
        function maybePopContext(state, nextTagName) {
            for (var parentTagName; ;) {
                if (!state.context) return;
                if (parentTagName = state.context.tagName, !config.contextGrabbers.hasOwnProperty(parentTagName) || !config.contextGrabbers[parentTagName].hasOwnProperty(nextTagName)) return;
                popContext(state);
            }
        }
        function baseState(type, stream, state) {
            return "openTag" == type ? (state.tagStart = stream.column(), tagNameState) : "closeTag" == type ? closeTagNameState : baseState;
        }
        function tagNameState(type, stream, state) {
            return "word" == type ? (state.tagName = stream.current(), setStyle = "tag", attrState) : (setStyle = "error", 
            tagNameState);
        }
        function closeTagNameState(type, stream, state) {
            if ("word" == type) {
                var tagName = stream.current();
                return state.context && state.context.tagName != tagName && config.implicitlyClosed.hasOwnProperty(state.context.tagName) && popContext(state), 
                state.context && state.context.tagName == tagName || !1 === config.matchClosing ? (setStyle = "tag", 
                closeState) : (setStyle = "tag error", closeStateErr);
            }
            return setStyle = "error", closeStateErr;
        }
        function closeState(type, _stream, state) {
            return "endTag" != type ? (setStyle = "error", closeState) : (popContext(state), 
            baseState);
        }
        function closeStateErr(type, stream, state) {
            return setStyle = "error", closeState(type, stream, state);
        }
        function attrState(type, _stream, state) {
            if ("word" == type) return setStyle = "attribute", attrEqState;
            if ("endTag" == type || "selfcloseTag" == type) {
                var tagName = state.tagName, tagStart = state.tagStart;
                return state.tagName = state.tagStart = null, "selfcloseTag" == type || config.autoSelfClosers.hasOwnProperty(tagName) ? maybePopContext(state, tagName) : (maybePopContext(state, tagName), 
                state.context = new Context(state, tagName, tagStart == state.indented)), baseState;
            }
            return setStyle = "error", attrState;
        }
        function attrEqState(type, stream, state) {
            return "equals" == type ? attrValueState : (config.allowMissing || (setStyle = "error"), 
            attrState(type, stream, state));
        }
        function attrValueState(type, stream, state) {
            return "string" == type ? attrContinuedState : "word" == type && config.allowUnquoted ? (setStyle = "string", 
            attrState) : (setStyle = "error", attrState(type, stream, state));
        }
        function attrContinuedState(type, stream, state) {
            return "string" == type ? attrContinuedState : attrState(type, stream, state);
        }
        var indentUnit = editorConf.indentUnit, config = {}, defaults = config_.htmlMode ? htmlConfig : xmlConfig;
        for (var prop in defaults) config[prop] = defaults[prop];
        for (var prop in config_) config[prop] = config_[prop];
        var type, setStyle;
        return inText.isInText = !0, {
            startState: function(baseIndent) {
                var state = {
                    tokenize: inText,
                    state: baseState,
                    indented: baseIndent || 0,
                    tagName: null,
                    tagStart: null,
                    context: null
                };
                return null != baseIndent && (state.baseIndent = baseIndent), state;
            },
            token: function(stream, state) {
                if (!state.tagName && stream.sol() && (state.indented = stream.indentation()), stream.eatSpace()) return null;
                type = null;
                var style = state.tokenize(stream, state);
                return (style || type) && "comment" != style && (setStyle = null, state.state = state.state(type || style, stream, state), 
                state._status = [ type, style ], "openTag" == type ? state._stack ? (state._last[0] = state._last[0] + 1, 
                state._index[0] = state._last[0], state._stack.push(state._last[0])) : (state._stack = [ 0 ], 
                state._last = [ 0 ], state._index = [ 0 ]) : state.tagName ? config.autoSelfClosers.hasOwnProperty(state.tagName) && (state._closeTag = [ !0 ]) : "closeTag" == type && "tag bracket" == style ? state._closeTag = [ !0 ] : "endTag" == type && state._closeTag && (state._stack.splice(-1, 1), 
                state._index[0] = state._stack[state._stack.length - 1], state._closeTag = null), 
                setStyle && (style = "error" == setStyle ? style + " error" : setStyle)), style;
            },
            indent: function(state, textAfter, fullLine) {
                var context = state.context;
                if (state.tokenize.isInAttribute) return state.tagStart == state.indented ? state.stringStartCol + 1 : state.indented + indentUnit;
                if (context && context.noIndent) return CodeMirror.Pass;
                if (state.tokenize != inTag && state.tokenize != inText) return fullLine ? fullLine.match(/^(\s*)/)[0].length : 0;
                if (state.tagName) return !1 !== config.multilineTagIndentPastTag ? state.tagStart + state.tagName.length + 2 : state.tagStart + indentUnit * (config.multilineTagIndentFactor || 1);
                if (config.alignCDATA && /<!\[CDATA\[/.test(textAfter)) return 0;
                var tagAfter = textAfter && /^<(\/)?([\w_:\.-]*)/.exec(textAfter);
                if (tagAfter && tagAfter[1]) for (;context; ) {
                    if (context.tagName == tagAfter[2]) {
                        context = context.prev;
                        break;
                    }
                    if (!config.implicitlyClosed.hasOwnProperty(context.tagName)) break;
                    context = context.prev;
                } else if (tagAfter) for (;context; ) {
                    var grabbers = config.contextGrabbers[context.tagName];
                    if (!grabbers || !grabbers.hasOwnProperty(tagAfter[2])) break;
                    context = context.prev;
                }
                for (;context && context.prev && !context.startOfLine; ) context = context.prev;
                return context ? context.indent + indentUnit : state.baseIndent || 0;
            },
            electricInput: /<\/[\s\w:]+>$/,
            blockCommentStart: "\x3c!--",
            blockCommentEnd: "--\x3e",
            configuration: config.htmlMode ? "html" : "xml",
            helperType: config.htmlMode ? "html" : "xml",
            skipAttribute: function(state) {
                state.state == attrValueState && (state.state = attrState);
            }
        };
    }), CodeMirror.defineMIME("text/xml", "xml"), CodeMirror.defineMIME("application/xml", "xml"), 
    CodeMirror.mimeModes.hasOwnProperty("text/html") || CodeMirror.defineMIME("text/html", {
        name: "xml",
        htmlMode: !0
    });
}), function(mod) {
    "object" == typeof exports && "object" == typeof module ? mod(require("../../lib/codemirror")) : "function" == typeof define && define.amd ? define([ "../../lib/codemirror" ], mod) : mod(CodeMirror);
}(function(CodeMirror) {
    "use strict";
    function keySet(array) {
        for (var keys = {}, i = 0; i < array.length; ++i) keys[array[i]] = !0;
        return keys;
    }
    function tokenCComment(stream, state) {
        for (var ch, maybeEnd = !1; null != (ch = stream.next()); ) {
            if (maybeEnd && "/" == ch) {
                state.tokenize = null;
                break;
            }
            maybeEnd = "*" == ch;
        }
        return [ "comment", "comment" ];
    }
    CodeMirror.defineMode("css", function(config, parserConfig) {
        function ret(style, tp) {
            return type = tp, style;
        }
        function tokenBase(stream, state) {
            var ch = stream.next();
            if (tokenHooks[ch]) {
                var result = tokenHooks[ch](stream, state);
                if (!1 !== result) return result;
            }
            return "@" == ch ? (stream.eatWhile(/[\w\\\-]/), ret("def", stream.current())) : "=" == ch || ("~" == ch || "|" == ch) && stream.eat("=") ? ret(null, "compare") : '"' == ch || "'" == ch ? (state.tokenize = tokenString(ch), 
            state.tokenize(stream, state)) : "#" == ch ? (stream.eatWhile(/[\w\\\-]/), ret("atom", "hash")) : "!" == ch ? (stream.match(/^\s*\w*/), 
            ret("keyword", "important")) : /\d/.test(ch) || "." == ch && stream.eat(/\d/) ? (stream.eatWhile(/[\w.%]/), 
            ret("number", "unit")) : "-" !== ch ? /[,+>*\/]/.test(ch) ? ret(null, "select-op") : "." == ch && stream.match(/^-?[_a-z][_a-z0-9-]*/i) ? ret("qualifier", "qualifier") : /[:;{}\[\]\(\)]/.test(ch) ? ret(null, ch) : "u" == ch && stream.match(/rl(-prefix)?\(/) || "d" == ch && stream.match("omain(") || "r" == ch && stream.match("egexp(") ? (stream.backUp(1), 
            state.tokenize = tokenParenthesized, ret("property", "word")) : /[\w\\\-]/.test(ch) ? (stream.eatWhile(/[\w\\\-]/), 
            ret("property", "word")) : ret(null, null) : /[\d.]/.test(stream.peek()) ? (stream.eatWhile(/[\w.%]/), 
            ret("number", "unit")) : stream.match(/^-[\w\\\-]+/) ? (stream.eatWhile(/[\w\\\-]/), 
            stream.match(/^\s*:/, !1) ? ret("variable-2", "variable-definition") : ret("variable-2", "variable")) : stream.match(/^\w+-/) ? ret("meta", "meta") : void 0;
        }
        function tokenString(quote) {
            return function(stream, state) {
                for (var ch, escaped = !1; null != (ch = stream.next()); ) {
                    if (ch == quote && !escaped) {
                        ")" == quote && stream.backUp(1);
                        break;
                    }
                    escaped = !escaped && "\\" == ch;
                }
                return (ch == quote || !escaped && ")" != quote) && (state.tokenize = null), ret("string", "string");
            };
        }
        function tokenParenthesized(stream, state) {
            return stream.next(), stream.match(/\s*[\"\')]/, !1) ? state.tokenize = null : state.tokenize = tokenString(")"), 
            ret(null, "(");
        }
        function Context(type, indent, prev) {
            this.type = type, this.indent = indent, this.prev = prev;
        }
        function pushContext(state, stream, type, indent) {
            return state.context = new Context(type, stream.indentation() + (!1 === indent ? 0 : indentUnit), state.context), 
            type;
        }
        function popContext(state) {
            return state.context.prev && (state.context = state.context.prev), state.context.type;
        }
        function pass(type, stream, state) {
            return states[state.context.type](type, stream, state);
        }
        function popAndPass(type, stream, state, n) {
            for (var i = n || 1; i > 0; i--) state.context = state.context.prev;
            return pass(type, stream, state);
        }
        function wordAsValue(stream) {
            var word = stream.current().toLowerCase();
            override = valueKeywords.hasOwnProperty(word) ? "atom" : colorKeywords.hasOwnProperty(word) ? "keyword" : "variable";
        }
        var inline = parserConfig.inline;
        parserConfig.propertyKeywords || (parserConfig = CodeMirror.resolveMode("text/css"));
        var type, override, indentUnit = config.indentUnit, tokenHooks = parserConfig.tokenHooks, documentTypes = parserConfig.documentTypes || {}, mediaTypes = parserConfig.mediaTypes || {}, mediaFeatures = parserConfig.mediaFeatures || {}, mediaValueKeywords = parserConfig.mediaValueKeywords || {}, propertyKeywords = parserConfig.propertyKeywords || {}, nonStandardPropertyKeywords = parserConfig.nonStandardPropertyKeywords || {}, fontProperties = parserConfig.fontProperties || {}, counterDescriptors = parserConfig.counterDescriptors || {}, colorKeywords = parserConfig.colorKeywords || {}, valueKeywords = parserConfig.valueKeywords || {}, allowNested = parserConfig.allowNested, supportsAtComponent = !0 === parserConfig.supportsAtComponent, states = {};
        return states.top = function(type, stream, state) {
            if ("{" == type) return pushContext(state, stream, "block");
            if ("}" == type && state.context.prev) return popContext(state);
            if (supportsAtComponent && /@component/.test(type)) return pushContext(state, stream, "atComponentBlock");
            if (/^@(-moz-)?document$/.test(type)) return pushContext(state, stream, "documentTypes");
            if (/^@(media|supports|(-moz-)?document|import)$/.test(type)) return pushContext(state, stream, "atBlock");
            if (/^@(font-face|counter-style)/.test(type)) return state.stateArg = type, "restricted_atBlock_before";
            if (/^@(-(moz|ms|o|webkit)-)?keyframes$/.test(type)) return "keyframes";
            if (type && "@" == type.charAt(0)) return pushContext(state, stream, "at");
            if ("hash" == type) override = "builtin"; else if ("word" == type) override = "tag"; else {
                if ("variable-definition" == type) return "maybeprop";
                if ("interpolation" == type) return pushContext(state, stream, "interpolation");
                if (":" == type) return "pseudo";
                if (allowNested && "(" == type) return pushContext(state, stream, "parens");
            }
            return state.context.type;
        }, states.block = function(type, stream, state) {
            if ("word" == type) {
                var word = stream.current().toLowerCase();
                return propertyKeywords.hasOwnProperty(word) ? (override = "property", "maybeprop") : nonStandardPropertyKeywords.hasOwnProperty(word) ? (override = "string-2", 
                "maybeprop") : allowNested ? (override = stream.match(/^\s*:(?:\s|$)/, !1) ? "property" : "tag", 
                "block") : (override += " error", "maybeprop");
            }
            return "meta" == type ? "block" : allowNested || "hash" != type && "qualifier" != type ? states.top(type, stream, state) : (override = "error", 
            "block");
        }, states.maybeprop = function(type, stream, state) {
            return ":" == type ? pushContext(state, stream, "prop") : pass(type, stream, state);
        }, states.prop = function(type, stream, state) {
            if (";" == type) return popContext(state);
            if ("{" == type && allowNested) return pushContext(state, stream, "propBlock");
            if ("}" == type || "{" == type) return popAndPass(type, stream, state);
            if ("(" == type) return pushContext(state, stream, "parens");
            if ("hash" != type || /^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(stream.current())) {
                if ("word" == type) wordAsValue(stream); else if ("interpolation" == type) return pushContext(state, stream, "interpolation");
            } else override += " error";
            return "prop";
        }, states.propBlock = function(type, _stream, state) {
            return "}" == type ? popContext(state) : "word" == type ? (override = "property", 
            "maybeprop") : state.context.type;
        }, states.parens = function(type, stream, state) {
            return "{" == type || "}" == type ? popAndPass(type, stream, state) : ")" == type ? popContext(state) : "(" == type ? pushContext(state, stream, "parens") : "interpolation" == type ? pushContext(state, stream, "interpolation") : ("word" == type && wordAsValue(stream), 
            "parens");
        }, states.pseudo = function(type, stream, state) {
            return "word" == type ? (override = "variable-3", state.context.type) : pass(type, stream, state);
        }, states.documentTypes = function(type, stream, state) {
            return "word" == type && documentTypes.hasOwnProperty(stream.current()) ? (override = "tag", 
            state.context.type) : states.atBlock(type, stream, state);
        }, states.atBlock = function(type, stream, state) {
            if ("(" == type) return pushContext(state, stream, "atBlock_parens");
            if ("}" == type || ";" == type) return popAndPass(type, stream, state);
            if ("{" == type) return popContext(state) && pushContext(state, stream, allowNested ? "block" : "top");
            if ("interpolation" == type) return pushContext(state, stream, "interpolation");
            if ("word" == type) {
                var word = stream.current().toLowerCase();
                override = "only" == word || "not" == word || "and" == word || "or" == word ? "keyword" : mediaTypes.hasOwnProperty(word) ? "attribute" : mediaFeatures.hasOwnProperty(word) ? "property" : mediaValueKeywords.hasOwnProperty(word) ? "keyword" : propertyKeywords.hasOwnProperty(word) ? "property" : nonStandardPropertyKeywords.hasOwnProperty(word) ? "string-2" : valueKeywords.hasOwnProperty(word) ? "atom" : colorKeywords.hasOwnProperty(word) ? "keyword" : "error";
            }
            return state.context.type;
        }, states.atComponentBlock = function(type, stream, state) {
            return "}" == type ? popAndPass(type, stream, state) : "{" == type ? popContext(state) && pushContext(state, stream, allowNested ? "block" : "top", !1) : ("word" == type && (override = "error"), 
            state.context.type);
        }, states.atBlock_parens = function(type, stream, state) {
            return ")" == type ? popContext(state) : "{" == type || "}" == type ? popAndPass(type, stream, state, 2) : states.atBlock(type, stream, state);
        }, states.restricted_atBlock_before = function(type, stream, state) {
            return "{" == type ? pushContext(state, stream, "restricted_atBlock") : "word" == type && "@counter-style" == state.stateArg ? (override = "variable", 
            "restricted_atBlock_before") : pass(type, stream, state);
        }, states.restricted_atBlock = function(type, stream, state) {
            return "}" == type ? (state.stateArg = null, popContext(state)) : "word" == type ? (override = "@font-face" == state.stateArg && !fontProperties.hasOwnProperty(stream.current().toLowerCase()) || "@counter-style" == state.stateArg && !counterDescriptors.hasOwnProperty(stream.current().toLowerCase()) ? "error" : "property", 
            "maybeprop") : "restricted_atBlock";
        }, states.keyframes = function(type, stream, state) {
            return "word" == type ? (override = "variable", "keyframes") : "{" == type ? pushContext(state, stream, "top") : pass(type, stream, state);
        }, states.at = function(type, stream, state) {
            return ";" == type ? popContext(state) : "{" == type || "}" == type ? popAndPass(type, stream, state) : ("word" == type ? override = "tag" : "hash" == type && (override = "builtin"), 
            "at");
        }, states.interpolation = function(type, stream, state) {
            return "}" == type ? popContext(state) : "{" == type || ";" == type ? popAndPass(type, stream, state) : ("word" == type ? override = "variable" : "variable" != type && "(" != type && ")" != type && (override = "error"), 
            "interpolation");
        }, {
            startState: function(base) {
                return {
                    tokenize: null,
                    state: inline ? "block" : "top",
                    stateArg: null,
                    context: new Context(inline ? "block" : "top", base || 0, null)
                };
            },
            token: function(stream, state) {
                if (!state.tokenize && stream.eatSpace()) return null;
                var style = (state.tokenize || tokenBase)(stream, state);
                return style && "object" == typeof style && (type = style[1], style = style[0]), 
                override = style, state.state = states[state.state](type, stream, state), override;
            },
            indent: function(state, textAfter) {
                var cx = state.context, ch = textAfter && textAfter.charAt(0), indent = cx.indent;
                return "prop" != cx.type || "}" != ch && ")" != ch || (cx = cx.prev), cx.prev && ("}" != ch || "block" != cx.type && "top" != cx.type && "interpolation" != cx.type && "restricted_atBlock" != cx.type ? (")" != ch || "parens" != cx.type && "atBlock_parens" != cx.type) && ("{" != ch || "at" != cx.type && "atBlock" != cx.type) || (indent = Math.max(0, cx.indent - indentUnit), 
                cx = cx.prev) : indent = (cx = cx.prev).indent), indent;
            },
            electricChars: "}",
            blockCommentStart: "/*",
            blockCommentEnd: "*/",
            fold: "brace"
        };
    });
    var documentTypes_ = [ "domain", "regexp", "url", "url-prefix" ], documentTypes = keySet(documentTypes_), mediaTypes_ = [ "all", "aural", "braille", "handheld", "print", "projection", "screen", "tty", "tv", "embossed" ], mediaTypes = keySet(mediaTypes_), mediaFeatures_ = [ "width", "min-width", "max-width", "height", "min-height", "max-height", "device-width", "min-device-width", "max-device-width", "device-height", "min-device-height", "max-device-height", "aspect-ratio", "min-aspect-ratio", "max-aspect-ratio", "device-aspect-ratio", "min-device-aspect-ratio", "max-device-aspect-ratio", "color", "min-color", "max-color", "color-index", "min-color-index", "max-color-index", "monochrome", "min-monochrome", "max-monochrome", "resolution", "min-resolution", "max-resolution", "scan", "grid", "orientation", "device-pixel-ratio", "min-device-pixel-ratio", "max-device-pixel-ratio", "pointer", "any-pointer", "hover", "any-hover" ], mediaFeatures = keySet(mediaFeatures_), mediaValueKeywords_ = [ "landscape", "portrait", "none", "coarse", "fine", "on-demand", "hover", "interlace", "progressive" ], mediaValueKeywords = keySet(mediaValueKeywords_), propertyKeywords_ = [ "align-content", "align-items", "align-self", "alignment-adjust", "alignment-baseline", "anchor-point", "animation", "animation-delay", "animation-direction", "animation-duration", "animation-fill-mode", "animation-iteration-count", "animation-name", "animation-play-state", "animation-timing-function", "appearance", "azimuth", "backface-visibility", "background", "background-attachment", "background-blend-mode", "background-clip", "background-color", "background-image", "background-origin", "background-position", "background-repeat", "background-size", "baseline-shift", "binding", "bleed", "bookmark-label", "bookmark-level", "bookmark-state", "bookmark-target", "border", "border-bottom", "border-bottom-color", "border-bottom-left-radius", "border-bottom-right-radius", "border-bottom-style", "border-bottom-width", "border-collapse", "border-color", "border-image", "border-image-outset", "border-image-repeat", "border-image-slice", "border-image-source", "border-image-width", "border-left", "border-left-color", "border-left-style", "border-left-width", "border-radius", "border-right", "border-right-color", "border-right-style", "border-right-width", "border-spacing", "border-style", "border-top", "border-top-color", "border-top-left-radius", "border-top-right-radius", "border-top-style", "border-top-width", "border-width", "bottom", "box-decoration-break", "box-shadow", "box-sizing", "break-after", "break-before", "break-inside", "caption-side", "clear", "clip", "color", "color-profile", "column-count", "column-fill", "column-gap", "column-rule", "column-rule-color", "column-rule-style", "column-rule-width", "column-span", "column-width", "columns", "content", "counter-increment", "counter-reset", "crop", "cue", "cue-after", "cue-before", "cursor", "direction", "display", "dominant-baseline", "drop-initial-after-adjust", "drop-initial-after-align", "drop-initial-before-adjust", "drop-initial-before-align", "drop-initial-size", "drop-initial-value", "elevation", "empty-cells", "fit", "fit-position", "flex", "flex-basis", "flex-direction", "flex-flow", "flex-grow", "flex-shrink", "flex-wrap", "float", "float-offset", "flow-from", "flow-into", "font", "font-feature-settings", "font-family", "font-kerning", "font-language-override", "font-size", "font-size-adjust", "font-stretch", "font-style", "font-synthesis", "font-variant", "font-variant-alternates", "font-variant-caps", "font-variant-east-asian", "font-variant-ligatures", "font-variant-numeric", "font-variant-position", "font-weight", "grid", "grid-area", "grid-auto-columns", "grid-auto-flow", "grid-auto-rows", "grid-column", "grid-column-end", "grid-column-gap", "grid-column-start", "grid-gap", "grid-row", "grid-row-end", "grid-row-gap", "grid-row-start", "grid-template", "grid-template-areas", "grid-template-columns", "grid-template-rows", "hanging-punctuation", "height", "hyphens", "icon", "image-orientation", "image-rendering", "image-resolution", "inline-box-align", "justify-content", "left", "letter-spacing", "line-break", "line-height", "line-stacking", "line-stacking-ruby", "line-stacking-shift", "line-stacking-strategy", "list-style", "list-style-image", "list-style-position", "list-style-type", "margin", "margin-bottom", "margin-left", "margin-right", "margin-top", "marker-offset", "marks", "marquee-direction", "marquee-loop", "marquee-play-count", "marquee-speed", "marquee-style", "max-height", "max-width", "min-height", "min-width", "move-to", "nav-down", "nav-index", "nav-left", "nav-right", "nav-up", "object-fit", "object-position", "opacity", "order", "orphans", "outline", "outline-color", "outline-offset", "outline-style", "outline-width", "overflow", "overflow-style", "overflow-wrap", "overflow-x", "overflow-y", "padding", "padding-bottom", "padding-left", "padding-right", "padding-top", "page", "page-break-after", "page-break-before", "page-break-inside", "page-policy", "pause", "pause-after", "pause-before", "perspective", "perspective-origin", "pitch", "pitch-range", "play-during", "position", "presentation-level", "punctuation-trim", "quotes", "region-break-after", "region-break-before", "region-break-inside", "region-fragment", "rendering-intent", "resize", "rest", "rest-after", "rest-before", "richness", "right", "rotation", "rotation-point", "ruby-align", "ruby-overhang", "ruby-position", "ruby-span", "shape-image-threshold", "shape-inside", "shape-margin", "shape-outside", "size", "speak", "speak-as", "speak-header", "speak-numeral", "speak-punctuation", "speech-rate", "stress", "string-set", "tab-size", "table-layout", "target", "target-name", "target-new", "target-position", "text-align", "text-align-last", "text-decoration", "text-decoration-color", "text-decoration-line", "text-decoration-skip", "text-decoration-style", "text-emphasis", "text-emphasis-color", "text-emphasis-position", "text-emphasis-style", "text-height", "text-indent", "text-justify", "text-outline", "text-overflow", "text-shadow", "text-size-adjust", "text-space-collapse", "text-transform", "text-underline-position", "text-wrap", "top", "transform", "transform-origin", "transform-style", "transition", "transition-delay", "transition-duration", "transition-property", "transition-timing-function", "unicode-bidi", "vertical-align", "visibility", "voice-balance", "voice-duration", "voice-family", "voice-pitch", "voice-range", "voice-rate", "voice-stress", "voice-volume", "volume", "white-space", "widows", "width", "word-break", "word-spacing", "word-wrap", "z-index", "clip-path", "clip-rule", "mask", "enable-background", "filter", "flood-color", "flood-opacity", "lighting-color", "stop-color", "stop-opacity", "pointer-events", "color-interpolation", "color-interpolation-filters", "color-rendering", "fill", "fill-opacity", "fill-rule", "image-rendering", "marker", "marker-end", "marker-mid", "marker-start", "shape-rendering", "stroke", "stroke-dasharray", "stroke-dashoffset", "stroke-linecap", "stroke-linejoin", "stroke-miterlimit", "stroke-opacity", "stroke-width", "text-rendering", "baseline-shift", "dominant-baseline", "glyph-orientation-horizontal", "glyph-orientation-vertical", "text-anchor", "writing-mode" ], propertyKeywords = keySet(propertyKeywords_), nonStandardPropertyKeywords_ = [ "scrollbar-arrow-color", "scrollbar-base-color", "scrollbar-dark-shadow-color", "scrollbar-face-color", "scrollbar-highlight-color", "scrollbar-shadow-color", "scrollbar-3d-light-color", "scrollbar-track-color", "shape-inside", "searchfield-cancel-button", "searchfield-decoration", "searchfield-results-button", "searchfield-results-decoration", "zoom" ], nonStandardPropertyKeywords = keySet(nonStandardPropertyKeywords_), fontProperties = keySet([ "font-family", "src", "unicode-range", "font-variant", "font-feature-settings", "font-stretch", "font-weight", "font-style" ]), counterDescriptors = keySet([ "additive-symbols", "fallback", "negative", "pad", "prefix", "range", "speak-as", "suffix", "symbols", "system" ]), colorKeywords_ = [ "aliceblue", "antiquewhite", "aqua", "aquamarine", "azure", "beige", "bisque", "black", "blanchedalmond", "blue", "blueviolet", "brown", "burlywood", "cadetblue", "chartreuse", "chocolate", "coral", "cornflowerblue", "cornsilk", "crimson", "cyan", "darkblue", "darkcyan", "darkgoldenrod", "darkgray", "darkgreen", "darkkhaki", "darkmagenta", "darkolivegreen", "darkorange", "darkorchid", "darkred", "darksalmon", "darkseagreen", "darkslateblue", "darkslategray", "darkturquoise", "darkviolet", "deeppink", "deepskyblue", "dimgray", "dodgerblue", "firebrick", "floralwhite", "forestgreen", "fuchsia", "gainsboro", "ghostwhite", "gold", "goldenrod", "gray", "grey", "green", "greenyellow", "honeydew", "hotpink", "indianred", "indigo", "ivory", "khaki", "lavender", "lavenderblush", "lawngreen", "lemonchiffon", "lightblue", "lightcoral", "lightcyan", "lightgoldenrodyellow", "lightgray", "lightgreen", "lightpink", "lightsalmon", "lightseagreen", "lightskyblue", "lightslategray", "lightsteelblue", "lightyellow", "lime", "limegreen", "linen", "magenta", "maroon", "mediumaquamarine", "mediumblue", "mediumorchid", "mediumpurple", "mediumseagreen", "mediumslateblue", "mediumspringgreen", "mediumturquoise", "mediumvioletred", "midnightblue", "mintcream", "mistyrose", "moccasin", "navajowhite", "navy", "oldlace", "olive", "olivedrab", "orange", "orangered", "orchid", "palegoldenrod", "palegreen", "paleturquoise", "palevioletred", "papayawhip", "peachpuff", "peru", "pink", "plum", "powderblue", "purple", "rebeccapurple", "red", "rosybrown", "royalblue", "saddlebrown", "salmon", "sandybrown", "seagreen", "seashell", "sienna", "silver", "skyblue", "slateblue", "slategray", "snow", "springgreen", "steelblue", "tan", "teal", "thistle", "tomato", "turquoise", "violet", "wheat", "white", "whitesmoke", "yellow", "yellowgreen" ], colorKeywords = keySet(colorKeywords_), valueKeywords_ = [ "above", "absolute", "activeborder", "additive", "activecaption", "afar", "after-white-space", "ahead", "alias", "all", "all-scroll", "alphabetic", "alternate", "always", "amharic", "amharic-abegede", "antialiased", "appworkspace", "arabic-indic", "armenian", "asterisks", "attr", "auto", "avoid", "avoid-column", "avoid-page", "avoid-region", "background", "backwards", "baseline", "below", "bidi-override", "binary", "bengali", "blink", "block", "block-axis", "bold", "bolder", "border", "border-box", "both", "bottom", "break", "break-all", "break-word", "bullets", "button", "button-bevel", "buttonface", "buttonhighlight", "buttonshadow", "buttontext", "calc", "cambodian", "capitalize", "caps-lock-indicator", "caption", "captiontext", "caret", "cell", "center", "checkbox", "circle", "cjk-decimal", "cjk-earthly-branch", "cjk-heavenly-stem", "cjk-ideographic", "clear", "clip", "close-quote", "col-resize", "collapse", "color", "color-burn", "color-dodge", "column", "column-reverse", "compact", "condensed", "contain", "content", "content-box", "context-menu", "continuous", "copy", "counter", "counters", "cover", "crop", "cross", "crosshair", "currentcolor", "cursive", "cyclic", "darken", "dashed", "decimal", "decimal-leading-zero", "default", "default-button", "dense", "destination-atop", "destination-in", "destination-out", "destination-over", "devanagari", "difference", "disc", "discard", "disclosure-closed", "disclosure-open", "document", "dot-dash", "dot-dot-dash", "dotted", "double", "down", "e-resize", "ease", "ease-in", "ease-in-out", "ease-out", "element", "ellipse", "ellipsis", "embed", "end", "ethiopic", "ethiopic-abegede", "ethiopic-abegede-am-et", "ethiopic-abegede-gez", "ethiopic-abegede-ti-er", "ethiopic-abegede-ti-et", "ethiopic-halehame-aa-er", "ethiopic-halehame-aa-et", "ethiopic-halehame-am-et", "ethiopic-halehame-gez", "ethiopic-halehame-om-et", "ethiopic-halehame-sid-et", "ethiopic-halehame-so-et", "ethiopic-halehame-ti-er", "ethiopic-halehame-ti-et", "ethiopic-halehame-tig", "ethiopic-numeric", "ew-resize", "exclusion", "expanded", "extends", "extra-condensed", "extra-expanded", "fantasy", "fast", "fill", "fixed", "flat", "flex", "flex-end", "flex-start", "footnotes", "forwards", "from", "geometricPrecision", "georgian", "graytext", "grid", "groove", "gujarati", "gurmukhi", "hand", "hangul", "hangul-consonant", "hard-light", "hebrew", "help", "hidden", "hide", "higher", "highlight", "highlighttext", "hiragana", "hiragana-iroha", "horizontal", "hsl", "hsla", "hue", "icon", "ignore", "inactiveborder", "inactivecaption", "inactivecaptiontext", "infinite", "infobackground", "infotext", "inherit", "initial", "inline", "inline-axis", "inline-block", "inline-flex", "inline-grid", "inline-table", "inset", "inside", "intrinsic", "invert", "italic", "japanese-formal", "japanese-informal", "justify", "kannada", "katakana", "katakana-iroha", "keep-all", "khmer", "korean-hangul-formal", "korean-hanja-formal", "korean-hanja-informal", "landscape", "lao", "large", "larger", "left", "level", "lighter", "lighten", "line-through", "linear", "linear-gradient", "lines", "list-item", "listbox", "listitem", "local", "logical", "loud", "lower", "lower-alpha", "lower-armenian", "lower-greek", "lower-hexadecimal", "lower-latin", "lower-norwegian", "lower-roman", "lowercase", "ltr", "luminosity", "malayalam", "match", "matrix", "matrix3d", "media-controls-background", "media-current-time-display", "media-fullscreen-button", "media-mute-button", "media-play-button", "media-return-to-realtime-button", "media-rewind-button", "media-seek-back-button", "media-seek-forward-button", "media-slider", "media-sliderthumb", "media-time-remaining-display", "media-volume-slider", "media-volume-slider-container", "media-volume-sliderthumb", "medium", "menu", "menulist", "menulist-button", "menulist-text", "menulist-textfield", "menutext", "message-box", "middle", "min-intrinsic", "mix", "mongolian", "monospace", "move", "multiple", "multiply", "myanmar", "n-resize", "narrower", "ne-resize", "nesw-resize", "no-close-quote", "no-drop", "no-open-quote", "no-repeat", "none", "normal", "not-allowed", "nowrap", "ns-resize", "numbers", "numeric", "nw-resize", "nwse-resize", "oblique", "octal", "open-quote", "optimizeLegibility", "optimizeSpeed", "oriya", "oromo", "outset", "outside", "outside-shape", "overlay", "overline", "padding", "padding-box", "painted", "page", "paused", "persian", "perspective", "plus-darker", "plus-lighter", "pointer", "polygon", "portrait", "pre", "pre-line", "pre-wrap", "preserve-3d", "progress", "push-button", "radial-gradient", "radio", "read-only", "read-write", "read-write-plaintext-only", "rectangle", "region", "relative", "repeat", "repeating-linear-gradient", "repeating-radial-gradient", "repeat-x", "repeat-y", "reset", "reverse", "rgb", "rgba", "ridge", "right", "rotate", "rotate3d", "rotateX", "rotateY", "rotateZ", "round", "row", "row-resize", "row-reverse", "rtl", "run-in", "running", "s-resize", "sans-serif", "saturation", "scale", "scale3d", "scaleX", "scaleY", "scaleZ", "screen", "scroll", "scrollbar", "se-resize", "searchfield", "searchfield-cancel-button", "searchfield-decoration", "searchfield-results-button", "searchfield-results-decoration", "semi-condensed", "semi-expanded", "separate", "serif", "show", "sidama", "simp-chinese-formal", "simp-chinese-informal", "single", "skew", "skewX", "skewY", "skip-white-space", "slide", "slider-horizontal", "slider-vertical", "sliderthumb-horizontal", "sliderthumb-vertical", "slow", "small", "small-caps", "small-caption", "smaller", "soft-light", "solid", "somali", "source-atop", "source-in", "source-out", "source-over", "space", "space-around", "space-between", "spell-out", "square", "square-button", "start", "static", "status-bar", "stretch", "stroke", "sub", "subpixel-antialiased", "super", "sw-resize", "symbolic", "symbols", "table", "table-caption", "table-cell", "table-column", "table-column-group", "table-footer-group", "table-header-group", "table-row", "table-row-group", "tamil", "telugu", "text", "text-bottom", "text-top", "textarea", "textfield", "thai", "thick", "thin", "threeddarkshadow", "threedface", "threedhighlight", "threedlightshadow", "threedshadow", "tibetan", "tigre", "tigrinya-er", "tigrinya-er-abegede", "tigrinya-et", "tigrinya-et-abegede", "to", "top", "trad-chinese-formal", "trad-chinese-informal", "translate", "translate3d", "translateX", "translateY", "translateZ", "transparent", "ultra-condensed", "ultra-expanded", "underline", "up", "upper-alpha", "upper-armenian", "upper-greek", "upper-hexadecimal", "upper-latin", "upper-norwegian", "upper-roman", "uppercase", "urdu", "url", "var", "vertical", "vertical-text", "visible", "visibleFill", "visiblePainted", "visibleStroke", "visual", "w-resize", "wait", "wave", "wider", "window", "windowframe", "windowtext", "words", "wrap", "wrap-reverse", "x-large", "x-small", "xor", "xx-large", "xx-small" ], valueKeywords = keySet(valueKeywords_), allWords = documentTypes_.concat(mediaTypes_).concat(mediaFeatures_).concat(mediaValueKeywords_).concat(propertyKeywords_).concat(nonStandardPropertyKeywords_).concat(colorKeywords_).concat(valueKeywords_);
    CodeMirror.registerHelper("hintWords", "css", allWords), CodeMirror.defineMIME("text/css", {
        documentTypes: documentTypes,
        mediaTypes: mediaTypes,
        mediaFeatures: mediaFeatures,
        mediaValueKeywords: mediaValueKeywords,
        propertyKeywords: propertyKeywords,
        nonStandardPropertyKeywords: nonStandardPropertyKeywords,
        fontProperties: fontProperties,
        counterDescriptors: counterDescriptors,
        colorKeywords: colorKeywords,
        valueKeywords: valueKeywords,
        tokenHooks: {
            "/": function(stream, state) {
                return !!stream.eat("*") && (state.tokenize = tokenCComment, tokenCComment(stream, state));
            }
        },
        name: "css"
    }), CodeMirror.defineMIME("text/x-scss", {
        mediaTypes: mediaTypes,
        mediaFeatures: mediaFeatures,
        mediaValueKeywords: mediaValueKeywords,
        propertyKeywords: propertyKeywords,
        nonStandardPropertyKeywords: nonStandardPropertyKeywords,
        colorKeywords: colorKeywords,
        valueKeywords: valueKeywords,
        fontProperties: fontProperties,
        allowNested: !0,
        tokenHooks: {
            "/": function(stream, state) {
                return stream.eat("/") ? (stream.skipToEnd(), [ "comment", "comment" ]) : stream.eat("*") ? (state.tokenize = tokenCComment, 
                tokenCComment(stream, state)) : [ "operator", "operator" ];
            },
            ":": function(stream) {
                return !!stream.match(/\s*\{/) && [ null, "{" ];
            },
            $: function(stream) {
                return stream.match(/^[\w-]+/), stream.match(/^\s*:/, !1) ? [ "variable-2", "variable-definition" ] : [ "variable-2", "variable" ];
            },
            "#": function(stream) {
                return !!stream.eat("{") && [ null, "interpolation" ];
            }
        },
        name: "css",
        helperType: "scss"
    }), CodeMirror.defineMIME("text/x-less", {
        mediaTypes: mediaTypes,
        mediaFeatures: mediaFeatures,
        mediaValueKeywords: mediaValueKeywords,
        propertyKeywords: propertyKeywords,
        nonStandardPropertyKeywords: nonStandardPropertyKeywords,
        colorKeywords: colorKeywords,
        valueKeywords: valueKeywords,
        fontProperties: fontProperties,
        allowNested: !0,
        tokenHooks: {
            "/": function(stream, state) {
                return stream.eat("/") ? (stream.skipToEnd(), [ "comment", "comment" ]) : stream.eat("*") ? (state.tokenize = tokenCComment, 
                tokenCComment(stream, state)) : [ "operator", "operator" ];
            },
            "@": function(stream) {
                return stream.eat("{") ? [ null, "interpolation" ] : !stream.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/, !1) && (stream.eatWhile(/[\w\\\-]/), 
                stream.match(/^\s*:/, !1) ? [ "variable-2", "variable-definition" ] : [ "variable-2", "variable" ]);
            },
            "&": function() {
                return [ "atom", "atom" ];
            }
        },
        name: "css",
        helperType: "less"
    }), CodeMirror.defineMIME("text/x-gss", {
        documentTypes: documentTypes,
        mediaTypes: mediaTypes,
        mediaFeatures: mediaFeatures,
        propertyKeywords: propertyKeywords,
        nonStandardPropertyKeywords: nonStandardPropertyKeywords,
        fontProperties: fontProperties,
        counterDescriptors: counterDescriptors,
        colorKeywords: colorKeywords,
        valueKeywords: valueKeywords,
        supportsAtComponent: !0,
        tokenHooks: {
            "/": function(stream, state) {
                return !!stream.eat("*") && (state.tokenize = tokenCComment, tokenCComment(stream, state));
            }
        },
        name: "css",
        helperType: "gss"
    });
}), function(mod) {
    "object" == typeof exports && "object" == typeof module ? mod(require("../../lib/codemirror")) : "function" == typeof define && define.amd ? define([ "../../lib/codemirror" ], mod) : mod(CodeMirror);
}(function(CodeMirror) {
    "use strict";
    function expressionAllowed(stream, state, backUp) {
        return /^(?:operator|sof|keyword c|case|new|[\[{}\(,;:]|=>)$/.test(state.lastType) || "quasi" == state.lastType && /\{\s*$/.test(stream.string.slice(0, stream.pos - (backUp || 0)));
    }
    CodeMirror.defineMode("javascript", function(config, parserConfig) {
        function readRegexp(stream) {
            for (var next, escaped = !1, inSet = !1; null != (next = stream.next()); ) {
                if (!escaped) {
                    if ("/" == next && !inSet) return;
                    "[" == next ? inSet = !0 : inSet && "]" == next && (inSet = !1);
                }
                escaped = !escaped && "\\" == next;
            }
        }
        function ret(tp, style, cont) {
            return type = tp, content = cont, style;
        }
        function tokenBase(stream, state) {
            var ch = stream.next();
            if ('"' == ch || "'" == ch) return state.tokenize = tokenString(ch), state.tokenize(stream, state);
            if ("." == ch && stream.match(/^\d+(?:[eE][+\-]?\d+)?/)) return ret("number", "number");
            if ("." == ch && stream.match("..")) return ret("spread", "meta");
            if (/[\[\]{}\(\),;\:\.]/.test(ch)) return ret(ch);
            if ("=" == ch && stream.eat(">")) return ret("=>", "operator");
            if ("0" == ch && stream.eat(/x/i)) return stream.eatWhile(/[\da-f]/i), ret("number", "number");
            if ("0" == ch && stream.eat(/o/i)) return stream.eatWhile(/[0-7]/i), ret("number", "number");
            if ("0" == ch && stream.eat(/b/i)) return stream.eatWhile(/[01]/i), ret("number", "number");
            if (/\d/.test(ch)) return stream.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/), ret("number", "number");
            if ("/" == ch) return stream.eat("*") ? (state.tokenize = tokenComment, tokenComment(stream, state)) : stream.eat("/") ? (stream.skipToEnd(), 
            ret("comment", "comment")) : expressionAllowed(stream, state, 1) ? (readRegexp(stream), 
            stream.match(/^\b(([gimyu])(?![gimyu]*\2))+\b/), ret("regexp", "string-2")) : (stream.eatWhile(isOperatorChar), 
            ret("operator", "operator", stream.current()));
            if ("`" == ch) return state.tokenize = tokenQuasi, tokenQuasi(stream, state);
            if ("#" == ch) return stream.skipToEnd(), ret("error", "error");
            if (isOperatorChar.test(ch)) return stream.eatWhile(isOperatorChar), ret("operator", "operator", stream.current());
            if (wordRE.test(ch)) {
                stream.eatWhile(wordRE);
                var word = stream.current(), known = keywords.propertyIsEnumerable(word) && keywords[word];
                return known && "." != state.lastType ? ret(known.type, known.style, word) : ret("variable", "variable", word);
            }
        }
        function tokenString(quote) {
            return function(stream, state) {
                var next, escaped = !1;
                if (jsonldMode && "@" == stream.peek() && stream.match(isJsonldKeyword)) return state.tokenize = tokenBase, 
                ret("jsonld-keyword", "meta");
                for (;null != (next = stream.next()) && (next != quote || escaped); ) escaped = !escaped && "\\" == next;
                return escaped || (state.tokenize = tokenBase), ret("string", "string");
            };
        }
        function tokenComment(stream, state) {
            for (var ch, maybeEnd = !1; ch = stream.next(); ) {
                if ("/" == ch && maybeEnd) {
                    state.tokenize = tokenBase;
                    break;
                }
                maybeEnd = "*" == ch;
            }
            return ret("comment", "comment");
        }
        function tokenQuasi(stream, state) {
            for (var next, escaped = !1; null != (next = stream.next()); ) {
                if (!escaped && ("`" == next || "$" == next && stream.eat("{"))) {
                    state.tokenize = tokenBase;
                    break;
                }
                escaped = !escaped && "\\" == next;
            }
            return ret("quasi", "string-2", stream.current());
        }
        function findFatArrow(stream, state) {
            state.fatArrowAt && (state.fatArrowAt = null);
            var arrow = stream.string.indexOf("=>", stream.start);
            if (!(arrow < 0)) {
                for (var depth = 0, sawSomething = !1, pos = arrow - 1; pos >= 0; --pos) {
                    var ch = stream.string.charAt(pos), bracket = brackets.indexOf(ch);
                    if (bracket >= 0 && bracket < 3) {
                        if (!depth) {
                            ++pos;
                            break;
                        }
                        if (0 == --depth) break;
                    } else if (bracket >= 3 && bracket < 6) ++depth; else if (wordRE.test(ch)) sawSomething = !0; else {
                        if (/["'\/]/.test(ch)) return;
                        if (sawSomething && !depth) {
                            ++pos;
                            break;
                        }
                    }
                }
                sawSomething && !depth && (state.fatArrowAt = pos);
            }
        }
        function JSLexical(indented, column, type, align, prev, info) {
            this.indented = indented, this.column = column, this.type = type, this.prev = prev, 
            this.info = info, null != align && (this.align = align);
        }
        function inScope(state, varname) {
            for (v = state.localVars; v; v = v.next) if (v.name == varname) return !0;
            for (var cx = state.context; cx; cx = cx.prev) for (var v = cx.vars; v; v = v.next) if (v.name == varname) return !0;
        }
        function parseJS(state, style, type, content, stream) {
            var cc = state.cc;
            for (cx.state = state, cx.stream = stream, cx.marked = null, cx.cc = cc, cx.style = style, 
            state.lexical.hasOwnProperty("align") || (state.lexical.align = !0); ;) if ((cc.length ? cc.pop() : jsonMode ? expression : statement)(type, content)) {
                for (;cc.length && cc[cc.length - 1].lex; ) cc.pop()();
                return cx.marked ? cx.marked : "variable" == type && inScope(state, content) ? "variable-2" : style;
            }
        }
        function pass() {
            for (var i = arguments.length - 1; i >= 0; i--) cx.cc.push(arguments[i]);
        }
        function cont() {
            return pass.apply(null, arguments), !0;
        }
        function register(varname) {
            function inList(list) {
                for (var v = list; v; v = v.next) if (v.name == varname) return !0;
                return !1;
            }
            var state = cx.state;
            if (cx.marked = "def", state.context) {
                if (inList(state.localVars)) return;
                state.localVars = {
                    name: varname,
                    next: state.localVars
                };
            } else {
                if (inList(state.globalVars)) return;
                parserConfig.globalVars && (state.globalVars = {
                    name: varname,
                    next: state.globalVars
                });
            }
        }
        function pushcontext() {
            cx.state.context = {
                prev: cx.state.context,
                vars: cx.state.localVars
            }, cx.state.localVars = defaultVars;
        }
        function popcontext() {
            cx.state.localVars = cx.state.context.vars, cx.state.context = cx.state.context.prev;
        }
        function pushlex(type, info) {
            var result = function() {
                var state = cx.state, indent = state.indented;
                if ("stat" == state.lexical.type) indent = state.lexical.indented; else for (var outer = state.lexical; outer && ")" == outer.type && outer.align; outer = outer.prev) indent = outer.indented;
                state.lexical = new JSLexical(indent, cx.stream.column(), type, null, state.lexical, info);
            };
            return result.lex = !0, result;
        }
        function poplex() {
            var state = cx.state;
            state.lexical.prev && (")" == state.lexical.type && (state.indented = state.lexical.indented), 
            state.lexical = state.lexical.prev);
        }
        function expect(wanted) {
            function exp(type) {
                return type == wanted ? cont() : ";" == wanted ? pass() : cont(exp);
            }
            return exp;
        }
        function statement(type, value) {
            return "var" == type ? cont(pushlex("vardef", value.length), vardef, expect(";"), poplex) : "keyword a" == type ? cont(pushlex("form"), expression, statement, poplex) : "keyword b" == type ? cont(pushlex("form"), statement, poplex) : "{" == type ? cont(pushlex("}"), block, poplex) : ";" == type ? cont() : "if" == type ? ("else" == cx.state.lexical.info && cx.state.cc[cx.state.cc.length - 1] == poplex && cx.state.cc.pop()(), 
            cont(pushlex("form"), expression, statement, poplex, maybeelse)) : "function" == type ? cont(functiondef) : "for" == type ? cont(pushlex("form"), forspec, statement, poplex) : "variable" == type ? cont(pushlex("stat"), maybelabel) : "switch" == type ? cont(pushlex("form"), expression, pushlex("}", "switch"), expect("{"), block, poplex, poplex) : "case" == type ? cont(expression, expect(":")) : "default" == type ? cont(expect(":")) : "catch" == type ? cont(pushlex("form"), pushcontext, expect("("), funarg, expect(")"), statement, poplex, popcontext) : "class" == type ? cont(pushlex("form"), className, poplex) : "export" == type ? cont(pushlex("stat"), afterExport, poplex) : "import" == type ? cont(pushlex("stat"), afterImport, poplex) : "module" == type ? cont(pushlex("form"), pattern, pushlex("}"), expect("{"), block, poplex, poplex) : "async" == type ? cont(statement) : pass(pushlex("stat"), expression, expect(";"), poplex);
        }
        function expression(type) {
            return expressionInner(type, !1);
        }
        function expressionNoComma(type) {
            return expressionInner(type, !0);
        }
        function expressionInner(type, noComma) {
            if (cx.state.fatArrowAt == cx.stream.start) {
                var body = noComma ? arrowBodyNoComma : arrowBody;
                if ("(" == type) return cont(pushcontext, pushlex(")"), commasep(pattern, ")"), poplex, expect("=>"), body, popcontext);
                if ("variable" == type) return pass(pushcontext, pattern, expect("=>"), body, popcontext);
            }
            var maybeop = noComma ? maybeoperatorNoComma : maybeoperatorComma;
            return atomicTypes.hasOwnProperty(type) ? cont(maybeop) : "function" == type ? cont(functiondef, maybeop) : "keyword c" == type ? cont(noComma ? maybeexpressionNoComma : maybeexpression) : "(" == type ? cont(pushlex(")"), maybeexpression, comprehension, expect(")"), poplex, maybeop) : "operator" == type || "spread" == type ? cont(noComma ? expressionNoComma : expression) : "[" == type ? cont(pushlex("]"), arrayLiteral, poplex, maybeop) : "{" == type ? contCommasep(objprop, "}", null, maybeop) : "quasi" == type ? pass(quasi, maybeop) : "new" == type ? cont(maybeTarget(noComma)) : cont();
        }
        function maybeexpression(type) {
            return type.match(/[;\}\)\],]/) ? pass() : pass(expression);
        }
        function maybeexpressionNoComma(type) {
            return type.match(/[;\}\)\],]/) ? pass() : pass(expressionNoComma);
        }
        function maybeoperatorComma(type, value) {
            return "," == type ? cont(expression) : maybeoperatorNoComma(type, value, !1);
        }
        function maybeoperatorNoComma(type, value, noComma) {
            var me = 0 == noComma ? maybeoperatorComma : maybeoperatorNoComma, expr = 0 == noComma ? expression : expressionNoComma;
            return "=>" == type ? cont(pushcontext, noComma ? arrowBodyNoComma : arrowBody, popcontext) : "operator" == type ? /\+\+|--/.test(value) ? cont(me) : "?" == value ? cont(expression, expect(":"), expr) : cont(expr) : "quasi" == type ? pass(quasi, me) : ";" != type ? "(" == type ? contCommasep(expressionNoComma, ")", "call", me) : "." == type ? cont(property, me) : "[" == type ? cont(pushlex("]"), maybeexpression, expect("]"), poplex, me) : void 0 : void 0;
        }
        function quasi(type, value) {
            return "quasi" != type ? pass() : "${" != value.slice(value.length - 2) ? cont(quasi) : cont(expression, continueQuasi);
        }
        function continueQuasi(type) {
            if ("}" == type) return cx.marked = "string-2", cx.state.tokenize = tokenQuasi, 
            cont(quasi);
        }
        function arrowBody(type) {
            return findFatArrow(cx.stream, cx.state), pass("{" == type ? statement : expression);
        }
        function arrowBodyNoComma(type) {
            return findFatArrow(cx.stream, cx.state), pass("{" == type ? statement : expressionNoComma);
        }
        function maybeTarget(noComma) {
            return function(type) {
                return "." == type ? cont(noComma ? targetNoComma : target) : pass(noComma ? expressionNoComma : expression);
            };
        }
        function target(_, value) {
            if ("target" == value) return cx.marked = "keyword", cont(maybeoperatorComma);
        }
        function targetNoComma(_, value) {
            if ("target" == value) return cx.marked = "keyword", cont(maybeoperatorNoComma);
        }
        function maybelabel(type) {
            return ":" == type ? cont(poplex, statement) : pass(maybeoperatorComma, expect(";"), poplex);
        }
        function property(type) {
            if ("variable" == type) return cx.marked = "property", cont();
        }
        function objprop(type, value) {
            return "variable" == type || "keyword" == cx.style ? (cx.marked = "property", cont("get" == value || "set" == value ? getterSetter : afterprop)) : "number" == type || "string" == type ? (cx.marked = jsonldMode ? "property" : cx.style + " property", 
            cont(afterprop)) : "jsonld-keyword" == type ? cont(afterprop) : "modifier" == type ? cont(objprop) : "[" == type ? cont(expression, expect("]"), afterprop) : "spread" == type ? cont(expression) : void 0;
        }
        function getterSetter(type) {
            return "variable" != type ? pass(afterprop) : (cx.marked = "property", cont(functiondef));
        }
        function afterprop(type) {
            return ":" == type ? cont(expressionNoComma) : "(" == type ? pass(functiondef) : void 0;
        }
        function commasep(what, end) {
            function proceed(type, value) {
                if ("," == type) {
                    var lex = cx.state.lexical;
                    return "call" == lex.info && (lex.pos = (lex.pos || 0) + 1), cont(what, proceed);
                }
                return type == end || value == end ? cont() : cont(expect(end));
            }
            return function(type, value) {
                return type == end || value == end ? cont() : pass(what, proceed);
            };
        }
        function contCommasep(what, end, info) {
            for (var i = 3; i < arguments.length; i++) cx.cc.push(arguments[i]);
            return cont(pushlex(end, info), commasep(what, end), poplex);
        }
        function block(type) {
            return "}" == type ? cont() : pass(statement, block);
        }
        function maybetype(type) {
            if (isTS && ":" == type) return cont(typeexpr);
        }
        function maybedefault(_, value) {
            if ("=" == value) return cont(expressionNoComma);
        }
        function typeexpr(type) {
            if ("variable" == type) return cx.marked = "variable-3", cont(afterType);
        }
        function afterType(type, value) {
            return "<" == value ? cont(commasep(typeexpr, ">"), afterType) : "[" == type ? cont(expect("]"), afterType) : void 0;
        }
        function vardef() {
            return pass(pattern, maybetype, maybeAssign, vardefCont);
        }
        function pattern(type, value) {
            return "modifier" == type ? cont(pattern) : "variable" == type ? (register(value), 
            cont()) : "spread" == type ? cont(pattern) : "[" == type ? contCommasep(pattern, "]") : "{" == type ? contCommasep(proppattern, "}") : void 0;
        }
        function proppattern(type, value) {
            return "variable" != type || cx.stream.match(/^\s*:/, !1) ? ("variable" == type && (cx.marked = "property"), 
            "spread" == type ? cont(pattern) : "}" == type ? pass() : cont(expect(":"), pattern, maybeAssign)) : (register(value), 
            cont(maybeAssign));
        }
        function maybeAssign(_type, value) {
            if ("=" == value) return cont(expressionNoComma);
        }
        function vardefCont(type) {
            if ("," == type) return cont(vardef);
        }
        function maybeelse(type, value) {
            if ("keyword b" == type && "else" == value) return cont(pushlex("form", "else"), statement, poplex);
        }
        function forspec(type) {
            if ("(" == type) return cont(pushlex(")"), forspec1, expect(")"), poplex);
        }
        function forspec1(type) {
            return "var" == type ? cont(vardef, expect(";"), forspec2) : ";" == type ? cont(forspec2) : "variable" == type ? cont(formaybeinof) : pass(expression, expect(";"), forspec2);
        }
        function formaybeinof(_type, value) {
            return "in" == value || "of" == value ? (cx.marked = "keyword", cont(expression)) : cont(maybeoperatorComma, forspec2);
        }
        function forspec2(type, value) {
            return ";" == type ? cont(forspec3) : "in" == value || "of" == value ? (cx.marked = "keyword", 
            cont(expression)) : pass(expression, expect(";"), forspec3);
        }
        function forspec3(type) {
            ")" != type && cont(expression);
        }
        function functiondef(type, value) {
            return "*" == value ? (cx.marked = "keyword", cont(functiondef)) : "variable" == type ? (register(value), 
            cont(functiondef)) : "(" == type ? cont(pushcontext, pushlex(")"), commasep(funarg, ")"), poplex, maybetype, statement, popcontext) : void 0;
        }
        function funarg(type) {
            return "spread" == type ? cont(funarg) : pass(pattern, maybetype, maybedefault);
        }
        function className(type, value) {
            if ("variable" == type) return register(value), cont(classNameAfter);
        }
        function classNameAfter(type, value) {
            return "extends" == value ? cont(expression, classNameAfter) : "{" == type ? cont(pushlex("}"), classBody, poplex) : void 0;
        }
        function classBody(type, value) {
            return "variable" == type || "keyword" == cx.style ? "static" == value ? (cx.marked = "keyword", 
            cont(classBody)) : (cx.marked = "property", "get" == value || "set" == value ? cont(classGetterSetter, functiondef, classBody) : cont(functiondef, classBody)) : "*" == value ? (cx.marked = "keyword", 
            cont(classBody)) : ";" == type ? cont(classBody) : "}" == type ? cont() : void 0;
        }
        function classGetterSetter(type) {
            return "variable" != type ? pass() : (cx.marked = "property", cont());
        }
        function afterExport(_type, value) {
            return "*" == value ? (cx.marked = "keyword", cont(maybeFrom, expect(";"))) : "default" == value ? (cx.marked = "keyword", 
            cont(expression, expect(";"))) : pass(statement);
        }
        function afterImport(type) {
            return "string" == type ? cont() : pass(importSpec, maybeFrom);
        }
        function importSpec(type, value) {
            return "{" == type ? contCommasep(importSpec, "}") : ("variable" == type && register(value), 
            "*" == value && (cx.marked = "keyword"), cont(maybeAs));
        }
        function maybeAs(_type, value) {
            if ("as" == value) return cx.marked = "keyword", cont(importSpec);
        }
        function maybeFrom(_type, value) {
            if ("from" == value) return cx.marked = "keyword", cont(expression);
        }
        function arrayLiteral(type) {
            return "]" == type ? cont() : pass(expressionNoComma, maybeArrayComprehension);
        }
        function maybeArrayComprehension(type) {
            return "for" == type ? pass(comprehension, expect("]")) : "," == type ? cont(commasep(maybeexpressionNoComma, "]")) : pass(commasep(expressionNoComma, "]"));
        }
        function comprehension(type) {
            return "for" == type ? cont(forspec, comprehension) : "if" == type ? cont(expression, comprehension) : void 0;
        }
        function isContinuedStatement(state, textAfter) {
            return "operator" == state.lastType || "," == state.lastType || isOperatorChar.test(textAfter.charAt(0)) || /[,.]/.test(textAfter.charAt(0));
        }
        var type, content, indentUnit = config.indentUnit, statementIndent = parserConfig.statementIndent, jsonldMode = parserConfig.jsonld, jsonMode = parserConfig.json || jsonldMode, isTS = parserConfig.typescript, wordRE = parserConfig.wordCharacters || /[\w$\xa1-\uffff]/, keywords = function() {
            function kw(type) {
                return {
                    type: type,
                    style: "keyword"
                };
            }
            var A = kw("keyword a"), B = kw("keyword b"), C = kw("keyword c"), operator = kw("operator"), atom = {
                type: "atom",
                style: "atom"
            }, jsKeywords = {
                if: kw("if"),
                while: A,
                with: A,
                else: B,
                do: B,
                try: B,
                finally: B,
                return: C,
                break: C,
                continue: C,
                new: kw("new"),
                delete: C,
                throw: C,
                debugger: C,
                var: kw("var"),
                const: kw("var"),
                let: kw("var"),
                function: kw("function"),
                catch: kw("catch"),
                for: kw("for"),
                switch: kw("switch"),
                case: kw("case"),
                default: kw("default"),
                in: operator,
                typeof: operator,
                instanceof: operator,
                true: atom,
                false: atom,
                null: atom,
                undefined: atom,
                NaN: atom,
                Infinity: atom,
                this: kw("this"),
                class: kw("class"),
                super: kw("atom"),
                yield: C,
                export: kw("export"),
                import: kw("import"),
                extends: C,
                await: C,
                async: kw("async")
            };
            if (isTS) {
                var type = {
                    type: "variable",
                    style: "variable-3"
                }, tsKeywords = {
                    interface: kw("class"),
                    implements: C,
                    namespace: C,
                    module: kw("module"),
                    enum: kw("module"),
                    public: kw("modifier"),
                    private: kw("modifier"),
                    protected: kw("modifier"),
                    abstract: kw("modifier"),
                    as: operator,
                    string: type,
                    number: type,
                    boolean: type,
                    any: type
                };
                for (var attr in tsKeywords) jsKeywords[attr] = tsKeywords[attr];
            }
            return jsKeywords;
        }(), isOperatorChar = /[+\-*&%=<>!?|~^]/, isJsonldKeyword = /^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/, brackets = "([{}])", atomicTypes = {
            atom: !0,
            number: !0,
            variable: !0,
            string: !0,
            regexp: !0,
            this: !0,
            "jsonld-keyword": !0
        }, cx = {
            state: null,
            column: null,
            marked: null,
            cc: null
        }, defaultVars = {
            name: "this",
            next: {
                name: "arguments"
            }
        };
        return poplex.lex = !0, {
            startState: function(basecolumn) {
                var state = {
                    tokenize: tokenBase,
                    lastType: "sof",
                    cc: [],
                    lexical: new JSLexical((basecolumn || 0) - indentUnit, 0, "block", !1),
                    localVars: parserConfig.localVars,
                    context: parserConfig.localVars && {
                        vars: parserConfig.localVars
                    },
                    indented: basecolumn || 0
                };
                return parserConfig.globalVars && "object" == typeof parserConfig.globalVars && (state.globalVars = parserConfig.globalVars), 
                state;
            },
            token: function(stream, state) {
                if (stream.sol() && (state.lexical.hasOwnProperty("align") || (state.lexical.align = !1), 
                state.indented = stream.indentation(), findFatArrow(stream, state)), state.tokenize != tokenComment && stream.eatSpace()) return null;
                var style = state.tokenize(stream, state);
                return "comment" == type ? style : (state.lastType = "operator" != type || "++" != content && "--" != content ? type : "incdec", 
                parseJS(state, style, type, content, stream));
            },
            indent: function(state, textAfter) {
                if (state.tokenize == tokenComment) return CodeMirror.Pass;
                if (state.tokenize != tokenBase) return 0;
                var firstChar = textAfter && textAfter.charAt(0), lexical = state.lexical;
                if (!/^\s*else\b/.test(textAfter)) for (var i = state.cc.length - 1; i >= 0; --i) {
                    var c = state.cc[i];
                    if (c == poplex) lexical = lexical.prev; else if (c != maybeelse) break;
                }
                "stat" == lexical.type && "}" == firstChar && (lexical = lexical.prev), statementIndent && ")" == lexical.type && "stat" == lexical.prev.type && (lexical = lexical.prev);
                var type = lexical.type, closing = firstChar == type;
                return "vardef" == type ? lexical.indented + ("operator" == state.lastType || "," == state.lastType ? lexical.info + 1 : 0) : "form" == type && "{" == firstChar ? lexical.indented : "form" == type ? lexical.indented + indentUnit : "stat" == type ? lexical.indented + (isContinuedStatement(state, textAfter) ? statementIndent || indentUnit : 0) : "switch" != lexical.info || closing || 0 == parserConfig.doubleIndentSwitch ? lexical.align ? lexical.column + (closing ? 0 : 1) : lexical.indented + (closing ? 0 : indentUnit) : lexical.indented + (/^(?:case|default)\b/.test(textAfter) ? indentUnit : 2 * indentUnit);
            },
            electricInput: /^\s*(?:case .*?:|default:|\{|\})$/,
            blockCommentStart: jsonMode ? null : "/*",
            blockCommentEnd: jsonMode ? null : "*/",
            lineComment: jsonMode ? null : "//",
            fold: "brace",
            closeBrackets: "()[]{}''\"\"``",
            helperType: jsonMode ? "json" : "javascript",
            jsonldMode: jsonldMode,
            jsonMode: jsonMode,
            expressionAllowed: expressionAllowed,
            skipExpression: function(state) {
                var top = state.cc[state.cc.length - 1];
                top != expression && top != expressionNoComma || state.cc.pop();
            }
        };
    }), CodeMirror.registerHelper("wordChars", "javascript", /[\w$]/), CodeMirror.defineMIME("text/javascript", "javascript"), 
    CodeMirror.defineMIME("text/ecmascript", "javascript"), CodeMirror.defineMIME("application/javascript", "javascript"), 
    CodeMirror.defineMIME("application/x-javascript", "javascript"), CodeMirror.defineMIME("application/ecmascript", "javascript"), 
    CodeMirror.defineMIME("application/json", {
        name: "javascript",
        json: !0
    }), CodeMirror.defineMIME("application/x-json", {
        name: "javascript",
        json: !0
    }), CodeMirror.defineMIME("application/ld+json", {
        name: "javascript",
        jsonld: !0
    }), CodeMirror.defineMIME("text/typescript", {
        name: "javascript",
        typescript: !0
    }), CodeMirror.defineMIME("application/typescript", {
        name: "javascript",
        typescript: !0
    });
}), function(mod) {
    "object" == typeof exports && "object" == typeof module ? mod(require("../../lib/codemirror"), require("../xml/xml"), require("../javascript/javascript"), require("../css/css")) : "function" == typeof define && define.amd ? define([ "../../lib/codemirror", "../xml/xml", "../javascript/javascript", "../css/css" ], mod) : mod(CodeMirror);
}(function(CodeMirror) {
    "use strict";
    function maybeBackup(stream, pat, style) {
        var cur = stream.current(), close = cur.search(pat);
        return close > -1 ? stream.backUp(cur.length - close) : cur.match(/<\/?$/) && (stream.backUp(cur.length), 
        stream.match(pat, !1) || stream.match(cur)), style;
    }
    function getAttrRegexp(attr) {
        var regexp = attrRegexpCache[attr];
        return regexp || (attrRegexpCache[attr] = new RegExp("\\s+" + attr + "\\s*=\\s*('|\")?([^'\"]+)('|\")?\\s*"));
    }
    function getAttrValue(text, attr) {
        var match = text.match(getAttrRegexp(attr));
        return match ? match[2] : "";
    }
    function getTagRegexp(tagName, anchored) {
        return new RegExp((anchored ? "^" : "") + "</s*" + tagName + "s*>", "i");
    }
    function addTags(from, to) {
        for (var tag in from) for (var dest = to[tag] || (to[tag] = []), source = from[tag], i = source.length - 1; i >= 0; i--) dest.unshift(source[i]);
    }
    function findMatchingMode(tagInfo, tagText) {
        for (var i = 0; i < tagInfo.length; i++) {
            var spec = tagInfo[i];
            if (!spec[0] || spec[1].test(getAttrValue(tagText, spec[0]))) return spec[2];
        }
    }
    var defaultTags = {
        script: [ [ "lang", /(javascript|babel)/i, "javascript" ], [ "type", /^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^$/i, "javascript" ], [ "type", /./, "text/plain" ], [ null, null, "javascript" ] ],
        style: [ [ "lang", /^css$/i, "css" ], [ "type", /^(text\/)?(x-)?(stylesheet|css)$/i, "css" ], [ "type", /./, "text/plain" ], [ null, null, "css" ] ]
    }, attrRegexpCache = {};
    CodeMirror.defineMode("htmlmixed", function(config, parserConfig) {
        function html(stream, state) {
            var tagName, style = htmlMode.token(stream, state.htmlState), tag = /\btag\b/.test(style);
            if (tag && !/[<>\s\/]/.test(stream.current()) && (tagName = state.htmlState.tagName && state.htmlState.tagName.toLowerCase()) && tags.hasOwnProperty(tagName)) state.inTag = tagName + " "; else if (state.inTag && tag && />$/.test(stream.current())) {
                var inTag = /^([\S]+) (.*)/.exec(state.inTag);
                state.inTag = null;
                var modeSpec = ">" == stream.current() && findMatchingMode(tags[inTag[1]], inTag[2]), mode = CodeMirror.getMode(config, modeSpec), endTagA = getTagRegexp(inTag[1], !0), endTag = getTagRegexp(inTag[1], !1);
                state.token = function(stream, state) {
                    return stream.match(endTagA, !1) ? (state.token = html, state.localState = state.localMode = null, 
                    null) : maybeBackup(stream, endTag, state.localMode.token(stream, state.localState));
                }, state.localMode = mode, state.localState = CodeMirror.startState(mode, htmlMode.indent(state.htmlState, ""));
            } else state.inTag && (state.inTag += stream.current(), stream.eol() && (state.inTag += " "));
            return style;
        }
        var htmlMode = CodeMirror.getMode(config, {
            name: "xml",
            htmlMode: !0,
            multilineTagIndentFactor: parserConfig.multilineTagIndentFactor,
            multilineTagIndentPastTag: parserConfig.multilineTagIndentPastTag
        }), tags = {}, configTags = parserConfig && parserConfig.tags, configScript = parserConfig && parserConfig.scriptTypes;
        if (addTags(defaultTags, tags), configTags && addTags(configTags, tags), configScript) for (var i = configScript.length - 1; i >= 0; i--) tags.script.unshift([ "type", configScript[i].matches, configScript[i].mode ]);
        return {
            startState: function() {
                return {
                    token: html,
                    inTag: null,
                    localMode: null,
                    localState: null,
                    htmlState: CodeMirror.startState(htmlMode)
                };
            },
            copyState: function(state) {
                var local;
                return state.localState && (local = CodeMirror.copyState(state.localMode, state.localState)), 
                {
                    token: state.token,
                    inTag: state.inTag,
                    localMode: state.localMode,
                    localState: local,
                    htmlState: CodeMirror.copyState(htmlMode, state.htmlState)
                };
            },
            token: function(stream, state) {
                return state.token(stream, state);
            },
            indent: function(state, textAfter) {
                return !state.localMode || /^\s*<\//.test(textAfter) ? htmlMode.indent(state.htmlState, textAfter) : state.localMode.indent ? state.localMode.indent(state.localState, textAfter) : CodeMirror.Pass;
            },
            innerMode: function(state) {
                return {
                    state: state.localState || state.htmlState,
                    mode: state.localMode || htmlMode
                };
            }
        };
    }, "xml", "javascript", "css"), CodeMirror.defineMIME("text/html", "htmlmixed");
});

var NODEMAP = [];

!function(mod) {
    "object" == typeof exports && "object" == typeof module ? mod(require("../../lib/codemirror"), require("../xml/xml"), require("../javascript/javascript"), require("../css/css")) : "function" == typeof define && define.amd ? define([ "../../lib/codemirror", "../xml/xml", "../javascript/javascript", "../css/css" ], mod) : mod(CodeMirror);
}(function(CodeMirror) {
    "use strict";
    CodeMirror.defineMode("htmlmixedcounter", function(config, parserConfig) {
        function html(stream, state) {
            var autoSelfClosers = [ "area", "base", "br", "col", "command", "embed", "frame", "hr", "img", "input", "keygen", "link", "meta", "param", "source", "track", "wbr" ], tagName = state.htmlState.tagName, style = htmlMode.token(stream, state.htmlState);
            if (state.htmlState._stack || (state.htmlState._stack = []), "comment" == style || (0 == stream.current().indexOf("<") && 0 != stream.current().indexOf("</") && 0 != stream.current().indexOf("<!") ? (state.htmlState._last = state.htmlState._last + 1, 
            state.htmlState._current = state.htmlState._last, state.htmlState._stack.push(state.htmlState._last), 
            state.htmlState._inClose = !1) : 0 == stream.current().indexOf("</") ? state.htmlState._inClose = !0 : 0 == stream.current().indexOf(">") && (state.htmlState._inClose || autoSelfClosers.indexOf(tagName) > -1) && (state.htmlState._stack.splice(-1, 1), 
            state.htmlState._current = state.htmlState._stack[state.htmlState._stack.length - 1], 
            state.htmlState._inClose = !1)), "script" == tagName && /\btag\b/.test(style) && ">" == stream.current()) {
                var scriptType = stream.string.slice(Math.max(0, stream.pos - 100), stream.pos).match(/\btype\s*=\s*("[^"]+"|'[^']+'|\S+)[^<]*$/i);
                (scriptType = scriptType ? scriptType[1] : "") && /[\"\']/.test(scriptType.charAt(0)) && (scriptType = scriptType.slice(1, scriptType.length - 1));
                for (var i = 0; i < scriptTypes.length; ++i) {
                    var tp = scriptTypes[i];
                    if ("string" == typeof tp.matches ? scriptType == tp.matches : tp.matches.test(scriptType)) {
                        tp.mode && (state.token = script, state.localMode = tp.mode, state.localState = tp.mode.startState && tp.mode.startState(htmlMode.indent(state.htmlState, "")));
                        break;
                    }
                }
            } else "style" == tagName && /\btag\b/.test(style) && ">" == stream.current() && (state.token = css, 
            state.localMode = cssMode, state.localState = cssMode.startState(htmlMode.indent(state.htmlState, "")));
            return state.htmlState._current;
        }
        function maybeBackup(stream, pat, style) {
            var cur = stream.current(), close = cur.search(pat);
            return close > -1 ? stream.backUp(cur.length - close) : cur.match(/<\/?$/) && (stream.backUp(cur.length), 
            stream.match(pat, !1) || stream.match(cur)), style;
        }
        function script(stream, state) {
            return stream.match(/^<\/\s*script\s*>/i, !1) ? (state.token = html, state.localState = state.localMode = null, 
            html(stream, state)) : maybeBackup(stream, /<\/\s*script\s*>/, state.localMode.token(stream, state.localState));
        }
        function css(stream, state) {
            return stream.match(/^<\/\s*style\s*>/i, !1) ? (state.token = html, state.localState = state.localMode = null, 
            html(stream, state)) : maybeBackup(stream, /<\/\s*style\s*>/, cssMode.token(stream, state.localState));
        }
        var htmlMode = CodeMirror.getMode(config, {
            name: "xml",
            htmlMode: !0,
            multilineTagIndentFactor: parserConfig.multilineTagIndentFactor,
            multilineTagIndentPastTag: parserConfig.multilineTagIndentPastTag
        }), cssMode = CodeMirror.getMode(config, "css"), scriptTypes = [], scriptTypesConf = parserConfig && parserConfig.scriptTypes;
        if (scriptTypes.push({
            matches: /^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^$/i,
            mode: CodeMirror.getMode(config, "javascript")
        }), scriptTypesConf) for (var i = 0; i < scriptTypesConf.length; ++i) {
            var conf = scriptTypesConf[i];
            scriptTypes.push({
                matches: conf.matches,
                mode: conf.mode && CodeMirror.getMode(config, conf.mode)
            });
        }
        return scriptTypes.push({
            matches: /./,
            mode: CodeMirror.getMode(config, "text/plain")
        }), {
            startState: function() {
                return {
                    token: html,
                    localMode: null,
                    localState: null,
                    htmlState: htmlMode.startState(),
                    _last: 0,
                    _current: 0,
                    _stack: []
                };
            },
            copyState: function(state) {
                if (state.localState) var local = CodeMirror.copyState(state.localMode, state.localState);
                return {
                    token: state.token,
                    localMode: state.localMode,
                    localState: local,
                    htmlState: CodeMirror.copyState(htmlMode, state.htmlState),
                    _last: state._last,
                    _stack: state._stack,
                    _current: state._current,
                    _inClose: state._inClose
                };
            },
            token: function(stream, state) {
                return state.token(stream, state);
            },
            indent: function(state, textAfter) {
                return !state.localMode || /^\s*<\//.test(textAfter) ? htmlMode.indent(state.htmlState, textAfter) : state.localMode.indent ? state.localMode.indent(state.localState, textAfter) : CodeMirror.Pass;
            },
            innerMode: function(state) {
                var innerState = {
                    state: state.localState || state.htmlState,
                    mode: state.localMode || htmlMode
                };
                return innerState._last = state._last, innerState._stack = state._stack, innerState._current = state._current, 
                innerState;
            }
        };
    }, "xml", "javascript", "css"), CodeMirror.defineMIME("text/html", "htmlmixed");
}), angular.module("ui.bootstrap", [ "ui.bootstrap.tpls", "ui.bootstrap.buttons", "ui.bootstrap.tabs" ]), 
angular.module("ui.bootstrap.tpls", [ "template/tabs/tab.html", "template/tabs/tabset.html" ]), 
angular.module("ui.bootstrap.buttons", []).constant("buttonConfig", {
    activeClass: "active",
    toggleEvent: "click"
}).controller("ButtonsController", [ "buttonConfig", function(buttonConfig) {
    this.activeClass = buttonConfig.activeClass || "active", this.toggleEvent = buttonConfig.toggleEvent || "click";
} ]).directive("btnRadio", function() {
    return {
        require: [ "btnRadio", "ngModel" ],
        controller: "ButtonsController",
        link: function(scope, element, attrs, ctrls) {
            var buttonsCtrl = ctrls[0], ngModelCtrl = ctrls[1];
            ngModelCtrl.$render = function() {
                element.toggleClass(buttonsCtrl.activeClass, angular.equals(ngModelCtrl.$modelValue, scope.$eval(attrs.btnRadio)));
            }, element.bind(buttonsCtrl.toggleEvent, function() {
                var isActive = element.hasClass(buttonsCtrl.activeClass);
                isActive && !angular.isDefined(attrs.uncheckable) || scope.$apply(function() {
                    ngModelCtrl.$setViewValue(isActive ? null : scope.$eval(attrs.btnRadio)), ngModelCtrl.$render();
                });
            });
        }
    };
}).directive("btnCheckbox", function() {
    return {
        require: [ "btnCheckbox", "ngModel" ],
        controller: "ButtonsController",
        link: function(scope, element, attrs, ctrls) {
            function getTrueValue() {
                return getCheckboxValue(attrs.btnCheckboxTrue, !0);
            }
            function getFalseValue() {
                return getCheckboxValue(attrs.btnCheckboxFalse, !1);
            }
            function getCheckboxValue(attributeValue, defaultValue) {
                var val = scope.$eval(attributeValue);
                return angular.isDefined(val) ? val : defaultValue;
            }
            var buttonsCtrl = ctrls[0], ngModelCtrl = ctrls[1];
            ngModelCtrl.$render = function() {
                element.toggleClass(buttonsCtrl.activeClass, angular.equals(ngModelCtrl.$modelValue, getTrueValue()));
            }, element.bind(buttonsCtrl.toggleEvent, function() {
                scope.$apply(function() {
                    ngModelCtrl.$setViewValue(element.hasClass(buttonsCtrl.activeClass) ? getFalseValue() : getTrueValue()), 
                    ngModelCtrl.$render();
                });
            });
        }
    };
}), angular.module("ui.bootstrap.tabs", []).controller("TabsetController", [ "$scope", function($scope) {
    var ctrl = this, tabs = ctrl.tabs = $scope.tabs = [];
    ctrl.select = function(selectedTab) {
        angular.forEach(tabs, function(tab) {
            tab.active && tab !== selectedTab && (tab.active = !1, tab.onDeselect());
        }), selectedTab.active = !0, selectedTab.onSelect();
    }, ctrl.addTab = function(tab) {
        tabs.push(tab), 1 === tabs.length ? tab.active = !0 : tab.active && ctrl.select(tab);
    }, ctrl.removeTab = function(tab) {
        var index = tabs.indexOf(tab);
        if (tab.active && tabs.length > 1 && !destroyed) {
            var newActiveIndex = index == tabs.length - 1 ? index - 1 : index + 1;
            ctrl.select(tabs[newActiveIndex]);
        }
        tabs.splice(index, 1);
    };
    var destroyed;
    $scope.$on("$destroy", function() {
        destroyed = !0;
    });
} ]).directive("tabset", function() {
    return {
        restrict: "EA",
        transclude: !0,
        replace: !0,
        scope: {
            type: "@"
        },
        controller: "TabsetController",
        templateUrl: "template/tabs/tabset.html",
        link: function(scope, element, attrs) {
            scope.vertical = !!angular.isDefined(attrs.vertical) && scope.$parent.$eval(attrs.vertical), 
            scope.justified = !!angular.isDefined(attrs.justified) && scope.$parent.$eval(attrs.justified);
        }
    };
}).directive("tab", [ "$parse", function($parse) {
    return {
        require: "^tabset",
        restrict: "EA",
        replace: !0,
        templateUrl: "template/tabs/tab.html",
        transclude: !0,
        scope: {
            active: "=?",
            heading: "@",
            onSelect: "&select",
            onDeselect: "&deselect"
        },
        controller: function() {},
        compile: function(elm, attrs, transclude) {
            return function(scope, elm, attrs, tabsetCtrl) {
                scope.$watch("active", function(active) {
                    active && tabsetCtrl.select(scope);
                }), scope.disabled = !1, attrs.disabled && scope.$parent.$watch($parse(attrs.disabled), function(value) {
                    scope.disabled = !!value;
                }), scope.select = function() {
                    scope.disabled || (scope.active = !0);
                }, tabsetCtrl.addTab(scope), scope.$on("$destroy", function() {
                    tabsetCtrl.removeTab(scope);
                }), scope.$transcludeFn = transclude;
            };
        }
    };
} ]).directive("tabHeadingTransclude", [ function() {
    return {
        restrict: "A",
        require: "^tab",
        link: function(scope, elm, attrs, tabCtrl) {
            scope.$watch("headingElement", function(heading) {
                heading && (elm.html(""), elm.append(heading));
            });
        }
    };
} ]).directive("tabContentTransclude", function() {
    function isTabHeading(node) {
        return node.tagName && (node.hasAttribute("tab-heading") || node.hasAttribute("data-tab-heading") || "tab-heading" === node.tagName.toLowerCase() || "data-tab-heading" === node.tagName.toLowerCase());
    }
    return {
        restrict: "A",
        require: "^tabset",
        link: function(scope, elm, attrs) {
            var tab = scope.$eval(attrs.tabContentTransclude);
            tab.$transcludeFn(tab.$parent, function(contents) {
                angular.forEach(contents, function(node) {
                    isTabHeading(node) ? tab.headingElement = node : elm.append(node);
                });
            });
        }
    };
}), angular.module("template/tabs/tab.html", []).run([ "$templateCache", function($templateCache) {
    $templateCache.put("template/tabs/tab.html", '<li ng-class="{active: active, disabled: disabled}">\n  <a href ng-click="select()" tab-heading-transclude>{{heading}}</a>\n</li>\n');
} ]), angular.module("template/tabs/tabset.html", []).run([ "$templateCache", function($templateCache) {
    $templateCache.put("template/tabs/tabset.html", '<div>\n  <ul class="nav nav-{{type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane" \n         ng-repeat="tab in tabs" \n         ng-class="{active: tab.active}"\n         tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n');
} ]), function(a, b) {
    "object" == typeof exports && "undefined" != typeof module ? module.exports = b() : "function" == typeof define && define.amd ? define(b) : a.moment = b();
}(this, function() {
    "use strict";
    function a() {
        return Hc.apply(null, arguments);
    }
    function c(a) {
        return "[object Array]" === Object.prototype.toString.call(a);
    }
    function d(a) {
        return a instanceof Date || "[object Date]" === Object.prototype.toString.call(a);
    }
    function e(a, b) {
        var c, d = [];
        for (c = 0; c < a.length; ++c) d.push(b(a[c], c));
        return d;
    }
    function f(a, b) {
        return Object.prototype.hasOwnProperty.call(a, b);
    }
    function g(a, b) {
        for (var c in b) f(b, c) && (a[c] = b[c]);
        return f(b, "toString") && (a.toString = b.toString), f(b, "valueOf") && (a.valueOf = b.valueOf), 
        a;
    }
    function h(a, b, c, d) {
        return Ca(a, b, c, d, !0).utc();
    }
    function i() {
        return {
            empty: !1,
            unusedTokens: [],
            unusedInput: [],
            overflow: -2,
            charsLeftOver: 0,
            nullInput: !1,
            invalidMonth: null,
            invalidFormat: !1,
            userInvalidated: !1,
            iso: !1
        };
    }
    function j(a) {
        return null == a._pf && (a._pf = i()), a._pf;
    }
    function k(a) {
        if (null == a._isValid) {
            var b = j(a);
            a._isValid = !(isNaN(a._d.getTime()) || !(b.overflow < 0) || b.empty || b.invalidMonth || b.invalidWeekday || b.nullInput || b.invalidFormat || b.userInvalidated), 
            a._strict && (a._isValid = a._isValid && 0 === b.charsLeftOver && 0 === b.unusedTokens.length && void 0 === b.bigHour);
        }
        return a._isValid;
    }
    function l(a) {
        var b = h(NaN);
        return null != a ? g(j(b), a) : j(b).userInvalidated = !0, b;
    }
    function m(a, b) {
        var c, d, e;
        if (void 0 !== b._isAMomentObject && (a._isAMomentObject = b._isAMomentObject), 
        void 0 !== b._i && (a._i = b._i), void 0 !== b._f && (a._f = b._f), void 0 !== b._l && (a._l = b._l), 
        void 0 !== b._strict && (a._strict = b._strict), void 0 !== b._tzm && (a._tzm = b._tzm), 
        void 0 !== b._isUTC && (a._isUTC = b._isUTC), void 0 !== b._offset && (a._offset = b._offset), 
        void 0 !== b._pf && (a._pf = j(b)), void 0 !== b._locale && (a._locale = b._locale), 
        Jc.length > 0) for (c in Jc) d = Jc[c], void 0 !== (e = b[d]) && (a[d] = e);
        return a;
    }
    function n(b) {
        m(this, b), this._d = new Date(null != b._d ? b._d.getTime() : NaN), !1 === Kc && (Kc = !0, 
        a.updateOffset(this), Kc = !1);
    }
    function o(a) {
        return a instanceof n || null != a && null != a._isAMomentObject;
    }
    function p(a) {
        return 0 > a ? Math.ceil(a) : Math.floor(a);
    }
    function q(a) {
        var b = +a, c = 0;
        return 0 !== b && isFinite(b) && (c = p(b)), c;
    }
    function r(a, b, c) {
        var d, e = Math.min(a.length, b.length), f = Math.abs(a.length - b.length), g = 0;
        for (d = 0; e > d; d++) (c && a[d] !== b[d] || !c && q(a[d]) !== q(b[d])) && g++;
        return g + f;
    }
    function s() {}
    function t(a) {
        return a ? a.toLowerCase().replace("_", "-") : a;
    }
    function u(a) {
        for (var b, c, d, e, f = 0; f < a.length; ) {
            for (b = (e = t(a[f]).split("-")).length, c = (c = t(a[f + 1])) ? c.split("-") : null; b > 0; ) {
                if (d = v(e.slice(0, b).join("-"))) return d;
                if (c && c.length >= b && r(e, c, !0) >= b - 1) break;
                b--;
            }
            f++;
        }
        return null;
    }
    function v(a) {
        var b = null;
        if (!Lc[a] && "undefined" != typeof module && module && module.exports) try {
            b = Ic._abbr, require("./locale/" + a), w(b);
        } catch (c) {}
        return Lc[a];
    }
    function w(a, b) {
        var c;
        return a && (c = void 0 === b ? y(a) : x(a, b)) && (Ic = c), Ic._abbr;
    }
    function x(a, b) {
        return null !== b ? (b.abbr = a, Lc[a] = Lc[a] || new s(), Lc[a].set(b), w(a), Lc[a]) : (delete Lc[a], 
        null);
    }
    function y(a) {
        var b;
        if (a && a._locale && a._locale._abbr && (a = a._locale._abbr), !a) return Ic;
        if (!c(a)) {
            if (b = v(a)) return b;
            a = [ a ];
        }
        return u(a);
    }
    function z(a, b) {
        var c = a.toLowerCase();
        Mc[c] = Mc[c + "s"] = Mc[b] = a;
    }
    function A(a) {
        return "string" == typeof a ? Mc[a] || Mc[a.toLowerCase()] : void 0;
    }
    function B(a) {
        var b, c, d = {};
        for (c in a) f(a, c) && (b = A(c)) && (d[b] = a[c]);
        return d;
    }
    function C(b, c) {
        return function(d) {
            return null != d ? (E(this, b, d), a.updateOffset(this, c), this) : D(this, b);
        };
    }
    function D(a, b) {
        return a._d["get" + (a._isUTC ? "UTC" : "") + b]();
    }
    function E(a, b, c) {
        return a._d["set" + (a._isUTC ? "UTC" : "") + b](c);
    }
    function F(a, b) {
        var c;
        if ("object" == typeof a) for (c in a) this.set(c, a[c]); else if (a = A(a), "function" == typeof this[a]) return this[a](b);
        return this;
    }
    function G(a, b, c) {
        var d = "" + Math.abs(a), e = b - d.length;
        return (a >= 0 ? c ? "+" : "" : "-") + Math.pow(10, Math.max(0, e)).toString().substr(1) + d;
    }
    function H(a, b, c, d) {
        var e = d;
        "string" == typeof d && (e = function() {
            return this[d]();
        }), a && (Qc[a] = e), b && (Qc[b[0]] = function() {
            return G(e.apply(this, arguments), b[1], b[2]);
        }), c && (Qc[c] = function() {
            return this.localeData().ordinal(e.apply(this, arguments), a);
        });
    }
    function I(a) {
        return a.match(/\[[\s\S]/) ? a.replace(/^\[|\]$/g, "") : a.replace(/\\/g, "");
    }
    function J(a) {
        var b, c, d = a.match(Nc);
        for (b = 0, c = d.length; c > b; b++) Qc[d[b]] ? d[b] = Qc[d[b]] : d[b] = I(d[b]);
        return function(e) {
            var f = "";
            for (b = 0; c > b; b++) f += d[b] instanceof Function ? d[b].call(e, a) : d[b];
            return f;
        };
    }
    function K(a, b) {
        return a.isValid() ? (b = L(b, a.localeData()), Pc[b] = Pc[b] || J(b), Pc[b](a)) : a.localeData().invalidDate();
    }
    function L(a, b) {
        var d = 5;
        for (Oc.lastIndex = 0; d >= 0 && Oc.test(a); ) a = a.replace(Oc, function(a) {
            return b.longDateFormat(a) || a;
        }), Oc.lastIndex = 0, d -= 1;
        return a;
    }
    function M(a) {
        return "function" == typeof a && "[object Function]" === Object.prototype.toString.call(a);
    }
    function N(a, b, c) {
        dd[a] = M(b) ? b : function(a) {
            return a && c ? c : b;
        };
    }
    function O(a, b) {
        return f(dd, a) ? dd[a](b._strict, b._locale) : new RegExp(P(a));
    }
    function P(a) {
        return a.replace("\\", "").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g, function(a, b, c, d, e) {
            return b || c || d || e;
        }).replace(/[-\/\\^$*+?.()|[\]{}]/g, "\\$&");
    }
    function Q(a, b) {
        var c, d = b;
        for ("string" == typeof a && (a = [ a ]), "number" == typeof b && (d = function(a, c) {
            c[b] = q(a);
        }), c = 0; c < a.length; c++) ed[a[c]] = d;
    }
    function R(a, b) {
        Q(a, function(a, c, d, e) {
            d._w = d._w || {}, b(a, d._w, d, e);
        });
    }
    function S(a, b, c) {
        null != b && f(ed, a) && ed[a](b, c._a, c, a);
    }
    function T(a, b) {
        return new Date(Date.UTC(a, b + 1, 0)).getUTCDate();
    }
    function X(a, b) {
        var c;
        return "string" == typeof b && "number" != typeof (b = a.localeData().monthsParse(b)) ? a : (c = Math.min(a.date(), T(a.year(), b)), 
        a._d["set" + (a._isUTC ? "UTC" : "") + "Month"](b, c), a);
    }
    function Y(b) {
        return null != b ? (X(this, b), a.updateOffset(this, !0), this) : D(this, "Month");
    }
    function $(a) {
        var b, c = a._a;
        return c && -2 === j(a).overflow && (b = c[gd] < 0 || c[gd] > 11 ? gd : c[hd] < 1 || c[hd] > T(c[fd], c[gd]) ? hd : c[id] < 0 || c[id] > 24 || 24 === c[id] && (0 !== c[jd] || 0 !== c[kd] || 0 !== c[ld]) ? id : c[jd] < 0 || c[jd] > 59 ? jd : c[kd] < 0 || c[kd] > 59 ? kd : c[ld] < 0 || c[ld] > 999 ? ld : -1, 
        j(a)._overflowDayOfYear && (fd > b || b > hd) && (b = hd), j(a).overflow = b), a;
    }
    function _(b) {
        !1 === a.suppressDeprecationWarnings && "undefined" != typeof console && console.warn && console.warn("Deprecation warning: " + b);
    }
    function aa(a, b) {
        var c = !0;
        return g(function() {
            return c && (_(a + "\n" + new Error().stack), c = !1), b.apply(this, arguments);
        }, b);
    }
    function ba(a, b) {
        od[a] || (_(b), od[a] = !0);
    }
    function ca(a) {
        var b, c, d = a._i, e = pd.exec(d);
        if (e) {
            for (j(a).iso = !0, b = 0, c = qd.length; c > b; b++) if (qd[b][1].exec(d)) {
                a._f = qd[b][0];
                break;
            }
            for (b = 0, c = rd.length; c > b; b++) if (rd[b][1].exec(d)) {
                a._f += (e[6] || " ") + rd[b][0];
                break;
            }
            d.match(ad) && (a._f += "Z"), va(a);
        } else a._isValid = !1;
    }
    function da(b) {
        var c = sd.exec(b._i);
        return null !== c ? void (b._d = new Date(+c[1])) : (ca(b), void (!1 === b._isValid && (delete b._isValid, 
        a.createFromInputFallback(b))));
    }
    function ea(a, b, c, d, e, f, g) {
        var h = new Date(a, b, c, d, e, f, g);
        return 1970 > a && h.setFullYear(a), h;
    }
    function fa(a) {
        var b = new Date(Date.UTC.apply(null, arguments));
        return 1970 > a && b.setUTCFullYear(a), b;
    }
    function ga(a) {
        return ha(a) ? 366 : 365;
    }
    function ha(a) {
        return a % 4 == 0 && a % 100 != 0 || a % 400 == 0;
    }
    function ja(a, b, c) {
        var d, e = c - b, f = c - a.day();
        return f > e && (f -= 7), e - 7 > f && (f += 7), d = Da(a).add(f, "d"), {
            week: Math.ceil(d.dayOfYear() / 7),
            year: d.year()
        };
    }
    function pa(a, b, c, d, e) {
        var f, g = 6 + e - d, i = fa(a, 0, 1 + g).getUTCDay();
        return e > i && (i += 7), c = null != c ? 1 * c : e, f = 1 + g + 7 * (b - 1) - i + c, 
        {
            year: f > 0 ? a : a - 1,
            dayOfYear: f > 0 ? f : ga(a - 1) + f
        };
    }
    function ra(a, b, c) {
        return null != a ? a : null != b ? b : c;
    }
    function sa(a) {
        var b = new Date();
        return a._useUTC ? [ b.getUTCFullYear(), b.getUTCMonth(), b.getUTCDate() ] : [ b.getFullYear(), b.getMonth(), b.getDate() ];
    }
    function ta(a) {
        var b, c, d, e, f = [];
        if (!a._d) {
            for (d = sa(a), a._w && null == a._a[hd] && null == a._a[gd] && ua(a), a._dayOfYear && (e = ra(a._a[fd], d[fd]), 
            a._dayOfYear > ga(e) && (j(a)._overflowDayOfYear = !0), c = fa(e, 0, a._dayOfYear), 
            a._a[gd] = c.getUTCMonth(), a._a[hd] = c.getUTCDate()), b = 0; 3 > b && null == a._a[b]; ++b) a._a[b] = f[b] = d[b];
            for (;7 > b; b++) a._a[b] = f[b] = null == a._a[b] ? 2 === b ? 1 : 0 : a._a[b];
            24 === a._a[id] && 0 === a._a[jd] && 0 === a._a[kd] && 0 === a._a[ld] && (a._nextDay = !0, 
            a._a[id] = 0), a._d = (a._useUTC ? fa : ea).apply(null, f), null != a._tzm && a._d.setUTCMinutes(a._d.getUTCMinutes() - a._tzm), 
            a._nextDay && (a._a[id] = 24);
        }
    }
    function ua(a) {
        var b, c, d, e, f, g, h;
        null != (b = a._w).GG || null != b.W || null != b.E ? (f = 1, g = 4, c = ra(b.GG, a._a[fd], ja(Da(), 1, 4).year), 
        d = ra(b.W, 1), e = ra(b.E, 1)) : (f = a._locale._week.dow, g = a._locale._week.doy, 
        c = ra(b.gg, a._a[fd], ja(Da(), f, g).year), d = ra(b.w, 1), null != b.d ? (e = b.d, 
        f > e && ++d) : e = null != b.e ? b.e + f : f), h = pa(c, d, e, g, f), a._a[fd] = h.year, 
        a._dayOfYear = h.dayOfYear;
    }
    function va(b) {
        if (b._f !== a.ISO_8601) {
            b._a = [], j(b).empty = !0;
            var c, d, e, f, g, h = "" + b._i, i = h.length, k = 0;
            for (e = L(b._f, b._locale).match(Nc) || [], c = 0; c < e.length; c++) f = e[c], 
            (d = (h.match(O(f, b)) || [])[0]) && ((g = h.substr(0, h.indexOf(d))).length > 0 && j(b).unusedInput.push(g), 
            h = h.slice(h.indexOf(d) + d.length), k += d.length), Qc[f] ? (d ? j(b).empty = !1 : j(b).unusedTokens.push(f), 
            S(f, d, b)) : b._strict && !d && j(b).unusedTokens.push(f);
            j(b).charsLeftOver = i - k, h.length > 0 && j(b).unusedInput.push(h), !0 === j(b).bigHour && b._a[id] <= 12 && b._a[id] > 0 && (j(b).bigHour = void 0), 
            b._a[id] = wa(b._locale, b._a[id], b._meridiem), ta(b), $(b);
        } else ca(b);
    }
    function wa(a, b, c) {
        var d;
        return null == c ? b : null != a.meridiemHour ? a.meridiemHour(b, c) : null != a.isPM ? ((d = a.isPM(c)) && 12 > b && (b += 12), 
        d || 12 !== b || (b = 0), b) : b;
    }
    function xa(a) {
        var b, c, d, e, f;
        if (0 === a._f.length) return j(a).invalidFormat = !0, void (a._d = new Date(NaN));
        for (e = 0; e < a._f.length; e++) f = 0, b = m({}, a), null != a._useUTC && (b._useUTC = a._useUTC), 
        b._f = a._f[e], va(b), k(b) && (f += j(b).charsLeftOver, f += 10 * j(b).unusedTokens.length, 
        j(b).score = f, (null == d || d > f) && (d = f, c = b));
        g(a, c || b);
    }
    function ya(a) {
        if (!a._d) {
            var b = B(a._i);
            a._a = [ b.year, b.month, b.day || b.date, b.hour, b.minute, b.second, b.millisecond ], 
            ta(a);
        }
    }
    function za(a) {
        var b = new n($(Aa(a)));
        return b._nextDay && (b.add(1, "d"), b._nextDay = void 0), b;
    }
    function Aa(a) {
        var b = a._i, e = a._f;
        return a._locale = a._locale || y(a._l), null === b || void 0 === e && "" === b ? l({
            nullInput: !0
        }) : ("string" == typeof b && (a._i = b = a._locale.preparse(b)), o(b) ? new n($(b)) : (c(e) ? xa(a) : e ? va(a) : d(b) ? a._d = b : Ba(a), 
        a));
    }
    function Ba(b) {
        var f = b._i;
        void 0 === f ? b._d = new Date() : d(f) ? b._d = new Date(+f) : "string" == typeof f ? da(b) : c(f) ? (b._a = e(f.slice(0), function(a) {
            return parseInt(a, 10);
        }), ta(b)) : "object" == typeof f ? ya(b) : "number" == typeof f ? b._d = new Date(f) : a.createFromInputFallback(b);
    }
    function Ca(a, b, c, d, e) {
        var f = {};
        return "boolean" == typeof c && (d = c, c = void 0), f._isAMomentObject = !0, f._useUTC = f._isUTC = e, 
        f._l = c, f._i = a, f._f = b, f._strict = d, za(f);
    }
    function Da(a, b, c, d) {
        return Ca(a, b, c, d, !1);
    }
    function Ea(a, b) {
        var d, e;
        if (1 === b.length && c(b[0]) && (b = b[0]), !b.length) return Da();
        for (d = b[0], e = 1; e < b.length; ++e) (!b[e].isValid() || b[e][a](d)) && (d = b[e]);
        return d;
    }
    function Ha(a) {
        var b = B(a), c = b.year || 0, d = b.quarter || 0, e = b.month || 0, f = b.week || 0, g = b.day || 0, h = b.hour || 0, i = b.minute || 0, j = b.second || 0, k = b.millisecond || 0;
        this._milliseconds = +k + 1e3 * j + 6e4 * i + 36e5 * h, this._days = +g + 7 * f, 
        this._months = +e + 3 * d + 12 * c, this._data = {}, this._locale = y(), this._bubble();
    }
    function Ia(a) {
        return a instanceof Ha;
    }
    function Ja(a, b) {
        H(a, 0, 0, function() {
            var a = this.utcOffset(), c = "+";
            return 0 > a && (a = -a, c = "-"), c + G(~~(a / 60), 2) + b + G(~~a % 60, 2);
        });
    }
    function Ka(a) {
        var b = (a || "").match(ad) || [], d = ((b[b.length - 1] || []) + "").match(xd) || [ "-", 0, 0 ], e = 60 * d[1] + q(d[2]);
        return "+" === d[0] ? e : -e;
    }
    function La(b, c) {
        var e, f;
        return c._isUTC ? (e = c.clone(), f = (o(b) || d(b) ? +b : +Da(b)) - +e, e._d.setTime(+e._d + f), 
        a.updateOffset(e, !1), e) : Da(b).local();
    }
    function Ma(a) {
        return 15 * -Math.round(a._d.getTimezoneOffset() / 15);
    }
    function Xa() {
        return this._isUTC && 0 === this._offset;
    }
    function Ya(a, b) {
        var c, d, e, g = a, h = null;
        return Ia(a) ? g = {
            ms: a._milliseconds,
            d: a._days,
            M: a._months
        } : "number" == typeof a ? (g = {}, b ? g[b] = a : g.milliseconds = a) : (h = yd.exec(a)) ? (c = "-" === h[1] ? -1 : 1, 
        g = {
            y: 0,
            d: q(h[hd]) * c,
            h: q(h[id]) * c,
            m: q(h[jd]) * c,
            s: q(h[kd]) * c,
            ms: q(h[ld]) * c
        }) : (h = zd.exec(a)) ? (c = "-" === h[1] ? -1 : 1, g = {
            y: Za(h[2], c),
            M: Za(h[3], c),
            d: Za(h[4], c),
            h: Za(h[5], c),
            m: Za(h[6], c),
            s: Za(h[7], c),
            w: Za(h[8], c)
        }) : null == g ? g = {} : "object" == typeof g && ("from" in g || "to" in g) && (e = _a(Da(g.from), Da(g.to)), 
        g = {}, g.ms = e.milliseconds, g.M = e.months), d = new Ha(g), Ia(a) && f(a, "_locale") && (d._locale = a._locale), 
        d;
    }
    function Za(a, b) {
        var c = a && parseFloat(a.replace(",", "."));
        return (isNaN(c) ? 0 : c) * b;
    }
    function $a(a, b) {
        var c = {
            milliseconds: 0,
            months: 0
        };
        return c.months = b.month() - a.month() + 12 * (b.year() - a.year()), a.clone().add(c.months, "M").isAfter(b) && --c.months, 
        c.milliseconds = +b - +a.clone().add(c.months, "M"), c;
    }
    function _a(a, b) {
        var c;
        return b = La(b, a), a.isBefore(b) ? c = $a(a, b) : (c = $a(b, a), c.milliseconds = -c.milliseconds, 
        c.months = -c.months), c;
    }
    function ab(a, b) {
        return function(c, d) {
            var e, f;
            return null === d || isNaN(+d) || (ba(b, "moment()." + b + "(period, number) is deprecated. Please use moment()." + b + "(number, period)."), 
            f = c, c = d, d = f), c = "string" == typeof c ? +c : c, e = Ya(c, d), bb(this, e, a), 
            this;
        };
    }
    function bb(b, c, d, e) {
        var f = c._milliseconds, g = c._days, h = c._months;
        e = null == e || e, f && b._d.setTime(+b._d + f * d), g && E(b, "Date", D(b, "Date") + g * d), 
        h && X(b, D(b, "Month") + h * d), e && a.updateOffset(b, g || h);
    }
    function jb(a, b) {
        var c, d, e = 12 * (b.year() - a.year()) + (b.month() - a.month()), f = a.clone().add(e, "months");
        return 0 > b - f ? (c = a.clone().add(e - 1, "months"), d = (b - f) / (f - c)) : (c = a.clone().add(e + 1, "months"), 
        d = (b - f) / (c - f)), -(e + d);
    }
    function lb() {
        var a = this.clone().utc();
        return 0 < a.year() && a.year() <= 9999 ? "function" == typeof Date.prototype.toISOString ? this.toDate().toISOString() : K(a, "YYYY-MM-DD[T]HH:mm:ss.SSS[Z]") : K(a, "YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]");
    }
    function rb(a) {
        var b;
        return void 0 === a ? this._locale._abbr : (null != (b = y(a)) && (this._locale = b), 
        this);
    }
    function sb() {
        return this._locale;
    }
    function Db(a, b) {
        H(0, [ a, a.length ], 0, b);
    }
    function Eb(a, b, c) {
        return ja(Da([ a, 11, 31 + b - c ]), b, c).week;
    }
    function Kb(a, b) {
        return "string" != typeof a ? a : isNaN(a) ? "number" == typeof (a = b.weekdaysParse(a)) ? a : null : parseInt(a, 10);
    }
    function Sb(a, b) {
        H(a, 0, 0, function() {
            return this.localeData().meridiem(this.hours(), this.minutes(), b);
        });
    }
    function Tb(a, b) {
        return b._meridiemParse;
    }
    function dc(a) {
        return a;
    }
    function hc(a, b, c, d) {
        var e = y(), f = h().set(d, b);
        return e[c](f, a);
    }
    function ic(a, b, c, d, e) {
        if ("number" == typeof a && (b = a, a = void 0), a = a || "", null != b) return hc(a, b, c, e);
        var f, g = [];
        for (f = 0; d > f; f++) g[f] = hc(a, f, c, e);
        return g;
    }
    function pc(a, b, c, d) {
        var e = Ya(b, c);
        return a._milliseconds += d * e._milliseconds, a._days += d * e._days, a._months += d * e._months, 
        a._bubble();
    }
    function sc(a) {
        return 0 > a ? Math.floor(a) : Math.ceil(a);
    }
    function uc(a) {
        return 4800 * a / 146097;
    }
    function vc(a) {
        return 146097 * a / 4800;
    }
    function yc(a) {
        return function() {
            return this.as(a);
        };
    }
    function Ac(a) {
        return function() {
            return this._data[a];
        };
    }
    function Cc(a, b, c, d, e) {
        return e.relativeTime(b || 1, !!c, a, d);
    }
    function Dc(a, b, c) {
        var d = Ya(a).abs(), e = ke(d.as("s")), f = ke(d.as("m")), g = ke(d.as("h")), h = ke(d.as("d")), i = ke(d.as("M")), j = ke(d.as("y")), k = e < le.s && [ "s", e ] || 1 === f && [ "m" ] || f < le.m && [ "mm", f ] || 1 === g && [ "h" ] || g < le.h && [ "hh", g ] || 1 === h && [ "d" ] || h < le.d && [ "dd", h ] || 1 === i && [ "M" ] || i < le.M && [ "MM", i ] || 1 === j && [ "y" ] || [ "yy", j ];
        return k[2] = b, k[3] = +a > 0, k[4] = c, Cc.apply(null, k);
    }
    function Gc() {
        var a, b, c, d = me(this._milliseconds) / 1e3, e = me(this._days), f = me(this._months);
        b = p((a = p(d / 60)) / 60), d %= 60, a %= 60;
        var g = c = p(f / 12), h = f %= 12, i = e, j = b, k = a, l = d, m = this.asSeconds();
        return m ? (0 > m ? "-" : "") + "P" + (g ? g + "Y" : "") + (h ? h + "M" : "") + (i ? i + "D" : "") + (j || k || l ? "T" : "") + (j ? j + "H" : "") + (k ? k + "M" : "") + (l ? l + "S" : "") : "P0D";
    }
    var Hc, Ic, Jc = a.momentProperties = [], Kc = !1, Lc = {}, Mc = {}, Nc = /(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g, Oc = /(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g, Pc = {}, Qc = {}, Rc = /\d/, Sc = /\d\d/, Tc = /\d{3}/, Uc = /\d{4}/, Vc = /[+-]?\d{6}/, Wc = /\d\d?/, Xc = /\d{1,3}/, Yc = /\d{1,4}/, Zc = /[+-]?\d{1,6}/, $c = /\d+/, _c = /[+-]?\d+/, ad = /Z|[+-]\d\d:?\d\d/gi, bd = /[+-]?\d+(\.\d{1,3})?/, cd = /[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i, dd = {}, ed = {}, fd = 0, gd = 1, hd = 2, id = 3, jd = 4, kd = 5, ld = 6;
    H("M", [ "MM", 2 ], "Mo", function() {
        return this.month() + 1;
    }), H("MMM", 0, 0, function(a) {
        return this.localeData().monthsShort(this, a);
    }), H("MMMM", 0, 0, function(a) {
        return this.localeData().months(this, a);
    }), z("month", "M"), N("M", Wc), N("MM", Wc, Sc), N("MMM", cd), N("MMMM", cd), Q([ "M", "MM" ], function(a, b) {
        b[gd] = q(a) - 1;
    }), Q([ "MMM", "MMMM" ], function(a, b, c, d) {
        var e = c._locale.monthsParse(a, d, c._strict);
        null != e ? b[gd] = e : j(c).invalidMonth = a;
    });
    var md = "January_February_March_April_May_June_July_August_September_October_November_December".split("_"), nd = "Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"), od = {};
    a.suppressDeprecationWarnings = !1;
    var pd = /^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/, qd = [ [ "YYYYYY-MM-DD", /[+-]\d{6}-\d{2}-\d{2}/ ], [ "YYYY-MM-DD", /\d{4}-\d{2}-\d{2}/ ], [ "GGGG-[W]WW-E", /\d{4}-W\d{2}-\d/ ], [ "GGGG-[W]WW", /\d{4}-W\d{2}/ ], [ "YYYY-DDD", /\d{4}-\d{3}/ ] ], rd = [ [ "HH:mm:ss.SSSS", /(T| )\d\d:\d\d:\d\d\.\d+/ ], [ "HH:mm:ss", /(T| )\d\d:\d\d:\d\d/ ], [ "HH:mm", /(T| )\d\d:\d\d/ ], [ "HH", /(T| )\d\d/ ] ], sd = /^\/?Date\((\-?\d+)/i;
    a.createFromInputFallback = aa("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.", function(a) {
        a._d = new Date(a._i + (a._useUTC ? " UTC" : ""));
    }), H(0, [ "YY", 2 ], 0, function() {
        return this.year() % 100;
    }), H(0, [ "YYYY", 4 ], 0, "year"), H(0, [ "YYYYY", 5 ], 0, "year"), H(0, [ "YYYYYY", 6, !0 ], 0, "year"), 
    z("year", "y"), N("Y", _c), N("YY", Wc, Sc), N("YYYY", Yc, Uc), N("YYYYY", Zc, Vc), 
    N("YYYYYY", Zc, Vc), Q([ "YYYYY", "YYYYYY" ], fd), Q("YYYY", function(b, c) {
        c[fd] = 2 === b.length ? a.parseTwoDigitYear(b) : q(b);
    }), Q("YY", function(b, c) {
        c[fd] = a.parseTwoDigitYear(b);
    }), a.parseTwoDigitYear = function(a) {
        return q(a) + (q(a) > 68 ? 1900 : 2e3);
    };
    var td = C("FullYear", !1);
    H("w", [ "ww", 2 ], "wo", "week"), H("W", [ "WW", 2 ], "Wo", "isoWeek"), z("week", "w"), 
    z("isoWeek", "W"), N("w", Wc), N("ww", Wc, Sc), N("W", Wc), N("WW", Wc, Sc), R([ "w", "ww", "W", "WW" ], function(a, b, c, d) {
        b[d.substr(0, 1)] = q(a);
    });
    var ud = {
        dow: 0,
        doy: 6
    };
    H("DDD", [ "DDDD", 3 ], "DDDo", "dayOfYear"), z("dayOfYear", "DDD"), N("DDD", Xc), 
    N("DDDD", Tc), Q([ "DDD", "DDDD" ], function(a, b, c) {
        c._dayOfYear = q(a);
    }), a.ISO_8601 = function() {};
    var vd = aa("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548", function() {
        var a = Da.apply(null, arguments);
        return this > a ? this : a;
    }), wd = aa("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548", function() {
        var a = Da.apply(null, arguments);
        return a > this ? this : a;
    });
    Ja("Z", ":"), Ja("ZZ", ""), N("Z", ad), N("ZZ", ad), Q([ "Z", "ZZ" ], function(a, b, c) {
        c._useUTC = !0, c._tzm = Ka(a);
    });
    var xd = /([\+\-]|\d\d)/gi;
    a.updateOffset = function() {};
    var yd = /(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/, zd = /^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;
    Ya.fn = Ha.prototype;
    var Ad = ab(1, "add"), Bd = ab(-1, "subtract");
    a.defaultFormat = "YYYY-MM-DDTHH:mm:ssZ";
    var Cd = aa("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.", function(a) {
        return void 0 === a ? this.localeData() : this.locale(a);
    });
    H(0, [ "gg", 2 ], 0, function() {
        return this.weekYear() % 100;
    }), H(0, [ "GG", 2 ], 0, function() {
        return this.isoWeekYear() % 100;
    }), Db("gggg", "weekYear"), Db("ggggg", "weekYear"), Db("GGGG", "isoWeekYear"), 
    Db("GGGGG", "isoWeekYear"), z("weekYear", "gg"), z("isoWeekYear", "GG"), N("G", _c), 
    N("g", _c), N("GG", Wc, Sc), N("gg", Wc, Sc), N("GGGG", Yc, Uc), N("gggg", Yc, Uc), 
    N("GGGGG", Zc, Vc), N("ggggg", Zc, Vc), R([ "gggg", "ggggg", "GGGG", "GGGGG" ], function(a, b, c, d) {
        b[d.substr(0, 2)] = q(a);
    }), R([ "gg", "GG" ], function(b, c, d, e) {
        c[e] = a.parseTwoDigitYear(b);
    }), H("Q", 0, 0, "quarter"), z("quarter", "Q"), N("Q", Rc), Q("Q", function(a, b) {
        b[gd] = 3 * (q(a) - 1);
    }), H("D", [ "DD", 2 ], "Do", "date"), z("date", "D"), N("D", Wc), N("DD", Wc, Sc), 
    N("Do", function(a, b) {
        return a ? b._ordinalParse : b._ordinalParseLenient;
    }), Q([ "D", "DD" ], hd), Q("Do", function(a, b) {
        b[hd] = q(a.match(Wc)[0], 10);
    });
    var Dd = C("Date", !0);
    H("d", 0, "do", "day"), H("dd", 0, 0, function(a) {
        return this.localeData().weekdaysMin(this, a);
    }), H("ddd", 0, 0, function(a) {
        return this.localeData().weekdaysShort(this, a);
    }), H("dddd", 0, 0, function(a) {
        return this.localeData().weekdays(this, a);
    }), H("e", 0, 0, "weekday"), H("E", 0, 0, "isoWeekday"), z("day", "d"), z("weekday", "e"), 
    z("isoWeekday", "E"), N("d", Wc), N("e", Wc), N("E", Wc), N("dd", cd), N("ddd", cd), 
    N("dddd", cd), R([ "dd", "ddd", "dddd" ], function(a, b, c) {
        var d = c._locale.weekdaysParse(a);
        null != d ? b.d = d : j(c).invalidWeekday = a;
    }), R([ "d", "e", "E" ], function(a, b, c, d) {
        b[d] = q(a);
    });
    var Ed = "Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"), Fd = "Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"), Gd = "Su_Mo_Tu_We_Th_Fr_Sa".split("_");
    H("H", [ "HH", 2 ], 0, "hour"), H("h", [ "hh", 2 ], 0, function() {
        return this.hours() % 12 || 12;
    }), Sb("a", !0), Sb("A", !1), z("hour", "h"), N("a", Tb), N("A", Tb), N("H", Wc), 
    N("h", Wc), N("HH", Wc, Sc), N("hh", Wc, Sc), Q([ "H", "HH" ], id), Q([ "a", "A" ], function(a, b, c) {
        c._isPm = c._locale.isPM(a), c._meridiem = a;
    }), Q([ "h", "hh" ], function(a, b, c) {
        b[id] = q(a), j(c).bigHour = !0;
    });
    var Hd = /[ap]\.?m?\.?/i, Id = C("Hours", !0);
    H("m", [ "mm", 2 ], 0, "minute"), z("minute", "m"), N("m", Wc), N("mm", Wc, Sc), 
    Q([ "m", "mm" ], jd);
    var Jd = C("Minutes", !1);
    H("s", [ "ss", 2 ], 0, "second"), z("second", "s"), N("s", Wc), N("ss", Wc, Sc), 
    Q([ "s", "ss" ], kd);
    var Kd = C("Seconds", !1);
    H("S", 0, 0, function() {
        return ~~(this.millisecond() / 100);
    }), H(0, [ "SS", 2 ], 0, function() {
        return ~~(this.millisecond() / 10);
    }), H(0, [ "SSS", 3 ], 0, "millisecond"), H(0, [ "SSSS", 4 ], 0, function() {
        return 10 * this.millisecond();
    }), H(0, [ "SSSSS", 5 ], 0, function() {
        return 100 * this.millisecond();
    }), H(0, [ "SSSSSS", 6 ], 0, function() {
        return 1e3 * this.millisecond();
    }), H(0, [ "SSSSSSS", 7 ], 0, function() {
        return 1e4 * this.millisecond();
    }), H(0, [ "SSSSSSSS", 8 ], 0, function() {
        return 1e5 * this.millisecond();
    }), H(0, [ "SSSSSSSSS", 9 ], 0, function() {
        return 1e6 * this.millisecond();
    }), z("millisecond", "ms"), N("S", Xc, Rc), N("SS", Xc, Sc), N("SSS", Xc, Tc);
    var Ld;
    for (Ld = "SSSS"; Ld.length <= 9; Ld += "S") N(Ld, $c);
    for (Ld = "S"; Ld.length <= 9; Ld += "S") Q(Ld, function(a, b) {
        b[ld] = q(1e3 * ("0." + a));
    });
    var Md = C("Milliseconds", !1);
    H("z", 0, 0, "zoneAbbr"), H("zz", 0, 0, "zoneName");
    var Nd = n.prototype;
    Nd.add = Ad, Nd.calendar = function(a, b) {
        var c = a || Da(), d = La(c, this).startOf("day"), e = this.diff(d, "days", !0), f = -6 > e ? "sameElse" : -1 > e ? "lastWeek" : 0 > e ? "lastDay" : 1 > e ? "sameDay" : 2 > e ? "nextDay" : 7 > e ? "nextWeek" : "sameElse";
        return this.format(b && b[f] || this.localeData().calendar(f, this, Da(c)));
    }, Nd.clone = function() {
        return new n(this);
    }, Nd.diff = function(a, b, c) {
        var d, e, f = La(a, this), g = 6e4 * (f.utcOffset() - this.utcOffset());
        return "year" === (b = A(b)) || "month" === b || "quarter" === b ? (e = jb(this, f), 
        "quarter" === b ? e /= 3 : "year" === b && (e /= 12)) : (d = this - f, e = "second" === b ? d / 1e3 : "minute" === b ? d / 6e4 : "hour" === b ? d / 36e5 : "day" === b ? (d - g) / 864e5 : "week" === b ? (d - g) / 6048e5 : d), 
        c ? e : p(e);
    }, Nd.endOf = function(a) {
        return void 0 === (a = A(a)) || "millisecond" === a ? this : this.startOf(a).add(1, "isoWeek" === a ? "week" : a).subtract(1, "ms");
    }, Nd.format = function(b) {
        var c = K(this, b || a.defaultFormat);
        return this.localeData().postformat(c);
    }, Nd.from = function(a, b) {
        return this.isValid() ? Ya({
            to: this,
            from: a
        }).locale(this.locale()).humanize(!b) : this.localeData().invalidDate();
    }, Nd.fromNow = function(a) {
        return this.from(Da(), a);
    }, Nd.to = function(a, b) {
        return this.isValid() ? Ya({
            from: this,
            to: a
        }).locale(this.locale()).humanize(!b) : this.localeData().invalidDate();
    }, Nd.toNow = function(a) {
        return this.to(Da(), a);
    }, Nd.get = F, Nd.invalidAt = function() {
        return j(this).overflow;
    }, Nd.isAfter = function(a, b) {
        return "millisecond" === (b = A(void 0 !== b ? b : "millisecond")) ? (a = o(a) ? a : Da(a), 
        +this > +a) : (o(a) ? +a : +Da(a)) < +this.clone().startOf(b);
    }, Nd.isBefore = function(a, b) {
        var c;
        return "millisecond" === (b = A(void 0 !== b ? b : "millisecond")) ? +(a = o(a) ? a : Da(a)) > +this : (c = o(a) ? +a : +Da(a), 
        +this.clone().endOf(b) < c);
    }, Nd.isBetween = function(a, b, c) {
        return this.isAfter(a, c) && this.isBefore(b, c);
    }, Nd.isSame = function(a, b) {
        var c;
        return "millisecond" === (b = A(b || "millisecond")) ? (a = o(a) ? a : Da(a), +this == +a) : (c = +Da(a), 
        +this.clone().startOf(b) <= c && c <= +this.clone().endOf(b));
    }, Nd.isValid = function() {
        return k(this);
    }, Nd.lang = Cd, Nd.locale = rb, Nd.localeData = sb, Nd.max = wd, Nd.min = vd, Nd.parsingFlags = function() {
        return g({}, j(this));
    }, Nd.set = F, Nd.startOf = function(a) {
        switch (a = A(a)) {
          case "year":
            this.month(0);

          case "quarter":
          case "month":
            this.date(1);

          case "week":
          case "isoWeek":
          case "day":
            this.hours(0);

          case "hour":
            this.minutes(0);

          case "minute":
            this.seconds(0);

          case "second":
            this.milliseconds(0);
        }
        return "week" === a && this.weekday(0), "isoWeek" === a && this.isoWeekday(1), "quarter" === a && this.month(3 * Math.floor(this.month() / 3)), 
        this;
    }, Nd.subtract = Bd, Nd.toArray = function() {
        var a = this;
        return [ a.year(), a.month(), a.date(), a.hour(), a.minute(), a.second(), a.millisecond() ];
    }, Nd.toObject = function() {
        var a = this;
        return {
            years: a.year(),
            months: a.month(),
            date: a.date(),
            hours: a.hours(),
            minutes: a.minutes(),
            seconds: a.seconds(),
            milliseconds: a.milliseconds()
        };
    }, Nd.toDate = function() {
        return this._offset ? new Date(+this) : this._d;
    }, Nd.toISOString = lb, Nd.toJSON = lb, Nd.toString = function() {
        return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ");
    }, Nd.unix = function() {
        return Math.floor(+this / 1e3);
    }, Nd.valueOf = function() {
        return +this._d - 6e4 * (this._offset || 0);
    }, Nd.year = td, Nd.isLeapYear = function() {
        return ha(this.year());
    }, Nd.weekYear = function(a) {
        var b = ja(this, this.localeData()._week.dow, this.localeData()._week.doy).year;
        return null == a ? b : this.add(a - b, "y");
    }, Nd.isoWeekYear = function(a) {
        var b = ja(this, 1, 4).year;
        return null == a ? b : this.add(a - b, "y");
    }, Nd.quarter = Nd.quarters = function(a) {
        return null == a ? Math.ceil((this.month() + 1) / 3) : this.month(3 * (a - 1) + this.month() % 3);
    }, Nd.month = Y, Nd.daysInMonth = function() {
        return T(this.year(), this.month());
    }, Nd.week = Nd.weeks = function(a) {
        var b = this.localeData().week(this);
        return null == a ? b : this.add(7 * (a - b), "d");
    }, Nd.isoWeek = Nd.isoWeeks = function(a) {
        var b = ja(this, 1, 4).week;
        return null == a ? b : this.add(7 * (a - b), "d");
    }, Nd.weeksInYear = function() {
        var a = this.localeData()._week;
        return Eb(this.year(), a.dow, a.doy);
    }, Nd.isoWeeksInYear = function() {
        return Eb(this.year(), 1, 4);
    }, Nd.date = Dd, Nd.day = Nd.days = function(a) {
        var b = this._isUTC ? this._d.getUTCDay() : this._d.getDay();
        return null != a ? (a = Kb(a, this.localeData()), this.add(a - b, "d")) : b;
    }, Nd.weekday = function(a) {
        var b = (this.day() + 7 - this.localeData()._week.dow) % 7;
        return null == a ? b : this.add(a - b, "d");
    }, Nd.isoWeekday = function(a) {
        return null == a ? this.day() || 7 : this.day(this.day() % 7 ? a : a - 7);
    }, Nd.dayOfYear = function(a) {
        var b = Math.round((this.clone().startOf("day") - this.clone().startOf("year")) / 864e5) + 1;
        return null == a ? b : this.add(a - b, "d");
    }, Nd.hour = Nd.hours = Id, Nd.minute = Nd.minutes = Jd, Nd.second = Nd.seconds = Kd, 
    Nd.millisecond = Nd.milliseconds = Md, Nd.utcOffset = function(b, c) {
        var d, e = this._offset || 0;
        return null != b ? ("string" == typeof b && (b = Ka(b)), Math.abs(b) < 16 && (b *= 60), 
        !this._isUTC && c && (d = Ma(this)), this._offset = b, this._isUTC = !0, null != d && this.add(d, "m"), 
        e !== b && (!c || this._changeInProgress ? bb(this, Ya(b - e, "m"), 1, !1) : this._changeInProgress || (this._changeInProgress = !0, 
        a.updateOffset(this, !0), this._changeInProgress = null)), this) : this._isUTC ? e : Ma(this);
    }, Nd.utc = function(a) {
        return this.utcOffset(0, a);
    }, Nd.local = function(a) {
        return this._isUTC && (this.utcOffset(0, a), this._isUTC = !1, a && this.subtract(Ma(this), "m")), 
        this;
    }, Nd.parseZone = function() {
        return this._tzm ? this.utcOffset(this._tzm) : "string" == typeof this._i && this.utcOffset(Ka(this._i)), 
        this;
    }, Nd.hasAlignedHourOffset = function(a) {
        return a = a ? Da(a).utcOffset() : 0, (this.utcOffset() - a) % 60 == 0;
    }, Nd.isDST = function() {
        return this.utcOffset() > this.clone().month(0).utcOffset() || this.utcOffset() > this.clone().month(5).utcOffset();
    }, Nd.isDSTShifted = function() {
        if (void 0 !== this._isDSTShifted) return this._isDSTShifted;
        var a = {};
        if (m(a, this), (a = Aa(a))._a) {
            var b = a._isUTC ? h(a._a) : Da(a._a);
            this._isDSTShifted = this.isValid() && r(a._a, b.toArray()) > 0;
        } else this._isDSTShifted = !1;
        return this._isDSTShifted;
    }, Nd.isLocal = function() {
        return !this._isUTC;
    }, Nd.isUtcOffset = function() {
        return this._isUTC;
    }, Nd.isUtc = Xa, Nd.isUTC = Xa, Nd.zoneAbbr = function() {
        return this._isUTC ? "UTC" : "";
    }, Nd.zoneName = function() {
        return this._isUTC ? "Coordinated Universal Time" : "";
    }, Nd.dates = aa("dates accessor is deprecated. Use date instead.", Dd), Nd.months = aa("months accessor is deprecated. Use month instead", Y), 
    Nd.years = aa("years accessor is deprecated. Use year instead", td), Nd.zone = aa("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779", function(a, b) {
        return null != a ? ("string" != typeof a && (a = -a), this.utcOffset(a, b), this) : -this.utcOffset();
    });
    var Od = Nd, Pd = {
        sameDay: "[Today at] LT",
        nextDay: "[Tomorrow at] LT",
        nextWeek: "dddd [at] LT",
        lastDay: "[Yesterday at] LT",
        lastWeek: "[Last] dddd [at] LT",
        sameElse: "L"
    }, Qd = {
        LTS: "h:mm:ss A",
        LT: "h:mm A",
        L: "MM/DD/YYYY",
        LL: "MMMM D, YYYY",
        LLL: "MMMM D, YYYY h:mm A",
        LLLL: "dddd, MMMM D, YYYY h:mm A"
    }, Td = /\d{1,2}/, Ud = {
        future: "in %s",
        past: "%s ago",
        s: "a few seconds",
        m: "a minute",
        mm: "%d minutes",
        h: "an hour",
        hh: "%d hours",
        d: "a day",
        dd: "%d days",
        M: "a month",
        MM: "%d months",
        y: "a year",
        yy: "%d years"
    }, Vd = s.prototype;
    Vd._calendar = Pd, Vd.calendar = function(a, b, c) {
        var d = this._calendar[a];
        return "function" == typeof d ? d.call(b, c) : d;
    }, Vd._longDateFormat = Qd, Vd.longDateFormat = function(a) {
        var b = this._longDateFormat[a], c = this._longDateFormat[a.toUpperCase()];
        return b || !c ? b : (this._longDateFormat[a] = c.replace(/MMMM|MM|DD|dddd/g, function(a) {
            return a.slice(1);
        }), this._longDateFormat[a]);
    }, Vd._invalidDate = "Invalid date", Vd.invalidDate = function() {
        return this._invalidDate;
    }, Vd._ordinal = "%d", Vd.ordinal = function(a) {
        return this._ordinal.replace("%d", a);
    }, Vd._ordinalParse = Td, Vd.preparse = dc, Vd.postformat = dc, Vd._relativeTime = Ud, 
    Vd.relativeTime = function(a, b, c, d) {
        var e = this._relativeTime[c];
        return "function" == typeof e ? e(a, b, c, d) : e.replace(/%d/i, a);
    }, Vd.pastFuture = function(a, b) {
        var c = this._relativeTime[a > 0 ? "future" : "past"];
        return "function" == typeof c ? c(b) : c.replace(/%s/i, b);
    }, Vd.set = function(a) {
        var b, c;
        for (c in a) "function" == typeof (b = a[c]) ? this[c] = b : this["_" + c] = b;
        this._ordinalParseLenient = new RegExp(this._ordinalParse.source + "|" + /\d{1,2}/.source);
    }, Vd.months = function(a) {
        return this._months[a.month()];
    }, Vd._months = md, Vd.monthsShort = function(a) {
        return this._monthsShort[a.month()];
    }, Vd._monthsShort = nd, Vd.monthsParse = function(a, b, c) {
        var d, e, f;
        for (this._monthsParse || (this._monthsParse = [], this._longMonthsParse = [], this._shortMonthsParse = []), 
        d = 0; 12 > d; d++) {
            if (e = h([ 2e3, d ]), c && !this._longMonthsParse[d] && (this._longMonthsParse[d] = new RegExp("^" + this.months(e, "").replace(".", "") + "$", "i"), 
            this._shortMonthsParse[d] = new RegExp("^" + this.monthsShort(e, "").replace(".", "") + "$", "i")), 
            c || this._monthsParse[d] || (f = "^" + this.months(e, "") + "|^" + this.monthsShort(e, ""), 
            this._monthsParse[d] = new RegExp(f.replace(".", ""), "i")), c && "MMMM" === b && this._longMonthsParse[d].test(a)) return d;
            if (c && "MMM" === b && this._shortMonthsParse[d].test(a)) return d;
            if (!c && this._monthsParse[d].test(a)) return d;
        }
    }, Vd.week = function(a) {
        return ja(a, this._week.dow, this._week.doy).week;
    }, Vd._week = ud, Vd.firstDayOfYear = function() {
        return this._week.doy;
    }, Vd.firstDayOfWeek = function() {
        return this._week.dow;
    }, Vd.weekdays = function(a) {
        return this._weekdays[a.day()];
    }, Vd._weekdays = Ed, Vd.weekdaysMin = function(a) {
        return this._weekdaysMin[a.day()];
    }, Vd._weekdaysMin = Gd, Vd.weekdaysShort = function(a) {
        return this._weekdaysShort[a.day()];
    }, Vd._weekdaysShort = Fd, Vd.weekdaysParse = function(a) {
        var b, c, d;
        for (this._weekdaysParse = this._weekdaysParse || [], b = 0; 7 > b; b++) if (this._weekdaysParse[b] || (c = Da([ 2e3, 1 ]).day(b), 
        d = "^" + this.weekdays(c, "") + "|^" + this.weekdaysShort(c, "") + "|^" + this.weekdaysMin(c, ""), 
        this._weekdaysParse[b] = new RegExp(d.replace(".", ""), "i")), this._weekdaysParse[b].test(a)) return b;
    }, Vd.isPM = function(a) {
        return "p" === (a + "").toLowerCase().charAt(0);
    }, Vd._meridiemParse = Hd, Vd.meridiem = function(a, b, c) {
        return a > 11 ? c ? "pm" : "PM" : c ? "am" : "AM";
    }, w("en", {
        ordinalParse: /\d{1,2}(th|st|nd|rd)/,
        ordinal: function(a) {
            var b = a % 10;
            return a + (1 === q(a % 100 / 10) ? "th" : 1 === b ? "st" : 2 === b ? "nd" : 3 === b ? "rd" : "th");
        }
    }), a.lang = aa("moment.lang is deprecated. Use moment.locale instead.", w), a.langData = aa("moment.langData is deprecated. Use moment.localeData instead.", y);
    var Wd = Math.abs, Xd = yc("ms"), Yd = yc("s"), Zd = yc("m"), $d = yc("h"), _d = yc("d"), ae = yc("w"), be = yc("M"), ce = yc("y"), de = Ac("milliseconds"), ee = Ac("seconds"), fe = Ac("minutes"), ge = Ac("hours"), he = Ac("days"), ie = Ac("months"), je = Ac("years"), ke = Math.round, le = {
        s: 45,
        m: 45,
        h: 22,
        d: 26,
        M: 11
    }, me = Math.abs, ne = Ha.prototype;
    return ne.abs = function() {
        var a = this._data;
        return this._milliseconds = Wd(this._milliseconds), this._days = Wd(this._days), 
        this._months = Wd(this._months), a.milliseconds = Wd(a.milliseconds), a.seconds = Wd(a.seconds), 
        a.minutes = Wd(a.minutes), a.hours = Wd(a.hours), a.months = Wd(a.months), a.years = Wd(a.years), 
        this;
    }, ne.add = function(a, b) {
        return pc(this, a, b, 1);
    }, ne.subtract = function(a, b) {
        return pc(this, a, b, -1);
    }, ne.as = function(a) {
        var b, c, d = this._milliseconds;
        if ("month" === (a = A(a)) || "year" === a) return b = this._days + d / 864e5, c = this._months + uc(b), 
        "month" === a ? c : c / 12;
        switch (b = this._days + Math.round(vc(this._months)), a) {
          case "week":
            return b / 7 + d / 6048e5;

          case "day":
            return b + d / 864e5;

          case "hour":
            return 24 * b + d / 36e5;

          case "minute":
            return 1440 * b + d / 6e4;

          case "second":
            return 86400 * b + d / 1e3;

          case "millisecond":
            return Math.floor(864e5 * b) + d;

          default:
            throw new Error("Unknown unit " + a);
        }
    }, ne.asMilliseconds = Xd, ne.asSeconds = Yd, ne.asMinutes = Zd, ne.asHours = $d, 
    ne.asDays = _d, ne.asWeeks = ae, ne.asMonths = be, ne.asYears = ce, ne.valueOf = function() {
        return this._milliseconds + 864e5 * this._days + this._months % 12 * 2592e6 + 31536e6 * q(this._months / 12);
    }, ne._bubble = function() {
        var a, b, c, d, e, f = this._milliseconds, g = this._days, h = this._months, i = this._data;
        return f >= 0 && g >= 0 && h >= 0 || 0 >= f && 0 >= g && 0 >= h || (f += 864e5 * sc(vc(h) + g), 
        g = 0, h = 0), i.milliseconds = f % 1e3, a = p(f / 1e3), i.seconds = a % 60, b = p(a / 60), 
        i.minutes = b % 60, c = p(b / 60), i.hours = c % 24, g += p(c / 24), e = p(uc(g)), 
        h += e, g -= sc(vc(e)), d = p(h / 12), h %= 12, i.days = g, i.months = h, i.years = d, 
        this;
    }, ne.get = function(a) {
        return a = A(a), this[a + "s"]();
    }, ne.milliseconds = de, ne.seconds = ee, ne.minutes = fe, ne.hours = ge, ne.days = he, 
    ne.weeks = function() {
        return p(this.days() / 7);
    }, ne.months = ie, ne.years = je, ne.humanize = function(a) {
        var b = this.localeData(), c = Dc(this, !a, b);
        return a && (c = b.pastFuture(+this, c)), b.postformat(c);
    }, ne.toISOString = Gc, ne.toString = Gc, ne.toJSON = Gc, ne.locale = rb, ne.localeData = sb, 
    ne.toIsoString = aa("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)", Gc), 
    ne.lang = Cd, H("X", 0, 0, "unix"), H("x", 0, 0, "valueOf"), N("x", _c), N("X", bd), 
    Q("X", function(a, b, c) {
        c._d = new Date(1e3 * parseFloat(a, 10));
    }), Q("x", function(a, b, c) {
        c._d = new Date(q(a));
    }), a.version = "2.10.6", function(a) {
        Hc = a;
    }(Da), a.fn = Od, a.min = function() {
        return Ea("isBefore", [].slice.call(arguments, 0));
    }, a.max = function() {
        return Ea("isAfter", [].slice.call(arguments, 0));
    }, a.utc = h, a.unix = function(a) {
        return Da(1e3 * a);
    }, a.months = function(a, b) {
        return ic(a, b, "months", 12, "month");
    }, a.isDate = d, a.locale = w, a.invalid = l, a.duration = Ya, a.isMoment = o, a.weekdays = function(a, b) {
        return ic(a, b, "weekdays", 7, "day");
    }, a.parseZone = function() {
        return Da.apply(null, arguments).parseZone();
    }, a.localeData = y, a.isDuration = Ia, a.monthsShort = function(a, b) {
        return ic(a, b, "monthsShort", 12, "month");
    }, a.weekdaysMin = function(a, b) {
        return ic(a, b, "weekdaysMin", 7, "day");
    }, a.defineLocale = x, a.weekdaysShort = function(a, b) {
        return ic(a, b, "weekdaysShort", 7, "day");
    }, a.normalizeUnits = A, a.relativeTimeThreshold = function(a, b) {
        return void 0 !== le[a] && (void 0 === b ? le[a] : (le[a] = b, !0));
    }, a;
}), function(obj) {
    "use strict";
    function Crc32() {
        this.crc = -1;
    }
    function NOOP() {}
    function blobSlice(blob, index, length) {
        if (index < 0 || length < 0 || index + length > blob.size) throw new RangeError("offset:" + index + ", length:" + length + ", size:" + blob.size);
        return blob.slice ? blob.slice(index, index + length) : blob.webkitSlice ? blob.webkitSlice(index, index + length) : blob.mozSlice ? blob.mozSlice(index, index + length) : blob.msSlice ? blob.msSlice(index, index + length) : void 0;
    }
    function getDataHelper(byteLength, bytes) {
        var dataBuffer, dataArray;
        return dataBuffer = new ArrayBuffer(byteLength), dataArray = new Uint8Array(dataBuffer), 
        bytes && dataArray.set(bytes, 0), {
            buffer: dataBuffer,
            array: dataArray,
            view: new DataView(dataBuffer)
        };
    }
    function Reader() {}
    function TextReader(text) {
        var blobReader, that = this;
        that.size = 0, that.init = function(callback, onerror) {
            var blob = new Blob([ text ], {
                type: TEXT_PLAIN
            });
            (blobReader = new BlobReader(blob)).init(function() {
                that.size = blobReader.size, callback();
            }, onerror);
        }, that.readUint8Array = function(index, length, callback, onerror) {
            blobReader.readUint8Array(index, length, callback, onerror);
        };
    }
    function Data64URIReader(dataURI) {
        var dataStart, that = this;
        that.size = 0, that.init = function(callback) {
            for (var dataEnd = dataURI.length; "=" == dataURI.charAt(dataEnd - 1); ) dataEnd--;
            dataStart = dataURI.indexOf(",") + 1, that.size = Math.floor(.75 * (dataEnd - dataStart)), 
            callback();
        }, that.readUint8Array = function(index, length, callback) {
            var i, data = getDataHelper(length), start = 4 * Math.floor(index / 3), end = 4 * Math.ceil((index + length) / 3), bytes = obj.atob(dataURI.substring(start + dataStart, end + dataStart)), delta = index - 3 * Math.floor(start / 4);
            for (i = delta; i < delta + length; i++) data.array[i - delta] = bytes.charCodeAt(i);
            callback(data.array);
        };
    }
    function BlobReader(blob) {
        var that = this;
        that.size = 0, that.init = function(callback) {
            that.size = blob.size, callback();
        }, that.readUint8Array = function(index, length, callback, onerror) {
            var reader = new FileReader();
            reader.onload = function(e) {
                callback(new Uint8Array(e.target.result));
            }, reader.onerror = onerror;
            try {
                reader.readAsArrayBuffer(blobSlice(blob, index, length));
            } catch (e) {
                onerror(e);
            }
        };
    }
    function Writer() {}
    function TextWriter(encoding) {
        var blob, that = this;
        that.init = function(callback) {
            blob = new Blob([], {
                type: TEXT_PLAIN
            }), callback();
        }, that.writeUint8Array = function(array, callback) {
            blob = new Blob([ blob, appendABViewSupported ? array : array.buffer ], {
                type: TEXT_PLAIN
            }), callback();
        }, that.getData = function(callback, onerror) {
            var reader = new FileReader();
            reader.onload = function(e) {
                callback(e.target.result);
            }, reader.onerror = onerror, reader.readAsText(blob, encoding);
        };
    }
    function Data64URIWriter(contentType) {
        var that = this, data = "", pending = "";
        that.init = function(callback) {
            data += "data:" + (contentType || "") + ";base64,", callback();
        }, that.writeUint8Array = function(array, callback) {
            var i, delta = pending.length, dataString = pending;
            for (pending = "", i = 0; i < 3 * Math.floor((delta + array.length) / 3) - delta; i++) dataString += String.fromCharCode(array[i]);
            for (;i < array.length; i++) pending += String.fromCharCode(array[i]);
            dataString.length > 2 ? data += obj.btoa(dataString) : pending = dataString, callback();
        }, that.getData = function(callback) {
            callback(data + obj.btoa(pending));
        };
    }
    function BlobWriter(contentType) {
        var blob, that = this;
        that.init = function(callback) {
            blob = new Blob([], {
                type: contentType
            }), callback();
        }, that.writeUint8Array = function(array, callback) {
            blob = new Blob([ blob, appendABViewSupported ? array : array.buffer ], {
                type: contentType
            }), callback();
        }, that.getData = function(callback) {
            callback(blob);
        };
    }
    function launchWorkerProcess(worker, initialMessage, reader, writer, offset, size, onprogress, onend, onreaderror, onwriteerror) {
        function onflush() {
            worker.removeEventListener("message", onmessage, !1), onend(outputSize, crc);
        }
        function onmessage(event) {
            var message = event.data, data = message.data, err = message.error;
            if (err) return err.toString = function() {
                return "Error: " + this.message;
            }, void onreaderror(err);
            if (message.sn === sn) switch ("number" == typeof message.codecTime && (worker.codecTime += message.codecTime), 
            "number" == typeof message.crcTime && (worker.crcTime += message.crcTime), message.type) {
              case "append":
                data ? (outputSize += data.length, writer.writeUint8Array(data, function() {
                    step();
                }, onwriteerror)) : step();
                break;

              case "flush":
                crc = message.crc, data ? (outputSize += data.length, writer.writeUint8Array(data, function() {
                    onflush();
                }, onwriteerror)) : onflush();
                break;

              case "progress":
                onprogress && onprogress(index + message.loaded, size);
                break;

              case "importScripts":
              case "newTask":
              case "echo":
                break;

              default:
                console.warn("zip.js:launchWorkerProcess: unknown message: ", message);
            }
        }
        function step() {
            (index = chunkIndex * CHUNK_SIZE) <= size ? reader.readUint8Array(offset + index, Math.min(CHUNK_SIZE, size - index), function(array) {
                onprogress && onprogress(index, size);
                var msg = 0 === index ? initialMessage : {
                    sn: sn
                };
                msg.type = "append", msg.data = array;
                try {
                    worker.postMessage(msg, [ array.buffer ]);
                } catch (ex) {
                    worker.postMessage(msg);
                }
                chunkIndex++;
            }, onreaderror) : worker.postMessage({
                sn: sn,
                type: "flush"
            });
        }
        var index, outputSize, crc, chunkIndex = 0, sn = initialMessage.sn;
        outputSize = 0, worker.addEventListener("message", onmessage, !1), step();
    }
    function launchProcess(process, reader, writer, offset, size, crcType, onprogress, onend, onreaderror, onwriteerror) {
        function step() {
            var outputData;
            if ((index = chunkIndex * CHUNK_SIZE) < size) reader.readUint8Array(offset + index, Math.min(CHUNK_SIZE, size - index), function(inputData) {
                var outputData;
                try {
                    outputData = process.append(inputData, function(loaded) {
                        onprogress && onprogress(index + loaded, size);
                    });
                } catch (e) {
                    return void onreaderror(e);
                }
                outputData ? (outputSize += outputData.length, writer.writeUint8Array(outputData, function() {
                    chunkIndex++, setTimeout(step, 1);
                }, onwriteerror), crcOutput && crc.append(outputData)) : (chunkIndex++, setTimeout(step, 1)), 
                crcInput && crc.append(inputData), onprogress && onprogress(index, size);
            }, onreaderror); else {
                try {
                    outputData = process.flush();
                } catch (e) {
                    return void onreaderror(e);
                }
                outputData ? (crcOutput && crc.append(outputData), outputSize += outputData.length, 
                writer.writeUint8Array(outputData, function() {
                    onend(outputSize, crc.get());
                }, onwriteerror)) : onend(outputSize, crc.get());
            }
        }
        var index, chunkIndex = 0, outputSize = 0, crcInput = "input" === crcType, crcOutput = "output" === crcType, crc = new Crc32();
        step();
    }
    function inflate(worker, sn, reader, writer, offset, size, computeCrc32, onend, onprogress, onreaderror, onwriteerror) {
        var crcType = computeCrc32 ? "output" : "none";
        obj.zip.useWebWorkers ? launchWorkerProcess(worker, {
            sn: sn,
            codecClass: "Inflater",
            crcType: crcType
        }, reader, writer, offset, size, onprogress, onend, onreaderror, onwriteerror) : launchProcess(new obj.zip.Inflater(), reader, writer, offset, size, crcType, onprogress, onend, onreaderror, onwriteerror);
    }
    function deflate(worker, sn, reader, writer, level, onend, onprogress, onreaderror, onwriteerror) {
        obj.zip.useWebWorkers ? launchWorkerProcess(worker, {
            sn: sn,
            options: {
                level: level
            },
            codecClass: "Deflater",
            crcType: "input"
        }, reader, writer, 0, reader.size, onprogress, onend, onreaderror, onwriteerror) : launchProcess(new obj.zip.Deflater(), reader, writer, 0, reader.size, "input", onprogress, onend, onreaderror, onwriteerror);
    }
    function copy(worker, sn, reader, writer, offset, size, computeCrc32, onend, onprogress, onreaderror, onwriteerror) {
        obj.zip.useWebWorkers && computeCrc32 ? launchWorkerProcess(worker, {
            sn: sn,
            codecClass: "NOOP",
            crcType: "input"
        }, reader, writer, offset, size, onprogress, onend, onreaderror, onwriteerror) : launchProcess(new NOOP(), reader, writer, offset, size, "input", onprogress, onend, onreaderror, onwriteerror);
    }
    function decodeASCII(str) {
        var i, charCode, out = "", extendedASCII = [ "\xc7", "\xfc", "\xe9", "\xe2", "\xe4", "\xe0", "\xe5", "\xe7", "\xea", "\xeb", "\xe8", "\xef", "\xee", "\xec", "\xc4", "\xc5", "\xc9", "\xe6", "\xc6", "\xf4", "\xf6", "\xf2", "\xfb", "\xf9", "\xff", "\xd6", "\xdc", "\xf8", "\xa3", "\xd8", "\xd7", "\u0192", "\xe1", "\xed", "\xf3", "\xfa", "\xf1", "\xd1", "\xaa", "\xba", "\xbf", "\xae", "\xac", "\xbd", "\xbc", "\xa1", "\xab", "\xbb", "_", "_", "_", "\xa6", "\xa6", "\xc1", "\xc2", "\xc0", "\xa9", "\xa6", "\xa6", "+", "+", "\xa2", "\xa5", "+", "+", "-", "-", "+", "-", "+", "\xe3", "\xc3", "+", "+", "-", "-", "\xa6", "-", "+", "\xa4", "\xf0", "\xd0", "\xca", "\xcb", "\xc8", "i", "\xcd", "\xce", "\xcf", "+", "+", "_", "_", "\xa6", "\xcc", "_", "\xd3", "\xdf", "\xd4", "\xd2", "\xf5", "\xd5", "\xb5", "\xfe", "\xde", "\xda", "\xdb", "\xd9", "\xfd", "\xdd", "\xaf", "\xb4", "\xad", "\xb1", "_", "\xbe", "\xb6", "\xa7", "\xf7", "\xb8", "\xb0", "\xa8", "\xb7", "\xb9", "\xb3", "\xb2", "_", " " ];
        for (i = 0; i < str.length; i++) out += (charCode = 255 & str.charCodeAt(i)) > 127 ? extendedASCII[charCode - 128] : String.fromCharCode(charCode);
        return out;
    }
    function decodeUTF8(string) {
        return decodeURIComponent(escape(string));
    }
    function getString(bytes) {
        var i, str = "";
        for (i = 0; i < bytes.length; i++) str += String.fromCharCode(bytes[i]);
        return str;
    }
    function getDate(timeRaw) {
        var date = (4294901760 & timeRaw) >> 16, time = 65535 & timeRaw;
        try {
            return new Date(1980 + ((65024 & date) >> 9), ((480 & date) >> 5) - 1, 31 & date, (63488 & time) >> 11, (2016 & time) >> 5, 2 * (31 & time), 0);
        } catch (e) {}
    }
    function readCommonHeader(entry, data, index, centralDirectory, onerror) {
        entry.version = data.view.getUint16(index, !0), entry.bitFlag = data.view.getUint16(index + 2, !0), 
        entry.compressionMethod = data.view.getUint16(index + 4, !0), entry.lastModDateRaw = data.view.getUint32(index + 6, !0), 
        entry.lastModDate = getDate(entry.lastModDateRaw), 1 != (1 & entry.bitFlag) ? ((centralDirectory || 8 != (8 & entry.bitFlag)) && (entry.crc32 = data.view.getUint32(index + 10, !0), 
        entry.compressedSize = data.view.getUint32(index + 14, !0), entry.uncompressedSize = data.view.getUint32(index + 18, !0)), 
        4294967295 !== entry.compressedSize && 4294967295 !== entry.uncompressedSize ? (entry.filenameLength = data.view.getUint16(index + 22, !0), 
        entry.extraFieldLength = data.view.getUint16(index + 24, !0)) : onerror(ERR_ZIP64)) : onerror(ERR_ENCRYPTED);
    }
    function createZipReader(reader, callback, onerror) {
        function Entry() {}
        function seekEOCDR(eocdrCallback) {
            function doSeek(length, eocdrNotFoundCallback) {
                reader.readUint8Array(reader.size - length, length, function(bytes) {
                    for (var i = bytes.length - EOCDR_MIN; i >= 0; i--) if (80 === bytes[i] && 75 === bytes[i + 1] && 5 === bytes[i + 2] && 6 === bytes[i + 3]) return void eocdrCallback(new DataView(bytes.buffer, i, EOCDR_MIN));
                    eocdrNotFoundCallback();
                }, function() {
                    onerror(ERR_READ);
                });
            }
            var EOCDR_MIN = 22;
            if (reader.size < EOCDR_MIN) onerror(ERR_BAD_FORMAT); else {
                var EOCDR_MAX = EOCDR_MIN + 65536;
                doSeek(EOCDR_MIN, function() {
                    doSeek(Math.min(EOCDR_MAX, reader.size), function() {
                        onerror(ERR_BAD_FORMAT);
                    });
                });
            }
        }
        var inflateSN = 0;
        Entry.prototype.getData = function(writer, onend, onprogress, checkCrc32) {
            function testCrc32(crc32) {
                var dataCrc32 = getDataHelper(4);
                return dataCrc32.view.setUint32(0, crc32), that.crc32 == dataCrc32.view.getUint32(0);
            }
            function getWriterData(uncompressedSize, crc32) {
                checkCrc32 && !testCrc32(crc32) ? onerror(ERR_CRC) : writer.getData(function(data) {
                    onend(data);
                });
            }
            function onreaderror(err) {
                onerror(err || ERR_READ_DATA);
            }
            function onwriteerror(err) {
                onerror(err || ERR_WRITE_DATA);
            }
            var that = this;
            reader.readUint8Array(that.offset, 30, function(bytes) {
                var dataOffset, data = getDataHelper(bytes.length, bytes);
                1347093252 == data.view.getUint32(0) ? (readCommonHeader(that, data, 4, !1, onerror), 
                dataOffset = that.offset + 30 + that.filenameLength + that.extraFieldLength, writer.init(function() {
                    0 === that.compressionMethod ? copy(that._worker, inflateSN++, reader, writer, dataOffset, that.compressedSize, checkCrc32, getWriterData, onprogress, onreaderror, onwriteerror) : inflate(that._worker, inflateSN++, reader, writer, dataOffset, that.compressedSize, checkCrc32, getWriterData, onprogress, onreaderror, onwriteerror);
                }, onwriteerror)) : onerror(ERR_BAD_FORMAT);
            }, onreaderror);
        };
        var zipReader = {
            getEntries: function(callback) {
                var worker = this._worker;
                seekEOCDR(function(dataView) {
                    var datalength, fileslength;
                    datalength = dataView.getUint32(16, !0), fileslength = dataView.getUint16(8, !0), 
                    datalength < 0 || datalength >= reader.size ? onerror(ERR_BAD_FORMAT) : reader.readUint8Array(datalength, reader.size - datalength, function(bytes) {
                        var i, entry, filename, comment, index = 0, entries = [], data = getDataHelper(bytes.length, bytes);
                        for (i = 0; i < fileslength; i++) {
                            if (entry = new Entry(), entry._worker = worker, 1347092738 != data.view.getUint32(index)) return void onerror(ERR_BAD_FORMAT);
                            readCommonHeader(entry, data, index + 6, !0, onerror), entry.commentLength = data.view.getUint16(index + 32, !0), 
                            entry.directory = 16 == (16 & data.view.getUint8(index + 38)), entry.offset = data.view.getUint32(index + 42, !0), 
                            filename = getString(data.array.subarray(index + 46, index + 46 + entry.filenameLength)), 
                            entry.filename = 2048 == (2048 & entry.bitFlag) ? decodeUTF8(filename) : decodeASCII(filename), 
                            entry.directory || "/" != entry.filename.charAt(entry.filename.length - 1) || (entry.directory = !0), 
                            comment = getString(data.array.subarray(index + 46 + entry.filenameLength + entry.extraFieldLength, index + 46 + entry.filenameLength + entry.extraFieldLength + entry.commentLength)), 
                            entry.comment = 2048 == (2048 & entry.bitFlag) ? decodeUTF8(comment) : decodeASCII(comment), 
                            entries.push(entry), index += 46 + entry.filenameLength + entry.extraFieldLength + entry.commentLength;
                        }
                        callback(entries);
                    }, function() {
                        onerror(ERR_READ);
                    });
                });
            },
            close: function(callback) {
                this._worker && (this._worker.terminate(), this._worker = null), callback && callback();
            },
            _worker: null
        };
        obj.zip.useWebWorkers ? createWorker("inflater", function(worker) {
            zipReader._worker = worker, callback(zipReader);
        }, function(err) {
            onerror(err);
        }) : callback(zipReader);
    }
    function encodeUTF8(string) {
        return unescape(encodeURIComponent(string));
    }
    function getBytes(str) {
        var i, array = [];
        for (i = 0; i < str.length; i++) array.push(str.charCodeAt(i));
        return array;
    }
    function createZipWriter(writer, callback, onerror, dontDeflate) {
        function onwriteerror(err) {
            onerror(err || ERR_WRITE);
        }
        function onreaderror(err) {
            onerror(err || ERR_READ_DATA);
        }
        var files = {}, filenames = [], datalength = 0, deflateSN = 0, zipWriter = {
            add: function(name, reader, onend, onprogress, options) {
                function writeHeader(callback) {
                    var data;
                    date = options.lastModDate || new Date(), header = getDataHelper(26), files[name] = {
                        headerArray: header.array,
                        directory: options.directory,
                        filename: filename,
                        offset: datalength,
                        comment: getBytes(encodeUTF8(options.comment || ""))
                    }, header.view.setUint32(0, 335546376), options.version && header.view.setUint8(0, options.version), 
                    dontDeflate || 0 === options.level || options.directory || header.view.setUint16(4, 2048), 
                    header.view.setUint16(6, (date.getHours() << 6 | date.getMinutes()) << 5 | date.getSeconds() / 2, !0), 
                    header.view.setUint16(8, (date.getFullYear() - 1980 << 4 | date.getMonth() + 1) << 5 | date.getDate(), !0), 
                    header.view.setUint16(22, filename.length, !0), (data = getDataHelper(30 + filename.length)).view.setUint32(0, 1347093252), 
                    data.array.set(header.array, 4), data.array.set(filename, 30), datalength += data.array.length, 
                    writer.writeUint8Array(data.array, callback, onwriteerror);
                }
                function writeFooter(compressedLength, crc32) {
                    var footer = getDataHelper(16);
                    datalength += compressedLength || 0, footer.view.setUint32(0, 1347094280), void 0 !== crc32 && (header.view.setUint32(10, crc32, !0), 
                    footer.view.setUint32(4, crc32, !0)), reader && (footer.view.setUint32(8, compressedLength, !0), 
                    header.view.setUint32(14, compressedLength, !0), footer.view.setUint32(12, reader.size, !0), 
                    header.view.setUint32(18, reader.size, !0)), writer.writeUint8Array(footer.array, function() {
                        datalength += 16, onend();
                    }, onwriteerror);
                }
                function writeFile() {
                    options = options || {}, name = name.trim(), options.directory && "/" != name.charAt(name.length - 1) && (name += "/"), 
                    files.hasOwnProperty(name) ? onerror(ERR_DUPLICATED_NAME) : (filename = getBytes(encodeUTF8(name)), 
                    filenames.push(name), writeHeader(function() {
                        reader ? dontDeflate || 0 === options.level ? copy(worker, deflateSN++, reader, writer, 0, reader.size, !0, writeFooter, onprogress, onreaderror, onwriteerror) : deflate(worker, deflateSN++, reader, writer, options.level, writeFooter, onprogress, onreaderror, onwriteerror) : writeFooter();
                    }, onwriteerror));
                }
                var header, filename, date, worker = this._worker;
                reader ? reader.init(writeFile, onreaderror) : writeFile();
            },
            close: function(callback) {
                this._worker && (this._worker.terminate(), this._worker = null);
                var data, indexFilename, file, length = 0, index = 0;
                for (indexFilename = 0; indexFilename < filenames.length; indexFilename++) length += 46 + (file = files[filenames[indexFilename]]).filename.length + file.comment.length;
                for (data = getDataHelper(length + 22), indexFilename = 0; indexFilename < filenames.length; indexFilename++) file = files[filenames[indexFilename]], 
                data.view.setUint32(index, 1347092738), data.view.setUint16(index + 4, 5120), data.array.set(file.headerArray, index + 6), 
                data.view.setUint16(index + 32, file.comment.length, !0), file.directory && data.view.setUint8(index + 38, 16), 
                data.view.setUint32(index + 42, file.offset, !0), data.array.set(file.filename, index + 46), 
                data.array.set(file.comment, index + 46 + file.filename.length), index += 46 + file.filename.length + file.comment.length;
                data.view.setUint32(index, 1347093766), data.view.setUint16(index + 8, filenames.length, !0), 
                data.view.setUint16(index + 10, filenames.length, !0), data.view.setUint32(index + 12, length, !0), 
                data.view.setUint32(index + 16, datalength, !0), writer.writeUint8Array(data.array, function() {
                    writer.getData(callback);
                }, onwriteerror);
            },
            _worker: null
        };
        obj.zip.useWebWorkers ? createWorker("deflater", function(worker) {
            zipWriter._worker = worker, callback(zipWriter);
        }, function(err) {
            onerror(err);
        }) : callback(zipWriter);
    }
    function resolveURLs(urls) {
        var a = document.createElement("a");
        return urls.map(function(url) {
            return a.href = url, a.href;
        });
    }
    function createWorker(type, callback, onerror) {
        function onmessage(ev) {
            var msg = ev.data;
            if (msg.error) return worker.terminate(), void onerror(msg.error);
            "importScripts" === msg.type && (worker.removeEventListener("message", onmessage), 
            worker.removeEventListener("error", errorHandler), callback(worker));
        }
        function errorHandler(err) {
            worker.terminate(), onerror(err);
        }
        if (null === obj.zip.workerScripts || null === obj.zip.workerScriptsPath) {
            var scripts;
            if (obj.zip.workerScripts) {
                if (scripts = obj.zip.workerScripts[type], !Array.isArray(scripts)) return void onerror(new Error("zip.workerScripts." + type + " is not an array!"));
                scripts = resolveURLs(scripts);
            } else (scripts = DEFAULT_WORKER_SCRIPTS[type].slice(0))[0] = (obj.zip.workerScriptsPath || "") + scripts[0];
            var worker = new Worker(scripts[0]);
            worker.codecTime = worker.crcTime = 0, worker.postMessage({
                type: "importScripts",
                scripts: scripts.slice(1)
            }), worker.addEventListener("message", onmessage), worker.addEventListener("error", errorHandler);
        } else onerror(new Error("Either zip.workerScripts or zip.workerScriptsPath may be set, not both."));
    }
    function onerror_default(error) {
        console.error(error);
    }
    var appendABViewSupported, ERR_BAD_FORMAT = "File format is not recognized.", ERR_CRC = "CRC failed.", ERR_ENCRYPTED = "File contains encrypted entry.", ERR_ZIP64 = "File is using Zip64 (4gb+ file size).", ERR_READ = "Error while reading zip file.", ERR_WRITE = "Error while writing zip file.", ERR_WRITE_DATA = "Error while writing file data.", ERR_READ_DATA = "Error while reading file data.", ERR_DUPLICATED_NAME = "File already exists.", CHUNK_SIZE = 524288, TEXT_PLAIN = "text/plain";
    try {
        appendABViewSupported = 0 === new Blob([ new DataView(new ArrayBuffer(0)) ]).size;
    } catch (e) {}
    Crc32.prototype.append = function(data) {
        for (var crc = 0 | this.crc, table = this.table, offset = 0, len = 0 | data.length; offset < len; offset++) crc = crc >>> 8 ^ table[255 & (crc ^ data[offset])];
        this.crc = crc;
    }, Crc32.prototype.get = function() {
        return ~this.crc;
    }, Crc32.prototype.table = function() {
        var i, j, t, table = [];
        for (i = 0; i < 256; i++) {
            for (t = i, j = 0; j < 8; j++) 1 & t ? t = t >>> 1 ^ 3988292384 : t >>>= 1;
            table[i] = t;
        }
        return table;
    }(), NOOP.prototype.append = function(bytes, onprogress) {
        return bytes;
    }, NOOP.prototype.flush = function() {}, (TextReader.prototype = new Reader()).constructor = TextReader, 
    (Data64URIReader.prototype = new Reader()).constructor = Data64URIReader, (BlobReader.prototype = new Reader()).constructor = BlobReader, 
    Writer.prototype.getData = function(callback) {
        callback(this.data);
    }, (TextWriter.prototype = new Writer()).constructor = TextWriter, (Data64URIWriter.prototype = new Writer()).constructor = Data64URIWriter, 
    (BlobWriter.prototype = new Writer()).constructor = BlobWriter;
    var DEFAULT_WORKER_SCRIPTS = {
        deflater: [ "z-worker.js", "deflate.js" ],
        inflater: [ "z-worker.js", "inflate.js" ]
    };
    obj.zip = {
        Reader: Reader,
        Writer: Writer,
        BlobReader: BlobReader,
        Data64URIReader: Data64URIReader,
        TextReader: TextReader,
        BlobWriter: BlobWriter,
        Data64URIWriter: Data64URIWriter,
        TextWriter: TextWriter,
        createReader: function(reader, callback, onerror) {
            onerror = onerror || onerror_default, reader.init(function() {
                createZipReader(reader, callback, onerror);
            }, onerror);
        },
        createWriter: function(writer, callback, onerror, dontDeflate) {
            onerror = onerror || onerror_default, dontDeflate = !!dontDeflate, writer.init(function() {
                createZipWriter(writer, callback, onerror, dontDeflate);
            }, onerror);
        },
        useWebWorkers: !0,
        workerScriptsPath: null,
        workerScripts: null
    };
}(this), function(global) {
    "use strict";
    function newTask(msg) {
        var CodecClass = global[msg.codecClass], sn = msg.sn;
        if (tasks[sn]) throw Error("duplicated sn");
        tasks[sn] = {
            codec: new CodecClass(msg.options),
            crcInput: "input" === msg.crcType,
            crcOutput: "output" === msg.crcType,
            crc: new Crc32()
        }, postMessage({
            type: "newTask",
            sn: sn
        });
    }
    function processData(msg) {
        var sn = msg.sn, type = msg.type, input = msg.data, task = tasks[sn];
        !task && msg.codecClass && (newTask(msg), task = tasks[sn]);
        var output, isAppend = "append" === type, start = now();
        if (isAppend) try {
            output = task.codec.append(input, function(loaded) {
                postMessage({
                    type: "progress",
                    sn: sn,
                    loaded: loaded
                });
            });
        } catch (e) {
            throw delete tasks[sn], e;
        } else delete tasks[sn], output = task.codec.flush();
        var codecTime = now() - start;
        start = now(), input && task.crcInput && task.crc.append(input), output && task.crcOutput && task.crc.append(output);
        var crcTime = now() - start, rmsg = {
            type: type,
            sn: sn,
            codecTime: codecTime,
            crcTime: crcTime
        }, transferables = [];
        output && (rmsg.data = output, transferables.push(output.buffer)), isAppend || !task.crcInput && !task.crcOutput || (rmsg.crc = task.crc.get());
        try {
            postMessage(rmsg, transferables);
        } catch (ex) {
            postMessage(rmsg);
        }
    }
    function onError(type, sn, e) {
        var msg = {
            type: type,
            sn: sn,
            error: formatError(e)
        };
        postMessage(msg);
    }
    function formatError(e) {
        return {
            message: e.message,
            stack: e.stack
        };
    }
    function Crc32() {
        this.crc = -1;
    }
    function NOOP() {}
    if (global.zWorkerInitialized) throw new Error("z-worker.js should be run only once");
    global.zWorkerInitialized = !0, addEventListener("message", function(event) {
        var message = event.data, type = message.type, sn = message.sn, handler = handlers[type];
        if (handler) try {
            handler(message);
        } catch (e) {
            onError(type, sn, e);
        }
    });
    var handlers = {
        importScripts: function(msg) {
            msg.scripts && msg.scripts.length > 0 && importScripts.apply(void 0, msg.scripts), 
            postMessage({
                type: "importScripts"
            });
        },
        newTask: newTask,
        append: processData,
        flush: processData
    }, tasks = {}, now = global.performance ? global.performance.now.bind(global.performance) : Date.now;
    Crc32.prototype.append = function(data) {
        for (var crc = 0 | this.crc, table = this.table, offset = 0, len = 0 | data.length; offset < len; offset++) crc = crc >>> 8 ^ table[255 & (crc ^ data[offset])];
        this.crc = crc;
    }, Crc32.prototype.get = function() {
        return ~this.crc;
    }, Crc32.prototype.table = function() {
        var i, j, t, table = [];
        for (i = 0; i < 256; i++) {
            for (t = i, j = 0; j < 8; j++) 1 & t ? t = t >>> 1 ^ 3988292384 : t >>>= 1;
            table[i] = t;
        }
        return table;
    }(), global.NOOP = NOOP, NOOP.prototype.append = function(bytes, onprogress) {
        return bytes;
    }, NOOP.prototype.flush = function() {};
}(this), function(global) {
    "use strict";
    function Tree() {
        function gen_bitlen(s) {
            var h, n, m, bits, xbits, f, tree = that.dyn_tree, stree = that.stat_desc.static_tree, extra = that.stat_desc.extra_bits, base = that.stat_desc.extra_base, max_length = that.stat_desc.max_length, overflow = 0;
            for (bits = 0; bits <= MAX_BITS; bits++) s.bl_count[bits] = 0;
            for (tree[2 * s.heap[s.heap_max] + 1] = 0, h = s.heap_max + 1; h < HEAP_SIZE; h++) (bits = tree[2 * tree[2 * (n = s.heap[h]) + 1] + 1] + 1) > max_length && (bits = max_length, 
            overflow++), tree[2 * n + 1] = bits, n > that.max_code || (s.bl_count[bits]++, xbits = 0, 
            n >= base && (xbits = extra[n - base]), f = tree[2 * n], s.opt_len += f * (bits + xbits), 
            stree && (s.static_len += f * (stree[2 * n + 1] + xbits)));
            if (0 !== overflow) {
                do {
                    for (bits = max_length - 1; 0 === s.bl_count[bits]; ) bits--;
                    s.bl_count[bits]--, s.bl_count[bits + 1] += 2, s.bl_count[max_length]--, overflow -= 2;
                } while (overflow > 0);
                for (bits = max_length; 0 !== bits; bits--) for (n = s.bl_count[bits]; 0 !== n; ) (m = s.heap[--h]) > that.max_code || (tree[2 * m + 1] != bits && (s.opt_len += (bits - tree[2 * m + 1]) * tree[2 * m], 
                tree[2 * m + 1] = bits), n--);
            }
        }
        function bi_reverse(code, len) {
            var res = 0;
            do {
                res |= 1 & code, code >>>= 1, res <<= 1;
            } while (--len > 0);
            return res >>> 1;
        }
        function gen_codes(tree, max_code, bl_count) {
            var bits, n, len, next_code = [], code = 0;
            for (bits = 1; bits <= MAX_BITS; bits++) next_code[bits] = code = code + bl_count[bits - 1] << 1;
            for (n = 0; n <= max_code; n++) 0 !== (len = tree[2 * n + 1]) && (tree[2 * n] = bi_reverse(next_code[len]++, len));
        }
        var that = this;
        that.build_tree = function(s) {
            var n, m, node, tree = that.dyn_tree, stree = that.stat_desc.static_tree, elems = that.stat_desc.elems, max_code = -1;
            for (s.heap_len = 0, s.heap_max = HEAP_SIZE, n = 0; n < elems; n++) 0 !== tree[2 * n] ? (s.heap[++s.heap_len] = max_code = n, 
            s.depth[n] = 0) : tree[2 * n + 1] = 0;
            for (;s.heap_len < 2; ) tree[2 * (node = s.heap[++s.heap_len] = max_code < 2 ? ++max_code : 0)] = 1, 
            s.depth[node] = 0, s.opt_len--, stree && (s.static_len -= stree[2 * node + 1]);
            for (that.max_code = max_code, n = Math.floor(s.heap_len / 2); n >= 1; n--) s.pqdownheap(tree, n);
            node = elems;
            do {
                n = s.heap[1], s.heap[1] = s.heap[s.heap_len--], s.pqdownheap(tree, 1), m = s.heap[1], 
                s.heap[--s.heap_max] = n, s.heap[--s.heap_max] = m, tree[2 * node] = tree[2 * n] + tree[2 * m], 
                s.depth[node] = Math.max(s.depth[n], s.depth[m]) + 1, tree[2 * n + 1] = tree[2 * m + 1] = node, 
                s.heap[1] = node++, s.pqdownheap(tree, 1);
            } while (s.heap_len >= 2);
            s.heap[--s.heap_max] = s.heap[1], gen_bitlen(s), gen_codes(tree, that.max_code, s.bl_count);
        };
    }
    function StaticTree(static_tree, extra_bits, extra_base, elems, max_length) {
        var that = this;
        that.static_tree = static_tree, that.extra_bits = extra_bits, that.extra_base = extra_base, 
        that.elems = elems, that.max_length = max_length;
    }
    function Config(good_length, max_lazy, nice_length, max_chain, func) {
        var that = this;
        that.good_length = good_length, that.max_lazy = max_lazy, that.nice_length = nice_length, 
        that.max_chain = max_chain, that.func = func;
    }
    function smaller(tree, n, m, depth) {
        var tn2 = tree[2 * n], tm2 = tree[2 * m];
        return tn2 < tm2 || tn2 == tm2 && depth[n] <= depth[m];
    }
    function Deflate() {
        function lm_init() {
            var i;
            for (window_size = 2 * w_size, head[hash_size - 1] = 0, i = 0; i < hash_size - 1; i++) head[i] = 0;
            max_lazy_match = config_table[level].max_lazy, good_match = config_table[level].good_length, 
            nice_match = config_table[level].nice_length, max_chain_length = config_table[level].max_chain, 
            strstart = 0, block_start = 0, lookahead = 0, match_length = prev_length = MIN_MATCH - 1, 
            match_available = 0, ins_h = 0;
        }
        function init_block() {
            var i;
            for (i = 0; i < L_CODES; i++) dyn_ltree[2 * i] = 0;
            for (i = 0; i < D_CODES; i++) dyn_dtree[2 * i] = 0;
            for (i = 0; i < BL_CODES; i++) bl_tree[2 * i] = 0;
            dyn_ltree[2 * END_BLOCK] = 1, that.opt_len = that.static_len = 0, last_lit = matches = 0;
        }
        function tr_init() {
            l_desc.dyn_tree = dyn_ltree, l_desc.stat_desc = StaticTree.static_l_desc, d_desc.dyn_tree = dyn_dtree, 
            d_desc.stat_desc = StaticTree.static_d_desc, bl_desc.dyn_tree = bl_tree, bl_desc.stat_desc = StaticTree.static_bl_desc, 
            bi_buf = 0, bi_valid = 0, last_eob_len = 8, init_block();
        }
        function scan_tree(tree, max_code) {
            var n, curlen, prevlen = -1, nextlen = tree[1], count = 0, max_count = 7, min_count = 4;
            for (0 === nextlen && (max_count = 138, min_count = 3), tree[2 * (max_code + 1) + 1] = 65535, 
            n = 0; n <= max_code; n++) curlen = nextlen, nextlen = tree[2 * (n + 1) + 1], ++count < max_count && curlen == nextlen || (count < min_count ? bl_tree[2 * curlen] += count : 0 !== curlen ? (curlen != prevlen && bl_tree[2 * curlen]++, 
            bl_tree[2 * REP_3_6]++) : count <= 10 ? bl_tree[2 * REPZ_3_10]++ : bl_tree[2 * REPZ_11_138]++, 
            count = 0, prevlen = curlen, 0 === nextlen ? (max_count = 138, min_count = 3) : curlen == nextlen ? (max_count = 6, 
            min_count = 3) : (max_count = 7, min_count = 4));
        }
        function build_bl_tree() {
            var max_blindex;
            for (scan_tree(dyn_ltree, l_desc.max_code), scan_tree(dyn_dtree, d_desc.max_code), 
            bl_desc.build_tree(that), max_blindex = BL_CODES - 1; max_blindex >= 3 && 0 === bl_tree[2 * Tree.bl_order[max_blindex] + 1]; max_blindex--) ;
            return that.opt_len += 3 * (max_blindex + 1) + 5 + 5 + 4, max_blindex;
        }
        function put_byte(p) {
            that.pending_buf[that.pending++] = p;
        }
        function put_short(w) {
            put_byte(255 & w), put_byte(w >>> 8 & 255);
        }
        function putShortMSB(b) {
            put_byte(b >> 8 & 255), put_byte(255 & b);
        }
        function send_bits(value, length) {
            var val, len = length;
            bi_valid > Buf_size - len ? (put_short(bi_buf |= (val = value) << bi_valid & 65535), 
            bi_buf = val >>> Buf_size - bi_valid, bi_valid += len - Buf_size) : (bi_buf |= value << bi_valid & 65535, 
            bi_valid += len);
        }
        function send_code(c, tree) {
            var c2 = 2 * c;
            send_bits(65535 & tree[c2], 65535 & tree[c2 + 1]);
        }
        function send_tree(tree, max_code) {
            var n, curlen, prevlen = -1, nextlen = tree[1], count = 0, max_count = 7, min_count = 4;
            for (0 === nextlen && (max_count = 138, min_count = 3), n = 0; n <= max_code; n++) if (curlen = nextlen, 
            nextlen = tree[2 * (n + 1) + 1], !(++count < max_count && curlen == nextlen)) {
                if (count < min_count) do {
                    send_code(curlen, bl_tree);
                } while (0 != --count); else 0 !== curlen ? (curlen != prevlen && (send_code(curlen, bl_tree), 
                count--), send_code(REP_3_6, bl_tree), send_bits(count - 3, 2)) : count <= 10 ? (send_code(REPZ_3_10, bl_tree), 
                send_bits(count - 3, 3)) : (send_code(REPZ_11_138, bl_tree), send_bits(count - 11, 7));
                count = 0, prevlen = curlen, 0 === nextlen ? (max_count = 138, min_count = 3) : curlen == nextlen ? (max_count = 6, 
                min_count = 3) : (max_count = 7, min_count = 4);
            }
        }
        function send_all_trees(lcodes, dcodes, blcodes) {
            var rank;
            for (send_bits(lcodes - 257, 5), send_bits(dcodes - 1, 5), send_bits(blcodes - 4, 4), 
            rank = 0; rank < blcodes; rank++) send_bits(bl_tree[2 * Tree.bl_order[rank] + 1], 3);
            send_tree(dyn_ltree, lcodes - 1), send_tree(dyn_dtree, dcodes - 1);
        }
        function bi_flush() {
            16 == bi_valid ? (put_short(bi_buf), bi_buf = 0, bi_valid = 0) : bi_valid >= 8 && (put_byte(255 & bi_buf), 
            bi_buf >>>= 8, bi_valid -= 8);
        }
        function _tr_align() {
            send_bits(STATIC_TREES << 1, 3), send_code(END_BLOCK, StaticTree.static_ltree), 
            bi_flush(), 1 + last_eob_len + 10 - bi_valid < 9 && (send_bits(STATIC_TREES << 1, 3), 
            send_code(END_BLOCK, StaticTree.static_ltree), bi_flush()), last_eob_len = 7;
        }
        function _tr_tally(dist, lc) {
            var out_length, in_length, dcode;
            if (that.pending_buf[d_buf + 2 * last_lit] = dist >>> 8 & 255, that.pending_buf[d_buf + 2 * last_lit + 1] = 255 & dist, 
            that.pending_buf[l_buf + last_lit] = 255 & lc, last_lit++, 0 === dist ? dyn_ltree[2 * lc]++ : (matches++, 
            dist--, dyn_ltree[2 * (Tree._length_code[lc] + LITERALS + 1)]++, dyn_dtree[2 * Tree.d_code(dist)]++), 
            0 == (8191 & last_lit) && level > 2) {
                for (out_length = 8 * last_lit, in_length = strstart - block_start, dcode = 0; dcode < D_CODES; dcode++) out_length += dyn_dtree[2 * dcode] * (5 + Tree.extra_dbits[dcode]);
                if (out_length >>>= 3, matches < Math.floor(last_lit / 2) && out_length < Math.floor(in_length / 2)) return !0;
            }
            return last_lit == lit_bufsize - 1;
        }
        function compress_block(ltree, dtree) {
            var dist, lc, code, extra, lx = 0;
            if (0 !== last_lit) do {
                dist = that.pending_buf[d_buf + 2 * lx] << 8 & 65280 | 255 & that.pending_buf[d_buf + 2 * lx + 1], 
                lc = 255 & that.pending_buf[l_buf + lx], lx++, 0 === dist ? send_code(lc, ltree) : (send_code((code = Tree._length_code[lc]) + LITERALS + 1, ltree), 
                0 !== (extra = Tree.extra_lbits[code]) && send_bits(lc -= Tree.base_length[code], extra), 
                dist--, send_code(code = Tree.d_code(dist), dtree), 0 !== (extra = Tree.extra_dbits[code]) && send_bits(dist -= Tree.base_dist[code], extra));
            } while (lx < last_lit);
            send_code(END_BLOCK, ltree), last_eob_len = ltree[2 * END_BLOCK + 1];
        }
        function bi_windup() {
            bi_valid > 8 ? put_short(bi_buf) : bi_valid > 0 && put_byte(255 & bi_buf), bi_buf = 0, 
            bi_valid = 0;
        }
        function copy_block(buf, len, header) {
            bi_windup(), last_eob_len = 8, header && (put_short(len), put_short(~len)), that.pending_buf.set(window.subarray(buf, buf + len), that.pending), 
            that.pending += len;
        }
        function _tr_stored_block(buf, stored_len, eof) {
            send_bits((STORED_BLOCK << 1) + (eof ? 1 : 0), 3), copy_block(buf, stored_len, !0);
        }
        function _tr_flush_block(buf, stored_len, eof) {
            var opt_lenb, static_lenb, max_blindex = 0;
            level > 0 ? (l_desc.build_tree(that), d_desc.build_tree(that), max_blindex = build_bl_tree(), 
            opt_lenb = that.opt_len + 3 + 7 >>> 3, (static_lenb = that.static_len + 3 + 7 >>> 3) <= opt_lenb && (opt_lenb = static_lenb)) : opt_lenb = static_lenb = stored_len + 5, 
            stored_len + 4 <= opt_lenb && -1 != buf ? _tr_stored_block(buf, stored_len, eof) : static_lenb == opt_lenb ? (send_bits((STATIC_TREES << 1) + (eof ? 1 : 0), 3), 
            compress_block(StaticTree.static_ltree, StaticTree.static_dtree)) : (send_bits((DYN_TREES << 1) + (eof ? 1 : 0), 3), 
            send_all_trees(l_desc.max_code + 1, d_desc.max_code + 1, max_blindex + 1), compress_block(dyn_ltree, dyn_dtree)), 
            init_block(), eof && bi_windup();
        }
        function flush_block_only(eof) {
            _tr_flush_block(block_start >= 0 ? block_start : -1, strstart - block_start, eof), 
            block_start = strstart, strm.flush_pending();
        }
        function fill_window() {
            var n, m, p, more;
            do {
                if (0 === (more = window_size - lookahead - strstart) && 0 === strstart && 0 === lookahead) more = w_size; else if (-1 == more) more--; else if (strstart >= w_size + w_size - MIN_LOOKAHEAD) {
                    window.set(window.subarray(w_size, w_size + w_size), 0), match_start -= w_size, 
                    strstart -= w_size, block_start -= w_size, p = n = hash_size;
                    do {
                        m = 65535 & head[--p], head[p] = m >= w_size ? m - w_size : 0;
                    } while (0 != --n);
                    p = n = w_size;
                    do {
                        m = 65535 & prev[--p], prev[p] = m >= w_size ? m - w_size : 0;
                    } while (0 != --n);
                    more += w_size;
                }
                if (0 === strm.avail_in) return;
                n = strm.read_buf(window, strstart + lookahead, more), (lookahead += n) >= MIN_MATCH && (ins_h = 255 & window[strstart], 
                ins_h = (ins_h << hash_shift ^ 255 & window[strstart + 1]) & hash_mask);
            } while (lookahead < MIN_LOOKAHEAD && 0 !== strm.avail_in);
        }
        function deflate_stored(flush) {
            var max_start, max_block_size = 65535;
            for (max_block_size > pending_buf_size - 5 && (max_block_size = pending_buf_size - 5); ;) {
                if (lookahead <= 1) {
                    if (fill_window(), 0 === lookahead && flush == Z_NO_FLUSH) return NeedMore;
                    if (0 === lookahead) break;
                }
                if (strstart += lookahead, lookahead = 0, max_start = block_start + max_block_size, 
                (0 === strstart || strstart >= max_start) && (lookahead = strstart - max_start, 
                strstart = max_start, flush_block_only(!1), 0 === strm.avail_out)) return NeedMore;
                if (strstart - block_start >= w_size - MIN_LOOKAHEAD && (flush_block_only(!1), 0 === strm.avail_out)) return NeedMore;
            }
            return flush_block_only(flush == Z_FINISH), 0 === strm.avail_out ? flush == Z_FINISH ? FinishStarted : NeedMore : flush == Z_FINISH ? FinishDone : BlockDone;
        }
        function longest_match(cur_match) {
            var match, len, chain_length = max_chain_length, scan = strstart, best_len = prev_length, limit = strstart > w_size - MIN_LOOKAHEAD ? strstart - (w_size - MIN_LOOKAHEAD) : 0, _nice_match = nice_match, wmask = w_mask, strend = strstart + MAX_MATCH, scan_end1 = window[scan + best_len - 1], scan_end = window[scan + best_len];
            prev_length >= good_match && (chain_length >>= 2), _nice_match > lookahead && (_nice_match = lookahead);
            do {
                if (match = cur_match, window[match + best_len] == scan_end && window[match + best_len - 1] == scan_end1 && window[match] == window[scan] && window[++match] == window[scan + 1]) {
                    scan += 2, match++;
                    do {} while (window[++scan] == window[++match] && window[++scan] == window[++match] && window[++scan] == window[++match] && window[++scan] == window[++match] && window[++scan] == window[++match] && window[++scan] == window[++match] && window[++scan] == window[++match] && window[++scan] == window[++match] && scan < strend);
                    if (len = MAX_MATCH - (strend - scan), scan = strend - MAX_MATCH, len > best_len) {
                        if (match_start = cur_match, best_len = len, len >= _nice_match) break;
                        scan_end1 = window[scan + best_len - 1], scan_end = window[scan + best_len];
                    }
                }
            } while ((cur_match = 65535 & prev[cur_match & wmask]) > limit && 0 != --chain_length);
            return best_len <= lookahead ? best_len : lookahead;
        }
        function deflate_fast(flush) {
            for (var bflush, hash_head = 0; ;) {
                if (lookahead < MIN_LOOKAHEAD) {
                    if (fill_window(), lookahead < MIN_LOOKAHEAD && flush == Z_NO_FLUSH) return NeedMore;
                    if (0 === lookahead) break;
                }
                if (lookahead >= MIN_MATCH && (ins_h = (ins_h << hash_shift ^ 255 & window[strstart + (MIN_MATCH - 1)]) & hash_mask, 
                hash_head = 65535 & head[ins_h], prev[strstart & w_mask] = head[ins_h], head[ins_h] = strstart), 
                0 !== hash_head && (strstart - hash_head & 65535) <= w_size - MIN_LOOKAHEAD && strategy != Z_HUFFMAN_ONLY && (match_length = longest_match(hash_head)), 
                match_length >= MIN_MATCH) if (bflush = _tr_tally(strstart - match_start, match_length - MIN_MATCH), 
                lookahead -= match_length, match_length <= max_lazy_match && lookahead >= MIN_MATCH) {
                    match_length--;
                    do {
                        ins_h = (ins_h << hash_shift ^ 255 & window[++strstart + (MIN_MATCH - 1)]) & hash_mask, 
                        hash_head = 65535 & head[ins_h], prev[strstart & w_mask] = head[ins_h], head[ins_h] = strstart;
                    } while (0 != --match_length);
                    strstart++;
                } else strstart += match_length, match_length = 0, ins_h = 255 & window[strstart], 
                ins_h = (ins_h << hash_shift ^ 255 & window[strstart + 1]) & hash_mask; else bflush = _tr_tally(0, 255 & window[strstart]), 
                lookahead--, strstart++;
                if (bflush && (flush_block_only(!1), 0 === strm.avail_out)) return NeedMore;
            }
            return flush_block_only(flush == Z_FINISH), 0 === strm.avail_out ? flush == Z_FINISH ? FinishStarted : NeedMore : flush == Z_FINISH ? FinishDone : BlockDone;
        }
        function deflate_slow(flush) {
            for (var bflush, max_insert, hash_head = 0; ;) {
                if (lookahead < MIN_LOOKAHEAD) {
                    if (fill_window(), lookahead < MIN_LOOKAHEAD && flush == Z_NO_FLUSH) return NeedMore;
                    if (0 === lookahead) break;
                }
                if (lookahead >= MIN_MATCH && (ins_h = (ins_h << hash_shift ^ 255 & window[strstart + (MIN_MATCH - 1)]) & hash_mask, 
                hash_head = 65535 & head[ins_h], prev[strstart & w_mask] = head[ins_h], head[ins_h] = strstart), 
                prev_length = match_length, prev_match = match_start, match_length = MIN_MATCH - 1, 
                0 !== hash_head && prev_length < max_lazy_match && (strstart - hash_head & 65535) <= w_size - MIN_LOOKAHEAD && (strategy != Z_HUFFMAN_ONLY && (match_length = longest_match(hash_head)), 
                match_length <= 5 && (strategy == Z_FILTERED || match_length == MIN_MATCH && strstart - match_start > 4096) && (match_length = MIN_MATCH - 1)), 
                prev_length >= MIN_MATCH && match_length <= prev_length) {
                    max_insert = strstart + lookahead - MIN_MATCH, bflush = _tr_tally(strstart - 1 - prev_match, prev_length - MIN_MATCH), 
                    lookahead -= prev_length - 1, prev_length -= 2;
                    do {
                        ++strstart <= max_insert && (ins_h = (ins_h << hash_shift ^ 255 & window[strstart + (MIN_MATCH - 1)]) & hash_mask, 
                        hash_head = 65535 & head[ins_h], prev[strstart & w_mask] = head[ins_h], head[ins_h] = strstart);
                    } while (0 != --prev_length);
                    if (match_available = 0, match_length = MIN_MATCH - 1, strstart++, bflush && (flush_block_only(!1), 
                    0 === strm.avail_out)) return NeedMore;
                } else if (0 !== match_available) {
                    if ((bflush = _tr_tally(0, 255 & window[strstart - 1])) && flush_block_only(!1), 
                    strstart++, lookahead--, 0 === strm.avail_out) return NeedMore;
                } else match_available = 1, strstart++, lookahead--;
            }
            return 0 !== match_available && (bflush = _tr_tally(0, 255 & window[strstart - 1]), 
            match_available = 0), flush_block_only(flush == Z_FINISH), 0 === strm.avail_out ? flush == Z_FINISH ? FinishStarted : NeedMore : flush == Z_FINISH ? FinishDone : BlockDone;
        }
        function deflateReset(strm) {
            return strm.total_in = strm.total_out = 0, strm.msg = null, that.pending = 0, that.pending_out = 0, 
            status = BUSY_STATE, last_flush = Z_NO_FLUSH, tr_init(), lm_init(), Z_OK;
        }
        var strm, status, pending_buf_size, method, last_flush, w_size, w_bits, w_mask, window, window_size, prev, head, ins_h, hash_size, hash_bits, hash_mask, hash_shift, block_start, match_length, prev_match, match_available, strstart, match_start, lookahead, prev_length, max_chain_length, max_lazy_match, level, strategy, good_match, nice_match, dyn_ltree, dyn_dtree, bl_tree, that = this, l_desc = new Tree(), d_desc = new Tree(), bl_desc = new Tree();
        that.depth = [];
        var l_buf, lit_bufsize, last_lit, d_buf, matches, last_eob_len, bi_buf, bi_valid;
        that.bl_count = [], that.heap = [], dyn_ltree = [], dyn_dtree = [], bl_tree = [], 
        that.pqdownheap = function(tree, k) {
            for (var heap = that.heap, v = heap[k], j = k << 1; j <= that.heap_len && (j < that.heap_len && smaller(tree, heap[j + 1], heap[j], that.depth) && j++, 
            !smaller(tree, v, heap[j], that.depth)); ) heap[k] = heap[j], k = j, j <<= 1;
            heap[k] = v;
        }, that.deflateInit = function(strm, _level, bits, _method, memLevel, _strategy) {
            return _method || (_method = Z_DEFLATED), memLevel || (memLevel = DEF_MEM_LEVEL), 
            _strategy || (_strategy = Z_DEFAULT_STRATEGY), strm.msg = null, _level == Z_DEFAULT_COMPRESSION && (_level = 6), 
            memLevel < 1 || memLevel > MAX_MEM_LEVEL || _method != Z_DEFLATED || bits < 9 || bits > 15 || _level < 0 || _level > 9 || _strategy < 0 || _strategy > Z_HUFFMAN_ONLY ? Z_STREAM_ERROR : (strm.dstate = that, 
            w_bits = bits, w_size = 1 << w_bits, w_mask = w_size - 1, hash_bits = memLevel + 7, 
            hash_size = 1 << hash_bits, hash_mask = hash_size - 1, hash_shift = Math.floor((hash_bits + MIN_MATCH - 1) / MIN_MATCH), 
            window = new Uint8Array(2 * w_size), prev = [], head = [], lit_bufsize = 1 << memLevel + 6, 
            that.pending_buf = new Uint8Array(4 * lit_bufsize), pending_buf_size = 4 * lit_bufsize, 
            d_buf = Math.floor(lit_bufsize / 2), l_buf = 3 * lit_bufsize, level = _level, strategy = _strategy, 
            method = 255 & _method, deflateReset(strm));
        }, that.deflateEnd = function() {
            return status != INIT_STATE && status != BUSY_STATE && status != FINISH_STATE ? Z_STREAM_ERROR : (that.pending_buf = null, 
            head = null, prev = null, window = null, that.dstate = null, status == BUSY_STATE ? Z_DATA_ERROR : Z_OK);
        }, that.deflateParams = function(strm, _level, _strategy) {
            var err = Z_OK;
            return _level == Z_DEFAULT_COMPRESSION && (_level = 6), _level < 0 || _level > 9 || _strategy < 0 || _strategy > Z_HUFFMAN_ONLY ? Z_STREAM_ERROR : (config_table[level].func != config_table[_level].func && 0 !== strm.total_in && (err = strm.deflate(Z_PARTIAL_FLUSH)), 
            level != _level && (max_lazy_match = config_table[level = _level].max_lazy, good_match = config_table[level].good_length, 
            nice_match = config_table[level].nice_length, max_chain_length = config_table[level].max_chain), 
            strategy = _strategy, err);
        }, that.deflateSetDictionary = function(strm, dictionary, dictLength) {
            var n, length = dictLength, index = 0;
            if (!dictionary || status != INIT_STATE) return Z_STREAM_ERROR;
            if (length < MIN_MATCH) return Z_OK;
            for (length > w_size - MIN_LOOKAHEAD && (index = dictLength - (length = w_size - MIN_LOOKAHEAD)), 
            window.set(dictionary.subarray(index, index + length), 0), strstart = length, block_start = length, 
            ins_h = 255 & window[0], ins_h = (ins_h << hash_shift ^ 255 & window[1]) & hash_mask, 
            n = 0; n <= length - MIN_MATCH; n++) ins_h = (ins_h << hash_shift ^ 255 & window[n + (MIN_MATCH - 1)]) & hash_mask, 
            prev[n & w_mask] = head[ins_h], head[ins_h] = n;
            return Z_OK;
        }, that.deflate = function(_strm, flush) {
            var i, header, level_flags, old_flush, bstate;
            if (flush > Z_FINISH || flush < 0) return Z_STREAM_ERROR;
            if (!_strm.next_out || !_strm.next_in && 0 !== _strm.avail_in || status == FINISH_STATE && flush != Z_FINISH) return _strm.msg = z_errmsg[Z_NEED_DICT - Z_STREAM_ERROR], 
            Z_STREAM_ERROR;
            if (0 === _strm.avail_out) return _strm.msg = z_errmsg[Z_NEED_DICT - Z_BUF_ERROR], 
            Z_BUF_ERROR;
            if (strm = _strm, old_flush = last_flush, last_flush = flush, status == INIT_STATE && (header = Z_DEFLATED + (w_bits - 8 << 4) << 8, 
            (level_flags = (level - 1 & 255) >> 1) > 3 && (level_flags = 3), header |= level_flags << 6, 
            0 !== strstart && (header |= PRESET_DICT), status = BUSY_STATE, putShortMSB(header += 31 - header % 31)), 
            0 !== that.pending) {
                if (strm.flush_pending(), 0 === strm.avail_out) return last_flush = -1, Z_OK;
            } else if (0 === strm.avail_in && flush <= old_flush && flush != Z_FINISH) return strm.msg = z_errmsg[Z_NEED_DICT - Z_BUF_ERROR], 
            Z_BUF_ERROR;
            if (status == FINISH_STATE && 0 !== strm.avail_in) return _strm.msg = z_errmsg[Z_NEED_DICT - Z_BUF_ERROR], 
            Z_BUF_ERROR;
            if (0 !== strm.avail_in || 0 !== lookahead || flush != Z_NO_FLUSH && status != FINISH_STATE) {
                switch (bstate = -1, config_table[level].func) {
                  case STORED:
                    bstate = deflate_stored(flush);
                    break;

                  case FAST:
                    bstate = deflate_fast(flush);
                    break;

                  case SLOW:
                    bstate = deflate_slow(flush);
                }
                if (bstate != FinishStarted && bstate != FinishDone || (status = FINISH_STATE), 
                bstate == NeedMore || bstate == FinishStarted) return 0 === strm.avail_out && (last_flush = -1), 
                Z_OK;
                if (bstate == BlockDone) {
                    if (flush == Z_PARTIAL_FLUSH) _tr_align(); else if (_tr_stored_block(0, 0, !1), 
                    flush == Z_FULL_FLUSH) for (i = 0; i < hash_size; i++) head[i] = 0;
                    if (strm.flush_pending(), 0 === strm.avail_out) return last_flush = -1, Z_OK;
                }
            }
            return flush != Z_FINISH ? Z_OK : Z_STREAM_END;
        };
    }
    function ZStream() {
        var that = this;
        that.next_in_index = 0, that.next_out_index = 0, that.avail_in = 0, that.total_in = 0, 
        that.avail_out = 0, that.total_out = 0;
    }
    var MAX_BITS = 15, D_CODES = 30, BL_CODES = 19, LITERALS = 256, L_CODES = LITERALS + 1 + 29, HEAP_SIZE = 2 * L_CODES + 1, END_BLOCK = 256, REP_3_6 = 16, REPZ_3_10 = 17, REPZ_11_138 = 18, Buf_size = 16, Z_DEFAULT_COMPRESSION = -1, Z_FILTERED = 1, Z_HUFFMAN_ONLY = 2, Z_DEFAULT_STRATEGY = 0, Z_NO_FLUSH = 0, Z_PARTIAL_FLUSH = 1, Z_FULL_FLUSH = 3, Z_FINISH = 4, Z_OK = 0, Z_STREAM_END = 1, Z_NEED_DICT = 2, Z_STREAM_ERROR = -2, Z_DATA_ERROR = -3, Z_BUF_ERROR = -5, _dist_code = [ 0, 1, 2, 3, 4, 4, 5, 5, 6, 6, 6, 6, 7, 7, 7, 7, 8, 8, 8, 8, 8, 8, 8, 8, 9, 9, 9, 9, 9, 9, 9, 9, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 0, 0, 16, 17, 18, 18, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 22, 22, 22, 22, 22, 22, 22, 22, 23, 23, 23, 23, 23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29 ];
    Tree._length_code = [ 0, 1, 2, 3, 4, 5, 6, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 12, 12, 13, 13, 13, 13, 14, 14, 14, 14, 15, 15, 15, 15, 16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 17, 17, 17, 17, 18, 18, 18, 18, 18, 18, 18, 18, 19, 19, 19, 19, 19, 19, 19, 19, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 28 ], 
    Tree.base_length = [ 0, 1, 2, 3, 4, 5, 6, 7, 8, 10, 12, 14, 16, 20, 24, 28, 32, 40, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 0 ], 
    Tree.base_dist = [ 0, 1, 2, 3, 4, 6, 8, 12, 16, 24, 32, 48, 64, 96, 128, 192, 256, 384, 512, 768, 1024, 1536, 2048, 3072, 4096, 6144, 8192, 12288, 16384, 24576 ], 
    Tree.d_code = function(dist) {
        return dist < 256 ? _dist_code[dist] : _dist_code[256 + (dist >>> 7)];
    }, Tree.extra_lbits = [ 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0 ], 
    Tree.extra_dbits = [ 0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13 ], 
    Tree.extra_blbits = [ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 7 ], 
    Tree.bl_order = [ 16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15 ], 
    StaticTree.static_ltree = [ 12, 8, 140, 8, 76, 8, 204, 8, 44, 8, 172, 8, 108, 8, 236, 8, 28, 8, 156, 8, 92, 8, 220, 8, 60, 8, 188, 8, 124, 8, 252, 8, 2, 8, 130, 8, 66, 8, 194, 8, 34, 8, 162, 8, 98, 8, 226, 8, 18, 8, 146, 8, 82, 8, 210, 8, 50, 8, 178, 8, 114, 8, 242, 8, 10, 8, 138, 8, 74, 8, 202, 8, 42, 8, 170, 8, 106, 8, 234, 8, 26, 8, 154, 8, 90, 8, 218, 8, 58, 8, 186, 8, 122, 8, 250, 8, 6, 8, 134, 8, 70, 8, 198, 8, 38, 8, 166, 8, 102, 8, 230, 8, 22, 8, 150, 8, 86, 8, 214, 8, 54, 8, 182, 8, 118, 8, 246, 8, 14, 8, 142, 8, 78, 8, 206, 8, 46, 8, 174, 8, 110, 8, 238, 8, 30, 8, 158, 8, 94, 8, 222, 8, 62, 8, 190, 8, 126, 8, 254, 8, 1, 8, 129, 8, 65, 8, 193, 8, 33, 8, 161, 8, 97, 8, 225, 8, 17, 8, 145, 8, 81, 8, 209, 8, 49, 8, 177, 8, 113, 8, 241, 8, 9, 8, 137, 8, 73, 8, 201, 8, 41, 8, 169, 8, 105, 8, 233, 8, 25, 8, 153, 8, 89, 8, 217, 8, 57, 8, 185, 8, 121, 8, 249, 8, 5, 8, 133, 8, 69, 8, 197, 8, 37, 8, 165, 8, 101, 8, 229, 8, 21, 8, 149, 8, 85, 8, 213, 8, 53, 8, 181, 8, 117, 8, 245, 8, 13, 8, 141, 8, 77, 8, 205, 8, 45, 8, 173, 8, 109, 8, 237, 8, 29, 8, 157, 8, 93, 8, 221, 8, 61, 8, 189, 8, 125, 8, 253, 8, 19, 9, 275, 9, 147, 9, 403, 9, 83, 9, 339, 9, 211, 9, 467, 9, 51, 9, 307, 9, 179, 9, 435, 9, 115, 9, 371, 9, 243, 9, 499, 9, 11, 9, 267, 9, 139, 9, 395, 9, 75, 9, 331, 9, 203, 9, 459, 9, 43, 9, 299, 9, 171, 9, 427, 9, 107, 9, 363, 9, 235, 9, 491, 9, 27, 9, 283, 9, 155, 9, 411, 9, 91, 9, 347, 9, 219, 9, 475, 9, 59, 9, 315, 9, 187, 9, 443, 9, 123, 9, 379, 9, 251, 9, 507, 9, 7, 9, 263, 9, 135, 9, 391, 9, 71, 9, 327, 9, 199, 9, 455, 9, 39, 9, 295, 9, 167, 9, 423, 9, 103, 9, 359, 9, 231, 9, 487, 9, 23, 9, 279, 9, 151, 9, 407, 9, 87, 9, 343, 9, 215, 9, 471, 9, 55, 9, 311, 9, 183, 9, 439, 9, 119, 9, 375, 9, 247, 9, 503, 9, 15, 9, 271, 9, 143, 9, 399, 9, 79, 9, 335, 9, 207, 9, 463, 9, 47, 9, 303, 9, 175, 9, 431, 9, 111, 9, 367, 9, 239, 9, 495, 9, 31, 9, 287, 9, 159, 9, 415, 9, 95, 9, 351, 9, 223, 9, 479, 9, 63, 9, 319, 9, 191, 9, 447, 9, 127, 9, 383, 9, 255, 9, 511, 9, 0, 7, 64, 7, 32, 7, 96, 7, 16, 7, 80, 7, 48, 7, 112, 7, 8, 7, 72, 7, 40, 7, 104, 7, 24, 7, 88, 7, 56, 7, 120, 7, 4, 7, 68, 7, 36, 7, 100, 7, 20, 7, 84, 7, 52, 7, 116, 7, 3, 8, 131, 8, 67, 8, 195, 8, 35, 8, 163, 8, 99, 8, 227, 8 ], 
    StaticTree.static_dtree = [ 0, 5, 16, 5, 8, 5, 24, 5, 4, 5, 20, 5, 12, 5, 28, 5, 2, 5, 18, 5, 10, 5, 26, 5, 6, 5, 22, 5, 14, 5, 30, 5, 1, 5, 17, 5, 9, 5, 25, 5, 5, 5, 21, 5, 13, 5, 29, 5, 3, 5, 19, 5, 11, 5, 27, 5, 7, 5, 23, 5 ], 
    StaticTree.static_l_desc = new StaticTree(StaticTree.static_ltree, Tree.extra_lbits, LITERALS + 1, L_CODES, MAX_BITS), 
    StaticTree.static_d_desc = new StaticTree(StaticTree.static_dtree, Tree.extra_dbits, 0, D_CODES, MAX_BITS), 
    StaticTree.static_bl_desc = new StaticTree(null, Tree.extra_blbits, 0, BL_CODES, 7);
    var MAX_MEM_LEVEL = 9, DEF_MEM_LEVEL = 8, STORED = 0, FAST = 1, SLOW = 2, config_table = [ new Config(0, 0, 0, 0, STORED), new Config(4, 4, 8, 4, FAST), new Config(4, 5, 16, 8, FAST), new Config(4, 6, 32, 32, FAST), new Config(4, 4, 16, 16, SLOW), new Config(8, 16, 32, 32, SLOW), new Config(8, 16, 128, 128, SLOW), new Config(8, 32, 128, 256, SLOW), new Config(32, 128, 258, 1024, SLOW), new Config(32, 258, 258, 4096, SLOW) ], z_errmsg = [ "need dictionary", "stream end", "", "", "stream error", "data error", "", "buffer error", "", "" ], NeedMore = 0, BlockDone = 1, FinishStarted = 2, FinishDone = 3, PRESET_DICT = 32, INIT_STATE = 42, BUSY_STATE = 113, FINISH_STATE = 666, Z_DEFLATED = 8, STORED_BLOCK = 0, STATIC_TREES = 1, DYN_TREES = 2, MIN_MATCH = 3, MAX_MATCH = 258, MIN_LOOKAHEAD = MAX_MATCH + MIN_MATCH + 1;
    ZStream.prototype = {
        deflateInit: function(level, bits) {
            var that = this;
            return that.dstate = new Deflate(), bits || (bits = MAX_BITS), that.dstate.deflateInit(that, level, bits);
        },
        deflate: function(flush) {
            var that = this;
            return that.dstate ? that.dstate.deflate(that, flush) : Z_STREAM_ERROR;
        },
        deflateEnd: function() {
            var that = this;
            if (!that.dstate) return Z_STREAM_ERROR;
            var ret = that.dstate.deflateEnd();
            return that.dstate = null, ret;
        },
        deflateParams: function(level, strategy) {
            var that = this;
            return that.dstate ? that.dstate.deflateParams(that, level, strategy) : Z_STREAM_ERROR;
        },
        deflateSetDictionary: function(dictionary, dictLength) {
            var that = this;
            return that.dstate ? that.dstate.deflateSetDictionary(that, dictionary, dictLength) : Z_STREAM_ERROR;
        },
        read_buf: function(buf, start, size) {
            var that = this, len = that.avail_in;
            return len > size && (len = size), 0 === len ? 0 : (that.avail_in -= len, buf.set(that.next_in.subarray(that.next_in_index, that.next_in_index + len), start), 
            that.next_in_index += len, that.total_in += len, len);
        },
        flush_pending: function() {
            var that = this, len = that.dstate.pending;
            len > that.avail_out && (len = that.avail_out), 0 !== len && (that.next_out.set(that.dstate.pending_buf.subarray(that.dstate.pending_out, that.dstate.pending_out + len), that.next_out_index), 
            that.next_out_index += len, that.dstate.pending_out += len, that.total_out += len, 
            that.avail_out -= len, that.dstate.pending -= len, 0 === that.dstate.pending && (that.dstate.pending_out = 0));
        }
    };
    var env = global.zip || global;
    env.Deflater = env._jzlib_Deflater = function(options) {
        var that = this, z = new ZStream(), flush = Z_NO_FLUSH, buf = new Uint8Array(512), level = options ? options.level : Z_DEFAULT_COMPRESSION;
        void 0 === level && (level = Z_DEFAULT_COMPRESSION), z.deflateInit(level), z.next_out = buf, 
        that.append = function(data, onprogress) {
            var array, buffers = [], lastIndex = 0, bufferIndex = 0, bufferSize = 0;
            if (data.length) {
                z.next_in_index = 0, z.next_in = data, z.avail_in = data.length;
                do {
                    if (z.next_out_index = 0, z.avail_out = 512, z.deflate(flush) != Z_OK) throw new Error("deflating: " + z.msg);
                    z.next_out_index && (512 == z.next_out_index ? buffers.push(new Uint8Array(buf)) : buffers.push(new Uint8Array(buf.subarray(0, z.next_out_index)))), 
                    bufferSize += z.next_out_index, onprogress && z.next_in_index > 0 && z.next_in_index != lastIndex && (onprogress(z.next_in_index), 
                    lastIndex = z.next_in_index);
                } while (z.avail_in > 0 || 0 === z.avail_out);
                return array = new Uint8Array(bufferSize), buffers.forEach(function(chunk) {
                    array.set(chunk, bufferIndex), bufferIndex += chunk.length;
                }), array;
            }
        }, that.flush = function() {
            var err, array, buffers = [], bufferIndex = 0, bufferSize = 0;
            do {
                if (z.next_out_index = 0, z.avail_out = 512, (err = z.deflate(Z_FINISH)) != Z_STREAM_END && err != Z_OK) throw new Error("deflating: " + z.msg);
                512 - z.avail_out > 0 && buffers.push(new Uint8Array(buf.subarray(0, z.next_out_index))), 
                bufferSize += z.next_out_index;
            } while (z.avail_in > 0 || 0 === z.avail_out);
            return z.deflateEnd(), array = new Uint8Array(bufferSize), buffers.forEach(function(chunk) {
                array.set(chunk, bufferIndex), bufferIndex += chunk.length;
            }), array;
        };
    };
}(this), function(global) {
    "use strict";
    function InfTree() {
        function huft_build(b, bindex, n, s, d, e, t, m, hp, hn, v) {
            var a, f, g, h, i, j, k, l, mask, p, q, w, xp, y, z;
            p = 0, i = n;
            do {
                c[b[bindex + p]]++, p++, i--;
            } while (0 !== i);
            if (c[0] == n) return t[0] = -1, m[0] = 0, Z_OK;
            for (l = m[0], j = 1; j <= BMAX && 0 === c[j]; j++) ;
            for (k = j, l < j && (l = j), i = BMAX; 0 !== i && 0 === c[i]; i--) ;
            for (g = i, l > i && (l = i), m[0] = l, y = 1 << j; j < i; j++, y <<= 1) if ((y -= c[j]) < 0) return Z_DATA_ERROR;
            if ((y -= c[i]) < 0) return Z_DATA_ERROR;
            for (c[i] += y, x[1] = j = 0, p = 1, xp = 2; 0 != --i; ) x[xp] = j += c[p], xp++, 
            p++;
            i = 0, p = 0;
            do {
                0 !== (j = b[bindex + p]) && (v[x[j]++] = i), p++;
            } while (++i < n);
            for (n = x[g], x[0] = i = 0, p = 0, h = -1, w = -l, u[0] = 0, q = 0, z = 0; k <= g; k++) for (a = c[k]; 0 != a--; ) {
                for (;k > w + l; ) {
                    if (h++, w += l, z = g - w, z = z > l ? l : z, (f = 1 << (j = k - w)) > a + 1 && (f -= a + 1, 
                    xp = k, j < z)) for (;++j < z && !((f <<= 1) <= c[++xp]); ) f -= c[xp];
                    if (z = 1 << j, hn[0] + z > MANY) return Z_DATA_ERROR;
                    u[h] = q = hn[0], hn[0] += z, 0 !== h ? (x[h] = i, r[0] = j, r[1] = l, j = i >>> w - l, 
                    r[2] = q - u[h - 1] - j, hp.set(r, 3 * (u[h - 1] + j))) : t[0] = q;
                }
                for (r[1] = k - w, p >= n ? r[0] = 192 : v[p] < s ? (r[0] = v[p] < 256 ? 0 : 96, 
                r[2] = v[p++]) : (r[0] = e[v[p] - s] + 16 + 64, r[2] = d[v[p++] - s]), f = 1 << k - w, 
                j = i >>> w; j < z; j += f) hp.set(r, 3 * (q + j));
                for (j = 1 << k - 1; 0 != (i & j); j >>>= 1) i ^= j;
                for (i ^= j, mask = (1 << w) - 1; (i & mask) != x[h]; ) h--, mask = (1 << (w -= l)) - 1;
            }
            return 0 !== y && 1 != g ? Z_BUF_ERROR : Z_OK;
        }
        function initWorkArea(vsize) {
            var i;
            for (hn || (hn = [], v = [], c = new Int32Array(BMAX + 1), r = [], u = new Int32Array(BMAX), 
            x = new Int32Array(BMAX + 1)), v.length < vsize && (v = []), i = 0; i < vsize; i++) v[i] = 0;
            for (i = 0; i < BMAX + 1; i++) c[i] = 0;
            for (i = 0; i < 3; i++) r[i] = 0;
            u.set(c.subarray(0, BMAX), 0), x.set(c.subarray(0, BMAX + 1), 0);
        }
        var hn, v, c, r, u, x, that = this;
        that.inflate_trees_bits = function(c, bb, tb, hp, z) {
            var result;
            return initWorkArea(19), hn[0] = 0, (result = huft_build(c, 0, 19, 19, null, null, tb, bb, hp, hn, v)) == Z_DATA_ERROR ? z.msg = "oversubscribed dynamic bit lengths tree" : result != Z_BUF_ERROR && 0 !== bb[0] || (z.msg = "incomplete dynamic bit lengths tree", 
            result = Z_DATA_ERROR), result;
        }, that.inflate_trees_dynamic = function(nl, nd, c, bl, bd, tl, td, hp, z) {
            var result;
            return initWorkArea(288), hn[0] = 0, (result = huft_build(c, 0, nl, 257, cplens, cplext, tl, bl, hp, hn, v)) != Z_OK || 0 === bl[0] ? (result == Z_DATA_ERROR ? z.msg = "oversubscribed literal/length tree" : result != Z_MEM_ERROR && (z.msg = "incomplete literal/length tree", 
            result = Z_DATA_ERROR), result) : (initWorkArea(288), (result = huft_build(c, nl, nd, 0, cpdist, cpdext, td, bd, hp, hn, v)) != Z_OK || 0 === bd[0] && nl > 257 ? (result == Z_DATA_ERROR ? z.msg = "oversubscribed distance tree" : result == Z_BUF_ERROR ? (z.msg = "incomplete distance tree", 
            result = Z_DATA_ERROR) : result != Z_MEM_ERROR && (z.msg = "empty distance tree with lengths", 
            result = Z_DATA_ERROR), result) : Z_OK);
        };
    }
    function InfCodes() {
        function inflate_fast(bl, bd, tl, tl_index, td, td_index, s, z) {
            var t, tp, tp_index, e, b, k, p, n, q, m, ml, md, c, d, r, tp_index_t_3;
            p = z.next_in_index, n = z.avail_in, b = s.bitb, k = s.bitk, m = (q = s.write) < s.read ? s.read - q - 1 : s.end - q, 
            ml = inflate_mask[bl], md = inflate_mask[bd];
            do {
                for (;k < 20; ) n--, b |= (255 & z.read_byte(p++)) << k, k += 8;
                if (t = b & ml, tp = tl, tp_index = tl_index, tp_index_t_3 = 3 * (tp_index + t), 
                0 !== (e = tp[tp_index_t_3])) for (;;) {
                    if (b >>= tp[tp_index_t_3 + 1], k -= tp[tp_index_t_3 + 1], 0 != (16 & e)) {
                        for (e &= 15, c = tp[tp_index_t_3 + 2] + (b & inflate_mask[e]), b >>= e, k -= e; k < 15; ) n--, 
                        b |= (255 & z.read_byte(p++)) << k, k += 8;
                        for (e = (tp = td)[tp_index_t_3 = 3 * ((tp_index = td_index) + (t = b & md))]; ;) {
                            if (b >>= tp[tp_index_t_3 + 1], k -= tp[tp_index_t_3 + 1], 0 != (16 & e)) {
                                for (e &= 15; k < e; ) n--, b |= (255 & z.read_byte(p++)) << k, k += 8;
                                if (d = tp[tp_index_t_3 + 2] + (b & inflate_mask[e]), b >>= e, k -= e, m -= c, q >= d) q - (r = q - d) > 0 && 2 > q - r ? (s.window[q++] = s.window[r++], 
                                s.window[q++] = s.window[r++], c -= 2) : (s.window.set(s.window.subarray(r, r + 2), q), 
                                q += 2, r += 2, c -= 2); else {
                                    r = q - d;
                                    do {
                                        r += s.end;
                                    } while (r < 0);
                                    if (e = s.end - r, c > e) {
                                        if (c -= e, q - r > 0 && e > q - r) do {
                                            s.window[q++] = s.window[r++];
                                        } while (0 != --e); else s.window.set(s.window.subarray(r, r + e), q), q += e, r += e, 
                                        e = 0;
                                        r = 0;
                                    }
                                }
                                if (q - r > 0 && c > q - r) do {
                                    s.window[q++] = s.window[r++];
                                } while (0 != --c); else s.window.set(s.window.subarray(r, r + c), q), q += c, r += c, 
                                c = 0;
                                break;
                            }
                            if (0 != (64 & e)) return z.msg = "invalid distance code", c = z.avail_in - n, c = k >> 3 < c ? k >> 3 : c, 
                            n += c, p -= c, k -= c << 3, s.bitb = b, s.bitk = k, z.avail_in = n, z.total_in += p - z.next_in_index, 
                            z.next_in_index = p, s.write = q, Z_DATA_ERROR;
                            t += tp[tp_index_t_3 + 2], e = tp[tp_index_t_3 = 3 * (tp_index + (t += b & inflate_mask[e]))];
                        }
                        break;
                    }
                    if (0 != (64 & e)) return 0 != (32 & e) ? (c = z.avail_in - n, c = k >> 3 < c ? k >> 3 : c, 
                    n += c, p -= c, k -= c << 3, s.bitb = b, s.bitk = k, z.avail_in = n, z.total_in += p - z.next_in_index, 
                    z.next_in_index = p, s.write = q, Z_STREAM_END) : (z.msg = "invalid literal/length code", 
                    c = z.avail_in - n, c = k >> 3 < c ? k >> 3 : c, n += c, p -= c, k -= c << 3, s.bitb = b, 
                    s.bitk = k, z.avail_in = n, z.total_in += p - z.next_in_index, z.next_in_index = p, 
                    s.write = q, Z_DATA_ERROR);
                    if (t += tp[tp_index_t_3 + 2], t += b & inflate_mask[e], tp_index_t_3 = 3 * (tp_index + t), 
                    0 === (e = tp[tp_index_t_3])) {
                        b >>= tp[tp_index_t_3 + 1], k -= tp[tp_index_t_3 + 1], s.window[q++] = tp[tp_index_t_3 + 2], 
                        m--;
                        break;
                    }
                } else b >>= tp[tp_index_t_3 + 1], k -= tp[tp_index_t_3 + 1], s.window[q++] = tp[tp_index_t_3 + 2], 
                m--;
            } while (m >= 258 && n >= 10);
            return c = z.avail_in - n, c = k >> 3 < c ? k >> 3 : c, n += c, p -= c, k -= c << 3, 
            s.bitb = b, s.bitk = k, z.avail_in = n, z.total_in += p - z.next_in_index, z.next_in_index = p, 
            s.write = q, Z_OK;
        }
        var mode, tree, ltree, dtree, that = this, len = 0, tree_index = 0, need = 0, lit = 0, get = 0, dist = 0, lbits = 0, dbits = 0, ltree_index = 0, dtree_index = 0;
        that.init = function(bl, bd, tl, tl_index, td, td_index) {
            mode = START, lbits = bl, dbits = bd, ltree = tl, ltree_index = tl_index, dtree = td, 
            dtree_index = td_index, tree = null;
        }, that.proc = function(s, z, r) {
            var j, tindex, e, n, q, m, f, b = 0, k = 0, p = 0;
            for (p = z.next_in_index, n = z.avail_in, b = s.bitb, k = s.bitk, m = (q = s.write) < s.read ? s.read - q - 1 : s.end - q; ;) switch (mode) {
              case START:
                if (m >= 258 && n >= 10 && (s.bitb = b, s.bitk = k, z.avail_in = n, z.total_in += p - z.next_in_index, 
                z.next_in_index = p, s.write = q, r = inflate_fast(lbits, dbits, ltree, ltree_index, dtree, dtree_index, s, z), 
                p = z.next_in_index, n = z.avail_in, b = s.bitb, k = s.bitk, q = s.write, m = q < s.read ? s.read - q - 1 : s.end - q, 
                r != Z_OK)) {
                    mode = r == Z_STREAM_END ? WASH : BADCODE;
                    break;
                }
                need = lbits, tree = ltree, tree_index = ltree_index, mode = LEN;

              case LEN:
                for (j = need; k < j; ) {
                    if (0 === n) return s.bitb = b, s.bitk = k, z.avail_in = n, z.total_in += p - z.next_in_index, 
                    z.next_in_index = p, s.write = q, s.inflate_flush(z, r);
                    r = Z_OK, n--, b |= (255 & z.read_byte(p++)) << k, k += 8;
                }
                if (tindex = 3 * (tree_index + (b & inflate_mask[j])), b >>>= tree[tindex + 1], 
                k -= tree[tindex + 1], 0 === (e = tree[tindex])) {
                    lit = tree[tindex + 2], mode = LIT;
                    break;
                }
                if (0 != (16 & e)) {
                    get = 15 & e, len = tree[tindex + 2], mode = LENEXT;
                    break;
                }
                if (0 == (64 & e)) {
                    need = e, tree_index = tindex / 3 + tree[tindex + 2];
                    break;
                }
                if (0 != (32 & e)) {
                    mode = WASH;
                    break;
                }
                return mode = BADCODE, z.msg = "invalid literal/length code", r = Z_DATA_ERROR, 
                s.bitb = b, s.bitk = k, z.avail_in = n, z.total_in += p - z.next_in_index, z.next_in_index = p, 
                s.write = q, s.inflate_flush(z, r);

              case LENEXT:
                for (j = get; k < j; ) {
                    if (0 === n) return s.bitb = b, s.bitk = k, z.avail_in = n, z.total_in += p - z.next_in_index, 
                    z.next_in_index = p, s.write = q, s.inflate_flush(z, r);
                    r = Z_OK, n--, b |= (255 & z.read_byte(p++)) << k, k += 8;
                }
                len += b & inflate_mask[j], b >>= j, k -= j, need = dbits, tree = dtree, tree_index = dtree_index, 
                mode = DIST;

              case DIST:
                for (j = need; k < j; ) {
                    if (0 === n) return s.bitb = b, s.bitk = k, z.avail_in = n, z.total_in += p - z.next_in_index, 
                    z.next_in_index = p, s.write = q, s.inflate_flush(z, r);
                    r = Z_OK, n--, b |= (255 & z.read_byte(p++)) << k, k += 8;
                }
                if (tindex = 3 * (tree_index + (b & inflate_mask[j])), b >>= tree[tindex + 1], k -= tree[tindex + 1], 
                0 != (16 & (e = tree[tindex]))) {
                    get = 15 & e, dist = tree[tindex + 2], mode = DISTEXT;
                    break;
                }
                if (0 == (64 & e)) {
                    need = e, tree_index = tindex / 3 + tree[tindex + 2];
                    break;
                }
                return mode = BADCODE, z.msg = "invalid distance code", r = Z_DATA_ERROR, s.bitb = b, 
                s.bitk = k, z.avail_in = n, z.total_in += p - z.next_in_index, z.next_in_index = p, 
                s.write = q, s.inflate_flush(z, r);

              case DISTEXT:
                for (j = get; k < j; ) {
                    if (0 === n) return s.bitb = b, s.bitk = k, z.avail_in = n, z.total_in += p - z.next_in_index, 
                    z.next_in_index = p, s.write = q, s.inflate_flush(z, r);
                    r = Z_OK, n--, b |= (255 & z.read_byte(p++)) << k, k += 8;
                }
                dist += b & inflate_mask[j], b >>= j, k -= j, mode = COPY;

              case COPY:
                for (f = q - dist; f < 0; ) f += s.end;
                for (;0 !== len; ) {
                    if (0 === m && (q == s.end && 0 !== s.read && (m = (q = 0) < s.read ? s.read - q - 1 : s.end - q), 
                    0 === m && (s.write = q, r = s.inflate_flush(z, r), q = s.write, m = q < s.read ? s.read - q - 1 : s.end - q, 
                    q == s.end && 0 !== s.read && (m = (q = 0) < s.read ? s.read - q - 1 : s.end - q), 
                    0 === m))) return s.bitb = b, s.bitk = k, z.avail_in = n, z.total_in += p - z.next_in_index, 
                    z.next_in_index = p, s.write = q, s.inflate_flush(z, r);
                    s.window[q++] = s.window[f++], m--, f == s.end && (f = 0), len--;
                }
                mode = START;
                break;

              case LIT:
                if (0 === m && (q == s.end && 0 !== s.read && (m = (q = 0) < s.read ? s.read - q - 1 : s.end - q), 
                0 === m && (s.write = q, r = s.inflate_flush(z, r), q = s.write, m = q < s.read ? s.read - q - 1 : s.end - q, 
                q == s.end && 0 !== s.read && (m = (q = 0) < s.read ? s.read - q - 1 : s.end - q), 
                0 === m))) return s.bitb = b, s.bitk = k, z.avail_in = n, z.total_in += p - z.next_in_index, 
                z.next_in_index = p, s.write = q, s.inflate_flush(z, r);
                r = Z_OK, s.window[q++] = lit, m--, mode = START;
                break;

              case WASH:
                if (k > 7 && (k -= 8, n++, p--), s.write = q, r = s.inflate_flush(z, r), q = s.write, 
                m = q < s.read ? s.read - q - 1 : s.end - q, s.read != s.write) return s.bitb = b, 
                s.bitk = k, z.avail_in = n, z.total_in += p - z.next_in_index, z.next_in_index = p, 
                s.write = q, s.inflate_flush(z, r);
                mode = END;

              case END:
                return r = Z_STREAM_END, s.bitb = b, s.bitk = k, z.avail_in = n, z.total_in += p - z.next_in_index, 
                z.next_in_index = p, s.write = q, s.inflate_flush(z, r);

              case BADCODE:
                return r = Z_DATA_ERROR, s.bitb = b, s.bitk = k, z.avail_in = n, z.total_in += p - z.next_in_index, 
                z.next_in_index = p, s.write = q, s.inflate_flush(z, r);

              default:
                return r = Z_STREAM_ERROR, s.bitb = b, s.bitk = k, z.avail_in = n, z.total_in += p - z.next_in_index, 
                z.next_in_index = p, s.write = q, s.inflate_flush(z, r);
            }
        }, that.free = function() {};
    }
    function InfBlocks(z, w) {
        var blens, that = this, mode = TYPE, left = 0, table = 0, index = 0, bb = [ 0 ], tb = [ 0 ], codes = new InfCodes(), last = 0, hufts = new Int32Array(3 * MANY), inftree = new InfTree();
        that.bitk = 0, that.bitb = 0, that.window = new Uint8Array(w), that.end = w, that.read = 0, 
        that.write = 0, that.reset = function(z, c) {
            c && (c[0] = 0), mode == CODES && codes.free(z), mode = TYPE, that.bitk = 0, that.bitb = 0, 
            that.read = that.write = 0;
        }, that.reset(z, null), that.inflate_flush = function(z, r) {
            var n, p, q;
            return p = z.next_out_index, q = that.read, (n = (q <= that.write ? that.write : that.end) - q) > z.avail_out && (n = z.avail_out), 
            0 !== n && r == Z_BUF_ERROR && (r = Z_OK), z.avail_out -= n, z.total_out += n, z.next_out.set(that.window.subarray(q, q + n), p), 
            p += n, (q += n) == that.end && (q = 0, that.write == that.end && (that.write = 0), 
            (n = that.write - q) > z.avail_out && (n = z.avail_out), 0 !== n && r == Z_BUF_ERROR && (r = Z_OK), 
            z.avail_out -= n, z.total_out += n, z.next_out.set(that.window.subarray(q, q + n), p), 
            p += n, q += n), z.next_out_index = p, that.read = q, r;
        }, that.proc = function(z, r) {
            var t, b, k, p, n, q, m, i;
            for (p = z.next_in_index, n = z.avail_in, b = that.bitb, k = that.bitk, m = (q = that.write) < that.read ? that.read - q - 1 : that.end - q; ;) switch (mode) {
              case TYPE:
                for (;k < 3; ) {
                    if (0 === n) return that.bitb = b, that.bitk = k, z.avail_in = n, z.total_in += p - z.next_in_index, 
                    z.next_in_index = p, that.write = q, that.inflate_flush(z, r);
                    r = Z_OK, n--, b |= (255 & z.read_byte(p++)) << k, k += 8;
                }
                switch (t = 7 & b, last = 1 & t, t >>> 1) {
                  case 0:
                    b >>>= 3, b >>>= t = 7 & (k -= 3), k -= t, mode = LENS;
                    break;

                  case 1:
                    var bl = [], bd = [], tl = [ [] ], td = [ [] ];
                    InfTree.inflate_trees_fixed(bl, bd, tl, td), codes.init(bl[0], bd[0], tl[0], 0, td[0], 0), 
                    b >>>= 3, k -= 3, mode = CODES;
                    break;

                  case 2:
                    b >>>= 3, k -= 3, mode = TABLE;
                    break;

                  case 3:
                    return b >>>= 3, k -= 3, mode = BADBLOCKS, z.msg = "invalid block type", r = Z_DATA_ERROR, 
                    that.bitb = b, that.bitk = k, z.avail_in = n, z.total_in += p - z.next_in_index, 
                    z.next_in_index = p, that.write = q, that.inflate_flush(z, r);
                }
                break;

              case LENS:
                for (;k < 32; ) {
                    if (0 === n) return that.bitb = b, that.bitk = k, z.avail_in = n, z.total_in += p - z.next_in_index, 
                    z.next_in_index = p, that.write = q, that.inflate_flush(z, r);
                    r = Z_OK, n--, b |= (255 & z.read_byte(p++)) << k, k += 8;
                }
                if ((~b >>> 16 & 65535) != (65535 & b)) return mode = BADBLOCKS, z.msg = "invalid stored block lengths", 
                r = Z_DATA_ERROR, that.bitb = b, that.bitk = k, z.avail_in = n, z.total_in += p - z.next_in_index, 
                z.next_in_index = p, that.write = q, that.inflate_flush(z, r);
                left = 65535 & b, b = k = 0, mode = 0 !== left ? STORED : 0 !== last ? DRY : TYPE;
                break;

              case STORED:
                if (0 === n) return that.bitb = b, that.bitk = k, z.avail_in = n, z.total_in += p - z.next_in_index, 
                z.next_in_index = p, that.write = q, that.inflate_flush(z, r);
                if (0 === m && (q == that.end && 0 !== that.read && (m = (q = 0) < that.read ? that.read - q - 1 : that.end - q), 
                0 === m && (that.write = q, r = that.inflate_flush(z, r), q = that.write, m = q < that.read ? that.read - q - 1 : that.end - q, 
                q == that.end && 0 !== that.read && (m = (q = 0) < that.read ? that.read - q - 1 : that.end - q), 
                0 === m))) return that.bitb = b, that.bitk = k, z.avail_in = n, z.total_in += p - z.next_in_index, 
                z.next_in_index = p, that.write = q, that.inflate_flush(z, r);
                if (r = Z_OK, (t = left) > n && (t = n), t > m && (t = m), that.window.set(z.read_buf(p, t), q), 
                p += t, n -= t, q += t, m -= t, 0 != (left -= t)) break;
                mode = 0 !== last ? DRY : TYPE;
                break;

              case TABLE:
                for (;k < 14; ) {
                    if (0 === n) return that.bitb = b, that.bitk = k, z.avail_in = n, z.total_in += p - z.next_in_index, 
                    z.next_in_index = p, that.write = q, that.inflate_flush(z, r);
                    r = Z_OK, n--, b |= (255 & z.read_byte(p++)) << k, k += 8;
                }
                if (table = t = 16383 & b, (31 & t) > 29 || (t >> 5 & 31) > 29) return mode = BADBLOCKS, 
                z.msg = "too many length or distance symbols", r = Z_DATA_ERROR, that.bitb = b, 
                that.bitk = k, z.avail_in = n, z.total_in += p - z.next_in_index, z.next_in_index = p, 
                that.write = q, that.inflate_flush(z, r);
                if (t = 258 + (31 & t) + (t >> 5 & 31), !blens || blens.length < t) blens = []; else for (i = 0; i < t; i++) blens[i] = 0;
                b >>>= 14, k -= 14, index = 0, mode = BTREE;

              case BTREE:
                for (;index < 4 + (table >>> 10); ) {
                    for (;k < 3; ) {
                        if (0 === n) return that.bitb = b, that.bitk = k, z.avail_in = n, z.total_in += p - z.next_in_index, 
                        z.next_in_index = p, that.write = q, that.inflate_flush(z, r);
                        r = Z_OK, n--, b |= (255 & z.read_byte(p++)) << k, k += 8;
                    }
                    blens[border[index++]] = 7 & b, b >>>= 3, k -= 3;
                }
                for (;index < 19; ) blens[border[index++]] = 0;
                if (bb[0] = 7, (t = inftree.inflate_trees_bits(blens, bb, tb, hufts, z)) != Z_OK) return (r = t) == Z_DATA_ERROR && (blens = null, 
                mode = BADBLOCKS), that.bitb = b, that.bitk = k, z.avail_in = n, z.total_in += p - z.next_in_index, 
                z.next_in_index = p, that.write = q, that.inflate_flush(z, r);
                index = 0, mode = DTREE;

              case DTREE:
                for (;;) {
                    if (t = table, index >= 258 + (31 & t) + (t >> 5 & 31)) break;
                    var j, c;
                    for (t = bb[0]; k < t; ) {
                        if (0 === n) return that.bitb = b, that.bitk = k, z.avail_in = n, z.total_in += p - z.next_in_index, 
                        z.next_in_index = p, that.write = q, that.inflate_flush(z, r);
                        r = Z_OK, n--, b |= (255 & z.read_byte(p++)) << k, k += 8;
                    }
                    if (t = hufts[3 * (tb[0] + (b & inflate_mask[t])) + 1], (c = hufts[3 * (tb[0] + (b & inflate_mask[t])) + 2]) < 16) b >>>= t, 
                    k -= t, blens[index++] = c; else {
                        for (i = 18 == c ? 7 : c - 14, j = 18 == c ? 11 : 3; k < t + i; ) {
                            if (0 === n) return that.bitb = b, that.bitk = k, z.avail_in = n, z.total_in += p - z.next_in_index, 
                            z.next_in_index = p, that.write = q, that.inflate_flush(z, r);
                            r = Z_OK, n--, b |= (255 & z.read_byte(p++)) << k, k += 8;
                        }
                        if (b >>>= t, k -= t, j += b & inflate_mask[i], b >>>= i, k -= i, i = index, t = table, 
                        i + j > 258 + (31 & t) + (t >> 5 & 31) || 16 == c && i < 1) return blens = null, 
                        mode = BADBLOCKS, z.msg = "invalid bit length repeat", r = Z_DATA_ERROR, that.bitb = b, 
                        that.bitk = k, z.avail_in = n, z.total_in += p - z.next_in_index, z.next_in_index = p, 
                        that.write = q, that.inflate_flush(z, r);
                        c = 16 == c ? blens[i - 1] : 0;
                        do {
                            blens[i++] = c;
                        } while (0 != --j);
                        index = i;
                    }
                }
                tb[0] = -1;
                var bl_ = [], bd_ = [], tl_ = [], td_ = [];
                if (bl_[0] = 9, bd_[0] = 6, t = table, (t = inftree.inflate_trees_dynamic(257 + (31 & t), 1 + (t >> 5 & 31), blens, bl_, bd_, tl_, td_, hufts, z)) != Z_OK) return t == Z_DATA_ERROR && (blens = null, 
                mode = BADBLOCKS), r = t, that.bitb = b, that.bitk = k, z.avail_in = n, z.total_in += p - z.next_in_index, 
                z.next_in_index = p, that.write = q, that.inflate_flush(z, r);
                codes.init(bl_[0], bd_[0], hufts, tl_[0], hufts, td_[0]), mode = CODES;

              case CODES:
                if (that.bitb = b, that.bitk = k, z.avail_in = n, z.total_in += p - z.next_in_index, 
                z.next_in_index = p, that.write = q, (r = codes.proc(that, z, r)) != Z_STREAM_END) return that.inflate_flush(z, r);
                if (r = Z_OK, codes.free(z), p = z.next_in_index, n = z.avail_in, b = that.bitb, 
                k = that.bitk, q = that.write, m = q < that.read ? that.read - q - 1 : that.end - q, 
                0 === last) {
                    mode = TYPE;
                    break;
                }
                mode = DRY;

              case DRY:
                if (that.write = q, r = that.inflate_flush(z, r), q = that.write, m = q < that.read ? that.read - q - 1 : that.end - q, 
                that.read != that.write) return that.bitb = b, that.bitk = k, z.avail_in = n, z.total_in += p - z.next_in_index, 
                z.next_in_index = p, that.write = q, that.inflate_flush(z, r);
                mode = DONELOCKS;

              case DONELOCKS:
                return r = Z_STREAM_END, that.bitb = b, that.bitk = k, z.avail_in = n, z.total_in += p - z.next_in_index, 
                z.next_in_index = p, that.write = q, that.inflate_flush(z, r);

              case BADBLOCKS:
                return r = Z_DATA_ERROR, that.bitb = b, that.bitk = k, z.avail_in = n, z.total_in += p - z.next_in_index, 
                z.next_in_index = p, that.write = q, that.inflate_flush(z, r);

              default:
                return r = Z_STREAM_ERROR, that.bitb = b, that.bitk = k, z.avail_in = n, z.total_in += p - z.next_in_index, 
                z.next_in_index = p, that.write = q, that.inflate_flush(z, r);
            }
        }, that.free = function(z) {
            that.reset(z, null), that.window = null, hufts = null;
        }, that.set_dictionary = function(d, start, n) {
            that.window.set(d.subarray(start, start + n), 0), that.read = that.write = n;
        }, that.sync_point = function() {
            return mode == LENS ? 1 : 0;
        };
    }
    function Inflate() {
        function inflateReset(z) {
            return z && z.istate ? (z.total_in = z.total_out = 0, z.msg = null, z.istate.mode = BLOCKS, 
            z.istate.blocks.reset(z, null), Z_OK) : Z_STREAM_ERROR;
        }
        var that = this;
        that.mode = 0, that.method = 0, that.was = [ 0 ], that.need = 0, that.marker = 0, 
        that.wbits = 0, that.inflateEnd = function(z) {
            return that.blocks && that.blocks.free(z), that.blocks = null, Z_OK;
        }, that.inflateInit = function(z, w) {
            return z.msg = null, that.blocks = null, w < 8 || w > 15 ? (that.inflateEnd(z), 
            Z_STREAM_ERROR) : (that.wbits = w, z.istate.blocks = new InfBlocks(z, 1 << w), inflateReset(z), 
            Z_OK);
        }, that.inflate = function(z, f) {
            var r, b;
            if (!z || !z.istate || !z.next_in) return Z_STREAM_ERROR;
            for (f = f == Z_FINISH ? Z_BUF_ERROR : Z_OK, r = Z_BUF_ERROR; ;) switch (z.istate.mode) {
              case METHOD:
                if (0 === z.avail_in) return r;
                if (r = f, z.avail_in--, z.total_in++, (15 & (z.istate.method = z.read_byte(z.next_in_index++))) != Z_DEFLATED) {
                    z.istate.mode = BAD, z.msg = "unknown compression method", z.istate.marker = 5;
                    break;
                }
                if (8 + (z.istate.method >> 4) > z.istate.wbits) {
                    z.istate.mode = BAD, z.msg = "invalid window size", z.istate.marker = 5;
                    break;
                }
                z.istate.mode = FLAG;

              case FLAG:
                if (0 === z.avail_in) return r;
                if (r = f, z.avail_in--, z.total_in++, b = 255 & z.read_byte(z.next_in_index++), 
                ((z.istate.method << 8) + b) % 31 != 0) {
                    z.istate.mode = BAD, z.msg = "incorrect header check", z.istate.marker = 5;
                    break;
                }
                if (0 == (b & PRESET_DICT)) {
                    z.istate.mode = BLOCKS;
                    break;
                }
                z.istate.mode = DICT4;

              case DICT4:
                if (0 === z.avail_in) return r;
                r = f, z.avail_in--, z.total_in++, z.istate.need = (255 & z.read_byte(z.next_in_index++)) << 24 & 4278190080, 
                z.istate.mode = DICT3;

              case DICT3:
                if (0 === z.avail_in) return r;
                r = f, z.avail_in--, z.total_in++, z.istate.need += (255 & z.read_byte(z.next_in_index++)) << 16 & 16711680, 
                z.istate.mode = DICT2;

              case DICT2:
                if (0 === z.avail_in) return r;
                r = f, z.avail_in--, z.total_in++, z.istate.need += (255 & z.read_byte(z.next_in_index++)) << 8 & 65280, 
                z.istate.mode = DICT1;

              case DICT1:
                return 0 === z.avail_in ? r : (r = f, z.avail_in--, z.total_in++, z.istate.need += 255 & z.read_byte(z.next_in_index++), 
                z.istate.mode = DICT0, Z_NEED_DICT);

              case DICT0:
                return z.istate.mode = BAD, z.msg = "need dictionary", z.istate.marker = 0, Z_STREAM_ERROR;

              case BLOCKS:
                if ((r = z.istate.blocks.proc(z, r)) == Z_DATA_ERROR) {
                    z.istate.mode = BAD, z.istate.marker = 0;
                    break;
                }
                if (r == Z_OK && (r = f), r != Z_STREAM_END) return r;
                r = f, z.istate.blocks.reset(z, z.istate.was), z.istate.mode = DONE;

              case DONE:
                return Z_STREAM_END;

              case BAD:
                return Z_DATA_ERROR;

              default:
                return Z_STREAM_ERROR;
            }
        }, that.inflateSetDictionary = function(z, dictionary, dictLength) {
            var index = 0, length = dictLength;
            return z && z.istate && z.istate.mode == DICT0 ? (length >= 1 << z.istate.wbits && (index = dictLength - (length = (1 << z.istate.wbits) - 1)), 
            z.istate.blocks.set_dictionary(dictionary, index, length), z.istate.mode = BLOCKS, 
            Z_OK) : Z_STREAM_ERROR;
        }, that.inflateSync = function(z) {
            var n, p, m, r, w;
            if (!z || !z.istate) return Z_STREAM_ERROR;
            if (z.istate.mode != BAD && (z.istate.mode = BAD, z.istate.marker = 0), 0 === (n = z.avail_in)) return Z_BUF_ERROR;
            for (p = z.next_in_index, m = z.istate.marker; 0 !== n && m < 4; ) z.read_byte(p) == mark[m] ? m++ : m = 0 !== z.read_byte(p) ? 0 : 4 - m, 
            p++, n--;
            return z.total_in += p - z.next_in_index, z.next_in_index = p, z.avail_in = n, z.istate.marker = m, 
            4 != m ? Z_DATA_ERROR : (r = z.total_in, w = z.total_out, inflateReset(z), z.total_in = r, 
            z.total_out = w, z.istate.mode = BLOCKS, Z_OK);
        }, that.inflateSyncPoint = function(z) {
            return z && z.istate && z.istate.blocks ? z.istate.blocks.sync_point() : Z_STREAM_ERROR;
        };
    }
    function ZStream() {}
    var Z_OK = 0, Z_STREAM_END = 1, Z_NEED_DICT = 2, Z_STREAM_ERROR = -2, Z_DATA_ERROR = -3, Z_MEM_ERROR = -4, Z_BUF_ERROR = -5, inflate_mask = [ 0, 1, 3, 7, 15, 31, 63, 127, 255, 511, 1023, 2047, 4095, 8191, 16383, 32767, 65535 ], MANY = 1440, Z_NO_FLUSH = 0, Z_FINISH = 4, fixed_tl = [ 96, 7, 256, 0, 8, 80, 0, 8, 16, 84, 8, 115, 82, 7, 31, 0, 8, 112, 0, 8, 48, 0, 9, 192, 80, 7, 10, 0, 8, 96, 0, 8, 32, 0, 9, 160, 0, 8, 0, 0, 8, 128, 0, 8, 64, 0, 9, 224, 80, 7, 6, 0, 8, 88, 0, 8, 24, 0, 9, 144, 83, 7, 59, 0, 8, 120, 0, 8, 56, 0, 9, 208, 81, 7, 17, 0, 8, 104, 0, 8, 40, 0, 9, 176, 0, 8, 8, 0, 8, 136, 0, 8, 72, 0, 9, 240, 80, 7, 4, 0, 8, 84, 0, 8, 20, 85, 8, 227, 83, 7, 43, 0, 8, 116, 0, 8, 52, 0, 9, 200, 81, 7, 13, 0, 8, 100, 0, 8, 36, 0, 9, 168, 0, 8, 4, 0, 8, 132, 0, 8, 68, 0, 9, 232, 80, 7, 8, 0, 8, 92, 0, 8, 28, 0, 9, 152, 84, 7, 83, 0, 8, 124, 0, 8, 60, 0, 9, 216, 82, 7, 23, 0, 8, 108, 0, 8, 44, 0, 9, 184, 0, 8, 12, 0, 8, 140, 0, 8, 76, 0, 9, 248, 80, 7, 3, 0, 8, 82, 0, 8, 18, 85, 8, 163, 83, 7, 35, 0, 8, 114, 0, 8, 50, 0, 9, 196, 81, 7, 11, 0, 8, 98, 0, 8, 34, 0, 9, 164, 0, 8, 2, 0, 8, 130, 0, 8, 66, 0, 9, 228, 80, 7, 7, 0, 8, 90, 0, 8, 26, 0, 9, 148, 84, 7, 67, 0, 8, 122, 0, 8, 58, 0, 9, 212, 82, 7, 19, 0, 8, 106, 0, 8, 42, 0, 9, 180, 0, 8, 10, 0, 8, 138, 0, 8, 74, 0, 9, 244, 80, 7, 5, 0, 8, 86, 0, 8, 22, 192, 8, 0, 83, 7, 51, 0, 8, 118, 0, 8, 54, 0, 9, 204, 81, 7, 15, 0, 8, 102, 0, 8, 38, 0, 9, 172, 0, 8, 6, 0, 8, 134, 0, 8, 70, 0, 9, 236, 80, 7, 9, 0, 8, 94, 0, 8, 30, 0, 9, 156, 84, 7, 99, 0, 8, 126, 0, 8, 62, 0, 9, 220, 82, 7, 27, 0, 8, 110, 0, 8, 46, 0, 9, 188, 0, 8, 14, 0, 8, 142, 0, 8, 78, 0, 9, 252, 96, 7, 256, 0, 8, 81, 0, 8, 17, 85, 8, 131, 82, 7, 31, 0, 8, 113, 0, 8, 49, 0, 9, 194, 80, 7, 10, 0, 8, 97, 0, 8, 33, 0, 9, 162, 0, 8, 1, 0, 8, 129, 0, 8, 65, 0, 9, 226, 80, 7, 6, 0, 8, 89, 0, 8, 25, 0, 9, 146, 83, 7, 59, 0, 8, 121, 0, 8, 57, 0, 9, 210, 81, 7, 17, 0, 8, 105, 0, 8, 41, 0, 9, 178, 0, 8, 9, 0, 8, 137, 0, 8, 73, 0, 9, 242, 80, 7, 4, 0, 8, 85, 0, 8, 21, 80, 8, 258, 83, 7, 43, 0, 8, 117, 0, 8, 53, 0, 9, 202, 81, 7, 13, 0, 8, 101, 0, 8, 37, 0, 9, 170, 0, 8, 5, 0, 8, 133, 0, 8, 69, 0, 9, 234, 80, 7, 8, 0, 8, 93, 0, 8, 29, 0, 9, 154, 84, 7, 83, 0, 8, 125, 0, 8, 61, 0, 9, 218, 82, 7, 23, 0, 8, 109, 0, 8, 45, 0, 9, 186, 0, 8, 13, 0, 8, 141, 0, 8, 77, 0, 9, 250, 80, 7, 3, 0, 8, 83, 0, 8, 19, 85, 8, 195, 83, 7, 35, 0, 8, 115, 0, 8, 51, 0, 9, 198, 81, 7, 11, 0, 8, 99, 0, 8, 35, 0, 9, 166, 0, 8, 3, 0, 8, 131, 0, 8, 67, 0, 9, 230, 80, 7, 7, 0, 8, 91, 0, 8, 27, 0, 9, 150, 84, 7, 67, 0, 8, 123, 0, 8, 59, 0, 9, 214, 82, 7, 19, 0, 8, 107, 0, 8, 43, 0, 9, 182, 0, 8, 11, 0, 8, 139, 0, 8, 75, 0, 9, 246, 80, 7, 5, 0, 8, 87, 0, 8, 23, 192, 8, 0, 83, 7, 51, 0, 8, 119, 0, 8, 55, 0, 9, 206, 81, 7, 15, 0, 8, 103, 0, 8, 39, 0, 9, 174, 0, 8, 7, 0, 8, 135, 0, 8, 71, 0, 9, 238, 80, 7, 9, 0, 8, 95, 0, 8, 31, 0, 9, 158, 84, 7, 99, 0, 8, 127, 0, 8, 63, 0, 9, 222, 82, 7, 27, 0, 8, 111, 0, 8, 47, 0, 9, 190, 0, 8, 15, 0, 8, 143, 0, 8, 79, 0, 9, 254, 96, 7, 256, 0, 8, 80, 0, 8, 16, 84, 8, 115, 82, 7, 31, 0, 8, 112, 0, 8, 48, 0, 9, 193, 80, 7, 10, 0, 8, 96, 0, 8, 32, 0, 9, 161, 0, 8, 0, 0, 8, 128, 0, 8, 64, 0, 9, 225, 80, 7, 6, 0, 8, 88, 0, 8, 24, 0, 9, 145, 83, 7, 59, 0, 8, 120, 0, 8, 56, 0, 9, 209, 81, 7, 17, 0, 8, 104, 0, 8, 40, 0, 9, 177, 0, 8, 8, 0, 8, 136, 0, 8, 72, 0, 9, 241, 80, 7, 4, 0, 8, 84, 0, 8, 20, 85, 8, 227, 83, 7, 43, 0, 8, 116, 0, 8, 52, 0, 9, 201, 81, 7, 13, 0, 8, 100, 0, 8, 36, 0, 9, 169, 0, 8, 4, 0, 8, 132, 0, 8, 68, 0, 9, 233, 80, 7, 8, 0, 8, 92, 0, 8, 28, 0, 9, 153, 84, 7, 83, 0, 8, 124, 0, 8, 60, 0, 9, 217, 82, 7, 23, 0, 8, 108, 0, 8, 44, 0, 9, 185, 0, 8, 12, 0, 8, 140, 0, 8, 76, 0, 9, 249, 80, 7, 3, 0, 8, 82, 0, 8, 18, 85, 8, 163, 83, 7, 35, 0, 8, 114, 0, 8, 50, 0, 9, 197, 81, 7, 11, 0, 8, 98, 0, 8, 34, 0, 9, 165, 0, 8, 2, 0, 8, 130, 0, 8, 66, 0, 9, 229, 80, 7, 7, 0, 8, 90, 0, 8, 26, 0, 9, 149, 84, 7, 67, 0, 8, 122, 0, 8, 58, 0, 9, 213, 82, 7, 19, 0, 8, 106, 0, 8, 42, 0, 9, 181, 0, 8, 10, 0, 8, 138, 0, 8, 74, 0, 9, 245, 80, 7, 5, 0, 8, 86, 0, 8, 22, 192, 8, 0, 83, 7, 51, 0, 8, 118, 0, 8, 54, 0, 9, 205, 81, 7, 15, 0, 8, 102, 0, 8, 38, 0, 9, 173, 0, 8, 6, 0, 8, 134, 0, 8, 70, 0, 9, 237, 80, 7, 9, 0, 8, 94, 0, 8, 30, 0, 9, 157, 84, 7, 99, 0, 8, 126, 0, 8, 62, 0, 9, 221, 82, 7, 27, 0, 8, 110, 0, 8, 46, 0, 9, 189, 0, 8, 14, 0, 8, 142, 0, 8, 78, 0, 9, 253, 96, 7, 256, 0, 8, 81, 0, 8, 17, 85, 8, 131, 82, 7, 31, 0, 8, 113, 0, 8, 49, 0, 9, 195, 80, 7, 10, 0, 8, 97, 0, 8, 33, 0, 9, 163, 0, 8, 1, 0, 8, 129, 0, 8, 65, 0, 9, 227, 80, 7, 6, 0, 8, 89, 0, 8, 25, 0, 9, 147, 83, 7, 59, 0, 8, 121, 0, 8, 57, 0, 9, 211, 81, 7, 17, 0, 8, 105, 0, 8, 41, 0, 9, 179, 0, 8, 9, 0, 8, 137, 0, 8, 73, 0, 9, 243, 80, 7, 4, 0, 8, 85, 0, 8, 21, 80, 8, 258, 83, 7, 43, 0, 8, 117, 0, 8, 53, 0, 9, 203, 81, 7, 13, 0, 8, 101, 0, 8, 37, 0, 9, 171, 0, 8, 5, 0, 8, 133, 0, 8, 69, 0, 9, 235, 80, 7, 8, 0, 8, 93, 0, 8, 29, 0, 9, 155, 84, 7, 83, 0, 8, 125, 0, 8, 61, 0, 9, 219, 82, 7, 23, 0, 8, 109, 0, 8, 45, 0, 9, 187, 0, 8, 13, 0, 8, 141, 0, 8, 77, 0, 9, 251, 80, 7, 3, 0, 8, 83, 0, 8, 19, 85, 8, 195, 83, 7, 35, 0, 8, 115, 0, 8, 51, 0, 9, 199, 81, 7, 11, 0, 8, 99, 0, 8, 35, 0, 9, 167, 0, 8, 3, 0, 8, 131, 0, 8, 67, 0, 9, 231, 80, 7, 7, 0, 8, 91, 0, 8, 27, 0, 9, 151, 84, 7, 67, 0, 8, 123, 0, 8, 59, 0, 9, 215, 82, 7, 19, 0, 8, 107, 0, 8, 43, 0, 9, 183, 0, 8, 11, 0, 8, 139, 0, 8, 75, 0, 9, 247, 80, 7, 5, 0, 8, 87, 0, 8, 23, 192, 8, 0, 83, 7, 51, 0, 8, 119, 0, 8, 55, 0, 9, 207, 81, 7, 15, 0, 8, 103, 0, 8, 39, 0, 9, 175, 0, 8, 7, 0, 8, 135, 0, 8, 71, 0, 9, 239, 80, 7, 9, 0, 8, 95, 0, 8, 31, 0, 9, 159, 84, 7, 99, 0, 8, 127, 0, 8, 63, 0, 9, 223, 82, 7, 27, 0, 8, 111, 0, 8, 47, 0, 9, 191, 0, 8, 15, 0, 8, 143, 0, 8, 79, 0, 9, 255 ], fixed_td = [ 80, 5, 1, 87, 5, 257, 83, 5, 17, 91, 5, 4097, 81, 5, 5, 89, 5, 1025, 85, 5, 65, 93, 5, 16385, 80, 5, 3, 88, 5, 513, 84, 5, 33, 92, 5, 8193, 82, 5, 9, 90, 5, 2049, 86, 5, 129, 192, 5, 24577, 80, 5, 2, 87, 5, 385, 83, 5, 25, 91, 5, 6145, 81, 5, 7, 89, 5, 1537, 85, 5, 97, 93, 5, 24577, 80, 5, 4, 88, 5, 769, 84, 5, 49, 92, 5, 12289, 82, 5, 13, 90, 5, 3073, 86, 5, 193, 192, 5, 24577 ], cplens = [ 3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0 ], cplext = [ 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, 112, 112 ], cpdist = [ 1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577 ], cpdext = [ 0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13 ], BMAX = 15;
    InfTree.inflate_trees_fixed = function(bl, bd, tl, td) {
        return bl[0] = 9, bd[0] = 5, tl[0] = fixed_tl, td[0] = fixed_td, Z_OK;
    };
    var START = 0, LEN = 1, LENEXT = 2, DIST = 3, DISTEXT = 4, COPY = 5, LIT = 6, WASH = 7, END = 8, BADCODE = 9, border = [ 16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15 ], TYPE = 0, LENS = 1, STORED = 2, TABLE = 3, BTREE = 4, DTREE = 5, CODES = 6, DRY = 7, DONELOCKS = 8, BADBLOCKS = 9, PRESET_DICT = 32, Z_DEFLATED = 8, METHOD = 0, FLAG = 1, DICT4 = 2, DICT3 = 3, DICT2 = 4, DICT1 = 5, DICT0 = 6, BLOCKS = 7, DONE = 12, BAD = 13, mark = [ 0, 0, 255, 255 ];
    ZStream.prototype = {
        inflateInit: function(bits) {
            var that = this;
            return that.istate = new Inflate(), bits || (bits = 15), that.istate.inflateInit(that, bits);
        },
        inflate: function(f) {
            var that = this;
            return that.istate ? that.istate.inflate(that, f) : Z_STREAM_ERROR;
        },
        inflateEnd: function() {
            var that = this;
            if (!that.istate) return Z_STREAM_ERROR;
            var ret = that.istate.inflateEnd(that);
            return that.istate = null, ret;
        },
        inflateSync: function() {
            var that = this;
            return that.istate ? that.istate.inflateSync(that) : Z_STREAM_ERROR;
        },
        inflateSetDictionary: function(dictionary, dictLength) {
            var that = this;
            return that.istate ? that.istate.inflateSetDictionary(that, dictionary, dictLength) : Z_STREAM_ERROR;
        },
        read_byte: function(start) {
            return this.next_in.subarray(start, start + 1)[0];
        },
        read_buf: function(start, size) {
            return this.next_in.subarray(start, start + size);
        }
    };
    var env = global.zip || global;
    env.Inflater = env._jzlib_Inflater = function() {
        var that = this, z = new ZStream(), flush = Z_NO_FLUSH, buf = new Uint8Array(512), nomoreinput = !1;
        z.inflateInit(), z.next_out = buf, that.append = function(data, onprogress) {
            var err, array, buffers = [], lastIndex = 0, bufferIndex = 0, bufferSize = 0;
            if (0 !== data.length) {
                z.next_in_index = 0, z.next_in = data, z.avail_in = data.length;
                do {
                    if (z.next_out_index = 0, z.avail_out = 512, 0 !== z.avail_in || nomoreinput || (z.next_in_index = 0, 
                    nomoreinput = !0), err = z.inflate(flush), nomoreinput && err === Z_BUF_ERROR) {
                        if (0 !== z.avail_in) throw new Error("inflating: bad input");
                    } else if (err !== Z_OK && err !== Z_STREAM_END) throw new Error("inflating: " + z.msg);
                    if ((nomoreinput || err === Z_STREAM_END) && z.avail_in === data.length) throw new Error("inflating: bad input");
                    z.next_out_index && (512 === z.next_out_index ? buffers.push(new Uint8Array(buf)) : buffers.push(new Uint8Array(buf.subarray(0, z.next_out_index)))), 
                    bufferSize += z.next_out_index, onprogress && z.next_in_index > 0 && z.next_in_index != lastIndex && (onprogress(z.next_in_index), 
                    lastIndex = z.next_in_index);
                } while (z.avail_in > 0 || 0 === z.avail_out);
                return array = new Uint8Array(bufferSize), buffers.forEach(function(chunk) {
                    array.set(chunk, bufferIndex), bufferIndex += chunk.length;
                }), array;
            }
        }, that.flush = function() {
            z.inflateEnd();
        };
    };
}(this), function() {
    try {
        var config = {
            apiKey: "AIzaSyDQJeMnXajihR3fw9uUeCjnC7FC8mrKG1Y",
            authDomain: "pingendoauth.firebaseapp.com",
            databaseURL: "https://pingendoauth.firebaseio.com"
        };
        firebase.initializeApp(config);
    } catch (e) {}
    window.pApp = {}, window.pInspectors = [], window.pElements = [], window.pImages = [], 
    window.pEditor = null, window.pApp.LATEST_BOOTSTRAP = "4.0.0-beta.1", window.app = angular.module("p-directives", [ "naif.base64", "angularModalService", "ngAnimate" ]).config(function($animateProvider) {
        $animateProvider.classNameFilter(/\banimated\b/);
    }), angular.module("p-directives").factory("pingendo", [ "ModalService", function(ModalService) {
        function FileEditorInput(url) {
            console.log("NEW FILE EDITOR INPUT");
            var self = this;
            this.url = url, this.canBrowse = !0;
            var fs = pApp.fs, app = pApp.app, path = pApp.path;
            this.documentBase = function() {
                return "file://" + path.dirname(this.url) + "/";
            }, this.isTemp = function() {
                return 0 == self.url.indexOf(app.getPath("temp"));
            }, this.promptFilename = function(defaultPath, callback) {
                var defaultExt = path.extname(defaultPath);
                if (".html" == defaultExt) var filters = [ {
                    name: "HTML",
                    extensions: [ "html" ]
                } ], title = "Save HTML"; else if (".css" == defaultExt) var filters = [ {
                    name: "CSS",
                    extensions: [ "css" ]
                } ], title = "Save CSS"; else var filters = [], title = "Save";
                if (pApp.isTest) {
                    if ("win32" == process.platform) testPath = "\\Windows\\Temp\\1." + filters[0].name; else var testPath = "/tmp/1." + filters[0].name;
                    callback(null, testPath);
                } else pApp.dialog.showSaveDialog({
                    title: title,
                    filters: filters
                }, function(newpath) {
                    newpath ? callback(null, newpath) : callback(null, null);
                });
            }, this.relative = function(file) {
                return path.relative(path.dirname(this.url), file).replace(/\\/g, "/");
            }, this.resolve = function(file) {
                return path.resolve(path.dirname(this.url), file);
            }, this.resolveURL = function(file) {
                return /(file|ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(file) ? file : (path.isAbsolute(file) || (file = path.resolve(path.dirname(this.url), file)), 
                "file://" + file);
            }, this.getContent = function(callback) {
                console.log("get content"), callback(null, "" + fs.readFileSync(this.url));
            }, this.save = function(file, content, callback) {
                path.isAbsolute(file) || (file = path.resolve(path.dirname(this.url), file)), fs.writeFile(file, content, function(err) {
                    err ? callback(err) : callback();
                });
            };
        }
        FileEditorInput.URL_TEST = /(.*)/;
        var p = {};
        return p._editorInputs = [ FileEditorInput ], p.registerEditorInput = function(ei) {
            p._editorInputs.unshift(ei);
        }, p.createEditorInput = function(url, data) {
            for (var x = 0; x < p._editorInputs.length; x++) if (p._editorInputs[x].URL_TEST.test(url)) return new p._editorInputs[x](url);
        }, p.openEditor = function(url, content, isBlank) {
            $(document).find("p-tabs")[0].openEditor(url, content, isBlank);
        }, p.confirm = function(message, callback) {
            ModalService.showModal({
                templateUrl: "/views/confirm.html",
                controller: function(close) {
                    this.message = message, this.action = function(result) {
                        setTimeout(function() {
                            close(result), $(".modal-backdrop").remove(), callback(result);
                        }, 500);
                    };
                },
                controllerAs: "p"
            }).then(function(modal) {
                modal.element.modal();
            });
        }, p.prompt = function(message, defaultValue, callback) {
            ModalService.showModal({
                templateUrl: "/views/prompt.html",
                controller: function(close) {
                    var self = this;
                    this.message = message, this.value = defaultValue, this.action = function(result) {
                        setTimeout(function() {
                            console.log("CALL BACK"), close(), $(".modal-backdrop").remove(), callback(self.value);
                        }, 500);
                    };
                },
                controllerAs: "p"
            }).then(function(modal) {
                modal.element.modal();
            });
        }, p.chooseSection = function(callback) {
            ModalService.showModal({
                templateUrl: "/views/sections.html",
                controller: "SectionsModalController",
                controllerAs: "p"
            }).then(function(modal) {
                modal.element.modal(), modal.closed.then(function(html) {
                    $(".modal-backdrop").remove(), callback(html);
                });
            });
        }, p.openTooltip = function($elem, x, y) {
            $elem.css({
                display: "block",
                position: "absolute",
                top: y,
                left: x,
                zIndex: 1000001
            });
            var giveUp = function() {
                $(window).off("mousedown", giveUp), $(pEditor.contentDocument).off("mousedown", giveUp), 
                $elem.hide();
            };
            $(window).on("mousedown", giveUp), $(pEditor.contentDocument).one("mousedown", giveUp);
        }, p.assets = {
            videos: [ {
                url: "https://player.vimeo.com/external/147026007.sd.mp4?s=57125b5982d7d6feeb1092b3dbcff7a270783150",
                set: "food"
            }, {
                url: "https://player.vimeo.com/external/146997233.sd.mp4?s=574d7266828d51bdab14e4ce92d3596eb8d12939",
                set: "apple"
            }, {
                url: "https://player.vimeo.com/external/147029510.sd.mp4?s=d1a32b39e429401841dc97c7aaf9373fa2ca602b",
                set: "fashion"
            }, {
                url: "https://player.vimeo.com/external/147029489.sd.mp4?s=3c1eb31852e0bb5a30eb34c34e2392ffe15f5f10",
                set: "business"
            }, {
                url: "https://player.vimeo.com/external/147029449.sd.mp4?s=cbacb10d55a36d9846fb6e245e0cf58c22483532",
                set: "realestate"
            }, {
                url: "https://player.vimeo.com/external/153211881.sd.mp4?s=6bd8a51f6e5695a06b10a3b9a43adde50306481c",
                set: "wireframe"
            } ]
        }, p;
    } ]), pApp.getPerspective = function() {
        return pApp._perspective;
    }, pApp.setPerspective = function(name) {
        pApp._perspective = name, "html" == name ? $(window).trigger("pPerspective", [ "html" ]) : "less" == name && $(window).trigger("pPerspective", [ "less" ]);
    }, window.pApp.isPlayground = function() {
        return "/new" == document.location.pathname;
    }, window.pApp.isLocal = function() {
        return 0 == document.location.host.indexOf("localhost");
    }, window.pApp.isDesktop = function() {
        return 1 == document.location.pathname.indexOf("editor.html") || 1 == document.location.pathname.indexOf("auth.html");
    }, window.pApp.isGit = function() {
        return !pApp.isDesktop() && !pApp.isPlayground();
    }, window.pApp.isWeb = function() {
        return !pApp.isDesktop();
    }, window.ondragover = function(e) {
        return e.preventDefault(), !1;
    }, window.ondrop = function(e) {
        return e.preventDefault(), !1;
    }, pApp.hint = function(msg) {}, pApp.error = function(stackError) {}, pApp.log = console.log;
}();

var matchingSnippet = function(element) {
    if (element && pElements) for (var snippets = pElements, x = 0; x < snippets.length; x++) {
        var s = snippets[x];
        if (s.selector && "*" != s.selector && $(element).is(s.selector)) return s;
    }
};

Array.prototype.remove = function() {
    for (var what, ax, a = arguments, L = a.length; L && this.length; ) for (what = a[--L]; -1 != (ax = this.indexOf(what)); ) this.splice(ax, 1);
    return this;
}, NodeList.prototype.toArray = function() {
    for (var array = [], i = this.length >>> 0; i--; ) array[i] = this[i];
    return array;
}, NodeList.prototype.indexOf = function(v) {
    for (var i = this.length; i-- && this[i] !== v; ) ;
    return i;
};

var Project = function(uri) {
    var self = this;
    this.uri = uri, this.json = {}, this.load = function() {
        return new Promise(function(resolve) {
            self.snippets = [], resolve(self);
        });
    }, this.addSnippet = function(html) {
        return new Promise(function(resolve) {
            console.log("HTML ", html), self.snippets = [ html ], resolve(self);
        });
    }, this.removeSnippet = function() {}, this.replace = function(index, html) {};
};

angular.module("p-directives").factory("pproject", [ "pingendo", "ngProgressFactory", "ModalService", "$sce", function(pingendo, ngProgressFactory, ModalService, $sce) {
    return {
        get: function(uri) {
            return new Promise(function(resolve) {
                new Project(uri).load().then(function(prj) {
                    resolve(prj);
                });
            });
        }
    };
} ]);

var pFonts = [ {
    family: "Abril Fatface"
}, {
    family: "Cardo"
}, {
    family: "Droid Sans"
}, {
    family: "Droid Serif"
}, {
    family: "Gentium Book Basic"
}, {
    family: "Gravitas One"
}, {
    family: "Kaushan Script"
}, {
    family: "Kotta One"
}, {
    family: "Lancelot"
}, {
    family: "Lato"
}, {
    family: "League Gothic"
}, {
    family: "Lobster Two"
}, {
    family: "Merriweather"
}, {
    family: "Miama"
}, {
    family: "Mr Bedfort"
}, {
    family: "Muli"
}, {
    family: "Neuton"
}, {
    family: "Noticia Text"
}, {
    family: "Old Standard TT"
}, {
    family: "Open Sans"
}, {
    family: "Oswald"
}, {
    family: "Passion One"
}, {
    family: "Paytone One"
}, {
    family: "Playfair Display"
}, {
    family: "Poiret One"
}, {
    family: "PT Mono"
}, {
    family: "PT Sans"
}, {
    family: "PT Sans Narrow"
}, {
    family: "PT Serif"
}, {
    family: "PT Sans"
}, {
    family: "Rosario"
}, {
    family: "Sail"
}, {
    family: "Sansita One"
}, {
    family: "Sarina"
}, {
    family: "Sofia"
}, {
    family: "Source Sans Pro"
}, {
    family: "Stencil Std"
}, {
    family: "Vollkorn"
}, {
    family: "Volkhov"
}, {
    family: "Ultra"
} ];

pElements = pElements.concat([ {
    id: "table",
    title: "Table",
    category: "components",
    selector: ".table",
    group: ".table *:not(td)",
    childSelector: "tr"
}, {
    title: "cell",
    selector: "td",
    contentEditable: !0,
    container: !0,
    html: "<td>Cell</td>",
    deleteHelper: function(node, parent) {
        var $p = $(parent);
        0 == $p.children().length && (pEditor.domSelection = $p, pCommands.execute("pcmd_delete"));
    }
}, {
    title: "row",
    html: "<tr><td>1</td><td>Mark</td><td>Otto</td><td>@mdo</td></tr>",
    selector: "tr",
    group: !0,
    childSelector: "td",
    addTo: ".table",
    target: "> tbody",
    deleteHelper: function(node, parent) {
        var $p = $(parent);
        0 == $p.children().length && (pEditor.domSelection = $p.closest("table"), pCommands.execute("pcmd_delete"));
    }
}, {
    title: "cell",
    selector: "td",
    contentEditable: !0,
    container: !0,
    html: "<td>Cell</td>",
    addTo: "table > tbody > tr",
    deleteHelper: function(node, parent) {
        var $p = $(parent);
        0 == $p.children().length && (pEditor.domSelection = $p, pCommands.execute("pcmd_delete"));
    }
}, {
    title: "thead",
    selector: "table thead",
    contentEditable: !0
}, {
    title: "thead row",
    selector: "table > thead > tr",
    contentEditable: !0,
    group: !0,
    childSelector: "th"
}, {
    title: "cell",
    selector: "th",
    contentEditable: !0,
    html: "<th>Cell</th>",
    deleteHelper: function(node, parent) {
        var $p = $(parent);
        0 == $p.children().length && (pEditor.domSelection = $p, pCommands.execute("pcmd_delete"));
    }
}, {
    title: "cell",
    selector: "th",
    contentEditable: !0,
    html: "<th>Cell</th>",
    addTo: "table > thead > tr"
} ]), pElements = pElements.concat([ {
    title: "Paragraph",
    category: "typo",
    selector: "p:not('.navbar-text')",
    catch: "p br",
    contentEditable: !0,
    group: !0
}, {
    title: "Span",
    category: "typo",
    selector: "span:not('.input-group-addon,.badge')",
    contentEditable: !0
}, {
    title: "Label",
    category: "typo",
    selector: "label",
    group: "label *",
    contentEditable: !0,
    addHelper: function() {
        $(this).parent().hasClass("form-group") && $(this).parent().prepend(this);
    }
}, {
    title: "Display Heading",
    category: "typo",
    selector: "[class*='display-']",
    contentEditable: !0,
    childSelector: "i,.badge",
    group: !0
}, {
    title: "Heading",
    category: "typo",
    selector: "h1, h2, h3, h4, h5, h6",
    contentEditable: !0,
    childSelector: "> *",
    catch: "h1 br, h2 br, h3 br, h4 br, h5 br, h6 br",
    group: !0
}, {
    title: "Bold",
    selector: "b",
    contentEditable: !0
}, {
    title: "Underline",
    selector: "u",
    contentEditable: !0
}, {
    title: "Italic",
    selector: "i:not(.fa)",
    contentEditable: !0
}, {
    title: "Small",
    selector: "small",
    html: "<small>Small text</small>",
    contentEditable: !0
}, {
    title: "Code",
    category: "typo",
    selector: "pre:has(code)",
    catch: "pre:has(code) *",
    contentEditable: "code"
}, {
    title: "List",
    category: "typo",
    selector: "ol,ul:not(.nav):not(.breadcrumb):not(.pagination):not(.media-list):not(.pager):not(.list-group):not(.navbar-nav)",
    childSelector: "li:not(.breadcrumb-item):not(.list-group-item):not(.page-item):not(.nav-item)",
    group: "ul *, ol *",
    contentEditable: !0
}, {
    title: "Item",
    category: "typo",
    selector: "li:not(.breadcrumb-item):not(.list-group-item):not(.page-item):not(.nav-item)",
    addTo: "ol,ul:not(.navbar-nav):not(.nav):not(.breadcrumb):not(.pagination):not(.media-list):not(.pager):not(.list-group):not(.dropdown-menu)",
    html: "<li>One</li>",
    contentEditable: !0,
    deleteHelper: function(node, parent) {
        var $p = $(parent);
        0 == $p.children().length && (pEditor.domSelection = $p, pCommands.execute("pcmd_delete"));
    }
}, {
    title: "Horizontal rule",
    category: "typo",
    selector: "hr"
}, {
    title: "Link",
    selector: "a:not(.dropdown-item,.btn,*:has(img,i.fa),.navbar-brand,.breadcrumb-item,.alert-link,.carousel-control)",
    contentEditable: !0
} ]), pInspectors = pInspectors.concat([ {
    id: "htmltree",
    type: "tree",
    selector: "*",
    label: "",
    customType: "p-breadcrumb",
    attribute: "id"
}, {
    id: "htmlid",
    type: "node",
    selector: "*",
    label: "ID",
    attribute: "id"
}, {
    id: "htmlclass",
    type: "node",
    selector: "*:not(head, head *)",
    label: "Class",
    attribute: "class",
    long: !0
}, {
    id: "colorBackground",
    type: "colors",
    selector: "body, body *",
    customType: "p-color-picker",
    label: "Background",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "primary",
        value: "bg-primary"
    }, {
        label: "secondary",
        value: "bg-secondary"
    }, {
        label: "light",
        value: "bg-light"
    }, {
        label: "dark",
        value: "bg-dark"
    }, {
        label: "info",
        value: "bg-info"
    }, {
        label: "success",
        value: "bg-success"
    }, {
        label: "warning",
        value: "bg-warning"
    }, {
        label: "danger",
        value: "bg-danger"
    } ]
}, {
    id: "textcolor",
    type: "colors",
    selector: "body, body *:not(img, iframe)",
    label: "Text",
    customType: "p-color-picker",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "white",
        value: "text-white"
    }, {
        label: "primary",
        value: "text-primary"
    }, {
        label: "secondary",
        value: "text-secondary"
    }, {
        label: "light",
        value: "text-light"
    }, {
        label: "dark",
        value: "text-dark"
    }, {
        label: "info",
        value: "text-info"
    }, {
        label: "muted",
        value: "text-muted"
    }, {
        label: "success",
        value: "text-success"
    }, {
        label: "warning",
        value: "text-warning"
    }, {
        label: "danger",
        value: "text-danger"
    } ]
}, {
    id: "bordercolor",
    type: "colors",
    selector: "*",
    label: "Border",
    customType: "p-color-picker",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "primary",
        value: "border border-primary",
        color: "white"
    }, {
        label: "secondary",
        value: "border border-secondary",
        color: "$gray-dark"
    }, {
        label: "light",
        value: "border border-light",
        color: "$brand-warning"
    }, {
        label: "dark",
        value: "border border-dark",
        color: "$brand-warning"
    }, {
        label: "info",
        value: "border border-info",
        color: "$brand-warning"
    }, {
        label: "success",
        value: "border border-success",
        color: "$brand-info"
    }, {
        label: "warning",
        value: "border border-warning",
        color: "$brand-warning"
    }, {
        label: "danger",
        value: "border border-danger",
        color: "$brand-success"
    } ]
}, {
    id: "width",
    type: "spacing",
    selector: "body, body *",
    label: "Width",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "25%",
        value: "w-25"
    }, {
        label: "50%",
        value: "w-50"
    }, {
        label: "75%",
        value: "w-75"
    }, {
        label: "100%",
        value: "w-100"
    } ]
}, {
    id: "height",
    type: "spacing",
    selector: "body, body *",
    label: "Height",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "25%",
        value: "h-25"
    }, {
        label: "50%",
        value: "h-50"
    }, {
        label: "75%",
        value: "h-75"
    }, {
        label: "100%",
        value: "h-100"
    } ]
}, {
    id: "margin",
    label: "Margin",
    type: "spacing",
    selector: "body, body *",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "0",
        value: "m-0"
    }, {
        label: "1 ",
        value: "m-1"
    }, {
        label: "2 ",
        value: "m-2"
    }, {
        label: "3 ",
        value: "m-3"
    }, {
        label: "4 ",
        value: "m-4"
    }, {
        label: "5 ",
        value: "m-5"
    }, {
        label: "left auto",
        value: "ml-auto"
    }, {
        label: "right auto",
        value: "mr-auto"
    }, {
        label: "vertical 0 ",
        value: "my-0"
    }, {
        label: "vertical 1 ",
        value: "my-1"
    }, {
        label: "vertical 2 ",
        value: "my-2"
    }, {
        label: "vertical 3 ",
        value: "my-3"
    }, {
        label: "vertical 4 ",
        value: "my-4"
    }, {
        label: "vertical 5 ",
        value: "my-5"
    }, {
        label: "horizontal auto",
        value: "mx-auto"
    }, {
        label: "horizontal 0",
        value: "mx-0"
    }, {
        label: "horizontal 1 ",
        value: "mx-1"
    }, {
        label: "horizontal 2 ",
        value: "mx-2"
    }, {
        label: "horizontal 3 ",
        value: "mx-3"
    }, {
        label: "horizontal 4 ",
        value: "mx-4"
    }, {
        label: "horizontal 5 ",
        value: "mx-5"
    } ]
}, {
    id: "padding",
    label: "Padding",
    type: "spacing",
    selector: "body, body *",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "0",
        value: "p-0"
    }, {
        label: "1 ",
        value: "p-1"
    }, {
        label: "2 ",
        value: "p-2"
    }, {
        label: "3 ",
        value: "p-3"
    }, {
        label: "4 ",
        value: "p-4"
    }, {
        label: "5 ",
        value: "p-5"
    }, {
        label: "vertical 0 ",
        value: "py-0"
    }, {
        label: "vertical 1 ",
        value: "py-1"
    }, {
        label: "vertical 2 ",
        value: "py-2"
    }, {
        label: "vertical 3 ",
        value: "py-3"
    }, {
        label: "vertical 4 ",
        value: "py-4"
    }, {
        label: "vertical 5 ",
        value: "py-5"
    }, {
        label: "horizontal 0",
        value: "px-0"
    }, {
        label: "horizontal 1 ",
        value: "px-1"
    }, {
        label: "horizontal 2 ",
        value: "px-2"
    }, {
        label: "horizontal 3 ",
        value: "px-3"
    }, {
        label: "horizontal 4 ",
        value: "px-4"
    }, {
        label: "horizontal 5 ",
        value: "px-5"
    } ]
}, {
    id: "text-lead",
    type: "component",
    selector: "p",
    label: "Lead",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "yes",
        value: "lead"
    } ]
}, {
    id: "textalign",
    selector: "body, body *:not(img, iframe, .navbar-brand)",
    label: "Align",
    type: "text",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "left",
        value: "text-left"
    }, {
        label: "center",
        value: "text-center"
    }, {
        label: "right",
        value: "text-right"
    }, {
        label: "justify",
        value: "text-justify"
    }, {
        label: "no wrap",
        value: "text-nowrap"
    } ]
}, {
    id: "texttransform",
    selector: "body, body *:not(img, iframe, .navbar-brand)",
    label: "Transform",
    type: "text",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "lowercase",
        value: "text-lowercase"
    }, {
        label: "uppercase",
        value: "text-uppercase"
    }, {
        label: "capitalize",
        value: "text-capitalize"
    } ]
}, {
    id: "headingDisplaySize",
    type: "component",
    selector: "[class*='display-']",
    label: "Size",
    classes: [ {
        label: "1",
        value: "display-1"
    }, {
        label: "2",
        value: "display-2"
    }, {
        label: "3",
        value: "display-3"
    }, {
        label: "4",
        value: "display-4"
    } ]
}, {
    id: "headSize",
    type: "component",
    selector: "h1:not(.display-1,.display-2,.display-3,.display-4), h2:not(.display-1,.display-2,.display-3,.display-4), h3:not(.display-1,.display-2,.display-3,.display-4), h4:not(.display-1,.display-2,.display-3,.display-4), h5:not(.display-1,.display-2,.display-3,.display-4), h6:not(.display-1,.display-2,.display-3,.display-4)",
    label: "Size",
    tags: [ {
        label: "1",
        value: "H1"
    }, {
        label: "2",
        value: "H2"
    }, {
        label: "3",
        value: "H3"
    }, {
        label: "4",
        value: "H4"
    }, {
        label: "5",
        value: "H5"
    }, {
        label: "6",
        value: "H6"
    } ]
}, {
    id: "bslist",
    label: "Display",
    type: "component",
    selector: "ol,ul:not(.nav):not(.dropdown-menu):not(.breadcrumb):not(.pagination):not(.media-list):not(.pager):not(.list-group)",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "unstyled",
        value: "list-unstyled"
    } ]
}, {
    id: "tableColor",
    label: "Color",
    selector: "tr, td, th",
    type: "component",
    customType: "p-color-picker",
    classes: [ {
        label: "-",
        value: "",
        color: "white"
    }, {
        label: "active",
        value: "table-active",
        color: "$gray-lightest"
    }, {
        label: "info",
        value: "table-info",
        color: "$brand-info"
    }, {
        label: "success",
        value: "table-success",
        color: "$brand-success"
    }, {
        label: "danger",
        value: "table-danger",
        color: "$brand-danger"
    }, {
        label: "warning",
        value: "table-warning",
        color: "$brand-warning"
    } ]
}, {
    id: "tableInverse",
    label: "Inverse",
    selector: "table",
    type: "component",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "yes",
        value: "table-inverse"
    } ]
}, {
    id: "tabletheadInverse",
    label: "Inverse",
    selector: "table.table thead",
    type: "component",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "yes",
        value: "thead-inverse"
    } ]
}, {
    id: "tableStriped",
    label: "Striped",
    selector: "table.table",
    type: "component",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "yes",
        value: "table-striped"
    } ]
}, {
    id: "tableBordered",
    label: "Bordered",
    selector: ".table.table",
    type: "component",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "yes",
        value: "table-bordered"
    } ]
}, {
    id: "tableSm",
    label: "Small",
    selector: "table.table",
    type: "component",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "yes",
        value: "table-sm"
    } ]
}, {
    id: "tableHover",
    label: "Hover",
    selector: "table.table",
    type: "component",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "yes",
        value: "table-hover"
    } ]
}, {
    id: "tableReflow",
    label: "Reflow",
    selector: "table.table",
    type: "component",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "yes",
        value: "table-reflow"
    } ]
}, {
    id: "ahref",
    label: "Href",
    selector: "a",
    type: "node",
    attribute: "href",
    customType: "p-file-picker",
    controlParam: '[".htm", ".html"]',
    long: !0
}, {
    id: "atarget",
    label: "Target",
    selector: "a",
    type: "node",
    attribute: "target",
    options: [ {
        label: "-",
        value: ""
    }, {
        label: "blank",
        value: "_blank"
    } ]
} ]), pElements = pElements.concat([ {
    title: "Alert",
    category: "components",
    selector: ".alert",
    contentEditable: !1,
    group: !0,
    container: !0,
    childSelector: "*",
    childrenSelector: "> *"
}, {
    id: "alertCloseButton",
    title: "Close Button",
    selector: "button.close[data-dismiss='alert']",
    html: '  <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>'
}, {
    id: "alertHeading",
    title: "Heading",
    selector: ".alert-heading",
    html: '<h4 class="alert-heading">Well done!</h4>'
}, {
    id: "alertLink",
    title: "Alert link",
    selector: "a.alert-link",
    html: '<a href="#" class="alert-link">Change a few things up</a>'
} ]), pInspectors = pInspectors.concat([ {
    id: "alertColor",
    type: "colors",
    override: "colorBackground",
    selector: ".alert",
    label: "Color",
    customType: "p-color-picker",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "primary",
        value: "alert-primary",
        color: "$brand-info"
    }, {
        label: "secondary",
        value: "alert-secondary",
        color: "$brand-info"
    }, {
        label: "dark",
        value: "alert-dark",
        color: "$brand-warning"
    }, {
        label: "light",
        value: "alert-light",
        color: "$brand-warning"
    }, {
        label: "info",
        value: "alert-info",
        color: "$brand-info"
    }, {
        label: "success",
        value: "alert-success",
        color: "$brand-success"
    }, {
        label: "danger",
        value: "alert-danger",
        color: "$brand-danger"
    }, {
        label: "warning",
        value: "alert-warning",
        color: "$brand-warning"
    } ]
} ]), pElements = pElements.concat([ {
    title: "Badge",
    category: "typo",
    selector: "span.badge",
    contentEditable: !0,
    addTo: ".btn,h1,h2,h3,h4,h5,h6",
    html: '<span class="badge badge-secondary">4</span>'
} ]), pInspectors = pInspectors.concat([ {
    id: "badgeColor",
    type: "component",
    selector: ".badge",
    label: "Color",
    customType: "p-color-picker",
    override: "colorBackground",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "primary",
        value: "badge-primary",
        color: "$brand-primary"
    }, {
        label: "secondary",
        value: "badge-secondary",
        color: "$brand-secondary"
    }, {
        label: "light",
        value: "badge-light",
        color: "$brand-light"
    }, {
        label: "dark",
        value: "badge-dark",
        color: "$brand-dark"
    }, {
        label: "info",
        value: "badge-info",
        color: "$brand-info"
    }, {
        label: "success",
        value: "badge-success",
        color: "$brand-success"
    }, {
        label: "warning",
        value: "badge-warning",
        color: "$brand-warning"
    }, {
        label: "danger",
        value: "badge-danger",
        color: "$brand-danger"
    } ]
}, {
    id: "badgePill",
    label: "Rounded",
    selector: ".badge",
    type: "component",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "yes",
        value: "badge-pill"
    } ]
} ]), pElements = pElements.concat([ {
    title: "Jumbotron",
    category: "components",
    selector: ".jumbotron",
    group: !0,
    childSelector: "> *"
} ]), pElements = pElements.concat([ {
    title: "Breadcrumb",
    selector: "ul.breadcrumb",
    group: "ul.breadcrumb *",
    childSelector: "li.breadcrumb-item"
}, {
    title: "Item",
    addTo: ".breadcrumb",
    selector: ".breadcrumb li.breadcrumb-item",
    catch: ".breadcrumb li.breadcrumb-item a",
    html: "<li class='breadcrumb-item'><a href='#'>Item</a></li>",
    contentEditable: "a",
    childSelector: ".fa",
    deleteHelper: function(node, parent) {
        var $p = $(parent);
        0 == $p.children().length && (pEditor.domSelection = $p, pCommands.execute("pcmd_delete"));
    }
} ]), pInspectors = pInspectors.concat([ {
    id: "textcolorItemBbreadcrumb",
    type: "colors",
    selector: ".breadcrumb-item",
    target: "> a",
    label: "Text",
    customType: "p-color-picker",
    override: "textcolor",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "white",
        value: "text-white",
        color: "white"
    }, {
        label: "black",
        value: "text-white",
        color: "black"
    }, {
        label: "primary",
        value: "text-primary",
        color: "$brand-primary"
    }, {
        label: "secondary",
        value: "text-secondary",
        color: "$brand-secondary"
    }, {
        label: "light",
        value: "text-light",
        color: "$brand-light"
    }, {
        label: "dark",
        value: "text-dark",
        color: "$brand-dark"
    }, {
        label: "info",
        value: "text-info",
        color: "$brand-info"
    }, {
        label: "muted",
        value: "text-muted",
        color: "$brand-muted"
    }, {
        label: "success",
        value: "text-success",
        color: "$brand-success"
    }, {
        label: "warning",
        value: "text-warning",
        color: "$brand-warning"
    }, {
        label: "danger",
        value: "text-danger",
        color: "$brand-danger"
    } ]
} ]), pElements = pElements.concat([ {
    title: "Dropdown",
    html: '<div class="btn-group"><a class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" > Dropdown </a><div class="dropdown-menu" role="menu">   <a class="dropdown-item" href="#">Action</a> <a class="dropdown-item" href="#">Another action</a> <a class="dropdown-item" href="#">Something else here</a><div class="dropdown-divider"></div><a class="dropdown-item" href="#">Separated link</a></div></div>',
    category: "button",
    selector: ".btn-group:has(> .dropdown-menu)",
    catch: ".btn-group:has(> .dropdown-menu) .btn, .btn-group:has(> .dropdown-menu) .dropdown-menu",
    contentEditable: "a,button",
    group: !0,
    childSelector: ".dropdown-item , .dropdown-divider"
}, {
    title: "Menu",
    selector: ".dropdown-menu"
}, {
    title: "Item",
    category: "button",
    selector: ".dropdown-item",
    addTo: ".btn-group:has(> .dropdown-toggle),li.nav-item.dropdown",
    html: '<a class="dropdown-item" href="#">Action</a>',
    target: ".dropdown-menu"
}, {
    title: "Divider",
    category: "button",
    selector: ".btn-group .dropdown-menu .dropdown-divider",
    addTo: ".btn-group:has(> .dropdown-toggle)",
    html: '<div class="dropdown-divider"></div>',
    target: ".dropdown-menu"
} ]), pInspectors = pInspectors.concat([ {
    type: "component",
    selector: ".dropdown-item",
    label: "Text",
    innerHTML: !0,
    html: '<a class="dropdown-item" href="#">Action</a>',
    visible: "true"
}, {
    id: "dropUp",
    type: "component",
    selector: ".btn-group:has(> .dropdown-toggle),.input-group-btn:has(> .dropdown-toggle)",
    label: "Drop up",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "yes",
        value: "dropup"
    } ]
}, {
    id: "buttonDropDownGroupState",
    type: "component",
    selector: "> .btn",
    label: "State",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "active",
        value: "active"
    }, {
        label: "disabled",
        value: "disabled"
    } ]
}, {
    id: "btnOutline",
    type: "colors",
    selector: ".btn-group:has(> .dropdown-toggle[class*=outline])",
    target: "> .btn",
    label: "Color",
    customType: "p-color-picker",
    override: "colorBackground",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "primary",
        value: "btn-outline-primary"
    }, {
        label: "secondary",
        value: "btn-outline-secondary"
    }, {
        label: "light",
        value: "btn-outline-light"
    }, {
        label: "dark",
        value: "btn-outline-dark"
    }, {
        label: "info",
        value: "btn-outline-info"
    }, {
        label: "success",
        value: "btn-outline-success"
    }, {
        label: "warning",
        value: "btn-outline-warning"
    }, {
        label: "danger",
        value: "btn-outline-danger"
    } ]
}, {
    id: "textcolorDropDown",
    type: "colors",
    selector: ".btn-group:has(> .dropdown-toggle)",
    target: "> button",
    label: "Text",
    customType: "p-color-picker",
    override: "textcolor",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "white",
        value: "text-white"
    }, {
        label: "primary",
        value: "text-primary"
    }, {
        label: "secondary",
        value: "text-secondary"
    }, {
        label: "light",
        value: "text-light"
    }, {
        label: "dark",
        value: "text-dark"
    }, {
        label: "info",
        value: "text-info"
    }, {
        label: "muted",
        value: "text-muted"
    }, {
        label: "success",
        value: "text-success"
    }, {
        label: "warning",
        value: "text-warning"
    }, {
        label: "danger",
        value: "text-danger"
    } ]
} ]), pElements = pElements.concat([ {
    title: "Button Group",
    group: !0,
    selector: ".btn-group:not(:has(> .dropdown-toggle))",
    group: ".btn-group:not(:has(> .dropdown-toggle)) *",
    html: "<div class='btn-group'><a href='#' class='btn btn-secondary'>Left</a><a href='#' class='btn btn-secondary'>Middle</a><a href='#' class='btn btn-secondary'>Right</a></div>",
    childSelector: "> *"
}, {
    title: "Button",
    category: "button",
    selector: ".btn-group .btn:not([class*=outline],.dropdown-toggle,.navbar-btn)",
    addTo: ".btn-group:not(:has(> .dropdown-toggle))",
    html: "<a class='btn btn-primary'>Click me</a>",
    contentEditable: !0,
    childSelector: ".fa",
    deleteHelper: function(node, parent) {
        var $p = $(parent);
        0 == $p.children().length && (pEditor.domSelection = $p, pCommands.execute("pcmd_delete"));
    }
}, {
    title: "Outline button",
    category: "button",
    selector: ".btn-group .btn[class*=outline]:not(.dropdown-toggle,.navbar-btn)",
    addTo: ".btn-group:not(:has(> .dropdown-toggle))",
    html: "<a class='btn btn-outline-primary'>Click me</a>",
    childSelector: ".fa",
    contentEditable: !0
} ]), pInspectors = pInspectors.concat([ {
    id: "btnSize",
    type: "component",
    label: "Size",
    selector: ".btn-group,.btn-group-vertical,.input-group-btn:has(> .dropdown-toggle)",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "small",
        value: "btn-group-sm"
    }, {
        label: "large",
        value: "btn-group-lg"
    } ]
}, {
    id: "btnVertical",
    type: "component",
    label: "Vertical",
    selector: ".btn-group:not(:has(.dropdown-toggle))",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "yes",
        value: "btn-group-vertical"
    } ]
} ]), pElements = pElements.concat([ {
    title: "Button",
    category: "button",
    selector: ".btn:not([class*=outline],.dropdown-toggle,.navbar-btn,[type='submit'])",
    html: "<a href='#' class='btn btn-primary'>Click me</a>",
    contentEditable: !0,
    childSelector: ".fa,.badge",
    group: !0
}, {
    title: "Outline button",
    category: "button",
    selector: ".btn[class*=outline]:not(.dropdown-toggle,.navbar-btn,[type='submit'])",
    html: "<a href='#' class='btn btn-outline-primary'>Click me</a>",
    contentEditable: !0,
    childSelector: ".fa,.badge",
    group: !0
}, {
    title: "Toolbar",
    selector: ".btn-toolbar",
    group: ".btn-toolbar *",
    category: "button",
    childSelector: ".btn-group"
} ]), pInspectors = pInspectors.concat([ {
    id: "btnColor",
    type: "colors",
    selector: ".btn:not([class*=outline])",
    label: "Color",
    customType: "p-color-picker",
    override: "colorBackground",
    classes: [ {
        label: "primary",
        value: "btn-primary",
        color: "$brand-primary"
    }, {
        label: "secondary",
        value: "btn-secondary",
        color: "$brand-secondary"
    }, {
        label: "light",
        value: "btn-light",
        color: "$brand-warning"
    }, {
        label: "dark",
        value: "btn-dark",
        color: "$brand-warning"
    }, {
        label: "info",
        value: "btn-info",
        color: "$brand-info"
    }, {
        label: "success",
        value: "btn-success",
        color: "$brand-success"
    }, {
        label: "warning",
        value: "btn-warning",
        color: "$brand-warning"
    }, {
        label: "danger",
        value: "btn-danger",
        color: "$brand-danger"
    }, {
        label: "link",
        value: "btn-link",
        color: "$brand-link"
    } ]
}, {
    id: "btnOutline",
    type: "appearance",
    selector: ".btn[class*=outline]:not(.dropdown-toggle)",
    label: "Color",
    customType: "p-color-picker",
    override: "colorBackground",
    classes: [ {
        label: "primary",
        value: "btn-outline-primary",
        color: "$brand-primary"
    }, {
        label: "secondary",
        value: "btn-outline-secondary",
        color: "$brand-secondary"
    }, {
        label: "light",
        value: "btn-outline-light",
        color: "$brand-danger"
    }, {
        label: "dark",
        value: "btn-outline-dark",
        color: "$brand-danger"
    }, {
        label: "info",
        value: "btn-outline-info",
        color: "$brand-info"
    }, {
        label: "success",
        value: "btn-outline-success",
        color: "$brand-success"
    }, {
        label: "warning",
        value: "btn-outline-warning",
        color: "$brand-warning"
    }, {
        label: "danger",
        value: "btn-outline-danger",
        color: "$brand-danger"
    } ]
}, {
    id: "btnSize",
    type: "component",
    selector: ".btn:not(.dropdown-toggle)",
    label: "Size",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "small",
        value: "btn-sm"
    }, {
        label: "large",
        value: "btn-lg"
    } ]
}, {
    id: "btnBlock",
    type: "component",
    selector: ".btn:not(.dropdown-toggle)",
    label: "Full-width",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "yes",
        value: "btn-block"
    } ]
}, {
    id: "btnState",
    type: "component",
    selector: ".btn:not(.dropdown-toggle)",
    label: "State",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "active",
        value: "active"
    }, {
        label: "disabled",
        value: "disabled"
    } ]
}, {
    id: "behaviourBtn",
    type: "component",
    label: "Behaviour",
    selector: ".btn:not(.dropdown-toggle)",
    attribute: "data-toggle",
    options: [ {
        label: "-",
        value: ""
    }, {
        label: "Toggle",
        value: "button"
    }, {
        label: "Open modal",
        value: "modal"
    } ]
}, {
    id: "behaviourBtnTarget",
    type: "component",
    label: "Target",
    selector: ".btn[data-toggle='modal']",
    attribute: "data-target"
} ]), pElements = pElements.concat([ {
    title: "Card",
    category: "components",
    selector: ".card",
    group: !0,
    childSelector: "*",
    childrenSelector: "> *"
}, {
    title: "List group",
    selector: ".card > ul.list-group",
    group: !0,
    childSelector: "li.list-group-item",
    html: '<ul class="list-group list-group-flush"><li class="list-group-item">Cras justo odio</li><li class="list-group-item">Dapibus ac facilisis in</li><li class="list-group-item">Vestibulum at eros</li></ul>',
    addTo: ".card"
}, {
    title: "Image",
    selector: ".card > img",
    html: '<img class="img-fluid" src="https://pingendo.com/assets/photos/wireframe/photo-1.jpg" alt="Card image">',
    addTo: ".card"
}, {
    title: "Card body",
    selector: ".card-body",
    html: '<div class="card-body"><h4 class="card-title">Card title</h4><h6 class="card-subtitle text-muted">Support card subtitle</h6><p class="card-text p-y-1">Some quick example text to build on the card title and make up the bulk of the card\'s content.</p><a href="#" class="card-link">link</a><a href="#" class="card-link">Second link</a></div>',
    container: !0,
    childSelector: "*",
    childrenSelector: "> *",
    group: !0,
    addTo: ".card"
}, {
    title: "Title",
    selector: ".card-title",
    html: '<h4 class="card-title">Card title</h4>'
}, {
    title: "Subtitle",
    selector: ".card-subtitle",
    html: '<h4 class="card-subtitle">Card subtitle</h4>'
}, {
    title: "Text",
    selector: ".card-text",
    html: '<p class="card-text">With supporting text below as a natural lead-in to additional content.</p>'
}, {
    id: "cardHeader",
    title: "Header",
    selector: ".card-header",
    html: "<div class='card-header'>Featured</div>",
    addTo: ".card",
    contentEditable: !0,
    childrenSelector: ".card-header-pills,.card-header-tabs",
    addHelper: function(node) {
        $(node).parent().prepend(node);
    }
}, {
    id: "cardHeaderNavTabs",
    title: "Nav Tabs",
    selector: ".card-header-tabs",
    html: ' <ul class="nav nav-tabs card-header-tabs"> <li class="nav-item"> <a class="nav-link active" href="#">Active</a> </li><li class="nav-item"> <a class="nav-link" href="#">Link</a> </li><li class="nav-item"> <a class="nav-link disabled" href="#">Disabled</a> </li></ul>',
    addTo: ".card-header",
    contentEditable: !0,
    addHelper: function(node) {
        $(node).parent().prepend(node);
    }
}, {
    id: "cardHeaderNavTabs",
    title: "Nav Pills",
    selector: ".card-header-pills",
    html: '<ul class="nav nav-pills card-header-pills"> <li class="nav-item"> <a class="nav-link active" href="#">Active</a> </li><li class="nav-item"> <a class="nav-link" href="#">Link</a> </li><li class="nav-item"> <a class="nav-link disabled" href="#">Disabled</a> </li></ul>',
    addTo: ".card-header",
    contentEditable: !0,
    addHelper: function(node) {
        $(node).parent().prepend(node);
    }
}, {
    id: "cardFooter",
    title: "Footer",
    selector: ".card-footer",
    html: "<div class='card-footer text-muted'>2 days ago</div>",
    addTo: ".card",
    group: !0,
    contentEditable: !0
} ]);

var _formGroupAddHelper = function() {
    $(this).parent().find("button[type=submit]").appendTo($(this).parent());
};

pElements = pElements.concat([ {
    title: "Form",
    selector: "form:not(.form-inline):not([action*='formspree.io'])",
    group: "form:not(.form-inline) *",
    childSelector: "> .form-group:not(:has(*[type='submit'])),> .btn[type='submit'] , .form-check "
}, {
    title: "Inline Form",
    selector: "form.form-inline:not([action*='formspree.io'])",
    group: "form.form-inline *",
    childSelector: "> input, > select,label:not(.form-check-label),.input-group,.form-check,.btn[type='submit']"
}, {
    title: "Formspree",
    selector: "form[action*='formspree.io']:not(.form-inline)",
    group: "form:not(.form-inline) *",
    childSelector: "> .form-group:not(:has(*[type='submit'])),> .btn[type='submit'], .form-check "
}, {
    title: "Inline Formspree",
    selector: "form.form-inline[action*='formspree.io']",
    group: "form.form-inline *",
    childSelector: "> input,> select,label:not(.form-check-label),.input-group,.form-check,.btn[type='submit']"
}, {
    title: "Input",
    html: '<input type="text" class="form-control" id="inlineFormInput" placeholder="Jane Doe">',
    selector: "input",
    addTo: "form.form-inline"
}, {
    title: "Input",
    html: '<div class="form-group"><label class="form-control-label" >Label</label><input type="text" class="form-control" placeholder="Text"></div>',
    selector: ".form-group:has(input)",
    addHelper: _formGroupAddHelper,
    catch: ".form-group:has(input) > input",
    childSelector: "> *:not(input)",
    addTo: "form:not(.form-inline)"
}, {
    title: "Select",
    html: '<div class="form-group"><label class="form-control-label" >Select</label><select class="form-control"><option value="1">1</option><option value="2">2</option><option value="3">3</option></select></div>',
    selector: ".form-group:has(select:not(multiple))",
    addHelper: _formGroupAddHelper,
    catch: ".form-group:has(select:not(multiple)) > select",
    childSelector: "> *:not(select)",
    addTo: "form:not(.form-inline)"
}, {
    title: "Select",
    html: '<select class="form-control"><option value="1">1</option><option value="2">2</option><option value="3">3</option></select>',
    selector: "select",
    childSelector: "> *:not(select)",
    addTo: "form.form-inline"
}, {
    title: "Multiple select",
    html: '<div class="form-group"><label class="form-control-label">Multiple select</label><select multiple="" class="form-control"><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option></select></div>',
    selector: ".form-group:has(select[multiple])",
    addHelper: _formGroupAddHelper,
    catch: ".form-group:has(select[multiple]) select",
    childSelector: "> *:not(select)",
    addTo: "form:not(.form-inline)"
}, {
    title: "Radio Group",
    html: '<fieldset class="form-group"><label class="form-control-label">Label</label><div class="radio-inline"><label class="form-control-label"><input type="radio" value="option1" checked="">Radio option 1</label></div><div class="radio"><label class="form-control-label"><input type="radio" value="option2" checked=""> Radio option 2</label></div></fieldset>',
    selector: "fieldset:has(.radio)",
    addHelper: _formGroupAddHelper,
    catch: "fieldset:has(.radio) > input[type=radio]",
    childSelector: "> *:not(.radio)",
    addTo: "form:not(.form-inline)"
}, {
    title: "Radio",
    html: '<div class="form-check"> <label class="form-check-label form-control-label"> <input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios1" value="option1" checked> Option one is this and that&mdash;be sure to include why it\'s great </label></div>',
    selector: '.form-check:has(input[type="radio"])',
    catch: '.form-check:has(input[type="radio"]) > input',
    childSelector: "> *:not(input)",
    addTo: "form:not(.form-inline)"
}, {
    title: "Checkbox",
    html: ' <div class="form-check"> <label class="form-check-label"> <input class="form-check-input" type="checkbox" value=""> Remember me </label> </div>',
    selector: '.form-check:has(input[type="checkbox"])',
    addHelper: _formGroupAddHelper,
    childSelector: "> *:not(input)",
    catch: '.form-check:has(input[type="checkbox"]) > input[type=checkbox]',
    addTo: "form:not(.form-inline)"
}, {
    title: "Textarea",
    html: '<div class="form-group"><label class="form-control-label" >Example textarea</label><textarea class="form-control" id="exampleTextarea" rows="3"></textarea></div>',
    selector: ".form-group:has(textarea)",
    addHelper: _formGroupAddHelper,
    catch: ".form-group:has(textarea) > textarea",
    childSelector: "> *:not(textarea)",
    addTo: "form:not(.form-inline)"
}, {
    title: "File upload",
    html: '<div class="form-group"><label class="form-control-label" >File input</label><input type="file" class="form-control-file" ></div>',
    selector: ".form-group:has(input[type=file])",
    addHelper: _formGroupAddHelper,
    childSelector: "> *:not(input)",
    catch: ".form-group:has(input[type=file]) > input[type=file]",
    addTo: "form:not(.form-inline)"
}, {
    title: "Input group",
    html: '<fieldset class="form-group"> <label class="form-control-label">Email address</label> <div class="input-group"> <span class="input-group-addon" id="basic-addon1">@</span> <input type="text" class="form-control" placeholder="" aria-describedby="basic-addon1" > </div></fieldset>',
    selector: ".form-group:has(.input-group)",
    addHelper: _formGroupAddHelper,
    catch: ".form-group:has(.input-group) > input[type=text]",
    addTo: "form:not(.form-inline)"
}, {
    title: "Text",
    html: '<div class="form-group"><label  class="sr-only">Email</label><input type="text" readonly class="form-control-plaintext" id="staticEmail2" value="email@example.com"></div>',
    selector: ".form-group:has(.form-control-static)",
    addHelper: _formGroupAddHelper,
    catch: ".form-group:has(.form-control-static) > input",
    addTo: "form:not(.form-inline)"
}, {
    id: "formhelp",
    title: "Help",
    selector: "form:not('.navbar-form') .form-group small, form:not('.navbar-form') fieldset  small",
    html: '<small class="text-muted form-text">Help text here.</small>',
    addTo: ".form-group",
    contentEditable: !0
}, {
    id: "formlabel",
    title: "Label",
    selector: "form:not('.navbar-form') .form-group label,  form:not('.navbar-form') fieldset label",
    html: '<label class="form-control-label" >Label</label>',
    addTo: ".form-group",
    contentEditable: !0
}, {
    id: "formlabel",
    title: "Label",
    selector: "form.form-inline label:not(.form-check-label)",
    html: '<label class="form-control-label" >Label</label>',
    addTo: ".form-inline",
    contentEditable: !0
}, {
    id: "formSubmit",
    title: "Submit button",
    selector: ".btn[type='submit']",
    html: '<button type="submit" class="btn btn-primary">Submit</button>',
    addTo: "form",
    contentEditable: !0
} ]), pInspectors = pInspectors.concat([ {
    id: "inputSize",
    type: "component",
    selector: "input:not([type=radio],[type=checkbox],[type=file]),select,textarea,.form-check",
    label: "Size",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "small",
        value: "form-control-sm"
    }, {
        label: "large",
        value: "form-control-lg"
    } ]
}, {
    id: "formType",
    type: "component",
    selector: "form",
    label: "Type",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "formspree",
        value: "formspree"
    } ],
    _getter: function(sel, i) {
        return $(sel).attr("action") && -1 != $(sel).attr("action").indexOf("formspree.io") ? "formspree" : "";
    },
    _setter: function(sel, i) {
        pEditor.applyDOMModifications(function() {
            "formspree" == i.value ? $(sel).attr("action", "https://formspree.io/YOUREMAILHERE") : $(sel).attr("action", "");
        });
    }
}, {
    id: "actionForm",
    type: "component",
    selector: "form:not([action*='formspree.io'])",
    label: "Action",
    attribute: "action"
}, {
    id: "yourEmail",
    type: "component",
    selector: "form[action*='formspree.io']",
    label: "Your Email",
    attribute: "action",
    long: !0,
    _getter: function(sel, i) {
        if ($(sel).attr("action") && -1 != $(sel).attr("action").indexOf("formspree.io")) return new URI($(sel).attr("action")).pathname().substr(1);
    },
    _setter: function(sel, i) {
        pEditor.applyDOMModifications(function() {
            $(sel).attr("action", "https://formspree.io/" + i.value);
        });
    }
}, {
    id: "inputname",
    type: "component",
    selector: "input,select,textarea",
    label: "Name",
    attribute: "name"
}, {
    id: "inputtype",
    type: "component",
    selector: "input",
    label: "Type",
    attribute: "type",
    options: [ {
        label: "-",
        value: ""
    }, {
        label: "text",
        value: "text"
    }, {
        label: "email",
        value: "email"
    }, {
        label: "password",
        value: "password"
    }, {
        label: "number",
        value: "number"
    }, {
        label: "date",
        value: "date"
    }, {
        label: "time",
        value: "time"
    }, {
        label: "search",
        value: "search"
    }, {
        label: "hidden",
        value: "hidden"
    } ]
}, {
    id: "inputplaceholder",
    type: "component",
    selector: "input:not([type=radio],[type=checkbox],[type=file]),textarea",
    label: "Placeholder",
    attribute: "placeholder"
}, {
    id: "inputnamecheck",
    type: "component",
    selector: ".form-check",
    target: "input",
    label: "Name",
    attribute: "name"
} ]), pElements = pElements.concat([ {
    title: "Input group",
    selector: ".input-group",
    group: !0,
    childSelector: "> *",
    html: '<div class="input-group"><div class="input-group-addon">@</div><input type="text" class="form-control" id="inlineFormInputGroup" placeholder="Username"></div>',
    addTo: "form.form-inline"
}, {
    title: "Text",
    selector: ".input-group-addon:not(:has(input[type='checkbox']))",
    html: '<span class="input-group-addon" id="basic-addon1">@</span>',
    contentEditable: !0,
    addTo: ".input-group"
}, {
    title: "Checkbox input",
    selector: ".input-group-addon:has(input[type='checkbox'])",
    html: '<span class="input-group-addon"><input type="checkbox" aria-label="Checkbox for following text input"></span>',
    addTo: ".input-group"
}, {
    title: "Radio input",
    selector: ".input-group-addon:has(input[type='radio'])",
    html: '<span class="input-group-addon"><input type="radio" aria-label="Radio button for following text input"></span>',
    addTo: ".input-group"
}, {
    title: "Button",
    selector: ".input-group-btn:has(.btn:not(.dropdown-toggle))",
    html: '<div class="input-group-btn"><button class="btn btn-secondary" type="button">Go!</button></div>',
    addTo: ".input-group"
}, {
    title: "Dropdown",
    selector: ".input-group-btn:has(.dropdown-toggle)",
    html: '<div class="input-group-btn"><button type="button" class="btn btn-secondary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> Action </button> <div class="dropdown-menu"> <a class="dropdown-item" href="#">Action</a> <a class="dropdown-item" href="#">Another action</a> <a class="dropdown-item" href="#">Something else here</a> <div role="separator" class="dropdown-divider"></div><a class="dropdown-item" href="#">Separated link</a> </div></div>',
    addTo: ".input-group"
} ]), pInspectors = pInspectors.concat([ {
    id: "sizeInputGroup",
    type: "component",
    selector: ".input-group",
    label: "Size",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "small",
        value: "input-group-sm"
    }, {
        label: "large",
        value: "input-group-lg"
    } ]
} ]), pElements = pElements.concat([ {
    title: "Pagination",
    category: "navs",
    selector: "ul.pagination",
    group: "ul.pagination *",
    childSelector: "li.page-item"
}, {
    title: "Item",
    selector: ".page-item",
    html: "<li class='page-item'><a class='page-link' href='#'>N</a></li>",
    catch: ".page-item a",
    contentEditable: "a",
    addTo: ".pagination",
    addHelper: function() {
        $(this).insertBefore($(this).parent().find(".page-item:has(a[aria-label='Next'])"));
    },
    deleteHelper: function(node, parent) {
        var $p = $(parent);
        0 == $p.children().length && (pEditor.domSelection = $p, pCommands.execute("pcmd_delete"));
    }
} ]), pInspectors = pInspectors.concat([ {
    id: "paginationSize",
    type: "component",
    selector: ".pagination",
    label: "Size",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "small",
        value: "pagination-sm"
    }, {
        label: "large",
        value: "pagination-lg"
    } ]
}, {
    id: "textcolorItemPagination",
    type: "colors",
    selector: ".page-item",
    target: "> a",
    label: "Text",
    customType: "p-color-picker",
    override: "textcolor",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "white",
        value: "text-white",
        color: "white"
    }, {
        label: "primary",
        value: "text-primary",
        color: "$brand-primary"
    }, {
        label: "light",
        value: "text-light",
        color: "$brand-danger"
    }, {
        label: "dark",
        value: "text-dark",
        color: "$brand-danger"
    }, {
        label: "info",
        value: "text-info",
        color: "$brand-info"
    }, {
        label: "muted",
        value: "text-muted",
        color: "$brand-danger"
    }, {
        label: "success",
        value: "text-success",
        color: "$brand-success"
    }, {
        label: "warning",
        value: "text-warning",
        color: "$brand-warning"
    }, {
        label: "danger",
        value: "text-danger",
        color: "$brand-danger"
    } ],
    version: "4.0.0-beta.1"
} ]), pElements = pElements.concat([ {
    title: "Tag",
    category: "components",
    contentEditable: !0,
    selector: ".tag"
} ]), pInspectors = pInspectors.concat([ {
    id: "tagColor",
    type: "component",
    selector: ".tag",
    label: "Color",
    customType: "p-color-picker",
    classes: [ {
        label: "-",
        value: "tag-default",
        color: "$gray-dark"
    }, {
        label: "primary",
        value: "tag-primary",
        color: "$brand-primary"
    }, {
        label: "info",
        value: "tag-info",
        color: "$brand-info"
    }, {
        label: "success",
        value: "tag-success",
        color: "$brand-success"
    }, {
        label: "danger",
        value: "tag-danger",
        color: "$brand-danger"
    }, {
        label: "warning",
        value: "tag-warning",
        color: "$brand-warning"
    } ]
}, {
    id: "labelPill",
    type: "component",
    selector: ".tag",
    label: "Pill",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "yes",
        value: "tag-pill"
    } ]
} ]), pElements = pElements.concat([ {
    title: "Navbar",
    selector: ".navbar",
    catch: ".navbar .navbar-collapse, .navbar .container, .navbar .container-fluid",
    group: ".navbar *",
    childSelector: ".navbar-brand , .navbar-brand:not(:has(img)), .navbar-brand:has(img), .navbar-nav ,form, .navbar-btn",
    fixInsertionPoint: function(point) {
        if (pEditor.contentDocument.body.children.length > 0) {
            var $c = $(point.target).closest("body > *");
            $c.length && (point.target = $c[0]);
        } else point.target = pEditor.contentDocument.body, point.position = "inside";
        return point;
    },
    hasInsertionHelper: !1
}, {
    title: "Navbar container",
    selector: ".navbar .container, .navbar .container-fluid"
}, {
    title: "Nav",
    selector: ".navbar-nav",
    html: '<ul class="navbar-nav"> <li class="nav-item active"> <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a> </li><li class="nav-item"> <a class="nav-link" href="#">Features</a> </li><li class="nav-item"> <a class="nav-link" href="#">Pricing</a> </li><li class="nav-item"> <a class="nav-link" href="#">About</a> </li></ul>',
    group: "ul.navbar-nav *",
    childSelector: "> *",
    addTo: ".navbar",
    target: ".navbar-collapse",
    addHelper: function(node) {
        $(node).parent().prepend(node);
    },
    fixXInsertionPoint: function(point) {
        return $(point.target).has(".container, .container-fluid").length && (point.target = $(point.target).find(".container, .container-fluid")[0]), 
        point;
    }
}, {
    title: "Nav",
    category: "navs",
    selector: ".nav",
    group: !0,
    childSelector: ".nav-item",
    childrenSelector: "> .nav-item"
}, {
    title: "Form inline",
    selector: "navbar-nav form.form-inline",
    html: '<form class="form-inline my-2 my-lg-0"> <input class="form-control mr-sm-2" type="text" placeholder="Search"> <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button> </form>',
    group: !0,
    childSelector: ".form-control,button",
    addTo: ".navbar",
    target: ".collapse",
    fixInsertionPoint: function(point) {
        return $(point.target).has(".container, .container-fluid").length && (point.target = $(point.target).find(".container, .container-fluid")[0]), 
        point;
    }
}, {
    title: "Button",
    selector: "a.navbar-btn",
    html: '<a class="btn btn-default navbar-btn">Sign in</a>',
    addTo: ".navbar",
    target: ".collapse",
    contentEditable: !0,
    fixInsertionPoint: function(point) {
        return $(point.target).has(".container, .container-fluid").length && (point.target = $(point.target).find(".container, .container-fluid")[0]), 
        point;
    }
}, {
    title: "Brand",
    selector: ".navbar-brand:not(:has(img))",
    html: '<a class="navbar-brand" href="#">Navbar</a>',
    childSelector: "i,img",
    addTo: ".navbar",
    target: ".container, .container-fluid",
    contentEditable: !0,
    fixInsertionPoint: function(point) {
        return $(point.target).has(".container, .container-fluid").length && (point.target = $(point.target).find(".container, .container-fluid")[0]), 
        point;
    },
    addHelper: function(node) {
        $(node).parent().prepend(node);
    },
    deleteHelper: function(node, parent) {
        var $p = $(parent).parent();
        pEditor.applyDOMModifications(function() {
            pEditor.domSelection = $p[0];
        });
    }
}, {
    title: "Brand Image",
    selector: ".navbar-brand:has(img)",
    html: '<a class="navbar-brand" href="#"><img src="https://pingendo.com/assets/photos/wireframe/photo-1.jpg" width="30" height="30" class="d-inline-block align-top" alt="">Navbar</a>',
    addTo: ".navbar",
    target: ".container, .container-fluid",
    contentEditable: !0,
    fixInsertionPoint: function(point) {
        return $(point.target).has(".container, .container-fluid").length && (point.target = $(point.target).find(".container, .container-fluid")[0]), 
        point;
    },
    addHelper: function(node) {
        $(node).parent().prepend(node);
    }
}, {
    title: "Brand Icon",
    selector: ".navbar-brand:has(i)",
    html: '<a class="navbar-brand" href="#"><i class="fa d-inline fa-lg fa-bomb"></i>Navbar</a>',
    addTo: ".navbar",
    target: ".container, .container-fluid",
    contentEditable: !0,
    fixInsertionPoint: function(point) {
        return $(point.target).has(".container, .container-fluid").length && (point.target = $(point.target).find(".container, .container-fluid")[0]), 
        point;
    },
    addHelper: function(node) {
        $(node).parent().prepend(node);
    }
}, {
    title: "Item",
    html: "<li class='nav-item'><a class='nav-link' href='#'>Nav item</a></li>",
    selector: "li.nav-item:not(.dropdown)",
    catch: "li.nav-item:not(.dropdown) .nav-link",
    contentEditable: "a",
    childSelector: ".fa",
    addTo: ".nav, .navbar-nav",
    deleteHelper: function(node, parent) {
        var $p = $(parent);
        0 == $p.children().length && (pEditor.domSelection = $p, pCommands.execute("pcmd_delete"));
    }
}, {
    title: "Image",
    selector: ".navbar-brand img",
    contentEditable: !1,
    html: '<img src="https://pingendo.com/assets/photos/wireframe/photo-1.jpg" width="30" height="30" class="d-inline-block align-top" alt="">',
    addTo: ".navbar-brand",
    addHelper: function(node) {
        $(node).parent().prepend(node);
    }
}, {
    title: "Dropdown",
    html: '<li class="nav-item dropdown"> <a class="nav-link dropdown-toggle" href="http://example.com" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> Dropdown link </a> <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink"> <a class="dropdown-item" href="#">Action</a> <a class="dropdown-item" href="#">Another action</a> <a class="dropdown-item" href="#">Something else here</a> </div></li>',
    selector: "li.nav-item.dropdown",
    catch: "li.nav-item.dropdown > .nav-link, li.nav-item.dropdown > .dropdown-menu",
    contentEditable: !0,
    addTo: ".nav, .navbar-nav",
    childSelector: ".dropdown-item , .dropdown-divider",
    deleteHelper: function(node, parent) {
        var $p = $(parent);
        0 == $p.children().length && (pEditor.domSelection = $p, pCommands.execute("pcmd_delete"));
    }
} ]), pInspectors = pInspectors.concat([ {
    id: "fullnavbarPosition",
    type: "component",
    selector: ".navbar",
    label: "Placement",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "top",
        value: "fixed-top"
    }, {
        label: "bottom",
        value: "fixed-bottom"
    }, {
        label: "sticky top",
        value: "sticky-top"
    } ]
}, {
    id: "fullnavbarPosition",
    type: "component",
    selector: ".navbar-collapse",
    label: "Alignment",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "start",
        value: "justify-content-start"
    }, {
        label: "center",
        value: "justify-content-center"
    }, {
        label: "end",
        value: "justify-content-end"
    } ]
}, {
    id: "navbarColorText",
    type: "colors",
    override: "textcolor",
    selector: ".navbar",
    label: "Text",
    customType: "p-color-picker",
    classes: [ {
        label: "light",
        value: "navbar-dark",
        color: "white"
    }, {
        label: "dark",
        value: "navbar-light",
        color: "black"
    } ]
}, {
    id: "textcolorNavItemA",
    type: "colors",
    selector: ".nav-item",
    target: "> a",
    label: "Text",
    customType: "p-color-picker",
    override: "textcolor",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "white",
        value: "text-white",
        color: "white"
    }, {
        label: "primary",
        value: "text-primary",
        color: "$brand-primary"
    }, {
        label: "light",
        value: "text-light",
        color: "$brand-danger"
    }, {
        label: "dark",
        value: "text-dark",
        color: "$brand-danger"
    }, {
        label: "success",
        value: "text-success",
        color: "$brand-success"
    }, {
        label: "info",
        value: "text-info",
        color: "$brand-info"
    }, {
        label: "muted",
        value: "text-muted",
        color: "$brand-danger"
    }, {
        label: "warning",
        value: "text-warning",
        color: "$brand-warning"
    }, {
        label: "danger",
        value: "text-danger",
        color: "$brand-danger"
    } ],
    version: "4.0.0-beta.1"
}, {
    id: "navItemActive",
    selector: ".nav-link",
    label: "State",
    type: "component",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "active",
        value: "active"
    }, {
        label: "disabled",
        value: "disabled"
    } ]
}, {
    id: "navPillsStyle",
    selector: "ul.nav-pills",
    type: "component",
    label: "Stacked",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "yes",
        value: "flex-column"
    } ]
} ]), pElements = pElements.concat([ {
    title: "Carousel",
    selector: ".carousel",
    group: !0,
    catch: ".carousel .carousel-inner, .carousel .carousel-control-prev , .carousel .carousel-control-prev > *, .carousel .carousel-control-next, .carousel .carousel-control-next > *",
    childSelector: ".carousel-item, .carousel-item.active"
}, {
    title: "Active slide",
    addTo: ".carousel",
    target: ".carousel-inner",
    selector: ".carousel-item.active",
    group: !0,
    container: !0,
    html: '<div class="carousel-item active" ><img class="img-fluid" src="https://pingendo.com/assets/photos/wireframe/photo-1.jpg"><div class="carousel-caption"><h2>Title</h2><p>Description</p></div></div>'
}, {
    title: "Slide",
    addTo: ".carousel",
    target: ".carousel-inner",
    selector: ".carousel .carousel-item",
    group: !0,
    container: !0,
    deleteHelper: function(node, parent) {
        var $p = $(parent);
        0 == $p.children().length && (pEditor.domSelection = $p.parent(), pCommands.execute("pcmd_delete"));
    },
    html: '<div class="carousel-item"><img class="img-fluid" src="https://pingendo.com/assets/photos/wireframe/photo-1.jpg"><div class="carousel-caption"><h2>Title</h2><p>Description</p></div></div>'
}, {
    title: "Controls",
    selector: ".carousel-control-prev , .carousel-control-next",
    html: '<a class="carousel-control-prev" href="#carouselExampleCaptions" role="button" data-slide="prev"> <span class="carousel-control-prev-icon" aria-hidden="true"></span> <span class="sr-only">Previous</span></a><a class="carousel-control-next" href="#carouselExampleCaptions" role="button" data-slide="next"> <span class="carousel-control-next-icon" aria-hidden="true"></span> <span class="sr-only">Next</span> </a>'
}, {
    title: "Captions",
    selector: ".carousel-caption",
    html: '<div class="carousel-caption"><h2>Title</h2><p>Description</p></div>',
    addTo: ".carousel .carousel-item",
    container: !0,
    deleteHelper: function(node, parent) {
        return !1;
    }
} ]), pInspectors = pInspectors.concat([ {
    id: "carouselActive",
    type: "component",
    selector: ".carousel-item",
    label: "Active",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "yes",
        value: "active"
    } ]
}, {
    id: "carouselCycle",
    type: "component",
    label: "Cycle",
    selector: ".carousel",
    attribute: "data-interval",
    options: [ {
        label: "-",
        value: "false"
    }, {
        label: "yes",
        value: "5000"
    } ]
}, {
    id: "carouselTime",
    type: "component",
    label: "Interval",
    selector: ".carousel:not([data-interval='false'])",
    attribute: "data-interval"
} ]), pElements = pElements.concat([ {
    title: "Responsive video",
    category: "media",
    selector: ".embed-responsive",
    catch: ".embed-responsive iframe"
} ]), pInspectors = pInspectors.concat([ {
    id: "embeddedSrc",
    label: "Source",
    selector: "iframe",
    type: "component",
    attribute: "src"
}, {
    id: "embeddedRatio",
    selector: ".embed-responsive",
    label: "Aspect radio",
    type: "component",
    classes: [ {
        label: "21:9",
        value: "embed-responsive-21by9"
    }, {
        label: "16:9",
        value: "embed-responsive-16by9"
    }, {
        label: "4:3",
        value: "embed-responsive-4by3"
    } ]
}, {
    id: "embeddedRatio",
    label: "Autoplay",
    selector: ".embed-responsive > iframe",
    type: "component",
    attribute: "src",
    param: "autoplay"
} ]), pElements = pElements.concat([ {
    title: "Body",
    type: "layout",
    category: "css",
    container: !0,
    selector: "body",
    grid: !0,
    childSelector: "nav, *:has(.container,.container-fluid),.modal",
    childrenSelector: " > nav, > *:has(.container,.container-fluid), > .modal",
    newChild: "<div class='py-5'></div>"
}, {
    title: "Row",
    type: "layout",
    grid: !0,
    html: "<div class='row'></div>",
    selector: ".row",
    childSelector: '[class*="col-"]',
    childrenSelector: '> [class*="col-"]',
    newChild: "<div class='col-md-12'/>",
    addTo: ".container, .container-fluid, [class*='col-']"
}, {
    title: "Section",
    type: "layout",
    category: "layout",
    html: "<div class='py-5'></div>",
    grid: !0,
    selector: "*:not(.navbar):has(>.container, >.container-fluid), body > div:not(.modal)",
    childSelector: ".container, .container-fluid",
    childrenSelector: "> .container, > .container-fluid",
    newChild: "<div class='container'></div>",
    fixInsertionPoint: function(point) {
        if (pEditor.contentDocument.body.children.length > 0) {
            var $c = $(point.target).closest("body > *");
            $c.length && (point.target = $c[0]);
        } else point.target = pEditor.contentDocument.body, point.position = "inside";
        return point;
    },
    hasInsertionHelper: !1
}, {
    title: "Container",
    type: "layout",
    grid: !0,
    category: "layout",
    html: "<div class='container'></div>",
    container: !0,
    selector: ".container,.container-fluid",
    childSelector: ".row",
    childrenSelector: "> .row",
    newChild: "<div class='row'/>",
    addTo: "body > *"
}, {
    title: "Column",
    category: "layout",
    type: "layout",
    grid: !0,
    container: !0,
    addTo: ".row",
    childSelector: "> *",
    childrenSelector: "> *",
    html: "<div class='col-md-12'></div>",
    selector: "div[class*='col']",
    addHelper: function(node) {
        pGridUtil.fixSize(node.parentNode);
    },
    deleteHelper: function(node, parent) {
        pGridUtil.fixSize(parent);
    }
} ]), pInspectors = pInspectors.concat([ {
    id: "colSize",
    type: "component",
    selector: "div[class*='col-']",
    label: "Size xs",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "1",
        value: "col-1"
    }, {
        label: "2",
        value: "col-2"
    }, {
        label: "3",
        value: "col-3"
    }, {
        label: "4",
        value: "col-4"
    }, {
        label: "5",
        value: "col-5"
    }, {
        label: "6",
        value: "col-6"
    }, {
        label: "7",
        value: "col-7"
    }, {
        label: "8",
        value: "col-8"
    }, {
        label: "9",
        value: "col-9"
    }, {
        label: "10",
        value: "col-10"
    }, {
        label: "11",
        value: "col-11"
    }, {
        label: "12",
        value: "col-12"
    } ]
}, {
    id: "colSmSize",
    type: "component",
    selector: "div[class*='col-']",
    label: "Size sm",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "1",
        value: "col-sm-1"
    }, {
        label: "2",
        value: "col-sm-2"
    }, {
        label: "3",
        value: "col-sm-3"
    }, {
        label: "4",
        value: "col-sm-4"
    }, {
        label: "5",
        value: "col-sm-5"
    }, {
        label: "6",
        value: "col-sm-6"
    }, {
        label: "7",
        value: "col-sm-7"
    }, {
        label: "8",
        value: "col-sm-8"
    }, {
        label: "9",
        value: "col-sm-9"
    }, {
        label: "10",
        value: "col-sm-10"
    }, {
        label: "11",
        value: "col-sm-11"
    }, {
        label: "12",
        value: "col-sm-12"
    } ]
}, {
    id: "colMdSize",
    type: "component",
    selector: "div[class*='col-']",
    label: "Size md",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "1",
        value: "col-md-1"
    }, {
        label: "2",
        value: "col-md-2"
    }, {
        label: "3",
        value: "col-md-3"
    }, {
        label: "4",
        value: "col-md-4"
    }, {
        label: "5",
        value: "col-md-5"
    }, {
        label: "6",
        value: "col-md-6"
    }, {
        label: "7",
        value: "col-md-7"
    }, {
        label: "8",
        value: "col-md-8"
    }, {
        label: "9",
        value: "col-md-9"
    }, {
        label: "10",
        value: "col-md-10"
    }, {
        label: "11",
        value: "col-md-11"
    }, {
        label: "12",
        value: "col-md-12"
    } ]
}, {
    id: "colLgSize",
    type: "component",
    selector: "div[class*='col-']",
    label: "Size lg",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "1",
        value: "col-lg-1"
    }, {
        label: "2",
        value: "col-lg-2"
    }, {
        label: "3",
        value: "col-lg-3"
    }, {
        label: "4",
        value: "col-lg-4"
    }, {
        label: "5",
        value: "col-lg-5"
    }, {
        label: "6",
        value: "col-lg-6"
    }, {
        label: "7",
        value: "col-lg-7"
    }, {
        label: "8",
        value: "col-lg-8"
    }, {
        label: "9",
        value: "col-lg-9"
    }, {
        label: "10",
        value: "col-lg-10"
    }, {
        label: "11",
        value: "col-lg-11"
    }, {
        label: "12",
        value: "col-lg-12"
    } ]
}, {
    id: "colXlSize",
    type: "component",
    selector: "div[class*='col-']",
    label: "Size xl",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "1",
        value: "col-xl-1"
    }, {
        label: "2",
        value: "col-xl-2"
    }, {
        label: "3",
        value: "col-xl-3"
    }, {
        label: "4",
        value: "col-xl-4"
    }, {
        label: "5",
        value: "col-xl-5"
    }, {
        label: "6",
        value: "col-xl-6"
    }, {
        label: "7",
        value: "col-xl-7"
    }, {
        label: "8",
        value: "col-xl-8"
    }, {
        label: "9",
        value: "col-xl-9"
    }, {
        label: "10",
        value: "col-xl-10"
    }, {
        label: "11",
        value: "col-xl-11"
    }, {
        label: "12",
        value: "col-xl-12"
    } ]
}, {
    id: "flexAlign",
    type: "component",
    selector: "div[class*='col-']",
    label: "Align",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "start",
        value: "align-self-start"
    }, {
        label: "end",
        value: "align-self-end"
    }, {
        label: "center",
        value: "align-self-center"
    }, {
        label: "baseline",
        value: "align-self-baseline"
    }, {
        label: "stretch",
        value: "align-self-stretch"
    } ]
}, {
    id: "containerFluid",
    selector: ".container, .container-fluid",
    label: "Fluid",
    type: "component",
    classes: [ {
        label: "-",
        value: "container"
    }, {
        label: "yes",
        value: "container-fluid"
    } ]
}, {
    id: "sectionbgimage",
    selector: "body > *:has(.container, .container-fluid)",
    label: "Image",
    type: "component",
    style: "background-image",
    customType: "p-file-picker",
    controlParam: '[".png", ".gif", ".jpg", ".jpeg"]'
} ]), pElements = pElements.concat([ {
    title: "Modal",
    category: "components",
    selector: "div.modal",
    group: !0,
    catch: "div.modal .modal-dialog , div.modal .modal-content",
    fixInsertionPoint: function(point) {
        if (pEditor.contentDocument.body.children.length > 0) {
            var $c = $(point.target).closest("body > *");
            $c.length && (point.target = $c[0]);
        } else point.target = pEditor.contentDocument.body, point.position = "inside";
        return point;
    },
    hasInsertionHelper: !0,
    childSelector: ".modal-header, .modal-body, .modal-footer"
}, {
    title: "Body",
    category: "components",
    selector: ".modal-body",
    container: !0,
    html: ' <div class="modal-body"><p>One fine body...</p></div>',
    addTo: ".modal",
    target: ".modal-dialog .modal-content"
}, {
    title: "Footer",
    category: "components",
    selector: ".modal-footer",
    addTo: ".modal",
    target: ".modal-dialog .modal-content",
    html: ' <div class="modal-footer"> <a class="btn btn-default" data-dismiss="modal">Close</a> <a class="btn btn-primary">Save changes</a> </div>',
    container: !0
}, {
    id: "modalHeader",
    title: "Header",
    selector: ".modal-header",
    html: '<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title" id="myModalLabel">Modal title</h4></div>',
    addTo: ".modal",
    target: ".modal-dialog .modal-content",
    group: !0,
    childSelector: "button.close[data-dismiss='modal'],.modal-title"
}, {
    id: "modalTitle",
    title: "Title",
    selector: ".modal-title",
    addTo: ".modal-header",
    html: '<h4 class="modal-title">Modal title</h4>'
}, {
    id: "modalCloseButton",
    title: "Close button",
    selector: "button.close[data-dismiss='modal']",
    addTo: ".modal-header",
    html: '<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>'
} ]), pInspectors = pInspectors.concat([ {
    id: "modalFade",
    type: "component",
    label: "Fade",
    selector: "div.modal",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "yes",
        value: "fade"
    } ]
}, {
    id: "modalSize",
    type: "component",
    label: "Size",
    selector: "div.modal",
    target: ".modal-dialog",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "modal-sm",
        value: "modal-sm"
    }, {
        label: "modal-lg",
        value: "modal-lg"
    } ]
} ]), pElements = pElements.concat([ {
    title: "List group",
    category: "components",
    selector: "ul.list-group",
    group: "ul.list-group *",
    childSelector: "li.list-group-item",
    html: '<ul class="list-group list-group-flush"><li class="list-group-item">Cras justo odio</li><li class="list-group-item">Dapibus ac facilisis in</li><li class="list-group-item">Vestibulum at eros</li></ul>'
}, {
    title: "Item",
    selector: "li.list-group-item",
    html: '<li class="list-group-item">Cras justo odio</li>',
    childSelector: "> *",
    group: "li.list-group-item *",
    addTo: "ul.list-group",
    contentEditable: !0,
    deleteHelper: function(node, parent) {
        var $p = $(parent);
        0 == $p.children().length && (pEditor.domSelection = $p, pCommands.execute("pcmd_delete"));
    }
} ]), pInspectors = pInspectors.concat([ {
    id: "listGroupColor",
    type: "component",
    selector: ".list-group-item",
    label: "Color",
    customType: "p-color-picker",
    classes: [ {
        label: "-",
        value: "",
        color: "white"
    }, {
        label: "success",
        value: "list-group-item-success",
        color: "$brand-success"
    }, {
        label: "danger",
        value: "list-group-item-danger",
        color: "$brand-danger"
    }, {
        label: "warning",
        value: "list-group-item-warning",
        color: "$brand-warning"
    }, {
        label: "info",
        value: "list-group-item-info",
        color: "$brand-info"
    } ]
}, {
    id: "listGroupAction",
    selector: ".list-group-item",
    label: "Action",
    type: "component",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "yes",
        value: "list-group-item-action"
    } ]
}, {
    id: "listGroupActive",
    selector: ".list-group-item",
    label: "Active",
    type: "component",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "yes",
        value: "active"
    } ]
}, {
    id: "listGroupDisable",
    selector: ".list-group-item",
    label: "Disabled",
    type: "component",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "yes",
        value: "disabled"
    } ]
} ]), pElements = pElements.concat([ {
    title: "Progress bar",
    contentEditable: !0,
    category: "components",
    selector: ".progress",
    catch: ".progress *",
    contentEditable: "div"
} ]), pInspectors = pInspectors.concat([ {
    id: "progressColor",
    type: "colors",
    selector: ".progress",
    target: ".progress-bar",
    label: "Color",
    customType: "p-color-picker",
    override: "colorBackground",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "primary",
        value: "bg-primary"
    }, {
        label: "secondary",
        value: "bg-secondary"
    }, {
        label: "light",
        value: "bg-light"
    }, {
        label: "dark",
        value: "bg-dark"
    }, {
        label: "info",
        value: "bg-info"
    }, {
        label: "success",
        value: "bg-success"
    }, {
        label: "warning",
        value: "bg-warning"
    }, {
        label: "danger",
        value: "bg-danger"
    } ]
}, {
    id: "progressStriped",
    type: "component",
    selector: ".progress",
    target: ".progress-bar",
    label: "Striped",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "yes",
        value: "progress-bar-striped"
    } ]
}, {
    id: "progressAnimated",
    type: "component",
    selector: ".progress:has(.progress-bar-striped)",
    target: ".progress-bar",
    label: "Animated",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "yes",
        value: "progress-bar-animated"
    } ]
} ]), pElements = pElements.concat([ {
    title: "Blockquote",
    contentEditable: "p, .blockquote-footer",
    selector: ".blockquote",
    id: "blockquote",
    catch: ".blockquote > *"
}, {
    id: "blockquoteFooter",
    title: "Footer",
    selector: ".blockquote-footer",
    contentEditable: !0,
    html: '<div class="blockquote-footer" >Someone famous </div>'
} ]), pInspectors = pInspectors.concat([ {
    id: "blockquoteReverse",
    selector: ".blockquote",
    label: "Reverse",
    type: "component",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "yes",
        value: "blockquote-reverse"
    } ]
} ]), pElements = pElements.concat([ {
    title: "Image",
    selector: "img",
    contentEditable: !1
}, {
    title: "iframe",
    selector: "iframe"
} ]), pInspectors = pInspectors.concat([ {
    id: "imageSrc",
    type: "node",
    selector: "img:not([src*=maps.googleapis.com])",
    label: "URL",
    attribute: "src",
    long: !0,
    customType: "p-file-picker",
    controlParam: '[".png", ".gif", ".jpg", ".jpeg"]'
}, {
    id: "mapkey",
    selector: "img[src*='maps.googleapis.com']",
    type: "component",
    label: "Key",
    attribute: "src",
    param: "key"
}, {
    id: "mapcenter",
    selector: "img[src*='maps.googleapis.com']",
    type: "component",
    label: "Center",
    attribute: "src",
    param: "center"
}, {
    id: "mapmarker",
    selector: "img[src*='maps.googleapis.com']",
    type: "component",
    label: "Marker",
    attribute: "src",
    param: "markers"
}, {
    id: "mapssize",
    selector: "img[src*='maps.googleapis.com']",
    type: "component",
    label: "Size",
    attribute: "src",
    param: "size"
}, {
    id: "mapszoom",
    selector: "img[src*='maps.googleapis.com']",
    type: "component",
    label: "Zoom",
    attribute: "src",
    param: "zoom"
}, {
    id: "display",
    label: "Align",
    type: "component",
    selector: "img",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "left",
        value: "float-left"
    }, {
        label: "center",
        value: "mx-auto"
    }, {
        label: "right",
        value: "float-right"
    } ]
}, {
    id: "wImg",
    type: "node",
    selector: "img,iframe",
    label: "Width",
    attribute: "Width"
}, {
    id: "hImg",
    type: "node",
    selector: "img,iframe",
    label: "Height",
    attribute: "height"
}, {
    id: "imagePreview",
    type: "node",
    selector: "img",
    attribute: "src",
    label: "",
    customType: "p-image-preview",
    controlParam: '[".png", ".gif", ".jpg", ".jpeg"]'
}, {
    id: "imageStyle",
    type: "component",
    selector: "img",
    label: "Style",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "rounded",
        value: "rounded"
    }, {
        label: "circle",
        value: "rounded-circle"
    }, {
        label: "thumbnail",
        value: "img-thumbnail"
    } ]
}, {
    id: "imgFluid",
    selector: "img",
    type: "component",
    label: "Fluid",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "yes",
        value: "img-fluid"
    } ]
} ]), pInspectors = pInspectors.concat([ {
    id: "seoTitle",
    type: "seo",
    selector: "head title",
    label: "Title",
    innerHTML: !0,
    html: "<title></title>",
    visible: "true",
    long: !0
}, {
    id: "seoDescription",
    type: "seo",
    selector: "head meta[name='description']",
    label: "Description",
    attribute: "content",
    html: '<meta name="description" content="">',
    visible: "true",
    long: !0
}, {
    id: "seoKeywords",
    type: "seo",
    selector: "head meta[name='keywords']",
    label: "Keywords",
    attribute: "content",
    html: '<meta name="keywords" content="">',
    visible: "true",
    long: !0
}, {
    id: "favicon",
    type: "page-settings",
    selector: "head link[rel='icon']",
    label: "Favicon",
    attribute: "href",
    html: '<link rel="icon" href="" />',
    visible: "true",
    customType: "p-file-picker",
    controlParam: '[".ico",".png",".gif"]',
    long: !0
} ]), pInspectors = pInspectors.concat([ {
    id: "themefile",
    type: "theme",
    label: "File",
    _getter: function() {
        if (!pEditor) return "";
        var i = pEditor.themeSupport.getTheme();
        return i ? i.cssURL : "";
    },
    _setter: function(sel, i) {
        var val = i.value.substr(0, i.value.lastIndexOf(".")) + ".css";
        pEditor.loadTheme(val);
    },
    attribute: "content",
    customType: "p-file-picker",
    controlParam: '[".scss"]'
}, {
    id: "themeversion",
    type: "theme",
    label: "Version",
    _getter: function() {
        if (!pEditor) return "";
        var i = pEditor.themeSupport.getTheme();
        return i ? i.version : "";
    },
    _setter: function(sel, i) {},
    disabled: "true",
    customType: "disabled",
    attribute: "content"
}, {
    id: "body-bg",
    sassVariable: "$body-bg",
    label: "Body",
    type: "base-colors",
    customType: "p-sass-color"
}, {
    id: "body-color",
    sassVariable: "$body-color",
    label: "Text",
    type: "base-colors",
    customType: "p-sass-color"
}, {
    id: "link-color",
    sassVariable: "$link-color",
    label: "Links",
    type: "base-colors",
    customType: "p-sass-color"
}, {
    id: "theme-primary",
    type: "theme-colors",
    label: "Primary",
    customType: "p-sass-color",
    sassMap: [ "$theme-colors", "primary" ],
    version: "4.0.0-beta.1"
}, {
    id: "theme-secondary",
    type: "theme-colors",
    label: "Secondary",
    customType: "p-sass-color",
    sassMap: [ "$theme-colors", "secondary" ],
    version: "4.0.0-beta.1"
}, {
    id: "theme-info",
    type: "theme-colors",
    label: "Info",
    customType: "p-sass-color",
    sassMap: [ "$theme-colors", "info" ],
    version: "4.0.0-beta.1"
}, {
    id: "theme-light",
    type: "theme-colors",
    label: "Light",
    customType: "p-sass-color",
    sassMap: [ "$theme-colors", "light" ],
    version: "4.0.0-beta.1"
}, {
    id: "theme-dark",
    type: "theme-colors",
    label: "Dark",
    customType: "p-sass-color",
    sassMap: [ "$theme-colors", "dark" ],
    version: "4.0.0-beta.1"
}, {
    id: "brand-primary",
    type: "theme-colors",
    label: "Primary",
    customType: "p-sass-color",
    sassVariable: "$brand-primary",
    version: "4.0.0-alpha.6"
}, {
    id: "brand-info",
    type: "theme-colors",
    label: "Info",
    customType: "p-sass-color",
    sassVariable: "$brand-info",
    version: "4.0.0-alpha.6"
}, {
    id: "brand-success",
    sassVariable: "$brand-success",
    label: "Success",
    type: "theme-colors",
    customType: "p-sass-color",
    version: "4.0.0-alpha.6"
}, {
    id: "brand-warning",
    sassVariable: "$brand-warning",
    label: "Warning",
    type: "theme-colors",
    customType: "p-sass-color",
    version: "4.0.0-alpha.6"
}, {
    id: "brand-danger",
    sassVariable: "$brand-danger",
    label: "Danger",
    type: "theme-colors",
    customType: "p-sass-color",
    version: "4.0.0-alpha.6"
}, {
    id: "brand-inverse",
    sassVariable: "$brand-inverse",
    label: "Inverse",
    type: "theme-colors",
    customType: "p-sass-color",
    version: "4.0.0-alpha.6"
}, {
    id: "font-base",
    type: "theme-fonts",
    label: "Base",
    sassVariable: "$font-family-base",
    customType: "p-googlefont"
}, {
    id: "font-headings",
    type: "theme-fonts",
    label: "Headings",
    sassVariable: "$headings-font-family",
    customType: "p-googlefont"
}, {
    id: "font-display",
    type: "theme-fonts",
    label: "Display",
    sassVariable: "$display-font-family",
    customType: "p-googlefont"
}, {
    id: "font-size-base",
    type: "theme-fonts",
    label: "Base size",
    sassVariable: "$font-size-base"
}, {
    id: "border-radius",
    type: "theme-settings",
    label: "Radius",
    sassVariable: "$border-radius",
    options: [ {
        label: "default",
        value: ""
    }, {
        label: "none",
        value: "0px"
    }, {
        label: "circle",
        value: "1rem"
    } ],
    require: [ {
        sassVariable: "$border-radius-lg",
        value: "$border-radius * 1.2"
    }, {
        sassVariable: "$border-radius-sm",
        value: "$border-radius * .8"
    } ]
}, {
    id: "border-radius",
    type: "theme-settings",
    label: "Container",
    sassVariable: "$container-max-widths",
    options: [ {
        label: "default",
        value: ""
    }, {
        label: "narrow",
        value: "(sm: 540px, md: 720px, lg: 960px, xl: 960px)"
    } ]
}, {
    id: "spacer",
    type: "theme-settings",
    label: "Spacer",
    sassVariable: "$spacer",
    options: [ {
        label: "x 2",
        value: "1.5rem"
    }, {
        label: "x 1.5",
        value: "1.5rem"
    }, {
        label: "x 1.2",
        value: "1.2rem"
    }, {
        label: "default",
        value: ""
    }, {
        label: "x .8",
        value: "0.8rem"
    }, {
        label: "x .5",
        value: "0.5rem"
    } ]
} ]), pInspectors = pInspectors.concat([ {
    id: "navbar-affix",
    type: "effects",
    selector: "script[src='https://pingendo.com/assets/scripts/navbar-affix.js']",
    label: "Navbar affix",
    info: "Lorem ipsum dolor sit amet, consectetur adipiscing elit",
    html: '<script src="https://pingendo.com/assets/scripts/navbar-affix.js"><\/script>',
    options: [ {
        label: "no",
        value: "false"
    }, {
        label: "yes",
        value: "true"
    } ]
}, {
    id: "navbar-cover",
    type: "effects",
    selector: "script[src='https://pingendo.com/assets/scripts/navbar-cover.js']",
    label: "Navbar cover",
    info: "Lorem ipsum dolor sit amet, consectetur adipiscing elit",
    html: '<script src="https://pingendo.com/assets/scripts/navbar-cover.js"><\/script>',
    options: [ {
        label: "no",
        value: "false"
    }, {
        label: "yes",
        value: "true"
    } ]
}, {
    id: "slidein-images",
    type: "effects",
    selector: "script[src='https://pingendo.com/assets/scripts/slidein-images.js']",
    info: "Lorem ipsum dolor sit amet, consectetur adipiscing elit",
    label: "Slidein images",
    html: '<script src="https://pingendo.com/assets/scripts/slidein-images.js"><\/script>',
    options: [ {
        label: "no",
        value: "false"
    }, {
        label: "yes",
        value: "true"
    } ]
}, {
    id: "smooth-scroll",
    type: "effects",
    selector: "script[src='https://pingendo.com/assets/scripts/smooth-scroll.js']",
    info: "Lorem ipsum dolor sit amet, consectetur adipiscing elit",
    label: "Smooth scroll",
    html: '<script src="https://pingendo.com/assets/scripts/smooth-scroll.js"><\/script>',
    options: [ {
        label: "no",
        value: "false"
    }, {
        label: "yes",
        value: "true"
    } ]
} ]), pElements = pElements.concat([ {
    title: "Icon",
    category: "media",
    selector: ".fa",
    addTo: ".btn, li.nav-item, .list-group-item, li.breadcrumb-item, h1,h2,h3,h4,h5,h6,.navbar-brand",
    html: '<i class="fa fa-user fa-fw"></i>',
    addHelper: function(node) {
        ($(node).parent().hasClass("nav-item") || $(node).parent().hasClass("breadcrumb-item")) && $(node).parent().find("> a ").prepend(node), 
        ($(node).parent().is("h1") || $(node).parent().is("h2") || $(node).parent().is("h3") || $(node).parent().is("h4") || $(node).parent().is("h5") || $(node).parent().is("h6") || $(node).parent().hasClass("list-group-item") || $(node).parent().hasClass("navbar-brand") || $(node).parent().hasClass("btn")) && $(node).parent().prepend(node);
    }
} ]), pInspectors = pInspectors.concat([ {
    id: "faClass",
    label: "Name",
    selector: ".fa",
    type: "component",
    attribute: "class",
    customType: "p-fontawesome",
    _getter: function(sel, i) {
        for (var faClasses = [], x = 0; x < pInspectors.length; x++) if ("faSize" == pInspectors[x].id || "faFixedWidth" == pInspectors[x].id) for (var z = 0; z < pInspectors[x].classes.length; z++) "" != pInspectors[x].classes[z].value && faClasses.push(pInspectors[x].classes[z].value);
        for (var classes = $(sel).attr("class").split(" "), y = 0; y < classes.length; y++) if (classes[y].includes("fa-") && -1 == faClasses.indexOf(classes[y])) return classes[y];
    },
    _setter: function(sel, i) {
        for (var faClasses = [], x = 0; x < pInspectors.length; x++) if ("faSize" == pInspectors[x].id || "faFixedWidth" == pInspectors[x].id) for (var z = 0; z < pInspectors[x].classes.length; z++) "" != pInspectors[x].classes[z].value && faClasses.push(pInspectors[x].classes[z].value);
        for (var toRemove = "", classes = $(sel).attr("class").split(" "), y = 0; y < classes.length; y++) classes[y].includes("fa-") && -1 == faClasses.indexOf(classes[y]) && (toRemove = classes[y]);
        pEditor.applyDOMModifications(function() {
            $(sel).removeClass(toRemove), $(sel).addClass(i.value);
        });
    }
}, {
    category: "media",
    selector: "",
    type: "node",
    attribute: "class",
    label: "",
    customType: "p-fontawesome-preview",
    _getter: function(sel, i) {
        for (var faClasses = [], x = 0; x < pInspectors.length; x++) if ("faSize" == pInspectors[x].id || "faFixedWidth" == pInspectors[x].id) for (var z = 0; z < pInspectors[x].classes.length; z++) "" != pInspectors[x].classes[z].value && faClasses.push(pInspectors[x].classes[z].value);
        for (var classes = $(sel).attr("class").split(" "), y = 0; y < classes.length; y++) if (classes[y].includes("fa-") && -1 == faClasses.indexOf(classes[y])) return classes[y];
    },
    _setter: function(sel, i) {
        for (var faClasses = [], x = 0; x < pInspectors.length; x++) if ("faSize" == pInspectors[x].id || "faFixedWidth" == pInspectors[x].id) for (var z = 0; z < pInspectors[x].classes.length; z++) "" != pInspectors[x].classes[z].value && faClasses.push(pInspectors[x].classes[z].value);
        for (var toRemove = "", classes = $(sel).attr("class").split(" "), y = 0; y < classes.length; y++) classes[y].includes("fa-") && -1 == faClasses.indexOf(classes[y]) && (toRemove = classes[y]);
        pEditor.applyDOMModifications(function() {
            $(sel).removeClass(toRemove), $(sel).addClass(i.value);
        });
    }
}, {
    id: "faSize",
    label: "Size",
    selector: ".fa",
    type: "component",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "lg",
        value: "fa-lg"
    }, {
        label: "2x",
        value: "fa-2x"
    }, {
        label: "3x",
        value: "fa-3x"
    }, {
        label: "4x",
        value: "fa-4x"
    }, {
        label: "5x",
        value: "fa-5x"
    } ]
}, {
    id: "faFixedWidth",
    selector: ".fa",
    label: "Fixed Width",
    type: "component",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "yes",
        value: "fa-fw"
    } ]
}, {
    id: "iconPosition",
    selector: ".fa",
    label: "Placement",
    type: "component",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "Pull left",
        value: "pull-left"
    }, {
        label: "Pull right",
        value: "pull-right"
    } ]
}, {
    id: "display",
    label: "Display",
    type: "component",
    selector: ".fa",
    classes: [ {
        label: "-",
        value: ""
    }, {
        label: "block",
        value: "d-block"
    }, {
        label: "inline",
        value: "d-inline"
    }, {
        label: "inline-block",
        value: "d-inline-block"
    } ]
} ]), pElements.elements = [];

for (var x = 0; x < pElements.length; x++) {
    var el = pElements[x];
    "layout" != el.type && (pElements.elementsSelector ? pElements.elementsSelector = pElements.elementsSelector + " , " + el.selector : pElements.elementsSelector = el.selector);
}

pElements.containers = [];

for (var x = 0; x < pElements.length; x++) {
    var el = pElements[x];
    el.container && (pElements.containerSelector ? pElements.containerSelector = pElements.containerSelector + " , " + el.selector : pElements.containerSelector = el.selector);
}

xtag.register("p-analytics", {
    lifecycle: {
        created: function() {},
        inserted: function() {
            function pageView() {
                ga("create", "UA-29443235-13", "auto"), ga("send", "pageview");
            }
            window.pAnalytics = this, function(i, s, o, g, r, a, m) {
                i.GoogleAnalyticsObject = r, i[r] = i[r] || function() {
                    (i[r].q = i[r].q || []).push(arguments);
                }, i[r].l = 1 * new Date(), a = s.createElement(o), m = s.getElementsByTagName(o)[0], 
                a.async = 1, a.src = "//www.google-analytics.com/analytics.js", m.parentNode.insertBefore(a, m);
            }(window, document, "script", 0, "ga"), setInterval(pageView, 18e3), pageView();
        }
    },
    events: {},
    accessors: {},
    methods: {
        track: function(eventString) {
            try {
                ga("send", "event", "pingendo", eventString);
            } catch (e) {}
        }
    }
});

var DOMUtil = function() {}, pGridUtil = {
    CELL_SELECTOR: 'div[class*="col-"], div[class*="col-sm-"], div[class*="col-md-"], div[class*="col-lg-"], div[class*="col-xl-"]',
    ROW_SELECTOR: ".row",
    SECTION_SELECTOR: "body > *",
    CONTAINER_SELECTOR: ".container, .container-fluid",
    GRID_SELECTOR: 'div[class*="col-"], div[class*="col-sm-"], div[class*="col-md-"], div[class*="col-lg-"], div[class*="col-xl-"], .row, .container, .container-fluid, .section',
    SMALL_MATCH: /col-sm-([0-9]?[0-9])/,
    MEDIUM_MATCH: /col-md-([0-9]?[0-9])/,
    LARGE_MATCH: /col-lg-([0-9]?[0-9])/,
    OFFSET_LG_MATCH: /offset-lg-([0-9]?[0-9])/,
    OFFSET_MD_MATCH: /offset-md-([0-9]?[0-9])/,
    fixSize: function(row) {
        var $cols = $(row).children(pGridUtil.CELL_SELECTOR), s = Math.floor(12 / $cols.length);
        $cols.each(function(k, col) {
            pGridUtil.setCellSize(col, s), pGridUtil.setOffset(col, 0);
        });
    },
    getCellSize: function(el) {
        if (!el || !$(el).is(pGridUtil.CELL_SELECTOR)) return 0;
        try {
            var match = String(el.className).match(/col-md-([0-9]?[0-9])/);
            if (match && match.length > 0) return Number(match[1]);
            if ((match = String(el.className).match(/col-sm-([0-9]?[0-9])/)) && match.length > 0) return Number(match[1]);
            if ((match = String(el.className).match(/col-([0-9]?[0-9])/)) && match.length > 0) return Number(match[1]);
            if ((match = String(el.className).match(/col-lg-([0-9]?[0-9])/)) && match.length > 0) return Number(match[1]);
            if ((match = String(el.className).match(/col-xl-([0-9]?[0-9])/)) && match.length > 0) return Number(match[1]);
        } catch (e) {
            return 0;
        }
        return 0;
    },
    hasOffset: function(el) {
        return !!String(el.className).match(pGridUtil.OFFSET_MD_MATCH);
    },
    getOffset: function(el) {
        if (!el || !el.className.match(pGridUtil.OFFSET_MD_MATCH)) return 0;
        try {
            var match = String(el.className).match(/offset-md-([0-9]?[0-9])/);
            if (match && match.length > 0) return Number(match[1]);
        } catch (e) {
            return 0;
        }
    },
    setOffset: function(el, size) {
        String(el.className).match(pGridUtil.MEDIUM_MATCH), String(el.className).match(pGridUtil.LARGE_MATCH);
        !pGridUtil.hasOffset(el) && size ? el.className = el.className + " offset-md-" + size : el.className = size ? el.className.replace(/offset-md-([0-9]?[0-9])/, "offset-md-" + size) : el.className.replace(/offset-md-([0-9]?[0-9])/, "");
    },
    setCellSize: function(el, size) {
        try {
            if (!el || size < 1 || size > 12) return;
            pGridUtil.getCellSize(el);
            var classname = el.className, matchMd = String(el.className).match(pGridUtil.MEDIUM_MATCH), matchLg = String(el.className).match(pGridUtil.LARGE_MATCH);
            classname = matchMd && matchMd.length > 0 ? classname.replace(/col-md-([0-9]?[0-9])/, "col-md-" + size) : matchLg && matchLg.length > 0 ? classname.replace(/col-lg-([0-9]?[0-9])/, "col-lg-" + size) : classname + " col-md-" + size, 
            el.className = classname;
        } catch (e) {
            pApp.log("Unexpected error setting cell size");
        }
    },
    getParentRow: function(el) {
        return pDOMUtil.ancestorMatchSelector(el, pGridUtil.ROW_SELECTOR);
    },
    getCells: function(row) {
        for (var cells = [], x = 0; x < row.childNodes.length; x++) {
            var cell = row.childNodes[x];
            $(cell).is(pGridUtil.CELL_SELECTOR) && cells.push(cell);
        }
        return cells;
    },
    getRowSize: function(row) {
        if (!row || !row.childNodes) return 0;
        for (var size = 0, x = 0; x < row.childNodes.length; x++) size += pGridUtil.getCellSize(row.childNodes[x]);
        return size;
    }
};

DOMUtil.prototype.nextElement = function(el) {
    var n = el;
    do {
        n = n.nextSibling;
    } while (n && 1 != n.nodeType);
    return n;
}, DOMUtil.prototype.previousElement = function(el) {
    var p = el;
    do {
        p = p.previousSibling;
    } while (p && 1 != p.nodeType);
    return p;
}, DOMUtil.prototype.parents = function(a) {
    for (var els = []; a; ) a.tagName && els.unshift(a), a = a.parentNode;
    return els;
}, DOMUtil.prototype.getCellSize = function(el) {
    try {
        return String(el.className).match(/span([0-9]?[0-9])/)[1];
    } catch (e) {}
    return null;
}, DOMUtil.prototype.ancestorHasClass = function(el, className) {
    if (!el || !className) throw "2 parameters needed";
    for (;;) {
        if (!el || !el.classList) return !1;
        if (el.classList.contains(className)) return el;
        if (!(el = el.parentNode) || !el.classList) return !1;
    }
}, DOMUtil.prototype.ancestorMatchSelector = function(el, selector) {
    for (;;) {
        if (!el || !el.classList) return !1;
        if ($(el).is(selector)) return el;
        if (!(el = el.parentNode) || !el.classList) return !1;
    }
}, DOMUtil.prototype.ancestorHasAttribute = function(el, attributeValue) {
    for (;;) {
        if (el.getAttribute("data-pingendo") == attributeValue) return el;
        if (void 0 === (el = el.parentNode) || void 0 === el.classList) return;
    }
}, DOMUtil.prototype.searchClass = function(el, search) {
    if (!el.classList) return !1;
    for (var x = 0; x < el.classList.length; x++) if (el.classList[x].search(search) > -1) return !0;
    return !1;
}, DOMUtil.prototype.getParentByTagName = function(el, tag) {
    var obj_parent = el.parentNode;
    return !(!obj_parent || !obj_parent.tagName) && (obj_parent.tagName.toLowerCase() == tag ? obj_parent : pDOMUtil.getParentByTagName(obj_parent, tag));
}, DOMUtil.prototype.indexOf = function(node) {
    var nodeList = node.parentNode.childNodes;
    return [].slice.call(nodeList, 0).indexOf(node);
};

var pDOMUtil = new DOMUtil();

pApp.clipboard = new function() {
    var self = this;
    self._value = "", pApp.isDesktop() && (self.clipboard = require("electron").clipboard), 
    this.getHtml = function() {
        return pApp.isDesktop() ? self.clipboard.readText() : self._value;
    }, this.setHtml = function(unicode, html) {
        if (pApp.isDesktop()) return self.clipboard.writeText(html);
        self._value = html;
    };
}(), function() {
    this.PiResources = function() {}, this.PiResources.prototype = {
        convertURItoPath: function(uri) {
            if (pApp.isWeb()) return uri;
            if (uri) {
                var uri = decodeURI(uri);
                if ("win32" == process.platform) path = (path = uri.replace("file:///", "")).replace(/\//g, "\\"); else var path = uri.replace("file://", "");
                return path;
            }
        }
    }, pApp.resources = new PiResources();
}();

var parserWorkerBlob = URL.createObjectURL(new Blob([ "(", function() {
    var CodeMirror = {}, window = {};
    !function() {
        function e(n, i) {
            function t() {
                return (v = n.charAt(++S)) || "";
            }
            function r(e) {
                var i = "", r = S;
                return e && a(), i = n.charAt(S + 1) || "", S = r - 1, t(), i;
            }
            function s(e) {
                for (var i = S; t(); ) if ("\\" === v) t(); else {
                    if (-1 !== e.indexOf(v)) break;
                    if ("\n" === v) break;
                }
                return n.substring(i, S + 1);
            }
            function a() {
                for (var e = ""; b.test(r()); ) t(), e += v;
                return e;
            }
            function p(e) {
                var i = S;
                for (e = "/" === r(), t(); t(); ) {
                    if (!e && "*" === v && "/" === r()) {
                        t();
                        break;
                    }
                    if (e && "\n" === v) return n.substring(i, S);
                }
                return n.substring(i, S) + v;
            }
            function o(e) {
                return n.substring(S - e.length, S).toLowerCase() === e;
            }
            var _ = (i = i || {}).indent_size || 4, w = i.indent_char || " ", d = void 0 === i.selector_separator_newline || i.selector_separator_newline, g = void 0 !== i.end_with_newline && i.end_with_newline, L = void 0 === i.newline_between_rules || i.newline_between_rules;
            "string" == typeof _ && (_ = parseInt(_, 10)), i.indent_with_tabs && (w = " ", _ = 1);
            var v, b = /^\s+$/, S = -1, m = 0, y = n.match(/^[\t ]*/)[0], A = new Array(_ + 1).join(w), E = 0, O = 0, C = {};
            C["{"] = function(e) {
                C.singleSpace(), N.push(e), C.newLine();
            }, C["}"] = function(e) {
                C.newLine(), N.push(e), C.newLine();
            }, C._lastCharWhitespace = function() {
                return b.test(N[N.length - 1]);
            }, C.newLine = function(e) {
                N.length && (e || "\n" === N[N.length - 1] || C.trim(), N.push("\n"), y && N.push(y));
            }, C.singleSpace = function() {
                N.length && !C._lastCharWhitespace() && N.push(" ");
            }, C.trim = function() {
                for (;C._lastCharWhitespace(); ) N.pop();
            };
            for (var N = [], R = !1, T = !1, U = "", k = ""; ;) {
                var I = function() {
                    var e = "";
                    for (v && b.test(v) && (e = v); b.test(t()); ) e += v;
                    return e;
                }(), $ = "" !== I, x = -1 !== I.indexOf("\n");
                if (k = U, U = v, !v) break;
                if ("/" === v && "*" === r()) {
                    var D = 0 === E;
                    (x || D) && C.newLine(), N.push(p()), C.newLine(), D && C.newLine(!0);
                } else if ("/" === v && "/" === r()) x || "{" === k || C.trim(), C.singleSpace(), 
                N.push(p()), C.newLine(); else if ("@" === v) {
                    $ && C.singleSpace(), N.push(v);
                    var W = function(e) {
                        var n = S, i = s(e);
                        return S = n - 1, t(), i;
                    }(": ,;{}()[]/='\"");
                    W.match(/[ :]$/) && (t(), W = s(": ").replace(/\s$/, ""), N.push(W), C.singleSpace()), 
                    (W = W.replace(/\s$/, "")) in e.NESTED_AT_RULE && (O += 1, W in e.CONDITIONAL_GROUP_RULE && (T = !0));
                } else "{" === v ? "}" === r(!0) ? (a(), t(), C.singleSpace(), N.push("{}"), C.newLine(), 
                L && 0 === E && C.newLine(!0)) : (E++, y += A, C["{"](v), T ? (T = !1, R = E > O) : R = E >= O) : "}" === v ? (E--, 
                y = y.slice(0, -_), C["}"](v), R = !1, O && O--, L && 0 === E && C.newLine(!0)) : ":" === v ? (a(), 
                !R && !T || o("&") || function() {
                    for (var e = S + 1; e < n.length; e++) {
                        var i = n.charAt(e);
                        if ("{" === i) return !0;
                        if (";" === i || "}" === i || ")" === i) return !1;
                    }
                    return !1;
                }() ? ":" === r() ? (t(), N.push("::")) : N.push(":") : (N.push(":"), C.singleSpace())) : '"' === v || "'" === v ? ($ && C.singleSpace(), 
                N.push(s(v))) : ";" === v ? (N.push(v), C.newLine()) : "(" === v ? o("url") ? (N.push(v), 
                a(), t() && (")" !== v && '"' !== v && "'" !== v ? N.push(s(")")) : S--)) : (m++, 
                $ && C.singleSpace(), N.push(v), a()) : ")" === v ? (N.push(v), m--) : "," === v ? (N.push(v), 
                a(), !R && d && 1 > m ? C.newLine() : C.singleSpace()) : "]" === v ? N.push(v) : "[" === v ? ($ && C.singleSpace(), 
                N.push(v)) : "=" === v ? (a(), v = "=", N.push(v)) : ($ && C.singleSpace(), N.push(v));
            }
            var j = "";
            return y && (j += y), j += N.join("").replace(/[\r\n\t ]+$/, ""), g && (j += "\n"), 
            j;
        }
        e.NESTED_AT_RULE = {
            "@page": !0,
            "@font-face": !0,
            "@keyframes": !0,
            "@media": !0,
            "@supports": !0,
            "@document": !0
        }, e.CONDITIONAL_GROUP_RULE = {
            "@media": !0,
            "@supports": !0,
            "@document": !0
        }, "function" == typeof define && define.amd ? define([], function() {
            return {
                css_beautify: e
            };
        }) : "undefined" != typeof exports ? exports.css_beautify = e : void 0 !== window ? window.css_beautify = e : "undefined" != typeof global && (global.css_beautify = e);
    }(), window.CodeMirror = {}, function() {
        "use strict";
        function a(a) {
            return a.split(/\r?\n|\r/);
        }
        function b(a) {
            this.pos = this.start = 0, this.string = a, this.lineStart = 0;
        }
        b.prototype = {
            eol: function() {
                return this.pos >= this.string.length;
            },
            sol: function() {
                return 0 == this.pos;
            },
            peek: function() {
                return this.string.charAt(this.pos) || null;
            },
            next: function() {
                if (this.pos < this.string.length) return this.string.charAt(this.pos++);
            },
            eat: function(a) {
                var b = this.string.charAt(this.pos);
                if ("string" == typeof a) c = b == a; else var c = b && (a.test ? a.test(b) : a(b));
                if (c) return ++this.pos, b;
            },
            eatWhile: function(a) {
                for (var b = this.pos; this.eat(a); ) ;
                return this.pos > b;
            },
            eatSpace: function() {
                for (var a = this.pos; /[\s\u00a0]/.test(this.string.charAt(this.pos)); ) ++this.pos;
                return this.pos > a;
            },
            skipToEnd: function() {
                this.pos = this.string.length;
            },
            skipTo: function(a) {
                var b = this.string.indexOf(a, this.pos);
                if (b > -1) return this.pos = b, !0;
            },
            backUp: function(a) {
                this.pos -= a;
            },
            column: function() {
                return this.start - this.lineStart;
            },
            indentation: function() {
                return 0;
            },
            match: function(a, b, c) {
                if ("string" != typeof a) {
                    var f = this.string.slice(this.pos).match(a);
                    return f && f.index > 0 ? null : (f && !1 !== b && (this.pos += f[0].length), f);
                }
                var d = function(a) {
                    return c ? a.toLowerCase() : a;
                };
                if (d(this.string.substr(this.pos, a.length)) == d(a)) return !1 !== b && (this.pos += a.length), 
                !0;
            },
            current: function() {
                return this.string.slice(this.start, this.pos);
            },
            hideFirstChars: function(a, b) {
                this.lineStart += a;
                try {
                    return b();
                } finally {
                    this.lineStart -= a;
                }
            }
        }, CodeMirror.StringStream = b, CodeMirror.startState = function(a, b, c) {
            return !a.startState || a.startState(b, c);
        };
        var c = CodeMirror.modes = {}, d = CodeMirror.mimeModes = {};
        CodeMirror.defineMode = function(a, b) {
            arguments.length > 2 && (b.dependencies = Array.prototype.slice.call(arguments, 2)), 
            c[a] = b;
        }, CodeMirror.defineMIME = function(a, b) {
            d[a] = b;
        }, CodeMirror.resolveMode = function(a) {
            return "string" == typeof a && d.hasOwnProperty(a) ? a = d[a] : a && "string" == typeof a.name && d.hasOwnProperty(a.name) && (a = d[a.name]), 
            "string" == typeof a ? {
                name: a
            } : a || {
                name: "null"
            };
        }, CodeMirror.getMode = function(a, b) {
            b = CodeMirror.resolveMode(b);
            var d = c[b.name];
            if (!d) throw new Error("Unknown mode: " + b);
            return d(a, b);
        }, CodeMirror.registerHelper = CodeMirror.registerGlobalHelper = Math.min, CodeMirror.defineMode("null", function() {
            return {
                token: function(a) {
                    a.skipToEnd();
                }
            };
        }), CodeMirror.defineMIME("text/plain", "null"), CodeMirror.runMode = function(b, c, d, e) {
            var f = CodeMirror.getMode({
                indentUnit: 2
            }, c);
            if (1 == d.nodeType) {
                var g = e && e.tabSize || 4, h = d, i = 0;
                h.innerHTML = "", d = function(a, b) {
                    if ("\n" == a) return h.appendChild(document.createElement("br")), void (i = 0);
                    for (var c = "", d = 0; ;) {
                        var e = a.indexOf("\t", d);
                        if (-1 == e) {
                            c += a.slice(d), i += a.length - d;
                            break;
                        }
                        i += e - d, c += a.slice(d, e);
                        var f = g - i % g;
                        i += f;
                        for (var j = 0; j < f; ++j) c += " ";
                        d = e + 1;
                    }
                    if (b) {
                        var k = h.appendChild(document.createElement("span"));
                        k.className = "cm-" + b.replace(/ +/g, " cm-"), k.appendChild(document.createTextNode(c));
                    } else h.appendChild(document.createTextNode(c));
                };
            }
            for (var j = a(b), k = e && e.state || CodeMirror.startState(f), l = 0, m = j.length; l < m; ++l) {
                l && d("\n");
                var n = new CodeMirror.StringStream(j[l]);
                for (!n.string && f.blankLine && f.blankLine(k); !n.eol(); ) {
                    var o = f.token(n, k);
                    d(n.current(), o, l, n.start, k), n.start = n.pos;
                }
            }
        };
    }(), function(a) {
        "object" == typeof exports && "object" == typeof module ? a(require("../../lib/codemirror")) : "function" == typeof define && define.amd ? define([ "../../lib/codemirror" ], a) : a(CodeMirror);
    }(function(a) {
        "use strict";
        function b(a) {
            for (var b = {}, c = 0; c < a.length; ++c) b[a[c]] = !0;
            return b;
        }
        function x(a, b) {
            for (var d, c = !1; null != (d = a.next()); ) {
                if (c && "/" == d) {
                    b.tokenize = null;
                    break;
                }
                c = "*" == d;
            }
            return [ "comment", "comment" ];
        }
        a.defineMode("css", function(b, c) {
            function u(a, b) {
                return s = b, a;
            }
            function v(a, b) {
                var c = a.next();
                if (f[c]) {
                    var d = f[c](a, b);
                    if (!1 !== d) return d;
                }
                return "@" == c ? (a.eatWhile(/[\w\\\-]/), u("def", a.current())) : "=" == c || ("~" == c || "|" == c) && a.eat("=") ? u(null, "compare") : '"' == c || "'" == c ? (b.tokenize = w(c), 
                b.tokenize(a, b)) : "#" == c ? (a.eatWhile(/[\w\\\-]/), u("atom", "hash")) : "!" == c ? (a.match(/^\s*\w*/), 
                u("keyword", "important")) : /\d/.test(c) || "." == c && a.eat(/\d/) ? (a.eatWhile(/[\w.%]/), 
                u("number", "unit")) : "-" !== c ? /[,+>*\/]/.test(c) ? u(null, "select-op") : "." == c && a.match(/^-?[_a-z][_a-z0-9-]*/i) ? u("qualifier", "qualifier") : /[:;{}\[\]\(\)]/.test(c) ? u(null, c) : "u" == c && a.match(/rl(-prefix)?\(/) || "d" == c && a.match("omain(") || "r" == c && a.match("egexp(") ? (a.backUp(1), 
                b.tokenize = x, u("property", "word")) : /[\w\\\-]/.test(c) ? (a.eatWhile(/[\w\\\-]/), 
                u("property", "word")) : u(null, null) : /[\d.]/.test(a.peek()) ? (a.eatWhile(/[\w.%]/), 
                u("number", "unit")) : a.match(/^-[\w\\\-]+/) ? (a.eatWhile(/[\w\\\-]/), a.match(/^\s*:/, !1) ? u("variable-2", "variable-definition") : u("variable-2", "variable")) : a.match(/^\w+-/) ? u("meta", "meta") : void 0;
            }
            function w(a) {
                return function(b, c) {
                    for (var e, d = !1; null != (e = b.next()); ) {
                        if (e == a && !d) {
                            ")" == a && b.backUp(1);
                            break;
                        }
                        d = !d && "\\" == e;
                    }
                    return (e == a || !d && ")" != a) && (c.tokenize = null), u("string", "string");
                };
            }
            function x(a, b) {
                return a.next(), a.match(/\s*[\"\')]/, !1) ? b.tokenize = null : b.tokenize = w(")"), 
                u(null, "(");
            }
            function y(a, b, c) {
                this.type = a, this.indent = b, this.prev = c;
            }
            function z(a, b, c, d) {
                return a.context = new y(c, b.indentation() + (!1 === d ? 0 : e), a.context), c;
            }
            function A(a) {
                return a.context.prev && (a.context = a.context.prev), a.context.type;
            }
            function B(a, b, c) {
                return E[c.context.type](a, b, c);
            }
            function C(a, b, c, d) {
                for (var e = d || 1; e > 0; e--) c.context = c.context.prev;
                return B(a, b, c);
            }
            function D(a) {
                var b = a.current().toLowerCase();
                t = p.hasOwnProperty(b) ? "atom" : o.hasOwnProperty(b) ? "keyword" : "variable";
            }
            var d = c.inline;
            c.propertyKeywords || (c = a.resolveMode("text/css"));
            var s, t, e = b.indentUnit, f = c.tokenHooks, g = c.documentTypes || {}, h = c.mediaTypes || {}, i = c.mediaFeatures || {}, j = c.mediaValueKeywords || {}, k = c.propertyKeywords || {}, l = c.nonStandardPropertyKeywords || {}, m = c.fontProperties || {}, n = c.counterDescriptors || {}, o = c.colorKeywords || {}, p = c.valueKeywords || {}, q = c.allowNested, r = !0 === c.supportsAtComponent, E = {};
            return E.top = function(a, b, c) {
                if ("{" == a) return z(c, b, "block");
                if ("}" == a && c.context.prev) return A(c);
                if (r && /@component/.test(a)) return z(c, b, "atComponentBlock");
                if (/^@(-moz-)?document$/.test(a)) return z(c, b, "documentTypes");
                if (/^@(media|supports|(-moz-)?document|import)$/.test(a)) return z(c, b, "atBlock");
                if (/^@(font-face|counter-style)/.test(a)) return c.stateArg = a, "restricted_atBlock_before";
                if (/^@(-(moz|ms|o|webkit)-)?keyframes$/.test(a)) return "keyframes";
                if (a && "@" == a.charAt(0)) return z(c, b, "at");
                if ("hash" == a) t = "builtin"; else if ("word" == a) t = "tag"; else {
                    if ("variable-definition" == a) return "maybeprop";
                    if ("interpolation" == a) return z(c, b, "interpolation");
                    if (":" == a) return "pseudo";
                    if (q && "(" == a) return z(c, b, "parens");
                }
                return c.context.type;
            }, E.block = function(a, b, c) {
                if ("word" == a) {
                    var d = b.current().toLowerCase();
                    return k.hasOwnProperty(d) ? (t = "property", "maybeprop") : l.hasOwnProperty(d) ? (t = "string-2", 
                    "maybeprop") : q ? (t = b.match(/^\s*:(?:\s|$)/, !1) ? "property" : "tag", "block") : (t += " error", 
                    "maybeprop");
                }
                return "meta" == a ? "block" : q || "hash" != a && "qualifier" != a ? E.top(a, b, c) : (t = "error", 
                "block");
            }, E.maybeprop = function(a, b, c) {
                return ":" == a ? z(c, b, "prop") : B(a, b, c);
            }, E.prop = function(a, b, c) {
                if (";" == a) return A(c);
                if ("{" == a && q) return z(c, b, "propBlock");
                if ("}" == a || "{" == a) return C(a, b, c);
                if ("(" == a) return z(c, b, "parens");
                if ("hash" != a || /^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(b.current())) {
                    if ("word" == a) D(b); else if ("interpolation" == a) return z(c, b, "interpolation");
                } else t += " error";
                return "prop";
            }, E.propBlock = function(a, b, c) {
                return "}" == a ? A(c) : "word" == a ? (t = "property", "maybeprop") : c.context.type;
            }, E.parens = function(a, b, c) {
                return "{" == a || "}" == a ? C(a, b, c) : ")" == a ? A(c) : "(" == a ? z(c, b, "parens") : "interpolation" == a ? z(c, b, "interpolation") : ("word" == a && D(b), 
                "parens");
            }, E.pseudo = function(a, b, c) {
                return "word" == a ? (t = "variable-3", c.context.type) : B(a, b, c);
            }, E.documentTypes = function(a, b, c) {
                return "word" == a && g.hasOwnProperty(b.current()) ? (t = "tag", c.context.type) : E.atBlock(a, b, c);
            }, E.atBlock = function(a, b, c) {
                if ("(" == a) return z(c, b, "atBlock_parens");
                if ("}" == a || ";" == a) return C(a, b, c);
                if ("{" == a) return A(c) && z(c, b, q ? "block" : "top");
                if ("interpolation" == a) return z(c, b, "interpolation");
                if ("word" == a) {
                    var d = b.current().toLowerCase();
                    t = "only" == d || "not" == d || "and" == d || "or" == d ? "keyword" : h.hasOwnProperty(d) ? "attribute" : i.hasOwnProperty(d) ? "property" : j.hasOwnProperty(d) ? "keyword" : k.hasOwnProperty(d) ? "property" : l.hasOwnProperty(d) ? "string-2" : p.hasOwnProperty(d) ? "atom" : o.hasOwnProperty(d) ? "keyword" : "error";
                }
                return c.context.type;
            }, E.atComponentBlock = function(a, b, c) {
                return "}" == a ? C(a, b, c) : "{" == a ? A(c) && z(c, b, q ? "block" : "top", !1) : ("word" == a && (t = "error"), 
                c.context.type);
            }, E.atBlock_parens = function(a, b, c) {
                return ")" == a ? A(c) : "{" == a || "}" == a ? C(a, b, c, 2) : E.atBlock(a, b, c);
            }, E.restricted_atBlock_before = function(a, b, c) {
                return "{" == a ? z(c, b, "restricted_atBlock") : "word" == a && "@counter-style" == c.stateArg ? (t = "variable", 
                "restricted_atBlock_before") : B(a, b, c);
            }, E.restricted_atBlock = function(a, b, c) {
                return "}" == a ? (c.stateArg = null, A(c)) : "word" == a ? (t = "@font-face" == c.stateArg && !m.hasOwnProperty(b.current().toLowerCase()) || "@counter-style" == c.stateArg && !n.hasOwnProperty(b.current().toLowerCase()) ? "error" : "property", 
                "maybeprop") : "restricted_atBlock";
            }, E.keyframes = function(a, b, c) {
                return "word" == a ? (t = "variable", "keyframes") : "{" == a ? z(c, b, "top") : B(a, b, c);
            }, E.at = function(a, b, c) {
                return ";" == a ? A(c) : "{" == a || "}" == a ? C(a, b, c) : ("word" == a ? t = "tag" : "hash" == a && (t = "builtin"), 
                "at");
            }, E.interpolation = function(a, b, c) {
                return "}" == a ? A(c) : "{" == a || ";" == a ? C(a, b, c) : ("word" == a ? t = "variable" : "variable" != a && "(" != a && ")" != a && (t = "error"), 
                "interpolation");
            }, {
                startState: function(a) {
                    return {
                        tokenize: null,
                        state: d ? "block" : "top",
                        stateArg: null,
                        context: new y(d ? "block" : "top", a || 0, null)
                    };
                },
                token: function(a, b) {
                    if (!b.tokenize && a.eatSpace()) return null;
                    var c = (b.tokenize || v)(a, b);
                    return c && "object" == typeof c && (s = c[1], c = c[0]), t = c, b.state = E[b.state](s, a, b), 
                    t;
                },
                indent: function(a, b) {
                    var c = a.context, d = b && b.charAt(0), f = c.indent;
                    return "prop" != c.type || "}" != d && ")" != d || (c = c.prev), c.prev && ("}" != d || "block" != c.type && "top" != c.type && "interpolation" != c.type && "restricted_atBlock" != c.type ? (")" != d || "parens" != c.type && "atBlock_parens" != c.type) && ("{" != d || "at" != c.type && "atBlock" != c.type) || (f = Math.max(0, c.indent - e), 
                    c = c.prev) : (c = c.prev, f = c.indent)), f;
                },
                electricChars: "}",
                blockCommentStart: "/*",
                blockCommentEnd: "*/",
                fold: "brace"
            };
        });
        var c = [ "domain", "regexp", "url", "url-prefix" ], d = b(c), e = [ "all", "aural", "braille", "handheld", "print", "projection", "screen", "tty", "tv", "embossed" ], f = b(e), g = [ "width", "min-width", "max-width", "height", "min-height", "max-height", "device-width", "min-device-width", "max-device-width", "device-height", "min-device-height", "max-device-height", "aspect-ratio", "min-aspect-ratio", "max-aspect-ratio", "device-aspect-ratio", "min-device-aspect-ratio", "max-device-aspect-ratio", "color", "min-color", "max-color", "color-index", "min-color-index", "max-color-index", "monochrome", "min-monochrome", "max-monochrome", "resolution", "min-resolution", "max-resolution", "scan", "grid", "orientation", "device-pixel-ratio", "min-device-pixel-ratio", "max-device-pixel-ratio", "pointer", "any-pointer", "hover", "any-hover" ], h = b(g), i = [ "landscape", "portrait", "none", "coarse", "fine", "on-demand", "hover", "interlace", "progressive" ], j = b(i), k = [ "align-content", "align-items", "align-self", "alignment-adjust", "alignment-baseline", "anchor-point", "animation", "animation-delay", "animation-direction", "animation-duration", "animation-fill-mode", "animation-iteration-count", "animation-name", "animation-play-state", "animation-timing-function", "appearance", "azimuth", "backface-visibility", "background", "background-attachment", "background-blend-mode", "background-clip", "background-color", "background-image", "background-origin", "background-position", "background-repeat", "background-size", "baseline-shift", "binding", "bleed", "bookmark-label", "bookmark-level", "bookmark-state", "bookmark-target", "border", "border-bottom", "border-bottom-color", "border-bottom-left-radius", "border-bottom-right-radius", "border-bottom-style", "border-bottom-width", "border-collapse", "border-color", "border-image", "border-image-outset", "border-image-repeat", "border-image-slice", "border-image-source", "border-image-width", "border-left", "border-left-color", "border-left-style", "border-left-width", "border-radius", "border-right", "border-right-color", "border-right-style", "border-right-width", "border-spacing", "border-style", "border-top", "border-top-color", "border-top-left-radius", "border-top-right-radius", "border-top-style", "border-top-width", "border-width", "bottom", "box-decoration-break", "box-shadow", "box-sizing", "break-after", "break-before", "break-inside", "caption-side", "clear", "clip", "color", "color-profile", "column-count", "column-fill", "column-gap", "column-rule", "column-rule-color", "column-rule-style", "column-rule-width", "column-span", "column-width", "columns", "content", "counter-increment", "counter-reset", "crop", "cue", "cue-after", "cue-before", "cursor", "direction", "display", "dominant-baseline", "drop-initial-after-adjust", "drop-initial-after-align", "drop-initial-before-adjust", "drop-initial-before-align", "drop-initial-size", "drop-initial-value", "elevation", "empty-cells", "fit", "fit-position", "flex", "flex-basis", "flex-direction", "flex-flow", "flex-grow", "flex-shrink", "flex-wrap", "float", "float-offset", "flow-from", "flow-into", "font", "font-feature-settings", "font-family", "font-kerning", "font-language-override", "font-size", "font-size-adjust", "font-stretch", "font-style", "font-synthesis", "font-variant", "font-variant-alternates", "font-variant-caps", "font-variant-east-asian", "font-variant-ligatures", "font-variant-numeric", "font-variant-position", "font-weight", "grid", "grid-area", "grid-auto-columns", "grid-auto-flow", "grid-auto-rows", "grid-column", "grid-column-end", "grid-column-gap", "grid-column-start", "grid-gap", "grid-row", "grid-row-end", "grid-row-gap", "grid-row-start", "grid-template", "grid-template-areas", "grid-template-columns", "grid-template-rows", "hanging-punctuation", "height", "hyphens", "icon", "image-orientation", "image-rendering", "image-resolution", "inline-box-align", "justify-content", "left", "letter-spacing", "line-break", "line-height", "line-stacking", "line-stacking-ruby", "line-stacking-shift", "line-stacking-strategy", "list-style", "list-style-image", "list-style-position", "list-style-type", "margin", "margin-bottom", "margin-left", "margin-right", "margin-top", "marker-offset", "marks", "marquee-direction", "marquee-loop", "marquee-play-count", "marquee-speed", "marquee-style", "max-height", "max-width", "min-height", "min-width", "move-to", "nav-down", "nav-index", "nav-left", "nav-right", "nav-up", "object-fit", "object-position", "opacity", "order", "orphans", "outline", "outline-color", "outline-offset", "outline-style", "outline-width", "overflow", "overflow-style", "overflow-wrap", "overflow-x", "overflow-y", "padding", "padding-bottom", "padding-left", "padding-right", "padding-top", "page", "page-break-after", "page-break-before", "page-break-inside", "page-policy", "pause", "pause-after", "pause-before", "perspective", "perspective-origin", "pitch", "pitch-range", "play-during", "position", "presentation-level", "punctuation-trim", "quotes", "region-break-after", "region-break-before", "region-break-inside", "region-fragment", "rendering-intent", "resize", "rest", "rest-after", "rest-before", "richness", "right", "rotation", "rotation-point", "ruby-align", "ruby-overhang", "ruby-position", "ruby-span", "shape-image-threshold", "shape-inside", "shape-margin", "shape-outside", "size", "speak", "speak-as", "speak-header", "speak-numeral", "speak-punctuation", "speech-rate", "stress", "string-set", "tab-size", "table-layout", "target", "target-name", "target-new", "target-position", "text-align", "text-align-last", "text-decoration", "text-decoration-color", "text-decoration-line", "text-decoration-skip", "text-decoration-style", "text-emphasis", "text-emphasis-color", "text-emphasis-position", "text-emphasis-style", "text-height", "text-indent", "text-justify", "text-outline", "text-overflow", "text-shadow", "text-size-adjust", "text-space-collapse", "text-transform", "text-underline-position", "text-wrap", "top", "transform", "transform-origin", "transform-style", "transition", "transition-delay", "transition-duration", "transition-property", "transition-timing-function", "unicode-bidi", "vertical-align", "visibility", "voice-balance", "voice-duration", "voice-family", "voice-pitch", "voice-range", "voice-rate", "voice-stress", "voice-volume", "volume", "white-space", "widows", "width", "word-break", "word-spacing", "word-wrap", "z-index", "clip-path", "clip-rule", "mask", "enable-background", "filter", "flood-color", "flood-opacity", "lighting-color", "stop-color", "stop-opacity", "pointer-events", "color-interpolation", "color-interpolation-filters", "color-rendering", "fill", "fill-opacity", "fill-rule", "image-rendering", "marker", "marker-end", "marker-mid", "marker-start", "shape-rendering", "stroke", "stroke-dasharray", "stroke-dashoffset", "stroke-linecap", "stroke-linejoin", "stroke-miterlimit", "stroke-opacity", "stroke-width", "text-rendering", "baseline-shift", "dominant-baseline", "glyph-orientation-horizontal", "glyph-orientation-vertical", "text-anchor", "writing-mode" ], l = b(k), m = [ "scrollbar-arrow-color", "scrollbar-base-color", "scrollbar-dark-shadow-color", "scrollbar-face-color", "scrollbar-highlight-color", "scrollbar-shadow-color", "scrollbar-3d-light-color", "scrollbar-track-color", "shape-inside", "searchfield-cancel-button", "searchfield-decoration", "searchfield-results-button", "searchfield-results-decoration", "zoom" ], n = b(m), p = b([ "font-family", "src", "unicode-range", "font-variant", "font-feature-settings", "font-stretch", "font-weight", "font-style" ]), r = b([ "additive-symbols", "fallback", "negative", "pad", "prefix", "range", "speak-as", "suffix", "symbols", "system" ]), s = [ "aliceblue", "antiquewhite", "aqua", "aquamarine", "azure", "beige", "bisque", "black", "blanchedalmond", "blue", "blueviolet", "brown", "burlywood", "cadetblue", "chartreuse", "chocolate", "coral", "cornflowerblue", "cornsilk", "crimson", "cyan", "darkblue", "darkcyan", "darkgoldenrod", "darkgray", "darkgreen", "darkkhaki", "darkmagenta", "darkolivegreen", "darkorange", "darkorchid", "darkred", "darksalmon", "darkseagreen", "darkslateblue", "darkslategray", "darkturquoise", "darkviolet", "deeppink", "deepskyblue", "dimgray", "dodgerblue", "firebrick", "floralwhite", "forestgreen", "fuchsia", "gainsboro", "ghostwhite", "gold", "goldenrod", "gray", "grey", "green", "greenyellow", "honeydew", "hotpink", "indianred", "indigo", "ivory", "khaki", "lavender", "lavenderblush", "lawngreen", "lemonchiffon", "lightblue", "lightcoral", "lightcyan", "lightgoldenrodyellow", "lightgray", "lightgreen", "lightpink", "lightsalmon", "lightseagreen", "lightskyblue", "lightslategray", "lightsteelblue", "lightyellow", "lime", "limegreen", "linen", "magenta", "maroon", "mediumaquamarine", "mediumblue", "mediumorchid", "mediumpurple", "mediumseagreen", "mediumslateblue", "mediumspringgreen", "mediumturquoise", "mediumvioletred", "midnightblue", "mintcream", "mistyrose", "moccasin", "navajowhite", "navy", "oldlace", "olive", "olivedrab", "orange", "orangered", "orchid", "palegoldenrod", "palegreen", "paleturquoise", "palevioletred", "papayawhip", "peachpuff", "peru", "pink", "plum", "powderblue", "purple", "rebeccapurple", "red", "rosybrown", "royalblue", "saddlebrown", "salmon", "sandybrown", "seagreen", "seashell", "sienna", "silver", "skyblue", "slateblue", "slategray", "snow", "springgreen", "steelblue", "tan", "teal", "thistle", "tomato", "turquoise", "violet", "wheat", "white", "whitesmoke", "yellow", "yellowgreen" ], t = b(s), u = [ "above", "absolute", "activeborder", "additive", "activecaption", "afar", "after-white-space", "ahead", "alias", "all", "all-scroll", "alphabetic", "alternate", "always", "amharic", "amharic-abegede", "antialiased", "appworkspace", "arabic-indic", "armenian", "asterisks", "attr", "auto", "avoid", "avoid-column", "avoid-page", "avoid-region", "background", "backwards", "baseline", "below", "bidi-override", "binary", "bengali", "blink", "block", "block-axis", "bold", "bolder", "border", "border-box", "both", "bottom", "break", "break-all", "break-word", "bullets", "button", "button-bevel", "buttonface", "buttonhighlight", "buttonshadow", "buttontext", "calc", "cambodian", "capitalize", "caps-lock-indicator", "caption", "captiontext", "caret", "cell", "center", "checkbox", "circle", "cjk-decimal", "cjk-earthly-branch", "cjk-heavenly-stem", "cjk-ideographic", "clear", "clip", "close-quote", "col-resize", "collapse", "color", "color-burn", "color-dodge", "column", "column-reverse", "compact", "condensed", "contain", "content", "content-box", "context-menu", "continuous", "copy", "counter", "counters", "cover", "crop", "cross", "crosshair", "currentcolor", "cursive", "cyclic", "darken", "dashed", "decimal", "decimal-leading-zero", "default", "default-button", "dense", "destination-atop", "destination-in", "destination-out", "destination-over", "devanagari", "difference", "disc", "discard", "disclosure-closed", "disclosure-open", "document", "dot-dash", "dot-dot-dash", "dotted", "double", "down", "e-resize", "ease", "ease-in", "ease-in-out", "ease-out", "element", "ellipse", "ellipsis", "embed", "end", "ethiopic", "ethiopic-abegede", "ethiopic-abegede-am-et", "ethiopic-abegede-gez", "ethiopic-abegede-ti-er", "ethiopic-abegede-ti-et", "ethiopic-halehame-aa-er", "ethiopic-halehame-aa-et", "ethiopic-halehame-am-et", "ethiopic-halehame-gez", "ethiopic-halehame-om-et", "ethiopic-halehame-sid-et", "ethiopic-halehame-so-et", "ethiopic-halehame-ti-er", "ethiopic-halehame-ti-et", "ethiopic-halehame-tig", "ethiopic-numeric", "ew-resize", "exclusion", "expanded", "extends", "extra-condensed", "extra-expanded", "fantasy", "fast", "fill", "fixed", "flat", "flex", "flex-end", "flex-start", "footnotes", "forwards", "from", "geometricPrecision", "georgian", "graytext", "grid", "groove", "gujarati", "gurmukhi", "hand", "hangul", "hangul-consonant", "hard-light", "hebrew", "help", "hidden", "hide", "higher", "highlight", "highlighttext", "hiragana", "hiragana-iroha", "horizontal", "hsl", "hsla", "hue", "icon", "ignore", "inactiveborder", "inactivecaption", "inactivecaptiontext", "infinite", "infobackground", "infotext", "inherit", "initial", "inline", "inline-axis", "inline-block", "inline-flex", "inline-grid", "inline-table", "inset", "inside", "intrinsic", "invert", "italic", "japanese-formal", "japanese-informal", "justify", "kannada", "katakana", "katakana-iroha", "keep-all", "khmer", "korean-hangul-formal", "korean-hanja-formal", "korean-hanja-informal", "landscape", "lao", "large", "larger", "left", "level", "lighter", "lighten", "line-through", "linear", "linear-gradient", "lines", "list-item", "listbox", "listitem", "local", "logical", "loud", "lower", "lower-alpha", "lower-armenian", "lower-greek", "lower-hexadecimal", "lower-latin", "lower-norwegian", "lower-roman", "lowercase", "ltr", "luminosity", "malayalam", "match", "matrix", "matrix3d", "media-controls-background", "media-current-time-display", "media-fullscreen-button", "media-mute-button", "media-play-button", "media-return-to-realtime-button", "media-rewind-button", "media-seek-back-button", "media-seek-forward-button", "media-slider", "media-sliderthumb", "media-time-remaining-display", "media-volume-slider", "media-volume-slider-container", "media-volume-sliderthumb", "medium", "menu", "menulist", "menulist-button", "menulist-text", "menulist-textfield", "menutext", "message-box", "middle", "min-intrinsic", "mix", "mongolian", "monospace", "move", "multiple", "multiply", "myanmar", "n-resize", "narrower", "ne-resize", "nesw-resize", "no-close-quote", "no-drop", "no-open-quote", "no-repeat", "none", "normal", "not-allowed", "nowrap", "ns-resize", "numbers", "numeric", "nw-resize", "nwse-resize", "oblique", "octal", "open-quote", "optimizeLegibility", "optimizeSpeed", "oriya", "oromo", "outset", "outside", "outside-shape", "overlay", "overline", "padding", "padding-box", "painted", "page", "paused", "persian", "perspective", "plus-darker", "plus-lighter", "pointer", "polygon", "portrait", "pre", "pre-line", "pre-wrap", "preserve-3d", "progress", "push-button", "radial-gradient", "radio", "read-only", "read-write", "read-write-plaintext-only", "rectangle", "region", "relative", "repeat", "repeating-linear-gradient", "repeating-radial-gradient", "repeat-x", "repeat-y", "reset", "reverse", "rgb", "rgba", "ridge", "right", "rotate", "rotate3d", "rotateX", "rotateY", "rotateZ", "round", "row", "row-resize", "row-reverse", "rtl", "run-in", "running", "s-resize", "sans-serif", "saturation", "scale", "scale3d", "scaleX", "scaleY", "scaleZ", "screen", "scroll", "scrollbar", "se-resize", "searchfield", "searchfield-cancel-button", "searchfield-decoration", "searchfield-results-button", "searchfield-results-decoration", "semi-condensed", "semi-expanded", "separate", "serif", "show", "sidama", "simp-chinese-formal", "simp-chinese-informal", "single", "skew", "skewX", "skewY", "skip-white-space", "slide", "slider-horizontal", "slider-vertical", "sliderthumb-horizontal", "sliderthumb-vertical", "slow", "small", "small-caps", "small-caption", "smaller", "soft-light", "solid", "somali", "source-atop", "source-in", "source-out", "source-over", "space", "space-around", "space-between", "spell-out", "square", "square-button", "start", "static", "status-bar", "stretch", "stroke", "sub", "subpixel-antialiased", "super", "sw-resize", "symbolic", "symbols", "table", "table-caption", "table-cell", "table-column", "table-column-group", "table-footer-group", "table-header-group", "table-row", "table-row-group", "tamil", "telugu", "text", "text-bottom", "text-top", "textarea", "textfield", "thai", "thick", "thin", "threeddarkshadow", "threedface", "threedhighlight", "threedlightshadow", "threedshadow", "tibetan", "tigre", "tigrinya-er", "tigrinya-er-abegede", "tigrinya-et", "tigrinya-et-abegede", "to", "top", "trad-chinese-formal", "trad-chinese-informal", "translate", "translate3d", "translateX", "translateY", "translateZ", "transparent", "ultra-condensed", "ultra-expanded", "underline", "up", "upper-alpha", "upper-armenian", "upper-greek", "upper-hexadecimal", "upper-latin", "upper-norwegian", "upper-roman", "uppercase", "urdu", "url", "var", "vertical", "vertical-text", "visible", "visibleFill", "visiblePainted", "visibleStroke", "visual", "w-resize", "wait", "wave", "wider", "window", "windowframe", "windowtext", "words", "wrap", "wrap-reverse", "x-large", "x-small", "xor", "xx-large", "xx-small" ], v = b(u), w = c.concat(e).concat(g).concat(i).concat(k).concat(m).concat(s).concat(u);
        a.registerHelper("hintWords", "css", w), a.defineMIME("text/css", {
            documentTypes: d,
            mediaTypes: f,
            mediaFeatures: h,
            mediaValueKeywords: j,
            propertyKeywords: l,
            nonStandardPropertyKeywords: n,
            fontProperties: p,
            counterDescriptors: r,
            colorKeywords: t,
            valueKeywords: v,
            tokenHooks: {
                "/": function(a, b) {
                    return !!a.eat("*") && (b.tokenize = x, x(a, b));
                }
            },
            name: "css"
        }), a.defineMIME("text/x-scss", {
            mediaTypes: f,
            mediaFeatures: h,
            mediaValueKeywords: j,
            propertyKeywords: l,
            nonStandardPropertyKeywords: n,
            colorKeywords: t,
            valueKeywords: v,
            fontProperties: p,
            allowNested: !0,
            tokenHooks: {
                "/": function(a, b) {
                    return a.eat("/") ? (a.skipToEnd(), [ "comment", "comment" ]) : a.eat("*") ? (b.tokenize = x, 
                    x(a, b)) : [ "operator", "operator" ];
                },
                ":": function(a) {
                    return !!a.match(/\s*\{/) && [ null, "{" ];
                },
                $: function(a) {
                    return a.match(/^[\w-]+/), a.match(/^\s*:/, !1) ? [ "variable-2", "variable-definition" ] : [ "variable-2", "variable" ];
                },
                "#": function(a) {
                    return !!a.eat("{") && [ null, "interpolation" ];
                }
            },
            name: "css",
            helperType: "scss"
        }), a.defineMIME("text/x-less", {
            mediaTypes: f,
            mediaFeatures: h,
            mediaValueKeywords: j,
            propertyKeywords: l,
            nonStandardPropertyKeywords: n,
            colorKeywords: t,
            valueKeywords: v,
            fontProperties: p,
            allowNested: !0,
            tokenHooks: {
                "/": function(a, b) {
                    return a.eat("/") ? (a.skipToEnd(), [ "comment", "comment" ]) : a.eat("*") ? (b.tokenize = x, 
                    x(a, b)) : [ "operator", "operator" ];
                },
                "@": function(a) {
                    return a.eat("{") ? [ null, "interpolation" ] : !a.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/, !1) && (a.eatWhile(/[\w\\\-]/), 
                    a.match(/^\s*:/, !1) ? [ "variable-2", "variable-definition" ] : [ "variable-2", "variable" ]);
                },
                "&": function() {
                    return [ "atom", "atom" ];
                }
            },
            name: "css",
            helperType: "less"
        }), a.defineMIME("text/x-gss", {
            documentTypes: d,
            mediaTypes: f,
            mediaFeatures: h,
            propertyKeywords: l,
            nonStandardPropertyKeywords: n,
            fontProperties: p,
            counterDescriptors: r,
            colorKeywords: t,
            valueKeywords: v,
            supportsAtComponent: !0,
            tokenHooks: {
                "/": function(a, b) {
                    return !!a.eat("*") && (b.tokenize = x, x(a, b));
                }
            },
            name: "css",
            helperType: "gss"
        });
    });
    onmessage = function(event) {
        var lessImport = JSON.parse(event.data);
        lessImport.variables = {}, lessImport.cssrules = {}, lessImport.error = !1;
        var level = 0, model = [], charCount = 0;
        lessImport.model = [];
        var lastVar, next = null, updateLevel = function(text, style) {
            "#{" == text.trim() || "{" == text.trim() || "(" == text.trim() ? level += 1 : "}" != text.trim() && ")" != text.trim() || (level -= 1);
        }, isVariable = function(text, style) {
            return 0 == level && "variable-2" == style;
        }, isImport = function(text, style) {
            return 0 == level && "@import" == text && "def" == style;
        }, isAt = function(text, style) {
            return 0 == level && 0 == text.indexOf("@") && "def" == style;
        }, eatAt = function(text, style) {
            "}" == text && 0 == level && (next = null), model.push(text);
        }, isCSSRule = function(text, style) {
            return 0 == level && (-1 == text.indexOf("@") && ("tag" == style || "qualifier" == style));
        }, eatCSSRule = function(text, style) {
            if (1 == level && "{" == text.trim()) {
                if (null == lastVar.value.match(/^.[a-zA-Z0-9-]+\s*$/g)) return model.splice(-1, 1), 
                model.push(lastVar.value + text), void (next = null);
                lastVar.key = "" + lastVar.value, lastVar.className = lastVar.value.slice(1), lastVar.value = "";
            } else 0 == level && "}" == text && (next = null);
            lastVar.value = lastVar.value + text;
        }, eatVariable = function(text, style) {
            0 == level && ";" == text ? (lastVar.chunks.push(text), "$theme-colors" == lastVar.key && (lessImport.themeColors = lastVar.chunks), 
            lastVar = null, next = null) : lastVar.chunks.push(text);
        }, eatImport = function(text, style) {
            ";" != text && "url" != text || (next = null), text.match(/bootstrap-4\.0\.0-beta|alpha\.[0-9]/) && (lessImport.version = text.replace(/'/g, "").replace("bootstrap-", "")), 
            model.push(text);
        };
        CodeMirror.runMode(lessImport.source, "text/x-scss", function(text, style) {
            charCount += text.length, updateLevel(text), next ? next(text, style) : 0 == level && isImport(text, style) ? (next = eatImport, 
            model.push(text)) : isAt(text, style) ? (next = eatAt, model.push(text)) : isCSSRule(text, style) ? (lastVar = {
                type: "CSSrule",
                key: text,
                value: text,
                anchorIndex: charCount
            }, model.push(lastVar), next = eatCSSRule) : 0 == level && isVariable(0, style) ? (next = eatVariable, 
            lastVar = {
                type: "var",
                key: text,
                value: "",
                chunks: []
            }, model.push(lastVar)) : model.push(text);
        }), lessImport.model = model, postMessage(JSON.stringify(lessImport));
    };
}.toString(), ")()" ], {
    type: "application/javascript"
}));

window._scssCache = {};

var sass = new Sass();

sass.options({
    sourceMapFile: null,
    sourceMapContents: !1
});

var ss = "";

sass.importer(function(request, done) {
    if ("bootstrap-4.0.0-beta.1" == request.current) req = "/assets/bootstrap/_bootstrap-4.0.0-beta.1.scss"; else if ("bootstrap-4.0.0-alpha.6" == request.current) req = "/assets/bootstrap/_bootstrap-4.0.0-alpha.6.scss"; else if ("bootstrap-4.0.0-alpha.5" == request.current) req = "/assets/bootstrap/_bootstrap-4.0.0-alpha.5.scss"; else if ("bootstrap-4.0.0-alpha.4" == request.current) req = "/assets/bootstrap/_bootstrap-4.0.0-alpha.4.scss"; else if ("bootstrap-4.0.0-alpha.3" == request.current) req = "/assets/bootstrap/_bootstrap-4.0.0-alpha.3.scss"; else if ("bootstrap" == request.current) req = "/assets/bootstrap/scss/bootstrap.scss"; else if ("pingendo-bootstrap" == request.current) req = "/assets/bootstrap/scss/pingendo-bootstrap.scss"; else if (request.current.indexOf("/")) {
        var s = request.current.split("/");
        s[s.length - 1] = "_" + s[s.length - 1];
        req = "/" + s.join("/") + ".scss";
    } else var req = "/_" + request.current + ".scss";
    window._scssCache[req] ? done({
        content: window._scssCache[req]
    }) : $.get(req, function(res) {
        window._scssCache[req] = res, done({
            content: res
        });
    }).fail(function() {
        done({
            error: "import for " + req + " failed ."
        });
    });
}), pApp.isDesktop() && angular.module("p-directives").directive("pAuth", [ "pingendo", "ModalService", "$http", function(pingendo, ModalService, $http) {
    return {
        template: '<div class="section" style="background-image: url(\'/site-assets/cover.jpg\');">                    <div class="container">                      <div class="row">                        <div class="col-xs-12 text-center">                          <div class="sticker-wrapper m-b-lg" ng-class="{\'valid\': mode == \'validserial\'}">                            \x3c!--<div class="sticker front"><h1 class="p-a-0 m-a-0">{{daysLeft}}</h1><p class="p-a-0 m-a-0">days trial</p></div>--\x3e                            <div class="sticker front"><img width="70px"src="/site-assets/Pingendo_logo_big.png"></div>                            <div class="sticker back"><i class="fa fa-thumbs-o-up fa-5x"></i></div>                          </div>                        </div>                      </div>                      <div class="row">                        <div  class="col-md-12">                          <form ng-show="mode != \'validserial\'" role="form">                              <h4 class="text-center">Beta ends, Pingendo 4 is landing!</h4><br>                              <a href="#" ng-click="buy()" class="btn btn-x btn-block m-b-md">Get your license</a>                            <div class="input-group">                              <input type="text" class="form-control" ng-model="serial"  placeholder="xxxx-xxxx-xxxx-xxxx">                              <span class="input-group-btn">                                <button ng-if="!checkingSerial" class="btn btn-default" ng-click="checkSerial()" type="button">                                  Activate                                </button>                                <button ng-if="checkingSerial" class="btn btn-default"  type="button">                                  <i class="fa fa-fw fa-spin fa-circle-o-notch"></i> Checking                                </button>                              </span>                            </div>                          </form>                          <form ng-show="mode == \'validserial\'" role="form">                            <a class="btn btn-x btn-block" ng-click="revoke()">Revoke license</a>                          </form>                        </div>                      </div>                    </div>                  </div>                  <div class="linkbar">                    <div class="container container-fluid bg-inverse text-center">                      <div class="row">                        <div class="col-xs-4 p-a-md">                          <a ng-click="goto(\'https://forum.pingendo.com/t/developments-roadmap/149\')">                            <i class="fa fa-map fa-2x"></i>                            <p>Roadmap</p>                          </a>                        </div>                        <div class="col-xs-4 p-a-md">                          <a ng-click="goto(\'https://forum.pingendo.com\')">                            <i class="fa fa-user fa-2x"></i>                            <p>Forum</p>                          </a>                        </div>                        <div class="col-xs-4 p-a-md">                          <a ng-click="goto(\'mailto:info@pingendo.com\')">                            <i class="fa fa-envelope fa-2x"></i>                            <p>Contact us</p>                          </a>                        </div>                      </div>                    </div>                  </div>',
        scope: {
            auth: "@"
        },
        controller: function($scope) {
            $scope.serial = null, $scope.goto = function(to) {
                pApp.shell.openExternal(to);
            };
            var update = function() {
                if (localStorage.getItem("serial")) $scope.mode = "validserial"; else if (localStorage.getItem("trial")) {
                    var currentTime = new Date(), today = new Date(currentTime.getFullYear(), currentTime.getMonth(), currentTime.getDate()), diff = function(d1, d2) {
                        return Math.abs(d1.getTime() - d2.getTime()) / 864e5;
                    }(new Date(localStorage.trial), today);
                    $scope.daysLeft = 30 - diff, $scope.daysLeft >= 0 ? $scope.mode = "trial" : $scope.mode = "trialexpired";
                } else $scope.mode = "trial";
            };
            update(), $scope.revoke = function() {
                confirm("Revoking license you couldn't use Pingendo anymore, unless you have a valid license id.\nDo you confirm ?") && (localStorage.removeItem("serial"), 
                update());
            }, $scope.checkSerial = function() {
                $scope.checkingSerial = !0;
                var success = function() {
                    localStorage.serial = $scope.serial, $scope.$apply(function() {
                        $scope.checkingSerial = !1, $scope.okSerial = !0, $scope.mode = "validserial";
                    });
                }, failure = function() {
                    $scope.$apply(function() {
                        $scope.checkingSerial = !1;
                    }), alert("Invalid serial number");
                };
                fetch("/checkSerial", {
                    method: "POST",
                    credentials: "omit",
                    body: JSON.stringify({
                        serial: $scope.serial
                    })
                }).then(function(response, body) {
                    if (response.ok) return response;
                    throw new Error("Network response was not ok.");
                }).then(function(response) {
                    response.text().then(function(text) {
                        "true" == text ? success() : failure();
                    });
                }).catch(function(error) {
                    success();
                });
            }, $scope.buy = function() {
                pApp.shell.openExternal("http://www.pingendo.com/buy");
            }, $scope.restart = function() {
                pApp.app.relaunch(), pApp.app.quit();
            };
        }
    };
} ]), xtag.register("p-commands", {
    lifecycle: {
        created: function() {},
        inserted: function() {
            window.pCommands = this;
            var self = this;
            this.commands = [ {
                id: "pcmd_devtools",
                handler: function() {
                    pApp.isDesktop() && require("electron").remote.getCurrentWindow().toggleDevTools();
                },
                shortcut: [ "ctrl+shift+j", "meta+shift+j" ]
            }, {
                id: "pcmd_addToRecents",
                handler: function(path) {
                    try {
                        (recents = JSON.parse(localStorage.getItem("p-recents"))) && recents.length || (recents = []);
                        var i = recents.indexOf(path);
                        -1 != i ? (recents.splice(i, 1), recents.unshift(path)) : recents.unshift(path);
                    } catch (e) {
                        var recents = [];
                    }
                    try {
                        localStorage.setItem("p-recents", JSON.stringify(recents));
                    } catch (e) {}
                }
            }, {
                id: "pcmd_new",
                shortcut: [ "meta+n", "ctrl+n" ],
                handler: function(callback) {
                    var pingendo = angular.element(document.body).injector().get("pingendo");
                    $.get("/assets/templates/empty.html", function(data) {
                        if (pApp.isLocal() && (data = data.split("https://pingendo.com/").join("http://" + document.location.host + "/")), 
                        pApp.isDesktop()) {
                            var path = pApp.app.getPath("temp") + "Untitled.html";
                            pApp.fs.writeFile(path, data, function(err) {
                                err ? console.log(err) : pingendo.openEditor(path, !0);
                            });
                        } else pingendo.openEditor("http://pingendo.com/Untitled.html", data, !0);
                    });
                }
            }, {
                id: "pcmd_previewGithub",
                handler: function() {
                    var gh = angular.element(document.body).injector().get("githubService");
                    window.open("/raw/" + gh.model.owner + "/" + gh.model.repo + "/" + gh.model.branch + "/" + gh.model.path);
                }
            }, {
                id: "pcmd_showItemInFolder",
                handler: function() {
                    if (pApp.isWeb()) {
                        var gh = angular.element(document.body).injector().get("githubService");
                        if (gh.model.pr) {
                            var pr_splitted = gh.model.pr.split("/"), prOwner = pr_splitted[1], prRepo = pr_splitted[2];
                            gh.gotoState("/" + prOwner + "/" + prRepo + "/blob/master/" + gh.model.path + "?pr=" + gh.model.pr);
                        } else gh.gotoState("/" + gh.model.owner + "/" + gh.model.repo + "/blob/" + gh.model.branch + "/" + gh.model.path);
                    } else if (pApp.isDesktop()) if (pEditor.editorInput.isTemp()) {
                        pCommands.execute("pcmd_save", function() {
                            pApp.shell.showItemInFolder(pApp.resources.convertURItoPath(pEditor.editorInput.url));
                        });
                    } else pApp.shell.showItemInFolder(pApp.resources.convertURItoPath(pEditor.editorInput.url));
                }
            }, {
                id: "pcmd_previewDesktopBrowser",
                shortcut: [ "meta+shift+b", "ctrl+shift+b" ],
                handler: function() {
                    pApp.isWeb() || pEditor.save(function(err, data) {
                        if (err) alert("Can't preview the file. Save it first."); else {
                            var exec = require("child_process").exec, isWin = /^win/.test(process.platform), isMac = /^darwin/.test(process.platform), isLinux = 0 == isMac && 0 == isWin;
                            if (isMac) cmd = "open"; else if (isWin) cmd = "explorer"; else if (isLinux) var cmd = "xdg-open";
                            exec(cmd + ' "' + pEditor.editorInput.url + '"', function(error, stdout, stderr) {});
                        }
                    });
                }
            }, {
                id: "pcmd_openExternalUrl",
                handler: function(url) {
                    pApp.isWeb() ? window.open(url, "_blank") : pApp.shell.openExternal(url);
                }
            }, {
                id: "pcmd_openLocal",
                shortcut: [ "meta+o", "ctrl+o" ],
                handler: function(path) {}
            }, {
                id: "pcmd_save",
                shortcut: [],
                handler: function(callback) {
                    "undefined" != typeof pEditor && pEditor && pEditor.save(callback);
                }
            }, {
                id: "pcmd_saveDocument",
                shortcut: [],
                handler: function(callback) {
                    "undefined" != typeof pEditor && pEditor && pEditor._saveDocument(callback);
                }
            }, {
                id: "pcmd_saveTheme",
                shortcut: [],
                handler: function(callback) {
                    "undefined" != typeof pEditor && pEditor && pEditor._saveTheme(pEditor.themeSupport.getTheme(), callback);
                }
            }, {
                id: "pcmd_saveAs",
                shortcut: [ "meta+shift+s", "ctrl+shift+s" ],
                handler: function() {}
            }, {
                id: "pcmd_load_theme",
                handler: function() {}
            }, {
                id: "pcmd_closeWindow",
                shortcut: [ "meta+w", "ctrl+w" ],
                handler: function(arg) {
                    pEditor && void 0 !== pEditor && pTabs.close(pTabs.active);
                }
            }, {
                id: "pcmd_quit",
                shortcut: [ "alt+f4", "meta+q" ],
                handler: function() {
                    pApp.app.quit();
                }
            }, {
                id: "pcmd_undo",
                shortcut: [ "meta+z", "ctrl+z" ],
                handler: function() {
                    pEditor && void 0 !== pEditor && pEditor.undo();
                }
            }, {
                id: "pcmd_redo",
                shortcut: [ "meta+shift+z", "ctrl+shift+z" ],
                handler: function() {
                    if (pEditor && void 0 !== pEditor) {
                        if ($("p-domtree *[contenteditable]").length) return void $(document)[0].execCommand("redo", !1, null);
                        pEditor.redo();
                    }
                }
            }, {
                id: "pcmd_copy",
                handler: function() {
                    if (void 0 !== pEditor && pEditor) if (pEditor.editable) pApp.clipboard.setHtml(pEditor.nativeSelection.toString(), pEditor.nativeSelection.toString()); else {
                        var string = pEditor.domSelection.outerHTML;
                        pApp.clipboard.setHtml(string, string);
                    }
                }
            }, {
                id: "pcmd_cut",
                handler: function() {
                    pEditor && void 0 !== pEditor && pEditor.applyDOMModifications(function() {
                        if (pEditor.editable) pEditor.contentDocument.execCommand("cut", !1, null); else {
                            var string = "", string = pEditor.domSelection.outerHTML;
                            pApp.clipboard.setHtml(string, string), pApp.clipboard.setHtml(string, string), 
                            self.execute("pcmd_delete");
                        }
                    });
                }
            }, {
                id: "pcmd_paste",
                handler: function() {
                    pEditor && void 0 !== pEditor && pEditor.applyDOMModifications(function() {
                        if (pEditor.editable) pEditor.contentDocument.execCommand("paste", null, null); else if (pApp.clipboard.getHtml()) {
                            var parsedHTML = new DOMParser().parseFromString(pApp.clipboard.getHtml(), "text/html");
                            pEditor.handleInsert(parsedHTML.body.firstChild, pEditor.domSelection, "after");
                        }
                    });
                }
            }, {
                id: "pcmd_goToParent",
                shortcut: [ "esc" ],
                handler: function() {
                    if (pEditor.editable) pEditor.editable = null; else if (pEditor.domSelection != pEditor.contentDocument.body) {
                        var parent = pEditor.domSelection.parentElement;
                        $(pEditor.domSelection).parents().each(function() {
                            var s = matchingSnippet(this);
                            if (s && s.catch && $(parent).is(s.catch)) return parent = this, !1;
                        }), pEditor.domSelection = parent;
                    }
                }
            }, {
                id: "pcmd_delete",
                shortcut: [ "del" ],
                handler: function() {
                    pEditor.editable ? pEditor.contentDocument.execCommand("forwardDelete", !1, null) : pCommands.execute("pcmd_delNode");
                }
            }, {
                id: "pcmd_backspace",
                shortcut: [ "backspace" ],
                handler: function() {
                    pEditor.editable ? pEditor.contentDocument.execCommand("Delete", !1, null) : pCommands.execute("pcmd_delNode");
                }
            }, {
                id: "pcmd_delNode",
                handler: function() {
                    if (pEditor && void 0 !== pEditor) {
                        if (!pEditor.domSelection || 1 == $(pEditor.domSelection).is("body, head, html")) return;
                        var nextSelection, node = pEditor.domSelection, s = matchingSnippet(pEditor.domSelection);
                        pEditor.applyDOMModifications(function() {
                            var parent = $(pEditor.domSelection).parent();
                            if ($(pEditor.domSelection).prev()[0]) prev = $(pEditor.domSelection).prev()[0]; else if (s.addTo) prev = $(node).closest(s.addTo)[0]; else var prev = parent[0];
                            $(pEditor.domSelection).remove(), 0 != parent[0].querySelectorAll("*").length || parent[0].textContent.trim() || (parent[0].textContent = ""), 
                            nextSelection = prev, s && s.deleteHelper && s.deleteHelper(node, parent[0]);
                        }), pEditor.domSelection = nextSelection;
                    }
                }
            }, {
                id: "pcmd_clone",
                shortcut: [ "meta+shift+c", "ctrl+shift+c" ],
                handler: function() {
                    if (pEditor && void 0 !== pEditor) {
                        if (pEditor.domSelection == pEditor.contentDocument.body || pEditor.domSelection == pEditor.contentDocument.head) return;
                        $("p-code")[0].length && $("p-code")[0].codeMirror.getInputField().blur(), pEditor.applyDOMModifications(function() {
                            var clone = pEditor.domSelection.cloneNode(!0);
                            pEditor.handleInsert(clone, pEditor.domSelection, "after"), pEditor.domSelection = clone;
                        });
                    }
                }
            }, {
                id: "pcmd_execCommand_bold",
                shortcut: [ "meta+b", "ctrl+b" ],
                handler: function() {
                    pEditor && void 0 !== pEditor && pEditor.editable && (pEditor.contentDocument.execCommand("bold", !1), 
                    $(pEditor.editable).focus());
                }
            }, {
                id: "pcmd_execCommand_italic",
                shortcut: [ "meta+i", "ctrl+i" ],
                handler: function() {
                    void 0 !== pEditor && pEditor.editable && (pEditor.contentDocument.execCommand("italic", !1), 
                    $(pEditor.editable).focus());
                }
            }, {
                id: "pcmd_execCommand_underline",
                shortcut: [ "meta+u", "ctrl+u" ],
                handler: function() {
                    pEditor && void 0 !== pEditor && pEditor.editable && (pEditor.contentDocument.execCommand("underline", !1), 
                    $(pEditor.editable).focus());
                }
            }, {
                id: "pcmd_execCommand_strikethrough",
                shortcut: [ "meta+t", "ctrl+t" ],
                handler: function() {
                    pEditor && void 0 !== pEditor && pEditor.editable && (pEditor.contentDocument.execCommand("strikeThrough", !1), 
                    $(pEditor.editable).focus());
                }
            }, {
                id: "pcmd_execCommand_link",
                handler: function() {
                    pEditor && pEditor.editable && (pEditor.contentDocument.execCommand("createLink", !1, "#"), 
                    $(pEditor.editable).focus());
                }
            }, {
                id: "pcmd_execCommand_unlink",
                handler: function() {
                    pEditor && pEditor.editable && (pEditor.contentDocument.execCommand("unlink", !1), 
                    $(pEditor.editable).focus());
                }
            }, {
                id: "pcmd_execCommand_mark",
                handler: function() {
                    pEditor && pEditor.editable && (pEditor.contentDocument.execCommand("insertHTML", !1, "<mark>" + pEditor._iframe.contentWindow.getSelection().toString() + "</mark>"), 
                    $(pEditor.editable).focus());
                }
            }, {
                id: "pcmd_execCommand_color",
                handler: function(className) {
                    pEditor && pEditor.editable && (pEditor.contentDocument.execCommand("insertHTML", !1, "<span class='" + className + "'>" + pEditor._iframe.contentWindow.getSelection().toString() + "</span>"), 
                    $(pEditor.editable).focus());
                }
            }, {
                id: "pcmd_execCommand_eraser",
                handler: function() {
                    if (pEditor && pEditor.editable) {
                        for (var nodes = getSelectedNodes(), i = 0; i < nodes.length; i++) "#TEXT" != nodes[i].nodeName && ("MARK" == nodes[i].nodeName || "SPAN" == nodes[i].nodeName ? $(nodes[i]).replaceWith(nodes[i].textContent) : pEditor.contentDocument.execCommand("removeFormat", !1));
                        $(pEditor.editable).focus();
                    }
                }
            }, {
                id: "pcmd_resolution",
                handler: function(device) {
                    pEditor && void 0 !== pEditor && ("phone" == device ? pEditor.resolution = 480 : "tablet" == device ? pEditor.resolution = 768 : "laptop" == device ? pEditor.resolution = 1024 : "desktop" == device && (pEditor.resolution = 1440));
                }
            }, {
                id: "pcmd_reload",
                shortcut: [ "meta+shift+r", "ctrl+shift+r" ],
                handler: function() {
                    sessionStorage.clear(), location.reload(!0);
                }
            }, {
                id: "pcmd_load_default_theme",
                handler: function() {
                    pEditor.loadTheme("https://pingendo.com/assets/bootstrap/bootstrap-4.0.0-beta.1.css");
                }
            } ];
            var event = document.createEvent("CustomEvent");
            event.initCustomEvent("pCommands", !0, !0, null), window.dispatchEvent(event), this.bindKeys(window.document), 
            (event = document.createEvent("CustomEvent")).initCustomEvent("pCommandsReady", !0, !0, null), 
            window.dispatchEvent(event);
        },
        removed: function() {},
        attributeChanged: function() {}
    },
    events: {},
    accessors: {
        togglers: {
            get: function() {},
            set: function(value) {}
        }
    },
    methods: {
        execute: function(id, arg) {
            for (var i = 0; i < this.commands.length; i++) {
                var cmd = this.commands[i];
                if (cmd.id == id) return cmd.handler(arg);
            }
        },
        bindKeys: function(target) {
            $(this.commands).each(function(k, cmd) {
                cmd.shortcut && $(cmd.shortcut).each(function(k, key) {
                    $(target).bind("keydown", key, function(e) {
                        e.preventDefault(), cmd.handler();
                    });
                });
            }), target.addEventListener("paste", function(e) {
                if (!$(e.target).is("input, select, textarea")) if (e.preventDefault(), pEditor.editable) pEditor.contentDocument.execCommand("insertHTML", null, e.clipboardData.getData("text/plain")); else {
                    var parsedHTML = new DOMParser().parseFromString(e.clipboardData.getData("text/plain"), "text/html");
                    parsedHTML.body.firstChild instanceof HTMLElement ? pEditor.handleInsert($(parsedHTML.body.firstChild.outerHTML).get(0), pEditor.domSelection, "after") : pEditor.handleInsert($("<p>" + parsedHTML.body.firstChild.nodeValue + "</p>").get(0), pEditor.domSelection, "after");
                }
            }), target.addEventListener("copy", function(e) {
                $(e.target).is("input, select, textarea") || (e.preventDefault(), pEditor.editable ? e.clipboardData.setData("text/plain", pEditor.nativeSelection.toString()) : e.clipboardData.setData("text/plain", pEditor.domSelection.outerHTML));
            }), target.addEventListener("cut", function(e) {
                $(e.target).is("input, select, textarea") || (e.preventDefault(), pEditor.editable ? (e.clipboardData.setData("text/plain", pEditor.nativeSelection.toString()), 
                pEditor.contentDocument.execCommand("delete", null, null)) : (e.clipboardData.setData("text/plain", pEditor.domSelection.outerHTML), 
                pEditor.applyDOMModifications(function() {
                    $(pEditor.domSelection).remove();
                })));
            });
        },
        get: function(id) {
            for (var i = 0; i < this.commands.length; i++) {
                var cmd = this.commands[i];
                if (cmd.id == id) return cmd;
            }
        }
    }
}), angular.module("p-directives").directive("pVersionChecker", [ "pingendo", function(pingendo) {
    return {
        template: '<div class="wrapper" ng-if="versionChecker.message"><i class="fa fa-warning"></i>&nbsp;                 <summary>{{versionChecker.message}}</summary>                 <a class="btn btn-darkest btn-sm m-r-md" ng-click="versionChecker.learn()">Learn how to upgrade</a>                 <a class="btn btn-darkest btn-sm" ng-click="versionChecker.dismiss()">Dismiss</a>                 </div>                ',
        controllerAs: "versionChecker",
        link: function($scope, element) {
            $(element).hide();
        },
        controller: function($scope) {
            var self = this;
            this._dismissed = !1, this.dismiss = function() {
                self._dismissed = !0, $(pEditor).find("p-version-checker").hide();
            }, this.learn = function() {
                pCommands.execute("pcmd_openExternalUrl", "https://forum.pingendo.com/t/migrating-from-alpha-to-bootstrap-4-0-0-beta/68");
            };
            var update = function() {
                if (pEditor && pEditor.themeSupport.getTheme()) {
                    var theme = pEditor.themeSupport.getTheme();
                    theme.version && theme.version.includes("-alpha.") ? self.message = "Seems you are using an Alpha version of Bootstrap 4.0 \u2013 Beta 1 is now available." : self.message = !1;
                } else self.message = !1;
                !self.message || this._dismissed ? $(pEditor).find("p-version-checker").hide() : $(pEditor).find("p-version-checker").show();
            };
            $(window).on("pTabChange pThemeLoaded pThemeCompiled", function() {
                update(), $scope.$apply();
            });
        }
    };
} ]), angular.module("p-directives").directive("pTemplateChooser", [ "pingendo", function(pingendo) {
    return {
        link: function($scope, element, attrs) {},
        controller: function($scope) {
            this.browse = function() {
                pCommands.execute("pcmd_openExternalUrl", "https://templates.pingendo.com");
            }, this.newBlank = function() {
                pCommands.execute("pcmd_new");
            };
        },
        controllerAs: "tc",
        template: '<div class="row">                  <div class="col-xs-6">                    <img ng-click="tc.newBlank()" src="assets/blank.png">                    <h5 class="text-muted">New blank page</h5>                  </div>                  <div class="col-xs-6">                    <img ng-click="tc.browse()" src="assets/templates-card4.png">                    <h5 class="text-muted">Browse templates</h5>                  </div>                </div>'
    };
} ]), angular.module("p-directives").directive("pSectionChooser", [ "pingendo", function(pingendo) {
    return {
        link: function($scope, element, attrs) {
            var onMessage = function(e) {
                var parsedHTML = new DOMParser().parseFromString(e.data, "text/html");
                pEditor.handleInsert(parsedHTML.body.firstChild, pEditor.domSelection, "after"), 
                remove();
            }, remove = function() {
                window.removeEventListener("message", onMessage), element.remove();
            };
            window.addEventListener("message", onMessage), $(window).on("keydown", function(e) {
                27 == e.which && remove();
            });
        },
        controller: function($scope) {
            var self = this;
            fetch("https://pingendo.github.io/templates/manifest.json", {
                credentials: "omit"
            }).then(function(a) {
                return a.json();
            }).then(function(json) {
                self.pages = [];
                for (var k in json.packs) for (var p in json.packs[k]) self.pages.push(json.packs[k][p]);
                $scope.$apply();
            }), self.select = function(page) {
                page.selected = !0, fetch(page.url, {
                    credentials: "omit"
                }).then(function(response) {
                    return response.text();
                }).then(function(data) {
                    var doc = new DOMParser().parseFromString(data, "text/html"), absThemeUrl = new URI("theme.css").absoluteTo(page.url);
                    $(doc).find("link[href='theme.css'").attr("href", absThemeUrl), pEditor.applyDOMModifications(doc, !0), 
                    $(document.body).removeClass("template-chooser");
                    try {
                        ga("send", "event", "templates", page.url);
                    } catch (e) {}
                });
            };
        },
        controllerAs: "tc",
        template: '<iframe src="http://localhost:8000/library.embed.html"></iframe>'
    };
} ]), function() {
    if (pApp.isDesktop()) {
        var createHTMLObserver = function(editor) {
            return editor._skipnextautoreload = !1, new HTMLObserver(editor, function() {
                editor._skipnextautoreload ? editor._skipnextautoreload = !1 : pEditor.editorInput.getContent(function(err, data) {
                    if (!err) {
                        data = data.replace(/\r/g, "");
                        var doc = new DOMParser().parseFromString(data, "text/html");
                        try {
                            editor.applyDOMModifications(doc), editor.dirty && (editor._zeroModificationCount = editor._undoStack.length, 
                            $(editor).trigger("pDirtyChange"));
                        } catch (e) {}
                    }
                }, function(e) {
                    alert("Unexpected error reading \r\n" + editor.editorInput.url);
                });
            });
        }, HTMLObserver = function(editor, callback) {
            var self = this;
            this.die = function() {
                clearInterval(self._interval), editor = null, callback = null;
            }, this._interval = setInterval(function() {
                var filePropInterval, fs = pApp.fs;
                try {
                    (filePropInterval = fs.statSync(editor.editorInput.url)).mtime > self.lastModifiedTime && callback.call(self), 
                    self.lastModifiedTime = filePropInterval.mtime;
                } catch (e) {}
            }, 1e3);
        };
        xtag.register("p-autoreload", {
            lifecycle: {
                created: function() {},
                inserted: function() {
                    var pEditor = this.parentNode;
                    if (!pApp.isWeb()) {
                        var self = this;
                        this.array = [], this._observers = [], $(pEditor).on("pDOMLoad", function() {
                            self.refreshObservers();
                        }), $(pEditor).on("pDOMSave", function() {
                            pEditor._skipnextautoreload = !0;
                        });
                    }
                },
                removed: function() {
                    for (var k in this._observers) this._observers.hasOwnProperty(k) && this._observers[k].die();
                },
                attributeChanged: function() {}
            },
            events: {},
            accessors: {
                togglers: {
                    get: function() {},
                    set: function(value) {}
                }
            },
            methods: {
                refreshObservers: function() {
                    for (var k in this._observers) if (this._observers.hasOwnProperty(k)) try {
                        this._observers[k].die();
                    } catch (e) {}
                    this._observers = [ createHTMLObserver(this.parentNode) ];
                }
            }
        });
    }
}(), function() {
    var removeUnit = function(val) {
        return val ? Number(val.replace("px", "")) : 0;
    }, updateOverlayMove = function(e) {
        pEditor._overlay.highlight(null);
        var self = this;
        if (this._drag = !1, this.$helpers.empty(), this.$svg.find(".move").remove(), !pEditor.editable && e) {
            var target = pEditor.fixOver(e), box = this.drawBox(target, !0);
            box.classList.add("move"), self.makeHighlight(box, e), self.drawButton(target, e);
        }
    }, updateOverlay = function() {
        var self = this;
        if (this._drag = !1, this.$helpers.empty(), this.$svg.find(".hover").remove(), !pEditor.editable) {
            if (pEditor.domSelection) {
                var box = self.drawBox(pEditor.domSelection);
                box.classList.add("hover"), self.makeSelection(box);
            }
            var target = pEditor.domSelection, $rows = $([]);
            $rows = $(target).is("body > *:has(.container,.container-fluid)") ? $(target).find(".container > .row, .container-fluid > .row") : $(target).is(".container,.container-fluid") ? $(target).children(".row") : $(target).is(".row") ? $(target).add($(target).parents(".row")) : $(target).closest(".row"), 
            self.drawBoxModel(target);
            pGridUtil.GRID_SELECTOR;
            $rows.each(function(i, o) {
                var b = self.drawBox(this, !0);
                self.makeGrid(b), target == this && (self.drawAddRowButton(this, !0), self.drawAddRowButton(this, !1)), 
                $(this).children(pGridUtil.CELL_SELECTOR).each(function() {
                    var b = self.drawBox(this, !0);
                    self.makeGrid(b), target == this && (self.drawAddButton(this, !0), self.drawAddButton(this, !1));
                });
            }), $(target).closest(pGridUtil.CELL_SELECTOR).each(function() {
                self.createResizer(this);
            }), $(target).parents("*:not(" + pGridUtil.GRID_SELECTOR + ",body, html)").each(function() {
                var s = matchingSnippet(this);
                if (s && s.group) {
                    var bb = self.drawBox(this);
                    return bb.classList.add("hover"), bb.classList.add("group"), bb.setAttributeNS(null, "stroke-width", 2 / pEditor.zoom), 
                    self.makeSelectable(bb, this), !1;
                }
            });
        }
    };
    xtag.register("p-overlay", {
        lifecycle: {
            created: function() {},
            inserted: function() {
                this.innerHTML = '<div class="wrapper" style="border: 20px">                          <svg xmlns="http://www.w3.org/2000/svg">                             <g class="overlay" ></g>                          </svg>                          <div class="drop-helpers"></div>                        </div>', 
                this.$wrapper = $(this).find(".wrapper"), this.$svg = $(this).find("svg"), this.$helpers = $(this).find(".drop-helpers");
                var self = this;
                self.init(), $(window).on("mouseenter", function(e) {
                    e.target.model || ("IFRAME" == e.target.tagName || "line" == e.target.tagName || "rect" == e.target.tagName || e.target instanceof SVGElement ? (self.updateSize(), 
                    self.show()) : self.hide());
                }), this.$context = $('<div id="overlayAdder" class="dropdown clearfix" style="z-index:1001">        <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu" style="display:block;position:static;margin-bottom:5px;">        </ul>        </div>'), 
                $(document.body).append(this.$context), this.$context.hide();
            }
        },
        accessors: {},
        methods: {
            hide: function() {
                this.$svg.find("*.move").remove();
            },
            show: function() {},
            init: function() {
                var self = this, pEditor = this.parentNode.parentNode;
                this.resizing = !1;
                var tabChangeHandler = function(e) {
                    pEditor && pEditor.contentDocument ? (self.updateSize(), self.draw()) : $(window).off("pTabChange", tabChangeHandler);
                };
                $(window).on("pTabChange", tabChangeHandler), $(pEditor).on("pStyleChange", function(e, i) {
                    i && "ok" == i.status && (self.updateSize(), self.draw());
                }), $(pEditor).on("pTabChange pDOMLoad pDOMChange pResolutionChange", function(e) {
                    self.updateSize(), self.draw();
                });
                var targetNode = pEditor.contentDocument, targetParent = this.parentNode.parentNode.contentDocument;
                pApp.isWeb() && navigator.userAgent.toLowerCase().indexOf("firefox") > -1 && (targetNode = pEditor._iframe.contentWindow, 
                targetParent = this.parentNode._iframe.contentWindow);
                targetNode.addEventListener("DOMCharacterDataModified", function() {
                    self.draw();
                }), $(window).on("resize", function(e) {
                    setTimeout(function() {
                        self.updateSize(), self.draw();
                    }, 10);
                }), $(pEditor).on("pThemeCompiled pDOMChange pDOMSelection", function(e) {
                    self.updateSize(), self.$svg.find(".selected").remove(), pEditor.domSelection && (updateOverlay.call(self, e), 
                    updateOverlayMove.call(self, e));
                }), targetNode.addEventListener("scroll", function(e) {
                    self.$wrapper.css("top", -pEditor.contentDocument.defaultView.pageYOffset);
                });
                targetNode.addEventListener("transitionend", function(e) {
                    self.resizing && updateOverlay.call(self);
                }, !0), targetNode.addEventListener("mousemove", function(e) {
                    self.resizing || updateOverlayMove.call(self, e);
                }, !0), targetParent.addEventListener("dragover", function(e) {
                    self.$svg.find("*:not(.selected)").fadeTo(200, 1), self.handleDrag(e), e.preventDefault();
                }), targetParent.addEventListener("drop", function(e) {
                    self.handleDrop(e, e.target, "after");
                }, !0);
            },
            box: function(rect) {
                var r = document.createElementNS("http://www.w3.org/2000/svg", "rect");
                return r.setAttributeNS(null, "width", rect.width), r.setAttributeNS(null, "height", rect.height), 
                r.setAttributeNS(null, "x", rect.left), r.setAttributeNS(null, "y", rect.top), r;
            },
            drawBoxModel: function(element) {
                var pt, pb, pl, self = this, rect = this.computeBox(element), cs = window.getComputedStyle(element), pr = (element.className, 
                !1);
                pt = {
                    left: rect.left + removeUnit(cs.paddingLeft),
                    top: rect.top,
                    width: rect.width - removeUnit(cs.paddingLeft) - removeUnit(cs.paddingRight),
                    height: cs.paddingTop
                }, pl = {
                    left: rect.left,
                    top: rect.top,
                    width: cs.paddingLeft,
                    height: rect.height
                }, pb = {
                    left: rect.left + removeUnit(cs.paddingLeft),
                    top: rect.top + rect.height - removeUnit(cs.paddingBottom),
                    width: rect.width - removeUnit(cs.paddingLeft) - removeUnit(cs.paddingRight),
                    height: cs.paddingBottom
                }, pr = {
                    left: rect.left + rect.width - removeUnit(cs.paddingRight),
                    top: rect.top,
                    width: cs.paddingRight,
                    height: rect.height
                }, $([ pt, pl, pr, pb ]).each(function() {
                    var boxPt = self.box(this);
                    boxPt.classList.add("hover"), boxPt.classList.add("padding"), self.$svg.append(boxPt);
                });
                var mt = {
                    left: rect.left,
                    top: rect.top - removeUnit(cs.marginTop),
                    width: rect.width,
                    height: cs.marginTop
                }, ml = {
                    left: rect.left - removeUnit(cs.marginLeft),
                    top: rect.top,
                    width: cs.marginLeft,
                    height: rect.height
                }, mb = {
                    left: rect.left,
                    top: rect.top + rect.height,
                    width: rect.width,
                    height: cs.marginBottom
                }, mr = {
                    left: rect.left + rect.width,
                    top: rect.top,
                    width: cs.marginRight,
                    height: rect.height
                };
                $([ mt, ml, mb, mr ]).each(function() {
                    var boxPt = self.box(this);
                    boxPt.classList.add("hover"), boxPt.classList.add("margin"), self.$svg.append(boxPt);
                });
            },
            createResizer: function(element, t) {
                var html, self = this, removeUnit = function(val) {
                    return val ? Number(val.replace("px", "")) : 0;
                };
                $(element).each(function(key, cell) {
                    var width = cell.getBoundingClientRect().width, bound = $(cell).offset();
                    bound.top = bound.top;
                    var p = element.parentNode, sp = window.getComputedStyle(p), height = p.getBoundingClientRect().height - removeUnit(sp.paddingTop) - removeUnit(sp.paddingBottom), leftResize = document.createElementNS("http://www.w3.org/2000/svg", "line");
                    leftResize.setAttributeNS(null, "x1", bound.left - 8), leftResize.setAttributeNS(null, "y1", bound.top), 
                    leftResize.setAttributeNS(null, "x2", bound.left - 8), leftResize.setAttributeNS(null, "y2", bound.top + height), 
                    leftResize.setAttributeNS(null, "stroke-width", 8), leftResize.setAttribute("pointer-events", "stroke"), 
                    leftResize.classList.add("hresize"), leftResize.classList.add("hover"), leftResize.classList.add("left"), 
                    leftResize._element = element, self.$svg.append(leftResize);
                    var lmouseuphandler = function(e) {
                        $(pEditor.contentDocument).off("mousemove"), $(pEditor.contentDocument).off("mouseup"), 
                        $(document).off("mouseup"), $(leftResize).off("mouseup"), pEditor.applyDOMModifications(function() {}, !1, html);
                    };
                    leftResize.addEventListener("mouseup", lmouseuphandler), leftResize.addEventListener("mousedown", function(e) {
                        html = pEditor.html, pEditor.domSelection = e.target._element;
                        var size = pGridUtil.getCellSize(pEditor.domSelection) + pGridUtil.getOffset(pEditor.domSelection), rect = pEditor.domSelection.getBoundingClientRect(), rectLeft = (Number(rect.left) - parseInt($(pEditor.domSelection).css("margin-left"))) * pEditor.zoom, colWidth = (rect.width + parseInt($(pEditor.domSelection).css("margin-left"))) * pEditor.zoom / size;
                        $(pEditor.contentDocument).on("mousemove", function(e) {
                            var pos = parseInt((e.pageX * pEditor.zoom - rectLeft) / colWidth);
                            pos > size - 1 && (pos = size - 1), pos < 0 && (pos = 0), pGridUtil.setCellSize(pEditor.domSelection, size - pos), 
                            pGridUtil.setOffset(pEditor.domSelection, pos);
                        }), $(document).on("mouseup", lmouseuphandler), $(pEditor.contentDocument).on("mouseup", function(e) {
                            lmouseuphandler();
                        });
                    }, !0);
                    var rigthResize = document.createElementNS("http://www.w3.org/2000/svg", "line");
                    rigthResize.setAttributeNS(null, "x1", bound.left + width), rigthResize.setAttributeNS(null, "y1", bound.top), 
                    rigthResize.setAttributeNS(null, "x2", bound.left + width), rigthResize.setAttributeNS(null, "y2", bound.top + height), 
                    rigthResize.setAttributeNS(null, "stroke-width", 8), rigthResize.setAttribute("pointer-events", "stroke"), 
                    rigthResize.classList.add("hresize"), rigthResize.classList.add("hover"), rigthResize.classList.add("right"), 
                    rigthResize._element = element, self.$svg.append(rigthResize);
                    var mouseuphandler = function(e) {
                        $(pEditor.contentDocument).off("mousemove"), $(pEditor.contentDocument).off("mouseup"), 
                        $(rigthResize).off("mouseup"), $(pEditor.domSelection).css("transition", ""), $(pEditor.domSelection).siblings().css("transition", ""), 
                        pEditor.applyDOMModifications(function() {}, !1, html), $(rigthResize).off("mouseup"), 
                        self.resizing = !1;
                    };
                    $(rigthResize).on("mouseup", mouseuphandler), rigthResize.addEventListener("mousedown", function(e) {
                        html = pEditor.html, self.resizing = !0, pEditor.domSelection = e.target._element, 
                        $(pEditor.domSelection).css("transition", "all 0.25s"), $(pEditor.domSelection).siblings().css("transition", "all 0.25s");
                        var $next = $(pEditor.domSelection).next(pGridUtil.CELL_SELECTOR), next = $next.length ? $next[0] : null, size = pGridUtil.getCellSize(pEditor.domSelection), rect = pEditor.domSelection.getBoundingClientRect(), freeCells = 12 - pGridUtil.getRowSize($(pEditor.domSelection).closest(pGridUtil.ROW_SELECTOR)[0]), rectLeft = (Number(rect.left) - parseInt($(pEditor.domSelection).css("margin-left"))) * pEditor.zoom;
                        if (next) {
                            next.getBoundingClientRect(), Number(rect.left), pEditor.zoom;
                            colWidth = (rectWidth = (rect.width + parseInt($(next).css("margin-left"))) * pEditor.zoom) / size;
                        } else {
                            var cellRect = pEditor.domSelection.parentNode.getBoundingClientRect(), rectWidth = (parseInt(cellRect.right) - parseInt(rect.left)) * pEditor.zoom, colWidth = rect.width * pEditor.zoom / size;
                            size = parseInt(rectWidth / colWidth);
                        }
                        $(pEditor.contentDocument).on("mousemove", function(e) {
                            var pos = parseInt((e.pageX * pEditor.zoom - rectLeft + 4) / colWidth);
                            pos > size + freeCells && (pos = size + freeCells), pos < 1 && (pos = 1), pGridUtil.setCellSize(pEditor.domSelection, pos);
                        }), $(pEditor.contentDocument).on("mouseup", mouseuphandler);
                    }, !0);
                });
            },
            updateSize: function() {
                pEditor && pEditor.contentDocument && (pEditor._updateZoom(), this.$svg.attr("width", pEditor.contentDocument.body.scrollWidth), 
                this.$svg.attr("height", pEditor.contentDocument.body.scrollHeight), this.$wrapper.attr("width", pEditor.contentDocument.body.scrollWidth), 
                this.$wrapper.attr("height", pEditor.contentDocument.body.scrollHeight));
            },
            draw: function() {},
            drawBox: function(element, prepend) {
                var rect = this.computeBox(element), r = document.createElementNS("http://www.w3.org/2000/svg", "rect");
                return r.setAttributeNS(null, "width", rect.width), r.setAttributeNS(null, "height", rect.height), 
                r.setAttributeNS(null, "x", rect.left), r.setAttributeNS(null, "y", rect.top), r.setAttributeNS(null, "fill", "transparent"), 
                r.setAttributeNS(null, "stroke-width", 2), r._element = element, prepend ? this.$svg.prepend(r) : this.$svg.append(r), 
                r;
            },
            drawButton: function(element, e, s) {
                if (e.clientX && element) {
                    var s = matchingSnippet(element), rect = this.computeBox(element);
                    e.target instanceof SVGElement ? (rect.left = e.offsetX + pEditor.contentDocument.defaultView.scrollX, 
                    rect.top = e.offsetY + 50 / pEditor.zoom) : (rect.top = e.clientY + pEditor.contentDocument.defaultView.scrollY + 50 / pEditor.zoom, 
                    rect.left = e.clientX);
                    var g = document.createElementNS("http://www.w3.org/2000/svg", "g");
                    g._element = element, g.classList.add("label"), g.classList.add("node-label"), g.classList.add("move");
                    var r = document.createElementNS("http://www.w3.org/2000/svg", "rect");
                    r.setAttributeNS(null, "x", rect.left), r.setAttributeNS(null, "y", rect.top - 20 / pEditor.zoom), 
                    r.setAttributeNS(null, "height", 20 / pEditor.zoom), g.appendChild(r);
                    var t = document.createElementNS("http://www.w3.org/2000/svg", "text");
                    return t.setAttributeNS(null, "x", rect.left + 5), t.setAttributeNS(null, "y", rect.top - 8), 
                    t.style.fontSize = 12 / pEditor.zoom + "px", t.textContent = s ? s.title : element.tagName, 
                    g.appendChild(t), this.$svg.append(g), r.setAttributeNS(null, "width", t.getBBox().width + 10), 
                    t.setAttributeNS(null, "x", rect.left - t.getBBox().width / 2 + 5), r.setAttributeNS(null, "x", rect.left - t.getBBox().width / 2), 
                    g;
                }
            },
            drawGridButton: function(element) {
                var self = this, rect = this.computeBox(element), g = document.createElementNS("http://www.w3.org/2000/svg", "g");
                g._element = element, g.classList.add("label"), g.classList.add("grid-label"), g.classList.add("hover"), 
                g.addEventListener("mousemove", function(e) {
                    var box = self.drawBox(element);
                    box.classList.add("highlight"), box.classList.add("highlight-grid"), e.preventDefault();
                }), g.addEventListener("mousedown", function(e) {
                    pEditor.domSelection = element, pEditor._iframe.contentWindow.focus(), e.preventDefault();
                });
                var top = rect.top - 12, left = rect.left + rect.width / 2 - 12;
                top < 14 && (top = 14), left < 0 && (left = 0);
                var r = document.createElementNS("http://www.w3.org/2000/svg", "rect");
                r.setAttributeNS(null, "y", top), r.setAttributeNS(null, "x", left), r.setAttributeNS(null, "width", 38), 
                r.setAttributeNS(null, "height", 28), g.appendChild(r);
                var t = document.createElementNS("http://www.w3.org/2000/svg", "text");
                return t.setAttributeNS(null, "x", left), t.setAttributeNS(null, "y", top), t.setAttributeNS(null, "letter-spacing", "2"), 
                t.style.fontSize = "14px", $(element).is(pGridUtil.CELL_SELECTOR) ? t.textContent = "col" : $(element).is(pGridUtil.ROW_SELECTOR) && (t.textContent = "row"), 
                g.appendChild(t), this.$svg.append(g), this.makeSelectable(g), g;
            },
            drawAddRowButton: function(element, after, l) {
                var rect = this.computeBox(element), g = document.createElementNS("http://www.w3.org/2000/svg", "g");
                g._element = element, g.classList.add("label"), g.classList.add("add-label"), g.classList.add("hover"), 
                g.addEventListener("mousedown", function(e) {
                    pEditor.domSelection = element, pCommands.execute("pcmd_clone"), pEditor._iframe.contentWindow.focus(), 
                    e.preventDefault();
                });
                var top = after ? rect.top + rect.height : rect.top;
                top < 14 && (top = 14);
                var body = element.ownerDocument.body, html = element.ownerDocument.documentElement, height = Math.max(body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight);
                top > height && (top = height - 28);
                var left = rect.left + rect.width / 2, r = document.createElementNS("http://www.w3.org/2000/svg", "circle");
                r.setAttributeNS(null, "cy", top), r.setAttributeNS(null, "cx", left), r.setAttributeNS(null, "r", 14), 
                g.appendChild(r);
                var t = document.createElementNS("http://www.w3.org/2000/svg", "text");
                return t.setAttributeNS(null, "x", left - 4), t.setAttributeNS(null, "y", top + 4), 
                t.setAttributeNS(null, "letter-spacing", "2"), t.style.fontSize = "14px", t.textContent = "+", 
                g.appendChild(t), this.$svg.append(g), g;
            },
            drawAddButton: function(element, after, t) {
                var rect = this.computeBox(element), g = document.createElementNS("http://www.w3.org/2000/svg", "g");
                g._element = element, g.classList.add("label"), g.classList.add("add-label"), g.classList.add("hover"), 
                g.addEventListener("mousedown", function(e) {
                    pEditor.domSelection = element, pCommands.execute("pcmd_clone"), pEditor._iframe.contentWindow.focus(), 
                    e.preventDefault();
                });
                var top = rect.top + rect.height / 2, left = after ? rect.left + rect.width : rect.left;
                left < 0 && (left = 0);
                var body = element.ownerDocument.body, html = element.ownerDocument.documentElement;
                left > Math.max(body.scrollWidth, body.offsetWidth, html.clientWidth, html.scrollWidth, html.offsetWidth) - 28 && (left -= 28);
                var r = document.createElementNS("http://www.w3.org/2000/svg", "circle");
                return r.setAttributeNS(null, "cy", top), r.setAttributeNS(null, "cx", left), r.setAttributeNS(null, "r", 14), 
                g.appendChild(r), (t = document.createElementNS("http://www.w3.org/2000/svg", "text")).setAttributeNS(null, "x", left - 4), 
                t.setAttributeNS(null, "y", top + 4), t.setAttributeNS(null, "letter-spacing", "2"), 
                t.style.fontSize = "14px", t.textContent = "+", g.appendChild(t), this.$svg.append(g), 
                g;
            },
            makeSelection: function(box) {
                box.classList.add("selected");
            },
            makeSectionAdder: function(element, e) {
                $(element).is("body > *") || (element = $(element).closest("body > *")[0]);
                var rect = this.computeBox(element);
                if (e.pageY - pEditor.contentDocument.defaultView.scrollY - element.getBoundingClientRect().top > rect.height / 2) {
                    var r = document.createElementNS("http://www.w3.org/2000/svg", "rect");
                    r.classList.add("section-adder"), r.classList.add("move"), r.setAttributeNS(null, "height", "6px"), 
                    $(r).css("transition", "all 0.5s"), r.setAttributeNS(null, "width", rect.width), 
                    r.setAttributeNS(null, "x", 0), r.setAttributeNS(null, "y", rect.top + rect.height);
                    var b = document.createElementNS("http://www.w3.org/2000/svg", "polygon"), p1 = [ rect.left + rect.width / 2 - 60, rect.top + rect.height ], p2 = [ rect.left + rect.width / 2, rect.top + rect.height + 60 ], p3 = [ rect.left + rect.width / 2 + 60, rect.top + rect.height ];
                    b.classList.add("section-adder-btn"), b.classList.add("left"), b.classList.add("move"), 
                    b.setAttributeNS(null, "points", p1[0] + "," + p1[1] + " " + p2[0] + "," + p2[1] + " " + p3[0] + "," + p3[1]);
                    var l = document.createElementNS("http://www.w3.org/2000/svg", "text");
                    l.setAttributeNS(null, "x", rect.left + rect.width / 2 - 10), l.setAttributeNS(null, "y", rect.top + rect.height + 35), 
                    l.style.fontSize = 22 / pEditor.zoom + "px", l.style.color = "white", l.textContent = "+", 
                    l.classList.add("section-adder-label"), l.classList.add("move"), r.addEventListener("mouseover", function() {
                        r.setAttributeNS(null, "height", "60px");
                    });
                    r.addEventListener("mouseenter", function(e) {
                        var $n = $(element).next();
                        $n.length && (nextTransform = $n.css("transform"), $n.css("transform", "translateY(150px)"), 
                        $n.css("transition", "all 0.5s")), $(window).one("mouseleave", function() {
                            nextTransform && $(element).next().css("transform", nextTransform);
                        });
                    }), r.addEventListener("click", function() {
                        pEditor.domSelection = element;
                        var $compile = angular.element(document.body).injector().get("$compile"), $rootScope = angular.element(document.body).injector().get("$rootScope");
                        $(document.body).append($compile("<p-section-chooser></p-section-chooser>")($rootScope));
                    }), r._element = element;
                    e.pageY, pEditor.contentDocument.defaultView.scrollY, element.getBoundingClientRect().top;
                    r.classList.add("flipped");
                }
                return this.$svg.append(r), this.$svg.append(b), this.$svg.append(l), r;
            },
            highlight: function(el) {
                if (this.$svg.find(".highlight").remove(), el) {
                    var rect = this.computeBox(el), h = this.box(rect);
                    h.classList.add("highlight"), $(el).is(pGridUtil.GRID_SELECTOR) && el != pEditor.domSelection && h.classList.add("highlight-grid"), 
                    this.$svg.append(h);
                }
            },
            makeHighlight: function(box, e) {
                box.classList.add("hover"), box.classList.add("highlight"), $(box._element).is(pGridUtil.CELL_SELECTOR) && box._element != pEditor.domSelection && box.classList.add("highlight-grid");
            },
            makeGrid: function(box) {
                $(box._element).is(pGridUtil.CELL_SELECTOR) && box.classList.add("column"), $(box._element).is(pGridUtil.SECTION_SELECTOR) ? box.setAttributeNS(null, "stroke-width", 2.5 / pEditor.zoom) : box.setAttributeNS(null, "stroke-width", .5 / pEditor.zoom), 
                box.classList.add("grid"), box.classList.add("hover"), this.makeSelectable(box, box._element);
            },
            makeSelectable: function(box, el) {
                var self = this;
                matchingSnippet(el);
                box.addEventListener("mousemove", function(e) {
                    self.$svg.find(".move").remove(), box.classList.add("selected");
                    var s = matchingSnippet(box._element);
                    self.drawButton(el, e, s);
                }), box.addEventListener("click", function(e) {
                    pEditor.domSelection = box._element;
                });
            },
            drag: function(val) {
                this._drag = val;
            },
            findInsertionHelper: function(element, position) {
                var ret = !1;
                return this._$helpers.children().each(function(k, node) {
                    if (node._target == element && node._position == position) return ret = node, !1;
                }), ret;
            },
            handleDrop: function(e, target, position) {
                if (e.preventDefault(), e.dataTransfer.files.length > 0) {
                    for (var i = 0; i < e.dataTransfer.files.length; i++) {
                        var file = e.dataTransfer.files[i];
                        "text/html" != file.type && "text/php" != file.type || angular.element(document.body).injector().get("pingendo").openEditor(file.path);
                    }
                    return !1;
                }
                var $h = this.$helpers.find(".active");
                if ($h.length) {
                    var h = $h[0];
                    target = h._target, position = h._position ? h._position : position;
                    var parent = pEditor._draggedNodes[0].parentNode;
                    pEditor.handleInsert(pEditor._draggedNodes[0], target, position);
                    var s = matchingSnippet(pEditor._draggedNodes[0]);
                    s && s.deleteHelper && parent && s.deleteHelper(pEditor._draggedNodes[0], parent), 
                    this.$helpers.empty(), pEditor.domSelection = pEditor._draggedNodes[0];
                }
            },
            handleDrag: function(e) {
                if (!this.lastX || e.screenX != this.lastX || !this.lastY || e.screenY != this.lastY) {
                    this.lastX = e.screenX, this.lastY = e.screenY, this._drag || (this._drag = !0, 
                    this.drawInsertionHelper()), this.$helpers.find("> *:not(.grid)").remove();
                    var target = pEditor.fixOver(e), dragged = pEditor._draggedNodes[0];
                    if (target != dragged && !$.contains(dragged, target)) {
                        var s = matchingSnippet(pEditor._draggedNodes[0]);
                        if ($(target).is(pElements.containerSelector) && 0 == target.children.length) if (s.fixInsertionPoint) {
                            if (s.fixInsertionPoint({
                                target: target,
                                position: "inside"
                            }).position == inside) h = this.createInsertionHelper(target, "inside");
                        } else var h = this.createInsertionHelper(target, "inside"); else {
                            $(target.parentNode).is(pElements.containerSelector) || (target = pEditor.fixGroup(target));
                            var point = {
                                target: target,
                                position: ""
                            };
                            s && s.fixInsertionPoint && (point = s.fixInsertionPoint(point));
                            pEditor.contentDocument.defaultView.getComputedStyle(point.target);
                            e.pageY - pEditor.contentDocument.defaultView.scrollY - point.target.getBoundingClientRect().top > point.target.getBoundingClientRect().height / 2 ? point.position = "after" : point.position = "before", 
                            (h = this.createInsertionHelper(point.target, point.position)).classList.add("active"), 
                            h.style.pointerEvents = "none !important", $(target).one("dragleave", function() {
                                $(h).remove();
                            });
                        }
                        this.$helpers.prepend(h);
                    }
                }
            },
            drawInsertionHelper: function() {
                if (0 != matchingSnippet(pEditor._draggedNodes[0]).hasInsertionHelper) {
                    for (var doc = pEditor.contentDocument.documentElement, node = pEditor._draggedNodes[0], self = this, rows = doc.querySelectorAll(".row"), x = 0; x < rows.length; x++) {
                        var row = rows[x];
                        $.contains(node, row) || (pGridUtil.getRowSize(row) < 12 && self.$helpers.append(self.createInsertionHelperOnRow(row)), 
                        $(row).prev().is(".row") || self.$helpers.append(self.createInsertionHelper(row, "before")), 
                        self.$helpers.append(self.createInsertionHelper(row, "after")));
                    }
                    for (var cells = pEditor.contentDocument.documentElement.querySelectorAll(pGridUtil.CELL_SELECTOR), x = 0; x < cells.length; x++) {
                        var cell = cells[x];
                        $.contains(node, cell) || (pGridUtil.hasOffset(cell) && self.$helpers.append(self.createInsertionOnOffset(cell)), 
                        $(cell).prev().is(pGridUtil.CELL_SELECTOR) || self.$helpers.append(self.createInsertionHelper(cell, "left")), 
                        x != cells.length - 1 && self.$helpers.append(self.createInsertionHelper(cell, "right")));
                    }
                    self.$helpers.find("> div").addClass("grid");
                }
            },
            createInsertionHelperOnRow: function(element) {
                var self = this, rowRect = this.computeBox(element), $lastCol = $(element).children().last();
                if ($lastCol.length) colRect = this.computeBox($lastCol[0]); else var colRect = {
                    left: 0,
                    width: 0
                };
                var line = document.createElement("div");
                return line.style.position = "absolute", line.style.top = rowRect.top + "px", line.style.left = colRect.left + colRect.width + "px", 
                line.style.height = rowRect.height + "px", line.style.width = Number(rowRect.left + rowRect.width - (colRect.left + colRect.width)) + "px", 
                line.classList.add("insertion-helper"), line.classList.add("insertion-helper-offset"), 
                $lastCol.length > 0 ? (line._target = $lastCol[0], line._position = "after") : (line._target = element, 
                line._position = "inside"), line.addEventListener("dragover", function(e) {
                    return self.$helpers.find(".active").removeClass("active"), e.target.classList.add("active"), 
                    e.preventDefault(), !0;
                }), line.addEventListener("dragleave", function(e) {
                    return self.$helpers.find(".active").removeClass("active"), e.preventDefault(), 
                    !0;
                }), line.addEventListener("drop", function(e) {
                    self.handleDrop(e, e.target._target, e.target._position);
                }), line;
            },
            createInsertionOnOffset: function(element) {
                var self = this, rect = this.computeBox(element), line = document.createElement("div");
                line.style.position = "absolute";
                $(element).is(pGridUtil.CELL_SELECTOR);
                var ml = window.getComputedStyle(element).getPropertyValue("margin-left");
                return ml = Number(ml.replace("px", "")), line.style.top = rect.top + "px", line.style.left = rect.left - ml + "px", 
                line.style.height = rect.height + "px", line.style.width = ml + "px", line._target = element, 
                line.classList.add("insertion-helper"), line.classList.add("insertion-helper-offset"), 
                line.addEventListener("dragover", function(e) {
                    return self.$helpers.find(".active").removeClass("active"), e.target.classList.add("active"), 
                    e.preventDefault(), !0;
                }), line.addEventListener("dragleave", function(e) {
                    return self.$helpers.find(".active").removeClass("active"), e.preventDefault(), 
                    !0;
                }), line.addEventListener("drop", function(e) {
                    self.handleDrop(e, e.target._target, "before");
                }), line;
            },
            createInsertionHelper: function(element, position) {
                var self = this, rect = this.computeBox(element), line = document.createElement("div");
                line.style.position = "absolute";
                var isCell = $(element).is(pGridUtil.CELL_SELECTOR);
                return isCell && "after" == position ? position = "right" : isCell && "before" == position && (position = "left"), 
                "after" == position ? (line.style.top = Number(rect.top + rect.height - 3 / pEditor.zoom) + "px", 
                line.style.left = Number(rect.left) + "px", line.style.height = Number(6 / pEditor.zoom) + "px", 
                line.style.width = rect.width + "px") : "before" == position ? (line.style.top = Number(rect.top - 3 / pEditor.zoom) + "px", 
                line.style.left = rect.left + "px", line.style.height = Number(6 / pEditor.zoom) + "px", 
                line.style.width = rect.width + "px") : "right" == position ? (line.style.top = rect.top + "px", 
                line.style.left = Number(rect.left + rect.width - 3 / pEditor.zoom) + "px", line.style.height = rect.height + "px", 
                line.style.width = Number(6 / pEditor.zoom) + "px") : "left" == position ? (line.style.top = rect.top + "px", 
                line.style.left = Number(rect.left - 3 / pEditor.zoom) + "px", line.style.height = rect.height + "px", 
                line.style.width = Number(6 / pEditor.zoom) + "px") : "inside" == position && (line.style.top = rect.top + "px", 
                line.style.left = rect.left + "px", line.style.height = rect.height + "px", line.style.width = rect.width + "px"), 
                line._target = element, line._position = position, line.classList.add("insertion-helper"), 
                line.addEventListener("dragover", function(e) {
                    return self.$helpers.find(".active").removeClass("active"), e.target.classList.add("active"), 
                    e.preventDefault(), !0;
                }), line.addEventListener("dragleave", function(e) {
                    return self.$helpers.find(".active").removeClass("active"), e.preventDefault(), 
                    !0;
                }), line.addEventListener("drop", function(e) {
                    self.handleDrop(e, e.target._target, e.target._position);
                }), line;
            },
            computeBox: function(element) {
                if (element) {
                    var rect = $(element).offset();
                    rect.width = element.getBoundingClientRect().width, rect.height = element.getBoundingClientRect().height;
                    window.getComputedStyle(element);
                    return rect;
                }
            }
        }
    });
}(), angular.module("p-directives").directive("ngOnload", function($parse) {
    return {
        restrict: "A",
        compile: function($element, attr) {
            var fn = $parse(attr.ngOnload);
            return function(scope, element, attr) {
                element.on("load", function(e) {
                    scope.$apply(function() {
                        fn(scope, {
                            event: e
                        });
                    });
                });
            };
        }
    };
}), app.controller("SectionsModalController", [ "$scope", "$element", "close", function($scope, $element, close) {
    $scope.variant = "wireframe", $scope.filter = "all", $scope.$watch("filter", function(val) {
        $element.find("iframe").contents().find("[data-kind]").each(function() {
            console.log("data", $(this).data("kind")), $(this).data("kind") == val || "all" == val ? $(this).show() : $(this).hide();
        });
    }), $scope.photo = function(variant) {
        function replaceImg(img) {
            var src = $(img).attr("src").split("/");
            src[5] = variant, $(img).attr("src", src.join("/"));
        }
        $scope.variant = variant;
        $element.find("iframe").contents().find("[src^='https://pingendo.com/assets/photos/'").each(function() {
            replaceImg(this);
        }), $element.find("iframe").contents().find(".cover").each(function(k, v) {
            if (v.style.backgroundImage) {
                var src = v.style.backgroundImage.split("/");
                src[5] = variant, v.style.backgroundImage = src.join("/");
            }
        });
    }, $scope.resize = function(frame) {
        var h = 0;
        $(frame).contents().find("body > *").each(function(k, v) {
            h += $(v).height();
        }), $(frame).css("height", h), $(frame).parent().css("height", h / 2.75 + "px");
    }, $scope.init = function(e) {
        console.log("INIT");
        var $h = $(e.target).contents().find("head");
        $h.empty(), $h.append($(pEditor.contentDocument.head).children().clone()), $scope.resize(e.target), 
        function(target) {
            $(target).contents().find("link, img").one("load", function() {
                $scope.resize(target);
            });
        }(e.target), $element.find("iframe").contents().find("body > *").click(function(e) {
            close(e.target.outerHTML);
        });
    };
} ]), app.controller("ModalController", [ "$scope", "$compile", function($scope, $compile) {
    this.pageResources = [], $scope.textarevalue = "", $scope.error = "true", this.addChoiceHandler = function(choise) {
        if (choise.href) newChoise = $("<link rel=stylesheet href='" + choise.href + "'>"); else var newChoise = $(choise);
        var found = !1;
        if (this.getAvailables().each(function(index) {
            $(this).attr("href") == choise.href && (found = !0);
        }), !found) {
            var self = this;
            setTimeout(function() {
                pEditor.applyDOMModifications(function() {
                    pEditor.$realHead.append(newChoise.get(0));
                }), self.setPageResources(function() {
                    self.textarea = null, $scope.$apply();
                });
            }, 1);
        }
    }, this.toogleMode = function() {
        "resources" == this.mode ? this.mode = "textarea" : this.mode = "resources";
    }, this.deleteAvaible = function(resource) {
        var self = this;
        setTimeout(function() {
            pEditor.applyDOMModifications(function() {
                pEditor.$realHead.find("link[href='" + resource.href + "']").remove();
            }), self.setPageResources(), $scope.$apply();
        }, 1);
    }, this.add = function(result) {
        close(result), $(".modal-backdrop").remove();
    }, this.onload = function(s, event) {
        var self = this;
        this.p1 = new Promise(function(resolve, reject) {
            self.setPageResources(resolve, reject);
        }), Promise.all([ this.p1 ]).then(function() {
            $scope.$apply(function() {
                self.loading = !1, $compile($(event.target).contents())($scope);
            });
        });
    }, $scope.validate = function(newVal) {
        $scope.error = !$scope.checkifAddValid(newVal);
    };
} ]), app.controller("ModalFontawesomeController", [ "$controller", "$scope", "$sce", "close", function($controller, $scope, $sce, close) {
    angular.extend(this, $controller("ModalController", {
        $scope: $scope
    })), this.pasteMessage = null, this.pastePlaceholder = null, this.pasteButton = null, 
    $scope.action = function(icon) {
        close(icon), $(".modal-backdrop").remove();
    }, this.choices = [ {
        name: "4.7.0/css/font-awesome.min.css",
        href: "https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    } ], this.relatedLink = "http://fontawesome.io/icons/", this.getAvailables = function() {
        return pEditor.$realHead.find("link[rel=stylesheet][href*='font-awesome']");
    }, this.checkifAddValid = function(value) {
        return $(value).is("link[rel=stylesheet][href*='font-awesome']");
    }, this.setPageResources = function(resolve, reject) {
        this.loading = !0;
        var parseCss = function(text) {
            for (var match, regex = /\.([\w-]+):before\s*{\s*content:\s*(["']\\\w+["']);*\s*}/gm, arrayIcon = []; match = regex.exec(text); ) arrayIcon.push({
                value: match[1],
                html: $sce.trustAsHtml('<i class="fa-4x fa ' + match[1] + ' " aria-hidden="true"></i><br/>' + match[1].replace("fa-", ""))
            });
            return arrayIcon;
        }, $links = this.getAvailables(), self = ($links.length, this), arrayPromise = [];
        self.pageResources = [], self.loadedResources = [], $links.each(function(index) {
            var stylesheet = $(this);
            arrayPromise.push(new Promise(function(resolveP, rejectP) {
                fetch(stylesheet.attr("href"), {
                    credentials: "omit"
                }).then(function(res) {
                    200 == res.status && res.text().then(function(data) {
                        stylesheet.name = stylesheet.attr("href").replace("https://cdnjs.cloudflare.com/ajax/libs/font-awesome/", ""), 
                        self.pageResources.push({
                            colSize: "col-2",
                            name: stylesheet.name,
                            href: stylesheet.attr("href"),
                            values: chunk(parseCss(data).sort(function(a, b) {
                                return a.value < b.value ? -1 : a.value > b.value ? 1 : 0;
                            }), 6)
                        }), self.loadedResources.push({
                            name: stylesheet.name,
                            href: stylesheet.attr("href")
                        }), resolveP();
                    });
                });
            }));
        }), 0 == arrayPromise.length && (self.loading = !1), Promise.all(arrayPromise).then(function() {
            self.loading = !1, self.fa = !0, resolve && resolve();
        });
    };
} ]), app.controller("ModalGooglefontController", [ "$controller", "$scope", "$sce", "close", function($controller, $scope, $sce, close) {
    angular.extend(this, $controller("ModalController", {
        $scope: $scope
    }));
    var self = this;
    this.pasteMessage = $sce.trustAsHtml("Search on <a class='text-x' href='https://fonts.google.com/' target='_blank'>Google Fonts</a> and paste the name"), 
    this.pastePlaceholder = "Lato", this.pasteButton = "Add from Google Fonts", this.choices = [ {
        name: "Lato",
        href: "https://fonts.googleapis.com/css?family=Lato"
    }, {
        name: "Cardo",
        href: "https://fonts.googleapis.com/css?family=Cardo"
    }, {
        name: "Droid Sans",
        href: "https://fonts.googleapis.com/css?family=Droid+Sans"
    }, {
        name: "Roboto",
        href: "https://fonts.googleapis.com/css?family=Roboto"
    }, {
        name: "Droid Serif",
        href: "https://fonts.googleapis.com/css?family=Droid+Serif"
    }, {
        name: "Gentium Book Basic",
        href: "https://fonts.googleapis.com/css?family=Gentium+Book+Basic"
    }, {
        name: "Gravitas One",
        href: "https://fonts.googleapis.com/css?family=Gravitas+One"
    }, {
        name: "Kaushan Script",
        href: "https://fonts.googleapis.com/css?family=Kaushan+Script"
    }, {
        name: "Kotta One",
        href: "https://fonts.googleapis.com/css?family=Kotta+One"
    }, {
        name: "Lancelot",
        href: "https://fonts.googleapis.com/css?family=Lancelot"
    }, {
        name: "Lobster Two",
        href: "https://fonts.googleapis.com/css?family=Lobster+Two"
    }, {
        name: "Merriweather",
        href: "https://fonts.googleapis.com/css?family=Merriweather"
    }, {
        name: "Neuton",
        href: "https://fonts.googleapis.com/css?family=Neuton"
    }, {
        name: "Noticia Text",
        href: "https://fonts.googleapis.com/css?family=Noticia+Text"
    }, {
        name: "Old Standard TT",
        href: "https://fonts.googleapis.com/css?family=Old+Standard+TT"
    }, {
        name: "Open Sans",
        href: "https://fonts.googleapis.com/css?family=Open+Sans"
    }, {
        name: "Oswald",
        href: "https://fonts.googleapis.com/css?family=Oswald"
    }, {
        name: "Source Sans Pro",
        href: "https://fonts.googleapis.com/css?family=Source+Sans+Pro"
    }, {
        name: "Stencil Std",
        href: "https://fonts.googleapis.com/css?family=Stencil+Std"
    }, {
        name: "Vollkorn",
        href: "https://fonts.googleapis.com/css?family=Vollkorn"
    }, {
        name: "Volkhov",
        href: "https://fonts.googleapis.com/css?family=Volkhov"
    }, {
        name: "Ultra",
        href: "https://fonts.googleapis.com/css?family=Ultra"
    }, {
        name: "Macondo",
        href: "https://fonts.googleapis.com/css?family=Macondo"
    } ], this.relatedLink = "https://fonts.googleapis.com", this.getAvailables = function() {
        var t = pEditor.themeSupport.getTheme();
        if (!t) return [];
        var res = [];
        return $(t.model).each(function(k, v) {
            var p = /^'https:\/\/fonts.googleapis.com\/css\?family=([a-zA-Z0-9\s]+)'/g;
            if (v.match) {
                var r = p.exec(v);
                r && r.length >= 2 && res.push(r[1]);
            }
        }), res;
    }, $scope.action = function(icon) {
        close(icon), $(".modal-backdrop").remove();
    }, $scope.checkifAddValid = function(value) {
        return !0;
    }, this.deleteAvaible = function(resource) {
        var inImport, importStart, deleteStart, deleteEnd, self = this, t = pEditor.themeSupport.getTheme();
        $(t.model).each(function(k, v) {
            if ("@import" == v && (inImport = !0, importStart = k), inImport) {
                var r = /^'https:\/\/fonts.googleapis.com\/css\?family=([a-zA-Z0-9\s]+)'/g.exec(v);
                r && 2 == r.length && r[1] == resource.name && (deleteStart = importStart);
            }
            if (inImport && ";" == v && deleteStart) return deleteEnd = k, !1;
            inImport && ";" == v && (inImport = !1);
        }), deleteStart && deleteEnd && (t.model.splice(deleteStart, deleteEnd - deleteStart), 
        self.setPageResources(), pEditor.themeSupport.serialize());
    }, this.addChoiceHandler = function(choice) {
        var name = choice.name ? choice.name : choice, t = pEditor.themeSupport.getTheme();
        $(t.model).each(function(k, v) {
            if ("var" == v.type || "@import" == v) return t.model.splice(k, 0, "@import url("), 
            t.model.splice(k + 1, 0, "'https://fonts.googleapis.com/css?family=" + name + "'"), 
            t.model.splice(k + 2, 0, "); \r\n"), !1;
        }), pEditor.themeSupport.serialize(), self.setPageResources(function() {
            setTimeout(function() {
                $scope.$apply();
            }, 100);
        });
    }, this.setPageResources = function(resolve, reject) {
        var $links = this.getAvailables();
        $links.length;
        self.loadedResources = [], self.pageResources = [];
        for (var arrayFonts = Array(), i = 0; i < $links.length; i++) {
            var name = $links[i];
            arrayFonts.push({
                value: name,
                html: $sce.trustAsHtml('<link rel="stylesheet" href=" ' + $($links[i]).attr("href") + '" type="text/css"><h6>' + name + '</h6><h2 style="font-family: ' + name + ' ">Lorem ipsum dolor sit amet</h2>')
            }), self.loadedResources.push({
                name: $links[i],
                href: ""
            });
        }
        self.pageResources.push({
            colSize: "col-12",
            name: "Google fonts",
            href: "",
            values: chunk(arrayFonts, 1)
        });
        var webSafeFonts = [ {
            name: "Bootstrap 4 default"
        }, {
            name: "Georgia, serif"
        }, {
            name: "'Palatino Linotype', 'Book Antiqua', Palatino, serif"
        }, {
            name: '"Times New Roman", Times, serif'
        }, {
            name: "Arial, Helvetica, sans-serif"
        }, {
            name: "'Comic Sans MS', cursive, sans-serif"
        }, {
            name: "Impact, Charcoal, sans-serif"
        }, {
            name: "Tahoma, Geneva, sans-serif"
        }, {
            name: "'Trebuchet MS', Helvetica, sans-serif"
        }, {
            name: "Verdana, Geneva, sans-serif"
        }, {
            name: "'Courier New', Courier, monospace"
        }, {
            name: "'Lucida Console', Monaco, monospace"
        } ];
        arrayFonts = Array();
        for (i = 0; i < webSafeFonts.length; i++) 0 == i ? arrayFonts.push({
            value: "-apple-system, system-ui, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif",
            html: $sce.trustAsHtml("<h6>" + webSafeFonts[i].name + "</h6><h2 style=\"font-family:-apple-system, system-ui, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif \">Lorem ipsum dolor sit amet</h2>")
        }) : arrayFonts.push({
            value: webSafeFonts[i].name,
            html: $sce.trustAsHtml("<h6>" + webSafeFonts[i].name + '</h6><h2 style="font-family: ' + webSafeFonts[i].name + ' ">Lorem ipsum dolor sit amet</h2>')
        });
        self.pageResources.push({
            colSize: "col-12",
            name: "System fonts",
            href: "",
            values: chunk(arrayFonts, 1)
        }), resolve && resolve();
    };
} ]);

var htmlTidyWorkerBlob = URL.createObjectURL(new Blob([ "(", function() {
    var window = {};
    !function() {
        function a(a) {
            return a.replace(/^\s+/g, "");
        }
        function b(a) {
            return a.replace(/\s+$/g, "");
        }
        function c(a, b) {
            var d, c = {};
            for (d in a) d !== b && (c[d] = a[d]);
            if (b in a) for (d in a[b]) c[d] = a[b][d];
            return c;
        }
        function f(f, g, h, i) {
            var j, k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z, A, B, C, D;
            for (void 0 !== (g = c(g = g || {}, "html")).wrap_line_length && 0 !== parseInt(g.wrap_line_length, 10) || void 0 === g.max_char || 0 === parseInt(g.max_char, 10) || (g.wrap_line_length = g.max_char), 
            k = void 0 !== g.indent_inner_html && g.indent_inner_html, l = void 0 === g.indent_body_inner_html || g.indent_body_inner_html, 
            m = void 0 === g.indent_head_inner_html || g.indent_head_inner_html, n = void 0 === g.indent_size ? 4 : parseInt(g.indent_size, 10), 
            o = void 0 === g.indent_char ? " " : g.indent_char, q = void 0 === g.brace_style ? "collapse" : g.brace_style, 
            p = 0 === parseInt(g.wrap_line_length, 10) ? 32786 : parseInt(g.wrap_line_length || 250, 10), 
            r = g.unformatted || [ "a", "abbr", "area", "audio", "b", "bdi", "bdo", "br", "button", "canvas", "cite", "code", "data", "datalist", "del", "dfn", "em", "embed", "i", "iframe", "img", "input", "ins", "kbd", "keygen", "label", "map", "mark", "math", "meter", "noscript", "object", "output", "progress", "q", "ruby", "s", "samp", "select", "small", "span", "strong", "sub", "sup", "svg", "template", "textarea", "time", "u", "var", "video", "wbr", "text", "acronym", "address", "big", "dt", "ins", "strike", "tt" ], 
            s = g.content_unformatted || [ "pre" ], t = void 0 === g.preserve_newlines || g.preserve_newlines, 
            u = t ? isNaN(parseInt(g.max_preserve_newlines, 10)) ? 32786 : parseInt(g.max_preserve_newlines, 10) : 0, 
            v = void 0 !== g.indent_handlebars && g.indent_handlebars, w = void 0 === g.wrap_attributes ? "auto" : g.wrap_attributes, 
            x = isNaN(parseInt(g.wrap_attributes_indent_size, 10)) ? n : parseInt(g.wrap_attributes_indent_size, 10), 
            y = "force" === w.substr(0, "force".length), z = "force-expand-multiline" === w, 
            A = "force-aligned" === w, B = void 0 !== g.end_with_newline && g.end_with_newline, 
            C = "object" == typeof g.extra_liners && g.extra_liners ? g.extra_liners.concat() : "string" == typeof g.extra_liners ? g.extra_liners.split(",") : "head,body,/html".split(","), 
            D = g.eol ? g.eol : "auto", g.indent_with_tabs && (o = "\t", n = 1), "auto" === D && (D = "\n", 
            f && d.test(f || "") && (D = f.match(d)[0])), D = D.replace(/\\r/, "\r").replace(/\\n/, "\n"), 
            f = f.replace(e, "\n"), (j = new function() {
                function c(a) {
                    var b = "";
                    return {
                        add: function(c) {
                            var d = b + c.toLowerCase();
                            b = d.length <= a.length ? d : d.substr(d.length - a.length, a.length);
                        },
                        doesNotMatch: function() {
                            return -1 === b.indexOf(a);
                        }
                    };
                }
                return this.pos = 0, this.token = "", this.current_mode = "CONTENT", this.tags = {
                    parent: "parent1",
                    parentcount: 1,
                    parent1: ""
                }, this.tag_type = "", this.token_text = this.last_token = this.last_text = this.token_type = "", 
                this.newlines = 0, this.indent_content = k, this.indent_body_inner_html = l, this.indent_head_inner_html = m, 
                this.Utils = {
                    whitespace: "\n\r\t ".split(""),
                    single_token: [ "area", "base", "br", "col", "embed", "hr", "img", "input", "keygen", "link", "menuitem", "meta", "param", "source", "track", "wbr", "!doctype", "?xml", "?php", "basefont", "isindex" ],
                    extra_liners: C,
                    in_array: function(a, b) {
                        for (var c = 0; c < b.length; c++) if (a === b[c]) return !0;
                        return !1;
                    }
                }, this.is_whitespace = function(a) {
                    for (var b = 0; b < a.length; b++) if (!this.Utils.in_array(a.charAt(b), this.Utils.whitespace)) return !1;
                    return !0;
                }, this.traverse_whitespace = function() {
                    var a = "";
                    if (a = this.input.charAt(this.pos), this.Utils.in_array(a, this.Utils.whitespace)) {
                        for (this.newlines = 0; this.Utils.in_array(a, this.Utils.whitespace); ) t && "\n" === a && this.newlines <= u && (this.newlines += 1), 
                        this.pos++, a = this.input.charAt(this.pos);
                        return !0;
                    }
                    return !1;
                }, this.space_or_wrap = function(a) {
                    return this.line_char_count >= this.wrap_line_length ? (this.print_newline(!1, a), 
                    this.print_indentation(a), !0) : (this.line_char_count++, a.push(" "), !1);
                }, this.get_content = function() {
                    for (var a = "", b = [], c = 0; "<" !== this.input.charAt(this.pos) || 2 === c; ) {
                        if (this.pos >= this.input.length) return b.length ? b.join("") : [ "", "TK_EOF" ];
                        if (c < 2 && this.traverse_whitespace()) this.space_or_wrap(b); else {
                            if (a = this.input.charAt(this.pos), v) {
                                if ("{" === a ? c += 1 : c < 2 && (c = 0), "}" === a && c > 0 && 0 == c--) break;
                                var d = this.input.substr(this.pos, 3);
                                if ("{{#" === d || "{{/" === d) break;
                                if ("{{!" === d) return [ this.get_tag(), "TK_TAG_HANDLEBARS_COMMENT" ];
                                if ("{{" === this.input.substr(this.pos, 2) && "{{else}}" === this.get_tag(!0)) break;
                            }
                            this.pos++, this.line_char_count++, b.push(a);
                        }
                    }
                    return b.length ? b.join("") : "";
                }, this.get_contents_to = function(a) {
                    if (this.pos === this.input.length) return [ "", "TK_EOF" ];
                    var b = "", c = new RegExp("</" + a + "\\s*>", "igm");
                    c.lastIndex = this.pos;
                    var d = c.exec(this.input), e = d ? d.index : this.input.length;
                    return this.pos < e && (b = this.input.substring(this.pos, e), this.pos = e), b;
                }, this.record_tag = function(a) {
                    this.tags[a + "count"] ? (this.tags[a + "count"]++, this.tags[a + this.tags[a + "count"]] = this.indent_level) : (this.tags[a + "count"] = 1, 
                    this.tags[a + this.tags[a + "count"]] = this.indent_level), this.tags[a + this.tags[a + "count"] + "parent"] = this.tags.parent, 
                    this.tags.parent = a + this.tags[a + "count"];
                }, this.retrieve_tag = function(a) {
                    if (this.tags[a + "count"]) {
                        for (var b = this.tags.parent; b && a + this.tags[a + "count"] !== b; ) b = this.tags[b + "parent"];
                        b && (this.indent_level = this.tags[a + this.tags[a + "count"]], this.tags.parent = this.tags[b + "parent"]), 
                        delete this.tags[a + this.tags[a + "count"] + "parent"], delete this.tags[a + this.tags[a + "count"]], 
                        1 === this.tags[a + "count"] ? delete this.tags[a + "count"] : this.tags[a + "count"]--;
                    }
                }, this.indent_to_tag = function(a) {
                    if (this.tags[a + "count"]) {
                        for (var b = this.tags.parent; b && a + this.tags[a + "count"] !== b; ) b = this.tags[b + "parent"];
                        b && (this.indent_level = this.tags[a + this.tags[a + "count"]]);
                    }
                }, this.get_tag = function(a) {
                    var h, j, n, b = "", c = [], d = "", e = !1, f = !0, g = !1, k = this.pos, l = this.line_char_count, m = !1;
                    a = void 0 !== a && a;
                    do {
                        if (this.pos >= this.input.length) return a && (this.pos = k, this.line_char_count = l), 
                        c.length ? c.join("") : [ "", "TK_EOF" ];
                        if (b = this.input.charAt(this.pos), this.pos++, this.Utils.in_array(b, this.Utils.whitespace)) e = !0; else {
                            if ("'" !== b && '"' !== b || (b += this.get_unformatted(b), e = !0), "=" === b && (e = !1), 
                            n = this.input.substr(this.pos - 1), !z || !g || m || ">" !== b && "/" !== b || n.match(/^\/?\s*>/) && (e = !1, 
                            m = !0, this.print_newline(!1, c), this.print_indentation(c)), c.length && "=" !== c[c.length - 1] && ">" !== b && e) {
                                var p = this.space_or_wrap(c) && "/" !== b && !y;
                                if (e = !1, y && "/" !== b) {
                                    var q = !1;
                                    z && f && (q = !(null !== n.match(/^\S*(="([^"]|\\")*")?\s*\/?\s*>/))), f && !q || (this.print_newline(!1, c), 
                                    this.print_indentation(c), p = !0);
                                }
                                if (p) {
                                    g = !0;
                                    var u = x;
                                    A && (u = c.indexOf(" ") + 1);
                                    for (var w = 0; w < u; w++) c.push(" ");
                                }
                                if (f) for (var B = 0; B < c.length; B++) if (" " === c[B]) {
                                    f = !1;
                                    break;
                                }
                            }
                            if (v && "<" === j && b + this.input.charAt(this.pos) === "{{" && (b += this.get_unformatted("}}"), 
                            c.length && " " !== c[c.length - 1] && "<" !== c[c.length - 1] && (b = " " + b), 
                            e = !0), "<" !== b || j || (h = this.pos - 1, j = "<"), v && !j && c.length >= 2 && "{" === c[c.length - 1] && "{" === c[c.length - 2] && (h = "#" === b || "/" === b || "!" === b ? this.pos - 3 : this.pos - 2, 
                            j = "{"), this.line_char_count++, c.push(b), c[1] && ("!" === c[1] || "?" === c[1] || "%" === c[1])) {
                                c = [ this.get_comment(h) ];
                                break;
                            }
                            if (v && c[1] && "{" === c[1] && c[2] && "!" === c[2]) {
                                c = [ this.get_comment(h) ];
                                break;
                            }
                            if (v && "{" === j && c.length > 2 && "}" === c[c.length - 2] && "}" === c[c.length - 1]) break;
                        }
                    } while (">" !== b);
                    var D, E, C = c.join("");
                    D = -1 !== C.indexOf(" ") ? C.indexOf(" ") : -1 !== C.indexOf("\n") ? C.indexOf("\n") : "{" === C.charAt(0) ? C.indexOf("}") : C.indexOf(">"), 
                    E = "<" !== C.charAt(0) && v ? "#" === C.charAt(2) ? 3 : 2 : 1;
                    var F = C.substring(E, D).toLowerCase();
                    return "/" === C.charAt(C.length - 2) || this.Utils.in_array(F, this.Utils.single_token) ? a || (this.tag_type = "SINGLE") : v && "{" === C.charAt(0) && "else" === F ? a || (this.indent_to_tag("if"), 
                    this.tag_type = "HANDLEBARS_ELSE", this.indent_content = !0, this.traverse_whitespace()) : this.is_unformatted(F, r) || this.is_unformatted(F, s) ? (d = this.get_unformatted("</" + F + ">", C), 
                    c.push(d), this.pos, this.tag_type = "SINGLE") : "script" === F && (-1 === C.search("type") || C.search("type") > -1 && C.search(/\b(text|application|dojo)\/(x-)?(javascript|ecmascript|jscript|livescript|(ld\+)?json|method|aspect)/) > -1) ? a || (this.record_tag(F), 
                    this.tag_type = "SCRIPT") : "style" === F && (-1 === C.search("type") || C.search("type") > -1 && C.search("text/css") > -1) ? a || (this.record_tag(F), 
                    this.tag_type = "STYLE") : "!" === F.charAt(0) ? a || (this.tag_type = "SINGLE", 
                    this.traverse_whitespace()) : a || ("/" === F.charAt(0) ? (this.retrieve_tag(F.substring(1)), 
                    this.tag_type = "END") : (this.record_tag(F), "html" !== F.toLowerCase() && (this.indent_content = !0), 
                    this.tag_type = "START"), this.traverse_whitespace() && this.space_or_wrap(c), this.Utils.in_array(F, this.Utils.extra_liners) && (this.print_newline(!1, this.output), 
                    this.output.length && "\n" !== this.output[this.output.length - 2] && this.print_newline(!0, this.output))), 
                    a && (this.pos = k, this.line_char_count = l), c.join("");
                }, this.get_comment = function(a) {
                    var b = "", c = ">", d = !1;
                    this.pos = a;
                    var e = this.input.charAt(this.pos);
                    for (this.pos++; this.pos <= this.input.length && ((b += e).charAt(b.length - 1) !== c.charAt(c.length - 1) || -1 === b.indexOf(c)); ) !d && b.length < 10 && (0 === b.indexOf("<![if") ? (c = "<![endif]>", 
                    d = !0) : 0 === b.indexOf("<![cdata[") ? (c = "]]>", d = !0) : 0 === b.indexOf("<![") ? (c = "]>", 
                    d = !0) : 0 === b.indexOf("\x3c!--") ? (c = "--\x3e", d = !0) : 0 === b.indexOf("{{!--") ? (c = "--}}", 
                    d = !0) : 0 === b.indexOf("{{!") ? 5 === b.length && -1 === b.indexOf("{{!--") && (c = "}}", 
                    d = !0) : 0 === b.indexOf("<?") ? (c = "?>", d = !0) : 0 === b.indexOf("<%") && (c = "%>", 
                    d = !0)), e = this.input.charAt(this.pos), this.pos++;
                    return b;
                }, this.get_unformatted = function(a, b) {
                    if (b && -1 !== b.toLowerCase().indexOf(a)) return "";
                    var d = "", e = "", f = !0, g = c(a);
                    do {
                        if (this.pos >= this.input.length) return e;
                        if (d = this.input.charAt(this.pos), this.pos++, this.Utils.in_array(d, this.Utils.whitespace)) {
                            if (!f) {
                                this.line_char_count--;
                                continue;
                            }
                            if ("\n" === d || "\r" === d) {
                                e += "\n", this.line_char_count = 0;
                                continue;
                            }
                        }
                        e += d, g.add(d), this.line_char_count++, f = !0, v && "{" === d && e.length && "{" === e.charAt(e.length - 2) && (e += this.get_unformatted("}}"));
                    } while (g.doesNotMatch());
                    return e;
                }, this.get_token = function() {
                    var a;
                    if ("TK_TAG_SCRIPT" === this.last_token || "TK_TAG_STYLE" === this.last_token) {
                        var b = this.last_token.substr(7);
                        return "string" != typeof (a = this.get_contents_to(b)) ? a : [ a, "TK_" + b ];
                    }
                    return "CONTENT" === this.current_mode ? "string" != typeof (a = this.get_content()) ? a : [ a, "TK_CONTENT" ] : "TAG" === this.current_mode ? "string" != typeof (a = this.get_tag()) ? a : [ a, "TK_TAG_" + this.tag_type ] : void 0;
                }, this.get_full_indent = function(a) {
                    return (a = this.indent_level + a || 0) < 1 ? "" : Array(a + 1).join(this.indent_string);
                }, this.is_unformatted = function(a, b) {
                    if (!this.Utils.in_array(a, b)) return !1;
                    if ("a" !== a.toLowerCase() || !this.Utils.in_array("a", b)) return !0;
                    var d = (this.get_tag(!0) || "").match(/^\s*<\s*\/?([a-z]*)\s*[^>]*>\s*$/);
                    return !(d && !this.Utils.in_array(d, b));
                }, this.printer = function(c, d, e, f, g) {
                    this.input = c || "", this.input = this.input.replace(/\r\n|[\r\u2028\u2029]/g, "\n"), 
                    this.output = [], this.indent_character = d, this.indent_string = "", this.indent_size = e, 
                    this.brace_style = g, this.indent_level = 0, this.wrap_line_length = f, this.line_char_count = 0;
                    for (var h = 0; h < this.indent_size; h++) this.indent_string += this.indent_character;
                    this.print_newline = function(a, c) {
                        this.line_char_count = 0, c && c.length && (a || "\n" !== c[c.length - 1]) && ("\n" !== c[c.length - 1] && (c[c.length - 1] = b(c[c.length - 1])), 
                        c.push("\n"));
                    }, this.print_indentation = function(a) {
                        for (var b = 0; b < this.indent_level; b++) a.push(this.indent_string), this.line_char_count += this.indent_string.length;
                    }, this.print_token = function(b) {
                        this.is_whitespace(b) && !this.output.length || ((b || "" !== b) && this.output.length && "\n" === this.output[this.output.length - 1] && (this.print_indentation(this.output), 
                        b = a(b)), this.print_token_raw(b));
                    }, this.print_token_raw = function(a) {
                        this.newlines > 0 && (a = b(a)), a && "" !== a && (a.length > 1 && "\n" === a.charAt(a.length - 1) ? (this.output.push(a.slice(0, -1)), 
                        this.print_newline(!1, this.output)) : this.output.push(a));
                        for (var c = 0; c < this.newlines; c++) this.print_newline(c > 0, this.output);
                        this.newlines = 0;
                    }, this.indent = function() {
                        this.indent_level++;
                    }, this.unindent = function() {
                        this.indent_level > 0 && this.indent_level--;
                    };
                }, this;
            }()).printer(f, o, n, p, q); ;) {
                var F = j.get_token();
                if (j.token_text = F[0], j.token_type = F[1], "TK_EOF" === j.token_type) break;
                switch (j.token_type) {
                  case "TK_TAG_START":
                    j.print_newline(!1, j.output), j.print_token(j.token_text), j.indent_content && (!j.indent_body_inner_html && j.token_text.match(/<body(?:.*)>/) || !j.indent_head_inner_html && j.token_text.match(/<head(?:.*)>/) || j.indent(), 
                    j.indent_content = !1), j.current_mode = "CONTENT";
                    break;

                  case "TK_TAG_STYLE":
                  case "TK_TAG_SCRIPT":
                    j.print_newline(!1, j.output), j.print_token(j.token_text), j.current_mode = "CONTENT";
                    break;

                  case "TK_TAG_END":
                    if ("TK_CONTENT" === j.last_token && "" === j.last_text) {
                        var G = (j.token_text.match(/\w+/) || [])[0], H = null;
                        j.output.length && (H = j.output[j.output.length - 1].match(/(?:<|{{#)\s*(\w+)/)), 
                        (null === H || H[1] !== G && !j.Utils.in_array(H[1], r)) && j.print_newline(!1, j.output);
                    }
                    j.print_token(j.token_text), j.current_mode = "CONTENT";
                    break;

                  case "TK_TAG_SINGLE":
                    var I = j.token_text.match(/^\s*<([a-z-]+)/i);
                    I && j.Utils.in_array(I[1], r) || j.print_newline(!1, j.output), j.print_token(j.token_text), 
                    j.current_mode = "CONTENT";
                    break;

                  case "TK_TAG_HANDLEBARS_ELSE":
                    for (var J = !1, K = j.output.length - 1; K >= 0 && "\n" !== j.output[K]; K--) if (j.output[K].match(/{{#if/)) {
                        J = !0;
                        break;
                    }
                    J || j.print_newline(!1, j.output), j.print_token(j.token_text), j.indent_content && (j.indent(), 
                    j.indent_content = !1), j.current_mode = "CONTENT";
                    break;

                  case "TK_TAG_HANDLEBARS_COMMENT":
                  case "TK_CONTENT":
                    j.print_token(j.token_text), j.current_mode = "TAG";
                    break;

                  case "TK_STYLE":
                  case "TK_SCRIPT":
                    if ("" !== j.token_text) {
                        j.print_newline(!1, j.output);
                        var M, L = j.token_text, N = 1;
                        "TK_SCRIPT" === j.token_type ? M = "function" == typeof h && h : "TK_STYLE" === j.token_type && (M = "function" == typeof i && i), 
                        "keep" === g.indent_scripts ? N = 0 : "separate" === g.indent_scripts && (N = -j.indent_level);
                        var O = j.get_full_indent(N);
                        if (M) {
                            var P = function() {
                                this.eol = "\n";
                            };
                            P.prototype = g;
                            var Q = new P();
                            L = M(L.replace(/^\s*/, O), Q);
                        } else {
                            var S = L.match(/^\s*/)[0].match(/[^\n\r]*$/)[0].split(j.indent_string).length - 1, T = j.get_full_indent(N - S);
                            L = L.replace(/^\s*/, O).replace(/\r\n|\r|\n/g, "\n" + T).replace(/\s+$/, "");
                        }
                        L && (j.print_token_raw(L), j.print_newline(!0, j.output));
                    }
                    j.current_mode = "TAG";
                    break;

                  default:
                    "" !== j.token_text && j.print_token(j.token_text);
                }
                j.last_token = j.token_type, j.last_text = j.token_text;
            }
            var U = j.output.join("").replace(/[\r\n\t ]+$/, "");
            return B && (U += "\n"), "\n" !== D && (U = U.replace(/[\n]/g, D)), U;
        }
        var d = /\r\n|[\n\r\u2028\u2029]/, e = new RegExp(d.source, "g");
        if ("function" == typeof define && define.amd) define([ "require", "./beautify", "./beautify-css" ], function(a) {
            var b = a("./beautify"), c = a("./beautify-css");
            return {
                html_beautify: function(a, d) {
                    return f(a, d, b.js_beautify, c.css_beautify);
                }
            };
        }); else if ("undefined" != typeof exports) {
            var g = require("./beautify.js"), h = require("./beautify-css.js");
            exports.html_beautify = function(a, b) {
                return f(a, b, g.js_beautify, h.css_beautify);
            };
        } else void 0 !== window ? window.html_beautify = function(a, b) {
            return f(a, b, window.js_beautify, window.css_beautify);
        } : "undefined" != typeof global && (global.html_beautify = function(a, b) {
            return f(a, b, global.js_beautify, global.css_beautify);
        });
    }(), function() {
        function a(a, b) {
            var d, c = {};
            for (d in a) d !== b && (c[d] = a[d]);
            if (b in a) for (d in a[b]) c[d] = a[b][d];
            return c;
        }
        function d(e, f) {
            function t() {
                return (r = e.charAt(++q)) || "";
            }
            function u(a) {
                var b = "", c = q;
                return a && x(), b = e.charAt(q + 1) || "", q = c - 1, t(), b;
            }
            function v(a) {
                for (var b = q; t(); ) if ("\\" === r) t(); else {
                    if (-1 !== a.indexOf(r)) break;
                    if ("\n" === r) break;
                }
                return e.substring(b, q + 1);
            }
            function x(a) {
                for (var b = 0; p.test(u()); ) t(), "\n" === r && a && j && (I.newLine(!0), b++);
                return g = b, b;
            }
            function z(a) {
                var b = q;
                for (a = "/" === u(), t(); t(); ) {
                    if (!a && "*" === r && "/" === u()) {
                        t();
                        break;
                    }
                    if (a && "\n" === r) return e.substring(b, q);
                }
                return e.substring(b, q) + r;
            }
            function A(a) {
                return e.substring(q - a.length, q).toLowerCase() === a;
            }
            f = a(f = f || {}, "css"), e = e || "";
            var g = 0, h = f.indent_size ? parseInt(f.indent_size, 10) : 4, i = f.indent_char || " ", j = void 0 !== f.preserve_newlines && f.preserve_newlines, k = void 0 === f.selector_separator_newline || f.selector_separator_newline, l = void 0 !== f.end_with_newline && f.end_with_newline, m = void 0 === f.newline_between_rules || f.newline_between_rules, n = void 0 !== f.space_around_combinator && f.space_around_combinator;
            n = n || void 0 !== f.space_around_selector_separator && f.space_around_selector_separator;
            var o = f.eol ? f.eol : "auto";
            f.indent_with_tabs && (i = "\t", h = 1), "auto" === o && (o = "\n", e && b.test(e || "") && (o = e.match(b)[0])), 
            o = o.replace(/\\r/, "\r").replace(/\\n/, "\n");
            var r, p = /^\s+$/, q = -1, s = 0, C = (e = e.replace(c, "\n")).match(/^[\t ]*/)[0], D = new Array(h + 1).join(i), E = 0, F = 0, I = {};
            I["{"] = function(a) {
                I.singleSpace(), J.push(a), x(!0) || I.newLine();
            }, I["}"] = function(a) {
                a && I.newLine(), J.push("}"), x(!0) || I.newLine();
            }, I._lastCharWhitespace = function() {
                return p.test(J[J.length - 1]);
            }, I.newLine = function(a) {
                J.length && (a || "\n" === J[J.length - 1] ? J[J.length - 1] === C && J.pop() : I.trim(), 
                J.push("\n"), C && J.push(C));
            }, I.singleSpace = function() {
                J.length && !I._lastCharWhitespace() && J.push(" ");
            }, I.preserveSingleSpace = function() {
                Q && I.singleSpace();
            }, I.trim = function() {
                for (;I._lastCharWhitespace(); ) J.pop();
            };
            for (var J = [], K = !1, L = !1, M = !1, N = "", O = ""; ;) {
                var P = function() {
                    var a = "";
                    for (r && p.test(r) && (a = r); p.test(t()); ) a += r;
                    return a;
                }(), Q = "" !== P, R = -1 !== P.indexOf("\n");
                if (O = N, N = r, !r) break;
                if ("/" === r && "*" === u()) {
                    var S = 0 === E;
                    (R || S) && I.newLine(), J.push(z()), I.newLine(), S && I.newLine(!0);
                } else if ("/" === r && "/" === u()) R || "{" === O || I.trim(), I.singleSpace(), 
                J.push(z()), I.newLine(); else if ("@" === r) if (I.preserveSingleSpace(), "{" === u()) J.push(v("}")); else {
                    J.push(r);
                    var T = function(a) {
                        var b = q, c = v(a);
                        return q = b - 1, t(), c;
                    }(": ,;{}()[]/='\"");
                    T.match(/[ :]$/) && (t(), T = v(": ").replace(/\s$/, ""), J.push(T), I.singleSpace()), 
                    (T = T.replace(/\s$/, "")) in d.NESTED_AT_RULE && (F += 1, T in d.CONDITIONAL_GROUP_RULE && (M = !0));
                } else "#" === r && "{" === u() ? (I.preserveSingleSpace(), J.push(v("}"))) : "{" === r ? "}" === u(!0) ? (x(), 
                t(), I.singleSpace(), J.push("{"), I["}"](!1), g < 2 && m && 0 === E && I.newLine(!0)) : (E++, 
                C += D, I["{"](r), M ? (M = !1, K = E > F) : K = E >= F) : "}" === r ? (E--, C = C.slice(0, -h), 
                I["}"](!0), K = !1, L = !1, F && F--, g < 2 && m && 0 === E && I.newLine(!0)) : ":" === r ? (x(), 
                !K && !M || A("&") || function() {
                    for (var a = 0, b = q + 1; b < e.length; b++) {
                        var c = e.charAt(b);
                        if ("{" === c) return !0;
                        if ("(" === c) a += 1; else if (")" === c) {
                            if (0 === a) return !1;
                            a -= 1;
                        } else if (";" === c || "}" === c) return !1;
                    }
                    return !1;
                }() || A("(") ? (A(" ") && " " !== J[J.length - 1] && J.push(" "), ":" === u() ? (t(), 
                J.push("::")) : J.push(":")) : (J.push(":"), L || (L = !0, I.singleSpace()))) : '"' === r || "'" === r ? (I.preserveSingleSpace(), 
                J.push(v(r))) : ";" === r ? (L = !1, J.push(r), x(!0) || I.newLine()) : "(" === r ? A("url") ? (J.push(r), 
                x(), t() && (")" !== r && '"' !== r && "'" !== r ? J.push(v(")")) : q--)) : (s++, 
                I.preserveSingleSpace(), J.push(r), x()) : ")" === r ? (J.push(r), s--) : "," === r ? (J.push(r), 
                !x(!0) && k && !L && s < 1 ? I.newLine() : I.singleSpace()) : (">" === r || "+" === r || "~" === r) && !L && s < 1 ? n ? (I.singleSpace(), 
                J.push(r), I.singleSpace()) : (J.push(r), x(), r && p.test(r) && (r = "")) : "]" === r ? J.push(r) : "[" === r ? (I.preserveSingleSpace(), 
                J.push(r)) : "=" === r ? (x(), J.push("="), p.test(r) && (r = "")) : (I.preserveSingleSpace(), 
                J.push(r));
            }
            var U = "";
            return C && (U += C), U += J.join("").replace(/[\r\n\t ]+$/, ""), l && (U += "\n"), 
            "\n" !== o && (U = U.replace(/[\n]/g, o)), U;
        }
        var b = /\r\n|[\n\r\u2028\u2029]/, c = new RegExp(b.source, "g");
        d.NESTED_AT_RULE = {
            "@page": !0,
            "@font-face": !0,
            "@keyframes": !0,
            "@media": !0,
            "@supports": !0,
            "@document": !0
        }, d.CONDITIONAL_GROUP_RULE = {
            "@media": !0,
            "@supports": !0,
            "@document": !0
        }, "function" == typeof define && define.amd ? define([], function() {
            return {
                css_beautify: d
            };
        }) : "undefined" != typeof exports ? exports.css_beautify = d : void 0 !== window ? window.css_beautify = d : "undefined" != typeof global && (global.css_beautify = d);
    }(), onmessage = function(oEvent) {
        var task = JSON.parse(oEvent.data);
        task.html = window.html_beautify(task.html, {
            indent_size: 2,
            preserve_newlines: !1,
            unformatted: [ "abbr", "area", "audio", "b", "bdi", "bdo", "canvas", "cite", "code", "data", "datalist", "del", "dfn", "em", "embed", "i", "ins", "kbd", "keygen", "label", "map", "mark", "math", "meter", "noscript", "object", "output", "progress", "q", "ruby", "samp", "select", "small", "span", "strong", "sub", "sup", "svg", "template", "textarea", "time", "var", "video", "wbr", "text", "acronym", "address", "dt", "ins", "strike", "tt" ]
        }), postMessage(JSON.stringify(task));
    };
}.toString(), ")()" ], {
    type: "application/javascript"
}));

!function() {
    var htmlSelectionWorkerBlob = URL.createObjectURL(new Blob([ "(", function() {
        var CodeMirror = {};
        ({}).CodeMirror = {}, function() {
            "use strict";
            function t(t) {
                return t.split(/\r?\n|\r/);
            }
            function r(t) {
                this.pos = this.start = 0, this.string = t, this.lineStart = 0;
            }
            r.prototype = {
                eol: function() {
                    return this.pos >= this.string.length;
                },
                sol: function() {
                    return 0 == this.pos;
                },
                peek: function() {
                    return this.string.charAt(this.pos) || null;
                },
                next: function() {
                    return this.pos < this.string.length ? this.string.charAt(this.pos++) : void 0;
                },
                eat: function(t) {
                    var r = this.string.charAt(this.pos);
                    if ("string" == typeof t) e = r == t; else var e = r && (t.test ? t.test(r) : t(r));
                    return e ? (++this.pos, r) : void 0;
                },
                eatWhile: function(t) {
                    for (var r = this.pos; this.eat(t); ) ;
                    return this.pos > r;
                },
                eatSpace: function() {
                    for (var t = this.pos; /[\s\u00a0]/.test(this.string.charAt(this.pos)); ) ++this.pos;
                    return this.pos > t;
                },
                skipToEnd: function() {
                    this.pos = this.string.length;
                },
                skipTo: function(t) {
                    var r = this.string.indexOf(t, this.pos);
                    return r > -1 ? (this.pos = r, !0) : void 0;
                },
                backUp: function(t) {
                    this.pos -= t;
                },
                column: function() {
                    return this.start - this.lineStart;
                },
                indentation: function() {
                    return 0;
                },
                match: function(t, r, e) {
                    if ("string" != typeof t) {
                        var n = this.string.slice(this.pos).match(t);
                        return n && n.index > 0 ? null : (n && !1 !== r && (this.pos += n[0].length), n);
                    }
                    var i = function(t) {
                        return e ? t.toLowerCase() : t;
                    };
                    return i(this.string.substr(this.pos, t.length)) == i(t) ? (!1 !== r && (this.pos += t.length), 
                    !0) : void 0;
                },
                current: function() {
                    return this.string.slice(this.start, this.pos);
                },
                hideFirstChars: function(t, r) {
                    this.lineStart += t;
                    try {
                        return r();
                    } finally {
                        this.lineStart -= t;
                    }
                }
            }, CodeMirror.StringStream = r, CodeMirror.startState = function(t, r, e) {
                return !t.startState || t.startState(r, e);
            };
            var e = CodeMirror.modes = {}, n = CodeMirror.mimeModes = {};
            CodeMirror.defineMode = function(t, r) {
                arguments.length > 2 && (r.dependencies = Array.prototype.slice.call(arguments, 2)), 
                e[t] = r;
            }, CodeMirror.defineMIME = function(t, r) {
                n[t] = r;
            }, CodeMirror.resolveMode = function(t) {
                return "string" == typeof t && n.hasOwnProperty(t) ? t = n[t] : t && "string" == typeof t.name && n.hasOwnProperty(t.name) && (t = n[t.name]), 
                "string" == typeof t ? {
                    name: t
                } : t || {
                    name: "null"
                };
            }, CodeMirror.getMode = function(t, r) {
                r = CodeMirror.resolveMode(r);
                var n = e[r.name];
                if (!n) throw new Error("Unknown mode: " + r);
                return n(t, r);
            }, CodeMirror.registerHelper = CodeMirror.registerGlobalHelper = Math.min, CodeMirror.defineMode("null", function() {
                return {
                    token: function(t) {
                        t.skipToEnd();
                    }
                };
            }), CodeMirror.defineMIME("text/plain", "null"), CodeMirror.runMode = function(r, e, n, i) {
                var o = CodeMirror.getMode({
                    indentUnit: 2
                }, e);
                if (1 == n.nodeType) {
                    var s = i && i.tabSize || 4, a = n, h = 0;
                    a.innerHTML = "", n = function(t, r) {
                        if ("\n" == t) return a.appendChild(document.createElement("br")), void (h = 0);
                        for (var e = "", n = 0; ;) {
                            var i = t.indexOf("  ", n);
                            if (-1 == i) {
                                e += t.slice(n), h += t.length - n;
                                break;
                            }
                            h += i - n, e += t.slice(n, i);
                            var o = s - h % s;
                            h += o;
                            for (var u = 0; o > u; ++u) e += " ";
                            n = i + 1;
                        }
                        if (r) {
                            var d = a.appendChild(document.createElement("span"));
                            d.className = "cm-" + r.replace(/ +/g, " cm-"), d.appendChild(document.createTextNode(e));
                        } else a.appendChild(document.createTextNode(e));
                    };
                }
                for (var u = t(r), d = i && i.state || CodeMirror.startState(o), c = 0, l = u.length; l > c; ++c) {
                    c && n("\n");
                    var p = new CodeMirror.StringStream(u[c]);
                    for (!p.string && o.blankLine && o.blankLine(d); !p.eol(); ) {
                        var f = o.token(p, d);
                        n(p.current(), f, c, p.start, d), p.start = p.pos;
                    }
                }
            };
        }();
        !function(t) {
            "object" == typeof exports && "object" == typeof module ? t(require("../../lib/codemirror")) : "function" == typeof define && define.amd ? define([ "../../lib/codemirror" ], t) : t(CodeMirror);
        }(function(t) {
            "use strict";
            t.defineMode("xml", function(e, n) {
                function r(t, e) {
                    function n(n) {
                        return e.tokenize = n, n(t, e);
                    }
                    var r = t.next();
                    if ("<" == r) {
                        if (t.eat("!")) return t.eat("[") ? t.match("CDATA[") ? n(i("atom", "]]>")) : null : t.match("--") ? n(i("comment", "--\x3e")) : t.match("DOCTYPE", !0, !0) ? (t.eatWhile(/[\w\._\-]/), 
                        n(l(1))) : null;
                        if (t.eat("?")) return t.eatWhile(/[\w\._\-]/), e.tokenize = i("meta", "?>"), "meta";
                        var a = t.eat("/");
                        w = "";
                        for (var u; u = t.eat(/[^\s\u00a0=<>\"\'\/?]/); ) w += u;
                        return T.caseFold && (w = w.toLowerCase()), w ? ("openTag" == (z = a ? "closeTag" : "openTag") && (e._last || (e._last = 0), 
                        e._stack || (e._stack = []), e._current || (e._current = 0)), e.tokenize = o, "tag") : "tag error";
                    }
                    if ("&" == r) {
                        return (t.eat("#") ? t.eat("x") ? t.eatWhile(/[a-fA-F\d]/) && t.eat(";") : t.eatWhile(/[\d]/) && t.eat(";") : t.eatWhile(/[\w\.\-:]/) && t.eat(";")) ? "atom" : "error";
                    }
                    return t.eatWhile(/[^&<]/), null;
                }
                function o(t, e) {
                    var n = t.next();
                    if (">" == n || "/" == n && t.eat(">")) return e.tokenize = r, z = ">" == n ? "endTag" : "selfcloseTag", 
                    "tag";
                    if ("=" == n) return z = "equals", null;
                    if ("<" == n) {
                        e.tokenize = r, e.state = s, e.tagName = e.tagStart = null;
                        var o = e.tokenize(t, e);
                        return o ? o + " error" : "error";
                    }
                    return /[\'\"]/.test(n) ? (e.tokenize = a(n), e.stringStartCol = t.column(), e.tokenize(t, e)) : (t.eatWhile(/[^\s\u00a0=<>\"\']/), 
                    "word");
                }
                function a(t) {
                    var e = function(e, n) {
                        for (;!e.eol(); ) if (e.next() == t) {
                            n.tokenize = o;
                            break;
                        }
                        return "string";
                    };
                    return e.isInAttribute = !0, e;
                }
                function i(t, e) {
                    return function(n, o) {
                        for (;!n.eol(); ) {
                            if (n.match(e)) {
                                o.tokenize = r;
                                break;
                            }
                            n.next();
                        }
                        return t;
                    };
                }
                function l(t) {
                    return function(e, n) {
                        for (var o; null != (o = e.next()); ) {
                            if ("<" == o) return n.tokenize = l(t + 1), n.tokenize(e, n);
                            if (">" == o) {
                                if (1 == t) {
                                    n.tokenize = r;
                                    break;
                                }
                                return n.tokenize = l(t - 1), n.tokenize(e, n);
                            }
                        }
                        return "meta";
                    };
                }
                function u(t, e, n) {
                    this.prev = t.context, this.tagName = e, this.indent = t.indented, this.startOfLine = n, 
                    (T.doNotIndent.hasOwnProperty(e) || t.context && t.context.noIndent) && (this.noIndent = !0);
                }
                function c(t) {
                    t.context && (t.context = t.context.prev);
                }
                function d(t, e) {
                    for (var n; ;) {
                        if (!t.context) return;
                        if (n = t.context.tagName, !T.contextGrabbers.hasOwnProperty(n) || !T.contextGrabbers[n].hasOwnProperty(e)) return;
                        c(t);
                    }
                }
                function s(t, e, n) {
                    if ("openTag" == t) return n.context && n.context.prev, n.tagName = w, n.tagStart = e.column(), 
                    g;
                    if ("closeTag" == t) {
                        n.context && n.context.prev;
                        var r = !1;
                        return n.context ? n.context.tagName != w && (T.implicitlyClosed.hasOwnProperty(n.context.tagName) && c(n), 
                        r = !n.context || n.context.tagName != w) : r = !0, r && (y = "error"), r ? m : f;
                    }
                    return s;
                }
                function f(t, e, n) {
                    return "endTag" != t ? (y = "error", f) : (c(n), s);
                }
                function m(t, e, n) {
                    return y = "error", f(t, e, n);
                }
                function g(t, e, n) {
                    if ("word" == t) return y = "attribute", h;
                    if ("endTag" == t || "selfcloseTag" == t) {
                        var r = n.tagName, o = n.tagStart;
                        return n.tagName = n.tagStart = null, "selfcloseTag" == t || T.autoSelfClosers.hasOwnProperty(r) ? d(n, r) : (d(n, r), 
                        n.context = new u(n, r, o == n.indented)), s;
                    }
                    return y = "error", g;
                }
                function h(t, e, n) {
                    return "equals" == t ? p : (T.allowMissing || (y = "error"), g(t, e, n));
                }
                function p(t, e, n) {
                    return "string" == t ? x : "word" == t && T.allowUnquoted ? (y = "string", g) : (y = "error", 
                    g(t, e, n));
                }
                function x(t, e, n) {
                    return "string" == t ? x : g(t, e, n);
                }
                var k = e.indentUnit, b = n.multilineTagIndentFactor || 1, v = n.multilineTagIndentPastTag;
                null == v && (v = !0);
                var w, z, y, T = n.htmlMode ? {
                    autoSelfClosers: {
                        area: !0,
                        base: !0,
                        br: !0,
                        col: !0,
                        command: !0,
                        embed: !0,
                        frame: !0,
                        hr: !0,
                        img: !0,
                        input: !0,
                        keygen: !0,
                        link: !0,
                        meta: !0,
                        param: !0,
                        source: !0,
                        track: !0,
                        wbr: !0
                    },
                    implicitlyClosed: {
                        dd: !0,
                        li: !0,
                        optgroup: !0,
                        option: !0,
                        p: !0,
                        rp: !0,
                        rt: !0,
                        tbody: !0,
                        td: !0,
                        tfoot: !0,
                        th: !0,
                        tr: !0
                    },
                    contextGrabbers: {
                        dd: {
                            dd: !0,
                            dt: !0
                        },
                        dt: {
                            dd: !0,
                            dt: !0
                        },
                        li: {
                            li: !0
                        },
                        option: {
                            option: !0,
                            optgroup: !0
                        },
                        optgroup: {
                            optgroup: !0
                        },
                        p: {
                            address: !0,
                            article: !0,
                            aside: !0,
                            blockquote: !0,
                            dir: !0,
                            div: !0,
                            dl: !0,
                            fieldset: !0,
                            footer: !0,
                            form: !0,
                            h1: !0,
                            h2: !0,
                            h3: !0,
                            h4: !0,
                            h5: !0,
                            h6: !0,
                            header: !0,
                            hgroup: !0,
                            hr: !0,
                            menu: !0,
                            nav: !0,
                            ol: !0,
                            p: !0,
                            pre: !0,
                            section: !0,
                            table: !0,
                            ul: !0
                        },
                        rp: {
                            rp: !0,
                            rt: !0
                        },
                        rt: {
                            rp: !0,
                            rt: !0
                        },
                        tbody: {
                            tbody: !0,
                            tfoot: !0
                        },
                        td: {
                            td: !0,
                            th: !0
                        },
                        tfoot: {
                            tbody: !0
                        },
                        th: {
                            td: !0,
                            th: !0
                        },
                        thead: {
                            tbody: !0,
                            tfoot: !0
                        },
                        tr: {
                            tr: !0
                        }
                    },
                    doNotIndent: {
                        pre: !0
                    },
                    allowUnquoted: !0,
                    allowMissing: !0,
                    caseFold: !0
                } : {
                    autoSelfClosers: {},
                    implicitlyClosed: {},
                    contextGrabbers: {},
                    doNotIndent: {},
                    allowUnquoted: !1,
                    allowMissing: !1,
                    caseFold: !1
                }, C = n.alignCDATA;
                return {
                    startState: function() {
                        return {
                            tokenize: r,
                            state: s,
                            indented: 0,
                            tagName: null,
                            tagStart: null,
                            context: null
                        };
                    },
                    token: function(t, e) {
                        if (!e.tagName && t.sol() && (e.indented = t.indentation()), t.eatSpace()) return null;
                        w = z = null;
                        var n = e.tokenize(t, e);
                        return (n || z) && "comment" != n && (y = null, e.state = e.state(z || n, t, e), 
                        y && (n = "error" == y ? n + " error" : y)), n;
                    },
                    indent: function(e, n, a) {
                        var i = e.context;
                        if (e.tokenize.isInAttribute) return e.stringStartCol + 1;
                        if (i && i.noIndent) return t.Pass;
                        if (e.tokenize != o && e.tokenize != r) return a ? a.match(/^(\s*)/)[0].length : 0;
                        if (e.tagName) return v ? e.tagStart + e.tagName.length + 2 : e.tagStart + k * b;
                        if (C && /<!\[CDATA\[/.test(n)) return 0;
                        for (i && /^<\//.test(n) && (i = i.prev); i && !i.startOfLine; ) i = i.prev;
                        return i ? i.indent + k : 0;
                    },
                    electricChars: "/",
                    blockCommentStart: "\x3c!--",
                    blockCommentEnd: "--\x3e",
                    configuration: n.htmlMode ? "html" : "xml",
                    helperType: n.htmlMode ? "html" : "xml"
                };
            }), t.defineMIME("text/xml", "xml"), t.defineMIME("application/xml", "xml"), t.mimeModes.hasOwnProperty("text/html") || t.defineMIME("text/html", {
                name: "xml",
                htmlMode: !0
            });
        }), function(e) {
            "object" == typeof exports && "object" == typeof module ? e(require("../../lib/codemirror")) : "function" == typeof define && define.amd ? define([ "../../lib/codemirror" ], e) : e(CodeMirror);
        }(function(e) {
            "use strict";
            function t(e) {
                for (var t = {}, r = 0; r < e.length; ++r) t[e[r]] = !0;
                return t;
            }
            function r(e, t) {
                for (var r, i = !1; null != (r = e.next()); ) {
                    if (i && "/" == r) {
                        t.tokenize = null;
                        break;
                    }
                    i = "*" == r;
                }
                return [ "comment", "comment" ];
            }
            function i(e, t) {
                return e.skipTo("--\x3e") ? (e.match("--\x3e"), t.tokenize = null) : e.skipToEnd(), 
                [ "comment", "comment" ];
            }
            e.defineMode("css", function(t, r) {
                function i(e, t) {
                    return m = t, e;
                }
                function o(e, t) {
                    var r = e.next();
                    if (b[r]) {
                        var o = b[r](e, t);
                        if (!1 !== o) return o;
                    }
                    return "@" == r ? (e.eatWhile(/[\w\\\-]/), i("def", e.current())) : "=" == r || ("~" == r || "|" == r) && e.eat("=") ? i(null, "compare") : '"' == r || "'" == r ? (t.tokenize = a(r), 
                    t.tokenize(e, t)) : "#" == r ? (e.eatWhile(/[\w\\\-]/), i("atom", "hash")) : "!" == r ? (e.match(/^\s*\w*/), 
                    i("keyword", "important")) : /\d/.test(r) || "." == r && e.eat(/\d/) ? (e.eatWhile(/[\w.%]/), 
                    i("number", "unit")) : "-" !== r ? /[,+>*\/]/.test(r) ? i(null, "select-op") : "." == r && e.match(/^-?[_a-z][_a-z0-9-]*/i) ? i("qualifier", "qualifier") : /[:;{}\[\]\(\)]/.test(r) ? i(null, r) : "u" == r && e.match("rl(") ? (e.backUp(1), 
                    t.tokenize = n, i("property", "word")) : /[\w\\\-]/.test(r) ? (e.eatWhile(/[\w\\\-]/), 
                    i("property", "word")) : i(null, null) : /[\d.]/.test(e.peek()) ? (e.eatWhile(/[\w.%]/), 
                    i("number", "unit")) : e.match(/^[^-]+-/) ? i("meta", "meta") : void 0;
                }
                function a(e) {
                    return function(t, r) {
                        for (var o, a = !1; null != (o = t.next()); ) {
                            if (o == e && !a) {
                                ")" == e && t.backUp(1);
                                break;
                            }
                            a = !a && "\\" == o;
                        }
                        return (o == e || !a && ")" != e) && (r.tokenize = null), i("string", "string");
                    };
                }
                function n(e, t) {
                    return e.next(), e.match(/\s*[\"\']/, !1) ? t.tokenize = null : t.tokenize = a(")"), 
                    i(null, "(");
                }
                function l(e, t, r) {
                    this.type = e, this.indent = t, this.prev = r;
                }
                function s(e, t, r) {
                    return e.context = new l(r, t.indentation() + g, e.context), r;
                }
                function d(e) {
                    return e.context = e.context.prev, e.context.type;
                }
                function c(e, t, r) {
                    return q[r.context.type](e, t, r);
                }
                function u(e, t, r, i) {
                    for (var o = i || 1; o > 0; o--) r.context = r.context.prev;
                    return c(e, t, r);
                }
                function p(e) {
                    var t = e.current().toLowerCase();
                    h = v.hasOwnProperty(t) ? "atom" : y.hasOwnProperty(t) ? "keyword" : "variable";
                }
                r.propertyKeywords || (r = e.resolveMode("text/css"));
                var m, h, g = t.indentUnit, b = r.tokenHooks, f = r.mediaTypes || {}, k = r.mediaFeatures || {}, w = r.propertyKeywords || {}, y = r.colorKeywords || {}, v = r.valueKeywords || {}, x = r.fontProperties || {}, z = r.allowNested, q = {};
                return q.top = function(e, t, r) {
                    if ("{" == e) return s(r, t, "block");
                    if ("}" == e && r.context.prev) return d(r);
                    if ("@media" == e) return s(r, t, "media");
                    if ("@font-face" == e) return "font_face_before";
                    if (/^@(-(moz|ms|o|webkit)-)?keyframes$/.test(e)) return "keyframes";
                    if (e && "@" == e.charAt(0)) return s(r, t, "at");
                    if ("hash" == e) h = "builtin"; else if ("word" == e) h = "tag"; else {
                        if ("variable-definition" == e) return "maybeprop";
                        if ("interpolation" == e) return s(r, t, "interpolation");
                        if (":" == e) return "pseudo";
                        if (z && "(" == e) return s(r, t, "params");
                    }
                    return r.context.type;
                }, q.block = function(e, t, r) {
                    return "word" == e ? w.hasOwnProperty(t.current().toLowerCase()) ? (h = "property", 
                    "maybeprop") : z ? (h = t.match(/^\s*:/, !1) ? "property" : "tag", "block") : (h += " error", 
                    "maybeprop") : "meta" == e ? "block" : z || "hash" != e && "qualifier" != e ? q.top(e, t, r) : (h = "error", 
                    "block");
                }, q.maybeprop = function(e, t, r) {
                    return ":" == e ? s(r, t, "prop") : c(e, t, r);
                }, q.prop = function(e, t, r) {
                    if (";" == e) return d(r);
                    if ("{" == e && z) return s(r, t, "propBlock");
                    if ("}" == e || "{" == e) return u(e, t, r);
                    if ("(" == e) return s(r, t, "parens");
                    if ("hash" != e || /^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(t.current())) {
                        if ("word" == e) p(t); else if ("interpolation" == e) return s(r, t, "interpolation");
                    } else h += " error";
                    return "prop";
                }, q.propBlock = function(e, t, r) {
                    return "}" == e ? d(r) : "word" == e ? (h = "property", "maybeprop") : r.context.type;
                }, q.parens = function(e, t, r) {
                    return "{" == e || "}" == e ? u(e, t, r) : ")" == e ? d(r) : "parens";
                }, q.pseudo = function(e, t, r) {
                    return "word" == e ? (h = "variable-3", r.context.type) : c(e, t, r);
                }, q.media = function(e, t, r) {
                    if ("(" == e) return s(r, t, "media_parens");
                    if ("}" == e) return u(e, t, r);
                    if ("{" == e) return d(r) && s(r, t, z ? "block" : "top");
                    if ("word" == e) {
                        var i = t.current().toLowerCase();
                        h = "only" == i || "not" == i || "and" == i ? "keyword" : f.hasOwnProperty(i) ? "attribute" : k.hasOwnProperty(i) ? "property" : "error";
                    }
                    return r.context.type;
                }, q.media_parens = function(e, t, r) {
                    return ")" == e ? d(r) : "{" == e || "}" == e ? u(e, t, r, 2) : q.media(e, t, r);
                }, q.font_face_before = function(e, t, r) {
                    return "{" == e ? s(r, t, "font_face") : c(e, t, r);
                }, q.font_face = function(e, t, r) {
                    return "}" == e ? d(r) : "word" == e ? (h = x.hasOwnProperty(t.current().toLowerCase()) ? "property" : "error", 
                    "maybeprop") : "font_face";
                }, q.keyframes = function(e, t, r) {
                    return "word" == e ? (h = "variable", "keyframes") : "{" == e ? s(r, t, "top") : c(e, t, r);
                }, q.at = function(e, t, r) {
                    return ";" == e ? d(r) : "{" == e || "}" == e ? u(e, t, r) : ("word" == e ? h = "tag" : "hash" == e && (h = "builtin"), 
                    "at");
                }, q.interpolation = function(e, t, r) {
                    return "}" == e ? d(r) : "{" == e || ";" == e ? u(e, t, r) : ("variable" != e && (h = "error"), 
                    "interpolation");
                }, q.params = function(e, t, r) {
                    return ")" == e ? d(r) : "{" == e || "}" == e ? u(e, t, r) : ("word" == e && p(t), 
                    "params");
                }, {
                    startState: function(e) {
                        return {
                            tokenize: null,
                            state: "top",
                            context: new l("top", e || 0, null)
                        };
                    },
                    token: function(e, t) {
                        if (!t.tokenize && e.eatSpace()) return null;
                        var r = (t.tokenize || o)(e, t);
                        return r && "object" == typeof r && (m = r[1], r = r[0]), h = r, t.state = q[t.state](m, e, t), 
                        h;
                    },
                    indent: function(e, t) {
                        var r = e.context, i = t && t.charAt(0), o = r.indent;
                        return "prop" == r.type && "}" == i && (r = r.prev), !r.prev || ("}" != i || "block" != r.type && "top" != r.type && "interpolation" != r.type && "font_face" != r.type) && (")" != i || "parens" != r.type && "params" != r.type && "media_parens" != r.type) && ("{" != i || "at" != r.type && "media" != r.type) || (o = r.indent - g, 
                        r = r.prev), o;
                    },
                    electricChars: "}",
                    blockCommentStart: "/*",
                    blockCommentEnd: "*/",
                    fold: "brace"
                };
            });
            var o = [ "all", "aural", "braille", "handheld", "print", "projection", "screen", "tty", "tv", "embossed" ], a = t(o), n = [ "width", "min-width", "max-width", "height", "min-height", "max-height", "device-width", "min-device-width", "max-device-width", "device-height", "min-device-height", "max-device-height", "aspect-ratio", "min-aspect-ratio", "max-aspect-ratio", "device-aspect-ratio", "min-device-aspect-ratio", "max-device-aspect-ratio", "color", "min-color", "max-color", "color-index", "min-color-index", "max-color-index", "monochrome", "min-monochrome", "max-monochrome", "resolution", "min-resolution", "max-resolution", "scan", "grid" ], l = t(n), s = [ "align-content", "align-items", "align-self", "alignment-adjust", "alignment-baseline", "anchor-point", "animation", "animation-delay", "animation-direction", "animation-duration", "animation-fill-mode", "animation-iteration-count", "animation-name", "animation-play-state", "animation-timing-function", "appearance", "azimuth", "backface-visibility", "background", "background-attachment", "background-clip", "background-color", "background-image", "background-origin", "background-position", "background-repeat", "background-size", "baseline-shift", "binding", "bleed", "bookmark-label", "bookmark-level", "bookmark-state", "bookmark-target", "border", "border-bottom", "border-bottom-color", "border-bottom-left-radius", "border-bottom-right-radius", "border-bottom-style", "border-bottom-width", "border-collapse", "border-color", "border-image", "border-image-outset", "border-image-repeat", "border-image-slice", "border-image-source", "border-image-width", "border-left", "border-left-color", "border-left-style", "border-left-width", "border-radius", "border-right", "border-right-color", "border-right-style", "border-right-width", "border-spacing", "border-style", "border-top", "border-top-color", "border-top-left-radius", "border-top-right-radius", "border-top-style", "border-top-width", "border-width", "bottom", "box-decoration-break", "box-shadow", "box-sizing", "break-after", "break-before", "break-inside", "caption-side", "clear", "clip", "color", "color-profile", "column-count", "column-fill", "column-gap", "column-rule", "column-rule-color", "column-rule-style", "column-rule-width", "column-span", "column-width", "columns", "content", "counter-increment", "counter-reset", "crop", "cue", "cue-after", "cue-before", "cursor", "direction", "display", "dominant-baseline", "drop-initial-after-adjust", "drop-initial-after-align", "drop-initial-before-adjust", "drop-initial-before-align", "drop-initial-size", "drop-initial-value", "elevation", "empty-cells", "fit", "fit-position", "flex", "flex-basis", "flex-direction", "flex-flow", "flex-grow", "flex-shrink", "flex-wrap", "float", "float-offset", "flow-from", "flow-into", "font", "font-feature-settings", "font-family", "font-kerning", "font-language-override", "font-size", "font-size-adjust", "font-stretch", "font-style", "font-synthesis", "font-variant", "font-variant-alternates", "font-variant-caps", "font-variant-east-asian", "font-variant-ligatures", "font-variant-numeric", "font-variant-position", "font-weight", "grid", "grid-area", "grid-auto-columns", "grid-auto-flow", "grid-auto-position", "grid-auto-rows", "grid-column", "grid-column-end", "grid-column-start", "grid-row", "grid-row-end", "grid-row-start", "grid-template", "grid-template-areas", "grid-template-columns", "grid-template-rows", "hanging-punctuation", "height", "hyphens", "icon", "image-orientation", "image-rendering", "image-resolution", "inline-box-align", "justify-content", "left", "letter-spacing", "line-break", "line-height", "line-stacking", "line-stacking-ruby", "line-stacking-shift", "line-stacking-strategy", "list-style", "list-style-image", "list-style-position", "list-style-type", "margin", "margin-bottom", "margin-left", "margin-right", "margin-top", "marker-offset", "marks", "marquee-direction", "marquee-loop", "marquee-play-count", "marquee-speed", "marquee-style", "max-height", "max-width", "min-height", "min-width", "move-to", "nav-down", "nav-index", "nav-left", "nav-right", "nav-up", "opacity", "order", "orphans", "outline", "outline-color", "outline-offset", "outline-style", "outline-width", "overflow", "overflow-style", "overflow-wrap", "overflow-x", "overflow-y", "padding", "padding-bottom", "padding-left", "padding-right", "padding-top", "page", "page-break-after", "page-break-before", "page-break-inside", "page-policy", "pause", "pause-after", "pause-before", "perspective", "perspective-origin", "pitch", "pitch-range", "play-during", "position", "presentation-level", "punctuation-trim", "quotes", "region-break-after", "region-break-before", "region-break-inside", "region-fragment", "rendering-intent", "resize", "rest", "rest-after", "rest-before", "richness", "right", "rotation", "rotation-point", "ruby-align", "ruby-overhang", "ruby-position", "ruby-span", "shape-inside", "shape-outside", "size", "speak", "speak-as", "speak-header", "speak-numeral", "speak-punctuation", "speech-rate", "stress", "string-set", "tab-size", "table-layout", "target", "target-name", "target-new", "target-position", "text-align", "text-align-last", "text-decoration", "text-decoration-color", "text-decoration-line", "text-decoration-skip", "text-decoration-style", "text-emphasis", "text-emphasis-color", "text-emphasis-position", "text-emphasis-style", "text-height", "text-indent", "text-justify", "text-outline", "text-overflow", "text-shadow", "text-size-adjust", "text-space-collapse", "text-transform", "text-underline-position", "text-wrap", "top", "transform", "transform-origin", "transform-style", "transition", "transition-delay", "transition-duration", "transition-property", "transition-timing-function", "unicode-bidi", "vertical-align", "visibility", "voice-balance", "voice-duration", "voice-family", "voice-pitch", "voice-range", "voice-rate", "voice-stress", "voice-volume", "volume", "white-space", "widows", "width", "word-break", "word-spacing", "word-wrap", "z-index", "zoom", "clip-path", "clip-rule", "mask", "enable-background", "filter", "flood-color", "flood-opacity", "lighting-color", "stop-color", "stop-opacity", "pointer-events", "color-interpolation", "color-interpolation-filters", "color-profile", "color-rendering", "fill", "fill-opacity", "fill-rule", "image-rendering", "marker", "marker-end", "marker-mid", "marker-start", "shape-rendering", "stroke", "stroke-dasharray", "stroke-dashoffset", "stroke-linecap", "stroke-linejoin", "stroke-miterlimit", "stroke-opacity", "stroke-width", "text-rendering", "baseline-shift", "dominant-baseline", "glyph-orientation-horizontal", "glyph-orientation-vertical", "kerning", "text-anchor", "writing-mode" ], d = t(s), c = [ "aliceblue", "antiquewhite", "aqua", "aquamarine", "azure", "beige", "bisque", "black", "blanchedalmond", "blue", "blueviolet", "brown", "burlywood", "cadetblue", "chartreuse", "chocolate", "coral", "cornflowerblue", "cornsilk", "crimson", "cyan", "darkblue", "darkcyan", "darkgoldenrod", "darkgray", "darkgreen", "darkkhaki", "darkmagenta", "darkolivegreen", "darkorange", "darkorchid", "darkred", "darksalmon", "darkseagreen", "darkslateblue", "darkslategray", "darkturquoise", "darkviolet", "deeppink", "deepskyblue", "dimgray", "dodgerblue", "firebrick", "floralwhite", "forestgreen", "fuchsia", "gainsboro", "ghostwhite", "gold", "goldenrod", "gray", "grey", "green", "greenyellow", "honeydew", "hotpink", "indianred", "indigo", "ivory", "khaki", "lavender", "lavenderblush", "lawngreen", "lemonchiffon", "lightblue", "lightcoral", "lightcyan", "lightgoldenrodyellow", "lightgray", "lightgreen", "lightpink", "lightsalmon", "lightseagreen", "lightskyblue", "lightslategray", "lightsteelblue", "lightyellow", "lime", "limegreen", "linen", "magenta", "maroon", "mediumaquamarine", "mediumblue", "mediumorchid", "mediumpurple", "mediumseagreen", "mediumslateblue", "mediumspringgreen", "mediumturquoise", "mediumvioletred", "midnightblue", "mintcream", "mistyrose", "moccasin", "navajowhite", "navy", "oldlace", "olive", "olivedrab", "orange", "orangered", "orchid", "palegoldenrod", "palegreen", "paleturquoise", "palevioletred", "papayawhip", "peachpuff", "peru", "pink", "plum", "powderblue", "purple", "red", "rosybrown", "royalblue", "saddlebrown", "salmon", "sandybrown", "seagreen", "seashell", "sienna", "silver", "skyblue", "slateblue", "slategray", "snow", "springgreen", "steelblue", "tan", "teal", "thistle", "tomato", "turquoise", "violet", "wheat", "white", "whitesmoke", "yellow", "yellowgreen" ], u = t(c), p = [ "above", "absolute", "activeborder", "activecaption", "afar", "after-white-space", "ahead", "alias", "all", "all-scroll", "alternate", "always", "amharic", "amharic-abegede", "antialiased", "appworkspace", "arabic-indic", "armenian", "asterisks", "auto", "avoid", "avoid-column", "avoid-page", "avoid-region", "background", "backwards", "baseline", "below", "bidi-override", "binary", "bengali", "blink", "block", "block-axis", "bold", "bolder", "border", "border-box", "both", "bottom", "break", "break-all", "break-word", "button", "button-bevel", "buttonface", "buttonhighlight", "buttonshadow", "buttontext", "cambodian", "capitalize", "caps-lock-indicator", "caption", "captiontext", "caret", "cell", "center", "checkbox", "circle", "cjk-earthly-branch", "cjk-heavenly-stem", "cjk-ideographic", "clear", "clip", "close-quote", "col-resize", "collapse", "column", "compact", "condensed", "contain", "content", "content-box", "context-menu", "continuous", "copy", "cover", "crop", "cross", "crosshair", "currentcolor", "cursive", "dashed", "decimal", "decimal-leading-zero", "default", "default-button", "destination-atop", "destination-in", "destination-out", "destination-over", "devanagari", "disc", "discard", "document", "dot-dash", "dot-dot-dash", "dotted", "double", "down", "e-resize", "ease", "ease-in", "ease-in-out", "ease-out", "element", "ellipse", "ellipsis", "embed", "end", "ethiopic", "ethiopic-abegede", "ethiopic-abegede-am-et", "ethiopic-abegede-gez", "ethiopic-abegede-ti-er", "ethiopic-abegede-ti-et", "ethiopic-halehame-aa-er", "ethiopic-halehame-aa-et", "ethiopic-halehame-am-et", "ethiopic-halehame-gez", "ethiopic-halehame-om-et", "ethiopic-halehame-sid-et", "ethiopic-halehame-so-et", "ethiopic-halehame-ti-er", "ethiopic-halehame-ti-et", "ethiopic-halehame-tig", "ew-resize", "expanded", "extra-condensed", "extra-expanded", "fantasy", "fast", "fill", "fixed", "flat", "footnotes", "forwards", "from", "geometricPrecision", "georgian", "graytext", "groove", "gujarati", "gurmukhi", "hand", "hangul", "hangul-consonant", "hebrew", "help", "hidden", "hide", "higher", "highlight", "highlighttext", "hiragana", "hiragana-iroha", "horizontal", "hsl", "hsla", "icon", "ignore", "inactiveborder", "inactivecaption", "inactivecaptiontext", "infinite", "infobackground", "infotext", "inherit", "initial", "inline", "inline-axis", "inline-block", "inline-table", "inset", "inside", "intrinsic", "invert", "italic", "justify", "kannada", "katakana", "katakana-iroha", "keep-all", "khmer", "landscape", "lao", "large", "larger", "left", "level", "lighter", "line-through", "linear", "lines", "list-item", "listbox", "listitem", "local", "logical", "loud", "lower", "lower-alpha", "lower-armenian", "lower-greek", "lower-hexadecimal", "lower-latin", "lower-norwegian", "lower-roman", "lowercase", "ltr", "malayalam", "match", "media-controls-background", "media-current-time-display", "media-fullscreen-button", "media-mute-button", "media-play-button", "media-return-to-realtime-button", "media-rewind-button", "media-seek-back-button", "media-seek-forward-button", "media-slider", "media-sliderthumb", "media-time-remaining-display", "media-volume-slider", "media-volume-slider-container", "media-volume-sliderthumb", "medium", "menu", "menulist", "menulist-button", "menulist-text", "menulist-textfield", "menutext", "message-box", "middle", "min-intrinsic", "mix", "mongolian", "monospace", "move", "multiple", "myanmar", "n-resize", "narrower", "ne-resize", "nesw-resize", "no-close-quote", "no-drop", "no-open-quote", "no-repeat", "none", "normal", "not-allowed", "nowrap", "ns-resize", "nw-resize", "nwse-resize", "oblique", "octal", "open-quote", "optimizeLegibility", "optimizeSpeed", "oriya", "oromo", "outset", "outside", "outside-shape", "overlay", "overline", "padding", "padding-box", "painted", "page", "paused", "persian", "plus-darker", "plus-lighter", "pointer", "polygon", "portrait", "pre", "pre-line", "pre-wrap", "preserve-3d", "progress", "push-button", "radio", "read-only", "read-write", "read-write-plaintext-only", "rectangle", "region", "relative", "repeat", "repeat-x", "repeat-y", "reset", "reverse", "rgb", "rgba", "ridge", "right", "round", "row-resize", "rtl", "run-in", "running", "s-resize", "sans-serif", "scroll", "scrollbar", "se-resize", "searchfield", "searchfield-cancel-button", "searchfield-decoration", "searchfield-results-button", "searchfield-results-decoration", "semi-condensed", "semi-expanded", "separate", "serif", "show", "sidama", "single", "skip-white-space", "slide", "slider-horizontal", "slider-vertical", "sliderthumb-horizontal", "sliderthumb-vertical", "slow", "small", "small-caps", "small-caption", "smaller", "solid", "somali", "source-atop", "source-in", "source-out", "source-over", "space", "square", "square-button", "start", "static", "status-bar", "stretch", "stroke", "sub", "subpixel-antialiased", "super", "sw-resize", "table", "table-caption", "table-cell", "table-column", "table-column-group", "table-footer-group", "table-header-group", "table-row", "table-row-group", "telugu", "text", "text-bottom", "text-top", "textarea", "textfield", "thai", "thick", "thin", "threeddarkshadow", "threedface", "threedhighlight", "threedlightshadow", "threedshadow", "tibetan", "tigre", "tigrinya-er", "tigrinya-er-abegede", "tigrinya-et", "tigrinya-et-abegede", "to", "top", "transparent", "ultra-condensed", "ultra-expanded", "underline", "up", "upper-alpha", "upper-armenian", "upper-greek", "upper-hexadecimal", "upper-latin", "upper-norwegian", "upper-roman", "uppercase", "urdu", "url", "vertical", "vertical-text", "visible", "visibleFill", "visiblePainted", "visibleStroke", "visual", "w-resize", "wait", "wave", "wider", "window", "windowframe", "windowtext", "x-large", "x-small", "xor", "xx-large", "xx-small" ], m = t(p), g = t([ "font-family", "src", "unicode-range", "font-variant", "font-feature-settings", "font-stretch", "font-weight", "font-style" ]), b = o.concat(n).concat(s).concat(c).concat(p);
            e.registerHelper("hintWords", "css", b), e.defineMIME("text/css", {
                mediaTypes: a,
                mediaFeatures: l,
                propertyKeywords: d,
                colorKeywords: u,
                valueKeywords: m,
                fontProperties: g,
                tokenHooks: {
                    "<": function(e, t) {
                        return !!e.match("!--") && (t.tokenize = i, i(e, t));
                    },
                    "/": function(e, t) {
                        return !!e.eat("*") && (t.tokenize = r, r(e, t));
                    }
                },
                name: "css"
            }), e.defineMIME("text/x-scss", {
                mediaTypes: a,
                mediaFeatures: l,
                propertyKeywords: d,
                colorKeywords: u,
                valueKeywords: m,
                fontProperties: g,
                allowNested: !0,
                tokenHooks: {
                    "/": function(e, t) {
                        return e.eat("/") ? (e.skipToEnd(), [ "comment", "comment" ]) : e.eat("*") ? (t.tokenize = r, 
                        r(e, t)) : [ "operator", "operator" ];
                    },
                    ":": function(e) {
                        return !!e.match(/\s*{/) && [ null, "{" ];
                    },
                    $: function(e) {
                        return e.match(/^[\w-]+/), e.match(/^\s*:/, !1) ? [ "variable-2", "variable-definition" ] : [ "variable-2", "variable" ];
                    },
                    "#": function(e) {
                        return !!e.eat("{") && [ null, "interpolation" ];
                    }
                },
                name: "css",
                helperType: "scss"
            }), e.defineMIME("text/x-less", {
                mediaTypes: a,
                mediaFeatures: l,
                propertyKeywords: d,
                colorKeywords: u,
                valueKeywords: m,
                fontProperties: g,
                allowNested: !0,
                tokenHooks: {
                    "/": function(e, t) {
                        return e.eat("/") ? (e.skipToEnd(), [ "comment", "comment" ]) : e.eat("*") ? (t.tokenize = r, 
                        r(e, t)) : [ "operator", "operator" ];
                    },
                    "@": function(e) {
                        return !e.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/, !1) && (e.eatWhile(/[\w\\\-]/), 
                        e.match(/^\s*:/, !1) ? [ "variable-2", "variable-definition" ] : [ "variable-2", "variable" ]);
                    },
                    "&": function() {
                        return [ "atom", "atom" ];
                    }
                },
                name: "css",
                helperType: "less"
            });
        }), function(e) {
            "object" == typeof exports && "object" == typeof module ? e(require("../../lib/codemirror")) : "function" == typeof define && define.amd ? define([ "../../lib/codemirror" ], e) : e(CodeMirror);
        }(function(e) {
            "use strict";
            e.defineMode("javascript", function(t, r) {
                function n(e) {
                    for (var t, r = !1, n = !1; null != (t = e.next()); ) {
                        if (!r) {
                            if ("/" == t && !n) return;
                            "[" == t ? n = !0 : n && "]" == t && (n = !1);
                        }
                        r = !r && "\\" == t;
                    }
                }
                function a(e, t, r) {
                    return ve = e, me = r, t;
                }
                function i(e, t) {
                    var r = e.next();
                    if ('"' == r || "'" == r) return t.tokenize = o(r), t.tokenize(e, t);
                    if ("." == r && e.match(/^\d+(?:[eE][+\-]?\d+)?/)) return a("number", "number");
                    if ("." == r && e.match("..")) return a("spread", "meta");
                    if (/[\[\]{}\(\),;\:\.]/.test(r)) return a(r);
                    if ("=" == r && e.eat(">")) return a("=>", "operator");
                    if ("0" == r && e.eat(/x/i)) return e.eatWhile(/[\da-f]/i), a("number", "number");
                    if (/\d/.test(r)) return e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/), a("number", "number");
                    if ("/" == r) return e.eat("*") ? (t.tokenize = c, c(e, t)) : e.eat("/") ? (e.skipToEnd(), 
                    a("comment", "comment")) : "operator" == t.lastType || "keyword c" == t.lastType || "sof" == t.lastType || /^[\[{}\(,;:]$/.test(t.lastType) ? (n(e), 
                    e.eatWhile(/[gimy]/), a("regexp", "string-2")) : (e.eatWhile(je), a("operator", "operator", e.current()));
                    if ("`" == r) return t.tokenize = l, l(e, t);
                    if ("#" == r) return e.skipToEnd(), a("error", "error");
                    if (je.test(r)) return e.eatWhile(je), a("operator", "operator", e.current());
                    if (ge.test(r)) {
                        e.eatWhile(ge);
                        var i = e.current(), u = we.propertyIsEnumerable(i) && we[i];
                        return u && "." != t.lastType ? a(u.type, u.style, i) : a("variable", "variable", i);
                    }
                }
                function o(e) {
                    return function(t, r) {
                        var n, o = !1;
                        if (ke && "@" == t.peek() && t.match(Me)) return r.tokenize = i, a("jsonld-keyword", "meta");
                        for (;null != (n = t.next()) && (n != e || o); ) o = !o && "\\" == n;
                        return o || (r.tokenize = i), a("string", "string");
                    };
                }
                function c(e, t) {
                    for (var r, n = !1; r = e.next(); ) {
                        if ("/" == r && n) {
                            t.tokenize = i;
                            break;
                        }
                        n = "*" == r;
                    }
                    return a("comment", "comment");
                }
                function l(e, t) {
                    for (var r, n = !1; null != (r = e.next()); ) {
                        if (!n && ("`" == r || "$" == r && e.eat("{"))) {
                            t.tokenize = i;
                            break;
                        }
                        n = !n && "\\" == r;
                    }
                    return a("quasi", "string-2", e.current());
                }
                function u(e, t) {
                    t.fatArrowAt && (t.fatArrowAt = null);
                    var r = e.string.indexOf("=>", e.start);
                    if (!(0 > r)) {
                        for (var n = 0, a = !1, i = r - 1; i >= 0; --i) {
                            var o = e.string.charAt(i), c = Ve.indexOf(o);
                            if (c >= 0 && 3 > c) {
                                if (!n) {
                                    ++i;
                                    break;
                                }
                                if (0 == --n) break;
                            } else if (c >= 3 && 6 > c) ++n; else if (ge.test(o)) a = !0; else if (a && !n) {
                                ++i;
                                break;
                            }
                        }
                        a && !n && (t.fatArrowAt = i);
                    }
                }
                function s(e, t, r, n, a, i) {
                    this.indented = e, this.column = t, this.type = r, this.prev = a, this.info = i, 
                    null != n && (this.align = n);
                }
                function f(e, t) {
                    for (r = e.localVars; r; r = r.next) if (r.name == t) return !0;
                    for (var n = e.context; n; n = n.prev) for (var r = n.vars; r; r = r.next) if (r.name == t) return !0;
                }
                function d(e, t, r, n, a) {
                    var i = e.cc;
                    for (Ie.state = e, Ie.stream = a, Ie.marked = null, Ie.cc = i, Ie.style = t, e.lexical.hasOwnProperty("align") || (e.lexical.align = !0); ;) if ((i.length ? i.pop() : xe ? w : g)(r, n)) {
                        for (;i.length && i[i.length - 1].lex; ) i.pop()();
                        return Ie.marked ? Ie.marked : "variable" == r && f(e, n) ? "variable-2" : t;
                    }
                }
                function p() {
                    for (var e = arguments.length - 1; e >= 0; e--) Ie.cc.push(arguments[e]);
                }
                function v() {
                    return p.apply(null, arguments), !0;
                }
                function m(e) {
                    function t(t) {
                        for (var r = t; r; r = r.next) if (r.name == e) return !0;
                        return !1;
                    }
                    var n = Ie.state;
                    if (n.context) {
                        if (Ie.marked = "def", t(n.localVars)) return;
                        n.localVars = {
                            name: e,
                            next: n.localVars
                        };
                    } else {
                        if (t(n.globalVars)) return;
                        r.globalVars && (n.globalVars = {
                            name: e,
                            next: n.globalVars
                        });
                    }
                }
                function y() {
                    Ie.state.context = {
                        prev: Ie.state.context,
                        vars: Ie.state.localVars
                    }, Ie.state.localVars = ze;
                }
                function b() {
                    Ie.state.localVars = Ie.state.context.vars, Ie.state.context = Ie.state.context.prev;
                }
                function k(e, t) {
                    var r = function() {
                        var r = Ie.state, n = r.indented;
                        if ("stat" == r.lexical.type) n = r.lexical.indented; else for (var a = r.lexical; a && ")" == a.type && a.align; a = a.prev) n = a.indented;
                        r.lexical = new s(n, Ie.stream.column(), e, null, r.lexical, t);
                    };
                    return r.lex = !0, r;
                }
                function x() {
                    var e = Ie.state;
                    e.lexical.prev && (")" == e.lexical.type && (e.indented = e.lexical.indented), e.lexical = e.lexical.prev);
                }
                function h(e) {
                    function t(r) {
                        return r == e ? v() : ";" == e ? p() : v(t);
                    }
                    return t;
                }
                function g(e, t) {
                    return "var" == e ? v(k("vardef", t.length), F, h(";"), x) : "keyword a" == e ? v(k("form"), w, g, x) : "keyword b" == e ? v(k("form"), g, x) : "{" == e ? v(k("}"), U, x) : ";" == e ? v() : "if" == e ? ("else" == Ie.state.lexical.info && Ie.state.cc[Ie.state.cc.length - 1] == x && Ie.state.cc.pop()(), 
                    v(k("form"), w, g, x, Q)) : "function" == e ? v(ee) : "for" == e ? v(k("form"), R, g, x) : "variable" == e ? v(k("stat"), q) : "switch" == e ? v(k("form"), w, k("}", "switch"), h("{"), U, x, x) : "case" == e ? v(w, h(":")) : "default" == e ? v(h(":")) : "catch" == e ? v(k("form"), y, h("("), te, h(")"), g, x, b) : "module" == e ? v(k("form"), y, oe, b, x) : "class" == e ? v(k("form"), re, x) : "export" == e ? v(k("form"), ce, x) : "import" == e ? v(k("form"), le, x) : p(k("stat"), w, h(";"), x);
                }
                function w(e) {
                    return M(e, !1);
                }
                function j(e) {
                    return M(e, !0);
                }
                function M(e, t) {
                    if (Ie.state.fatArrowAt == Ie.stream.start) {
                        var r = t ? $ : C;
                        if ("(" == e) return v(y, k(")"), N(G, ")"), x, h("=>"), r, b);
                        if ("variable" == e) return p(y, G, h("=>"), r, b);
                    }
                    var n = t ? z : I;
                    return Ee.hasOwnProperty(e) ? v(n) : "function" == e ? v(ee, n) : "keyword c" == e ? v(t ? E : V) : "(" == e ? v(k(")"), V, pe, h(")"), x, n) : "operator" == e || "spread" == e ? v(t ? j : w) : "[" == e ? v(k("]"), fe, x, n) : "{" == e ? H(W, "}", null, n) : "quasi" == e ? p(T, n) : v();
                }
                function V(e) {
                    return e.match(/[;\}\)\],]/) ? p() : p(w);
                }
                function E(e) {
                    return e.match(/[;\}\)\],]/) ? p() : p(j);
                }
                function I(e, t) {
                    return "," == e ? v(w) : z(e, t, !1);
                }
                function z(e, t, r) {
                    var n = 0 == r ? I : z, a = 0 == r ? w : j;
                    return "=>" == e ? v(y, r ? $ : C, b) : "operator" == e ? /\+\+|--/.test(t) ? v(n) : "?" == t ? v(w, h(":"), a) : v(a) : "quasi" == e ? p(T, n) : ";" != e ? "(" == e ? H(j, ")", "call", n) : "." == e ? v(O, n) : "[" == e ? v(k("]"), V, h("]"), x, n) : void 0 : void 0;
                }
                function T(e, t) {
                    return "quasi" != e ? p() : "${" != t.slice(t.length - 2) ? v(T) : v(w, A);
                }
                function A(e) {
                    return "}" == e ? (Ie.marked = "string-2", Ie.state.tokenize = l, v(T)) : void 0;
                }
                function C(e) {
                    return u(Ie.stream, Ie.state), p("{" == e ? g : w);
                }
                function $(e) {
                    return u(Ie.stream, Ie.state), p("{" == e ? g : j);
                }
                function q(e) {
                    return ":" == e ? v(x, g) : p(I, h(";"), x);
                }
                function O(e) {
                    return "variable" == e ? (Ie.marked = "property", v()) : void 0;
                }
                function W(e, t) {
                    return "variable" == e || "keyword" == Ie.style ? (Ie.marked = "property", v("get" == t || "set" == t ? P : S)) : "number" == e || "string" == e ? (Ie.marked = ke ? "property" : Ie.style + " property", 
                    v(S)) : "jsonld-keyword" == e ? v(S) : "[" == e ? v(w, h("]"), S) : void 0;
                }
                function P(e) {
                    return "variable" != e ? p(S) : (Ie.marked = "property", v(ee));
                }
                function S(e) {
                    return ":" == e ? v(j) : "(" == e ? p(ee) : void 0;
                }
                function N(e, t) {
                    function r(n) {
                        if ("," == n) {
                            var a = Ie.state.lexical;
                            return "call" == a.info && (a.pos = (a.pos || 0) + 1), v(e, r);
                        }
                        return n == t ? v() : v(h(t));
                    }
                    return function(n) {
                        return n == t ? v() : p(e, r);
                    };
                }
                function H(e, t, r) {
                    for (var n = 3; n < arguments.length; n++) Ie.cc.push(arguments[n]);
                    return v(k(t, r), N(e, t), x);
                }
                function U(e) {
                    return "}" == e ? v() : p(g, U);
                }
                function B(e) {
                    return he && ":" == e ? v(D) : void 0;
                }
                function D(e) {
                    return "variable" == e ? (Ie.marked = "variable-3", v()) : void 0;
                }
                function F() {
                    return p(G, B, K, L);
                }
                function G(e, t) {
                    return "variable" == e ? (m(t), v()) : "[" == e ? H(G, "]") : "{" == e ? H(J, "}") : void 0;
                }
                function J(e, t) {
                    return "variable" != e || Ie.stream.match(/^\s*:/, !1) ? ("variable" == e && (Ie.marked = "property"), 
                    v(h(":"), G, K)) : (m(t), v(K));
                }
                function K(e, t) {
                    return "=" == t ? v(j) : void 0;
                }
                function L(e) {
                    return "," == e ? v(F) : void 0;
                }
                function Q(e, t) {
                    return "keyword b" == e && "else" == t ? v(k("form", "else"), g, x) : void 0;
                }
                function R(e) {
                    return "(" == e ? v(k(")"), X, h(")"), x) : void 0;
                }
                function X(e) {
                    return "var" == e ? v(F, h(";"), Z) : ";" == e ? v(Z) : "variable" == e ? v(Y) : p(w, h(";"), Z);
                }
                function Y(e, t) {
                    return "in" == t || "of" == t ? (Ie.marked = "keyword", v(w)) : v(I, Z);
                }
                function Z(e, t) {
                    return ";" == e ? v(_) : "in" == t || "of" == t ? (Ie.marked = "keyword", v(w)) : p(w, h(";"), _);
                }
                function _(e) {
                    ")" != e && v(w);
                }
                function ee(e, t) {
                    return "*" == t ? (Ie.marked = "keyword", v(ee)) : "variable" == e ? (m(t), v(ee)) : "(" == e ? v(y, k(")"), N(te, ")"), x, g, b) : void 0;
                }
                function te(e) {
                    return "spread" == e ? v(te) : p(G, B);
                }
                function re(e, t) {
                    return "variable" == e ? (m(t), v(ne)) : void 0;
                }
                function ne(e, t) {
                    return "extends" == t ? v(w, ne) : "{" == e ? v(k("}"), ae, x) : void 0;
                }
                function ae(e, t) {
                    return "variable" == e || "keyword" == Ie.style ? (Ie.marked = "property", "get" == t || "set" == t ? v(ie, ee, ae) : v(ee, ae)) : "*" == t ? (Ie.marked = "keyword", 
                    v(ae)) : ";" == e ? v(ae) : "}" == e ? v() : void 0;
                }
                function ie(e) {
                    return "variable" != e ? p() : (Ie.marked = "property", v());
                }
                function oe(e, t) {
                    return "string" == e ? v(g) : "variable" == e ? (m(t), v(se)) : void 0;
                }
                function ce(e, t) {
                    return "*" == t ? (Ie.marked = "keyword", v(se, h(";"))) : "default" == t ? (Ie.marked = "keyword", 
                    v(w, h(";"))) : p(g);
                }
                function le(e) {
                    return "string" == e ? v() : p(ue, se);
                }
                function ue(e, t) {
                    return "{" == e ? H(ue, "}") : ("variable" == e && m(t), v());
                }
                function se(e, t) {
                    return "from" == t ? (Ie.marked = "keyword", v(w)) : void 0;
                }
                function fe(e) {
                    return "]" == e ? v() : p(j, de);
                }
                function de(e) {
                    return "for" == e ? p(pe, h("]")) : "," == e ? v(N(E, "]")) : p(N(j, "]"));
                }
                function pe(e) {
                    return "for" == e ? v(R, pe) : "if" == e ? v(w, pe) : void 0;
                }
                var ve, me, ye = t.indentUnit, be = r.statementIndent, ke = r.jsonld, xe = r.json || ke, he = r.typescript, ge = r.wordCharacters || /[\w$\xa1-\uffff]/, we = function() {
                    function e(e) {
                        return {
                            type: e,
                            style: "keyword"
                        };
                    }
                    var t = e("keyword a"), r = e("keyword b"), n = e("keyword c"), a = e("operator"), i = {
                        type: "atom",
                        style: "atom"
                    }, o = {
                        if: e("if"),
                        while: t,
                        with: t,
                        else: r,
                        do: r,
                        try: r,
                        finally: r,
                        return: n,
                        break: n,
                        continue: n,
                        new: n,
                        delete: n,
                        throw: n,
                        debugger: n,
                        var: e("var"),
                        const: e("var"),
                        let: e("var"),
                        function: e("function"),
                        catch: e("catch"),
                        for: e("for"),
                        switch: e("switch"),
                        case: e("case"),
                        default: e("default"),
                        in: a,
                        typeof: a,
                        instanceof: a,
                        true: i,
                        false: i,
                        null: i,
                        undefined: i,
                        NaN: i,
                        Infinity: i,
                        this: e("this"),
                        module: e("module"),
                        class: e("class"),
                        super: e("atom"),
                        yield: n,
                        export: e("export"),
                        import: e("import"),
                        extends: n
                    };
                    if (he) {
                        var c = {
                            type: "variable",
                            style: "variable-3"
                        }, l = {
                            interface: e("interface"),
                            extends: e("extends"),
                            constructor: e("constructor"),
                            public: e("public"),
                            private: e("private"),
                            protected: e("protected"),
                            static: e("static"),
                            string: c,
                            number: c,
                            bool: c,
                            any: c
                        };
                        for (var u in l) o[u] = l[u];
                    }
                    return o;
                }(), je = /[+\-*&%=<>!?|~^]/, Me = /^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/, Ve = "([{}])", Ee = {
                    atom: !0,
                    number: !0,
                    variable: !0,
                    string: !0,
                    regexp: !0,
                    this: !0,
                    "jsonld-keyword": !0
                }, Ie = {
                    state: null,
                    column: null,
                    marked: null,
                    cc: null
                }, ze = {
                    name: "this",
                    next: {
                        name: "arguments"
                    }
                };
                return x.lex = !0, {
                    startState: function(e) {
                        var t = {
                            tokenize: i,
                            lastType: "sof",
                            cc: [],
                            lexical: new s((e || 0) - ye, 0, "block", !1),
                            localVars: r.localVars,
                            context: r.localVars && {
                                vars: r.localVars
                            },
                            indented: 0
                        };
                        return r.globalVars && "object" == typeof r.globalVars && (t.globalVars = r.globalVars), 
                        t;
                    },
                    token: function(e, t) {
                        if (e.sol() && (t.lexical.hasOwnProperty("align") || (t.lexical.align = !1), t.indented = e.indentation(), 
                        u(e, t)), t.tokenize != c && e.eatSpace()) return null;
                        var r = t.tokenize(e, t);
                        return "comment" == ve ? r : (t.lastType = "operator" != ve || "++" != me && "--" != me ? ve : "incdec", 
                        d(t, r, ve, me, e));
                    },
                    indent: function(t, n) {
                        if (t.tokenize == c) return e.Pass;
                        if (t.tokenize != i) return 0;
                        var a = n && n.charAt(0), o = t.lexical;
                        if (!/^\s*else\b/.test(n)) for (var l = t.cc.length - 1; l >= 0; --l) {
                            var u = t.cc[l];
                            if (u == x) o = o.prev; else if (u != Q) break;
                        }
                        "stat" == o.type && "}" == a && (o = o.prev), be && ")" == o.type && "stat" == o.prev.type && (o = o.prev);
                        var s = o.type, f = a == s;
                        return "vardef" == s ? o.indented + ("operator" == t.lastType || "," == t.lastType ? o.info + 1 : 0) : "form" == s && "{" == a ? o.indented : "form" == s ? o.indented + ye : "stat" == s ? o.indented + ("operator" == t.lastType || "," == t.lastType ? be || ye : 0) : "switch" != o.info || f || 0 == r.doubleIndentSwitch ? o.align ? o.column + (f ? 0 : 1) : o.indented + (f ? 0 : ye) : o.indented + (/^(?:case|default)\b/.test(n) ? ye : 2 * ye);
                    },
                    electricInput: /^\s*(?:case .*?:|default:|\{|\})$/,
                    blockCommentStart: xe ? null : "/*",
                    blockCommentEnd: xe ? null : "*/",
                    lineComment: xe ? null : "//",
                    fold: "brace",
                    helperType: xe ? "json" : "javascript",
                    jsonldMode: ke,
                    jsonMode: xe
                };
            }), e.registerHelper("wordChars", "javascript", /[\w$]/), e.defineMIME("text/javascript", "javascript"), 
            e.defineMIME("text/ecmascript", "javascript"), e.defineMIME("application/javascript", "javascript"), 
            e.defineMIME("application/x-javascript", "javascript"), e.defineMIME("application/ecmascript", "javascript"), 
            e.defineMIME("application/json", {
                name: "javascript",
                json: !0
            }), e.defineMIME("application/x-json", {
                name: "javascript",
                json: !0
            }), e.defineMIME("application/ld+json", {
                name: "javascript",
                jsonld: !0
            }), e.defineMIME("text/typescript", {
                name: "javascript",
                typescript: !0
            }), e.defineMIME("application/typescript", {
                name: "javascript",
                typescript: !0
            });
        });
        !function(t) {
            "object" == typeof exports && "object" == typeof module ? t(require("../../lib/codemirror"), require("../xml/xml"), require("../javascript/javascript"), require("../css/css")) : "function" == typeof define && define.amd ? define([ "../../lib/codemirror", "../xml/xml", "../javascript/javascript", "../css/css" ], t) : t(CodeMirror);
        }(function(t) {
            "use strict";
            t.defineMode("htmlmixedcounter", function(e, a) {
                function l(t, e) {
                    var a = [ "area", "base", "br", "col", "command", "embed", "frame", "hr", "img", "input", "keygen", "link", "meta", "param", "source", "track", "wbr" ], l = e.htmlState.tagName, n = o.token(t, e.htmlState);
                    if (e.htmlState._stack || (e.htmlState._stack = []), "comment" == n || (0 == t.current().indexOf("<") && 0 != t.current().indexOf("</") && 0 != t.current().indexOf("<!") ? (e.htmlState._last = e.htmlState._last + 1, 
                    e.htmlState._current = e.htmlState._last, e.htmlState._stack.push(e.htmlState._last), 
                    e.htmlState._inClose = !1) : 0 == t.current().indexOf("</") ? e.htmlState._inClose = !0 : 0 == t.current().indexOf(">") && (e.htmlState._inClose || a.indexOf(l) > -1) && (e.htmlState._stack.splice(-1, 1), 
                    e.htmlState._current = e.htmlState._stack[e.htmlState._stack.length - 1], e.htmlState._inClose = !1)), 
                    "script" == l && /\btag\b/.test(n) && ">" == t.current()) {
                        var m = t.string.slice(Math.max(0, t.pos - 100), t.pos).match(/\btype\s*=\s*("[^"]+"|'[^']+'|\S+)[^<]*$/i);
                        (m = m ? m[1] : "") && /[\"\']/.test(m.charAt(0)) && (m = m.slice(1, m.length - 1));
                        for (var d = 0; d < i.length; ++d) {
                            var u = i[d];
                            if ("string" == typeof u.matches ? m == u.matches : u.matches.test(m)) {
                                u.mode && (e.token = c, e.localMode = u.mode, e.localState = u.mode.startState && u.mode.startState(o.indent(e.htmlState, "")));
                                break;
                            }
                        }
                    } else "style" == l && /\btag\b/.test(n) && ">" == t.current() && (e.token = r, 
                    e.localMode = s, e.localState = s.startState(o.indent(e.htmlState, "")));
                    return e.htmlState._current;
                }
                function n(t, e, a) {
                    var n = t.current(), c = n.search(e);
                    return c > -1 ? t.backUp(n.length - c) : n.match(/<\/?$/) && (t.backUp(n.length), 
                    t.match(e, !1) || t.match(n)), a;
                }
                function c(t, e) {
                    return t.match(/^<\/\s*script\s*>/i, !1) ? (e.token = l, e.localState = e.localMode = null, 
                    l(t, e)) : n(t, /<\/\s*script\s*>/, e.localMode.token(t, e.localState));
                }
                function r(t, e) {
                    return t.match(/^<\/\s*style\s*>/i, !1) ? (e.token = l, e.localState = e.localMode = null, 
                    l(t, e)) : n(t, /<\/\s*style\s*>/, s.token(t, e.localState));
                }
                var o = t.getMode(e, {
                    name: "xml",
                    htmlMode: !0,
                    multilineTagIndentFactor: a.multilineTagIndentFactor,
                    multilineTagIndentPastTag: a.multilineTagIndentPastTag
                }), s = t.getMode(e, "css"), i = [], m = a && a.scriptTypes;
                if (i.push({
                    matches: /^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^$/i,
                    mode: t.getMode(e, "javascript")
                }), m) for (var d = 0; d < m.length; ++d) {
                    var u = m[d];
                    i.push({
                        matches: u.matches,
                        mode: u.mode && t.getMode(e, u.mode)
                    });
                }
                return i.push({
                    matches: /./,
                    mode: t.getMode(e, "text/plain")
                }), {
                    startState: function() {
                        return {
                            token: l,
                            localMode: null,
                            localState: null,
                            htmlState: o.startState(),
                            _last: 0,
                            _current: 0,
                            _stack: []
                        };
                    },
                    copyState: function(e) {
                        if (e.localState) var a = t.copyState(e.localMode, e.localState);
                        return {
                            token: e.token,
                            localMode: e.localMode,
                            localState: a,
                            htmlState: t.copyState(o, e.htmlState),
                            _last: e._last,
                            _stack: e._stack,
                            _current: e._current,
                            _inClose: e._inClose
                        };
                    },
                    token: function(t, e) {
                        return e.token(t, e);
                    },
                    indent: function(e, a) {
                        return !e.localMode || /^\s*<\//.test(a) ? o.indent(e.htmlState, a) : e.localMode.indent ? e.localMode.indent(e.localState, a) : t.Pass;
                    },
                    innerMode: function(t) {
                        var e = {
                            state: t.localState || t.htmlState,
                            mode: t.localMode || o
                        };
                        return e._last = t._last, e._stack = t._stack, e._current = t._current, e;
                    }
                };
            }, "xml", "javascript", "css"), t.defineMIME("text/html", "htmlmixed");
        }), onmessage = function(oEvent) {
            var task = JSON.parse(oEvent.data), i = task.index, index = 0, startindex = -1, endindex = -1;
            CodeMirror.runMode(task.html, "htmlmixedcounter", function(text, style) {
                style == i && -1 == startindex && (startindex = index), index += text.length, style == i && startindex > -1 && (endindex = index);
            }), startindex && postMessage(JSON.stringify({
                start: startindex,
                end: endindex
            }));
        };
    }.toString(), ")()" ], {
        type: "application/javascript"
    }));
    angular.module("p-directives").directive("pCode", function($sce) {
        return {
            scope: {},
            link: function($scope, element, attrs, $http) {
                $(element).addClass("collapsed"), $scope.mode = "html";
                self = this;
                element[0].addRule = function() {
                    $(element).hasClass("collapsed") && expand(), self.codeMirror.swapDoc(pEditor.lessDoc), 
                    $scope.mode = "css", $scope.$apply();
                    var anchor = CodeMirror.Pos(self.codeMirror.lastLine());
                    self.codeMirror.replaceRange("\r\n.style {\r\n\r\n}\r\n", anchor), self.codeMirror.focus(), 
                    anchor.line = anchor.line + 1, anchor.ch = 1, self.codeMirror.setCursor(anchor), 
                    self.codeMirror.scrollIntoView(self.codeMirror.lastLine());
                };
                var lastRule;
                element[0].showRule = function(rule) {
                    if (rule == lastRule) return collapse(), void (lastRule = null);
                    lastRule = rule, $(element).hasClass("collapsed") && expand(), self.codeMirror.swapDoc(pEditor.lessDoc), 
                    $scope.mode = "css", $scope.$apply();
                    var pos = self.codeMirror.posFromIndex(rule.anchorIndex);
                    pos.line = pos.line + 1, pos.ch = 0, self.codeMirror.setCursor(pos), self.codeMirror.scrollIntoView(pos.line + 4), 
                    self.codeMirror.focus();
                };
                var self = this;
                this.highlightSelectionWorker = new Worker(htmlSelectionWorkerBlob), this.highlightSelectionWorker.onmessage = function(e) {
                    var ret = JSON.parse(e.data), startindex = ret.start, endindex = ret.end + 1, startPos = self.codeMirror.posFromIndex(startindex), endPos = self.codeMirror.posFromIndex(endindex);
                    self.codeMirror.getDoc().setSelection(startPos, endPos), self.codeMirror.scrollIntoView(startPos);
                };
                var highlightSelection = function() {
                    var self = this, nodes = [], i = (nodes = (nodes = (nodes = (nodes = (nodes = nodes.concat(pEditor.contentDocument.documentElement)).concat(pEditor.contentDocument.head)).concat(Array.prototype.slice.call(pEditor.$realHead[0].querySelectorAll("*")))).concat(pEditor.contentDocument.body)).concat(Array.prototype.slice.call(pEditor.contentDocument.body.querySelectorAll("*")))).indexOf(pEditor.domSelection) + 1, task = {
                        html: self.codeMirror.getValue(),
                        index: i
                    };
                    try {
                        self.highlightSelectionWorker.postMessage(JSON.stringify(task));
                    } catch (e) {
                        console.log(e);
                    }
                };
                this.htmlWorker = new Worker(htmlTidyWorkerBlob), this.htmlWorker.onmessage = function(e) {
                    var ret = JSON.parse(e.data);
                    if ("html" == $scope.mode) var scrollinfo = self.codeMirror.getScrollInfo();
                    pEditor.htmlDoc.setValue(ret.html), pEditor.htmlDoc.clearHistory(), "html" == $scope.mode && (self.codeMirror.scrollTo(scrollinfo.left, scrollinfo.top), 
                    highlightSelection());
                };
                var updateFromDOM = function() {
                    var task = {
                        html: pEditor.html,
                        max_char: null
                    };
                    self.htmlWorker.postMessage(JSON.stringify(task));
                }, updateFromTheme = function() {
                    if (pEditor.themeSupport.getTheme()) {
                        var scrollinfo = self.codeMirror.getScrollInfo();
                        pEditor.lessDoc.setValue(pEditor.themeSupport.getTheme().source), self.codeMirror.scrollTo(scrollinfo.left, scrollinfo.top);
                    } else $scope.themeStatus = "error", $scope.themeStatusText = "No theme found", 
                    $scope.$apply(), pEditor.lessDoc.setValue("No theme found"), pEditor.lessDoc.clearHistory();
                    checkReadonly();
                }, checkReadonly = function() {
                    if ("html" == $scope.mode) self.codeMirror.setOption("readOnly", !1); else {
                        var t = pEditor.themeSupport.getTheme();
                        self.codeMirror.setOption("readOnly", !t);
                    }
                };
                $(window).on("pTabChange", function() {
                    pEditor && (pEditor.htmlDoc || (pEditor.htmlDoc = CodeMirror.Doc("", "text/html"), 
                    updateFromDOM()), pEditor.lessDoc || (pEditor.lessDoc = CodeMirror.Doc("", "text/css"), 
                    updateFromTheme()), "html" == $scope.mode ? self.codeMirror.swapDoc(pEditor.htmlDoc) : self.codeMirror.swapDoc(pEditor.lessDoc), 
                    self.codeMirror.refresh(), checkReadonly());
                }), $(window).on("pDOMLoad pDOMChange", function(e, tag) {
                    e.target == pEditor && "pcode" != tag && updateFromDOM();
                }), $(window).on("pThemeLoaded", function(e, i) {
                    e.target == pEditor && updateFromTheme();
                }), $(window).on("pThemeUnload", function(e, i) {
                    e.target == pEditor && updateFromTheme();
                }), $(window).on("pThemeChange", function(e, i) {
                    e.target == pEditor && $scope.$apply(function() {
                        $scope.themeStatus = i.status, $scope.themeStatusText = i.statusText;
                    });
                }), $(window).on("pThemeCompiled", function(e, i) {
                    e.target == pEditor && ($scope.$apply(function() {
                        $scope.themeStatus = i.status, $scope.themeStatusText = i.statusText;
                    }), i.from && "pcode" == i.from || updateFromTheme());
                }), $(window).on("pDOMSelection", function() {
                    pEditor && pEditor.contentDocument && (self.codeMirror.hasFocus() || "css" == $scope.mode || pEditor.isApplying || (self.tx = null, 
                    highlightSelection()));
                }), this.codeMirror = CodeMirror($(element).find(".code")[0], {
                    value: "",
                    mode: "htmlmixed",
                    theme: "mbo",
                    lineWrapping: !1,
                    autoCloseTags: !0,
                    lineNumbers: !0,
                    smartIndent: !0,
                    tabSize: 2,
                    hintOptions: {
                        completeSingle: !1
                    }
                });
                var activityDelay = null;
                this.codeMirror.on("cursorActivity", function(cm) {
                    activityDelay && clearTimeout(activityDelay), activityDelay = setTimeout(function() {
                        if (activityDelay = null, pEditor && pEditor.contentDocument && cm.hasFocus()) {
                            var pos = self.codeMirror.getDoc().getCursor(), state = self.codeMirror.getTokenAt(pos).state.htmlState;
                            if (state._index[0]) {
                                var i = state._index[0], nodes = [], node = (nodes = (nodes = (nodes = (nodes = (nodes = nodes.concat(pEditor.contentDocument.documentElement)).concat(pEditor.$realHead[0])).concat(Array.prototype.slice.call(pEditor.$realHead[0].querySelectorAll("*")))).concat(pEditor.contentDocument.body)).concat(Array.prototype.slice.call(pEditor.contentDocument.body.querySelectorAll("*"))))[i];
                                node && pEditor.domSelection != node && (pEditor.domSelection = node);
                            }
                        }
                    }, 400);
                });
                var inputDelay = !1;
                this.codeMirror.on("change", function(cm, change) {
                    self.codeMirror.getDoc() && self.codeMirror.getDoc().getCursor() && "css" == self.codeMirror.getModeAt(self.codeMirror.getDoc().getCursor()).name && "+input" == change.origin && change.text && 1 == String(change.text).length && String(change.text).match(/[a-zA-Z]/i) && cm.showHint(), 
                    inputDelay && clearTimeout(inputDelay), inputDelay = setTimeout(function() {
                        if (inputDelay = null, cm.hasFocus()) if ("html" == $scope.mode) {
                            self.t = null;
                            var newDoc = new DOMParser().parseFromString(cm.getValue(), "text/html");
                            pEditor.applyDOMModifications(newDoc, null, null, "pcode");
                        } else "css" == $scope.mode && pEditor.themeSupport.setSource(pEditor.themeSupport.getTheme(), cm.getValue(), null, "pcode");
                    }, 800);
                }), $(element).resizable({
                    minWidth: 0,
                    handles: {
                        n: "#ngrip"
                    },
                    resize: function(event, ui) {
                        $(element).css("position", "fixed"), $(element).css("bottom", "0px"), $(element).css("top", "");
                    },
                    start: function() {
                        var d = $("<div class='iframeCover'\t\t\t\t\t\t\tstyle='z-index:2000;position:fixed;width:100%;top:0px;left:0px;\t\t\t\t\t\t\theight:100%'></div>");
                        $(document.body).append(d);
                    },
                    stop: function(e, ui) {
                        $(".iframeCover").remove(), ui.size.height <= 25 ? $(element).addClass("collapsed") : $(element).removeClass("collapsed");
                    }
                });
                var collapse = function() {
                    $(element).css("height", "0"), $(element).addClass("collapsed");
                }, expand = function() {
                    $(element).css("height", "50%"), $(element).removeClass("collapsed");
                };
                $scope.show = function(mode) {
                    var collapsed = $(element).hasClass("collapsed");
                    $(element).hasClass("collapsed") && expand(), collapsed || "html" != mode || self.codeMirror.getDoc() != pEditor.htmlDoc ? "html" == mode && (lastRule = null, 
                    self.codeMirror.swapDoc(pEditor.htmlDoc), highlightSelection()) : collapse(), 0 == collapsed && "css" == mode && self.codeMirror.getDoc() == pEditor.lessDoc ? collapse() : "css" == mode && self.codeMirror.swapDoc(pEditor.lessDoc), 
                    $scope.mode = mode, checkReadonly();
                };
            },
            template: '         <div id="ngrip" class=" ui-resizable-handle ngrip ui-resizable-n">\t\t\t<ul class="nav nav-tabs darkest nav-justified" role="tablist">\t          <li ng-class="{active: mode ==\'html\'}">\t            <a role="tab" nodata-toggle="tab" ng-click="show(\'html\')">HTML</a>\t          </li>\t          <li ng-class="{active: mode ==\'css\'}">\t            <a role="tab" id="sass-source" nodata-toggle="tab" title="{{themeStatusText}}" ng-click="show(\'css\')">\t            \tSASS \t            \t<i ng-if="themeStatus ==\'ok\'" class="fa fa-fw"></i>\t            \t<i ng-if="themeStatus ==\'compiling\'" class="fa fa-fw fa-spinner fa-spin"></i>\t            \t<i ng-if="themeStatus ==\'error\'" class="fa fa-fw text-warning fa-exclamation-triangle"></i>\t            \t\t            </a>\t          </li>\t        </ul>\t\t</div>\t\t<div class="wrapper"><div class="code"></div></div>'
        };
    });
}();

var inspectorUtil = {};

inspectorUtil.getNode = function(target, i) {
    return String($(pEditor.contentDocument).find(i.selector).length > 0);
}, inspectorUtil.setNode = function(target, i) {
    pEditor.applyDOMModifications(function() {
        "true" == i.value ? $(pEditor.contentDocument.body).append(i.html) : $(pEditor.contentDocument.body).find(i.selector).remove();
    });
}, inspectorUtil.setClass = function(target, i) {
    i.target && (target = $(target).find(i.target)[0]);
    var toRemove = "", classes = i.classes;
    $(classes).each(function() {
        toRemove = toRemove + " " + this.value;
    }), pEditor.applyDOMModifications(function() {
        $(target).removeClass(toRemove), $(target).addClass(i.value);
    });
}, inspectorUtil.getClass = function(target, i) {
    i.target && (target = $(target).find(i.target)[0]);
    var res = [];
    if ("function" === i.classes) classes = i.classes(); else var classes = i.classes;
    return $(classes).each(function() {
        var s = this.value.trim().split(" ");
        if (s.length > 1) {
            var founded = 0;
            $(s).each(function(k, v) {
                $(target).hasClass(v) && founded++;
            }), founded == s.length && (res = [ this.value ]);
        } else 1 == s.length && $(target).hasClass(s[0]) && (res = [ this.value ]);
    }), 0 == res.length ? "" : 1 == res.length ? res[0] : res;
}, inspectorUtil.getTagName = function(target, i) {
    return i.target && (target = $(target).find(i.target)), $(target).prop("tagName");
}, inspectorUtil.setTagName = function(target, i) {
    i.target && (target = $(target).find(i.target)[0]);
    var $new = $("<" + i.value + "></" + i.value + ">");
    pEditor.applyDOMModifications(function() {
        Array.prototype.slice.call(target.attributes).forEach(function(a) {
            $new.attr(a.name, a.value);
        }), $(target).after($new), $new.html($(target).html()), $(target).remove();
    }), pEditor.domSelection = $new[0];
}, inspectorUtil.getAttribute = function(target, i) {
    return i.selector.startsWith("head") ? target = pEditor.$realHead.find(i.selector.replace("head", "")) : i.target && (target = $(target).find(i.target)), 
    $(target).attr(i.attribute);
}, inspectorUtil.setAttribute = function(target, i) {
    !i.selector.startsWith("head") || (target = pEditor.$realHead.find(i.selector.replace("head", ""))).length ? (i.target && (target = $(target).find(i.target)), 
    pEditor.applyDOMModifications(function() {
        $(target).attr(i.attribute, i.value);
    })) : pEditor.applyDOMModifications(function() {
        var $n = $(i.html);
        $n.attr(i.attribute, i.value), pEditor.$realHead.append($n);
    });
}, inspectorUtil.getAttributeParam = function(target, i) {
    i.selector.startsWith("head") ? target = pEditor.$realHead.find(i.selector.replace("head", "")) : i.target && (target = $(target).find(i.target));
    try {
        return new URI($(target).attr(i.attribute)).query(!0)[i.param];
    } catch (e) {
        return "";
    }
}, inspectorUtil.setAttributeParam = function(target, i) {
    i.target && (target = $(target).find(i.target));
    try {
        var newUri = new URI($(target).attr(i.attribute));
        pEditor.applyDOMModifications(function() {
            newUri.setQuery(i.param, i.value), $(target).attr(i.attribute, newUri.toString(!0));
        });
    } catch (e) {}
}, inspectorUtil.getInnerHTML = function(target, i) {
    return i.selector.startsWith("head") ? target = pEditor.$realHead.find(i.selector.replace("head", "")) : i.target && (target = $(target).find(i.target)), 
    $(target).html();
}, inspectorUtil.setInnerHTML = function(target, i) {
    !i.selector.startsWith("head") || (target = pEditor.$realHead.find(i.selector.replace("head", ""))).length ? (i.target && (target = $(target).find(i.target)), 
    pEditor.applyDOMModifications(function() {
        $(target).html(i.value);
    })) : pEditor.applyDOMModifications(function() {
        var $n = $(i.html);
        $n.html(i.value), pEditor.$realHead.append($n);
    });
}, inspectorUtil.setInlineStyle = function(target, i) {
    i.target && (target = $(target).find(i.target)), pEditor.applyDOMModifications(function() {
        i.value ? "background-image" == i.style && 0 != i.value.indexOf("url(") && ("win32" == process.platform && (i.value = i.value.replace(/\\/g, "/")), 
        i.value = "url('" + i.value + "')") : i.value = "", $(target).css(i.style, i.value);
    });
}, inspectorUtil.getInlineStyle = function(target, i) {
    return i.target && (target = $(target).find(i.target)), $(target).css("backgroundImage");
}, inspectorUtil.setSassVariable = function(target, i) {
    var t = pEditor.themeSupport.getTheme();
    if (t) {
        var founded = !1, remove = !1, lastImportKey = !1;
        $(t.model).each(function(k, v) {
            if ("@import" == v && (lastImportKey = k), "var" == v.type && v.key == i.sassVariable) {
                "" == i.value ? remove = k : founded = !0, v.value = i.value;
                var s = -1;
                $(v.chunks).each(function(i, c) {
                    if (/[^\s:]/.test(c)) return s = i, !1;
                });
                var newChunks = v.chunks.slice(0, s);
                newChunks.push(i.value + ";\r\n"), v.chunks = newChunks;
            }
        }), remove ? t.model.splice(remove, 1) : !founded && lastImportKey && (t.model.splice(lastImportKey - 1, 0, {
            type: "var",
            key: i.sassVariable,
            chunks: [ ": " + i.value + ";" ]
        }), t.model.splice(lastImportKey - 1, 0, "\r\n")), i.require && i.require.forEach(function(entry) {
            inspectorUtil.setSassVariable(null, {
                sassVariable: entry.sassVariable,
                value: i.value ? entry.value : ""
            });
        }), pEditor.themeSupport.serialize("inspector");
    }
}, inspectorUtil.getSassVariable = function(target, i) {
    var t = pEditor.themeSupport.getTheme();
    if (!t) return null;
    if (t && !t.model) return "...";
    for (var x = 0; x < t.model.length; x++) if (t.model[x].type && "var" == t.model[x].type && t.model[x].key == i.sassVariable) return t.model[x].chunks.join("").match(/[^\s:][^\;]+/)[0];
}, inspectorUtil.getSassMap = function(target, i) {
    var t = pEditor.themeSupport.getTheme();
    if (!t) return null;
    if (t && !t.model) return "...";
    for (var map = "", x = 0; x < t.model.length; x++) t.model[x].type && "var" == t.model[x].type && t.model[x].key == i.sassMap[0] && (map = t.model[x].chunks.join("").match(/[^\s:][^\;]+/)[0]);
    var parts = new RegExp("(" + i.sassMap[1] + "):[\\s]*([\\w$#]+)", "g").exec(map);
    return parts && parts.length >= 3 ? parts[2] : "";
}, inspectorUtil.setSassMap = function(target, i) {
    var t = pEditor.themeSupport.getTheme();
    if (!t) return null;
    if (t && !t.model) return "...";
    for (var firstVarPosition, x = 0; x < t.model.length; x++) if (t.model[x].type && "var" == t.model[x].type && !firstVarPosition && (firstVarPosition = x - 1), 
    t.model[x].type && "var" == t.model[x].type && t.model[x].key == i.sassMap[0]) {
        t.model[x];
        var mapString = t.model[x].chunks.join(""), r = new RegExp("(" + i.sassMap[1] + ":[\\s]*)[$]?[\\w-#]*", "g");
        if (mapString.match(r)) t.model[x].chunks = [ mapString.replace(r, "$1" + i.value) ]; else {
            r = new RegExp("([\\s,]*\\)\\s*(\\!default)?;)$");
            t.model[x].chunks = [ mapString.replace(r, ",\r\n  " + i.sassMap[1] + ": " + i.value + "$1") ];
        }
    }
    firstVarPosition = firstVarPosition || 0, pEditor.themeSupport.serialize("inspector");
}, angular.module("p-directives").directive("pInspector", [ "pingendo", "$compile", function(pingendo, $compile) {
    return {
        scope: {},
        link: function($scope, element, attrs) {
            $scope.inspectors = pInspectors;
            var $form = $(element.find("form"));
            $scope.model = [], $scope.change = function(i) {
                i._setter && setTimeout(function() {
                    i._setter(i._target, i);
                }, 1);
            }, $(window).on("pDOMSelection pDOMChange", function() {
                var $s = $(pEditor.domSelection);
                $scope.$apply(function() {
                    var s = matchingSnippet(pEditor.domSelection);
                    s && s.catch && ($s = $s.add($(pEditor.domSelection).find(s.catch)));
                    pEditor.themeSupport.getTheme();
                    for (var x = 0; x < $scope.model.length; x++) {
                        var i = $scope.model[x];
                        i._target = null, i.sassVariable || i.sassMap || (i.visible = "seo" == i.type || "theme" == i.type || "page-settings" == i.type || "effects" == i.type, 
                        $s.each(function(k, node) {
                            $(node).is(i.selector) && (i.visible = !0, i._target || (i._target = node));
                        }), i.visible && i._getter && (i.value = i._getter(i._target, i)), i.visible && i.override && $($scope.model).each(function() {
                            this.id == i.override && (this.visible = !1);
                        }));
                    }
                });
            });
            for (var x = 0; x < pInspectors.length; x++) {
                var i = pInspectors[x], $control = $("<div ng-show='model[" + x + "].visible' class='inspector " + i.id + "'></div>");
                if ($scope.model[x] = i, i.info) var popover = '<a data-toggle="popover" title="Popover title" data-content="' + i.info + '" data-original-title="When use it?"><i class="fa fa-info"  aria-hidden="true"></i></a>';
                if (i.label = i.info ? i.label + popover : i.label, $control.append("<label class='label'>" + i.label + "</label>"), 
                $control.find('[data-toggle="popover"]').popover({
                    placement: "top",
                    trigger: "hover"
                }), i.classes) {
                    $select = $("<select ng-model='model[" + x + "].value' ng-change='change(model[" + x + "])' class='control'></select>");
                    $(i.classes).each(function() {
                        var $o = $("<option value='" + this.value + "'>" + this.label + "</option>");
                        $select.append($o);
                    }), i._setter || (i._setter = inspectorUtil.setClass), i._getter || (i._getter = inspectorUtil.getClass), 
                    $control.append($select);
                } else if (i.style) {
                    $input = $('<input ng-model-options=\'{ updateOn: "default blur", debounce: { "default": 500, "blur": 0 } }\' ng-model=\'model[' + x + "].value' ng-change='change(model[" + x + "])' class='control'></input>");
                    $control.append($input), i._setter = inspectorUtil.setInlineStyle, i._getter = inspectorUtil.getInlineStyle;
                } else if (i.attribute && !i.options) {
                    $input = $('<textarea resizable=\'false\' ng-model-options=\'{ updateOn: "default blur", debounce: { "default": 500, "blur": 0 } }\' ng-model=\'model[' + x + "].value' ng-change='change(model[" + x + "])' class='control'></textarea>");
                    i.long && $input.addClass("long"), $control.append($input), i._setter || i.param ? !i._setter && i.param && (i._setter = inspectorUtil.setAttributeParam) : i._setter = inspectorUtil.setAttribute, 
                    i._getter || i.param ? !i._getter && i.param && (i._getter = inspectorUtil.getAttributeParam) : i._getter = inspectorUtil.getAttribute;
                } else if (i.attribute && i.options) {
                    $select = $("<select ng-model='model[" + x + "].value' ng-change='change(model[" + x + "])' class='control'></select>");
                    $control.append($select), $(i.options).each(function() {
                        var $o = $("<option value='" + this.value + "'>" + this.label + "</option>");
                        $select.append($o);
                    }), i._setter = inspectorUtil.setAttribute, i._getter = inspectorUtil.getAttribute;
                } else if (i.tags) {
                    $select = $("<select ng-model='model[" + x + "].value' ng-change='change(model[" + x + "])' class='control'></select>");
                    $control.append($select), $(i.tags).each(function() {
                        var $o = $("<option value='" + this.value + "'>" + this.label + "</option>");
                        $select.append($o);
                    }), i._setter = inspectorUtil.setTagName, i._getter = inspectorUtil.getTagName;
                } else if (i.innerHTML) {
                    $input = $('<textarea resizable=\'false\' ng-model-options=\'{ updateOn: "default blur", debounce: { "default": 500, "blur": 0 } }\' ng-model=\'model[' + x + "].value' ng-change='change(model[" + x + "])' class='control'></textarea>");
                    i.long && $input.addClass("long"), $control.append($input), i._setter = inspectorUtil.setInnerHTML, 
                    i._getter = inspectorUtil.getInnerHTML;
                } else if (i.options && i.sassMap) {
                    $select = $("<select ng-model='model[" + x + "].value' ng-change='change(model[" + x + "])' class='control'></select>");
                    $control.append($select), $(i.options).each(function() {
                        var $o = $("<option value='" + this.value + "'>" + this.label + "</option>");
                        $select.append($o);
                    }), i._setter = inspectorUtil.setSassVariable, i._getter = inspectorUtil.getSassVariable;
                } else if (i.sassMap) {
                    $input = $('<input ng-model-options=\'{ updateOn: "default blur", debounce: { "default": 500, "blur": 0 } }\' ng-model=\'model[' + x + "].value' ng-change='change(model[" + x + "])' class='control'></input>");
                    $control.append($input), i._setter = inspectorUtil.setSassMap, i._getter = inspectorUtil.getSassMap;
                } else if (i.options && i.sassVariable) {
                    $select = $("<select ng-model='model[" + x + "].value' ng-change='change(model[" + x + "])' class='control'></select>");
                    $control.append($select), $(i.options).each(function() {
                        var $o = $("<option value='" + this.value + "'>" + this.label + "</option>");
                        $select.append($o);
                    }), i._setter = inspectorUtil.setSassVariable, i._getter = inspectorUtil.getSassVariable;
                } else if (i.sassVariable) {
                    var $input = $('<input ng-model-options=\'{ updateOn: "default blur", debounce: { "default": 500, "blur": 0 } }\' ng-model=\'model[' + x + "].value' ng-change='change(model[" + x + "])' class='control'></input>");
                    $control.append($input), i._setter = inspectorUtil.setSassVariable, i._getter = inspectorUtil.getSassVariable;
                } else if (i.html) {
                    $select = $("<select ng-model='model[" + x + "].value' ng-change='change(model[" + x + "])' class='control'></select>");
                    $control.append($select), $(i.options).each(function() {
                        var $o = $("<option value='" + this.value + "'>" + this.label + "</option>");
                        $select.append($o);
                    }), i._setter = inspectorUtil.setNode, i._getter = inspectorUtil.getNode;
                } else if (i.group) {
                    var $select = $("<p-inspector-group group='" + i.group + "'></p-inspector-group>");
                    $control.append($select);
                }
                i.customType && ($control.find(".control").attr(i.customType, i.controlParam ? i.controlParam : "true"), 
                $control.find(".control").addClass(i.customType)), i.override ? $form.find("." + i.override).after($control) : $form.find("." + i.type).append($control);
            }
            $compile($form)($scope);
        },
        controllerAs: "c",
        controller: function($scope) {
            var self = this;
            $(window).on("pThemeCompiled pThemeChange pThemeLoaded pThemeUnload pTabChange", function(e) {
                if (!pEditor) return self.compiling = !1, void (self.error = null);
                if (pEditor.themeSupport.getTheme() ? ("error" == (t = pEditor.themeSupport.getTheme()).status ? self.error = t.statusText : self.error = null, 
                self.compiling = "compiling" == t.status) : (self.compiling = !1, self.error = null), 
                "pTabChange" != e.type && t && t.from && "inspector" == t.from) $scope.$apply(); else {
                    var t = pEditor.themeSupport.getTheme();
                    $scope.$apply(function() {
                        for (var x = 0; x < $scope.model.length; x++) {
                            var i = $scope.model[x];
                            i && t && (("theme" == i.type || i.sassVariable || i.sassMap) && (i.version && i.version != t.version ? i.visible = !1 : "theme" == i.type ? i.visible = !0 : i.visible = !!t, 
                            i._getter && (i.value = i._getter(pEditor.domSelection, i)), i.override && $($scope.model).each(function() {
                                this.id == i.override && (this.visible = !1);
                            })));
                        }
                    });
                }
            });
        },
        template: '<ul class="nav nav-tabs nav-justified" role="tablist">                      <li class="active">                        <a id="htmlbtn" href="#html" role="tab" data-toggle="tab">ELEMENT</a>                      </li>                      <li class="">                        <a id="themebtn" href="#theme" title="{{c.error}}" role="tab" data-toggle="tab">                        <i id="spinnerLoadingTheme" ng-if="c.compiling == true" class="fa fa-fw fa-spinner fa-spin"></i>                        <i ng-if="c.error" class="fa fa-fw text-warning fa-exclamation-triangle"></i>                        THEME</a>                      </li>                      <li>                        <a id="pagebtn" href="#page" role="tab" data-toggle="tab">PAGE</a>                      </li>                    </ul>                  <div class="tab-content">                    <div class="tab-pane scrollable" id="page" style="width: 100%">                      <form>                      <div class="page-settings">                          <h1 class="header">SETTINGS</h1>                        </div>                        <div class="seo">                          <h1 class="header">SEO</h1>                        </div>                        \x3c!--<div class="effects">                          <h1 class="header">EFFECTS</h1>                        </div>--\x3e                      </form>                    </div>                    <div class="tab-pane scrollable active" id="html" style="width: 100%">                      <form>                        <div  class="tree">                        </div>                        <div  class="node">                        </div>                        <div class="component">                          <h1 class="header">PROPERTIES</h1>                        </div>                        \x3c!--<div class="appearance">                          <h1 class="header">APPEARANCE</h1>                        </div>--\x3e                        <div class="colors">                          <h1 class="header">COLORS</h1>                        </div>                        <div class="spacing">                          <h1 class="header">SPACING</h1>                        </div>                        <div class="text">                          <h1 class="header">TEXT</h1>                        </div>                        \x3c!--<div  class="node">                          <h1 class="header">NODE</h1>                        </div>--\x3e                        <div  class="styles">                          <h1 class="header">STYLES</h1>                          <p-css-rules></p-css-rules>                        </div>                      </form>                    </div>                    <div class="tab-pane scrollable" id="theme" style="width: 100%">                      <form>                        <div class="theme">                          <br>                        </div>                        <div class="theme-settings">                          <h1 class="header">SETTINGS</h1>                        </div>                        <div class="base-colors">                          <h1 class="header">BASE COLORS</h1>                        </div>                        \x3c!--<div class="theme-brand">                          <h1 class="header">BRAND COLORS</h1>                        </div>--\x3e                        <div class="theme-colors">                          <h1 class="header">PALETTE</h1>                        </div>                        <div class="theme-fonts">                          <h1 class="header">TYPOGRAPHY</h1>                        </div>                      </form>                    </div>                  </div>'
    };
} ]), angular.module("p-directives").directive("pColorPicker2", [ "pingendo", "$compile", function(pingendo, $compile) {
    return {
        scope: {
            ngModel: "="
        },
        replace: !0,
        template: "<ul class='list-unstyled list-inline'>                  <li><a class='fa fa-circle' style='color: {{p.body}}'></a></li>                  <li><a class='fa fa-circle' style='color: {{p.primary}}'></a></li>                  <li><a class='fa fa-circle' style='color: {{p.success}}'></a></li>                  <li><a class='fa fa-circle' style='color: {{p.info}}'></a></li>                  <li><a class='fa fa-circle'></a></li>                </ul>",
        link: function($scope, element, attrs, ngModel) {
            $(window).on("pDOMSelection", function() {
                element.find("option").remove();
            });
        },
        controllerAs: "p",
        controller: function($scope) {
            var self = this;
            self.body = "white", $(window).on("pDOMSelection", function() {
                if (!pEditor || !pEditor.themeSupport.getTheme()) return null;
                var t = pEditor.themeSupport.getTheme();
                if (!t.model) return null;
                $scope.$apply(function() {
                    for (var x = 0; x < t.model.length; x++) if (t.model[x].key) {
                        var h1 = pEditor.contentDocument.createElement("h1");
                        h1.classList.add("text-primary");
                        pEditor.contentDocument.defaultView.getComputedStyle(h1);
                        "$body-bg" == t.model[x].key ? self.body = t.model[x].chunks.join("").match(/[^\s:][^\;]+/)[0] : "$brand-primary" == t.model[x].key ? self.primary = t.model[x].chunks.join("").match(/[^\s:][^\;]+/)[0] : "$brand-success" == t.model[x].key ? self.success = t.model[x].chunks.join("").match(/[^\s:][^\;]+/)[0] : "$brand-info" == t.model[x].key && (self.info = t.model[x].chunks.join("").match(/[^\s:][^\;]+/)[0]);
                    }
                });
            });
        }
    };
} ]), pApp.isWeb() ? angular.module("p-directives").directive("pThemePicker", [ "pingendo", "$compile", "githubService", function(pingendo, $compile, githubService) {
    return {
        compile: function(element) {
            var m = element.attr("ng-model"), c = element.attr("ng-change"), $select = $(' <select>                            <option ng-repeat="option in data.availableOptions" value="{{option.name}}">                              {{option.name}}                            </option>                          </select>');
            $select.attr("ng-model", m), $select.attr("ng-change", c), element.replaceWith($select);
            var $n = $("<label ng-show='c.error' title='{{c.error}}'><i class='fa fa-fw text-danger fa-exclamation-triangle'></i> Error compiling SASS</label>");
            element.after($n);
            var $n2 = $("<label ng-show='c.compiling' title='{{c.error}}'><i class='fa fa-spin fa-circle-o-notch text-warning'></i> Compiling SASS</label>");
            element.after($n2);
            var $n3 = $("<label ng-if='!c.compiling && !c.error' title='{{c.error}}'><i class='fa fa-check text-success'></i> SASS compile sucessfull</label>");
            element.after($n3), element.attr("placeholder", "No SASS theme detected");
        },
        controllerAs: "c",
        controller: function($scope) {
            this.error = null;
            var files = [], model = githubService.model;
            githubService.getTree(model.owner, model.repo, model.branch, function(err, tree) {
                if (tree) {
                    for (var x = 0; x < tree.length; x++) {
                        var file = tree[x];
                        file.type = githubService.getFileType(file), "theme" == file.type && files.push({
                            id: x,
                            name: tree[x].path
                        });
                    }
                    $scope.$apply(function() {
                        $scope.data = {
                            model: null,
                            availableOptions: files
                        };
                    });
                }
            });
        }
    };
} ]) : angular.module("p-directives").directive("pThemePicker", [ "pingendo", "$compile", function(pingendo, $compile) {
    return {
        compile: function(element) {
            element.replaceWith('<select ng-model="c.selected"  ng-change="c.execute()" ><option value="load" >Load theme from disk</option><option value="new"  >Create new theme</option></select>');
            var $n = $("<label ng-show='c.error' title='{{c.error}}'><i class='fa fa-fw text-danger fa-exclamation-triangle'></i> Error compiling SASS</label>");
            element.after($n);
            var $n2 = $("<label ng-show='c.compiling' title='{{c.error}}'><i class='fa fa-spin fa-circle-o-notch text-warning'></i> Compiling SASS</label>");
            element.after($n2);
            var $n3 = $("<label ng-if='!c.compiling && !c.error' title='{{c.error}}'><i class='fa fa-check text-success'></i> SASS compile sucessfull</label>");
            element.after($n3), element.attr("placeholder", "No SASS theme detected");
        },
        controllerAs: "c",
        controller: function($scope) {
            var self = this;
            this.error = null, this.selected = "", this.execute = function() {
                "load" == self.selected ? pCommands.execute("pcmd_load_theme") : self.selected;
            }, $(window).on("pThemeChange", function() {
                $scope.$apply(function() {
                    self.error = null, self.compiling = !0;
                });
            }), $(window).on("pThemeCompiled", function(e, i) {
                $scope.$apply(function() {
                    self.compiling = !1, "ok" != i.status ? self.error = i.statusText : self.error = null;
                });
            });
        }
    };
} ]), angular.module("p-directives").directive("pInspectorGroup", [ "pingendo", "$compile", function(pingendo, $compile) {
    return {
        template: "<div class='btn' ng-class='{expanded : pig.expanded}' ng-click='pig.show()'>aas</div>",
        controllerAs: "pig",
        scope: {
            name: "@group"
        },
        controller: function($scope) {
            var self = this;
            self.expanded = !1, self.show = function() {
                self.expanded = !self.expanded;
            };
        }
    };
} ]), angular.module("p-directives").directive("pToolbar", [ function($compile) {
    return {
        controllerAs: "c",
        controller: function($scope, $http, $sce) {
            var self = this;
            this.breadcrumb = null, this.editing = null, this.backURL = null, this.previewURL = null, 
            this.rte = null, this.saving = null, this.dirty = null, this.canOpen = !1, this.createNew = !1, 
            this.hasPreview = !1, this.hasShare = !1, this.hasSaveDropdown = !1, pApp.isDesktop() && (this.hasPreview = !0, 
            this.desktop = !0, this.editing = !0, this.canOpen = !0, this.createNew = !0, this.hasSaveDropdown = !0), 
            pApp.isWeb() && (this.hasPreview = !0, this.hasShare = !0, this.hasSaveDropdown = !0), 
            pApp.isPlayground() && (this.hasPreview = !1, this.editing = !0, this.canOpen = !0, 
            this.createNew = !0), self.command = function(cmd, param) {
                setTimeout(function() {
                    pCommands.execute(cmd, param);
                });
            }, self.previewDesktop = function() {
                pCommands.execute("pcmd_previewDesktopBrowser");
            }, self.setResolution = function(resolution) {
                pCommands.execute("pcmd_resolution", resolution);
            }, self.save = function(cmd) {
                cmd || (cmd = "pcmd_save"), self.saving = !0, pCommands.execute(cmd, function(err) {
                    self.saving = null, $scope.$apply(), err && "no path" != err && alert("An error occured. Your document has not been saved." + err);
                });
            }, $scope.$watch("url", function() {
                var url = $scope.url;
                url && ("edit" == url.mode ? (self.editing = !0, self.breadcrumb = "/" + url.branch + "/" + url.path, 
                self.previewURL = "https://pingendo.com/raw/" + url.owner + "/" + url.repo + "/" + url.branch + "/" + url.path, 
                self.backURL = "/" + url.owner + "/" + url.repo + "/blob/" + url.branch + "/" + url.path, 
                self.settingURL = null) : "tree" == url.mode || "blob" == url.mode ? (self.editing = null, 
                self.breadcrumb = url.owner + "/" + url.repo, self.backURL = "", url.owner.toLowerCase() == $scope.repo.owner.login.toLowerCase() ? self.settingURL = "https://github.com/" + $scope.repo.owner.login + "/" + $scope.repo.name + "/settings" : self.settingURL = null) : "account" == url.mode ? (self.editing = null, 
                self.breadcrumb = "/" + $scope.user.username, self.backURL = "", self.settingURL = null) : (self.editing = null, 
                self.breadcrumb = null, self.backURL = "", self.settingURL = null));
            }), $(window).on("pThemeChange pThemeSaved pDOMSave pDirtyChange", function() {
                self.dirty = pEditor.dirty || pEditor.themeSupport.getTheme() && pEditor.themeSupport.getTheme().isDirty, 
                $scope.$apply();
            }), $(window).on("pTextEditable", function(e, val) {
                self.rte = pEditor.editable, $scope.$apply();
            }), $(window).on("pTabChange", function(e, val) {
                pEditor ? (self.rte = pEditor.editable, self.dirty = pEditor.dirty || pEditor.themeSupport.getTheme() && pEditor.themeSupport.getTheme().isDirty) : (self.rte = null, 
                self.dirty = null, self.pEditor = !1), $scope.$apply();
            });
        },
        template: '          <span style="min-width:33%;text-align:left;white-space:nowrap" class="navbar-brand p-l-md">            <a ng-if="c.backURL" class="p-r-0 fa fa-folder" href="{{c.backURL}}" target="{{c.backURL}}">            <a ng-if="c.settingURL"  class="p-r-0 fa fa-cog" href="{{c.settingURL}}" target="{{c.settingURL}}">            </a>           \x3c!-- <i style="cursor:pointer; font-size:14px; line-height:28px" ng-click="showSettingsProject()" title="Settings" ng-if="repo.owner.login && url.owner.toLowerCase() == repo.owner.login.toLowerCase()" class="fa fa-cog text-white" ></i>--\x3e            {{c.breadcrumb}}          </span>          \x3c!-- file buttons --\x3e          <div ng-if="c.editing" ng-show="!c.rte" class="btn-group">            <a ng-if="c.createNew" class="btn btn-darkest fa fa-file-o" ng-click="c.command(\'pcmd_new\')" title="New"></a>            <a ng-if="c.canOpen || c.playground" class="btn btn-darkest fa fa-folder-open-o"   ng-click="c.command(\'pcmd_openLocal\')" title="Open"></a>          \x3c!--</div>          <div ng-if="c.editing" ng-show="!c.rte" class="btn-group">--\x3e                        <div ng-if="c.hasSaveDropdown" class="btn-group">              <a ng-show="!c.saving" class="btn btn-darkest fa fa-save" ng-clas3s="{disabled: !c.dirty || !c.pEdito}" ng-click="c.save()" title="Save"></a>              <a id="savingBtn" ng-show="c.saving" class="btn btn-darkest fa fa-spinner fa-spin disabled"></a>              <button ng-class="{disabled: !c.dirty || notabs}" type="button" class="btn btn-darkest dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">              <span class="caret"></span>              </button>              <ul class="dropdown-menu">                <li><a ng-click="c.save()">Save all</a></li>                <li><a ng-click="c.save(\'pcmd_saveDocument\')">Save HTML</a></li>                <li><a ng-click="c.save(\'pcmd_saveTheme\')">Save SASS/CSS</a></li>              </ul>            </div>                        <div ng-if="!c.hasSaveDropdown" class="btn-group">              <a ng-show="!c.saving" class="btn btn-darkest fa fa-save" ng-class="{disabled: !c.dirty || notabs}" ng-click="c.save()" title="Save"></a>              <a ng-show="c.saving" class="btn btn-darkest fa fa-spinner fa-spin disabled"></a>            </div>                        <a ng-if="c.hasPreview && !c.desktop" class="btn btn-darkest fa fa-eye" target="{{c.previewURL}}" href="{{c.previewURL}}" title="Preview"></a>            <a ng-if="c.hasPreview && c.desktop "  class="btn btn-darkest fa fa-eye" ng-class="{disabled: c.pEditor}" ng-click="c.previewDesktop()" title="Preview"></a>            <a ng-if="c.hasShare" p-buttonshare title="Share preview"></a>          </div>          \x3c!-- end file buttons --\x3e          \x3c!--<div ng-show="!c.rte && c.editing" class="btn-group">            <a class="btn btn-darkest  fa fa-clone" ng-click="c.command(\'pcmd_clone\')"   title="Clone"></a>            <a class="btn btn-darkest  fa fa-trash"  ng-click="c.command(\'pcmd_delete\')"  title="Delete"></a>          </div>--\x3e          <div ng-show="!c.rte && c.editing" class="btn-group">            <a class="btn btn-darkest  fa fa-undo" ng-click="c.command(\'pcmd_undo\')"   title="Undo"></a>            <a class="btn btn-darkest  fa fa-undo fa-flip-horizontal"  ng-click="c.command(\'pcmd_redo\')"  title="Redo"></a>          </div>          <div ng-show="!c.rte && c.editing" class="btn-group">            <a class="btn btn-darkest resolution-icon fa fa-mobile-phone" ng-click="c.setResolution(\'phone\')"   title="Phone"></a>            <a class="btn btn-darkest resolution-icon fa fa-tablet"  ng-click="c.setResolution(\'tablet\')"  title="Tablet"></a>            <a class="btn btn-darkest resolution-icon fa fa-laptop"  ng-click="c.setResolution(\'laptop\')"  title="Laptop"></a>            <a class="btn btn-darkest resolution-icon fa fa-desktop" ng-click="c.setResolution(\'desktop\')" title="Desktop"></a>          </div>          \x3c!-- RTE buttons --\x3e          <div class="btn-group" ng-show="c.rte">            \x3c!--<a class="btn btn-darkest fa fa-smile-o" ng-click="command(\'pcmd_execCommand_icon\')"  title="Icon"></a>--\x3e            <a class="btn btn-darkest fa fa-bold"          ng-click="c.command(\'pcmd_execCommand_bold\')" title="Bold"></a>            <a class="btn btn-darkest fa fa-italic"        ng-click="c.command(\'pcmd_execCommand_italic\')"  title="Italic"></a>            <a class="btn btn-darkest fa fa-underline"     ng-click="c.command(\'pcmd_execCommand_underline\')"  title="Underline"></a>            <a class="btn btn-darkest fa fa-strikethrough" ng-click="c.command(\'pcmd_execCommand_strikethrough\')"  title="Strikethrough"></a>            <a class="btn btn-darkest fa fa-eraser"        ng-click="c.command(\'pcmd_execCommand_eraser\')"  title="Eraser"></a>            <a class="btn btn-darkest fa fa-link"     ng-click="c.command(\'pcmd_execCommand_link\')"   title="Link"></a>            <a class="btn btn-darkest fa fa-unlink"   ng-click="c.command(\'pcmd_execCommand_unlink\')" title="Unlink"></a>          </div>          \x3c!-- endRTE buttons --\x3e          <p-git-user ng-if="!c.desktop" style="margin-left:auto" class="p-r-md"></p-git-user>          <p-notifier  ng-if="c.desktop" style="margin-left:auto"></p-notifier>'
    };
} ]), xtag.register("p-savedialog", {
    lifecycle: {
        created: function() {},
        inserted: function() {
            window.pSavedialog = this;
            this.innerHTML += '\x3c!-- MODAL SAVE --\x3e                      <div class="modal fade" id="modalSave" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">                        <div class="modal-dialog">                          <div class="modal-content">                            <div class="modal-header">                              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>                              <h4 class="modal-title">Save file</h4>                            </div>                            <div class="modal-body">                            </div>                            <div class="modal-footer">                            <a type="button" name="downloadFile" class="btn btn-primary pull-right">Download your file</a>                            <div class="btn-group pull-left " style="vertical-align: middle;" >                                <a type="button" class="btn btn-success dropdown-toggle" data-toggle="dropdown"><span class="icon-dropbox"></span>&nbsp;&nbsp;Download now &nbsp;&nbsp;<span class="caret"></span>                                </a>                                <ul class="dropdown-menu text-center " role="menu">                                    <li><a name="downloadPingendoWin" href="#">Windows</a>                                    </li>                                    <li><a name="downloadPingendoOs" href="#">Mac OS 10.6 - 10.9</a>                                    </li>                                    <li><a name="downloadPingendoLinux32" href="#linux32">Linux 32</a>                                    </li>                                    <li><a name="downloadPingendoLinux64" href="#linux64">Linux 64</a>                                    </li>                                </ul>&nbsp;&nbsp;                                <br>                                <br>                            </div>                            </div>                          </div>\x3c!-- /.modal-content --\x3e                        </div>\x3c!-- /.modal-dialog --\x3e                      </div>\x3c!-- /.modal --\x3e';
        }
    },
    events: {
        'click:delegate(a[name="downloadPingendoWin"])': function() {
            window.location = "http://download.pingendo.com/pingendo.zip";
        },
        'click:delegate(a[name="downloadPingendoOs"])': function() {
            window.location = "http://download.pingendo.com/Pingendo.dmg";
        },
        'click:delegate(a[name="downloadPingendoLinux32"])': function() {
            window.location = "http://download.pingendo.com/pingendo-linux-i686.zip";
        },
        'click:delegate(a[name="downloadPingendoLinux64"])': function() {
            window.location = "http://download.pingendo.com/pingendo-linux-x86_64.zip";
        }
    },
    accessors: {},
    methods: {
        showDialog: function() {
            $("#modalSave").modal("show");
        },
        hideDialog: function() {
            $("#modalSave").modal("hide");
        }
    }
}), xtag.register("p-contextmenu", {
    lifecycle: {
        created: function() {},
        inserted: function() {
            if ($(document.body).append('<div id="contextMenu" class="dropdown clearfix"></div>'), 
            navigator.platform && "win32" == navigator.platform) var meta = "Ctrl+", shift = "&#x21E7;+", keyReplace = "Shift+Ctrl+F", keyReplaceAll = "Shift+Ctrl+R"; else var meta = "&#x2318;", shift = "&#x21E7;", keyReplace = "&#8997;&#x2318;F", keyReplaceAll = "&#x21E7;&#x2318;&#8997;F";
            this.canvasAndBreadcrumbContextMenu = '        <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu" style="display:block;position:static;margin-bottom:5px;">          <li><a tabindex="-1"  data-command="pcmd_cut"><i class="fa fa-cut"></i> &nbsp;Cut <span style="float:right;">' + meta + 'X</span></a></li>          <li><a tabindex="-1"  data-command="pcmd_copy"><i class="fa fa-copy"></i> &nbsp;Copy <span style="float:right;">' + meta + 'C</span></a></li>          <li><a tabindex="-1"  data-command="pcmd_paste"><i class="fa fa-paste"></i> &nbsp;Paste <span style="float:right;">' + meta + 'P</span></a></li>          <li class="divider"></li>          <li><a tabindex="-1" data-command="pcmd_clone"><i class="fa fa-plus"></i> &nbsp;Clone node<span style="float:right;">' + shift + meta + 'C</span></a></li>          <li><a tabindex="-1" data-command="pcmd_delete"><i class="fa fa-trash-o"></i> &nbsp;Delete node <span style="float:right;"> &#x232b;</span></a></li>        </ul>', 
            this.codeContentContextMenu = '        <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu" style="display:block;position:static;margin-bottom:5px;">          <li><a tabindex="-1"  data-command="pcmd_code_cut"><i class="fa fa-cut"></i> &nbsp;Cut <span style="float:right;">' + meta + 'X</span></a></li>          <li><a tabindex="-1" data-command="pcmd_code_copy"><i class="fa fa-copy"></i> &nbsp;Copy <span style="float:right;">' + meta + 'C</span></a></li>          <li><a tabindex="-1" data-command="pcmd_code_paste"><i class="fa fa-paste"></i> &nbsp;Paste <span style="float:right;">' + meta + 'P</span></a></li>          <li class="divider"></li>          <li><a tabindex="-1" data-command="pcmd_clone"><i class="fa fa-plus"></i> &nbsp;Clone node <span style="float:right;">' + shift + meta + 'C</span></a></li>          <li><a tabindex="-1" data-command="pcmd_delete"><i class="fa fa-trash-o"></i> &nbsp;Delete node<span style="float:right;">' + meta + '&#x232B;</span></a></li>          <li class="divider"></li>          <li><a tabindex="-1" data-command="pcmd_code_find" ><i class="fa fa-search"></i> &nbsp;Find <span style="float:right;">' + meta + 'F</span></a></li>          <li><a tabindex="-1" data-command="pcmd_code_replace" ><i class="fa fa-search-plus"></i> &nbsp;Replace <span style="float:right;">' + keyReplace + '</span></a></li>          <li><a tabindex="-1" data-command="pcmd_code_replace_all" ><i class="fa fa-search-plus"></i> &nbsp;Replace all&nbsp;<span style="float:right;">' + keyReplaceAll + "</span></a></li>        </ul>", 
            this._$contextMenu = $("#contextMenu"), this._$contextMenu.hide();
            var self = this;
            $(document).on("keyup", function(event) {
                switch (event.which) {
                  case 27:
                    self.hide();
                }
            }), $(document.body).on("click", function() {
                self.hide();
            }), $(this._$contextMenu).on("click", "a", function(e) {
                pCommands.execute(this.dataset.command), self.hide();
            });
        },
        removed: function() {},
        attributeChanged: function() {}
    },
    events: {},
    accessors: {},
    methods: {
        show: function(e) {
            if (pEditor.domSelection.tagName) {
                e.currentTarget && e.currentTarget.parentNode && "P-CODE" == e.currentTarget.parentNode.nodeName ? $("#contextMenu").html(this.codeContentContextMenu) : $("#contextMenu").html(this.canvasAndBreadcrumbContextMenu);
                var self = this;
                this._$contextMenu.css({
                    display: "block"
                });
                var h = $("#contextMenu")[0].getBoundingClientRect().height;
                if (e.target.ownerDocument == pEditor.contentDocument) var o = $(pEditor).find("iframe").offset(), x = o.left + e.clientX * pEditor.zoom, y = o.top + e.clientY * pEditor.zoom; else {
                    x = e.clientX;
                    (y = e.clientY) + h > $(document.body).height() && (y = $(document.body).height() - h);
                }
                self._$contextMenu.css({
                    display: "block",
                    left: x - 20,
                    top: y - 10
                });
            }
        },
        hide: function(e) {
            this._$contextMenu.hide();
        }
    }
}), xtag.register("p-editor", {
    lifecycle: {
        created: function() {},
        inserted: function() {
            var self = this;
            window.pEditor = this, this._undoStack = [], this._redoStack = [], this._zeroModificationCount = 0, 
            this._applying = !1, this.resolution = 1440, this.pingendo = angular.element(document.body).injector().get("pingendo"), 
            this.themeSupport = new SCSSSupport(this), this.$realHead = $("<head></head>"), 
            this._wrapper = $("<div class='wrapper'></div>")[0], $(this).append(this._wrapper), 
            this._iframe = document.createElement("iframe"), this._iframe.classList.add("scrollable"), 
            this._iframe.setAttribute("disablehistory", "true"), this._iframe.setAttribute("src", "/empty.html");
            var src = this.getAttribute("p-src"), isBlank = ($(this).find("pre").text(), this.getAttribute("p-blank")), ei = this.pingendo.createEditorInput(src);
            $(this._iframe).one("load", function() {
                self.editorInput = ei;
                var $compile = angular.element(document.body).injector().get("$compile"), $rootScope = angular.element(document.body).injector().get("$rootScope");
                $(self).prepend($compile("<p-version-checker></p-version-checker>")($rootScope)), 
                "true" == isBlank && self._markClean(), self._updateZoom(), $(window).trigger("pTabChange", [ self ]);
            }), $(this._wrapper).append(this._iframe), $(this).append("<p-autoreload></p-autoreload>");
        }
    },
    events: {},
    accessors: {
        inError: {
            get: function() {
                return this._inError;
            },
            set: function(value) {
                this._inError = value, $(this).trigger("sourceError", this._inError);
            }
        },
        nativeSelection: {
            get: function() {
                return this._iframe.contentWindow.getSelection();
            },
            set: function(value) {}
        },
        contentDocument: {
            get: function() {
                return this._iframe.contentDocument;
            },
            set: function(value) {}
        },
        editable: {
            get: function() {
                return this._editable;
            },
            set: function(node) {
                var self = this;
                if (node != this._editable) {
                    if (this._editable && ($(this._editable).removeAttr("contentEditable"), $(this._editable).off("keydown click"), 
                    $(this._editable).find("[contentEditable=true]").removeAttr("contentEditable")), 
                    this._editable && this._recoverfromrte && (this._recoverfromrte = null, this._redoStack = [], 
                    $(this).trigger("pDirtyChange")), !node && this._editable && (this._iframe.contentWindow.getSelection().removeAllRanges(), 
                    $(this._editable).off("keydown click"), $(this).trigger("pDirtyChange"), $(this).trigger("pDOMChange")), 
                    node) {
                        this._recoverfromrte = node.innerHTML;
                        var undoState = {
                            html: self.html,
                            selection: self.domSelectionIndex
                        };
                        this._undoStack.push(undoState);
                        var s = matchingSnippet(node);
                        if (s && s.contentEditable && 1 != s.contentEditable) $editable = $(node).find(s.contentEditable); else var $editable = $(node);
                        $editable.attr("contentEditable", "true"), this.nativeSelection.removeAllRanges();
                        var range = this.contentDocument.createRange();
                        range.selectNodeContents($editable[0]), this.nativeSelection.addRange(range), $(node).on("input", function() {
                            self.applyDOMModifications(function() {}, !0);
                        }), $(node).on("keydown click", function(e) {
                            switch (e.which) {
                              case 27:
                                self.editable.innerHTML = self._recoverfromrte, self._undoStack.pop(), $("p-contextmenu")[0].hide();
                                break;

                              case 32:
                                e.preventDefault(), self.contentDocument.execCommand("insertText", !1, " ");
                                break;

                              case 13:
                                e.preventDefault();
                                var old = e.target.innerHTML;
                                self.contentDocument.execCommand("insertHTML", !1, "<br>"), old == e.target.innerHTML && self.contentDocument.execCommand("insertHTML", !1, "<br><br>");
                                break;

                              default:
                                var node = self.nativeSelection.focusNode;
                                node.nodeType == Node.TEXT_NODE && (node = node.parentNode), pEditor.domSelection != node && (pEditor.domSelection = node);
                            }
                        });
                    } else this._editable && ($(this._editable).off("keyup click"), $(this._editable).off("paste"), 
                    $(this._editable).off("input"));
                    var old = this._editable;
                    this._editable = node, $(this).trigger("pTextEditable", old);
                }
            }
        },
        editorInput: {
            set: function(ei) {
                var self = this;
                this._editorInput = ei, this.uri = this._editorInput.url, this._editorInput.getContent(function(err, data) {
                    if (err) throw JSON.stringify(err);
                    var doc = new DOMParser().parseFromString(data, "text/html");
                    $(doc).find(".pingendo-transient").remove(), self.$fakeHead = $(self.contentDocument.head), 
                    self.$realHead = $(doc.head).clone(), self.themeSupport.load(), $(self.contentDocument.body).replaceWith(doc.body), 
                    self.domSelection = self.contentDocument.body, setTimeout(function() {
                        self.loaded = !0, self.addListeners(), $(self).trigger("pDOMLoad", [ self ]);
                    }, 10);
                });
            },
            get: function() {
                return this._editorInput;
            }
        },
        dirty: {
            get: function() {
                return !!this.editorInput && (this.editorInput.isTemp() || !this.uri || this._undoStack.length != this._zeroModificationCount);
            }
        },
        docShell: {
            get: function() {
                return this._iframe.contentWindow.QueryInterface(Components.interfaces.nsIInterfaceRequestor).getInterface(Components.interfaces.nsIWebNavigation).QueryInterface(Components.interfaces.nsIDocShell);
            },
            set: function() {}
        },
        domSelection: {
            get: function() {
                return this._domSelection ? this._domSelection : this.contentDocument.documentElement.body;
            },
            set: function(element) {
                this.editable && !$.contains(this.editable, element) && this.editable != element && (this.editable = null);
                var sel = [], parents = $(element).parents(this.contentDocument.body).get();
                $(parents).each(function() {
                    matchingSnippet(this) && sel.push(this);
                }), (sel = sel.reverse()).push(element), this._domSelection = element;
                var self = this, nodes = [];
                nodes = (nodes = (nodes = (nodes = (nodes = nodes.concat(self.contentDocument.documentElement)).concat(self.contentDocument.head)).concat(Array.prototype.slice.call(self.$realHead[0].querySelectorAll("*")))).concat(self.contentDocument.body)).concat(Array.prototype.slice.call(self.contentDocument.body.querySelectorAll("*"))), 
                this.domSelectionIndex = nodes.indexOf(self.domSelection), $(this).trigger("pDOMSelection");
            }
        },
        domSelections: {
            get: function() {
                return this._domSelections ? this._domSelections : [ this.domSelection ];
            },
            set: function(elements) {
                this._domSelections = elements, this._domSelection = elements[elements.length - 1], 
                $(this).trigger("pDOMSelection");
            }
        },
        resolution: {
            get: function() {
                return this._resolution;
            },
            set: function(val) {
                this._resolution = val, this._updateZoom(), $(this).trigger("pResolutionChange");
            }
        },
        zoom: {
            get: function() {
                $(document)[0];
                var res = (window.innerWidth - 272) / this.resolution;
                return res > 1 && (res = 1), res;
            }
        },
        uri: {
            get: function() {
                return this._uri ? this._uri : this.getAttribute("uri");
            },
            set: function(uri) {
                this._uri = uri;
            }
        },
        path: {
            get: function() {
                return pApp.resources.convertURItoPath(this.uri);
            }
        },
        sass: {
            get: function() {
                return this.themeSupport.getTheme() ? this.themeSupport.getTheme().source : null;
            }
        },
        html: {
            get: function() {
                return this.contentDocument && this.$realHead && this.$realHead.length ? "<!DOCTYPE html><html>" + this.$realHead[0].outerHTML + this.contentDocument.body.outerHTML + "</html>" : "<html></html>";
            }
        }
    },
    methods: {
        contextmenu: function(event) {
            var target = this.fixOver(event);
            target != this.domSelection && (this.domSelection = target), $("p-contextmenu")[0].show(event);
        },
        click: function(event) {
            if (event.preventDefault(), 2 != event.button) {
                pEditor.contentDocument.activeElement && pEditor.contentDocument.activeElement.blur();
                var target = this.fixOver(event);
                return target != pEditor.domSelection && (this.domSelection = target), !1;
            }
        },
        mousedown: function(event) {
            if (1 == event.which && (!this.editable || event.target != this.editable && !$.contains(this.editable, event.target))) {
                var target = this.fixOver(event);
                this.domSelection != this.contentDocument.body && $.contains(this.domSelection, target) || (this.domSelection = target), 
                this.domSelection.setAttribute("draggable", !0), this._draggable = this.domSelection, 
                document.body.style.cursor = "-webkit-grabbing";
            }
        },
        dblclick: function(event) {
            if (event.preventDefault(), !$(event.target).is("input[type=file]") && (!this.editable || event.target != this.editable && !$.contains(this.editable, event.target))) {
                target = this.fixOver(event), target || (target = event.target), "IMG" == target.tagName && filePicker.chooseFile();
                var s = matchingSnippet(target);
                event.target != pEditor.domSelection && $(event.target).is(s.contentEditable) ? this.editable = event.target : s && !s.contentEditable || (this.editable = target);
            }
        },
        dragstart: function(event) {
            document.body.style.cursor = "-webkit-grabbing";
            var $parents = $(event.target).parentsUntil(pElements.containerSelector);
            if (0 == ($parents = $parents.filter(pElements.elementsSelector)).length) el = this._draggable; else var el = $parents.last()[0];
            if (this.domSelection = el, this.editable || event.target == this.contentDocument.body || event.target == this.contentDocument.head || event.target == this.contentDocument.documentElement || $(event.target).is(pGridUtil.CONTAINER_SELECTOR)) return event.preventDefault(), 
            !1;
            this.domSelection.style.opacity = "0.5", event.dataTransfer.effectAllowed = "move", 
            event.dataTransfer.setData("text/html", this.domSelection.outerHTML), this._draggedNodes = [], 
            this._draggedNodes.push(this.domSelection), this._draggedNodesParent = this.domSelection.parentNode;
        },
        dragend: function(event) {
            document.body.style.cursor = "default", this._draggable && (this._draggable.getAttribute("draggable") && this._draggable.removeAttribute("draggable"), 
            this._draggedNodes[0].style.opacity = "", this._draggedNodes = null);
        },
        computeInsertionTarget: function(node, target) {
            var nodeSnippet = matchingSnippet(node);
            if (nodeSnippet && nodeSnippet.fixedParent && !$(target).is(nodeSnippet.fixedParent)) {
                var $closest = $(target).closest(nodeSnippet.fixedParent);
                return $closest.length > 0 ? $closest.get(0) : null;
            }
            return target;
        },
        dragover: function(event) {
            if (this.editable) return event.dataTransfer.effectAllowed = "move", !1;
            this._draggedNodes || (this._draggedNodes = $(event.dataTransfer.getData("text/html"))), 
            event.target, this.contentDocument.documentElement;
        },
        addListeners: function() {
            var self = this;
            this.contentDocument.designMode = "On", this.contentDocument.execCommand("enableObjectResizing", !1, "false"), 
            this.contentDocument.designMode = "Off", this._overlay = document.createElement("p-overlay"), 
            this._overlay.setAttribute("id", "mio"), this._wrapper.appendChild(this._overlay);
            var target = this.contentDocument;
            pApp.isWeb() && navigator.userAgent.toLowerCase().indexOf("firefox") > -1 && (target = this._iframe.contentWindow), 
            target.addEventListener("click", function(e) {
                return self.click(e), !1;
            }, !0), target.addEventListener("dblclick", function(e) {
                self.dblclick(e);
            }), target.addEventListener("keyup", function(e) {
                self.keyup(e);
            }), target.addEventListener("mousedown", function(e) {
                self.mousedown(e);
            }), target.addEventListener("mouseup", function(e) {
                self.mouseup(e);
            }), target.addEventListener("contextmenu", function(e) {
                self.contextmenu(e), e.preventDefault();
            }), target.addEventListener("dragstart", function(e) {
                self.dragstart(e);
            }), target.addEventListener("dragend", function(e) {
                self.dragend(e);
            }), pCommands.bindKeys(self.contentDocument), this._iframe.setAttribute("sandbox", "allow-same-origin");
        },
        mouseup: function(event) {
            document.body.style.cursor = "default", this._draggable && this._draggable.removeAttribute("draggable"), 
            this._draggable = null;
        },
        loadTheme: function(url) {
            var self = this;
            self.themeSupport.getTheme();
            !function() {
                var i = self.themeSupport.getTheme();
                if (i) {
                    if (i.cssURL == url) return void self.themeSupport._tryTheme(url);
                    self.applyDOMModifications(function() {
                        self.$realHead.find("link[rel=stylesheet][href='" + i.cssURL + "']").remove();
                        var $link = $("<link rel='stylesheet'>");
                        $link.attr("href", url), self.$realHead.append($link);
                    });
                } else self.applyDOMModifications(function() {
                    var $link = $("<link rel='stylesheet'>");
                    $link.attr("href", url), self.$realHead.append($link);
                });
            }();
        },
        applyDOMModifications: function(callback, norec, previousHTML, tag) {
            if (!norec && !this.isApplying) {
                if (previousHTML) undoState = {
                    html: previousHTML,
                    selection: this.domSelectionIndex
                }; else var undoState = {
                    html: this.html,
                    selection: this.domSelectionIndex
                };
                this._undoStack.push(undoState), this._redoStack = [];
            }
            var _wasApplying = !1;
            if (this.isApplying && (_wasApplying = !0), this.isApplying = !0, "function" != typeof callback) {
                var domdiff = new window.diffDOM(), diff = domdiff.diff(this.contentDocument.body, callback.body);
                try {
                    domdiff.apply(pEditor.contentDocument.body, diff), this.$realHead = $(callback.head).clone();
                } catch (e) {}
            } else callback();
            _wasApplying || (this.themeSupport.load(), this.isApplying = !1, $(this).trigger("pDirtyChange"), 
            $(this).trigger("pDOMChange", tag));
        },
        fixOver: function(event, doCatch) {
            var target = event.target;
            if (target == this.contentDocument.documentElement && (target = this.contentDocument.body), 
            $(event.target).is(pGridUtil.ROW_SELECTOR) && !$(event.target).is(":empty")) {
                var cells = event.target.querySelectorAll(pGridUtil.CELL_SELECTOR);
                (cells = Array.prototype.slice.call(cells)).reverse();
                for (x = 0; x < cells.length; x++) {
                    var rect = cells[x].getBoundingClientRect();
                    if ($(cells[x].parentNode).is(pGridUtil.ROW_SELECTOR)) height = cells[x].parentNode.getBoundingClientRect().height; else var height = rect.height;
                    if (event.clientX > rect.left && event.clientX < rect.left + rect.width && event.clientY > rect.top && event.clientY < rect.top + height) {
                        target = cells[x];
                        break;
                    }
                }
            }
            for (var x = 0; x < pElements.length; x++) if (pElements[x].catch && $(target).is(pElements[x].catch)) {
                var p = $(target).closest(pElements[x].selector)[0];
                if (p) return p;
            }
            return target;
        },
        fixGroup: function(target) {
            var s = matchingSnippet(target);
            if (s.addTo) {
                var $c = $(target).closest(s.addTo);
                if ($c.length) return pEditor.fixGroup($c.get(0));
            }
            return target;
        },
        keyup: function(e) {},
        handleInsert: function(node, target, position) {
            var self = this;
            this._draggable && (this._draggable.removeAttribute("draggable"), this._draggable = null, 
            node.style.opacity = "", this.domSelection && "" == this.domSelection.getAttribute("style") && this.domSelection.removeAttribute("style"));
            var nodeSnip = matchingSnippet(node);
            nodeSnip && nodeSnip.fixInsertionPoint && (target = nodeSnip.fixInsertionPoint({
                target: target,
                position: position
            }).target), target == this.contentDocument.body && (position = "inside"), this.applyDOMModifications(function() {
                if ("inside" == position) snip = matchingSnippet(target); else var snip = target.parentNode ? matchingSnippet(target.parentNode) : null;
                if (snip && snip.childSelector && "" != snip.childSelector && snip.newChild && 0 == $(node).is(snip.childSelector)) {
                    var $newNode = $(snip.newChild);
                    $newNode.is(pGridUtil.CELL_SELECTOR);
                    $newNode[0].className.match(pGridUtil.MEDIUM_MATCH), "before" == position || "left" == position ? $newNode.insertBefore(target) : "after" == position || "right" == position ? $newNode.insertAfter(target) : "inside" == position && ($(target).children("script").length ? $(target).children("script").first().before($newNode) : $(target).append($newNode));
                    var s = matchingSnippet($newNode[0]);
                    return s && s.addHelper && s.addHelper($newNode[0]), void self.handleInsert(node, $newNode[0], "inside");
                }
                $(node).is(pGridUtil.CELL_SELECTOR);
                target == pEditor.contentDocument.documentElement && (target = pEditor.contentDocument.body, 
                position = "inside"), "before" == position || "left" == position ? node = $(node).insertBefore(target)[0] : "after" == position || "right" == position ? node = $(node).insertAfter(target)[0] : "inside" == position && ($(target).children("script").length ? $(target).children("script").first().before(node) : $(target).append(node)[0]), 
                nodeSnip && nodeSnip.addHelper && nodeSnip.addHelper.call(node, node);
            });
        },
        _saveTemp: function(callback) {
            var i = this.themeSupport.getTheme(), self = this;
            this.editorInput.promptFilename("Untitled.html", function(err, path) {
                path ? (self.editorInput.url = path, i && i.isDirty && i.isTemp() ? self.editorInput.promptFilename("Untitled.css", function(err, path) {
                    if (path) {
                        var relativepath = self.editorInput.relative(path), oldCSSURL = i.cssURL;
                        i.cssURL = relativepath, i.themeURL = relativepath.substr(0, relativepath.lastIndexOf(".") + 1) + "scss", 
                        self._saveTheme(i, function() {
                            self.applyDOMModifications(function() {
                                self.$realHead.find("link[href='" + oldCSSURL + "']").attr("href", relativepath);
                            }), self._saveDocument(function() {
                                self._markClean(), callback && callback();
                            });
                        });
                    } else callback();
                }) : i && i.isDirty && !i.isTemp() ? self._saveDocument(function() {
                    self._saveTheme(i, function() {
                        self._markClean(), callback && callback();
                    });
                }) : self._saveDocument(function() {
                    self._markClean(), callback && callback();
                })) : callback("no path");
            });
        },
        save: function(callback) {
            if (this.editorInput.isTemp()) this._saveTemp(callback); else {
                try {
                    ga("send", "event", "pingendo", "saveExisting");
                } catch (e) {}
                var self = this, i = this.themeSupport.getTheme();
                i && i.isDirty && i.isTemp() ? self.editorInput.promptFilename("Untitled.css", function(err, path) {
                    if (path) {
                        var originalCSSURL = i.cssURL, relativepath = self.editorInput.relative(path);
                        i.cssURL = relativepath, i.themeURL = relativepath.substr(0, relativepath.lastIndexOf(".") + 1) + "scss", 
                        self._saveTheme(i, function(err, data) {
                            self.applyDOMModifications(function() {
                                self.$realHead.find("link[href='" + originalCSSURL + "']").attr("href", relativepath);
                            }), self._saveDocument(function(err, data) {
                                self._markClean(), callback && callback(err, data);
                            });
                        });
                    } else callback();
                }) : i && i.isDirty && !i.isTemp() ? self._saveDocument(function(err, data) {
                    err ? callback(err) : self._saveTheme(i, function() {
                        self._markClean(), callback && callback(err, data);
                    });
                }) : self._saveDocument(function(err, data) {
                    self._markClean(), callback && callback(err, data);
                });
            }
        },
        saveAs: function() {},
        _markClean: function() {
            $(this).trigger("pDirtyChange");
        },
        _saveDocument: function(callback) {
            var self = this;
            self.editable && (self.editable = null);
            var htmlWorker = new Worker(htmlTidyWorkerBlob);
            htmlWorker.onmessage = function(e) {
                var ret = JSON.parse(e.data);
                self.editorInput.save(self.editorInput.url, ret.html, function(err, data) {
                    err || (self._zeroModificationCount = self._undoStack.length, pCommands.execute("pcmd_addToRecents", self.editorInput.url), 
                    $(self).trigger("pDOMSave")), callback && callback(err, data);
                });
            };
            var task = {
                html: self.html,
                max_char: null
            };
            htmlWorker.postMessage(JSON.stringify(task));
        },
        _saveTheme: function(i, callback) {
            var self = this;
            try {
                ga("send", "event", "pingendo", "saveTheme");
            } catch (e) {}
            self.editorInput.save(i.cssURL, i.css, function() {
                self.editorInput.save(i.themeURL, i.source, function() {
                    i.isDirty = !1, $(self).trigger("pThemeSave", [ i ]), callback && callback(null);
                });
            });
        },
        saveAs: function(callback) {},
        _updateZoom: function() {
            if (pTabs) {
                var $p = $(document).find("p-code");
                if (pApp.isWeb()) h = $(window).height() - 64 - $p.height(); else var h = $(window).height() - 64 - 32 - $p.height();
                var w = $(window).width() - 272 - 42;
                if (1440 == this.resolution && w > 1440) this.resolution = w; else {
                    $(this).find("p-version-checker").width(w);
                    var scale = w / this.resolution, $t = $(this).find("iframe, p-overlay");
                    this.resolution > w ? ($t.width(this.resolution), $t.height(h / scale), $t.css("-webkit-transform-origin", "0 0"), 
                    $t.css("-webkit-transform", "scale(" + scale + ")"), $t.css("-moz-transform-origin", "0 0"), 
                    $t.css("-moz-transform", "scale(" + scale + ")"), $t.css("transform-origin", "0 0"), 
                    $t.css("transform", "scale(" + scale + ")")) : ($t.width(this.resolution), $t.height(h), 
                    $t.css("-webkit-transform-origin", "0 0"), $t.css("-webkit-transform", "none"), 
                    $t.css("-moz-transform-origin", "0 0"), $t.css("-moz-transform", "none"), $t.css("transform-origin", "0 0"), 
                    $t.css("transform", "none"));
                }
            }
        },
        undo: function() {
            if (this.editable) this.contentDocument.execCommand("undo", !1); else if (0 != this._undoStack.length) {
                this._redoStack.push({
                    html: this.html,
                    selection: this.domSelectionIndex
                });
                var last = this._undoStack.pop(), doc = new DOMParser().parseFromString(last.html, "text/html");
                this.applyDOMModifications(doc, "true");
                for (var treeWalker = this.contentDocument.createTreeWalker(this.contentDocument, NodeFilter.SHOW_ELEMENT, null, !1), i = 0; treeWalker.nextNode() && (i += 1) != last.selection; ) ;
                $(this).trigger("pDirtyChange"), $(this).trigger("pDOMChange"), this.domSelection = treeWalker.currentNode;
            }
        },
        redo: function() {
            if (this.editable) this.contentDocument.execCommand("redo", !1); else if (0 != this._redoStack.length) {
                this._undoStack.push({
                    html: this.html,
                    selection: this.domSelectionIndex
                });
                var last = this._redoStack.pop(), doc = new DOMParser().parseFromString(last.html, "text/html");
                this.applyDOMModifications(doc, !0);
                var nodes = [];
                return nodes = nodes.concat(this.contentDocument.documentElement), nodes = nodes.concat(this.contentDocument.head), 
                nodes = nodes.concat(Array.prototype.slice.call(this.$realHead[0].querySelectorAll("*"))), 
                nodes = nodes.concat(this.contentDocument.body), nodes = nodes.concat(Array.prototype.slice.call(this.contentDocument.body.querySelectorAll("*"))), 
                $(this).trigger("pDirtyChange"), $(this).trigger("pDOMChange"), void (this.domSelection = nodes[last.selection]);
            }
        },
        dispose: function() {
            $(this.contentDocument).unbind(), $(this).off("pStyleChange", this.styleChangeListener);
        }
    }
}), angular.module("p-directives").directive("pBrowser", function() {
    return {
        scope: {},
        link: function($scope, element, attrs) {
            element.find("iframe").on("load", function() {
                var hostBody = element.find("iframe").contents().find("body")[0];
                console.log("load", element[0].getBoundingClientRect().width, " ", hostBody.scrollHeight);
            }), $scope.source = attrs.src;
        },
        template: '<iframe src="{{source}}"></iframe>'
    };
}), angular.module("p-directives").directive("pVideomodal", [ "$sce", function($sce) {
    return {
        scope: {},
        link: function($scope, element, attrs, $http) {
            var pingendo = angular.element(document.body).injector().get("pingendo");
            $scope.images = [], $scope.toogle = function(value) {
                $scope.mode = value, $scope.activeValue = value, setTimeout(function() {
                    $(window).trigger("resize");
                }, 100);
            }, $scope.open = function(link) {
                pCommands.execute("pcmd_openExternalUrl", link);
            }, $scope.trust = function(url) {
                var t = $sce.trustAsResourceUrl(url);
                return console.log(t), t;
            }, $scope.isGit = null, element[0].show = function(callback) {
                $(element).find(".modal[style='display: block;']").length > 0 || ($scope.isGit = pEditor.editorInput.hasAssets, 
                $scope.images = chunk(pingendo.assets.videos, 3), $scope.$apply(function() {
                    $scope.images = chunk(pingendo.assets.videos, 3);
                }), $(".modal[style='display: block;']").modal("hide"), $scope.callback = callback, 
                $(element).find(".modal").modal());
            }, element[0].close = function() {
                $(element).find(".modal").modal("hide");
            };
        },
        template: '         <div  class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">          <div class="modal-dialog modal-lg">            <div class="modal-content">              <div class="modal-header text-center">                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>              </div>              <div class="modal-body">                <div class="row"  ng-repeat="rows in images">                  <div class="col-sm-4" ng-repeat="img in rows">                    <a href="#" ng-click="callback(img.url)">                      <video width="280px">                        <source src="{{trust(img.url)}}" type="video/mp4">                      </video>                    </a>                  </div>                </div>              </div>            </div>        </div>'
    };
} ]), angular.module("p-directives").directive("pImagemodal", function() {
    return {
        scope: {},
        link: function($scope, element, attrs, $http) {
            $scope.images = chunk(pImages, 3), $scope.mode = $scope.activeValue = "images", 
            $scope.isDesktop = pApp.isDesktop(), $scope.toogle = function(value) {
                $scope.mode = value, $scope.activeValue = value;
            }, $scope.open = function(link) {
                pCommands.execute("pcmd_openExternalUrl", link);
            }, $scope.openLocal = function() {
                $(element).find(".modal").modal("hide"), pApp.dialog.showOpenDialog({
                    title: "Choose a file..",
                    properties: [ "openFile" ]
                }, function(ret) {
                    if (ret) {
                        if (pEditor.editorInput.isTemp()) uri = ret[0]; else var uri = pEditor.editorInput.relative(ret[0]);
                        pEditor.applyDOMModifications(function() {
                            pEditor.domSelection.setAttribute("src", uri), pEditor.domSelection = pEditor.domSelection;
                        });
                    }
                });
            }, $scope.assetsArray = [], $scope.isGit = null, element[0].show = function(callback) {
                $(element).find(".modal[style='display: block;']").length > 0 || ($scope.$apply(function() {
                    $scope.isGit = pApp.isWeb();
                    var dirs = $("p-git")[0].scope.dirs;
                    if (pApp.isWeb() && !$scope.assetsGit) {
                        for (var i = 0; i < dirs.length; i++) if ("asset" == dirs[i].typeTree && !dirs[i].url.toLowerCase().endsWith(".json") && !dirs[i].url.toLowerCase().endsWith(".css") && !dirs[i].url.toLowerCase().endsWith(".scss")) {
                            for (var uri_parts = new URI(dirs[i].url).segment(), imgUrl = "", x = 3; x < uri_parts.length; x++) imgUrl += uri_parts[x], 
                            x != uri_parts.length - 1 && (imgUrl += "/");
                            var activeFilePath = "/" + $("p-git")[0].scope.activeFile.path;
                            imgUrl = "/" + imgUrl;
                            var relUri = new URI(imgUrl).relativeTo(activeFilePath);
                            dirs[i].relativeUrl = relUri.toString(), $scope.assetsArray.push(dirs[i]);
                        }
                        $scope.assetsGit = chunk($scope.assetsArray, 3);
                    }
                }), $(".modal[style='display: block;']").modal("hide"), $scope.callback = callback, 
                $(element).find(".modal").modal());
            }, element[0].close = function() {
                $(element).find(".modal").modal("hide");
            };
        },
        template: '         <div  class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">          <div class="modal-dialog modal-lg">            <div class="modal-content">              <div class="modal-header text-center">                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>                <div class="modal-header text-center">                  <div class="btn-group">                    <a ng-click="toogle(\'images\')" ng-class="{active : activeValue === \'images\' }" class="btn btn-darkest">Photos</a>                    <a href="#" ng-show="isDesktop" ng-click="openLocal()" class="btn btn-darkest">Choose from local files..</a>                    <a ng-show="isGit" ng-click="toogle(\'git\')" ng-class="{active : activeValue === \'git\' }" class="btn btn-darkest ng-hide">Git assets</a>                  </div>              </div>              <div class="modal-body">                <div ng-show="mode == \'images\'"  class="row"  ng-repeat="rows in images ">                  <div class="col-sm-4" ng-repeat="img in rows">                    <figure>                      <a ng-click="callback(img.src)">                      <img class="img-responsive" ng-src="{{img.src}}"></a>                    </figure>                  </div>                </div>                <div ng-show="mode == \'git\'" class="row" ng-repeat="rowsg in assetsGit  ">                  <div class="col-sm-4" ng-repeat="imgg in rowsg | orderBy:\'+path\'  ">                    <figure>                      <a ng-click="callback(imgg.relativeUrl)">                      <img class="img-responsive lazy2 blurry" ng-src="{{imgg.url}}"></a>                    </figure>                  </div>                </div>              </div>            </div>        </div>'
    };
}), angular.module("p-directives").directive("pFontmodal", function($sce) {
    return {
        scope: {},
        link: function($scope, element, attrs, $http) {
            var fontsFamily = [ '"Georgia, serif"', '"Palatino Linotype", "Book Antiqua", Palatino, serif', '"Times New Roman", Times, serif', "Arial, Helvetica, sans-serif", '"Arial Black", Gadget, sans-serif', '"Comic Sans MS", cursive, sans-serif', "Impact, Charcoal, sans-serif", '"Lucida Sans Unicode", "Lucida Grande", sans-serif', "Tahoma, Geneva, sans-serif", '"Trebuchet MS", Helvetica, sans-serif', "Verdana, Geneva, sans-serif", '"Courier New", Courier, monospace', '"Lucida Console", Monaco, monospace' ];
            $scope.fontsRows = chunk(fontsFamily, 3), $(element).find(".modal").on("shown.bs.modal", function() {
                this._init || (this._init = !0, element.find("iframe.lazy").lazyload({
                    container: $(element).find(".modal")
                }));
            }), $scope.iframeUrl = function(font) {
                return $sce.trustAsResourceUrl(HOST + "resources/sdk/googleiframe.html?family=" + font.family);
            }, $scope.cut = function(family) {
                return family.replace(/"/g, "").split(",")[0];
            }, element[0].show = function(callback) {
                $(element).find(".modal[style='display: block;']").length > 0 || ($(".modal[style='display: block;']").modal("hide"), 
                $scope.callback = callback, $(element).find(".modal").modal());
            }, element[0].close = function() {
                $(element).find(".modal").modal("hide");
            };
        },
        template: '         <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">          <div class="modal-dialog modal-lg">            <div class="modal-content">              <div class="modal-header">                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>              </div>              <div class="modal-body">                <div class="row" ng-repeat="row in fontsRows">                  <div class="col-sm-4 text-center  m-y-md p-y-md" ng-repeat="font in row">                    <p ng-click="callback(font)" style="font-family:{{font}}; font-size: 24px;">{{cut(font)}}</p>                  </div>                </div>              </div>            </div>          </div>        </div>'
    };
}), xtag.register("p-storage2", {
    lifecycle: {
        created: function() {},
        inserted: function() {
            window.pStorage = this;
            var self = this;
            if (pApp.isDesktop()) {
                var win = pApp.gui.Window.get();
                win.on("resize", function() {
                    pEditor.temp || pStorage.updateAttributeFile(pEditor.path, null, null, this.width, this.height, null, null, pLayout.$innerLayout.state.south.size, !pLayout.$innerLayout.state.south.isClosed);
                }), win.on("move", function(x, y) {
                    pEditor.temp || pStorage.updateAttributeFile(pEditor.path, null, null, null, null, x, y, null, null);
                }), win.on("maximize", function() {
                    pEditor.temp || pStorage.updateAttributeFile(pEditor.path, null, null, this.width, this.height, this.x, this.y, null, null);
                }), win.on("minimize", function() {
                    pEditor.temp || pStorage.updateAttributeFile(pEditor.path, null, null, this.width, this.height, this.x, this.y, null, null);
                });
            }
            $(window).on("pEditorReady", function() {
                var array = self.getArray();
                if (pApp.isDesktop() && "" != pApp.gui.App.argv && void 0 == sessionStorage.running) $("p-editor")[0].open(pApp.gui.App.argv[0]), 
                sessionStorage.running = !0; else if (array.length > 0) {
                    var checkFile = !1;
                    if (self.checkArray(array), 0 == (array = self.getArray()).length) return void $("p-dashboard")[0].open(!1);
                    for (var x = 0; x < array.length; x++) {
                        sessionStorage.openedFiles ? self.openedFiles = JSON.parse(sessionStorage.openedFiles) : self.openedFiles = [];
                        for (var i = 0; i < self.openedFiles.length; i++) self.openedFiles[i] == array[x].path && (checkFile = !0);
                        if (1 != checkFile) if (self.addOpenedFileToSessionStorage(array[x].path), pLayout.$innerLayout.sizePane("south", array[i].codeSize), 
                        1 == array[i].codeState && pLayout.$innerLayout.state.south.isClosed ? pLayout.$innerLayout.open("south") : 0 != array[i].codeState || pLayout.$innerLayout.state.south.isClosed || pLayout.$innerLayout.close("south"), 
                        0 == x) {
                            array[x].undoStack && (pEditor._undoStack = array[x].undoStack);
                            var win = pApp.gui.Window.get();
                            null != array[x].width && null != array[x].height && (win.width = array[x].width, 
                            win.height = array[x].height), null != array[x].x && null != array[x].y && (win.x = array[x].x, 
                            win.y = array[x].y), pApp.fs.statSync(array[x].path).mtime.getTime() > array[x].mtime ? (pEditor._undoStack = [], 
                            pEditor.open(array[x].path)) : pEditor.open(array[x].path, array[x].html);
                        } else {
                            var arg = [];
                            arg.push(array[x].path), null != array[x].width ? arg.push(array[x].width) : arg.push(""), 
                            null != array[x].height ? arg.push(array[x].height) : arg.push(""), null != array[x].x ? arg.push(array[x].x) : arg.push(""), 
                            null != array[x].y ? arg.push(array[x].y) : arg.push(""), pApp.fs.statSync(array[x].path).mtime.getTime() <= array[x].mtime ? (arg.push(array[x].html), 
                            arg.push(array[x].undoStack)) : (arg.push(""), arg.push("")), pCommands.execute("pcmd_new", arg);
                        }
                    }
                } else if (pApp.isWeb()) {
                    var args = [];
                    args.push(pTemplates[1]), pCommands.execute("pcmd_newFileFromTemplate", args);
                } else $("p-dashboard")[0].open(!1);
                $(pEditor).on("pDOMChange", function(event) {
                    pEditor.temp || self.updateAttributeFile(pEditor.path, pEditor.html, pEditor._undoStack, null, null, null, null, null, null);
                }), $(pEditor).on("pDOMSave", function() {
                    self.updateAttributeFile(pEditor.path, pEditor.html, "", null, null, null, null, null, null);
                });
            });
        },
        removed: function() {},
        attributeChanged: function() {}
    },
    events: {},
    accessors: {},
    methods: {
        addOpenedFileToSessionStorage: function(path) {
            sessionStorage.openedFiles ? this.openedFiles = JSON.parse(sessionStorage.openedFiles) : this.openedFiles = [], 
            this.openedFiles.push(path), sessionStorage.openedFiles = JSON.stringify(this.openedFiles);
        },
        checkArray: function(array) {
            for (var i = 0; i < array.length; i++) pApp.fs.existsSync(array[i].path) || this.remove(array[i].path);
        },
        getArray: function() {
            return localStorage.files ? JSON.parse(localStorage.files) : [];
        },
        remove: function(path) {
            for (var array = this.getArray(), i = 0; i < array.length; i++) array[i].path == path && array.splice(i, 1);
            localStorage.files = JSON.stringify(array);
        },
        add: function(path, dirty) {
            for (var find = !1, array = this.getArray(), i = 0; i < array.length; i++) array[i].path == path && (dirty || (array[i].html = "", 
            array[i].undoStack = !1, array[i].mtime = pApp.fs.statSync(path).mtime.getTime(), 
            array[i].codeSize = pLayout.$innerLayout.state.south.size, array[i].codeState = !pLayout.$innerLayout.state.south.isClosed), 
            find = !0);
            if (0 == find) {
                var obj = new Object();
                obj.path = path, obj.html = "", obj.undoStack = !1, obj.mtime = pApp.fs.statSync(path).mtime.getTime(), 
                obj.codeSize = pLayout.$innerLayout.state.south.size, obj.codeState = !pLayout.$innerLayout.state.south.isClosed, 
                array.push(obj);
            }
            localStorage.files = JSON.stringify(array);
        },
        updateAttributeFile: function(path, html, undoStack, width, height, x, y, codeSize, codeState) {
            function execute() {
                self.t = null;
                for (var array = self.getArray(), i = 0; i < array.length; i++) if (array[i].path == path) {
                    if (!pApp.fs.existsSync(array[i].path)) {
                        self.remove(path);
                        continue;
                    }
                    i, null != html && (array[i].html = html, array[i].mtime = pApp.fs.statSync(path).mtime.getTime()), 
                    null != undoStack && (1 == undoStack.length ? array[i].undoStack = undoStack : [].push(undoStack[0])), 
                    null != width && (array[i].width = width), null != height && (array[i].height = height), 
                    null != x && (array[i].x = x), null != y && (array[i].y = y), codeSize && null != codeSize && (array[i].codeSize = codeSize), 
                    null != codeState && (array[i].codeState = codeState);
                }
                try {
                    localStorage.files = JSON.stringify(array);
                } catch (e) {}
            }
            var self = this;
            self.t && clearTimeout(self.t), self.t = setTimeout(function() {
                execute();
            }, 400);
        }
    }
}), angular.module("p-directives").directive("pSnippets", [ "pingendo", "$compile", "$rootScope", function(pingendo, $compile, $rootScope) {
    return {
        link: function($scope, element, attrs) {
            var isScrolling = !1;
            $(element).find("iframe[src*='theme']").on("load", function() {
                $(this.contentWindow.document.body).empty($iframe);
                var $iframe = $("<iframe src='/empty.html'></iframe>");
                $(this.contentWindow.document.body).append($iframe), ($iframe = $("<iframe src='/assets/4.0.0-beta.1/themes.html'></iframe>")).on("load", function() {
                    $(this.contentWindow.document.body).append("<p>aslkasklsakl</p>");
                }), $(this.contentWindow.document.body).append($iframe);
            }), $(element).find("iframe").on("load", function() {
                initDrag($(this));
                var frame = this;
                $(this.contentWindow).scroll(function() {
                    isScrolling || $(frame).contents().find("body > label").each(function() {
                        var distance = frame.contentWindow.pageYOffset - $(this).offset().top, hash = $(this).attr("id");
                        distance < 30 && distance > -30 ? ($(element).find("[data-category]").removeClass("active"), 
                        $(element).find("[data-category='" + hash + "']").addClass("active")) : distance > 0 && ($(element).find("[data-category]").removeClass("active"), 
                        $(element).find("[data-category='" + hash + "']").addClass("active"));
                    });
                });
            });
            var updateSize = function() {
                $(element).find("iframe").each(function() {
                    $f = $(this);
                    var s = this.getBoundingClientRect().width / this.offsetWidth;
                    $f.css("height", ($(window).height() - 50) / s);
                });
            };
            $(window).on("resize", function() {
                updateSize();
            });
            var self = this;
            $iframe = element.find("iframe.sections"), $iframeComponents = element.find("iframe.components"), 
            $scope.variant = "wireframe";
            $(element).find("a").on("mouseenter", function() {}), $(window).on("pDOMSelection", function(e) {
                element.addClass("collapsed"), element.find(".active").removeClass("active");
            }), element.addClass("collapsed");
            var initDrag = function($frame) {
                $frame.contents().find("head").append("<style>.pi-draggable * {pointer-events:none}; cursor:pointer;</style>"), 
                $frame.contents().find(".pi-draggable").each(function() {
                    $(this).attr("draggable", "true"), this.addEventListener("dragstart", function(e) {
                        self._isDragging = !0, e.dataTransfer.setData("text/plain", e.target.outerHTML), 
                        setTimeout(function() {
                            element.addClass("collapsed"), element.find(".active").removeClass("active");
                        }, 300), e.target.addEventListener("dragend", function() {
                            self._isDragging = !1, window.focus();
                        });
                        try {
                            var $el = $(e.target.outerHTML), id = $el.attr("id");
                            void 0 !== id && !1 !== id && (pAnalytics.track("dragged-" + id), $el.removeAttr("id")), 
                            $el.removeClass("pi-draggable"), $el.removeClass("pi-item"), $el.removeAttr("draggable"), 
                            e.dataTransfer.effectAllowed = "copy", pEditor._draggedNodes = [], pEditor._draggedNodes.push($el[0]);
                        } catch (e) {
                            console.log("Catched error in dragstart", e);
                        }
                    });
                });
            }, updateCSS = function() {
                var $h = $(element).find("iframe").contents().find("head");
                $(element).find("iframe").contents().find("[data-theme]").remove(), $(pEditor.contentDocument.head).find("style").each(function() {
                    var $style = $("<style data-theme='true'></style>");
                    $style[0].appendChild(document.createTextNode(this.innerHTML)), $h.append($style);
                });
            };
            $(window).on("pTabChange", function(e) {
                pEditor && pEditor.themeSupport.getTheme() && updateCSS();
            }), $(window).on("pThemeCompiled ", function(e, i) {
                i && "return" != i.status && updateCSS();
            }), $scope.show = function(w, e) {
                element.removeClass("collapsed"), setTimeout(function() {
                    updateSize();
                });
            }, $scope.scrollTo = function(c) {
                var open = $(element).find(".sections.active").length;
                if (!c && open) return element.addClass("collapsed"), void setTimeout(function() {
                    $(element).find(".active").removeClass("active");
                }, 1);
                $(element).find("iframe").hide(), $("#sections-frame").show();
                var childWindow = $("#sections-frame")[0].contentWindow;
                c ? (isScrolling = !0, $(childWindow.document).find("html, body").animate({
                    scrollTop: childWindow.document.getElementById(c).offsetTop
                }, 500, "swing", function() {
                    isScrolling = !1;
                })) : $(childWindow).trigger("scroll");
            }, $scope.scrollToC = function(c) {
                if (console.log("sctoll to c"), c == $(element).find(".shortcuts .active").attr("data-category")) return element.addClass("collapsed"), 
                void setTimeout(function() {
                    $(element).find(".active").removeClass("active");
                }, 1);
                $(element).find("iframe").hide(), $("#components-frame").show();
                var childWindow = $("#components-frame")[0].contentWindow;
                isScrolling = !0, $(childWindow.document).find("html, body").animate({
                    scrollTop: childWindow.document.getElementById(c).offsetTop
                }, 300, "swing", function() {
                    isScrolling = !1;
                });
            }, $scope.scrollToTheme = function(c) {
                $(element).find("iframe").hide(), $("#themes-frame").show();
                $("#themes-frame")[0].contentWindow;
            };
        },
        template: '           <ul class="shortcuts" role="tablist">          <li class="m-t sections" >              <a draggable="false" title="Sections" href="#sections" ng-click="show(\'sections\');scrollTo()" role="tab" data-toggle="tab">                <i class="fa fa-plus "></i>                <span>SECTIONS</span>              </a>              <ul class="sections-types" role="tablist">                <li data-category="navbars" class="active">                  <a ng-click="show(\'sections\');scrollTo(\'navbars\')" role="tab" data-toggle="tab">NAVBARS</a>                </li>                <li data-category="covers">                  <a ng-click="show(\'sections\');scrollTo(\'covers\')" role="tab" data-toggle="tab">COVERS</a>                </li>                <li data-category="articles">                  <a ng-click="show(\'sections\');scrollTo(\'articles\')" role="tab" data-toggle="tab">ARTICLES</a>                </li>                <li data-category="features">                  <a ng-click="show(\'sections\');scrollTo(\'features\')" role="tab" data-toggle="tab">FEATURES</a>                </li>                <li data-category="galleries">                  <a ng-click="show(\'sections\');scrollTo(\'galleries\')" role="tab" data-toggle="tab">GALLERIES</a>                </li>                <li data-category="social">                  <a ng-click="show(\'sections\');scrollTo(\'social\')" role="tab" data-toggle="tab">SOCIAL</a>                </li>                <li data-category="testimonials">                  <a ng-click="show(\'sections\');scrollTo(\'testimonials\')" role="tab" data-toggle="tab">TESTIMONIALS</a>                </li>                <li data-category="pricing">                  <a ng-click="show(\'sections\');scrollTo(\'pricing\')" role="tab" data-toggle="tab">PRICING</a>                </li>                <li data-category="forms">                  <a ng-click="show(\'sections\');scrollTo(\'forms\')" role="tab" data-toggle="tab">FORMS</a>                </li>                <li data-category="footers">                  <a ng-click="show(\'sections\');scrollTo(\'footers\')" role="tab" data-toggle="tab">FOOTERS</a>                </li>                \x3c!--<li data-category="teams">                  <a ng-click="show(\'sections\');scrollTo(\'teams\')" role="tab" data-toggle="tab">TEAMS</a>                </li>--\x3e              </ul>            </li>            <li data-category="text">              <a draggable="false"  href="#sections" ng-click="show();scrollToC(\'text\')" role="tab" data-toggle="tab">                <i class="fa fa-font"></i>                <span>TEXT</span>              </a>            </li>            <li data-category="buttons">              <a draggable="false"  id="" href="#sections" ng-click="show();scrollToC(\'buttons\')" role="tab" data-toggle="tab">                <i class="fa fa-square-o"></i>                <span>BUTTONS</span>              </a>            </li>            <li data-category="navs">              <a draggable="false" id="" href="#sections" ng-click="show();scrollToC(\'navs\')" role="tab" data-toggle="tab">                 <i class="fa fa-link"></i>                <span>NAVS</span>              </a>            </li>            <li data-category="media">              <a draggable="false" id="" href="#sections" ng-click="show();scrollToC(\'media\')" role="tab" data-toggle="tab">                <i class="fa fa-photo"></i>                <span>MEDIA</span>              </a>            </li>            <li data-category="components">              <a draggable="false" title="Components" href="#sections" ng-click="show();scrollToC(\'components\')" role="tab" data-toggle="tab" >                <i class="fa fa-cube"></i>                <span>COMPONENTS</span>              </a>            </li>            <li data-category="grid">              <a draggable="false" title="Grid" href="#sections" ng-click="show();scrollToC(\'grid\')" role="tab" data-toggle="tab">                <i class="fa fa-th"></i>                <span>GRID</span>              </a>            </li>            \x3c!--<li style=" flex: 1 1 auto"></li>            <li data-category="theme" style="">              <a draggable="false" title="Grid" href="#sections" ng-click="show();scrollToTheme(\'grid\')" role="tab" data-toggle="tab">                <i class="fa fa-adjust"></i>                <span>THEMES</span>              </a>            </li>--\x3e          </ul>            <div id="sections" class="tab-content " >              <div class="panel" style="">                <div class="categories">                  \x3c!--<ul>                    <li data-category="{{cc}}" ng-repeat="cc in componentCategories"><a ng-click="scrollTo(cc)">{{cc}}</a></li>                  </ul>--\x3e                  \x3c!--<ul>                    <li data-category="{{c}}" ng-repeat="c in sectionCategories"><a ng-click="scrollTo(c)">{{c}}</a></li>                  </ul>--\x3e                </div>                <div class="frame">                  <iframe id="sections-frame" class="big" src="/assets/4.0.0-beta.1/sections.html"></iframe>                  <iframe id="components-frame" src="/assets/4.0.0-beta.1/components.html"></iframe>                  \x3c!--<iframe id="themes-frame" src="/assets/4.0.0-beta.1/themes.html"></iframe>--\x3e                </div>              </div>            </div>            \x3c!--<div id="components" class="tab-content">              <iframe id="components-frame" src="/assets/4.0.0-beta.1/components.html"></iframe>            </div>            <div id="grid" class="tab-content">              <h1>GRID</h1>              <iframe src="/assets/grid.html"></iframe>            </div>            <div id="text" class="tab-content">              <h1>TYPOGRAPHY</h1>              <iframe src="/assets/text.html"></iframe>            </div>            <div id="media" class="tab-content">              <h1>MEDIA</h1>              <iframe src="/assets/media.html"></iframe>            </div>            <div id="buttons" class="tab-content">              <h1>NAVIGATION</h1>              <iframe src="/assets/buttons.html"></iframe>            </div>            <div id="controls" class="tab-content">              <h1>COMPONENTS</h1>              <iframe src="/assets/controls.html"></iframe>            </div>--\x3e'
    };
} ]), pApp.isDesktop() && angular.module("p-directives").directive("pNotifier", [ "pingendo", "$sce", function(pingendo, $sce) {
    return {
        template: '<div class="wrapper" ng-class="{\'new-stuff\': cnot.newStuff}">                    <a ng-if="cnot.newStuff" class="btn btn-darkest" ng-click="cnot.show()" data-toggle="dropdown" >New stuff !</a>                    <a ng-if="!cnot.newStuff" class="btn-empty"  data-toggle="dropdown" ></a>                    <ul class="dropdown-menu dropdown-menu-right" style="margin-right:20px">                      <li ng-repeat="log in cnot.logs">                        <a ng-click="cnot.open();cnot.close()" target="_blank">                          <small class="text-muted">{{log.time}}</small>                          <b>{{log.title}}</b><br>                          <small>{{log.text}}</small>                        </a>                      </li>                    </ul>                  </div>                  ',
        controllerAs: "cnot",
        link: function($scope, element) {},
        controller: function($scope) {
            var self = this, lastSeen = window.localStorage.getItem("p-notifier"), mostRecent = null;
            this.newStuff = !1, this.logs = [], fetch("/changelog.html", {
                credentials: "omit"
            }).then(function(a) {
                return a.text();
            }).then(function(res) {
                var doc = new DOMParser().parseFromString(res, "text/html");
                (mostRecent = $(doc).find(".log").first().find("time").attr("datetime")) != lastSeen && (self.newStuff = !0), 
                $(doc).find(".log").each(function() {
                    var log = {
                        title: $(this).find("h1").text(),
                        text: $(this).find("p").text(),
                        time: $(this).find("time").attr("datetime")
                    };
                    self.logs.push(log);
                }), $scope.$apply();
            }), this.show = function() {
                setTimeout(function() {
                    self.newStuff = !1, $scope.$apply();
                }, 500), window.localStorage.setItem("p-notifier", mostRecent);
            }, this.open = function() {
                pCommands.execute("pcmd_openExternalUrl", "https://pingendo.com/changelog.html");
            };
        }
    };
} ]), angular.module("p-directives").directive("pTabs", [ "pingendo", function() {
    return {
        scope: {},
        link: function($scope, element, attrs) {
            $scope.tabs = [], pApp.isGit() && $(element).addClass("no-tabs"), element[0].openEditor = function(url, content, isBlank) {
                if (url) for (var x = 0; x < $scope.tabs.length; x++) if ($scope.tabs[x].url === url && !$(element).find("p-editor")[x].editorInput.isTemp()) return void $scope.activate($scope.tabs[x]);
                $scope.$apply(function() {
                    if (content) tab = {
                        title: url,
                        url: url,
                        active: !0,
                        dirty: !1,
                        content: content,
                        isBlank: isBlank
                    }; else var tab = {
                        title: url,
                        url: url,
                        active: !0,
                        dirty: !1,
                        isBlank: isBlank
                    };
                    $scope.tabs.push(tab), pTabs.activate(tab), pTabs.active = tab;
                });
            }, $scope.empty = function() {
                return 0 != $scope.tabs.length;
            }, $scope.new = function() {
                pCommands.execute("pcmd_new");
            }, $scope.getLabel = function(tab) {
                if (!tab.url) return "";
                var url = tab.url.replace(/\\/g, "/");
                return (url = url.split("/"))[url.length - 1] + (tab.dirty ? " *" : "");
            }, $(window).on("pThemeCompiled", function(e) {
                $scope.$apply(function() {
                    var editor = e.target, editorIndex = $("p-editor").index(editor);
                    $scope.tabs[editorIndex].status = "";
                });
            }), $(window).on("pThemeError", function(e) {
                $scope.$apply(function() {
                    var editor = e.target, editorIndex = $("p-editor").index(editor);
                    $scope.tabs[editorIndex].status = "error";
                });
            }), $(window).on("pDirtyChange pStyleChange pThemeSaved", function(e) {
                var editor = e.target, editorIndex = $("p-editor").index(editor), i = editor.themeSupport.getTheme();
                $scope.tabs[editorIndex].url = editor.editorInput.url, editor.dirty || i && i.isDirty ? $scope.tabs[editorIndex].dirty = !0 : $scope.tabs[editorIndex].dirty = !1;
            }), $scope.activate = function(tab) {
                if (tab.active != tab) {
                    for (var x = 0; x < $scope.tabs.length; x++) if ($scope.tabs[x] === tab) {
                        $scope.tabs[x].active = !0;
                        var e = $(document).find("p-editor")[x];
                    } else $scope.tabs[x].active = !1;
                    e && (element.active = tab, pEditor = e, pEditor._updateZoom(), setTimeout(function() {
                        $(window).trigger("pTabChange", [ pEditor ]);
                    }, 1));
                }
            }, window.pTabs = element, window.pTabs.tabs = $scope.tabs, window.pTabs.close = function(tab) {
                $scope.$apply(function() {
                    $scope.close(tab);
                });
            }, window.pTabs.activate = function(tab) {
                $scope.activate(tab);
            }, window.pTabs.open = function(url, content) {
                setTimeout(function() {
                    $scope.$apply(function() {
                        $scope.open(url, content);
                    });
                });
            }, window.pTabs.openByToolbar = function(url, content) {
                $scope.open(url, content);
            }, $scope.isDesktop = function() {
                return pApp.isDesktop();
            }, $scope.open = function(url, content, isBlank) {
                if (url) for (var x = 0; x < $scope.tabs.length; x++) if ($scope.tabs[x].url === url) return void $scope.activate($scope.tabs[x]);
                if (url) dirty = !1; else if (!url && content) var dirty = !0;
                var tab = {
                    title: url,
                    url: url,
                    active: !0,
                    dashboard: !1,
                    dirty: dirty,
                    content: content,
                    isBlank: isBlank
                };
                $scope.tabs.push(tab), element.active = tab;
            }, $scope.close = function(tab) {
                for (var x = 0; x < $scope.tabs.length; x++) if ($scope.tabs[x] === tab) {
                    tab.active && !0;
                    var editor = $(document).find("p-editor")[x];
                }
                if (editor) {
                    if (!editor.dirty || confirm("Confirm close ?")) {
                        editor.dispose();
                        var copy = $scope.tabs.slice(0);
                        copy.splice(copy.indexOf(tab), 1), $scope.tabs.splice($scope.tabs.indexOf(tab), 1), 
                        copy.length > 0 ? $scope.activate($scope.tabs[$scope.tabs.length - 1]) : setTimeout(function() {
                            element.active = null, pEditor = null, $(window).trigger("pTabChange", [ null ]);
                        });
                    }
                }
            }, setTimeout(function() {
                $(document).trigger("pReady");
            }, 1);
        },
        template: '                   \x3c!--<a href="#"  ng-click="new()" ng-if="!empty()">Click here to create a new page ... </a>--\x3e                  <tabset ng-if="empty()" class="darkest">                    <div class=""></div>                    <tab ng-repeat="tab in tabs" ng-click="activate(tab)" active="tab.active" >                      <tab-heading>                       <span ng-if="!tab.status">{{getLabel(tab)}}&nbsp;&nbsp;</span>                       <span ng-if="tab.status == \'compiling\'" title="Compiling LESS"><i class="fa fa-fw fa-spin fa-circle-o-notch"></i> {{getLabel(tab)}}&nbsp;&nbsp;</span>                       <span ng-if="tab.status == \'error\'" title="Error compiling LESS"><i class="fa fa-fw fa-warning"></i> {{getLabel(tab)}}&nbsp;&nbsp;</span>                       <a ng-click="close(tab)" class="clos fa fa-times"></a>                      </tab-heading>                      <div><p-editor p-src="{{tab.url}}" p-blank="{{tab.isBlank}}" dirty="true">                        <pre>{{tab.content}}</pre>                      </p-editor></div>                    </tab>                  </tabset>'
    };
} ]), angular.module("p-directives").directive("pRestore", [ "pingendo", "$compile", "ModalService", function(pingendo, $compile, ModalService) {
    return {
        scope: {
            ngModel: "="
        },
        link: function($scope, element, $attrs) {
            var self = this, win = require("electron").remote.getCurrentWindow();
            pApp.ipcRenderer = require("electron").ipcRenderer;
            var pingendo = angular.element(document.body).injector().get("pingendo");
            $(document).on("pReady", function() {
                if (null !== localStorage.getItem("state") && JSON.parse(localStorage.state).paths.length > 0 && !pApp.isTest) {
                    var state = JSON.parse(localStorage.state);
                    if (state.paths && state.paths.length > 0) for (var o = 0, i = 0; i < state.paths.length; i++) !function(obj, index) {
                        setTimeout(function() {
                            pApp.fs.existsSync(state.paths[index]) && pingendo.openEditor(state.paths[index], !1, !1);
                        }, 0);
                    }(state.paths[i], o), o++;
                } else pCommands.execute("pcmd_new");
            }), null !== localStorage.getItem("windowbounds") && win.setBounds(JSON.parse(localStorage.getItem("windowbounds")), !0), 
            pApp.ipcRenderer.on("before-quit", function(message) {
                self.saveTabs();
                var dirty = !1;
                $(document).find("p-editor").each(function() {
                    this.dirty && (dirty = !0);
                }), 1 == dirty ? confirm("Would you like to exit whitout saving?") && (self.saveWindowBounds(), 
                pApp.app.exit(1)) : (self.saveWindowBounds(), pApp.app.exit(1));
            }), window.addEventListener("beforeunload", function(e) {
                self.saveTabs(), self.saveWindowBounds();
            }), this.saveTabs = function() {
                for (var paths = [], x = 0; x < pTabs.tabs.length; x++) !0 !== pTabs.tabs[x].isBlank && paths.push(pTabs.tabs[x].url);
                var state = {};
                state.paths = paths, localStorage.state = JSON.stringify(state);
            }, this.saveWindowBounds = function() {
                localStorage.windowbounds = JSON.stringify(win.getBounds());
            };
        },
        controller: function($scope, $element, $attrs) {}
    };
} ]), angular.module("p-directives").directive("pCssRules", [ "pingendo", "$compile", function(pingendo, $compile) {
    return {
        template: "<div>                  <ul class='cssrules'>                  <li ng-repeat='a in css.rules'><input ng-change='css.change(a)' ng-model='a.checked' type='checkbox'>                    <a href='' ng-click='css.edit(a)'>{{a.className}}</a>                  </input></li>                </ul>                \x3c!--<a class='btn btn-inspector btn-sm' href='#' ng-click='css.addRule()'>Presets <i class='fa fa-caret-down'></i></a>--\x3e                <a class='btn btn-inspector btn-sm' href='#' ng-click='css.addRule()'><i class='fa fa-plus'></i> New style</a>                </div>",
        controllerAs: "css",
        controller: function($scope) {
            var self = this;
            this.rules = [], this.addRule = function() {
                $("p-code")[0].addRule();
            }, this.edit = function(rule) {
                $("p-code")[0].showRule(rule);
            }, this.change = function(a) {
                setTimeout(function() {
                    pEditor.applyDOMModifications(function() {
                        console.log(a), a.checked ? $(pEditor.domSelection).addClass(a.className) : $(pEditor.domSelection).removeClass(a.className);
                    });
                }, 1);
            };
            var updateChecked = function() {
                $(self.rules).each(function(k, v) {
                    v.checked = $(pEditor.domSelection).is(v.key);
                });
            };
            $(window).on("pThemeCompiled pTabChange", function() {
                if (self.rules = [], pEditor && pEditor.themeSupport.getTheme()) {
                    var t = pEditor.themeSupport.getTheme();
                    $(t.model).each(function(k, v) {
                        v.type && "CSSrule" == v.type && self.rules.push(v);
                    });
                }
                updateChecked(), $scope.$apply();
            }), $(window).on("pDOMSelection", function() {
                updateChecked(), $scope.$apply();
            });
        }
    };
} ]), angular.module("p-directives").directive("pBreadcrumb", [ "$compile", "pingendo", function($compile, pingendo) {
    return {
        scope: {},
        replace: !0,
        template: '<div>                         <div class="tools">                              <i class=" fa fa-chevron-circle-up fa-2x" data-action="parent"></i>                             <i class=" fa fa-plus-circle fa-2x" data-action="add"></i>                             </div>                            <div id="cmenu" class="dropdown clearfix" style="display:none;position:absolute;z-index:100000">                              <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu" style="display:block;position:static;margin-bottom:5px;">                              </ul>                            </div>                          <div id="tree"></div></div>                          ',
        link: function($scope, element, attrs) {
            var $menu = element.find(".dropdown-menu");
            $(document.body).append($menu);
            var createLI = function(node, snippet, top) {
                var $li = $("<li><a draggable='true'>" + (snippet ? snippet.title : node.tagName) + "</a></li>");
                if ($li.find("a")[0].model = node, $li[0].snippet = snippet, $li[0].model = node, 
                $li.on("mouseover", function() {
                    pEditor._overlay.highlight($(this).find("a")[0].model);
                }), $li.on("mouseout", function() {
                    pEditor._overlay.highlight(null);
                }), node == pEditor.domSelection) {
                    $(pElements).each(function(k, s) {
                        if ($(pEditor.domSelection).is(s.selector) && s.addTo && !top) {
                            var $i = $("<i title='Move up' class='fa fa-chevron-up m-l'></i>");
                            return $i.data("action", "move-up"), $li.append($i), ($i = $("<i title='Move down' class='fa fa-chevron-down m-l'></i>")).data("action", "move-down"), 
                            $li.append($i), !1;
                        }
                    });
                }
                return $li;
            }, populateAddLI = function(parent) {
                $menu.empty();
                var nodes = $($(parent).parents()).add(pEditor.domSelection).get().reverse();
                $(nodes).each(function() {
                    var node = this, empty = !0, parent = this;
                    $(pElements).each(function(k, s) {
                        if (!s.grid && $(node).is(s.addTo)) {
                            empty = !1;
                            var $li = $("<li><a>" + s.title + "</a></li>");
                            $li.find("a").data("snippet", s), $li.find("a").data("target", this), $li.find("a").on("mousedown", function(e) {
                                var s = $(e.target).data("snippet"), $n = $(s.html);
                                s.target && (parent = $(parent).find(s.target)), pEditor.handleInsert($n[0], parent, "inside"), 
                                pEditor.domSelection = pEditor.domSelection;
                            }), $menu.append($li);
                        }
                    }), empty || $menu.append("<li class='divider'></li>");
                }), $menu.children().last().remove(), 0 == $menu.children().length && $menu.append("<li class='disabled'><a class=''>Nothing to add here</a></li>");
            };
            element.on("remove", function() {
                $scope.$destroy(), element.remove();
            });
            var dragged = null;
            element.on("dragstart", function(e) {
                $(e.target).css("color", "blue"), dragged = e.target;
            }), element.on("dragover", function(e) {
                element.find(".dragover").removeClass("dragover"), ($(dragged).closest("ul").is($(e.target).closest("ul")) || $(dragged).closest("ul").is($(e.target).closest("li").find("> ul"))) && (e.preventDefault(), 
                $(e.target).addClass("dragover"));
            }), element.on("drop", function(e) {
                element.find(".dragover").removeClass("dragover"), pEditor.applyDOMModifications(function() {
                    $.contains(e.target.model, dragged.model) ? $(e.target.model).prepend(dragged.model) : $(e.target.model).after(dragged.model);
                }), pEditor.domSelection = dragged.model, dragged = null;
            }), $scope.pElements = pElements, $(element).on("mouseover", function(e) {
                e.target.model && pEditor._overlay.highlight.call(pEditor._overlay, e.target.model);
            }), $(element).on("click", function(e) {
                if ($(e.target).data("action")) switch ($(e.target).data("action")) {
                  case "move-up":
                    pEditor.applyDOMModifications(function() {
                        $(pEditor.domSelection).prev().insertAfter($(pEditor.domSelection));
                    }), pEditor.domSelection = pEditor.domSelection;
                    break;

                  case "move-down":
                    pEditor.applyDOMModifications(function() {
                        $(pEditor.domSelection).next().insertBefore($(pEditor.domSelection));
                    }), pEditor.domSelection = pEditor.domSelection;
                    break;

                  case "add":
                    populateAddLI(pEditor.domSelection), pingendo.openTooltip($menu, e.clientX - 160, e.clientY);
                    break;

                  case "parent":
                    pCommands.execute("pcmd_goToParent");
                    break;

                  default:
                    return;
                } else e.target.model && ($(element).find(".active").removeClass("active"), e.target.parentNode.classList.add("active"), 
                pEditor.domSelection = e.target.model);
            });
            var redraw = function() {
                if (element.find("#tree").empty(), pEditor.domSelection) {
                    var $last = !1, parents = [], lastGroup = !1, toAdd = [], $list = $($(pEditor.domSelection).parents("*:not(html,body)").get()).add(pEditor.domSelection);
                    $($list.get().reverse()).each(function(i, el) {
                        var s = matchingSnippet(this);
                        toAdd.unshift(this), (!s || s && s.group || 0 == i) && (parents = toAdd.concat(parents), 
                        toAdd = [], s && s.group && (lastGroup = s));
                    }), 0 == lastGroup && (parents = toAdd.concat(parents)), console.log("PARENTS ", parents);
                    var lastCatch, lastParent, lastParentSnippet;
                    if ($(parents).each(function(idx) {
                        if ($last) {
                            $ul = $("<ul></ul>");
                            $last.append($ul);
                        } else {
                            var $ul = $("<ul class='tree'></ul>");
                            $last = $ul, $("#tree").append($ul);
                        }
                        if (!lastCatch || !$(this).is(lastCatch)) {
                            var childSnippet = matchingSnippet(this);
                            lastCatch = childSnippet.catch;
                            var p = this;
                            if (console.log("CHILD ADD TO", this, childSnippet.addTo), lastParentSnippet && (lastParentSnippet.grid || lastParentSnippet.group)) {
                                var sel = lastParentSnippet.childrenSelector ? lastParentSnippet.childrenSelector : lastParentSnippet.childSelector;
                                sel || (sel = "> * "), $(lastParent).find(sel).each(function() {
                                    var s = matchingSnippet(this), $li = createLI(this, s);
                                    this == pEditor.domSelection && $li.addClass("active"), this == p && ($last = $li), 
                                    $ul.append($li);
                                });
                            } else {
                                if (0 == idx) $li = createLI(this, childSnippet, !0); else var $li = createLI(this, childSnippet);
                                this == pEditor.domSelection && $li.addClass("active"), $ul.append($li), $last = $li;
                            }
                            lastParent = this, lastParentSnippet = childSnippet;
                        }
                    }), $last && !$last.is(pGridUtil.CELL_SELECTOR)) {
                        var s = $last[0].snippet, $cul = $("<ul></ul>");
                        $last.append($cul), s.group && !s.container && (showAdd = !0);
                        var childrenSelector = s.childrenSelector ? s.childrenSelector : s.childSelector;
                        childrenSelector || (childrenSelector = "> *"), $($last[0].model).find(childrenSelector).each(function() {
                            if (!$(this).is(s.catch)) {
                                var ss = matchingSnippet(this), $li = createLI(this, ss);
                                this == pEditor.domSelection && $li.addClass("active"), $cul.append($li);
                            }
                        });
                    }
                }
            };
            $(window).on("pDOMSelection", function() {
                redraw();
            });
        }
    };
} ]), angular.module("p-directives").directive("pchangelog", function() {
    return {
        controller: function($scope, $http, $sce) {
            $scope.iconClickedClass = "fa fa-star-o", $scope.iconClass = "fa fa-star yellow", 
            $scope.icon = $scope.iconClickedClass;
            var callback = function(idList) {
                $http.get("https://api.trello.com/1/lists/" + idList + "/cards").success(function(data, status, headers, config) {
                    var arrayCards = [];
                    $scope.icon = $scope.iconClickedClass;
                    for (var i = 0; i < 4; i++) {
                        var card = data[i];
                        0 == i && card.id != localStorage.firstIdTrelloCard && ($scope.icon = $scope.iconClass), 
                        0 == i && (localStorage.firstIdTrelloCard = card.id), arrayCards.push(card);
                    }
                    var lastItem = {};
                    lastItem.name = "More..", lastItem.url = "https://trello.com/b/YdLvr2W8/pingendo-development-board", 
                    arrayCards.push(lastItem), $scope.cards = arrayCards;
                }).error(function(data, status, headers, config) {});
            };
            $http.get("https://trello.com/1/boards/YdLvr2W8/lists").success(function(data, status, headers, config) {
                callback(data[data.length - 1].id);
            }).error(function(data, status, headers, config) {}), $scope.openUrl = function(card) {
                pCommands.execute("pcmd_openExternalUrl", card.url);
            };
        },
        link: function($scope, $element, $attrs, $http) {
            $element.on("show.bs.dropdown", function() {
                $scope.$apply(function() {
                    $scope.icon = $scope.iconClickedClass;
                });
            });
        },
        template: '                     <a type="button" class="btn btn-sm btn-darkest dropdown-toggle" ng-class="icon" data-toggle="dropdown"></span></a>                    <ul class="dropdown-menu-right dropdown-menu" >                      <li ng-click="openUrl(card)" ng-repeat="card in cards"><a style="cursor:pointer;">{{card.name}}</a></li>                    </ul>'
    };
});

try {
    angular.module("p-directives").directive("pColorPalettesModal", function() {
        return {
            link: function($scope, element) {
                $scope.palettes = [ {
                    "$body-bg": "white",
                    "$body-color": "#333",
                    "$navbar-default-bg": "white",
                    "$navbar-default-color": "#333",
                    "$navbar-default-link-color": "$navbar-default-color",
                    "$brand-primary": "#0074D9",
                    "$btn-primary-color": "white",
                    "$brand-info": "#4DC1FF",
                    "$btn-info-color": "white"
                }, {
                    "$body-bg": "white",
                    "$body-color": "#333",
                    "$navbar-default-bg": "white",
                    "$navbar-default-color": "#333",
                    "$navbar-default-link-color": "$navbar-default-color",
                    "$brand-primary": "#001f3f",
                    "$btn-primary-color": "white",
                    "$brand-info": "#1A3959",
                    "$btn-info-color": "white"
                }, {
                    "$body-bg": "white",
                    "$body-color": "#333",
                    "$navbar-default-bg": "white",
                    "$navbar-default-color": "#333",
                    "$navbar-default-link-color": "$navbar-default-color",
                    "$brand-primary": "#6F5499",
                    "$btn-primary-color": "white",
                    "$brand-info": "#896EB3",
                    "$btn-info-color": "#333"
                }, {
                    "$body-bg": "white",
                    "$body-color": "#333",
                    "$navbar-default-bg": "white",
                    "$navbar-default-color": "#333",
                    "$navbar-default-link-color": "$navbar-default-color",
                    "$brand-primary": "#85144b",
                    "$btn-info-color": "white",
                    "$brand-info": "#b11b64",
                    "$btn-info-color": "white"
                }, {
                    "$body-bg": "white",
                    "$body-color": "#333",
                    "$navbar-default-bg": "white",
                    "$navbar-default-color": "#333",
                    "$navbar-default-link-color": "$navbar-default-color",
                    "$brand-primary": "#3D9970",
                    "$btn-info-color": "white",
                    "$brand-info": "#57B38A",
                    "$btn-info-color": "white"
                }, {
                    "$body-bg": "white",
                    "$body-color": "#333",
                    "$navbar-default-bg": "white",
                    "$navbar-default-color": "#333",
                    "$navbar-default-link-color": "$navbar-default-color",
                    "$brand-primary": "#FF851B",
                    "$btn-info-color": "white",
                    "$brand-info": "#ffa04e",
                    "$btn-info-color": "white"
                } ];
                for (var colors = [ "white", "#001f3f", "#0074D9", "#7FDBFF", "#39CCCC", "#3D9970", "#2ECC40", "#01FF70", "#FF851B", "#FF4136", "#85144b", "#F012BE", "#B10DC9", "#111111", "#AAAAAA", "#DDDDDD" ], palettes = [], x = 0; x < colors.length; x++) for (var pri = colors[x], y = 0; y < colors.length; y++) {
                    var info = colors[y];
                    palettes.push({
                        "$body-bg": "white",
                        "$body-color": "#333",
                        "$navbar-default-bg": "white",
                        "$navbar-default-color": "#333",
                        "$navbar-default-link-color": "$navbar-default-color",
                        "$brand-primary": pri,
                        "$btn-info-color": "white",
                        "$brand-info": info,
                        "$btn-info-color": "white"
                    });
                }
                $scope.palettesrows = chunk(palettes, 6), $scope.applyPalette = function(palette) {
                    for (var model = pEditor.themeSupport.getTheme().model, x = 0; x < model.length; x++) model[x].type && "lessvar" == model[x].type && palette[model[x].key] && (model[x].value = palette[model[x].key]);
                    setTimeout(function() {
                        pEditor.themeSupport.serialize(""), $(element).find(".modal").modal("hide");
                    });
                }, $(element)[0].show = function() {
                    $(element).find(".modal").modal("show");
                };
            },
            template: '         <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">          <div class="modal-dialog modal-lg">            <div class="modal-content">              <div class="modal-header text-center">              </div>              <div class="modal-body">                <div class="row"  ng-repeat="rows in palettesrows " >                  <div class="col-sm-2" ng-repeat="palette in rows">                    <div class="btn-group" ng-click="applyPalette(palette)">                      <a class="btn" style="background-color:{{palette[\'$brand-primary\']}}; color:{{palette[\'$body-color\']}}">&nbsp;</a>                      <a class="btn" style="background-color:{{palette[\'$brand-info\']}}; color:{{palette[\'$body-color\']}}">&nbsp;</a>                      <a class="btn" style="background-color:{{palette[\'$body-bg\']}}; color:{{palette[\'$body-color\']}}">&nbsp;</a>                    </div>                    \x3c!--<div class="palettepreview .hover" ng-click="applyPalette(palette)">                      <div class="default" style="background-color:{{palette[\'$body-bg\']}}; color:{{palette[\'$body-color\']}}">Default</div>                      <div class="primary" style="background-color:{{palette[\'$brand-primary\']}}; color:{{palette[\'$btn-primary-color\']}}">Primary</div>                      <div class="info" style="background-color:{{palette[\'$brand-info\']}};color:{{palette[\'$btn-info-color\']}}">Info</div></div>                      <br>                      <br>                    </div>--\x3e                  </div>                </div>              </div>            </div>          </div>'
        };
    });
} catch (e) {
    alert(e);
}

try {
    angular.module("p-directives").directive("pFontPalettesModal", function() {
        return {
            link: function($scope, element) {
                $scope.fontpalettes = [ {
                    "@headings-font-family": "Lato",
                    "@font-family-base": "Lato"
                }, {
                    "@headings-font-family": "Libre Baskerville",
                    "@font-family-base": "Ubuntu"
                }, {
                    "@headings-font-family": "Bree Serif",
                    "@font-family-base": "Imprima"
                }, {
                    "@headings-font-family": "Montserrat",
                    "@font-family-base": "Pontano Sans"
                }, {
                    "@headings-font-family": "Oswald",
                    "@font-family-base": "Muli"
                }, {
                    "@headings-font-family": "PT Serif",
                    "@font-family-base": "PT Sans"
                }, {
                    "@headings-font-family": "Vollkorn",
                    "@font-family-base": "Raleway"
                }, {
                    "@headings-font-family": "Roboto Sans",
                    "@font-family-base": "Roboto Sans"
                }, {
                    "@headings-font-family": "Josefin Slab",
                    "@font-family-base": "Roboto Sans"
                }, {
                    "@headings-font-family": "Oxygen",
                    "@font-family-base": "Source Sans Pro"
                }, {
                    "@headings-font-family": "Paytone One",
                    "@font-family-base": "Droid Sans"
                }, {
                    "@headings-font-family": "Lobster",
                    "@font-family-base": "Droid Sans"
                }, {
                    "@font-family-base": "Ledger",
                    "@headings-font-family": "Dancing Script"
                }, {
                    "@font-family-base": "Crimson Text",
                    "@headings-font-family": "Yeseva One"
                }, {
                    "@font-family-base": "Slabo 13px",
                    "@headings-font-family": "Ultra"
                } ], $scope.applyFontPalette = function(palette) {
                    for (var model = pEditor._lessSupport.getThemeImport().model, x = 0; x < model.length; x++) model[x].type && "lessvar" == model[x].type && palette[model[x].key] && (model[x].value = palette[model[x].key]);
                    setTimeout(function() {
                        pEditor._lessSupport.serialize(""), $(element).find(".modal").modal("hide");
                    });
                }, $(element)[0].show = function() {
                    $scope.$apply(function() {
                        $scope.fontsrows = chunk($scope.fontpalettes, 3);
                    }), $(element).find(".modal").modal("show");
                };
            },
            template: '         <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">          <div class="modal-dialog modal-lg">            <div class="modal-content">              <div class="modal-header text-center">              </div>              <div class="modal-body">                <div class="row"  ng-repeat="rows in fontsrows " >                  <div class="col-sm-4" ng-repeat="palette in rows">                     <div class="fontpreview" ng-click="applyFontPalette(palette)" >                      <div ng-class="{\'active\' : fontCombination == \'heading\'}"  >                        <div p-font-preview p-font-preview-size="200" p-font-preview-label="{{palette[\'@headings-font-family\']}}" ng-model="palette[\'@headings-font-family\']"  class="text"></div>                      </div>                      <div ng-class="{\'active\' : fontCombination == \'paragraph\'}" >                        <div p-font-preview p-font-preview-size="200" p-font-preview-label="{{palette[\'@font-family-base\']}} ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. " p-font-preview-size="200" ng-model="palette[\'@font-family-base\']"  class="text" ></div>                      </div>                    </div>                  </div>                </div>              </div>            </div>          </div>'
        };
    });
} catch (e) {
    alert(e);
}

angular.module("p-directives").directive("pFontPalettes", function() {
    return {
        link: function($scope, element, attrs) {
            element.on("click", function() {
                $(document).find("p-font-palettes-modal")[0].show();
            });
        }
    };
}), angular.module("p-directives").directive("pFontPreview", function() {
    return {
        require: "ngModel",
        scope: {},
        template: '<link href="http://fonts.googleapis.com/css?family={{family}}" rel="stylesheet" type="text/css">                  <span style="font-family:{{family}}">{{label}}</span>',
        link: function(scope, element, attrs, ngModelCtrl) {
            scope.$parent.$watch(attrs.ngModel, function() {
                scope.label = attrs.pFontPreviewLabel.replace(/"/g, ""), scope.family = scope.$parent.$eval(attrs.ngModel);
            });
        }
    };
}), angular.module("p-directives").directive("pFontpicker", function() {
    return {
        restrict: "A",
        require: "ngModel",
        link: function(scope, tElement, attr, ngModel) {
            var clearClass = "clear_button", divClass = clearClass + "_div";
            if (!tElement.parent().hasClass("input-group")) {
                tElement.wrap('<div style="" class="input-group">' + tElement.html() + "</div>"), 
                tElement.after("<span class='input-group-btn'><button class='btn btn-darkest fa fa-file-o' type='button'></button></span>");
                var btn = tElement.next();
                btn.on("click", function() {
                    $("p-fontmodal")[0].show(function(result) {
                        result && ($("p-fontmodal")[0].close(), setTimeout(function() {
                            var s = angular.element(tElement).scope();
                            s.$apply(function() {
                                eval("s." + attr.ngModel + " = " + result + ";"), s.update();
                            });
                        }));
                    });
                });
            }
        }
    };
}), xtag.register("p-menu", {
    lifecycle: {
        created: function() {},
        inserted: function() {
            if (pApp.isDesktop()) {
                window.pMenu = self = this;
                var Menu = require("electron").remote.Menu, self = (require("electron").remote.MenuItem, 
                this);
                pMenu.populate = function() {
                    self.arrayMenu = [], "darwin" == process.platform && self.addAppMenu(), self.addFileMenu(), 
                    self.addEditMenu(), self.addThemeMenu(), self.addHelpMenu(), self.refreshRecentsMenu(), 
                    self.menu = Menu.buildFromTemplate(this.arrayMenu), Menu.setApplicationMenu(self.menu), 
                    self.changeStatusItemMenu(), $(window).trigger("menuAppReady");
                }, pMenu.populate(), $(window).on("pTabChange", function() {
                    self.changeStatusItemMenu();
                });
            }
        }
    },
    events: {},
    methods: {
        addAppMenu: function() {
            this.appMenu = {
                label: "Pingendo",
                submenu: [ {
                    label: "About Pingendo",
                    selector: "orderFrontStandardAboutPanel:"
                }, {
                    type: "separator"
                }, {
                    label: "Hide Pingendo",
                    accelerator: "CommandOrControl+H",
                    selector: "hide:"
                }, {
                    label: "Hide Others",
                    accelerator: "CommandOrControl+Shift+H",
                    selector: "hideOtherApplications:"
                }, {
                    label: "Show All",
                    selector: "unhideAllApplications:"
                }, {
                    type: "separator"
                }, {
                    label: "Quit",
                    accelerator: "CommandOrControl+Q",
                    click: function() {
                        pCommands.execute("pcmd_quit");
                    }
                } ]
            }, this.arrayMenu.push(this.appMenu);
        },
        addFileMenu: function() {
            this.fileMenu = {
                label: "File",
                submenu: [ {
                    label: "New",
                    accelerator: "CommandOrControl+N",
                    click: function() {
                        pCommands.execute("pcmd_new");
                    }
                }, {
                    label: "Open..",
                    accelerator: "CommandOrControl+O",
                    click: function() {
                        pCommands.execute("pcmd_openLocal");
                    }
                }, {
                    label: "Open Recent",
                    submenu: []
                }, {
                    type: "separator"
                }, {
                    id: "saveAll",
                    label: "Save",
                    enabled: !1,
                    accelerator: "CommandOrControl+S",
                    click: function() {
                        pCommands.execute("pcmd_save");
                    }
                } ]
            }, "darwin" != process.platform && (this.fileMenu.submenu.push({
                type: "separator"
            }), this.fileMenu.submenu.push({
                label: "Quit",
                accelerator: "CommandOrControl+Q",
                click: function() {
                    pCommands.execute("pcmd_quit");
                }
            })), this.arrayMenu.push(this.fileMenu);
        },
        addEditMenu: function() {
            this.editMenu = {
                label: "Edit",
                submenu: [ {
                    label: "Undo",
                    accelerator: "CommandOrControl+Z",
                    enabled: !1,
                    click: function() {
                        document.activeElement && $(document.activeElement).is("input,textarea") ? document.execCommand("undo") : pEditor && (console.log("p-commands"), 
                        pCommands.execute("pcmd_undo"));
                    }
                }, {
                    label: "Redo",
                    accelerator: "Shift+CommandOrControl+Z",
                    enabled: !1,
                    click: function() {
                        document.activeElement && $(document.activeElement).is("input, textarea") ? document.execCommand("redo") : pEditor && pCommands.execute("pcmd_redo");
                    }
                }, {
                    type: "separator"
                }, {
                    label: "Copy",
                    accelerator: "CommandOrControl+C",
                    selector: "copy:"
                }, {
                    label: "Cut",
                    accelerator: "CommandOrControl+X",
                    selector: "cut:"
                }, {
                    label: "Paste",
                    accelerator: "CommandOrControl+V",
                    selector: "paste:"
                }, {
                    type: "separator"
                }, {
                    label: "Clone",
                    accelerator: "CommandOrControl+Shift+C",
                    enabled: !1,
                    click: function() {
                        pCommands.execute("pcmd_clone");
                    }
                }, {
                    label: "Delete",
                    accelerator: "Backspace",
                    enabled: !1,
                    click: function() {
                        pCommands.execute("pcmd_delete");
                    }
                } ]
            }, this.arrayMenu.push(this.editMenu);
        },
        addThemeMenu: function() {
            this.themeMenu = {
                label: "Theme",
                submenu: [ {
                    label: "Load from disk",
                    enabled: !1,
                    click: function() {
                        pCommands.execute("pcmd_load_theme");
                    }
                }, {
                    label: "Load default theme",
                    enabled: !1,
                    click: function() {
                        document.activeElement.blur(), pCommands.execute("pcmd_load_default_theme");
                    }
                } ]
            }, this.arrayMenu.push(this.themeMenu);
        },
        addHelpMenu: function() {
            this.helpMenu = {
                label: "Help",
                submenu: [ {
                    label: "Pingendo.com",
                    click: function() {
                        pCommands.execute("pcmd_openExternalUrl", "http://www.pingendo.com");
                    }
                }, {
                    label: "@Pingendo",
                    click: function() {
                        pCommands.execute("pcmd_openExternalUrl", "https://twitter.com/Pingendo");
                    }
                }, {
                    label: "Contact us",
                    click: function() {
                        pCommands.execute("pcmd_openExternalUrl", "mailto:info@pingendo.com");
                    }
                }, {
                    type: "separator"
                }, {
                    label: "License",
                    click: function() {
                        var bw = require("electron").remote.BrowserWindow;
                        require("electron").remote.getCurrentWindow();
                        new bw({
                            width: 500,
                            height: 600,
                            title: "License",
                            resizable: !1,
                            alwaysOnTop: !0
                        }).loadURL(document.location.origin + "/auth.html");
                    }
                } ]
            }, this.arrayMenu.push(this.helpMenu);
        },
        refreshRecentsMenu: function() {
            try {
                (recents = JSON.parse(localStorage.getItem("p-recents"))) && recents.length || (recents = []);
            } catch (e) {
                var recents = [];
            }
            for (var items = [], fs = require("fs"), x = 0; x < recents.length; x++) {
                var path = recents[x];
                try {
                    if (!fs.existsSync(path)) continue;
                    items.push({
                        label: path,
                        click: function(menuItem) {
                            angular.element(document.body).injector().get("pingendo").openEditor(menuItem.label);
                        }
                    });
                } catch (e) {
                    alert(e);
                }
            }
            this.fileMenu.submenu[2].submenu = items;
        },
        changeStatusItemMenu: function() {
            if ("undefined" != typeof pTabs && pTabs.tabs.length > 0) enabled = !0; else var enabled = !1;
            "darwin" == process.platform ? counter = 0 : counter = -1, this.menu.items[counter + 1].submenu.items[4].enabled = enabled, 
            this.menu.items[counter + 2].submenu.items[0].enabled = enabled, this.menu.items[counter + 2].submenu.items[1].enabled = enabled, 
            this.menu.items[counter + 2].submenu.items[3].enabled = enabled, this.menu.items[counter + 2].submenu.items[4].enabled = enabled, 
            this.menu.items[counter + 2].submenu.items[5].enabled = enabled, this.menu.items[counter + 2].submenu.items[6].enabled = enabled, 
            this.menu.items[counter + 2].submenu.items[7].enabled = enabled, this.menu.items[counter + 2].submenu.items[8].enabled = enabled, 
            this.menu.items[counter + 3].submenu.items[0].enabled = enabled, this.menu.items[counter + 3].submenu.items[1].enabled = enabled;
        }
    }
}), angular.module("p-directives").directive("pSnippetloader", [ "pproject", "$compile", function(pproject, $compile) {
    return {
        link: function($scope, element) {
            element.on("load", function() {
                $compile(element.contents())($scope);
            });
        },
        controller: function($scope) {
            $(window).on("pDOMLoad", function(e, tag) {
                var url = pEditor.editorInput.getDocumentRoot() + "pingendo.json";
                pproject.get(url).then(function(prj) {
                    self.prj = prj, $scope.$apply(function() {
                        self.snippets = prj.snippets;
                    });
                });
            });
            var self = this;
            this.onDrop = function(e) {
                self.prj.addSnippet(pEditor.domSelection).then(function(added) {
                    $scope.$apply(function() {
                        self.snippets = prj.snippets;
                    });
                });
            };
        },
        controllerAs: "c"
    };
} ]), angular.module("p-directives").directive("pLayout", function() {
    return {
        link: function($scope, element) {
            var $p = $(document).find("p-code");
            window.ondrop = function(e) {
                if (e.dataTransfer.files.length > 0) {
                    for (var i = 0; i < e.dataTransfer.files.length; i++) {
                        var file = e.dataTransfer.files[i];
                        e.preventDefault(), "text/html" != file.type && "text/php" != file.type || angular.element(document.body).injector().get("pingendo").openEditor(file.path);
                    }
                    return !1;
                }
            }, $(window).on("resize", function() {
                pEditor && pEditor._updateZoom();
                var w = $(window).width() - 270;
                $p.width(w);
            }), $(window).on("pTabChange", function(e, tab) {
                console.log("TAB CHANGE ", tab), tab ? $("p-snippets, p-inspector, p-code").show() : $("p-snippets, p-inspector, p-code").hide();
            }), $(window).trigger("resize");
        },
        template: '            <p-serialmodal></p-serialmodal>            <p-gitrepositories></p-gitrepositories>            <p-analytics></p-analytics>            <p-storage></p-storage>            <p-savedialog></p-savedialog>            <p-commands></p-commands>            <p-contextmenu></p-contextmenu>            <p-menu></p-menu>            <p-snippets style="display:none"></p-snippets>            \x3c!--<p-template-chooser></p-template-chooser>--\x3e            <p-tabs></p-tabs>            <p-code class="ui-widget-content" style="display:none"></p-code>            <p-inspector style="display:none"></p-inspector>'
    };
}), pApp.isDesktop() && angular.module("p-directives").directive("pFilePicker", [ "pingendo", "$compile", function(pingendo, $compile) {
    return {
        scope: {
            ngModel: "="
        },
        link: function($scope, element, attrs) {
            $(element).css("padding-right", "20px"), $(element).parent().css("position", "relative");
            var $i = $("<i ng-click='chooseFile()'class='fa fa-folder-o'></i>");
            $i.css("position", "absolute"), $i.css("right", "20px"), $i.css("top", "5px"), $(element).parent().prepend($i), 
            $compile($i)($scope);
        },
        controller: function($scope, $element, $attrs) {
            pApp.isWeb() || (window.filePicker = self = this, $scope.chooseFile = function(currentScope, currentAttrs) {
                var path = pApp.path;
                pApp.dialog.showOpenDialog({
                    title: "Choose a file..",
                    properties: [ "openFile" ]
                }, function(ret) {
                    if (ret) {
                        if (pEditor.editorInput.isTemp()) uri = ret[0]; else {
                            var folderFile = path.dirname(pEditor.editorInput.url), folderChoosedFile = path.dirname(ret[0]), name = path.basename(ret[0]), folder = path.relative(folderFile, folderChoosedFile);
                            "" != folder && (folder += path.sep);
                            var uri = folder + name;
                        }
                        uri = uri.replace(/\\/g, "/"), currentScope && ($scope = currentScope), currentAttrs && ($attrs = currentAttrs), 
                        $scope.$apply(function() {
                            $scope.ngModel = "" + uri, $scope.$parent.$eval($attrs.ngChange);
                        });
                    }
                });
            }, filePicker.chooseFile = $scope.chooseFile);
        }
    };
} ]), angular.module("p-directives").directive("pImagePreview", [ "pingendo", "$compile", function(pingendo, $compile) {
    return {
        scope: {
            ngModel: "="
        },
        replace: !0,
        template: "<div class='control img'></div>",
        link: function($scope, element, $attrs) {
            element.click(function() {
                filePicker.chooseFile($scope, $attrs, $attrs.pImagePreview);
            });
            $scope.$watch("ngModel", function(n, o) {
                n && element.css("background-image", 'url("' + qualifyURL(n) + '"),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADIAQMAAACXljzdAAAAA3NCSVQICAjb4U/gAAAABlBMVEXf39////8zI3BgAAAACXBIWXMAAAsSAAALEgHS3X78AAAAFXRFWHRDcmVhdGlvbiBUaW1lADEvMzEvMTEuGDWcAAAAHHRFWHRTb2Z0d2FyZQBBZG9iZSBGaXJld29ya3MgQ1M1cbXjNgAAAGhJREFUWIXd0LENwDAAhEDvv3QyQRqExDuipLvznH/1Pe48vlAbMVg+vlAbMVg+vlAbMVg+vlAbMVg+vlAbMVg+vlAbMVg+vlAbMVg+vlAbMVg+vlAbMVg+vlAbMVg+vlAbMVg+vlDaC8mnvsBRP8a6AAAAAElFTkSuQmCC")');
            });
        },
        controller: function($scope, $element, $attrs) {}
    };
} ]), function() {
    var chooseIcon = function($currentScope, $currentAttrs) {
        angular.element(document.body).injector().get("ModalService").showModal({
            templateUrl: "/views/modal.html",
            controller: "ModalFontawesomeController",
            controllerAs: "p"
        }).then(function(modal) {
            modal.element.modal(), modal.close.then(function(icon) {
                $currentScope.ngModel = icon, $currentScope.$parent.$eval($currentAttrs.ngChange);
            });
        });
    };
    angular.module("p-directives").directive("pFontawesome", [ "pingendo", "$compile", "ModalService", function(pingendo, $compile, ModalService) {
        return {
            scope: {
                ngModel: "="
            },
            link: function($scope, element, $attrs) {
                $(element).css("padding-right", "20px"), $(element).parent().css("position", "relative"), 
                $(element).attr("readonly", "true"), $(element).on("click", function() {
                    chooseIcon($scope, $attrs);
                });
                var $i = $("<i class='fa fa-folder-o'></i>");
                $i.css("position", "absolute"), $i.css("right", "20px"), $i.css("top", "5px"), $(element).parent().prepend($i), 
                $i.on("click", function() {
                    chooseIcon($scope, $attrs);
                }), $compile($i)($scope);
            },
            controller: function($scope, $element, $attrs) {}
        };
    } ]), angular.module("p-directives").directive("pFontawesomePreview", [ "pingendo", "$compile", function(pingendo, $compile) {
        return {
            scope: {
                ngModel: "="
            },
            replace: !0,
            template: '<div class="text-center"><i class="fa fa-5x fa-fw"></i></div>',
            link: function($scope, element, $attrs) {
                element.click(function() {
                    chooseIcon($scope, $attrs);
                });
                $scope.$watch("ngModel", function(n, o) {
                    $(element).find("i").attr("class", "fa fa-5x fa-fw " + $scope.$parent.$eval($attrs.ngModel));
                });
            },
            controller: function($scope, $element, $attrs) {}
        };
    } ]);
}(), angular.module("p-directives").directive("pSassColor", [ "pingendo", "$compile", function(pingendo, $compile) {
    return {
        scope: {
            ngModel: "="
        },
        link: function($scope, element, attrs, ngModel) {
            var update = function(n, o) {
                if (element.css("background-color", n), n) if (tinycolor(n.replace("!default", "")).isValid()) {
                    var f = tinycolor.mostReadable(n.replace("!default", ""), [ "#fff", "#000" ]).toHexString();
                    element.css("color", f);
                } else element.css("background-color", ""), element.css("color", ""); else element.css("background-color", ""), 
                element.css("color", "");
            };
            $(window).on("pTabChange", function() {
                try {
                    update(element[0].value);
                } catch (e) {}
            }), $scope.$watch("ngModel", update);
        }
    };
} ]), angular.module("p-directives").directive("pGooglefont", [ "pingendo", "$compile", "ModalService", function(pingendo, $compile, ModalService) {
    return {
        scope: {
            ngModel: "="
        },
        link: function($scope, element, $attrs) {
            $(element).css("padding-right", "20px"), $(element).parent().css("position", "relative"), 
            $(element).attr("readonly", "true");
            var chooseIcon = function() {
                ModalService.showModal({
                    templateUrl: "/views/modal.html",
                    controller: "ModalGooglefontController",
                    controllerAs: "p"
                }).then(function(modal) {
                    modal.element.modal(), modal.close.then(function(icon) {
                        $scope.ngModel = icon, $scope.$parent.$eval($attrs.ngChange);
                    });
                });
            };
            $(element).on("click", chooseIcon);
            var $i = $("<i class='fa fa-folder-o'></i>");
            $i.css("position", "absolute"), $i.css("right", "20px"), $i.css("top", "5px"), $(element).parent().prepend($i), 
            $i.on("click", chooseIcon), $compile($i)($scope);
        },
        controller: function($scope, $element, $attrs) {}
    };
} ]), function() {
    function PlaygroundEditorInput(url) {
        var self = this;
        this.url = url, this.documentBase = function() {
            return "/";
        }, this.resolveURL = function(file) {
            return /(file|ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(file) ? file : new URI(file).absoluteTo(self.documentBase());
        }, this.getDocumentRoot = function() {
            return "http://pingendo.com/";
        }, this.getContent = function(callback) {
            $.get("/assets/templates/empty.html", function(data) {
                callback(null, data);
            }).fail(function(err) {
                callback(err, null);
            });
        }, this.isTemp = function() {
            return !0;
        }, this.promptFilename = function(defaultPath, callback) {
            "html" != $(defaultPath.split(".")).last()[0] ? callback(null, "theme") : callback(null, "index.html");
        }, this.resolve = function(url) {
            var u = new URI(url);
            if (!u.is("absolute")) return u.absoluteTo(this.documentBase());
        }, this.relative = function(path) {
            return path;
        }, this.save = function(file, content, callback) {
            "html" == $(file.split(".")).last()[0] ? ModalService.showModal({
                templateUrl: "/views/playground-save.html",
                controller: "PlaygroundSaveModalController",
                controllerAs: "p"
            }).then(function(modal) {
                modal.element.modal(), modal.close.then(function(file) {
                    console.log("SAVE"), callback(null, null), $(".modal-backdrop").remove();
                });
            }) : callback();
        };
    }
    if (pApp.isPlayground()) {
        zip.useWebWorkers = !1;
        var $picker = $('<input type="file" style="display:none" accept=".zip">');
        $picker.on("change", function(e) {
            var files = e.target.files;
            try {
                ga("send", "event", "pingendo", "playground-import");
            } catch (e) {}
            var html, css;
            zip.createReader(new zip.BlobReader(files[0]), function(reader) {
                reader.getEntries(function(entries) {
                    for (var x = 0; x < entries.length; x++) console.log(entries[x].filename), entries[x].filename.endsWith(".html") ? (html = !0, 
                    entries[x].getData(new zip.TextWriter(), function(text) {
                        var doc = new DOMParser().parseFromString(text, "text/html");
                        pEditor.applyDOMModifications(doc, !0);
                    }), pEditor.themeSupport._currentImport = {
                        cssURL: "theme.css",
                        themeURL: "theme.css",
                        status: "ok",
                        isTemp: function() {
                            return !0;
                        }
                    }) : entries[x].filename.endsWith(".scss") ? entries[x].getData(new zip.TextWriter(), function(text) {
                        pEditor.themeSupport.setSource(pEditor.themeSupport._currentImport, text, !0);
                    }) : entries[x].filename.endsWith(".css") && (css = !0, entries[x].getData(new zip.TextWriter(), function(text) {
                        pEditor.themeSupport._currentImport.css = text, pEditor.themeSupport._rewriteHead();
                    }));
                    if (html) reader.close(); else {
                        alert("Error loading page");
                        try {
                            ga("send", "event", "pingendo", "playground-import-failed");
                        } catch (e) {}
                    }
                });
            }, function(error) {});
        }), $(document.body).append($picker);
        var openLocal = function(path) {
            $picker.trigger("click");
            angular.element(document.body).injector().get("pingendo");
        };
        $(document).on("pReady", function() {
            pCommands.get("pcmd_openLocal").handler = openLocal;
            var $t = $('<div class="btn-group"><a class="btn btn-darkest mr-3" target="_blank" href="https://pingendo.com/desktop.html">Desktop app</a></div>');
            $("p-toolbar").append($t);
        }), app.controller("PlaygroundSaveModalController", [ "$scope", "$element", "close", function($scope, $element, close) {
            this.close = close, this.asZip = function() {
                zip.createWriter(new zip.BlobWriter(), function(writer) {
                    var download = function() {
                        writer.close(function(blob) {
                            var a = document.createElement("a");
                            document.body.appendChild(a), a.style = "display: none", url = window.URL.createObjectURL(blob), 
                            a.href = url, a.download = "pingendo-page.zip", a.click(), window.URL.revokeObjectURL(url), 
                            close();
                        });
                        try {
                            ga("send", "event", "pingendo", "playground-export");
                        } catch (e) {}
                    }, newDoc = new DOMParser().parseFromString(pEditor.html, "text/html"), i = pEditor.themeSupport.getTheme();
                    i && $(newDoc).find("link[href='" + i.cssURL + "']").attr("href", "theme.css"), 
                    writer.add("/pingendo-page/index.html", new zip.TextReader(newDoc.documentElement.outerHTML), function() {
                        i ? writer.add("/pingendo-page/theme.css", new zip.TextReader(i.css), function() {
                            writer.add("/pingendo-page/theme.scss", new zip.TextReader(i.source), function() {
                                download();
                            });
                        }) : download();
                    }, function(currentIndex, totalIndex) {});
                }, function(error) {});
            };
        } ]), $(document.body).append("<p-toolbar class='navbar navbar-static-top m-b-0 p-a-0'></p-toolbar><p-layout></p-layout>"), 
        $(document.body).addClass("desktop"), angular.bootstrap(document, [ "p-directives", "ui.bootstrap" ]);
        var pingendo = angular.element(document.body).injector().get("pingendo"), ModalService = angular.element(document.body).injector().get("ModalService");
        PlaygroundEditorInput.URL_TEST = /^http:\/\/pingendo.com/, pingendo.registerEditorInput(PlaygroundEditorInput), 
        $(document.body).find("> .loader").remove(), window.twttr = function(d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0], t = window.twttr || {};
            return d.getElementById(id) ? t : (js = d.createElement(s), js.id = id, js.src = "https://platform.twitter.com/widgets.js", 
            fjs.parentNode.insertBefore(js, fjs), t._e = [], t.ready = function(f) {
                t._e.push(f);
            }, t);
        }(document, "script", "twitter-wjs"), $(document).on("pReady", function() {
            pCommands.execute("pcmd_new");
        });
    }
}(), app.controller("CreateFileController", [ "$scope", "$element", "githubService", "close", function($scope, $element, githubService, close) {
    var self = this;
    this.status = null;
    var scope = angular.element($("p-git-files")).scope();
    this.checkName = function() {
        var self = this;
        if (self.status = "checking", self.name) {
            var fileName = self.name;
            "-1" == fileName.indexOf(".html") && (fileName += ".html");
            for (var i = 0; i < scope.tree.files.length; i++) if (scope.tree.files[i].path == fileName) return void (self.status = "exists");
            self.status = "dontexists";
        } else self.status = null;
    }, this.action = function() {
        githubService.startProgressBar();
        var fileName = self.name;
        "-1" == fileName.indexOf(".html") && (fileName += ".html");
        var m = githubService.model;
        scope.hideButtonCreateFile = !1, scope.showInputFileEditable = !1, $.get("/assets/templates/empty.html", function(data) {
            if (scope.tree.pull) var owner = scope.tree.pull.head.repo.owner.login, repo = scope.tree.pull.head.repo.name, ref = scope.tree.pull.head.ref; else var owner = m.owner, repo = m.repo, ref = m.branch;
            githubService.pushFile2(owner, repo, ref, fileName, "", btoa(unescape(encodeURIComponent(data))), function(errPush, dataPush) {
                errPush ? (scope.showError("Error creating file : ", errPush), githubService.progressbar.complete(), 
                close(!0), $(".modal, .modal-backdrop").remove()) : scope.$apply(function() {
                    var file = dataPush.content;
                    file.type = githubService.getFileType(file), scope.tree.pull && (file.status = "added"), 
                    scope.tree.files.unshift(file), githubService.progressbar.complete(), githubService.gotoState(scope.getUrlForFile(file)), 
                    close(!0), $(".modal, .modal-backdrop").remove();
                });
            });
        });
    };
} ]), app.controller("CreateProjectController", function($scope, isWizard, close, githubService) {
    var self = this;
    this.status = null, this.private = "false", this.username = githubService.username, 
    this.isWizard = isWizard, githubService.getAuthUserInfo(function(err, user) {
        $scope.$apply(function() {
            self.user = user;
        });
    }), githubService.getConnectedRepos(function(err, data) {
        $scope.$apply(function() {
            self.repos = data || [];
        });
    }), this.checkName = function() {
        var self = this;
        self.status = "checking", self.name = this.replaceChar(self.name), self.name ? firebase.database().ref("/users/" + githubService.username + "/repos").on("value", function(snapshot) {
            var found = !1;
            for (var key in snapshot.val()) key == self.name && (found = !0);
            found ? $scope.$apply(function() {
                self.status = "alreadyconnected";
            }) : githubService.github.getRepo(githubService.username, self.name).show(function(err, data) {
                console.log("err", err), err && 404 == err.error ? $scope.$apply(function() {
                    self.status = "dontexists";
                }) : $scope.$apply(function() {
                    self.status = "exists";
                });
            });
        }) : self.status = null;
    }, this.replaceChar = function(name) {
        return name = name.replace(/ /g, "-"), name = name.replace(/\./g, "-"), name = name.replace(/\#/g, "-"), 
        name = name.replace(/\$/g, "-"), name = name.replace(/\@/g, "-"), name = name.replace(/\[/g, "-"), 
        name = name.replace(/\]/g, "-");
    }, this.action = function(result) {
        if (result) {
            var callback = function() {
                githubService.connectRepo(self.name, function() {
                    $(".modal, .modal-backdrop").remove(), close(self.name), isWizard || githubService.gotoState("/" + githubService.username + "/" + self.name);
                });
            };
            "dontexists" == result ? (self.name = this.replaceChar(self.name), githubService.createRepo(self.name, self.private, function(err, repoCreated) {
                $.get("/assets/templates/empty.html", function(data) {
                    githubService.pushFile2(githubService.username, self.name, "master", "index.html", "", btoa(unescape(encodeURIComponent(data))), function(errPush, dataPush) {
                        callback();
                    });
                }), err && $scope.$apply(function() {
                    $scope.showError("Error creating repo : ", err);
                });
            })) : callback();
        }
    };
}), app.controller("CreatePullController", [ "$scope", "$element", "githubService", "close", function($scope, $element, githubService, close) {
    var self = this;
    this.status = null;
    var scope = angular.element($("p-git-tree")).scope();
    this.checkName = function() {
        var self = this;
        if (self.status = "checking", self.name) {
            for (var i = 0; i < scope.repo.pulls.length; i++) if (scope.repo.pulls[i].title == self.name) return void (self.status = "exists");
            self.status = "dontexists";
        } else self.status = null;
    }, this.action = function() {
        githubService.startProgressBar(), close(!0), $(".modal, .modal-backdrop").remove();
        var fileName = self.name;
        "-1" == fileName.indexOf(".html") && (fileName += ".html"), scope.hideButtonCreateFile = !1, 
        scope.showInputFileEditable = !1;
        var createPull = function(headOwner, headRepo, newBranch) {
            var m = githubService.model;
            githubService.branch2(m.owner, m.repo, "master", headOwner, headRepo, newBranch, function(errBranch, dataBrench) {
                errBranch ? errBranch && (githubService.completeProgressBar(), scope.$apply(function() {
                    scope.showError("Error creating pull 1 : ", errBranch);
                })) : githubService.getBinaryFileContent(headOwner, headRepo, newBranch, "README.md", function(errGetFileContent, content) {
                    content || (content = ""), githubService.pushFile(headOwner, headRepo, newBranch, "README.md", content, function(errPushFile, dataPushFile) {
                        if (errPushFile) githubService.completeProgressBar(); else {
                            var pull = {
                                title: newBranch,
                                body: "",
                                base: "master",
                                head: headOwner + ":" + newBranch
                            };
                            githubService.createPullRequest(m.owner, m.repo, pull, function(err, pullCreated) {
                                scope.$apply(function() {
                                    if (err) scope.showError("Error creating pull : ", err); else {
                                        scope.repo.pulls.unshift(pullCreated), scope.selectPull(pullCreated);
                                        var pullName = encodeURIComponent(newBranch);
                                        githubService.gotoState("/" + headOwner + "/" + headRepo + "/tree/" + pullName + "?pr=/" + m.owner + "/" + m.repo + "/" + pullCreated.number);
                                    }
                                    githubService.completeProgressBar();
                                });
                            });
                        }
                    });
                });
            });
        }, m = githubService.model;
        self.name = self.name.replace(/ /g, "-"), scope.loadingPull = !0, scope.repo.permissions && 1 == scope.repo.permissions.push ? createPull(m.owner, m.repo, self.name) : function(retVal) {
            githubService.fork(m.owner, m.repo, function(errFork, repoForked) {
                errFork ? ($scope.$apply(function() {
                    scope.showError("Error creating pull : ", errFork);
                }), callback(), githubService.completeProgressBar()) : createPull(githubService.username, repoForked.name, retVal);
            });
        }(self.name);
    };
} ]), app.controller("CreateThemeController", [ "$scope", "$element", "githubService", "close", function($scope, $element, githubService, close) {
    var self = this;
    this.status = null;
    var scope = angular.element($("p-git-files")).scope();
    this.checkName = function() {
        var self = this;
        if (self.status = "checking", self.name) {
            var fileName = self.name;
            "-1" == fileName.indexOf(".scss") && (fileName += ".scss");
            for (var i = 0; i < scope.tree.files.length; i++) if (scope.tree.files[i].path == fileName) return void (self.status = "exists");
            self.status = "dontexists";
        } else self.status = null;
    }, this.action = function() {
        githubService.startProgressBar();
        var fileNameScss = self.name;
        "-1" == fileNameScss.indexOf(".scss") && (fileNameScss += ".scss");
        var fileNameCss = fileNameScss.substr(0, fileNameScss.lastIndexOf(".")) + ".css", m = githubService.model;
        if (scope.tree.pull) var owner = scope.tree.pull.head.repo.owner.login, repo = scope.tree.pull.head.repo.name, ref = scope.tree.pull.head.ref; else var owner = m.owner, repo = m.repo, ref = m.branch;
        var pScss = new Promise(function(resolve, reject) {
            $.get("/assets/bootstrap/bootstrap-4.0.0-alpha.6.scss", function(data, err) {
                githubService.pushFile2(owner, repo, ref, fileNameScss, "", btoa(unescape(encodeURIComponent(data))), function(err, dataPush) {
                    if (err) reject(); else {
                        var file = dataPush.content;
                        file.type = githubService.getFileType(file), scope.tree.pull && (file.status = "added");
                        scope.getUrlForFile(file);
                        scope.tree.files.unshift(file), resolve();
                    }
                });
            });
        }), pCss = new Promise(function(resolve, reject) {
            $.get("/assets/bootstrap/bootstrap-4.0.0-alpha.6.css", function(data, reject) {
                githubService.pushFile2(owner, repo, ref, fileNameCss, "", btoa(unescape(encodeURIComponent(data))), function(err, dataPush) {
                    if (err) reject(); else {
                        var file = dataPush.content;
                        file.type = githubService.getFileType(file), scope.tree.pull && (file.status = "added"), 
                        scope.tree.files.unshift(file), resolve();
                    }
                });
            });
        });
        pScss.then(pCss).then(function() {
            githubService.progressbar.complete(), githubService.gotoState(null), close(!0), 
            $(".modal, .modal-backdrop").remove();
        });
    };
} ]), function(root, factory) {
    "use strict";
    root.Github = factory(root.XMLHttpRequest, function(str) {
        return root.btoa(encodeURIComponent(str).replace(/%([0-9A-F]{2})/g, function(match, p1) {
            return String.fromCharCode("0x" + p1);
        }));
    });
}(this, function(XMLHttpRequest, b64encode, githubService) {
    "use strict";
    var Github = function(options) {
        var API_URL = options.apiUrl || "https://api.github.com", _request = Github._request = function(method, path, data, cb, raw, sync) {
            var xhr = new XMLHttpRequest();
            if (xhr.open(method, function() {
                var url = path.indexOf("//") >= 0 ? path : API_URL + path;
                if (url += /\?/.test(url) ? "&" : "?", data && "object" == typeof data && [ "GET", "HEAD", "DELETE" ].indexOf(method) > -1) for (var param in data) data.hasOwnProperty(param) && (url += "&" + encodeURIComponent(param) + "=" + encodeURIComponent(data[param]));
                return url + ("undefined" != typeof window ? "&" + new Date().getTime() : "");
            }(), !sync), sync || (xhr.onreadystatechange = function() {
                if (4 === this.readyState) if (this.status >= 200 && this.status < 300 || 304 === this.status) cb(null, raw ? this.responseText : !this.responseText || JSON.parse(this.responseText), this); else if (403 == this.status && this.response.includes("higher rate limit")) {
                    var ModalService = angular.element(document.body).injector().get("ModalService"), githubService = angular.element(document.body).injector().get("githubService"), self = this;
                    ModalService.showModal({
                        templateUrl: "/views/apilimiterror.html",
                        controller: function(close) {
                            this.message = JSON.parse(self.response).message, this.action = function(result) {
                                githubService.login(function() {
                                    console.log("CLOSE TRUE"), close(!0), $(".modal, .modal-backdrop").remove();
                                });
                            };
                        },
                        controllerAs: "p"
                    }).then(function(modal) {
                        modal.element.modal();
                    });
                } else cb({
                    path: path,
                    request: this,
                    error: this.status
                });
            }), raw ? xhr.setRequestHeader("Accept", "application/vnd.github.v3.raw+json") : (xhr.dataType = "json", 
            xhr.setRequestHeader("Accept", "application/vnd.github.v3+json")), xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8"), 
            options.token || options.username && options.password) {
                var authorization = options.token ? "token " + options.token : "Basic " + b64encode(options.username + ":" + options.password);
                xhr.setRequestHeader("Authorization", authorization);
            }
            if (data ? xhr.send(JSON.stringify(data)) : xhr.send(), sync) return xhr.response;
        }, _requestAllPages = Github._requestAllPages = function(path, cb) {
            var results = [];
            !function iterate() {
                _request("GET", path, null, function(err, res, xhr) {
                    if (err) return cb(err);
                    results.push.apply(results, res);
                    var next = null;
                    (xhr.getResponseHeader("link") || "").split(/\s*,\s*/g).forEach(function(link) {
                        next = /rel="next"/.test(link) ? link : next;
                    }), next && (next = (/<(.*)>/.exec(next) || [])[1]), next ? (path = next, iterate()) : cb(err, results);
                });
            }();
        };
        return Github.User = function() {
            this.repos = function(options, cb) {
                1 === arguments.length && "function" == typeof arguments[0] && (cb = options, options = {}), 
                options = options || {};
                var url = "/user/repos", params = [];
                params.push("type=" + encodeURIComponent(options.type || "all")), params.push("sort=" + encodeURIComponent(options.sort || "updated")), 
                params.push("per_page=" + encodeURIComponent(options.per_page || "1000")), options.page && params.push("page=" + encodeURIComponent(options.page)), 
                url += "?" + params.join("&"), _request("GET", url, null, cb);
            }, this.orgs = function(cb) {
                _request("GET", "/user/orgs", null, cb);
            }, this.gists = function(cb) {
                _request("GET", "/gists", null, cb);
            }, this.notifications = function(options, cb) {
                1 === arguments.length && "function" == typeof arguments[0] && (cb = options, options = {});
                var url = "/notifications", params = [];
                if ((options = options || {}).all && params.push("all=true"), options.participating && params.push("participating=true"), 
                options.since) {
                    var since = options.since;
                    since.constructor === Date && (since = since.toISOString()), params.push("since=" + encodeURIComponent(since));
                }
                if (options.before) {
                    var before = options.before;
                    before.constructor === Date && (before = before.toISOString()), params.push("before=" + encodeURIComponent(before));
                }
                options.page && params.push("page=" + encodeURIComponent(options.page)), params.length > 0 && (url += "?" + params.join("&")), 
                _request("GET", url, null, cb);
            }, this.getAuthUserInfo = function(cb) {
                _request("GET", "/user", null, cb);
            }, this.show = function(username, cb) {
                _request("GET", username ? "/users/" + username : "/user", null, cb);
            }, this.userRepos = function(username, cb) {
                _requestAllPages("/users/" + username + "/repos?type=all&per_page=1000&sort=updated", cb);
            }, this.userStarred = function(username, cb) {
                _requestAllPages("/users/" + username + "/starred?type=all&per_page=1000", function(err, res) {
                    cb(err, res);
                });
            }, this.userGists = function(username, cb) {
                _request("GET", "/users/" + username + "/gists", null, cb);
            }, this.orgRepos = function(orgname, cb) {
                _requestAllPages("/orgs/" + orgname + "/repos?type=all&&page_num=1000&sort=updated&direction=desc", cb);
            }, this.follow = function(username, cb) {
                _request("PUT", "/user/following/" + username, null, cb);
            }, this.unfollow = function(username, cb) {
                _request("DELETE", "/user/following/" + username, null, cb);
            }, this.createRepo = function(options, cb) {
                _request("POST", "/user/repos", options, cb);
            };
        }, Github.Repository = function(options) {
            function updateTree(branch, cb) {
                if (branch === currentTree.branch && currentTree.sha) return cb(null, currentTree.sha);
                that.getRef("heads/" + branch, function(err, sha) {
                    currentTree.branch = branch, currentTree.sha = sha, cb(err, sha);
                });
            }
            var repoPath, repo = options.name, user = options.user, fullname = options.fullname, that = this;
            repoPath = fullname ? "/repos/" + fullname : "/repos/" + user + "/" + repo;
            var currentTree = {
                branch: null,
                sha: null
            };
            this.edit = function(prop, value, cb) {
                var obj = {};
                obj[prop] = value, _request("PATCH", "https://api.github.com/repos/" + options.user + "/" + options.name, obj, function(err, res) {
                    cb(err, res);
                });
            }, this.merge = function(issueNumber, cb) {
                _request("PUT", "https://api.github.com/repos/" + options.user + "/" + options.name + "/pulls/" + issueNumber + "/merge", {}, function(err, res) {
                    cb(err, res);
                });
            }, this.getPullRequestEvent = function(cb) {
                _request("GET", "https://api.github.com/repos/" + options.user + "/" + options.name + "/events", {}, function(err, res) {
                    cb(err, res);
                });
            }, this.getIssuesEvent = function(cb) {
                _request("GET", "https://api.github.com/repos/" + options.user + "/" + options.name + "/issues/events", {}, function(err, res) {
                    cb(err, res);
                });
            }, this.checkSubscription = function(cb) {
                _request("GET", "https://api.github.com/repos/" + options.user + "/" + options.name + "/subscription", {}, function(err, res) {
                    cb(err, res);
                });
            }, this.deleteSubscription = function(cb) {
                _request("DELETE", "https://api.github.com/repos/" + options.user + "/" + options.name + "/subscription", {}, function(err, res) {
                    cb(err, res);
                });
            }, this.deleteRepo = function(cb) {
                _request("DELETE", repoPath, options, cb);
            }, this.getCollaborators = function(cb) {
                _request("GET", repoPath + "/collaborators", null, function(err, res) {
                    cb(err, res);
                });
            }, this.addCollaborator = function(username, cb) {
                _request("PUT", repoPath + "/collaborators/" + username, null, function(err, res) {
                    cb(err, res);
                });
            }, this.removeCollaborator = function(username, cb) {
                _request("DELETE", repoPath + "/collaborators/" + username, null, function(err, res) {
                    cb(err, res);
                });
            }, this.getRef = function(ref, cb) {
                _request("GET", repoPath + "/git/refs/" + ref, null, function(err, res, xhr) {
                    if (err) return cb(err);
                    cb(null, res.object.sha, xhr);
                });
            }, this.createRef = function(options, cb) {
                _request("POST", repoPath + "/git/refs", options, cb);
            }, this.deleteRef = function(ref, cb) {
                _request("DELETE", repoPath + "/git/refs/" + ref, options, function(err, res, xhr) {
                    cb(err, res, xhr);
                });
            }, this.createRepo = function(options, cb) {
                _request("POST", "/user/repos", options, cb);
            }, this.deleteRepo = function(cb) {
                _request("DELETE", repoPath, options, cb);
            }, this.listTags = function(cb) {
                _request("GET", repoPath + "/tags", null, function(err, tags, xhr) {
                    if (err) return cb(err);
                    cb(null, tags, xhr);
                });
            }, this.listPulls = function(options, cb) {
                var url = repoPath + "/pulls", params = [];
                "string" == typeof (options = options || {}) ? params.push("state=" + options) : (options.state && params.push("state=" + encodeURIComponent(options.state)), 
                options.head && params.push("head=" + encodeURIComponent(options.head)), options.base && params.push("base=" + encodeURIComponent(options.base)), 
                options.sort && params.push("sort=" + encodeURIComponent(options.sort)), options.direction && params.push("direction=" + encodeURIComponent(options.direction)), 
                options.page && params.push("page=" + options.page), options.per_page && params.push("per_page=" + options.per_page)), 
                params.length > 0 && (url += "?" + params.join("&")), _request("GET", url, null, function(err, pulls, xhr) {
                    if (err) return cb(err);
                    cb(null, pulls, xhr);
                });
            }, this.getPull = function(number, cb) {
                _request("GET", repoPath + "/pulls/" + number, null, function(err, pull, xhr) {
                    if (err) return cb(err);
                    cb(null, pull, xhr);
                });
            }, this.getPullFiles = function(number, cb) {
                _request("GET", repoPath + "/pulls/" + number + "/files", null, function(err, pull) {
                    if (err) return cb(err);
                    cb(null, pull);
                });
            }, this.compare = function(base, head, cb) {
                _request("GET", repoPath + "/compare/" + base + "..." + head, null, function(err, diff, xhr) {
                    if (err) return cb(err);
                    cb(null, diff, xhr);
                });
            }, this.listBranches = function(cb) {
                _request("GET", repoPath + "/git/refs/heads", null, function(err, heads, xhr) {
                    if (err) return cb(err);
                    cb(null, heads.map(function(head) {
                        return head.ref.replace(/^refs\/heads\//, "");
                    }), xhr);
                });
            }, this.getBlob = function(sha, cb) {
                _request("GET", repoPath + "/git/blobs/" + sha, null, cb, "raw");
            }, this.getCommit = function(branch, sha, cb) {
                _request("GET", repoPath + "/git/commits/" + sha, null, function(err, commit, xhr) {
                    if (err) return cb(err);
                    cb(null, commit, xhr);
                });
            }, this.getSha = function(branch, path, cb) {
                if (!path || "" === path) return that.getRef("heads/" + branch, cb);
                _request("GET", repoPath + "/contents/" + path + (branch ? "?ref=" + branch : ""), null, function(err, pathContent, xhr) {
                    if (err) return cb(err);
                    cb(null, pathContent.sha, xhr);
                });
            }, this.getTree = function(tree, cb) {
                _request("GET", repoPath + "/git/trees/" + tree, null, function(err, res, xhr) {
                    if (err) return cb(err);
                    cb(null, res.tree, xhr);
                });
            }, this.postBlob = function(content, cb) {
                content = "string" == typeof content ? {
                    content: content,
                    encoding: "utf-8"
                } : {
                    content: b64encode(String.fromCharCode.apply(null, new Uint8Array(content))),
                    encoding: "base64"
                }, _request("POST", repoPath + "/git/blobs", content, function(err, res) {
                    if (err) return cb(err);
                    cb(null, res.sha);
                });
            }, this.updateTree = function(baseTree, path, blob, cb) {
                _request("POST", repoPath + "/git/trees", {
                    base_tree: baseTree,
                    tree: [ {
                        path: path,
                        mode: "100644",
                        type: "blob",
                        sha: blob
                    } ]
                }, function(err, res) {
                    if (err) return cb(err);
                    cb(null, res.sha);
                });
            }, this.postTree = function(tree, cb) {
                _request("POST", repoPath + "/git/trees", {
                    tree: tree
                }, function(err, res) {
                    if (err) return cb(err);
                    cb(null, res.sha);
                });
            }, this.commit = function(parent, tree, message, cb) {
                new Github.User().show(null, function(err, userData) {
                    if (err) return cb(err);
                    _request("POST", repoPath + "/git/commits", {
                        message: message,
                        parents: [ parent ],
                        tree: tree
                    }, function(err, res) {
                        if (err) return cb(err);
                        currentTree.sha = res.sha, cb(null, res.sha);
                    });
                });
            }, this.updateHead = function(head, commit, cb) {
                _request("PATCH", repoPath + "/git/refs/heads/" + head, {
                    sha: commit
                }, function(err) {
                    cb(err);
                });
            }, this.show = function(cb) {
                _request("GET", repoPath, null, cb);
            }, this.contributors = function(cb, retry) {
                retry = retry || 1e3;
                var that = this;
                _request("GET", repoPath + "/stats/contributors", null, function(err, data, xhr) {
                    if (err) return cb(err);
                    202 === xhr.status ? setTimeout(function() {
                        that.contributors(cb, retry);
                    }, retry) : cb(err, data, xhr);
                });
            }, this.contents = function(ref, path, cb) {
                path = encodeURI(path), _request("GET", repoPath + "/contents" + (path ? "/" + path : ""), {
                    ref: ref
                }, cb);
            }, this.fork = function(cb) {
                _request("POST", repoPath + "/forks", null, cb);
            }, this.branch = function(oldBranch, newBranch, cb) {
                2 === arguments.length && "function" == typeof arguments[1] && (cb = newBranch, 
                newBranch = oldBranch, oldBranch = "master"), this.getRef("heads/" + oldBranch, function(err, ref) {
                    if (err && cb) return cb(err);
                    that.createRef({
                        ref: "refs/heads/" + newBranch,
                        sha: ref
                    }, cb);
                });
            }, this.branch2 = function(oldBranch, newOwner, newRepo, newBranch, cb) {
                this.getRef("heads/" + oldBranch, function(err, ref) {
                    if (err && cb) return cb(err);
                    repo != newRepo || user != newOwner ? Github.getRepo(newOwner, newRepo).createRef({
                        ref: "refs/heads/" + newBranch,
                        sha: ref
                    }, cb) : that.createRef({
                        ref: "refs/heads/" + newBranch,
                        sha: ref
                    }, cb);
                });
            }, this.createPullRequest = function(options, cb) {
                _request("POST", repoPath + "/pulls", options, cb);
            }, this.updatePullRequest = function(number, params, cb) {
                _request("POST", repoPath + "/pulls/" + number, params, cb);
            }, this.listHooks = function(cb) {
                _request("GET", repoPath + "/hooks", null, cb);
            }, this.getHook = function(id, cb) {
                _request("GET", repoPath + "/hooks/" + id, null, cb);
            }, this.createHook = function(options, cb) {
                _request("POST", repoPath + "/hooks", options, cb);
            }, this.editHook = function(id, options, cb) {
                _request("PATCH", repoPath + "/hooks/" + id, options, cb);
            }, this.deleteHook = function(id, cb) {
                _request("DELETE", repoPath + "/hooks/" + id, null, cb);
            }, this.read = function(branch, path, cb) {
                _request("GET", repoPath + "/contents/" + encodeURI(path) + (branch ? "?ref=" + branch : ""), null, function(err, obj, xhr) {
                    return err && 404 === err.error ? cb("not found", null, null) : err ? cb(err) : void cb(null, obj, xhr);
                }, !0);
            }, this.remove = function(branch, path, cb) {
                that.getSha(branch, path, function(err, sha) {
                    if (err && console.log("SHA ", err), err) return cb(err);
                    _request("DELETE", repoPath + "/contents/" + path, {
                        message: path + " is removed",
                        sha: sha,
                        branch: branch
                    }, cb);
                });
            }, this.delete = this.remove, this.move = function(branch, path, newPath, cb) {
                updateTree(branch, function(err, latestCommit) {
                    that.getTree(latestCommit + "?recursive=true", function(err, tree) {
                        var tree2 = [];
                        tree.forEach(function(ref) {
                            ref.path === path && (console.log("REF ", ref), ref.path = newPath), "tree" != ref.type && tree2.push(ref);
                        }), that.postTree(tree2, function(err, rootTree) {
                            that.commit(latestCommit, rootTree, "Deleted " + path, function(err, commit) {
                                that.updateHead(branch, commit, function(err) {
                                    cb(err);
                                });
                            });
                        });
                    });
                });
            }, this.write = function(branch, path, content, message, options, cb) {
                void 0 === cb && (cb = options, options = {}), that.getSha(encodeURIComponent(branch), encodeURI(path), function(err, sha) {
                    var writeOptions = {
                        message: message,
                        content: content,
                        branch: branch,
                        committer: options && options.committer ? options.committer : void 0,
                        author: options && options.author ? options.author : void 0
                    };
                    err && 404 !== err.error || (writeOptions.sha = sha), _request("PUT", repoPath + "/contents/" + encodeURI(path), writeOptions, cb);
                });
            }, this.write2 = function(branch, path, sha, content, message, options, cb) {
                void 0 === cb && (cb = options, options = {});
                var writeOptions = {
                    message: message,
                    content: content,
                    branch: branch,
                    committer: options && options.committer ? options.committer : void 0,
                    author: options && options.author ? options.author : void 0
                };
                sha && (writeOptions.sha = sha), _request("PUT", repoPath + "/contents/" + encodeURI(path), writeOptions, cb);
            }, this.getCommits = function(options, cb) {
                var url = repoPath + "/commits", params = [];
                if ((options = options || {}).sha && params.push("sha=" + encodeURIComponent(options.sha)), 
                options.path && params.push("path=" + encodeURIComponent(options.path)), options.since) {
                    var since = options.since;
                    since.constructor === Date && (since = since.toISOString()), params.push("since=" + encodeURIComponent(since));
                }
                if (options.until) {
                    var until = options.until;
                    until.constructor === Date && (until = until.toISOString()), params.push("until=" + encodeURIComponent(until));
                }
                options.page && params.push("page=" + options.page), options.perpage && params.push("per_page=" + options.perpage), 
                params.length > 0 && (url += "?" + params.join("&")), _request("GET", url, null, cb);
            };
        }, Github.Gist = function(options) {
            var gistPath = "/gists/" + options.id;
            this.read = function(cb) {
                _request("GET", gistPath, null, cb);
            }, this.create = function(options, cb) {
                _request("POST", "/gists", options, cb);
            }, this.delete = function(cb) {
                _request("DELETE", gistPath, null, cb);
            }, this.fork = function(cb) {
                _request("POST", gistPath + "/fork", null, cb);
            }, this.update = function(options, cb) {
                _request("PATCH", gistPath, options, cb);
            }, this.star = function(cb) {
                _request("PUT", gistPath + "/star", null, cb);
            }, this.unstar = function(cb) {
                _request("DELETE", gistPath + "/star", null, cb);
            }, this.isStarred = function(cb) {
                _request("GET", gistPath + "/star", null, cb);
            };
        }, Github.Issue = function(options) {
            var path = "/repos/" + options.user + "/" + options.repo + "/issues";
            this.list = function(options, cb) {
                var query = [];
                for (var key in options) options.hasOwnProperty(key) && query.push(encodeURIComponent(key) + "=" + encodeURIComponent(options[key]));
                _requestAllPages(path + "?" + query.join("&"), cb);
            }, this.listComment = function(issueNumber, cb) {
                _request("GET", "https://api.github.com/repos/" + options.user + "/" + options.repo + "/issues/" + issueNumber + "/comments", null, function(err, res) {
                    cb(err, res);
                });
            }, this.comment = function(issueNumber, comment, cb) {
                _request("POST", "https://api.github.com/repos/" + options.user + "/test/issues/" + issueNumber + "/comments", {
                    body: comment
                }, function(err, res) {
                    cb(err, res);
                });
            };
        }, Github.Search = function(options) {
            var path = "/search/", query = "?q=" + options.query;
            this.repositories = function(options, cb) {
                _request("GET", path + "repositories" + query, options, cb);
            }, this.code = function(options, cb) {
                _request("GET", path + "code" + query, options, cb);
            }, this.issues = function(options, cb) {
                _request("GET", path + "issues" + query, options, cb);
            }, this.users = function(options, cb) {
                console.log("QUERY"), _request("GET", path + "users" + query, options, cb);
            };
        }, Github;
    };
    return Github.getIssues = function(user, repo) {
        return new Github.Issue({
            user: user,
            repo: repo
        });
    }, Github.getRepo = function(user, repo) {
        if (repo) return new Github.Repository({
            user: user,
            name: repo
        });
        var fullname = user;
        return new Github.Repository({
            fullname: fullname
        });
    }, Github.getUser = function() {
        return new Github.User();
    }, Github.getGist = function(id) {
        return new Github.Gist({
            id: id
        });
    }, Github.getSearch = function(query) {
        return new Github.Search({
            query: query
        });
    }, Github;
}), pApp.isWeb() && angular.module("p-directives").factory("githubService", [ "pingendo", "ngProgressFactory", "ModalService", "$sce", function(pingendo, ngProgressFactory, ModalService, $sce) {
    function GHEditorInput(url) {
        var self = this;
        this.url = url, this.getInfo = function() {
            var info = {}, chunks = self.url.replace("http://pingendo.com/", "").split("/");
            return info.owner = chunks[0].toLowerCase(), info.repo = chunks[1].toLowerCase(), 
            info.branch = chunks[2], info.path = chunks.slice(3).join("/"), info.dir = info.path.replace(/[^\/]*$/, ""), 
            info;
        }, this.documentBase = function() {
            var info = self.getInfo();
            return location.origin + "/raw/" + info.owner + "/" + info.repo + "/" + info.branch + "/" + info.dir;
        }, this.resolveURL = function(file) {
            return /(file|ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(file) ? file : new URI(file).absoluteTo(self.documentBase());
        }, this.getDocumentRoot = function() {
            var info = self.getInfo();
            return location.origin + "/raw/" + info.owner + "/" + info.repo + "/" + info.branch + "/";
        }, this.getContent = function(callback) {
            var info = self.getInfo();
            gh.getFileContent(info.owner, info.repo, info.branch, info.path, callback);
        }, this.isTemp = function() {
            return gh.model.isTemp;
        }, this.promptFilename = function(defaultPath, callback) {
            var defaultExt = $(defaultPath.split(".")).last()[0], giveName = function() {
                if ("html" == defaultExt) prompt = "Give a name to your new page"; else var prompt = "Give a name to your new theme";
                pingendo.prompt(prompt, defaultPath, function(retVal) {
                    retVal && callback(null, retVal);
                });
            }, checkIsTemp = function() {
                alert(self.isTemp() + defaultExt), self.isTemp() && "html" == defaultExt ? gh.addRepo(!0, function(result) {
                    pingendo.prompt("Give a name to your page", defaultPath, function(retVal) {
                        retVal && callback(null, "http://pingendo.com/" + gh.username + "/" + result + "/master/" + retVal);
                    });
                }) : giveName();
            };
            gh.isLogged() ? checkIsTemp() : gh.showLogin(function() {
                checkIsTemp();
            });
        }, this.resolve = function(url) {
            var u = new URI(url);
            if (!u.is("absolute")) return u.absoluteTo(this.documentBase());
        }, this.relative = function(path) {
            return path;
        }, this.save = function(file, content, callback) {
            var info = self.getInfo(), uri = new URI(file);
            uri.is("absolute") || (uri = uri.absoluteTo(self.url)), file = String(uri.path().split("/").slice(4).join("/")), 
            gh.pushFile(info.owner, info.repo, info.branch, file, btoa(unescape(encodeURIComponent(content))), function(err, data) {
                self.isTemp() && file.endsWith("html") && (history.pushState(null, null, "/" + info.owner + "/" + info.repo + "/edit/master/" + file), 
                gh.refreshModel()), callback(err, data);
            });
        };
    }
    GHEditorInput.URL_TEST = /^http:\/\/pingendo.com/, pingendo.registerEditorInput(GHEditorInput);
    var logInGithub = function(callback) {
        if (!firebase.auth().currentUser || !localStorage.getItem("t")) return gh.github = new Github({}), 
        gh.username = null, gh.refreshModel(), navigator.serviceWorker.controller.postMessage(null), 
        $(window).trigger("pGitLogin"), void (callback && callback());
        gh.github = new Github({
            token: localStorage.getItem("t"),
            auth: "oauth"
        }), gh.github.getUser().show("", function(err, data) {
            err ? firebase.auth().signOut().then(function() {
                callback(err), logInGithub();
            }, function(error) {}) : (navigator.serviceWorker.controller.postMessage(localStorage.getItem("t")), 
            setInterval(function() {
                navigator.serviceWorker.controller.postMessage(localStorage.getItem("t"));
            }, 1e4), gh.username = data.login, gh.avatar = data.avatar_url, callback && callback(), 
            gh.refreshModel(), $(window).trigger("pGitLogin"));
        }), gh.fbUserRef = firebase.database().ref("users/" + firebase.auth().currentUser.uid);
    };
    firebase.auth().onAuthStateChanged(function(user) {
        logInGithub();
    });
    var gh = {
        username: null,
        GHEditorInput: GHEditorInput
    };
    return gh.getFileType = function(file) {
        return /\.(html|htm)$/i.test(file.path) ? "html" : /\.(scss|css)$/i.test(file.path) ? "theme" : /\.(gif|jpg|jpeg|tiff|png|json|ico|css|mov)$/i.test(file.path) ? "asset" : null;
    }, window.onpopstate = function(e) {
        gh.refreshModel();
    }, gh.startProgressBar = function() {
        this.progressbar || (this.progressbar = ngProgressFactory.createInstance()), this.progressbar.start();
    }, gh.completeProgressBar = function() {
        this.progressbar.complete();
    }, gh.checkGitLicense = function(username, callback) {
        if (console.log("QUI"), pApp.isDev()) GK_URL = "http://localhost:9999/checkGitLicense?username=" + username; else var GK_URL = "https://pingendo-gk.herokuapp.com/checkGitLicense?username=" + username;
        $.get(GK_URL, function(data) {
            callback(data);
        });
    }, gh.gotoState = function(state) {
        history.pushState(null, "", state), setTimeout(function() {
            gh.refreshModel();
        }, 1);
    }, gh.refreshModel = function() {
        gh.model = [];
        hash = document.location.pathname + document.location.search;
        console.log("HASH", hash), "-1" != hash.indexOf("&") && (hash = hash.split("&")[0]);
        var splittedhash = hash.split("?"), hash = splittedhash[0];
        if (splittedhash.length > 1 && 0 == splittedhash[1].indexOf("pr=")) var pr = splittedhash[1].replace("pr=", "");
        2 == (hash = (hash = "/" == hash[hash.length - 1] ? hash.slice(1, -1) : hash.slice(1)).split("/")).length && hash.push("tree", "master"), 
        gh.model.mode = hash[2], 1 == hash.length && "new" == hash[0] ? (gh.model.mode = "edit", 
        hash[0] = "pingendo", hash[1] = "playground", hash[3] = "master", hash[4] = "empty.html", 
        gh.model.isTemp = !0) : 1 == hash.length && (gh.model.mode = "account"), "account" == gh.model.mode ? gh.model.owner = hash[0] : "tree" === gh.model.mode ? (gh.model.owner = hash[0], 
        gh.model.repo = hash[1], gh.model.branch = hash[3], gh.model.pr = pr || null) : "blob" === gh.model.mode ? (gh.model.owner = hash[0], 
        gh.model.repo = hash[1], gh.model.path = decodeURIComponent(hash.slice(4).join("/")), 
        gh.model.dir = gh.model.path.replace(/[^\/]*$/, ""), gh.model.branch = hash[3], 
        gh.model.pr = pr || null) : "edit" === gh.model.mode ? (gh.model.owner = hash[0], 
        gh.model.repo = hash[1], gh.model.branch = decodeURIComponent(hash[3]), gh.model.path = decodeURIComponent(hash.slice(4).join("/")), 
        gh.model.pr = pr || null) : "buy" == gh.model.mode && (gh.model.owner = hash[0], 
        gh.model.repo = hash[1]), $(window).trigger("pGithubChange", [ gh.model ]);
    }, gh.getInfoFromRawContentUrl = function(url) {
        var params = url.replace("https://raw.githubusercontent.com/", "");
        params = params.split("/");
        var obj = {};
        return obj.owner = params[0], obj.repo = params[1], obj.branch = params[2], obj.path = params.slice(3).join("/"), 
        obj;
    }, gh.editRepo = function(owner, repo, prop, value, callback) {
        (repo = gh.github.getRepo(owner, repo)).edit(prop, value, function(err, data) {
            callback(err, data);
        });
    }, gh.fork = function(owner, repo, callback) {
        gh.github.getRepo(owner, repo).fork(callback);
    }, gh.branch = function(owner, repo, oldBranch, newBranch, callback) {
        gh.github.getRepo(owner, repo).branch(oldBranch, newBranch, callback);
    }, gh.branch2 = function(owner, repo, branch, newOwner, newRepo, newBranch, callback) {
        gh.github.getRepo(owner, repo).branch2(branch, newOwner, newRepo, newBranch, callback);
    }, gh.searchUser = function(name, callback) {
        gh.github.getSearch(name).users("", callback);
    }, gh.isLogged = function() {
        return gh.username;
    }, gh.showSettingsProject = function() {
        ModalService.showModal({
            templateUrl: "/views/settings-project.html",
            controller: function(close) {},
            controllerAs: "p"
        }).then(function(modal) {
            modal.element.modal();
        });
    }, gh.showLogin = function(callback, error, message) {
        ModalService.showModal({
            templateUrl: "/views/login.html",
            controller: function(close) {
                this.message = "Welcome to Pingendo", this.action = function(result) {
                    gh.login(function() {
                        console.log("CLOSE TRUE"), close(!0), $(".modal, .modal-backdrop").remove();
                    });
                };
            },
            controllerAs: "p"
        }).then(function(modal) {
            modal.element.modal(), callback && modal.close.then(callback);
        });
    }, gh.login = function(callback) {
        var provider = new firebase.auth.GithubAuthProvider();
        provider.addScope("repo"), provider.addScope("user:email"), firebase.auth().signInWithPopup(provider).then(function(result) {
            localStorage.setItem("t", result.credential.accessToken), logInGithub(callback);
        });
    }, gh.getConnectedRepos = function(callback) {
        firebase.database().ref("/users/" + gh.username + "/repos/").on("value", function(snapshot) {
            callback(null, snapshot.val());
        });
    }, gh.connectRepo = function(name, callback) {
        var repo = {};
        repo.name = name, firebase.database().ref("/users/" + gh.username + "/repos/").child(repo.name).set(repo), 
        callback();
    }, gh.addRepo = function(isWizard, callback) {
        ModalService.showModal({
            templateUrl: "/views/create-project.html",
            controller: "CreateProjectController",
            controllerAs: "p",
            inputs: {
                isWizard: isWizard
            }
        }).then(function(modal) {
            modal.element.modal(), callback && modal.close.then(callback);
        });
    }, gh.merge = function(owner, repo, issueNumber, callback) {
        (repo = gh.github.getRepo(owner, repo)).merge(issueNumber, callback);
    }, gh.getIssue = function(owner, repo, callback) {
        gh.github.getIssues(owner, repo).list({}, callback);
    }, gh.getIssueComments = function(owner, repo, issueNumber, callback) {
        gh.github.getIssues(owner, repo).listComment(issueNumber, callback);
    }, gh.postIssueComment = function(owner, repo, issueNumber, comment, callback) {
        gh.github.getIssues(owner, repo).comment(issueNumber, comment, callback);
    }, gh.getRepo = function(owner, repo, callback) {
        (repo = gh.github.getRepo(owner, repo)).show(callback);
    }, gh.renameFile = function(owner, repo, branch, path, newPath, callback) {
        (repo = gh.github.getRepo(owner, repo)).move(branch, path, newPath, function(err, data) {
            callback(err, data);
        });
    }, gh.getBlob = function(owner, repo, sha, callback) {
        (repo = gh.github.getRepo(owner, repo)).getBlob(sha, callback);
    }, gh.checkSubscription = function(owner, repo, callback) {
        (repo = gh.github.getRepo(owner, repo)).checkSubscription(callback);
    }, gh.deleteSubscription = function(owner, repo, callback) {
        (repo = gh.github.getRepo(owner, repo)).deleteSubscription(callback);
    }, gh.deleteRef = function(owner, repo, ref, callback) {
        (repo = gh.github.getRepo(owner, repo)).deleteRef(ref, callback);
    }, gh.getRepos = function(callback) {
        gh.github.getUser().repos(callback);
    }, gh.createRepo = function(name, private, callback) {
        gh.github.getUser().createRepo({
            name: name,
            private: "true" === private
        }, callback);
    }, gh.getRepoCollaborators = function(owner, repo, callback) {
        (repo = gh.github.getRepo(owner, repo)).getCollaborators(function(err, data) {
            callback(err, data);
        });
    }, gh.addCollaborator = function(owner, repo, username, callback) {
        (repo = gh.github.getRepo(owner, repo)).addCollaborator(username, function(err, data) {
            callback(err, data);
        });
    }, gh.removeCollaborator = function(owner, repo, username, callback) {
        (repo = gh.github.getRepo(owner, repo)).removeCollaborator(username, function(err, data) {
            callback(err, data);
        });
    }, gh.getAuthUserInfo = function(callback) {
        gh.github.getUser().getAuthUserInfo(function(err, user) {
            callback(err, user);
        });
    }, gh.getUser = function(username, callback) {
        gh.github.getUser().show(username, function(err, user) {
            callback(err, user);
        });
    }, gh.getRef = function(owner, repo, branch, callback) {
        (repo = gh.github.getRepo(owner, repo)).getRef(branch, function(err, data) {
            callback(err, data);
        });
    }, gh.changeStatusPullRequest = function(owner, repo, number, status, callback) {
        (repo = gh.github.getRepo(owner, repo)).updatePullRequest(number, {
            state: status
        }, function(err, data) {
            callback(err, data);
        });
    }, gh.renamePullRequest = function(owner, repo, number, title, callback) {
        (repo = gh.github.getRepo(owner, repo)).updatePullRequest(number, {
            title: title
        }, function(err, data) {
            callback(err, data);
        });
    }, gh.createPullRequest = function(owner, repo, pull, callback) {
        (repo = gh.github.getRepo(owner, repo)).createPullRequest(pull, function(err, pullRequest) {
            callback(err, pullRequest);
        });
    }, gh.createRef = function(owner, repo, refSpec, callback) {
        (repo = gh.github.getRepo(owner, repo)).createRef(refSpec, function(err, data) {
            callback(err, data);
        });
    }, gh.logout = function() {
        firebase.auth().signOut().then(function() {
            logInGithub();
        }, function(error) {});
    }, gh.getTree = function(owner, repo, branch, callback) {
        (repo = gh.github.getRepo(owner, repo)).getTree(branch + "?recursive=true", function(err, data) {
            callback(err, data);
        });
    }, gh.getPulls = function(owner, repo, callback) {
        (repo = gh.github.getRepo(owner, repo)).listPulls("all", function(err, data) {
            callback(err, data);
        });
    }, gh.getPull = function(owner, repo, index, callback) {
        (repo = gh.github.getRepo(owner, repo)).getPull(index, function(err, data) {
            callback(err, data);
        });
    }, gh.getPullFiles = function(owner, repo, index, callback) {
        (repo = gh.github.getRepo(owner, repo)).getPullFiles(index, callback);
    }, gh.createPull = function(owner, repo, head, base, title, callback) {
        (repo = gh.github.getRepo(owner, repo)).createPullRequest({
            head: head,
            base: base,
            title: title
        }, callback);
    }, gh.getPullsWithFiles = function(owner, repo, callback) {
        (repo = gh.github.getRepo(owner, repo)).listPulls("", function(err, pulls) {
            function getFiles(pull) {
                var deferred = $.Deferred();
                return function(pull) {
                    console.log("REPO inside ", repo), repo.getPullFiles(pull.number, function(err, data) {
                        data && (pull.files = data), deferred.resolve();
                    });
                }(pull), deferred.promise();
            }
            console.log("REPO out ", repo);
            var deferreds = [];
            $(pulls).each(function(index, pull) {
                deferreds.push(getFiles(pull));
            }), $.when.apply($, deferreds).then(function() {
                callback(null, pulls);
            }).fail(function() {}).always(function() {});
        });
    }, gh.getRelevantPulls = function(owner, repo, path, callback) {
        (repo = gh.github.getRepo(owner, repo)).listPulls("", function(err, pulls) {
            function getFiles(pull) {
                var deferred = $.Deferred();
                return function(pull) {
                    repo.getPullFiles(pull.number, function(err, data) {
                        data && (pull.files = data), deferred.resolve();
                    });
                }(pull), deferred.promise();
            }
            var deferreds = [];
            $(pulls).each(function(index, pull) {
                deferreds.push(getFiles(pull));
            }), $.when.apply($, deferreds).then(function() {
                var ret = [];
                $(pulls).each(function(index, pull) {
                    $(pull.files).each(function(index, file) {
                        if (file.filename == path) return ret.push(pull), !0;
                    });
                }), callback(null, ret);
            }).fail(function() {}).always(function() {});
        });
    }, gh.compare = function(owner, repo, base, head, callback) {
        (repo = gh.github.getRepo(owner, repo)).compare(base, head, callback);
    }, gh.getContents = function(owner, repo, branch, path, callback) {
        (repo = gh.github.getRepo(owner, repo)).contents(branch, path, callback);
    }, gh.getBinaryFileContent = function(owner, repo, branch, path, callback) {
        gh.getContents(owner, repo, branch, path, function(err, data) {
            err ? callback(err) : callback(null, data.content);
        });
    }, gh.getFileContent = function(owner, repo, branch, path, callback) {
        gh.getContents(owner, repo, branch, path, function(err, data) {
            if (err) callback(err); else {
                var data = data.content.replace(/\s/g, "");
                callback(null, decodeURIComponent(escape(atob(data))));
            }
        });
    }, gh.removeFile = function(owner, repo, branch, path, callback) {
        (repo = gh.github.getRepo(owner, repo)).remove(branch, path, callback);
    }, gh.pushFile = function(owner, repo, branch, path, data, callback) {
        (repo = gh.github.getRepo(owner, repo)).write(branch, path, data, "Commit from Pingendo", {}, callback);
    }, gh.pushFile2 = function(owner, repo, branch, path, sha, data, callback) {
        (repo = gh.github.getRepo(owner, repo)).write2(branch, path, sha, data, "Commit from Pingendo", {}, callback);
    }, gh.getPullRequestEvent = function(owner, repo, callback) {
        (repo = gh.github.getRepo(owner, repo)).getPullRequestEvent(callback);
    }, gh.getIssuesEvent = function(owner, repo, callback) {
        (repo = gh.github.getRepo(owner, repo)).getIssuesEvent(callback);
    }, gh;
} ]), angular.module("p-directives").directive("pGitrenamerepo", [ "pingendo", "githubService", "$sce", function(pingendo, githubService, $sce) {
    return {
        template: '\t      \t<label for="reponameinput">Repository name</label>\t      \t<div class="input-group">\t\t\t  <input id="reponameinput" type="text" ng-model="r.value" ng-model-options="{ debounce: 500 }" ng-change="r.checkName()" class="form-control" >\t\t      <span class="input-group-btn">\t\t        <a class="btn btn-x"  ng-click="r.renameRepo()" ng-class="{\'disabled\': r.value == r.reponame }" type="button">Rename</a>\t\t      </span>\t\t    </div>\t\t    <br/>            <span ng-if="r.status==\'exists\'">The repo name already exists.</span>\t        <span ng-if="r.status==\'checking\'">Checking</span>',
        controllerAs: "r",
        controller: function($scope, $timeout) {
            var self = this;
            this.value = this.reponame = githubService.model.repo, this.checkName = function() {
                this.value ? (this.value = this.value.replace(/ /g, "-"), this.status = "checking", 
                githubService.github.getRepo(githubService.username, this.value).show(function(err, data) {
                    err && 404 == err.error ? $scope.$apply(function() {
                        self.status = "";
                    }) : $scope.$apply(function() {
                        self.status = "exists";
                    });
                })) : this.status = null;
            }, this.renameRepo = function() {
                if ("checking" != this.status) {
                    this.status = "loading";
                    var callback = function() {
                        self.status = "", self.reponame = self.value, githubService.gotoState("/" + githubService.model.owner + "/" + self.value);
                    };
                    this.value = this.value.replace(/ /g, "-"), githubService.editRepo(githubService.model.owner, githubService.model.repo, "name", this.value, function(err, data) {
                        $scope.$apply(function() {
                            if (!err) {
                                var rootRef = firebase.database().ref("/users/" + githubService.model.owner + "/repos/"), oldName = self.reponame, newName = self.value;
                                rootRef.child(oldName).once("value", function(readSnap) {
                                    readSnap.val() ? rootRef.child(newName).set(readSnap.val(), function(error) {
                                        error || (oldName && rootRef.child(oldName).remove(), callback());
                                    }) : callback();
                                });
                            }
                        });
                    });
                }
            };
        }
    };
} ]), angular.module("p-directives").directive("pGitcollaborators", [ "pingendo", "githubService", "$sce", function(pingendo, githubService, $sce) {
    return {
        template: '\t   \t\t\t  \t<label for="reponameinput">Collaborators</label>\t   \t\t\t    <div ng-repeat="collaborator in c.collaborators" class="m-b-md" ng-show="collaborator.login != c.model.owner " >\t\t\t\t        <img ng-src="{{collaborator.avatar_url}}" class="img-circle" style="width:32px"/>&nbsp;\t\t\t\t\t    <span class="m-l-sm">{{collaborator.login}}</span>\t\t\t\t\t    <span class="pull-right"><a style="cursor:pointer;" ng-click="c.removeCollaborator(collaborator)" ><i class="fa fa-times" aria-hidden="true"></i></a></span>\t\t\t\t  \t</div>\t\t\t\t\t<div class="input-group m-t-md ">\t\t\t\t\t  <input id="reponameinput" type="text" placeholder="search by username" ng-model="c.newCollaboratorName" ng-model-options="{ debounce: 500 }" ng-change="c.checkCollaboratorName()" class="form-control" >\t\t\t\t      <span class="input-group-btn">\t\t\t\t        <a class="btn btn-x" type="button" style="cursor:pointer" ng-click="c.action()" ng-class="{\'disabled\': c.status != \'exists\' }"  >Add collaborator</a>\t\t\t\t      </span>\t\t\t\t    </div>\t\t\t        <p class="text-muted m-t-sm" >\t\t\t          <span ng-if="c.status==\'exists\'"><i class="fa fa-check text-success"></i> <img class="user-circle" src="{{c.newCollaborator.avatar_url}}"></img> - {{c.newCollaboratorName}}  </span>\t\t\t          <span ng-if="c.status==\'isowner\'"><i class="fa fa-check text-warning"></i> {{c.newCollaboratorName}} is already the owner of the repo </span>\t\t\t          <span ng-if="c.status==\'alreadyCollaborator\'"><i class="fa fa-check text-warning"></i> {{p.name}} is already a collaborator </span>\t\t\t          <span ng-if="c.status==\'dontexists\'"><i class="fa fa-check text-warning"></i> No user found </span>\t\t\t          <span ng-if="c.status==\'checking\'">Checking</span>\t\t\t        </p>\t\t\t\t  ',
        controllerAs: "c",
        controller: function($scope, $timeout) {
            var self = this;
            this.newCollaboratorName = "", this.newCollaborator = {}, this.collaborators = angular.element($("p-git-tree")).scope().$parent.collaborators, 
            this.model = githubService.model, this.action = function() {
                githubService.startProgressBar(), githubService.addCollaborator(this.model.owner, this.model.repo, this.newCollaboratorName, function(err, data) {
                    err ? scope.showError("Error adding collaborator : ", err) : (self.newCollaboratorName = "", 
                    self.status = "noName", self.collaborators.push(self.newCollaborator)), githubService.progressbar.complete();
                });
            }, this.checkCollaboratorName = function() {
                if (this.status = "checking", "" != this.newCollaboratorName) if (this.newCollaboratorName.toLowerCase() != githubService.model.owner) {
                    for (var i = 0; i < this.collaborators.length; i++) if (this.collaborators[i].login.toLowerCase() == this.newCollaboratorName.toLowerCase()) return void (self.status = "alreadyCollaborator");
                    githubService.searchUser(this.newCollaboratorName, function(error, data) {
                        self.newCollaborator = !1, console.log("FOUNDED DATA", data.items), $scope.$apply(function() {
                            if (data.items && 1 == data.items.length) self.newCollaborator = data.items[0], 
                            self.status = "exists"; else if (data.items && data.items.length > 1) {
                                for (var found = !1, i = 0; i < data.items.length; i++) data.items[i].login === self.newCollaboratorName && (found = !0, 
                                self.newCollaborator = data.items[i]);
                                self.status = found ? "exists" : "dontexists";
                            } else self.status = "dontexists";
                        });
                    });
                } else this.status = "isowner"; else this.status = "noName";
            }, this.removeCollaborator = function(collaborator) {
                githubService.removeCollaborator(githubService.model.owner, githubService.model.repo, collaborator.login, function(err, data) {
                    if (!err) {
                        for (var index = !1, i = 0; i < self.collaborators.length; i++) self.collaborators[i].login == collaborator.login && (index = i);
                        index && $scope.$apply(function() {
                            self.collaborators.splice(index, 1);
                        });
                    }
                });
            };
        }
    };
} ]), angular.module("p-directives").directive("pGitprivaterepo", [ "pingendo", "githubService", "$sce", function(pingendo, githubService, $sce) {
    return {
        template: '\t      \t<div ng-show="!x.repo.private" >\t      \t\t<label  for="reponameinput">Make this repository private</label>  \t\t      \t<p ng-show="x.user.plan.name == \'free\' " >You need to upgrade your github plan to make this repository private.</p>  \t\t    \t<a class="btn btn-x btn-block" ng-click="x.setPrivate(true)" ng-class="{\'disabled\': x.user.plan.name == \'free\' }" type="button">Make private</a>  \t\t    </div>  \t\t    <div ng-show="x.repo.private" >\t      \t\t<label  for="reponameinput">Make this repository public</label>  \t\t      \t<p>Make this repository visible to anyone.</p>  \t\t    \t<a class="btn btn-x btn-block" ng-click="x.setPrivate(false)" type="button">Make public</a>  \t\t    </div>     \t',
        controllerAs: "x",
        controller: function($scope, $timeout) {
            var self = this;
            this.repo = angular.element($("p-git-tree")).scope().$parent.repo, githubService.getAuthUserInfo(function(err, user) {
                $scope.$apply(function() {
                    self.user = user;
                });
            }), this.setPrivate = function(bool) {
                githubService.editRepo(githubService.model.owner, githubService.model.repo, "private", bool, function(err, repo) {
                    $scope.$apply(function() {
                        self.repo = repo;
                    });
                });
            };
        }
    };
} ]), pApp.isWeb() && (angular.module("p-directives").directive("pState", [ "pingendo", "githubService", function(pingendo, githubService) {
    return {
        link: function(scope, element, attrs) {
            element.css("cursor", "pointer"), element.on("click", function(e) {
                history.pushState(null, "", attrs.pState), githubService.refreshModel(), e.preventDefault();
            });
        }
    };
} ]), angular.module("p-directives").directive("pGit", [ "pingendo", "githubService", "$sce", "$compile", "$window", "ModalService", function(pingendo, githubService, $sce, $compile, $window, ModalService) {
    return {
        scope: {},
        template: '<p-git-autoreload></p-git-autoreload>                  <p-toolbar class="navbar navbar-static-top m-b-0 p-a-0"></p-toolbar>                  <p-git-tree ng-if="repo"></p-git-tree>                  <p-layout ng-if="!repo && editor" p-autoload></p-layout>                  <p-git-account ng-if="user"></p-git-account>                  <p-git-404 ng-if="die404"></p-git-404>',
        link: function(scope, element, attrs, $http) {
            element.show();
            var lastOwner = null, lastRepo = null, lastPull = null, lastBlob = null, lastMode = null, lastUsername = null, loadTree = function(callback) {
                if (githubService.model.pr) {
                    githubService.model.pr.split("/")[3];
                    loadPull(function(err, tree) {
                        err && callback(err, null), scope.canWriteBase = !!scope.repo.permissions && scope.repo.permissions.push, 
                        tree.pull.head.repo.owner.login.toLowerCase() === scope.repo.owner.login.toLowerCase() ? scope.canWrite = scope.canWriteBase : scope.canWrite = tree.pull.head.repo.owner.login.toLowerCase() === githubService.username.toLowerCase(), 
                        scope.lastUpdateRepo = moment(tree.pull.updated_at).fromNow(), callback(err, tree);
                    });
                } else loadMaster(function(err, tree) {
                    if (err && 409 == err.error) tree = {
                        files: []
                    }, err = null; else if (err) return void callback(err, null);
                    scope.canWriteBase = !!scope.repo.permissions && scope.repo.permissions.push, scope.canWrite = !!scope.repo.permissions && scope.repo.permissions.push, 
                    scope.lastUpdateRepo = moment(scope.repo.pushed_at).fromNow(), callback(err, tree);
                });
            }, die404 = function() {
                scope.owner = null, scope.repo = null, scope.user = null, scope.editor = null, scope.die404 = !0, 
                githubService.completeProgressBar(), scope.$apply();
            }, routeChange = function() {
                var m = githubService.model;
                scope.url = m, scope.die404 = !1, scope.isLogged = githubService.isLogged(), "tree" == m.mode || "blob" == m.mode ? m.repo != lastRepo || m.owner != lastOwner || githubService.username != lastUsername ? (githubService.startProgressBar(), 
                loadRepo(function(err, repo) {
                    err ? die404() : (document.title = m.owner + "/" + m.repo, scope.repo = repo, loadTree(function(err, tree) {
                        if (err) die404(); else {
                            if (scope.canWriteBase) {
                                var owner = m.pr ? m.pr.split("/")[1] : m.owner, repo = m.pr ? m.pr.split("/")[2] : m.repo;
                                githubService.getRepoCollaborators(owner, repo, function(err, collaborators) {
                                    if (err && 403 != err.error && 401 != err.error) callback(err, null); else {
                                        for (var i = collaborators.length - 1; i >= 0; i--) if (collaborators[i].login.toLowerCase() == owner.toLowerCase()) {
                                            collaborators.splice(i, 1);
                                            break;
                                        }
                                        scope.collaborators = collaborators;
                                    }
                                });
                            }
                            scope.tree = tree, m.path ? loadBlob(function(err, blob) {
                                scope.$apply(function() {
                                    scope.blob = blob, scope.editor = null, scope.user = null, githubService.completeProgressBar();
                                });
                            }) : scope.$apply(function() {
                                scope.blob = null, scope.editor = null, scope.user = null, githubService.completeProgressBar();
                            });
                        }
                    }));
                })) : m.pr != lastPull ? (githubService.startProgressBar(), loadTree(function(err, tree) {
                    err ? die404() : (scope.tree = tree, m.path ? loadBlob(function(err, blob) {
                        scope.$apply(function() {
                            scope.blob = blob, scope.editor = null, githubService.completeProgressBar();
                        });
                    }) : scope.$apply(function() {
                        scope.blob = null, scope.editor = null, githubService.completeProgressBar();
                    }));
                })) : m.path != lastBlob && (m.path ? loadBlob(function(err, blob) {
                    err ? die404() : scope.$apply(function() {
                        scope.blob = blob, githubService.completeProgressBar();
                    });
                }) : scope.$apply(function() {
                    scope.blob = null, githubService.completeProgressBar();
                })) : "edit" == m.mode ? (scope.$apply(function() {
                    scope.url = m, scope.editor = m.path, scope.user = null, scope.repo = null;
                }), $(window).one("pDOMLoad", function() {
                    githubService.completeProgressBar();
                })) : "account" == m.mode ? loadUser(function(err, user) {
                    err ? die404() : scope.$apply(function() {
                        scope.url = m, scope.user = user, scope.repo = null, scope.editor = null, githubService.completeProgressBar();
                    });
                }) : die404(), lastBlob = m.path, lastPull = m.pr, lastRepo = m.repo, lastOwner = m.owner, 
                lastMode = m.mode, lastUsername = githubService.username;
            };
            $(window).on("pGithubChange", function() {
                routeChange();
            }), $(window).on("pGitLogin", function() {
                $(document.body).find("> .loader").remove(), scope.$apply(function() {});
            }), window.addEventListener("beforeunload", function(e) {
                if (pEditor && $(pEditor)[0].dirty) return (e || window.event).returnValue = "", 
                confirmationMessage;
            }), scope.gotoState = function(state) {
                githubService.gotoState(state);
            }, $(window).on("pDOMSave", function() {
                try {
                    crosstab.broadcast("pDOMSave", scope.model.repo);
                } catch (e) {}
            });
            var loadMaster = function(callback) {
                var m = githubService.model, ret = {
                    files: []
                };
                githubService.getTree(m.owner, m.repo, m.branch, function(err, tree) {
                    if (err) callback(err, null); else {
                        if (tree) for (var x = 0; x < tree.length; x++) {
                            var file = tree[x];
                            "blob" == file.type && (file.type = githubService.getFileType(file), file.path == m.path && (file.active = !0), 
                            ret.files.push(tree[x]));
                        }
                        callback(null, ret);
                    }
                });
            }, loadPull = function(callback) {
                var m = githubService.model, prNumber = m.pr.split("/")[3], realOwner = m.pr.split("/")[1], realRepo = m.pr.split("/")[2], ret = {
                    files: [],
                    pull: null
                };
                githubService.getPull(realOwner, realRepo, prNumber, function(err, pull) {
                    err ? callback(err, null) : (ret.pull = pull, githubService.getTree(pull.head.repo.owner.login, pull.head.repo.name, encodeURIComponent(pull.head.ref), function(err, tree) {
                        if (err) callback(err, null); else {
                            for (var x = 0; x < tree.length; x++) if ("blob" == tree[x].type) {
                                var file = tree[x];
                                file.type = githubService.getFileType(file), file.path == m.path && (file.active = !0), 
                                ret.files.push(file);
                            }
                            githubService.getPullFiles(realOwner, realRepo, pull.number, function(err, files) {
                                for (var x = 0; x < ret.files.length; x++) for (var file = ret.files[x], xx = 0; xx < files.length; xx++) files[xx].filename == file.path && (file.status = files[xx].status, 
                                file.previous_filename = files[xx].previous_filename);
                                for (xx = 0; xx < files.length; xx++) if ("removed" == files[xx].status) {
                                    files[xx].path = files[xx].filename;
                                    new URI(files[xx].filename);
                                    files[xx].type = githubService.getFileType(files[xx]), ret.files.push(files[xx]);
                                }
                                callback(null, ret);
                            });
                        }
                    }));
                });
            }, loadBlob = function(callback) {
                var m = githubService.model;
                if (!m.path) return null;
                for (var i = 0; i < scope.tree.files.length; i++) if (scope.tree.files[i].path == m.path) {
                    var f = scope.tree.files[i];
                    scope.tree.pull ? f.previewUrl = "/raw/" + scope.tree.pull.head.user.login + "/" + scope.tree.pull.head.repo.name + "/" + encodeURIComponent(scope.tree.pull.head.ref) + "/" + encodeURIComponent(f.path).split("%2F").join("/") : f.previewUrl = "/raw/" + scope.repo.owner.login + "/" + scope.repo.name + "/master/" + encodeURIComponent(f.path).split("%2F").join("/"), 
                    callback(null, f);
                }
            }, loadUser = function(callback) {
                if (!githubService.isLogged()) return githubService.showLogin(), void callback(null);
                githubService.model;
                var user = firebase.auth().currentUser;
                user.username = githubService.username, document.title = user.username, firebase.database().ref("/users/" + githubService.username + "/repos/").on("value", function(snapshot) {
                    user.repos = snapshot.val(), user.repos || (user.repos = []), callback(null, user);
                });
            }, loadRepo = function(callback) {
                var m = githubService.model;
                if (m.pr) var headOwner = m.pr.split("/")[1], headRepo = m.pr.split("/")[2]; else var headOwner = m.owner, headRepo = m.repo;
                githubService.getRepo(headOwner, headRepo, function(err, repo) {
                    err ? callback(err, null) : (scope.fastSpringsData = null, githubService.getPulls(headOwner, headRepo, function(err, pulls) {
                        err ? scope.showError("get pulls", err) : (scope.pulls = [], repo.pulls = pulls, 
                        m.pr && $(repo.pulls).each(function(k, pull) {
                            pull.number == m.pr.split("/")[3] && (pull.active = !0);
                        }), callback(null, repo));
                    }));
                });
            };
            scope.showError = function(prefix, err) {
                var json = JSON.parse(err.request.responseText);
                json.errors && json.errors[0] && json.errors[0].message ? $window.alert(json.errors[0].message) : $window.alert(json.message);
            };
        }
    };
} ])), pApp.isWeb() && (angular.module("p-directives").directive("pAutoload", [ "pingendo", "githubService", function(pingendo, githubService) {
    return {
        link: function($scope, element) {
            $(window).on("pReady", function() {
                githubService.github;
                var model = githubService.model;
                try {
                    !function() {
                        if (model.pr) {
                            var pr_splitted = model.pr.split("/"), prOwner = pr_splitted[1], prRepo = pr_splitted[2], prNumber = pr_splitted[3];
                            githubService.github.getRepo(prOwner, prRepo).getPull(prNumber, function(err, pull) {
                                pingendo.openEditor("http://pingendo.com/" + pull.head.repo.owner.login + "/" + pull.head.repo.name + "/" + pull.head.ref + "/" + model.path), 
                                document.title = "(#" + pull.number + ") " + model.path;
                            });
                        } else pingendo.openEditor("http://pingendo.com/" + model.owner + "/" + model.repo + "/" + model.branch + "/" + model.path), 
                        document.title = model.path;
                    }();
                } catch (e) {
                    console.log("ERROR ", e);
                }
            });
        }
    };
} ]), angular.module("p-directives").directive("pGitUser", [ "pingendo", "githubService", "$sce", function(pingendo, githubService, $sce) {
    return {
        template: '<div ng-if="username && url.mode != \'account\'" class="btn-group">                    <a class="btn btn-darkest" href="/me" p-state="/me">My projects</a>                  </div>                  <button ng-if="username" class="dropdown-toggle" data-toggle="dropdown">                    <img ng-src="{{avatar}}" class="p-r-2 img-circle" style="width:18px"/>                     <i class="fa fa-caret-down" style="color:white"></i>                     </button>                  <a ng-if="!username" ng-click="login()" class="pull-right btn btn-darkest" data-toggle="dropdown">Login with Github</a>                  <ul ng-if="username" class="dropdown-menu" role="menu">                    <li>                      <a>Logged as {{username}}</a>                      <a href="/me" p-state="/me">Projects</a>                      <a href="https://github.com/settings/profile" target="_blank">Github settings</a>                      <a ng-click="logout()">Logout</a>                    </li>                  </ul>',
        link: function($scope, element) {
            githubService.username && ($scope.username = githubService.username, $scope.avatar = githubService.avatar), 
            $scope.login = function() {
                githubService.login();
            }, element.addClass("dropdown pull-right"), $(window).on("pGitLogin", function() {
                $scope.$apply(function() {
                    $scope.username = githubService.username, $scope.avatar = githubService.avatar;
                });
            }), $scope.logout = function() {
                githubService.logout();
            };
        }
    };
} ])), pApp.isWeb() && angular.module("p-directives").directive("pGit404", [ "pingendo", "githubService", "$sce", function(pingendo, githubService, $sce) {
    return {
        template: '                  <div class="container-fluid m-t-0">                    <div class="row">                      <div class="col-xs-12 p-a-0 p-t-md p-x-lg text-center">                        <br><br><br><h1>Oops this is a 404<br></h1>                        <p class="lead">The page you are trying to access does not exists.</p>                      </div>                    </div>                  </div>',
        link: function(scope, element, attrs) {}
    };
} ]), angular.module("p-directives").directive("pButtonshare", function() {
    return {
        replace: !0,
        controller: function($scope) {
            var self = this;
            $scope.copyToClipboard = function() {
                var $temp = $("<input>");
                $("body").append($temp), $temp.val(self.url).select(), document.execCommand("copy");
            }, $scope.$watch("url", function() {
                var model = $scope.url;
                model && (self.url = "https://pingendo.com/raw/" + model.owner + "/" + model.repo + "/" + model.branch + "/" + model.path);
            });
        },
        controllerAs: "c",
        template: '<div class="btn-group">                  <a class="fa fa-share-square-o btn btn-darkest dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">                  </a>                  <div class="dropdown-menu " style="padding: 1rem 1rem !important;">                    <div class="input-group">                      <input type="text" class="form-control" size="50" onFocus="this.select()" value="{{c.url}}" >                      <span class="input-group-btn">                        <button class="btn btn-primary" ng-click="copyToClipboard()" type="button">Copy</button>                      </span>                    </div>                  </div>                </div>'
    };
}), angular.module("p-directives").directive("pFileActions", [ "pingendo", "githubService", "$sce", "$timeout", function(pingendo, githubService, $sce, $timeout) {
    return {
        template: '<div class="btn-group">                    <a class="fa fa-pencil" title="Edit" ng-if="blob.type == \'html\'" ng-click="edit();$event.stopPropagation()">                    </a>                    <a class="fa m-l fa-eye" title="Preview" nohref="{{blob.previewUrl}}" ng-click="c.preview(blob.previewUrl)" target="_blank" ></a>                    </a>                    <span class="dropdown m-l">                      <a type="button" class="dropdown-toggle" data-toggle="dropdown" >                        <span class="fa fa-ellipsis-v"></span>&nbsp;                        <span class="sr-only">Toggle Dropdown</span>                      </a>                      <ul class="dropdown-menu dropdown-menu-right dropup">                        <li ng-if="tree.pull" ng-click="revert()" ng-class="{\'disabled\': !canWrite || (  blob.status != \'renamed\' && blob.status != \'removed\' &&  blob.status != \'added\' && blob.status != \'modified\' )   }"><a>Discard changes</a></li>                        <li ng-class="{\'disabled\': !canWrite || blob.status == \'removed\'}">                          <input type="file" ng-hide="!canWrite || blob.status == \'removed\'"  ng-model="fileReplaceUploded" base-sixty-four-input style="opacity:0;position:absolute; cursor:pointer">                          <a>Reupload</a>                        </li>                        <li ng-click="rename()" ng-class="{\'disabled\': !canWrite || blob.status == \'removed\'}"><a>Rename</a></li>                        <li ng-click="clone()"  ng-class="{\'disabled\': !canWrite || blob.status == \'removed\'}"><a>Clone</a></li>                        <li ng-click="remove()" ng-class="{\'disabled\': !canWrite || blob.status == \'removed\'} "><a>Delete</a></li>                      </ul>                    </span>                  </div>',
        controllerAs: "c",
        controller: function() {
            this.preview = function(url) {
                window.open(url, url);
            };
        },
        link: function(scope, element) {
            scope.fileReplaceUploded = "", scope.$watch("fileReplaceUploded", function(newValue, oldValue) {
                if (scope.fileReplaceUploded) {
                    githubService.startProgressBar();
                    var m = githubService.model;
                    if (scope.tree.pull) var owner = scope.tree.pull.head.repo.owner.login, repo = scope.tree.pull.head.repo.name, ref = scope.tree.pull.head.ref; else var owner = m.owner, repo = m.repo, ref = m.branch;
                    for (var x = 0; x < scope.tree.files.length && (!scope.tree.files[x].selected || "removed" == scope.tree.files[x].status); x++) ;
                    githubService.pushFile2(owner, repo, ref, scope.tree.files[x].path, scope.tree.files[x].sha, scope.fileReplaceUploded.base64, function(errPush, dataPush) {
                        errPush ? (scope.showError("Error replacing file : ", errPush), githubService.progressbar.complete()) : scope.$apply(function() {
                            scope.tree.files[x].sha = dataPush.content.sha, scope.tree.files[x].size = dataPush.content.size, 
                            scope.tree.files[x].git_url = dataPush.content.git_url, scope.tree.files[x].selected = !1, 
                            githubService.progressbar.complete();
                        });
                    });
                }
            }), scope.remove = function() {
                scope.canWrite && "removed" != scope.blob.status && pingendo.confirm("Are you sure you want to delete this file ?", function(answer) {
                    if (answer) {
                        githubService.startProgressBar();
                        for (var arrayUrl = [], x = 0; x < scope.tree.files.length; x++) scope.tree.files[x].selected && "removed" != scope.tree.files[x].status && arrayUrl.push(scope.tree.files[x]);
                        var _i = 0, next = function() {
                            if (_i >= arrayUrl.length) scope.$apply(function() {
                                scope.busy = !1, githubService.completeProgressBar();
                            }); else {
                                var m = githubService.model;
                                if (scope.tree.pull) var owner = scope.tree.pull.head.repo.owner.login, repo = scope.tree.pull.head.repo.name, ref = scope.tree.pull.head.ref; else var owner = m.owner, repo = m.repo, ref = m.branch;
                                githubService.removeFile(owner, repo, ref, encodeURIComponent(arrayUrl[_i].path), function(err, data) {
                                    err ? scope.$apply(function() {
                                        scope.busy = !1;
                                    }) : (scope.tree.pull ? scope.$apply(function() {
                                        for (var x = 0; x < scope.tree.files.length; x++) if (scope.tree.files[x].path == arrayUrl[_i].path) {
                                            if ("added" == scope.tree.files[x].status) {
                                                scope.tree.files.splice(x, 1);
                                                break;
                                            }
                                            scope.tree.files[x].status = "removed", scope.tree.files[x].selected = !1;
                                        }
                                    }) : scope.$apply(function() {
                                        for (var idx = -1, x = 0; x < scope.tree.files.length; x++) scope.tree.files[x].path == arrayUrl[_i].path && (idx = x);
                                        idx > -1 && scope.tree.files.splice(idx, 1);
                                    }), _i += 1, next());
                                });
                            }
                        };
                        arrayUrl.length > 0 && next();
                    }
                });
            }, scope.revert = function() {
                if (scope.canWrite && scope.tree.pull && ("removed" == scope.blob.status || "renamed" == scope.blob.status || "added" == scope.blob.status || "modified" == scope.blob.status)) {
                    githubService.startProgressBar();
                    for (var arrayUrl = [], x = 0; x < scope.tree.files.length; x++) scope.tree.files[x].selected && arrayUrl.push(scope.tree.files[x]);
                    var _i = 0, next = function() {
                        if (_i >= arrayUrl.length) scope.$apply(function() {
                            scope.busy = !1, githubService.completeProgressBar();
                        }); else {
                            if ("renamed" == arrayUrl[_i].status) toRevert = arrayUrl[_i].previous_filename; else var toRevert = arrayUrl[_i].path;
                            var m = githubService.model, base = scope.tree.pull.base, baseRepo = githubService.github.getRepo(base.user.login, base.repo.name), founded = (githubService.github.getRepo(scope.tree.pull.head.user.login, scope.tree.pull.head.repo.name), 
                            !1), owner = scope.tree.pull.head.user.login, repo = scope.tree.pull.head.repo.name, ref = scope.tree.pull.head.ref;
                            "added" == arrayUrl[_i].status ? githubService.removeFile(owner, repo, ref, toRevert, function(err, data) {
                                scope.$apply(function() {
                                    for (var xx = 0; xx < scope.tree.files.length; xx++) if (scope.tree.files[xx].path == arrayUrl[_i].path && "added" == scope.tree.files[xx].status) {
                                        scope.tree.files.splice(xx, 1), _i += 1;
                                        break;
                                    }
                                }), next();
                            }) : baseRepo.getCommit(base.ref, base.sha, function(err, commit) {
                                baseRepo.getTree(commit.tree.sha + "?recursive=true", function(err, files) {
                                    if ("renamed" == arrayUrl[_i].status) {
                                        for (x = 0; x < files.length; x++) if (files[x].path == toRevert) {
                                            githubService.renameFile(owner, repo, ref, arrayUrl[_i].path, toRevert, function(errPush, dataPush) {
                                                scope.$apply(function() {
                                                    arrayUrl[_i].status = "", arrayUrl[_i].path = toRevert, arrayUrl[_i].selected = !1, 
                                                    _i += 1;
                                                }), githubService.gotoState("/" + owner + "/" + repo + "/blob/" + ref + "/" + toRevert + "?pr=" + m.pr), 
                                                next();
                                            }), founded = !0;
                                            break;
                                        }
                                    } else for (var x = 0; x < files.length; x++) if (files[x].path == toRevert) {
                                        baseRepo.getBlob(files[x].sha, function(err, blob) {
                                            githubService.pushFile2(scope.tree.pull.head.repo.owner.login, scope.tree.pull.head.repo.name, scope.tree.pull.head.ref, toRevert, arrayUrl[_i].sha, btoa(unescape(encodeURIComponent(blob))), function(err, data) {
                                                scope.$apply(function() {
                                                    arrayUrl[_i].status = "", _i += 1;
                                                }), next();
                                            });
                                        }), founded = !0;
                                        break;
                                    }
                                });
                            });
                        }
                    };
                    arrayUrl.length > 0 && next();
                }
            }, scope.clone = function() {
                if (scope.canWrite && "removed" != scope.blob.status) {
                    githubService.startProgressBar();
                    for (var arrayUrl = [], x = 0; x < scope.tree.files.length; x++) scope.tree.files[x].selected && "removed" != scope.tree.files[x].status && arrayUrl.push(scope.tree.files[x]);
                    var getClonePath = function(path) {
                        for (var uri = new URI(path), newPath = path.replace("." + uri.suffix(), "") + "_copy." + uri.suffix(), found = !1, i = 0; i < scope.tree.files.length; i++) if (scope.tree.files[i].path == newPath) return found = !0, 
                        getClonePath(newPath);
                        if (0 == found) return newPath;
                    }, _i = 0, next = function() {
                        if (_i >= arrayUrl.length) scope.$apply(function() {
                            scope.busy = !1, githubService.completeProgressBar();
                        }); else {
                            var m = githubService.model;
                            if (scope.tree.pull) var owner = scope.tree.pull.head.repo.owner.login, repo = scope.tree.pull.head.repo.name, ref = scope.tree.pull.head.ref; else var owner = m.owner, repo = m.repo, ref = m.branch;
                            githubService.getBinaryFileContent(owner, repo, ref, arrayUrl[_i].path, function(err, data) {
                                if (!err) {
                                    var newPath = getClonePath(arrayUrl[_i].path);
                                    if (scope.tree.pull) var owner = scope.tree.pull.head.repo.owner.login, repo = scope.tree.pull.head.repo.name, ref = scope.tree.pull.head.ref; else var owner = m.owner, repo = m.repo, ref = m.branch;
                                    githubService.pushFile2(owner, repo, ref, newPath, "", data, function(errPush, dataPush) {
                                        if (errPush) return scope.showError("Error Cloning file : ", errPush), githubService.completeProgressBar(), 
                                        void scope.$apply(function() {
                                            scope.busy = !1;
                                        });
                                        scope.$apply(function() {
                                            for (var x = 0; x < scope.tree.files.length; x++) scope.tree.files[x].path == arrayUrl[_i].path && (scope.tree.files[x].selected = !1);
                                            dataPush.content.type = arrayUrl[_i].type, dataPush.content.selected = !0, scope.tree.pull && (dataPush.content.status = "added"), 
                                            scope.tree.files.push(dataPush.content);
                                        }), _i += 1, next();
                                    });
                                }
                            });
                        }
                    };
                    arrayUrl.length > 0 && next();
                }
            }, scope.rename = function() {
                if (scope.canWrite && "removed" != scope.blob.status) {
                    for (var arrayUrl = [], x = 0; x < scope.tree.files.length; x++) scope.tree.files[x].selected && arrayUrl.push(scope.tree.files[x]);
                    var _i = 0, next = function() {
                        if (_i >= arrayUrl.length) return scope.busy = !1, void githubService.completeProgressBar();
                        var m = githubService.model;
                        if (scope.tree.pull) var owner = scope.tree.pull.head.repo.owner.login, repo = scope.tree.pull.head.repo.name, ref = scope.tree.pull.head.ref; else var owner = m.owner, repo = m.repo, ref = m.branch;
                        pingendo.prompt("Please enter a new name", arrayUrl[_i].path, function(newPath) {
                            if (newPath) {
                                githubService.startProgressBar();
                                var oldSuffix = new URI(arrayUrl[_i].path).suffix();
                                "/" == (newPath = new URI(newPath).suffix(oldSuffix).pathname())[0] && (newPath = newPath.substr(1)), 
                                arrayUrl[_i].path == newPath && (_i += 1, next()), githubService.renameFile(owner, repo, ref, arrayUrl[_i].path, newPath, function(errPush, dataPush) {
                                    if (errPush) return scope.showError("Error Rename file : ", errPush), scope.$apply(function() {
                                        scope.busy = !1;
                                    }), void githubService.completeProgressBar();
                                    scope.$apply(function() {
                                        for (var x = 0; x < scope.tree.files.length; x++) if (scope.tree.files[x].path == arrayUrl[_i].path) {
                                            scope.tree.files[x].path = newPath;
                                            break;
                                        }
                                        scope.tree.pull ? scope.tree.pull && (scope.tree.files[x].status = "renamed", githubService.gotoState("/" + owner + "/" + repo + "/blob/" + ref + "/" + scope.blob.path + "?pr=" + m.pr)) : githubService.gotoState("/" + owner + "/" + repo + "/blob/master/" + newPath);
                                    }), _i += 1, next();
                                });
                            } else _i += 1, next();
                        });
                    };
                    arrayUrl.length > 0 && next();
                }
            }, scope.fullscreenToggle = function() {
                scope.fullscreen = !scope.fullscreen;
            };
        }
    };
} ]), pApp.isWeb() && (app.controller("pFilePickerController", [ "$scope", "param", "githubService", "close", function($scope, param, githubService, close) {
    var m = githubService.model, self = this;
    this.select = function(file) {
        close(file, 0), $(".modal-backdrop").remove();
    }, githubService.github.getRepo(m.owner, m.repo).getTree(m.branch + "?recursive=true", function(err, data) {
        var files = [], re = /(?:(\.[^.]+))?$/;
        $(data).each(function(k, f) {
            if (!re.exec(f.path)[1]) return !0;
            var ext = re.exec(f.path)[1].toLowerCase();
            if ((!param || 0 == param.length || param.indexOf(ext) > -1) && f.path != m.path) {
                var absoluteUri = new URI("/" + f.path);
                f.path = absoluteUri.relativeTo("/" + m.path).toString(), files.push(f);
            }
        }), $scope.$apply(function() {
            self.files = files;
        });
    });
} ]), angular.module("p-directives").directive("pFilePicker", [ "pingendo", "ModalService", function(pingendo, ModalService) {
    return {
        scope: {
            ngModel: "="
        },
        link: function($scope, element, $attrs) {
            if (pApp.isWeb) {
                window.filePicker = self = this;
                var chooseFile = function(scope, attrs, controlParam) {
                    controlParam || (controlParam = $attrs.pFilePicker), ModalService.showModal({
                        templateUrl: "/views/gitbrowser.html",
                        controller: "pFilePickerController",
                        controllerAs: "c",
                        inputs: {
                            param: JSON.parse(controlParam)
                        }
                    }).then(function(modal) {
                        modal.element.modal(), modal.close.then(function(file) {
                            scope && ($scope = scope), attrs && ($attrs = attrs), $scope.ngModel = file.path, 
                            $scope.$parent.$eval($attrs.ngChange);
                        });
                    });
                };
                filePicker.chooseFile = chooseFile, $(element).css("padding-right", "25px"), $(element).parent().css("position", "relative");
                var $i = $("<i class='fa fa-folder-o'></i>");
                $i.css("position", "absolute"), $i.css("right", "15px"), $i.css("top", "5px"), $(element).parent().prepend($i), 
                $i.on("click", function() {
                    chooseFile();
                });
            }
        }
    };
} ])), angular.module("p-directives").directive("pGitRepoActions", [ "pingendo", "githubService", "$sce", function(pingendo, githubService, $sce) {
    return {
        template: '\t<div class="btn-group pull-right" ng-disabled="repo.playground" ng-if="defaultAction()">                      <button type="button" ng-class="{\'disabled\': !executableDefaultAction}" class="btn btn-x " aria-haspopup="true" aria-expanded="false" ng-click="executeDefaultAction()">                        {{defaultAction()}}                      </button>                      <button type="button" class="btn btn-x dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">                        <span class="caret"></span>&nbsp;                        <span class="sr-only">Toggle Dropdown</span>                      </button>                      <ul class="dropdown-menu">                        <li ng-if="!tree.pull"><a target="_blank" ng-href="http://{{repo.owner.login}}.github.io/{{repo.name}}/">Visit site</a></li>                        <li ng-if="tree.pull" ng-click="merge()" ng-class="{\'disabled\': !isMergeable() || !canWriteBase || repo.playground }"><a>Merge</a></li>                        <li ng-if="tree.pull" ng-click="closePull()" ng-class="{\'disabled\': !isCloseable() || repo.playground}" ><a>Close</a></li>                        <li ng-if="tree.pull" ng-click="reopenPull()" ng-class="{\'disabled\': (tree.pull.state != \'closed\') || (!canWrite && !canWriteBase) }"><a>Re-open</a></li>                        <li ng-if="tree.pull" ng-click="deleteBranch()" ng-class="{\'disabled\': tree.pull.state != \'closed\' || (!canWrite && !canWriteBase) }"><a >Delete</a></li>                      </ul>                    </div>',
        link: function(scope, element, attrs, $http) {
            if (pApp.isWeb()) {
                scope.executeDefaultAction = function() {
                    var a = scope.defaultAction();
                    "Merge" == a ? scope.merge() : "Close" == a ? scope.closePull() : "Publish" == a ? scope.publishToGhPages() : "Reopen" == a ? scope.reopenPull() : "Delete" == a && scope.deleteBranch();
                };
                var timeoutStatus = null;
                updateMergeableStatus = function() {
                    timeoutStatus || (timeoutStatus = setTimeout(function() {
                        timeoutStatus = null;
                        var m = githubService.model;
                        githubService.getPull(m.pr.split("/")[1], m.pr.split("/")[2], m.pr.split("/")[3], function(err, infoPull) {
                            scope.tree.pull = infoPull, scope.tree.pull && scope.tree.pull.mergeable_state && ("clean" == scope.tree.pull.mergeable_state || "dirty" == scope.tree.pull.mergeable_state) ? scope.$digest() : (!scope.tree.pull.mergeable_state || "clean" != scope.tree.pull.mergeable_state && "dirty" != scope.tree.pull.mergeable_state) && updateMergeableStatus();
                        });
                    }, 2e3));
                }, scope.defaultAction = function() {
                    if (!scope.tree.pull) {
                        if (scope.repo && scope.repo.playground) scope.executableDefaultAction = !1; else {
                            if (!scope.repo || !scope.canWriteBase) return "";
                            scope.executableDefaultAction = !0;
                        }
                        return "Publish";
                    }
                    if (scope.repo && scope.repo.playground) return scope.executableDefaultAction = !1, 
                    "Merge";
                    if (!scope.repo || !scope.canWriteBase) return scope.tree.pull.user.login == githubService.username ? "closed" == scope.tree.pull.state ? (scope.executableDefaultAction = !0, 
                    "Delete branch") : (scope.executableDefaultAction = scope.isCloseable(), "Close") : "";
                    if (scope.tree.pull.merged || "closed" == scope.tree.pull.state) return scope.executableDefaultAction = !0, 
                    "Delete";
                    if (scope.tree.pull.mergeable_state && ("clean" == scope.tree.pull.mergeable_state || "dirty" == scope.tree.pull.mergeable_state)) {
                        var mergeable = scope.isMergeable();
                        return scope.executableDefaultAction = scope.isMergeable(), mergeable ? "Merge" : "Can't merge";
                    }
                    return !scope.tree.pull.mergeable_state || "clean" != scope.tree.pull.mergeable_state && "dirty" != scope.tree.pull.mergeable_state ? (updateMergeableStatus(), 
                    scope.executableDefaultAction = !1, "Checking if mergeable") : "";
                }, scope.merge = function() {
                    if (scope.isMergeable() && scope.canWriteBase) {
                        var m = githubService.model;
                        pingendo.confirm("Are you sure you want to merge " + m.branch + " into master ?", function(answer) {
                            answer && (githubService.startProgressBar(), scope.merging = !0, githubService.merge(m.pr.split("/")[1], m.pr.split("/")[2], m.pr.split("/")[3], function(err, data) {
                                err && scope.showError("Error merging : ", err), scope.$apply(function() {
                                    for (var i = 0; i < scope.repo.pulls.length; i++) scope.repo.pulls[i].number == m.pr.split("/")[3] && (scope.merging = !1, 
                                    scope.repo.pulls[i].merged = !0, scope.repo.pulls[i].state = "closed", scope.repo.pulls[i].active = !1, 
                                    githubService.gotoState("/" + m.pr.split("/")[1] + "/" + m.pr.split("/")[2]), githubService.completeProgressBar());
                                });
                            }));
                        });
                    }
                }, scope.deleteBranch = function() {
                    var m = githubService.model;
                    pingendo.confirm("Are you sure you want to delete branch " + m.branch + " ?", function(answer) {
                        answer && (githubService.startProgressBar(), githubService.deleteRef(m.owner, m.repo, "heads/" + m.branch, function(errClose, dataClosing) {
                            githubService.completeProgressBar();
                            var headOwner = m.pr.split("/")[1], headRepo = m.pr.split("/")[2];
                            githubService.gotoState("/" + headOwner + "/" + headRepo);
                        }));
                    });
                }, scope.closePull = function() {
                    if (scope.isCloseable()) {
                        githubService.startProgressBar(), scope.closing = !0;
                        var m = githubService.model;
                        githubService.changeStatusPullRequest(m.pr.split("/")[1], m.pr.split("/")[2], m.pr.split("/")[3], "closed", function(errClose, dataClosing) {
                            scope.$apply(function() {
                                scope.closing = !1;
                            }), errClose ? (scope.showError("Error closing pull : ", errClose), githubService.completeProgressBar()) : scope.$apply(function() {
                                for (var i = 0; i < scope.repo.pulls.length; i++) scope.repo.pulls[i].number == m.pr.split("/")[3] && (scope.closing = !1, 
                                scope.repo.pulls[i].state = "closed", scope.repo.pulls[i].active = !1, githubService.gotoState("/" + m.pr.split("/")[1] + "/" + m.pr.split("/")[2]), 
                                githubService.completeProgressBar());
                            });
                        });
                    }
                }, scope.publishToGhPages = function() {
                    var callback = function(error) {
                        error ? scope.showError("Error merging to gh-pages  : ", error) : alert("published"), 
                        githubService.completeProgressBar();
                    };
                    pingendo.confirm("Press ok to confirm", function(answer) {
                        if (answer) {
                            githubService.startProgressBar();
                            var m = githubService.model;
                            githubService.getRef(m.owner, m.repo, "heads/gh-pages", function(err, data) {
                                if (data) {
                                    var pull = {
                                        title: "Pull to gh-pages",
                                        body: "",
                                        base: "gh-pages",
                                        head: "master"
                                    };
                                    githubService.createPullRequest(m.owner, m.repo, pull, function(err, pullCreated) {
                                        err ? (scope.showError("Error creating pull request gh-pages  : ", err), githubService.completeProgressBar()) : githubService.merge(m.owner, m.repo, pullCreated.number, function(errorMergeGhPages, data) {
                                            callback(errorMergeGhPages);
                                        });
                                    });
                                } else githubService.getRef(m.owner, m.repo, "heads/master", function(err, data) {
                                    var ref = {
                                        ref: "refs/heads/gh-pages",
                                        sha: data
                                    };
                                    githubService.createRef(m.owner, m.repo, ref, function(errCreate, data) {
                                        callback(errCreate);
                                    });
                                });
                            });
                        }
                    });
                }, scope.reopenPull = function() {
                    if ("closed" == scope.tree.pull.state && (scope.canWrite || scope.canWriteBase)) {
                        githubService.startProgressBar(), scope.closing = !0;
                        var m = githubService.model;
                        githubService.changeStatusPullRequest(m.pr.split("/")[1], m.pr.split("/")[2], m.pr.split("/")[3], "open", function(errClose, dataClosing) {
                            scope.$apply(function() {
                                scope.closing = !1;
                            }), errClose ? (scope.showError("Error while re-opening pull : ", errClose), githubService.completeProgressBar()) : scope.$apply(function() {
                                scope.tree.pull.state = "open", scope.repo.pulls.unshift(scope.tree.pull), scope.selectPull(scope.tree.pull), 
                                githubService.completeProgressBar();
                            });
                        });
                    }
                }, scope.isCloseable = function() {
                    return !!scope.repo && (!!scope.tree.pull && ("closed" != scope.tree.pull.state && (scope.canWrite || scope.canWriteBase)));
                }, scope.isMergeable = function() {
                    return !!scope.tree.pull && (("clean" == scope.tree.pull.mergeable_state || "dirty" == scope.tree.pull.mergeable_state) && (!!scope.tree.pull.mergeable && "closed" != scope.tree.pull.state));
                };
            } else element.remove();
        }
    };
} ]), angular.module("p-directives").directive("pGitFiles", [ "pingendo", "githubService", "ModalService", function(pingendo, githubService, ModalService) {
    return {
        template: ' <div class="row m-b-0 m-t-lg  " style="top:20px">                      <div class="col-sm-12">                        <h4 class="text-muted p-x-lg">Pages                          <button ng-disabled="!canWrite || repo.playground" class="fa fa-plus pull-right text-x" ng-click="createFile()"></button>                        </h4>                      </div>                     </div>                     <ul class="m-l-sm list-group">                        <li ng-repeat="file in tree.files | orderBy:\'+path\' | filter:{ type: \'html\' } " ng-dblclick="edit(file)" ng-click="$evalAsync(select(file))" class="list-group-item file p-x-lg" ng-class="{active: file == blob}" >                          <p-file-actions class="pull-right" ng-if="file == blob"></p-file-actions>                          <a>                            {{file.path}}                            <span ng-if="file.status" class="label {{getClassForStatus(file.status)}}">{{file.status}}</span>                          </a>                        </li>                      </ul>                                            <div class="row m-t-lg">                        <div class="col-sm-12">                          <h4 class="text-muted p-x-lg">Themes                            <a ng-disabled="!canWrite || repo.playground" class="fa fa-plus pull-right text-x" ng-click="createTheme()"></a>                          </h4>                          </div>                        </div>                      </div>                      <div class="row" >                      <div class="col-lg-12">                        <ul class="list-group">                          <li ng-repeat="file in tree.files | orderBy:\'+path\' | filter:{ type: \'theme\' } " nong-dblclick="preview(file)" ng-click="select(file)" class="list-group-item file p-x-lg" ng-class="{active: file == blob}" >                          <p-file-actions class="pull-right" ng-if="file == blob"></p-file-actions>                          <a>                            {{file.path}}                            <span ng-if="file.status" class="label {{getClassForStatus(file.status)}}">{{file.status}}</span>                          </a>                        </li>                        </ul>                      </div>                    </div>                                            <div class="row m-t-lg">                        <div class="col-sm-12">                          <h4 class="text-muted p-x-lg">Assets                            <button ng-disabled="!canWrite || repo.playground" class="fa fa-plus pull-right text-x" style="position:relative">                              <input ng-disabled="!canWrite || repo.playground" type="file" class="pull-right" ng-model="fileUploded" base-sixty-four-input style="opacity:0; top:0px;position:absolute;cursor:pointer">                            </button>                          </h4>                          </div>                        </div>                      </div>                    <div class="row" >                      <div class="col-lg-12">                        <ul class="list-group">                          <li ng-repeat="file in tree.files | orderBy:\'+path\' | filter:{ type: \'asset\' } " ng-dblclick="preview(file)" ng-click="select(file)" class="list-group-item file p-x-lg" ng-class="{active: file == blob}" >                          <p-file-actions class="pull-right" ng-if="file == blob"></p-file-actions>                          <a>                            {{file.path}}                            <span ng-if="file.status" class="label {{getClassForStatus(file.status)}}">{{file.status}}</span>                          </a>                        </li>                        </ul>                      </div>                    </div>',
        link: function(scope, element, attrs, $http) {
            scope.preview = function() {
                window.open(scope.blob.previewUrl, scope.blob.previewUrl);
            }, scope.edit = function() {
                var tree = scope.$parent.$parent.tree, path = encodeURIComponent(githubService.model.path).split("%2F").join("/");
                if (tree.pull) var repo = tree.pull.base.repo, namePull = encodeURIComponent(tree.pull.head.ref), url = "/" + tree.pull.head.repo.owner.login + "/" + tree.pull.head.repo.name + "/edit/" + namePull + "/" + path + "?pr=/" + repo.owner.login + "/" + repo.name + "/" + tree.pull.number; else url = "/" + (repo = scope.$parent.$parent.repo).owner.login + "/" + repo.name + "/edit/master/" + path;
                window.open(url, url, "", !0);
            }, scope.select = function(file) {
                history.pushState(null, "", scope.getUrlForFile(file)), setTimeout(function() {
                    githubService.refreshModel();
                }, 1);
            }, scope.$watch("blob", function(newValue) {
                if (scope.tree.files) for (var i = 0; i < scope.tree.files.length; i++) scope.tree.files[i].selected = !1;
                newValue && (newValue.selected = !0, scope.$parent.fileSelected = newValue);
            }), scope.$watch("fileUploded", function(newValue, oldValue) {
                if (scope.fileUploded) {
                    githubService.startProgressBar();
                    for (var fileName = scope.fileUploded.filename, i = 0; i < scope.tree.files.length; i++) if (scope.tree.files[i].path == fileName) return alert("error file alreadly exists"), 
                    void githubService.progressbar.complete();
                    var m = githubService.model;
                    if (scope.tree.pull) var owner = scope.tree.pull.head.repo.owner.login, repo = scope.tree.pull.head.repo.name, ref = scope.tree.pull.head.ref; else var owner = m.owner, repo = m.repo, ref = m.branch;
                    githubService.pushFile2(owner, repo, ref, fileName, "", scope.fileUploded.base64, function(errPush, dataPush) {
                        errPush ? (scope.showError("Error creating file : ", errPush), githubService.progressbar.complete()) : scope.$apply(function() {
                            var file = dataPush.content;
                            new URI(file);
                            file.type = githubService.getFileType(file), scope.tree.pull && (file.status = "added"), 
                            scope.tree.files.push(file), scope.select(file), githubService.progressbar.complete();
                        });
                    });
                }
            }), scope.createTheme = function() {
                scope.canWrite && ModalService.showModal({
                    templateUrl: "/views/create-theme.html",
                    controller: "CreateThemeController",
                    controllerAs: "p"
                }).then(function(modal) {
                    modal.element.modal();
                });
            }, scope.createFile = function() {
                scope.canWrite && ModalService.showModal({
                    templateUrl: "/views/create-file.html",
                    controller: "CreateFileController",
                    controllerAs: "p"
                }).then(function(modal) {
                    modal.element.modal();
                });
            }, scope.pagesHasSelection = function() {
                if (scope.tree.files) for (var x = 0; x < scope.tree.files.length; x++) if (scope.tree.files[x].path.endsWith("html") && scope.tree.files[x].selected) return !0;
            }, scope.assetsHasSelection = function() {
                if (scope.tree.files) for (var x = 0; x < scope.tree.files.length; x++) if (!scope.tree.files[x].path.endsWith("html") && scope.tree.files[x].selected) return !0;
            }, scope.getUrlForFile = function(file) {
                var m = githubService.model, newUurl = "/" + m.owner + "/" + m.repo + "/blob/" + m.branch + "/" + encodeURIComponent(file.path).split("%2F").join("/");
                return scope.tree.pull && (newUurl = newUurl + "?pr=" + m.pr), newUurl;
            }, scope.getClassForStatus = function(status) {
                return "added" == status ? "label-success" : "removed" == status ? "label-danger" : "modified" == status ? "label-warning" : "renamed" == status ? "label-info" : void 0;
            };
        }
    };
} ]), pApp.isWeb() && angular.module("p-directives").directive("pGitAccount", [ "pingendo", "githubService", "$sce", function(pingendo, githubService, $sce) {
    return {
        template: '                  <div class="container-fluid m-t-0">                    <div class="row">                      <div class="col-xs-2 sidebar p-a-0 p-t-md p-x-lg text-center">                        <img class="img-circle m-y-md" style="width:45%" ng-src="{{user.photoURL}}">                        <h4 class="text-muted m-t-0">{{user.username}}</h3>                        <br>                        <a ng-click="addRepo()" ng-if="ownerPageLogged" class="btn btn-primary btn-block m-b-sm">Create new repo</a>                        <small>View on <a target="_blank" href="http://github.com/{{user.username}}/">Github</a></small>                      </div>                      <div class="col-xs-5 sidebar p-a-0 p-t-md p-x-lg">                              <h3>Active projects <a class="btn btn-x pull-right" ng-click="connectRepo()">Start a new project</a></h3>                              <br>                              <p ng-if="user.repos.length == 0">No projects configured yet.</p>                              <ul class="list-unstyled">                                    <li ng-repeat="(k,repo) in user.repos"  class="m-y-md">                                      <a p-state="{{user.username}}/{{k}}">                                        {{k}}                                        &nbsp;&nbsp;<span ng-if="repo.private" class="label label-success ">private</span>                                      </a>                                      \x3c!--&nbsp;<span ng-if="repo.private" class="label label-info">Private</span>--\x3e                                    </li>                              </ul>                            </div>                            <div class="col-xs-5 sidebar p-a-0 p-t-md p-x-lg">                              <h3>Recent pages</h3>                              <br>                              <ul class="list-unstyled">                                  <li ng-repeat="page in recents"  class="m-y-md">                                    <a p-state="{{page}}">                                      {{page}}                                    </a>                                  </li>                              </ul>                            </div>                      </div>                    </div>                  </div>',
        link: function(scope, element, attrs) {
            if (!pApp.isDesktop()) if (githubService.isLogged()) {
                var r = localStorage.getItem("p-recents");
                r && (r = JSON.parse(r), $(r).each(function(i, v) {
                    var uri = new URI(r[i]);
                    r[i] = uri.path();
                }), scope.recents = r), scope.connectRepo = function() {
                    githubService.addRepo();
                };
            } else githubService.showLogin();
        }
    };
} ]), angular.module("p-directives").directive("pGitBlob", [ "pingendo", "githubService", "$sce", "$timeout", function(pingendo, githubService, $sce, $timeout) {
    return {
        template: '<div ng-show="!loaded" class="m-a-md">                    Loading                  </div>                  <a class="wrapper" href="{{blobPreview.url}}" >                    <img ng-show="blobPreview && blobPreview.type == \'image\'" src="{{blobPreview.url}}" style="max-width:100%"></img>                    <iframe ng-if="blobPreview && blobPreview.type == \'iframe\'" p-autozoom src="{{blobPreview.url}}" class="2base" nosandbox="allow-same-origin allow-scripts" frameborder="0"></iframe>                  </a>',
        link: function(scope, element, attrs, $http) {
            window.gitBlob = this;
            githubService.model;
            scope.loaded = !0, scope.element = element;
            Math.floor(1e9 * Math.random());
            scope.$watch("blob", function(val) {
                var url = scope.blob.previewUrl;
                /\.(gif|jpg|jpeg|tiff|png)$/i.test(scope.blob.path) ? scope.blobPreview = {
                    type: "image",
                    url: $sce.trustAsResourceUrl(url)
                } : scope.blobPreview = {
                    type: "iframe",
                    url: $sce.trustAsResourceUrl(url)
                };
            }), scope.isComparing = !1, scope.resolutionX = 1440, scope.resolutionY = 900;
            element.find("iframe")[0];
        }
    };
} ]), angular.module("p-directives").directive("pAutozoom", [ "pingendo", "githubService", "$sce", "$timeout", function(pingendo, githubService, $sce, $timeout) {
    return {
        link: function($scope, element) {
            setTimeout(function() {
                update();
            }, 100), element[0].addEventListener("load", function() {
                update();
            });
            var resizeTimer = null;
            $(window).on("resize", function() {
                clearTimeout(resizeTimer), resizeTimer = setTimeout(update, 250);
            });
            var update = function() {
                var computed = window.getComputedStyle($(element)[0].parentElement), w = parseInt(computed.width), scale = Number(w) / 1440, $t = $(element);
                $t.width(1440), $t.height(parseInt(computed.height) / scale), $t.css("transform-origin", "0 0"), 
                $t.css("transform", "scale(" + scale + ")");
            };
        }
    };
} ]), angular.module("p-directives").directive("pGitTree", [ "pingendo", "githubService", "$sce", "ModalService", function(pingendo, githubService, $sce, ModalService) {
    return {
        template: '<div  class="container-fluid m-y-0">                    <div class="row">                      <div class="col-sm-3 p-a-0 p-t-md  sidebar">                        <div class="m-y-md p-x-lg" >                          <span>                              <img title="{{owner.login}}" ng-src="{{owner.avatar_url}}" class="p-r-2 img-circle" style="width:32px"/>&nbsp;                          </span>                          <span ng-repeat="collaborator in collaborators" >                            <img title="{{collaborator.login}}" ng-src="{{collaborator.avatar_url}}" class="p-r-2 img-circle" style="width:32px"/>&nbsp;                          </span>                          \x3c!--<i class="fa fa-plus user-circle text-white bg-primary"></i>--\x3e                        </div>                        <a class="p-x-lg list-group-item" ng-class="{active: tree && !tree.pull}"  ng-click="selectPull(null)" p-state="/{{repo.owner.login}}/{{repo.name}}">Master version</a>                        <h4 class="p-x-lg p-t-lg text-muted float-left">                          Pull requests                          <select class="pull-right" style="font-size:12px" ng-model="pullFilter" ng-init="pullFilter = \'open\'">                            <option value="open">open</option>                            <option value="close">closed</option>                          </select>                        </h4>                        <ul class="list-group">                          <li ng-repeat="pull in repo.pulls | filter:{ state: pullFilter } "  p-state="{{getPullState(pull)}}" ng-click="selectPull(pull)" class="list-group-item p-x-lg" ng-class="{active: pull.active}">                            <span class="badge m-l">#{{pull.number}}</span>                            <a class="">                              {{pull.title}}                            </a>                          </li>                        </ul>                        <a ng-disabled="!isLogged || repo.playground || !canWrite " class="btn btn-x m-l-lg" ng-click="createPull()">New pull request</a>                      </div>                                            <div ng-if="!tree" class="col-sm-4 p-t-md" ><p>Loading..</p></div>                      <div ng-if="tree" class="col-sm-4 p-a-0 p-t-md middlepanel">                          <h3 ng-if="!tree.pull" class="p-x-lg text-primary">                            <i ng-class="{\'fa fa-lock\' : !canWrite}" ></i> Master version                            <p-git-repo-actions class="pull-right"></p-git-repo-actions>                          </h3>                          <p ng-if="!tree.pull"  class="p-x-lg lead text-muted">                            <span ng-if="!tree.pull">Last updated {{lastUpdateRepo}}</span>                          <p>                          <h3 ng-if="tree.pull" class="p-x-lg text-primary" ng-class="{strike: tree.pull.state == \'closed\'}">                            <p-git-repo-actions class="pull-right m-l"></p-git-repo-actions>                            <span><i ng-class="{\'fa fa-lock\' : !canWrite}" ></i> {{tree.pull.title}}</span>                          </h3>                          <p ng-if="tree.pull"  class="p-x-lg lead text-muted">                            Proposal of change by {{tree.pull.user.login}}<br>                              <span ng-show="tree.pull.state == \'open\' && !tree.pull.merged">Last updated {{lastUpdateRepo}}</span>                              <span ng-show="tree.pull.state == \'closed\' && !tree.pull.merged" >Closed</span>                              <span ng-show="tree.pull.merged">Merged</span>                            <br>                          </p>                          <p-git-files></p-git-files>                          \x3c!--<h3  ng-if="tree.pull">Comments</h3>                          <div ng-if="tree.pull" class="row" >                            <div class="col-md-7">                              <div class="panel panel-default">                                <div class="panel-heading">                                  <h4 class="panel-title">Write</h4>                                </div>                                <div class="panel-body">                                  <form role="form">                                    <div class="form-group">                                      <textarea class="form-control" id="comment"></textarea>                                    </div>                                  </form>                                  <a class="btn btn-success pull-right" ng-class="{disabled: disableCommentBtn }" ng-click="comment()" >Comment</a>                                </div>                              </div>                            </div>                          </div>--\x3e                          <br>                          <h3 ng-if="!tree.pull && issuesEvents.length > 0" class="p-x-lg">Activities</h3>                          <div ng-if="!tree.pull" class="p-x-lg" ng-repeat="event in issuesEvents">                            <p ng-bind-html="event"></p>                          </div>                          <div ng-if="tree.pull" class="row" ng-repeat="comment in comments" >                            <div class="col-md-7">                              <div class="panel panel-default">                                <div class="panel-heading">                                  <h3 class="panel-title"><a p-state="/{{comment.user.login}}">{{comment.user.login}}</a> commented <small>{{comment.created_at}}</small></h3>                                </div>                                <div class="panel-body">                                  <p>{{comment.body}}</p>                                </div>                              </div>                            </div>                         </div>                         <div ng-if="tree.pull && tree.pull.body !=\'\' " class="row">                            <div class="col-md-7">                              <div class="panel panel-default">                                <div class="panel-heading">                                  <h3 class="panel-title"><a p-state="/{{tree.pull.user.login}}">{{tree.pull.user.login}}</a> commented <small>{{tree.pull.created_at}}</small></h3>                                </div>                                <div class="panel-body">                                  <p>{{tree.pull.body}}</p>                                </div>                              </div>                            </div>                          </div>                          <br><br>                      <small ng-if="!tree.pull" class="p-x-lg">View on <a target="_blank" href="http://github.com/{{repo.owner.login}}/{{repo.name}}">Github</a></small>                        <small ng-if="tree.pull" class="p-x-lg">View on <a target="_blank" href="http://github.com/{{repo.owner.login}}/{{repo.name}}/pull/{{tree.pull.number}}">Github</a></small>                        <br><br><br><br>                    </div>                    <div class="col-sm-5 rightpanel p-a-0">                       <p-git-blob ng-if="blob && fileSelected.status != \'removed\' "></p-git-blob>                    </div>                  </div></div>',
        link: function(scope, element, attrs, $http) {
            scope.m = githubService.model, scope.username = githubService.username;
            var owner = scope.m.pr ? scope.m.pr.split("/")[1] : scope.m.owner;
            githubService.getUser(owner, function(err, data) {
                scope.owner = data;
            }), scope.selectPull = function(pull) {
                $(scope.repo.pulls).each(function() {
                    this.active = !1;
                }), pull && (pull.active = !0);
            }, scope.showSettingsProject = function() {
                githubService.showSettingsProject();
            }, scope.addCollaborator = function() {
                ModalService.showModal({
                    templateUrl: "/views/add-collaborator.html",
                    controller: "AddCollaboratorController",
                    controllerAs: "p"
                }).then(function(modal) {
                    modal.element.modal();
                });
            }, scope.getPullState = function(pull) {
                var pullName = encodeURIComponent(pull.head.ref);
                return "/" + pull.head.repo.owner.login + "/" + pull.head.repo.name + "/tree/" + pullName + "?pr=/" + scope.repo.owner.login + "/" + scope.repo.name + "/" + pull.number;
            }, scope.createPull = function() {
                ModalService.showModal({
                    templateUrl: "/views/create-pull.html",
                    controller: "CreatePullController",
                    controllerAs: "p"
                }).then(function(modal) {
                    modal.element.modal();
                });
            }, scope.logout = function() {
                githubService.logout(), window.location.reload();
            };
        }
    };
} ]), angular.module("p-directives").directive("pGitAutoreload", [ "githubService", function(githubService) {
    return {
        link: function(scope, element) {
            $(window).on("pDOMSave", function() {
                localStorage.setItem(pEditor.editorInput.url, pEditor.html);
            }), $(window).on("pThemeSave", function(e, theme) {
                var absSASSUrl = pEditor.editorInput.resolve(pEditor.themeSupport.getTheme().themeURL), absCSSUrl = pEditor.editorInput.resolve(pEditor.themeSupport.getTheme().cssURL);
                localStorage.setItem(absSASSUrl, pEditor.themeSupport.getTheme().source), console.log(absSASSUrl, pEditor.themeSupport.getTheme().source), 
                localStorage.setItem(absCSSUrl, pEditor.themeSupport.getTheme().css), console.log(absCSSUrl, pEditor.themeSupport.getTheme().css);
            }), $(window).on("storage", function(e) {
                if (pEditor && pEditor.themeSupport && pEditor.themeSupport.getTheme()) {
                    var url = e.originalEvent.key, absCss = pEditor.editorInput.resolve(pEditor.themeSupport.getTheme().cssURL), absSass = pEditor.editorInput.resolve(pEditor.themeSupport.getTheme().themeURL);
                    url == absCss ? refreshCss(e.originalEvent.newValue) : url == absSass && refreshSass(e.originalEvent.newValue);
                }
            });
            var refreshSass = function(newValue) {
                pEditor.themeSupport.getTheme().isDirty = !1, pEditor.themeSupport.setSource(pEditor.themeSupport.getTheme(), newValue, !0), 
                $(pEditor).trigger("pThemeCompiled");
            }, refreshCss = function(newValue) {
                pEditor.themeSupport.getTheme().css = newValue, pEditor.themeSupport._rewriteHead(), 
                handler();
            };
            $(window).on("storage", function(e) {
                var model = githubService.model, scopeGitBlob = angular.element($("p-git-blob")).scope();
                if ("blob" == model.mode || "tree" == model.mode) {
                    try {
                        var info = new githubService.GHEditorInput(e.originalEvent.key).getInfo();
                    } catch (e) {
                        return;
                    }
                    if (console.log("--\x3e", info, model), info.owner == model.owner && info.repo == model.repo && info.branch == model.branch) {
                        for (i = 0; i < scope.tree.files.length; i++) {
                            var file = scope.tree.files[i];
                            info.path == file.path && 1 == file.selected && ($(scopeGitBlob.element).find("iframe")[0].src = $(scopeGitBlob.element).find("iframe")[0].src);
                        }
                        if (scope.tree.pull) for (var i = 0; i < scope.tree.files.length; i++) info.path == scope.tree.files[i].path && "new" != scope.tree.files[i].status && (scope.tree.files[i].status = "modified", 
                        scope.$apply());
                    }
                }
            });
        }
    };
} ]), console.log("Is web", pApp.isWeb()), pApp.isWeb() && ($(document.body).append("<p-git></p-git>"), 
angular.bootstrap(document, [ "p-directives", "ui.bootstrap", "ngProgress" ])), 
function() {
    if (pApp.isDesktop()) {
        pApp.shell = require("electron").shell, pApp.dialog = require("electron").remote.dialog, 
        pApp.fs = require("fs"), pApp.path = require("path"), pApp.app = require("electron").remote.app, 
        pApp.browserWindow = require("electron").remote.BrowserWindow, pApp.ipcRenderer = require("electron").ipcRenderer, 
        pApp.shell = require("electron").shell;
        var sharedObject = require("electron").remote.getGlobal("sharedObject");
        if (pApp.isTest = void 0 !== sharedObject && "test" == sharedObject.argv[1], "undefined" == typeof licenseWindow) {
            $(document.body).append("<p-toolbar></p-toolbar>"), $(document.body).append("<p-layout></p-layout>"), 
            $(document.body).append("<p-restore></p-restore>"), $(document.body).addClass("desktop"), 
            angular.bootstrap(document, [ "p-directives", "ui.bootstrap" ]), $(document.body).find("> .loader").remove();
            $(window).on("pTabChange pDOMSave", function() {
                var win = pApp.browserWindow.getFocusedWindow();
                win && (pEditor ? !pEditor.editorInput || pEditor.editorInput.isTemp() ? win.setTitle("Pingendo - Untitled.html") : win.setTitle("Pingendo - " + pEditor.editorInput.url) : win.setTitle("Pingendo"));
            }), $(window).on("pThemeChange pThemeSaved pDirtyChange", function() {
                var themeDirty = !1;
                pEditor.themeSupport.getTheme() && (themeDirty = pEditor.themeSupport.getTheme().isDirty), 
                (pEditor.dirty || themeDirty) && pApp.ipcRenderer.sendSync("synchronous-message", "setCanExitFalse");
            }), pApp.app.on("open-file", function(event, pathToOpen) {
                pTabs.open(pathToOpen);
            }), $(document).on("pReady", function() {
                $(document.body).find("> .loader").remove(), overrideFunctions();
                var pingendo = angular.element(document.body).injector().get("pingendo");
                if (process.on("uncaughtException", function(e) {
                    console.log("UNHANDLE", e);
                }), "win32" != process.platform || pApp.isTest) {
                    if ("darwin" == process.platform) {
                        var ret = pApp.ipcRenderer.sendSync("synchronous-message", "starts-whit-path");
                        if (ret) return void pingendo.openEditor(ret);
                    }
                } else try {
                    if (require("electron").remote.process.argv[1]) return void pingendo.openEditor(require("electron").remote.process.argv[1]);
                } catch (e) {
                    console.log("REMOTE NOT FOUND");
                }
            });
            var overrideFunctions = function() {
                pCommands.get("pcmd_load_theme").handler = function() {
                    document.activeElement.blur(), pApp.dialog.showOpenDialog({
                        title: "Choose a theme..",
                        filters: [ {
                            name: "Custom File Type",
                            extensions: [ "css" ]
                        } ],
                        properties: [ "openFile" ]
                    }, function(filenames) {
                        filenames && (pEditor.editorInput.isTemp() ? pEditor.loadTheme(filenames[0]) : pEditor.loadTheme(pEditor.editorInput.relative(filenames[0])));
                    });
                };
                pCommands.get("pcmd_openLocal").handler = function(path) {
                    var pingendo = angular.element(document.body).injector().get("pingendo");
                    if (pApp.isTest) if ("win32" == process.platform) path = "\\Windows\\Temp\\1.html"; else var path = "/tmp/1.HTML";
                    path ? pingendo.openEditor(path) : pApp.dialog.showOpenDialog({
                        title: "Choose a file..",
                        filters: [ {
                            name: "Custom File Type",
                            extensions: [ "html", "shtml", "php" ]
                        } ],
                        properties: [ "openFile", "multiSelections" ]
                    }, function(arrayUri) {
                        if (arrayUri) {
                            $(document).find(".modal").modal("hide");
                            for (var o = 0, i = 0; i < arrayUri.length; i++) !function(obj, index) {
                                pingendo.openEditor(arrayUri[index], null);
                            }(arrayUri[i], o), o++;
                        }
                    });
                };
            };
        }
    }
}();